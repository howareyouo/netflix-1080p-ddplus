function sec2time(t){return[t/3600,t/60%60,t%60].map(Math.floor).map(String).map(t=>t.padStart(2,0)).join(":")}function sec(t){return(t/1e3).toFixed(0)}function _esm(t){Object.defineProperties(t,{__esModule:{value:!0}})}function a000(){}a000.K9M=function(){return"function"==typeof a000.Z9M.T9M?a000.Z9M.T9M.apply(a000.Z9M,arguments):a000.Z9M.T9M},a000.I9M=function(){return"function"==typeof a000.Z9M.T9M?a000.Z9M.T9M.apply(a000.Z9M,arguments):a000.Z9M.T9M},a000.O9M=function(){return"function"==typeof a000.Z9M.U9M?a000.Z9M.U9M.apply(a000.Z9M,arguments):a000.Z9M.U9M},a000.h9M=function(){return"function"==typeof a000.Z9M.U9M?a000.Z9M.U9M.apply(a000.Z9M,arguments):a000.Z9M.U9M},a000.Z9M=function(i){return{T9M:function(){var t,e=arguments;switch(i){case 8:t=e[2]+e[1]+e[0];break;case 16:t=e[3]*(e[2]-e[1])-e[4]-e[0];break;case 1:t=e[1]/e[0];break;case 5:t=(e[2]-e[0])*e[1];break;case 12:t=e[1]*e[0];break;case 3:t=e[3]-e[0]-e[1]+e[2];break;case 14:t=e[2]+e[1]/e[3]*e[0];break;case 19:t=e[0]<e[1];break;case 6:t=e[0]+e[1];break;case 4:t=e[0]<e[1];break;case 2:t=e[1]*e[2]/e[0];break;case 17:t=e[1]*-e[2]/e[3]+e[0];break;case 13:t=(e[1]/e[0]|e[3])*e[2];break;case 7:t=void 0!==e[0];break;case 11:t=e[1]-e[0]*e[2];break;case 15:t=e[0]/e[2]|e[1];break;case 10:t=e[0]===e[1];break;case 9:t=e[4]+e[3]+e[1]+e[0]+e[2];break;case 18:t=e[1]<=e[0];break;case 0:t=e[1]-e[0]}return t},U9M:function(t){i=t}}}(),!function(bt,I){var Z,$,l,tt,m,O,c,et,it,x,R,nt,rt,at,ot,st,y,u,ut,ct,ht,P,C,j,ft,lt,b,N,_,E,dt,M,pt,k,S,gt,mt,vt,yt,wt,At,_t,Et,kt,St,Tt,It,Ot,xt,Rt,Pt,Ct,jt,Nt,Mt,Dt,Lt,Bt,Ut,Ft,qt,Ht,Kt,Gt,Vt,Yt,Jt,zt,Wt,Qt,L,Xt,Zt,$t,te,ee,ie,ne,re,ae,oe,se,ue,ce,he,fe,le,de,pe,be,ge,me,ve,ye,we,Ae,_e,Ee,ke,Se,Te,Ie,Oe,xe,Re,Pe,Ce,je,Ne,Me,De,Le,Be,Ue,Fe,qe,He,Ke,Ge,Ve,Ye,Je,ze,We,Qe,Xe,Ze,$e,ti,ei,ii,ni,ri,ai,oi,si,ui,ci,hi,fi,li,di,pi,bi,gi,mi,vi,yi,wi,Ai,_i,Ei,ki,Si,Ti,Ii,Oi,xi,Ri,Pi,Ci,ji,Ni,Mi,Di,Li,i,r,U,Bi,a,Ui,Fi,qi,Hi,Ki,Gi,Vi,Yi,Ji,o,zi,Wi,Qi,Xi,Zi,$i,tn,en,nn,rn,an,on,sn,un,F,cn,H,hn,fn,ln,dn,pn,bn,gn,mn,vn,yn,wn,An,_n,En,kn,Sn,Tn,In,On,xn,Rn,Pn,Cn,jn,Nn,Mn,Dn,Ln,Bn,Un,Fn,qn,Hn,Kn,Gn;function K(t,e){if(e&&"utf-8"!==e)throw Error("unsupported encoding");return Vn(t)}function G(t,e){if(e&&"utf-8"!==e)throw Error("unsupported encoding");return Yn(t)}function Vn(t){for(var e,i=0,n=t.length,r="";i<n;){if(128&(e=t[i++]))if(192==(224&e))e=((31&e)<<6)+(63&t[i++]);else{if(224!=(240&e))throw Error("unsupported character");e=((15&e)<<12)+((63&t[i++])<<6)+(63&t[i++])}r+=String.fromCharCode(e)}return r}function Yn(t){for(var e,i=t.length,n=0,r=0,a=i;a--;)(e=t.charCodeAt(a))<128?n++:n=e<2048?n+2:n+3;for(n=new Uint8Array(n),a=0;a<i;a++)(e=t.charCodeAt(a))<128?n[r++]=e:(e<2048?n[r++]=192|e>>>6:(n[r++]=224|e>>>12,n[r++]=128|e>>>6&63),n[r++]=128|63&e);return n}function Jn(t,e){if(t===e)return!0;if(!t||!e||t.length!=e.length)return!1;for(var i=0;i<t.length;++i)if(t[i]!=e[i])return!1;return!0}function zn(t){var e;if(!(t&&t.constructor==Uint8Array||Array.isArray(t)))throw new TypeError("Cannot compute the hash code of "+t);for(var i=1,n=0;n<t.length;++n){if("number"!=typeof(e=t[n]))throw new TypeError("Cannot compute the hash code over non-numeric elements: "+e);i=31*i+e&4294967295}return i}function Wn(t,e){var i;if(t===e)return!0;if(!t||!e)return!1;e instanceof Array||(e=[e]);for(var n=0;n<e.length;++n){for(var r=e[n],a=!1,o=0;o<t.length;++o)if(i=t[o],r.equals&&"function"==typeof r.equals&&r.equals(i)||r==i){a=!0;break}if(!a)return!1}return!0}function Qn(t,e){return Wn(t,e)&&(t.length==e.length||Wn(e,t))}function V(e,t,i){var n,r;if(i&&(n=i),"object"!=typeof e||"function"!=typeof e.result||"function"!=typeof e.error)throw new TypeError("callback must be an object with function properties 'result' and 'error'.");try{(r=t.call(n,e))!==I&&e.result(r)}catch(t){try{e.error(t)}catch(t){}}}function Y(t,e,i){if("object"!=typeof t||"function"!=typeof t.timeout)throw new TypeError("callback must be an object with function properties 'result', 'timeout', and 'error'.");V(t,e,i)}function J(t,e,i){t<1e5&&(t=1e5+t),Object.defineProperties(this,{internalCode:{value:t},responseCode:{value:e},message:{value:i}})}function Xn(t){switch(t){case L.PSK:case L.MGK:return!0;default:return!1}}function Zn(t){switch(t){case L.PSK:case L.MGK:case L.X509:case L.RSA:case L.NPTICKET:case L.ECC:return!0;default:return!1}}function $n(t){return t.toJSON()}function tr(t,e){ji?e.result(ji):Promise.resolve().then(function(){return k.getKeyByName(t)}).catch(function(){return k.generateKey({name:t},!1,["wrapKey","unwrapKey"])}).then(function(t){ji=t,e.result(ji)}).catch(function(t){e.error(new P(J.INTERNAL_EXCEPTION,"Unable to get system key"))})}function er(t,e){var i=e.masterToken,n=e.userIdToken;return e=e.serviceTokens,{NccpMethod:t.method,UserId:t.userId,UT:n&&n.serialNumber,MT:i&&i.serialNumber+":"+i.sequenceNumber,STCount:e&&e.length}}function ir(t){return t.uniqueKey()}function nr(l,n,r,d,p){var a;function b(t){(t=d.getUserIdToken(t))&&(d.removeUserIdToken(t),g())}function g(){d.getStoreState({result:function(t){for(var e=a.slice(),i=0;i<e.length;i++)e[i]({storeState:t})},timeout:function(){l.error("Timeout getting store state",""+e)},error:function(t){l.error("Error getting store state",""+t)}})}a=[],this.addEventHandler=function(t,e){"shouldpersist"===t&&a.push(e)},this.send=function(f){return new Promise(function(u,c){var h=f.timeout,t=new Mi(l,r,f,d.getKeyRequestData()),e=new pe(f.url);l.trace("Sending MSL request"),n.request(r,t,e,h,{result:function(t){var e,i,n,r,s,a,o;l.trace("Received MSL response",{Method:f.method}),t?(f.allowTokenRefresh&&g(),(e=t.getErrorHeader())?(a=e,o=f.profileGuid||f.userId,a.errorCode===y.ENTITY_REAUTH||a.errorCode===y.ENTITYDATA_REAUTH?(d.clearCryptoContexts(),g()):a.errorCode!==y.USER_REAUTH&&a.errorCode!==y.USERDATA_REAUTH||b(o),c({success:!1,error:e})):(i=t,n=h,r={result:function(t){u({success:!0,body:K(t)})},timeout:function(){c({success:!1,subCode:p.MSL_READ_TIMEOUT})},error:function(t){c({success:!1,error:t})}},s=[],function o(){i.read(-1,n,{result:function(a){V(r,function(){var t,e,i,n,r;if(a)s.push(a),o();else switch(s.length){case 0:return new Uint8Array(0);case 1:return s[0];default:for(i=s.length,e=t=n=0;e<i;e++)t+=s[e].length;for(t=new Uint8Array(t),e=0;e<i;e++)r=s[e],t.set(r,n),n+=r.length;return t}})},timeout:function(){r.timeout()},error:function(t){r.error(t)}})}())):c({success:!1,error:new P(J.INTERNAL_EXCEPTION,"Null response stream"),description:"Null response stream"})},timeout:function(){c({success:!1,subCode:p.MSL_REQUEST_TIMEOUT})},error:function(t){c({success:!1,error:t})}})})},this.hasUserIdToken=function(t){return!!d.getUserIdToken(t)},this.getUserIdTokenKeys=function(){return d.getUserIdTokenKeys()},this.removeUserIdToken=b,this.clearUserIdTokens=function(){d.clearUserIdTokens(),g()},this.isErrorReauth=function(t){return t&&t.errorCode==y.USERDATA_REAUTH},this.isErrorHeader=function(t){return t instanceof De},this.getErrorCode=function(t){return t&&t.errorCode},this.getStateForMdx=function(t){var e=d.getMasterToken();return{masterToken:e,userIdToken:t=d.getUserIdToken(t),cryptoContext:d.getCryptoContext(e)}},this.buildPlayDataRequest=function(t,e){var i=new ge;n.request(r,new Mi(l,r,t),i,t.timeout,{result:function(){e.result(i.getRequest())},error:function(){e.result(i.getRequest())},timeout:function(){e.timeout()}})},this.rekeyUserIdToken=function(t,e){d.rekeyUserIdToken(t,e),g()},this.getServiceTokens=function(t){var e=d.getMasterToken();return(t=d.getUserIdToken(t))&&!t.isBoundTo(e)&&(t=I),d.getServiceTokens(e,t)},this.removeServiceToken=function(e){var t=d.getMasterToken();d.getServiceTokens(t).find(function(t){return t.name===e})&&(d.removeServiceTokens(e,t),g())}}function rr(t,e){t instanceof Vi?(this.abv=t.abv,this.position=t.position):(this.abv=t,this.position=e||0)}function ar(t){var e=t.readByte(),i=127&e;if(i==e)return i;if(3<i||0==i)return-1;for(var n=e=0;n<i;++n)e=e<<8|t.readByte();return e}function or(t,e,i){if(9==i){for(i=0;i<9;++i)if(t[e++]!=qi[i])return;return 1}}function sr(t){var e;return!!(t&&t.child&&t.child.next&&t.child.child&&t.child.next.child)&&!(!or((e=t.child.child).backingStore,e.dataIdx,e.dataLen)||2!=t.nChildren||2!=t.child.nChildren||2!=t.child.next.child.nChildren)}function ur(t){var e;return!!(t&&t.child&&t.child.next&&t.child.next.child&&t.child.next.next&&t.child.next.next.child)&&!(!or((e=t.child.next.child).backingStore,e.dataIdx,e.dataLen)||3!=t.nChildren||2!=t.child.next.nChildren||9!=t.child.next.next.child.nChildren)}function cr(t){var e=a.createSequenceNode(),i=new Ui(e);return i.addChild(a.createSequenceNode()),i.addChild(a.createOidNode(qi)),i.addSibling(a.createNullNode()),i.addToParent(e,a.createBitStringNode(null)),i.addChild(a.createSequenceNode()),i.addChild(a.createIntegerNode(t.n)),i.addSibling(a.createIntegerNode(t.e)),e}function hr(t){var e=(t=t.child.next.child.child).data;return t=t.next,new Hi(e,t.data,null,null)}function fr(t){var e=a.createSequenceNode(),i=new Ui(e);return i.addChild(a.createIntegerNode(new Uint8Array([0]))),i.addSibling(a.createSequenceNode()),i.addChild(a.createOidNode(qi)),i.addSibling(a.createNullNode()),i.addToParent(e,a.createOctetStringNode(null)),i.addChild(a.createSequenceNode()),i.addChild(a.createIntegerNode(new Uint8Array([0]))),i.addSibling(a.createIntegerNode(t.n)),i.addSibling(a.createIntegerNode(t.e)),i.addSibling(a.createIntegerNode(t.d)),i.addSibling(a.createIntegerNode(t.p)),i.addSibling(a.createIntegerNode(t.q)),i.addSibling(a.createIntegerNode(t.dp)),i.addSibling(a.createIntegerNode(t.dq)),i.addSibling(a.createIntegerNode(t.qi)),e}function lr(t){var e=[];t=t.child.next.next.child.child.next;for(var i=0;i<8;i++)e.push(t.data),t=t.next;return new Ki(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7])}function dr(t,e,i,n){if(!(t instanceof Hi||t instanceof Ki))return I;if(i)for(var r=0;r<i.length;++r)if(-1==Gi.indexOf(i[r]))return I;return e={kty:"RSA",alg:e,key_ops:i||[],ext:n!=I&&n,n:m(t.n,!0),e:m(t.e,!0)},t instanceof Ki&&(e.d=m(t.d,!0),e.p=m(t.p,!0),e.q=m(t.q,!0),e.dp=m(t.dp,!0),e.dq=m(t.dq,!0),e.qi=m(t.qi,!0)),e}function pr(t){var e,i,n,r,a,o,s,u,c,h;return t.kty&&"RSA"==t.kty&&t.n&&t.e?(e="RSA1_5 RSA-OAEP RSA-OAEP-256 RSA-OAEP-384 RSA-OAEP-512 RS256 RS384 RS512".split(" "),t.alg&&-1==e.indexOf(t.alg)?I:(e=[],t.use?"enc"==t.use?e=["encrypt","decrypt","wrap","unwrap"]:"sig"==t.use&&(e=["sign","verify"]):e=t.key_ops,i=t.ext,n=O(t.n,!0),r=O(t.e,!0),t.d?(a=O(t.d,!0),o=O(t.p,!0),s=O(t.q,!0),u=O(t.dp,!0),c=O(t.dq,!0),h=O(t.qi,!0),new Ki(n,r,a,o,s,u,c,h,t.alg,e,i)):new Hi(n,r,i,e))):I}function br(t,e,i,n){this.der=t,this.type=e,this.keyOps=i,this.extractable=n}$=bt.nfCrypto||bt.msCrypto||bt.webkitCrypto||bt.crypto,l=$&&($.webkitSubtle||$.subtle),tt=bt.nfCryptokeys||bt.msCryptokeys||bt.webkitCryptokeys||bt.cryptokeys,i=bt,rr.prototype={readByte:function(){return this.abv[this.position++]},writeByte:function(t){this.abv[this.position++]=t},peekByte:function(t){return this.abv[t]},copyBytes:function(t,e,i){var n=new Uint8Array(this.abv.buffer,this.position,i);t=new Uint8Array(t.buffer,e,i),n.set(t),this.position+=i},seek:function(t){this.position=t},skip:function(t){this.position+=t},getPosition:function(){return this.position},setPosition:function(t){this.position=t},getRemaining:function(){return this.abv.length-this.position},getLength:function(){return this.abv.length},isEndOfStream:function(){return this.position>=this.abv.length},show:function(){return"AbvStream: pos "+this.getPosition().toString()+" of "+this.getLength().toString()}},Vi=rr,r={},U={BER:0,BOOLEAN:1,INTEGER:2,BIT_STRING:3,OCTET_STRING:4,NULL:5,OBJECT_IDENTIFIER:6,OBJECT_DESCRIPTOR:7,INSTANCE_OF_EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED_PPV:11,UTF8_STRING:12,RELATIVE_OID:13,SEQUENCE:16,SET:17,NUMERIC_STRING:18,PRINTABLE_STRING:19,TELETEX_STRING:20,T61_STRING:20,VIDEOTEX_STRING:21,IA5_STRING:22,UTC_TIME:23,GENERALIZED_TIME:24,GRAPHIC_STRING:25,VISIBLE_STRING:26,ISO64_STRING:26,GENERAL_STRING:27,UNIVERSAL_STRING:28,CHARACTER_STRING:29,BMP_STRING:30},(Bi=function(t,e,i,n,r,a){this._data=t,this._parent=e||I,this._constructed=i||!1,this._tagClass=0,this._tag=n||0,this._dataIdx=r||0,this._dataLen=a||0}).prototype={_child:I,_next:I,get data(){return new Uint8Array(this._data.buffer.slice(this._dataIdx,this._dataIdx+this._dataLen))},get backingStore(){return this._data},get constructed(){return this._constructed},set constructed(t){this._constructed=0!=t},get tagClass(){return this._tagClass},set tagClass(t){this._tagClass=t},get tag(){return this._tag},set tag(t){this._tag=t},get dataIdx(){return this._dataIdx},set dataIdx(t){this._dataIdx=t},get dataLen(){return this._dataLen},set dataLen(t){this._dataLen=t},get child(){return this._child},set child(t){this._child=t,this._child.parent=this},get next(){return this._next},set next(t){this._next=t},get parent(){return this._parent},set parent(t){this._parent=t},get payloadLen(){var t=0;if(this._child){for(var e=this._child;e;)t+=e.length,e=e.next;this._tag==U.BIT_STRING&&t++}else switch(this._tag){case U.INTEGER:t=this._dataLen,this._data[this._dataIdx]>>7&&t++;break;case U.BIT_STRING:t=this._dataLen+1;break;case U.OCTET_STRING:t=this._dataLen;break;case U.NULL:t=0;break;case U.OBJECT_IDENTIFIER:or(this._data,this._dataIdx,this._dataLen)&&(t=9)}return t},get length(){var t,e=this.payloadLen;if(127<e)for(t=e;t;)t>>=8,++e;return e+2},get der(){var t=this.length;return t?(t=new Uint8Array(t),function t(e,i){var n;if(i.writeByte(e.tagClass<<6|e.constructed<<5|e.tag),(n=e.payloadLen)<128)i.writeByte(n);else{for(var r=n,a=0;r;)++a,r>>=8;for(i.writeByte(128|a),r=0;r<a;++r)i.writeByte(n>>8*(a-r-1)&255)}if(e.child)for(e.tag==U.BIT_STRING&&i.writeByte(0),e=e._child;e;){if(!t(e,i))return;e=e.next}else switch(e.tag){case U.INTEGER:e.backingStore[e.dataIdx]>>7&&i.writeByte(0),i.copyBytes(e.backingStore,e.dataIdx,e.dataLen);break;case U.BIT_STRING:i.writeByte(0),i.copyBytes(e.backingStore,e.dataIdx,e.dataLen);break;case U.OCTET_STRING:case U.OBJECT_IDENTIFIER:i.copyBytes(e.backingStore,e.dataIdx,e.dataLen)}return 1}(this,new Vi(t))?t:I):I},get nChildren(){for(var t=0,e=this._child;e;)t++,e=e.next;return t}},a={createSequenceNode:function(){return new Bi(null,null,!0,U.SEQUENCE,null,null)},createOidNode:function(t){return new Bi(t,null,!1,U.OBJECT_IDENTIFIER,0,t?t.length:0)},createNullNode:function(){return new Bi(null,null,!1,U.NULL,null,null)},createBitStringNode:function(t){return new Bi(t,null,!1,U.BIT_STRING,0,t?t.length:0)},createIntegerNode:function(t){return new Bi(t,null,!1,U.INTEGER,0,t?t.length:0)},createOctetStringNode:function(t){return new Bi(t,null,!1,U.OCTET_STRING,0,t?t.length:0)}},(Ui=function(t){this._currentNode=this._rootNode=t}).prototype={addChild:function(t){this.addTo(this._currentNode,t)},addSibling:function(t){this.addTo(this._currentNode.parent,t)},addTo:function(t,e){if(this._currentNode=e,(this._currentNode.parent=t).child){for(t=t.child;t.next;)t=t.next;t.next=e}else t.child=e},addToParent:function(t,e){this.findNode(t)&&this.addTo(t,e)},findNode:function(t){for(var e=this._currentNode;e;){if(t==e)return!0;e=e.parent}return!1}},Fi=0,qi=new Uint8Array([42,134,72,134,247,13,1,1,1]),Hi=function(t,e,i,n){this.n=t,this.e=e,this.ext=i,this.keyOps=n},Ki=function(t,e,i,n,r,a,o,s,u,c,h){this.n=t,this.e=e,this.d=i,this.p=n,this.q=r,this.dp=a,this.dq=o,this.qi=s,this.alg=u,this.keyOps=c,this.ext=h},Gi="sign verify encrypt decrypt wrapKey unwrapKey deriveKey deriveBits".split(" "),br.prototype.getDer=function(){return this.der},br.prototype.getType=function(){return this.type},br.prototype.getKeyOps=function(){return this.keyOps},br.prototype.getExtractable=function(){return this.extractable},r.parse=function(t){return Fi=0,function t(e,i,n){var r,a,o,s,u,c=e.backingStore,h=new Vi(c,i);if(i+=n,n=e,8<Fi++)return I;for(;h.getPosition()<i;){if(h.getPosition(),31==(31&(a=h.readByte()))){for(r=0;128&a;)r=r<<8|127&a;a=r}if((r=31&(o=a))<0||30<r)return I;if((a=ar(h))<0||a>h.getRemaining())return I;n.constructed=32&o,n.tagClass=(192&o)>>6,n.tag=r,n.dataLen=a,n.dataIdx=h.getPosition(),r=h,s=o,o=a,(r=!(!(32&s)&&(s<U.BIT_STRING||s>U.OCTET_STRING||(u=new Vi(r),s==U.BIT_STRING&&u.skip(1),u.readByte()>>6&1||(s=ar(u),u.getPosition()-r.getPosition()+s!=o)))))&&(r=h.getPosition(),o=a,n.tag==U.BIT_STRING&&(n.dataIdx++,n.dataLen--,r++,o--),n.child=new Bi(c,n),t(n.child,r,o)),n.tag==U.INTEGER&&(r=h.getPosition(),0==h.peekByte(r)&&h.peekByte(r+1)>>7&&(n.dataIdx++,n.dataLen--)),h.skip(a),h.getPosition()<i&&(n.next=new Bi(c,n.parent),n=n.next)}return Fi--,e}(new Bi(t),0,t.length)},r.show=function(t,e){},r.isRsaSpki=sr,r.isRsaPkcs8=ur,r.NodeFactory=a,r.Builder=Ui,r.tagVal=U,r.RsaPublicKey=Hi,r.RsaPrivateKey=Ki,r.buildRsaSpki=cr,r.parseRsaSpki=function(t){return hr(t=r.parse(t))},r.buildRsaPkcs8=fr,r.parseRsaPkcs8=function(t){return ur(t=r.parse(t))?lr(t):I},r.buildRsaJwk=dr,r.parseRsaJwk=pr,r.RsaDer=br,r.rsaDerToJwk=function(t,e,i,n){if(!(t=r.parse(t)))return I;if(sr(t))t=hr(t);else{if(!ur(t))return I;t=lr(t)}return dr(t,e,i,n)},r.jwkToRsaDer=function(t){var e,i;if(!(t=pr(t)))return I;if(t instanceof Hi)e="spki",i=cr(t).der;else{if(!(t instanceof Ki))return I;e="pkcs8",i=fr(t).der}return new br(i,e,t.keyOps,t.ext)},r.webCryptoAlgorithmToJwkAlg=function(t){return"RSAES-PKCS1-v1_5"==t.name?"RSA1_5":"RSASSA-PKCS1-v1_5"==t.name?"SHA-256"==t.hash.name?"RS256":"SHA-384"==t.hash.name?"RS384":"SHA-512"==t.hash.name?"RS512":I:I},r.webCryptoUsageToJwkKeyOps=function(t){return t.map(function(t){return"wrapKey"==t?"wrap":"unwrapKey"==t?"unwrap":t})},i.ASN1=r;for(var gr={},mr={},vr={"=":0,".":0},yr={"=":0,".":0},wr=/\s+/g,Ar=/^[ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/_-]*[=]{0,2}$/,s=64;s--;)gr["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[s]]=262144*s,mr["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[s]]=4096*s,vr["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[s]]=64*s,yr["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[s]]=s;for(s=64;s--&&"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[s]!="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"[s];)gr["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"[s]]=262144*s,mr["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"[s]]=4096*s,vr["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"[s]]=64*s,yr["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"[s]]=s;function _r(t){if(!(this instanceof _r))return new _r(t);for(var e=0,i=Ji.length;e<i;e++)this[Ji[e]]="";this.bufferCheckPosition=c.MAX_BUFFER_LENGTH,this.q=this.c=this.p="",this.opt=t||{},this.closed=this.closedRoot=this.sawRoot=!1,this.tag=this.error=null,this.state=o.BEGIN,this.stack=new Yi,this.index=this.position=this.column=0,this.line=1,this.slashed=!1,this.unicodeI=0,this.unicodeS=null,Er(this,"onready")}function Er(t,e,i){t[e]&&t[e](i)}function kr(t,e){var i=t.opt,n=t.textNode;i.trim&&(n=n.trim()),i.normalize&&(n=n.replace(/\s+/g," ")),t.textNode=n,t.textNode&&Er(t,e||"onvalue",t.textNode),t.textNode=""}function W(t,e){return kr(t),e+="\nLine: "+t.line+"\nColumn: "+t.column+"\nChar: "+t.c,e=Error(e),t.error=e,Er(t,"onerror",e),t}function Sr(t){return t.state!==o.VALUE&&W(t,"Unexpected end"),kr(t),t.c="",t.closed=!0,Er(t,"onend"),_r.call(t,t.opt),t}for(Wi in m=function(t,e){for(var i="",n=0,r=t.length,a=r-2,o=e?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=e?"":"=";n<a;)i+=o[(e=65536*t[n++]+256*t[n++]+t[n++])>>>18]+o[e>>>12&63]+o[e>>>6&63]+o[63&e];return n==a?i+=o[(e=65536*t[n++]+256*t[n++])>>>18]+o[e>>>12&63]+o[e>>>6&63]+s:n==r-1&&(i+=o[(e=65536*t[n++])>>>18]+o[e>>>12&63]+s+s),i},O=function(t,e){if(t=t.replace(wr,""),e=e&&t.length%4){e=4-e;for(var i=0;i<e;++i)t+="="}if(0!=(e=t.length)%4||!Ar.test(t))throw Error("bad base64: "+t);for(var n=e/4*3-("="==t[e-1]?1:0)-("="==t[e-2]?1:0),r=new Uint8Array(n),a=0,o=0;a<e;)i=gr[t[a++]]+mr[t[a++]]+vr[t[a++]]+yr[t[a++]],r[o++]=i>>>16,o<n&&(r[o++]=i>>>8&255,o<n&&(r[o++]=255&i));return r},c={},Yi=Array,c.parser=function(t){return new _r(t)},c.CParser=_r,c.MAX_BUFFER_LENGTH=65536,c.DEBUG=!1,c.INFO=!1,c.EVENTS="value string key openobject closeobject openarray closearray error end ready".split(" "),Ji=["textNode","numberNode"],c.EVENTS.filter(function(t){return"error"!==t&&"end"!==t}),o=0,c.STATE={BEGIN:o++,VALUE:o++,OPEN_OBJECT:o++,CLOSE_OBJECT:o++,OPEN_ARRAY:o++,CLOSE_ARRAY:o++,TEXT_ESCAPE:o++,STRING:o++,BACKSLASH:o++,END:o++,OPEN_KEY:o++,CLOSE_KEY:o++,TRUE:o++,TRUE2:o++,TRUE3:o++,FALSE:o++,FALSE2:o++,FALSE3:o++,FALSE4:o++,NULL:o++,NULL2:o++,NULL3:o++,NUMBER_DECIMAL_POINT:o++,NUMBER_DIGIT:o++},c.STATE)c.STATE[c.STATE[Wi]]=Wi;function Tr(t,n){return n=n||t.length,t.reduce(function(t,e,i){return i<n?t+String.fromCharCode(e):t},"")}o=c.STATE,Object.getPrototypeOf||(Object.getPrototypeOf=function(t){return t.__proto__}),zi=/[\\"\n]/g,_r.prototype={end:function(){Sr(this)},write:function(t){var e,i,n;if(this.error)throw this.error;if(this.closed)return W(this,"Cannot write after close. Assign an onready handler.");if(null===t)return Sr(this);for(var r,a=t[0];a&&(r=a,this.c=a=t.charAt(this.index++),r!==a?this.p=r:r=this.p,a);)switch(this.position++,"\n"===a?(this.line++,this.column=0):this.column++,this.state){case o.BEGIN:"{"===a?this.state=o.OPEN_OBJECT:"["===a?this.state=o.OPEN_ARRAY:"\r"!==a&&"\n"!==a&&" "!==a&&"\t"!==a&&W(this,"Non-whitespace before {[.");continue;case o.OPEN_KEY:case o.OPEN_OBJECT:if("\r"===a||"\n"===a||" "===a||"\t"===a)continue;if(this.state===o.OPEN_KEY)this.stack.push(o.CLOSE_KEY);else{if("}"===a){Er(this,"onopenobject"),Er(this,"oncloseobject"),this.state=this.stack.pop()||o.VALUE;continue}this.stack.push(o.CLOSE_OBJECT)}'"'===a?this.state=o.STRING:W(this,'Malformed object key should start with "');continue;case o.CLOSE_KEY:case o.CLOSE_OBJECT:if("\r"===a||"\n"===a||" "===a||"\t"===a)continue;":"===a?(this.state===o.CLOSE_OBJECT?(this.stack.push(o.CLOSE_OBJECT),kr(this,"onopenobject")):kr(this,"onkey"),this.state=o.VALUE):"}"===a?(kr(this),Er(this,"oncloseobject",void 0),this.state=this.stack.pop()||o.VALUE):","===a?(this.state===o.CLOSE_OBJECT&&this.stack.push(o.CLOSE_OBJECT),kr(this),this.state=o.OPEN_KEY):W(this,"Bad object");continue;case o.OPEN_ARRAY:case o.VALUE:if("\r"===a||"\n"===a||" "===a||"\t"===a)continue;if(this.state===o.OPEN_ARRAY){if(Er(this,"onopenarray"),this.state=o.VALUE,"]"===a){Er(this,"onclosearray"),this.state=this.stack.pop()||o.VALUE;continue}this.stack.push(o.CLOSE_ARRAY)}'"'===a?this.state=o.STRING:"{"===a?this.state=o.OPEN_OBJECT:"["===a?this.state=o.OPEN_ARRAY:"t"===a?this.state=o.TRUE:"f"===a?this.state=o.FALSE:"n"===a?this.state=o.NULL:"-"===a?this.numberNode+=a:"0"===a||-1!=="123456789".indexOf(a)?(this.numberNode+=a,this.state=o.NUMBER_DIGIT):W(this,"Bad value");continue;case o.CLOSE_ARRAY:if(","===a)this.stack.push(o.CLOSE_ARRAY),kr(this,"onvalue"),this.state=o.VALUE;else if("]"===a)kr(this),Er(this,"onclosearray",void 0),this.state=this.stack.pop()||o.VALUE;else{if("\r"===a||"\n"===a||" "===a||"\t"===a)continue;W(this,"Bad array")}continue;case o.STRING:r=this.index-1,e=this.slashed,i=this.unicodeI;t:for(;;){if(c.DEBUG)for(;0<i;)if(this.unicodeS+=a,a=t.charAt(this.index++),4===i?(this.textNode+=String.fromCharCode(parseInt(this.unicodeS,16)),i=0,r=this.index-1):i++,!a)break t;if('"'===a&&!e){this.state=this.stack.pop()||o.VALUE,(this.textNode+=t.substring(r,this.index-1))||Er(this,"onvalue","");break}if("\\"===a&&!e&&(e=!0,this.textNode+=t.substring(r,this.index-1),!(a=t.charAt(this.index++))))break;if(e){if(e=!1,"n"===a?this.textNode+="\n":"r"===a?this.textNode+="\r":"t"===a?this.textNode+="\t":"f"===a?this.textNode+="\f":"b"===a?this.textNode+="\b":"u"===a?(i=1,this.unicodeS=""):this.textNode+=a,a=t.charAt(this.index++),r=this.index-1,a)continue;break}if(zi.lastIndex=this.index,null===(n=zi.exec(t))){this.index=t.length+1,this.textNode+=t.substring(r,this.index-1);break}if(this.index=n.index+1,!(a=t.charAt(n.index))){this.textNode+=t.substring(r,this.index-1);break}}this.slashed=e,this.unicodeI=i;continue;case o.TRUE:if(""===a)continue;"r"===a?this.state=o.TRUE2:W(this,"Invalid true started with t"+a);continue;case o.TRUE2:if(""===a)continue;"u"===a?this.state=o.TRUE3:W(this,"Invalid true started with tr"+a);continue;case o.TRUE3:if(""===a)continue;"e"===a?(Er(this,"onvalue",!0),this.state=this.stack.pop()||o.VALUE):W(this,"Invalid true started with tru"+a);continue;case o.FALSE:if(""===a)continue;"a"===a?this.state=o.FALSE2:W(this,"Invalid false started with f"+a);continue;case o.FALSE2:if(""===a)continue;"l"===a?this.state=o.FALSE3:W(this,"Invalid false started with fa"+a);continue;case o.FALSE3:if(""===a)continue;"s"===a?this.state=o.FALSE4:W(this,"Invalid false started with fal"+a);continue;case o.FALSE4:if(""===a)continue;"e"===a?(Er(this,"onvalue",!1),this.state=this.stack.pop()||o.VALUE):W(this,"Invalid false started with fals"+a);continue;case o.NULL:if(""===a)continue;"u"===a?this.state=o.NULL2:W(this,"Invalid null started with n"+a);continue;case o.NULL2:if(""===a)continue;"l"===a?this.state=o.NULL3:W(this,"Invalid null started with nu"+a);continue;case o.NULL3:if(""===a)continue;"l"===a?(Er(this,"onvalue",null),this.state=this.stack.pop()||o.VALUE):W(this,"Invalid null started with nul"+a);continue;case o.NUMBER_DECIMAL_POINT:"."===a?(this.numberNode+=a,this.state=o.NUMBER_DIGIT):W(this,"Leading zero not followed by .");continue;case o.NUMBER_DIGIT:-1!=="0123456789".indexOf(a)?this.numberNode+=a:"."===a?(-1!==this.numberNode.indexOf(".")&&W(this,"Invalid number has two dots"),this.numberNode+=a):"e"===a||"E"===a?(-1===this.numberNode.indexOf("e")&&-1===this.numberNode.indexOf("E")||W(this,"Invalid number has two exponential"),this.numberNode+=a):"+"===a||"-"===a?("e"!==r&&"E"!==r&&W(this,"Invalid symbol in number"),this.numberNode+=a):(this.numberNode&&Er(this,"onvalue",parseFloat(this.numberNode)),this.numberNode="",this.index--,this.state=this.stack.pop()||o.VALUE);continue;default:W(this,"Unknown state: "+this.state)}if(this.position>=this.bufferCheckPosition){for(t=Math.max(c.MAX_BUFFER_LENGTH,10),r=a=0,e=Ji.length;r<e;r++)t<(i=this[Ji[r]].length)&&"text"!==Ji[r]&&W(this,"Max buffer length exceeded: "+Ji[r]),a=Math.max(a,i);this.bufferCheckPosition=c.MAX_BUFFER_LENGTH-a+this.position}return this},resume:function(){return this.error=null,this},close:function(){return this.write(null)}};for(var Ir={},Or=0;Or<256;++Or)Qi=Tr([Or]),Ir[Qi]=Or;for(Xi=Object.keys(Ir).length,Zi=[],Or=0;Or<256;++Or)Zi[Or]=[Or];function xr(t,e,i){var n,r,a,o=!!(i=i||rn).extendAll;for(n in e)r=e.__lookupGetter__(n),a=e.__lookupSetter__(n),r||a?(r&&t.__defineGetter__(n,r),a&&t.__defineSetter__(n,a)):(r=e[n],a=t[n],"function"==typeof r&&"function"==typeof a&&r!==a?(r=r.base!==Function.prototype.base?function(i,n){return function(){var t,e=i.base;return i.base=n,t=i.apply(this,arguments),i.base=e,t}}(r,a):r).base=a:(o||i[n])&&u.isObjectLiteral(r)&&u.isObjectLiteral(a)&&(r=u.extendDeep({},a,r)),t[n]=r)}function Rr(){var i=Array.prototype.slice,n=i.call(arguments,1);return this.extend({init:function t(){var e=i.call(arguments,0);t.base.apply(this,n.concat(e))}})}function Pr(t,e){var i=new this(nn);return xr(i,t,e),jr(i)}function Cr(t,e){return xr(this.prototype,t,e),this}function jr(t){function e(){var t=this.init;t&&arguments[0]!==nn&&t.apply(this,arguments)}return((e.prototype=t?t:e.prototype).constructor=e).extend=Pr,e.bind=Rr,e.mixin=Cr,e}function Nr(t,e,i){var n,r,a,o=!!(i=i||on).extendAll;for(n in e)r=e.__lookupGetter__(n),a=e.__lookupSetter__(n),r||a?(r&&t.__defineGetter__(n,r),a&&t.__defineSetter__(n,a)):(r=e[n],a=t[n],"function"==typeof r&&"function"==typeof a&&r!==a?(r=r.base!==sn?function(i,n){return function(){var t,e=i.base;return i.base=n,t=i.apply(this,arguments),i.base=e,t}}(r,a):r).base=a:(o||i[n])&&u.isObjectLiteral(r)&&u.isObjectLiteral(a)&&(r=u.extendDeep({},a,r)),t[n]=r)}function Mr(){var i=Array.prototype.slice,n=i.call(arguments,1);return this.extend({init:function t(){var e=i.call(arguments,0);t.base.apply(this,n.concat(e))}})}function Dr(t,e){var i=new this(an);return Nr(i,t,e),Br(i)}function Lr(t,e){return Nr(this.prototype,t,e),this}function Br(t){function e(){var t=this.init;t&&arguments[0]!==an&&t.apply(this,arguments)}return((e.prototype=t?t:e.prototype).constructor=e).extend=Dr,e.bind=Mr,e.mixin=Lr,e}function Ur(t){return t==R?1:t+1}function Fr(t){if(0===Object.keys(t._waiters).length)return 0;for(var e=Ur(t._nextWaiter);!t._waiters[e];)e=Ur(e);return e}function qr(t){return t==R?1:t+1}function Hr(t){if(0===Object.keys(t._waitingReaders).length)return 0;for(var e=qr(t._nextReader);!t._waitingReaders[e];)e=qr(e);return e}function Kr(t){if(0===Object.keys(t._waitingWriters).length)return 0;for(var e=qr(t._nextWriter);!t._waitingWriters[e];)e=qr(e);return e}function Gr(t){return void 0!==t&&t}function Vr(t){return t&&t.length?t=S===F.V2014_02?t.map(function(t){return"wrap"==t?"wrapKey":"unwrap"==t?"unwrapKey":t}):t:(S===F.V2014_02?"encrypt decrypt sign verify deriveKey wrapKey unwrapKey":"encrypt decrypt sign verify deriveKey wrap unwrap").split(" ")}function Yr(t,e,i,n,r){switch(i){case kn.JWE_RSA:case kn.JWEJS_RSA:return new Kt(t,Gt.RSA_OAEP,Z,n,r);case kn.JWK_RSA:return new Yt(t,e,n,r,Jt.WRAP_UNWRAP_OAEP);case kn.JWK_RSAES:return new Yt(t,e,n,r,Jt.WRAP_UNWRAP_PKCS1);default:throw new C(J.UNSUPPORTED_KEYX_MECHANISM,i)}}function Jr(t,e){this.errordata=t,this.signature=e}function zr(t,e,i,n,r){this.customer=t,this.sender=e,this.messageCryptoContext=i,this.headerdata=n,this.signature=r}function Wr(t,e,i,n,r,a,o,s,u,c,h,f,l,d,p,b,g,m,v,y){return{cryptoContext:{value:e},customer:{value:i},entityAuthenticationData:{value:n},masterToken:{value:r},sender:{value:a},messageId:{value:o},nonReplayableId:{value:b},keyRequestData:{value:s},keyResponseData:{value:u},userAuthenticationData:{value:c},userIdToken:{value:h},serviceTokens:{value:f},peerMasterToken:{value:l},peerUserIdToken:{value:d},peerServiceTokens:{value:p},messageCapabilities:{value:m},renewable:{value:g},headerdata:{value:v},signature:{value:y}}}function Qr(t,e,i){var n;if(i){if(e=t.getMslStore().getCryptoContext(i))return e;if(i.isVerified()&&i.isDecrypted())return new Wt(t,i);throw new dt(J.MASTERTOKEN_UNTRUSTED,i)}if(i=e.scheme,n=t.getEntityAuthenticationFactory(i))return n.getCryptoContext(t,e);throw new ft(J.ENTITYAUTH_FACTORY_NOT_FOUND,i)}function Xr(o,t,s,u,c,h,e){var f;f={},V(e,function(){if(!t)return[];if(!(t instanceof Array))throw new j(J.JSON_PARSE_ERROR,"headerdata "+h);!function e(i,n,r){var t,a;if(n>=i.length){for(a in t=[],f)t.push(f[a]);r.result(t)}else{if("object"!=typeof(t=i[n]))throw new j(J.JSON_PARSE_ERROR,"headerdata "+h);mi(o,t,s,u,c,{result:function(t){V(r,function(){f[t.uniqueKey()]=t,e(i,n+1,r)})},error:function(t){r.error(t)}})}}(t,0,e)})}function Zr(t,s,u,c,h,f){V(f,function(){if(!t.isPeerToPeer())return{peerMasterToken:null,peerUserIdToken:null,peerServiceTokens:[]};var e,i,n;e=t,i=s,V(n={result:function(o){V(f,function(){var e,i,n,r,a=u?u.masterToken:o;e=t,i=s,n=a,V(r={result:function(e){V(f,function(){Xr(t,s.peerservicetokens,a,e,c,h,{result:function(t){V(f,function(){return{peerMasterToken:o,peerUserIdToken:e,peerServiceTokens:t}})},error:function(t){V(f,function(){throw t instanceof P&&(t.setEntity(a),t.setUser(e)),t})}})})},error:function(t){V(f,function(){throw t instanceof P&&t.setEntity(a),t})}},function(){var t=i.peeruseridtoken;if(t&&"object"!=typeof t)throw new j(J.JSON_PARSE_ERROR,"headerdata "+h);if(!t)return null;pi(e,t,n,r)})})},error:f.error},function(){var t=i.peermastertoken;if(t&&"object"!=typeof t)throw new j(J.JSON_PARSE_ERROR,"headerdata "+h);if(!t)return null;li(e,t,n)})})}function $r(r,e,i,a){var o;o=[],V(a,function(){var t=e.keyrequestdata;if(!t)return o;if(!(t instanceof Array))throw new j(J.JSON_PARSE_ERROR,"headerdata "+i);!function e(i,n){V(a,function(){if(n>=i.length)return o;we(r,i[n],{result:function(t){V(a,function(){o.push(t),e(i,n+1)})},error:function(t){a.error(t)}})})}(t,0)})}function ta(t,e){this.payload=t,this.signature=e}function ea(n,r,t,e,a){var o,s,u,c,h;s=o=0,u=n.getKeyExchangeFactories(),h=t||e,function i(){V(a,function(){var t,e;if(s>=r.length&&(s=0,++o),o>=u.length){if(c)throw c;throw new E(J.KEYX_FACTORY_NOT_FOUND,JSON.stringify(r))}t=u[o],e=r[s],t.scheme!=e.keyExchangeScheme?(++s,i()):t.generateResponse(n,e,h,{result:function(t){a.result(t)},error:function(t){V(a,function(){if(!(t instanceof P))throw t;c=t,++s,i()})}})})}()}function ia(t,e){return e[t]||e[""]}function na(t){var e=t.builder.getKeyExchangeData();return e&&!t.ctx.isPeerToPeer()?e.keyResponseData.masterToken:t.builder.getMasterToken()}function ra(u,t,c,h){V(h,function(){var i,n,r,a,o,s;if(i=t.masterToken,!(n=t.keyResponseData))return null;if(r=n.keyExchangeScheme,!(a=u.getKeyExchangeFactory(r)))throw new E(J.KEYX_FACTORY_NOT_FOUND,r);s=0,function e(){V(h,function(){var t;if(s>=c.length){if(o)throw o;throw new E(J.KEYX_RESPONSE_REQUEST_MISMATCH,JSON.stringify(c))}t=c[s],r!=t.keyExchangeScheme?(++s,e()):a.getCryptoContext(u,t,n,i,{result:h.result,error:function(t){V(h,function(){if(!(t instanceof P))throw t;o=t,++s,e()})}})})}()})}function aa(t){return function(){t.abort()}}function oa(t,e){Object.defineProperties(this,{masterToken:{value:t},ticket:{value:e}})}function sa(t,e){Object.defineProperties(this,{builder:{value:t},msgCtx:{value:e}})}function ua(t,e,i){Object.defineProperties(this,{requestHeader:{value:t,writable:!1,configurable:!1},payloads:{value:e},handshake:{value:i}})}function ca(t,e){Object.defineProperties(this,{requestHeader:{value:e.requestHeader,writable:!1,configurable:!1},payloads:{value:e.payloads},handshake:{value:e.handshake},response:{value:t}})}function X(t){for(;t;){if(t instanceof _)return 1;t=t instanceof P?t.cause:I}}function ha(e,i,n,t,r,a,o,s,u){ei(i,t,r,a,{result:function(t){n&&n.sentHeader(t),oi(i,o,x,t,null,null,s,{result:function(t){e.setAbort(function(){t.abort()}),t.close(s,{result:function(t){Y(u,function(){if(t)return t;throw new _("sendError aborted.")})},timeout:function(){u.timeout()},error:function(t){u.error(t)}})},timeout:function(){},error:function(t){u.error(t)}})},error:function(t){u.error(t)}})}function fa(t,e,i,n){this.sessiondata=t,this.tokendata=e,this.signature=i,this.verified=n}function la(t,e,i){this.tokendata=t,this.signature=e,this.verified=i}function da(t,e,i){this.tokendata=t,this.signature=e,this.verified=i}et=function(t,e){var i,n;function r(t,e){for(var i;0<e;){if(c>=u.length)return;h<e?(i=t,i>>>=e-h,u[c]|=255&i,e-=h,h=8,++c):e<=h&&(i=t,i=((i<<=h-e)&255)>>>8-h,u[c]|=255&i,h-=e,(e=0)==h&&(h=8,++c))}return 1}for(n in Ir)e[n]=Ir[n];for(var a=Xi,o=[],s=8,u=new Uint8Array(t.length),c=0,h=8,f=0;f<t.length;++f)if(i=t[f],o.push(i),!e[n=Tr(o)]){if(!r(e[o=Tr(o,o.length-1)],s))return null;0!=a>>s&&++s,e[n]=a++,o=[i]}return 0<o.length&&!r(e[n=Tr(o)],s)?null:u.subarray(0,h<8?c+1:c)},it=function(t){for(var e,i,n,r=Zi.slice(),a=0,o=0,s=8,u=new Uint8Array(Math.ceil(1.5*t.length)),c=0,h=[];a<t.length&&!(8*(t.length-a)-o<s);){for(var f=n=0;f<s;)e=Math.min(s-f,8-o),i=t[a],i<<=o,8==(o+=e)&&(o=0,++a),n|=(255&(i&255)>>>8-e)<<s-(f+=e);f=r[n],0==h.length?++s:(f?h.push(f[0]):h.push(h[0]),r[r.length]=h,h=[],r.length==1<<s&&++s,f=f||r[n]),(n=c+f.length)>=u.length&&((e=new Uint8Array(Math.ceil(1.5*n))).set(u),u=e),u.set(f,c),c=n,h=h.concat(f)}return u.subarray(0,c)},x="utf-8",R=9007199254740992,$i=nt={GZIP:"GZIP",LZW:"LZW"},Object.freeze(nt),rt=function(t){for(var e=[$i.GZIP,$i.LZW],i=0;i<e.length&&0<t.length;++i)for(var n=e[i],r=0;r<t.length;++r)if(t[r]==n)return n;return null},tn=at={AES_CBC_PKCS5Padding:"AES/CBC/PKCS5Padding",AESWrap:"AESWrap",RSA_ECB_PKCS1Padding:"RSA/ECB/PKCS1Padding"},Object.freeze(at),ot=function(t){return tn.AES_CBC_PKCS5Padding==t?tn.AES_CBC_PKCS5Padding:tn.RSA_ECB_PKCS1Padding==t?tn.RSA_ECB_PKCS1Padding:tn[t]},en=i={HmacSHA256:"HmacSHA256",SHA256withRSA:"SHA256withRSA"},Object.freeze(i),st=function(t){return en[t]},y={FAIL:1,TRANSIENT_FAILURE:2,ENTITY_REAUTH:3,USER_REAUTH:4,KEYX_REQUIRED:5,ENTITYDATA_REAUTH:6,USERDATA_REAUTH:7,EXPIRED:8,REPLAYED:9,SSOTOKEN_REJECTED:10},Object.freeze(y),u={isObjectLiteral:function(t){return null!==t&&"object"==typeof t&&t.constructor===Object},extendDeep:function(){var t,e,i,n,r=arguments[0],a=1,o=arguments.length,s=!1;for("boolean"==typeof r&&(s=r,r=arguments[1],a=2);a<o;a++)if(null!=(t=arguments[a]))for(e in t)s&&e in r||r!==(i=t[e])&&i!==I&&(n=r[e],r[e]=null!==n&&null!==i&&"object"==typeof n&&"object"==typeof i?u.extendDeep(s,{},n,i):i);return r}},nn={},rn={actions:!0},Function.prototype.base=function(){},u.Class={create:jr,mixin:xr,extend:function(t,e){var i=jr();return i.prototype=new t,i.extend(e)}},u.mixin=function(){u.log&&u.log.warn("util.mixin is deprecated.  Please change your code to use util.Class.mixin()"),xr.apply(null,arguments)},an={},on={actions:!0},sn=function(){},Function.prototype.base=sn,u.Class={create:Br,mixin:Nr,extend:function(t,e){var i=Br();return i.prototype=new t,i.extend(e)}},u.mixin=function(){u.log&&u.log.warn("util.mixin is deprecated.  Please change your code to use util.Class.mixin()"),Nr.apply(null,arguments)},ut=u.Class.create({init:function(){Object.defineProperties(this,{_queue:{value:[]},_waiters:{value:{}},_nextWaiter:{value:0,writable:!0},_lastWaiter:{value:0,writable:!0}})},cancel:function(t){var e;this._waiters[t]&&(e=this._waiters[t],delete this._waiters[t],t==this._nextWaiter&&(this._nextWaiter=Fr(this)),e.call(this,I))},cancelAll:function(){for(;0!==this._nextWaiter;)this.cancel(this._nextWaiter)},poll:function(i,n){var r=this,a=Ur(this._lastWaiter);return this._lastWaiter=a,Y(n,function(){var t,e;0<this._queue.length?(t=this._queue.shift(),setTimeout(function(){n.result(t)},0)):(-1!=i&&(e=setTimeout(function(){delete r._waiters[a],a==r._nextWaiter&&(r._nextWaiter=Fr(r)),n.timeout()},i)),this._waiters[a]=function(t){clearTimeout(e),setTimeout(function(){n.result(t)},0)},this._nextWaiter||(this._nextWaiter=a))},r),a},add:function(t){var e;this._nextWaiter?(e=this._waiters[this._nextWaiter],delete this._waiters[this._nextWaiter],this._nextWaiter=Fr(this),e.call(this,t)):this._queue.push(t)}}),un=0-R,ct=u.Class.create({nextBoolean:function(){var t=new Uint8Array(1);return $.getRandomValues(t),!!(1&t[0])},nextInt:function(t){var e;if(null===t||t===I)return t=new Uint8Array(4),$.getRandomValues(t),e=(127&t[3])<<24|t[2]<<16|t[1]<<8|t[0],128&t[3]?-e:e;if("number"!=typeof t)throw new TypeError("n must be of type number");if(t<1)throw new RangeError("n must be greater than zero");return--t,e=new Uint8Array(4),$.getRandomValues(e),Math.floor(((127&e[3])<<24|e[2]<<16|e[1]<<8|e[0])/2147483648*(+t+1))},nextLong:function(){for(var t,e=un;e==un;)e=new Uint8Array(7),$.getRandomValues(e),t=16777216*((31&e[6])<<24|e[5]<<16|e[4]<<8|e[3])+(e[2]<<16|e[1]<<8|e[0]),e=128&e[6]?-t-1:t;return e},nextBytes:function(t){$.getRandomValues(t)}}),ht=u.Class.create({init:function(){Object.defineProperties(this,{_readers:{value:{}},_waitingReaders:{value:{}},_writer:{value:null,writable:!0},_waitingWriters:{value:{}},_nextReader:{value:0,writable:!0},_nextWriter:{value:0,writable:!0},_lastNumber:{value:0,writable:!0}})},cancel:function(t){var e;this._waitingReaders[t]&&(e=this._waitingReaders[t],delete this._waitingReaders[t],t==this._nextReader&&(this._nextReader=Hr(this)),e.call(this,!0)),this._waitingWriters[t]&&(e=this._waitingWriters[t],delete this._waitingWriters[t],t==this._nextWriter&&(this._nextWriter=Kr(this)),e.call(this,!0))},cancelAll:function(){for(;0!==this._nextWriter;)this.cancel(this._nextWriter);for(;0!==this._nextReader;)this.cancel(this._nextReader)},readLock:function(t,i){var n=this,r=qr(this._lastNumber);return this._lastNumber=r,Y(i,function(){var e;if(!this._writer&&0===Object.keys(this._waitingWriters).length)return this._readers[r]=!0,r;-1!=t&&(e=setTimeout(function(){delete n._waitingReaders[r],r==n._nextReader&&(n._nextReader=Hr(n)),i.timeout()},t)),this._waitingReaders[r]=function(t){clearTimeout(e),t?setTimeout(function(){i.result(I)},0):(n._readers[r]=!0,setTimeout(function(){i.result(r)},0))},this._nextReader||(this._nextReader=r)},n),r},writeLock:function(t,i){var n=this,r=qr(this._lastNumber);return this._lastNumber=r,Y(i,function(){var e;if(0===Object.keys(this._readers).length&&0===Object.keys(this._waitingReaders).length&&!this._writer)return this._writer=r;-1!=t&&(e=setTimeout(function(){delete n._waitingWriters[r],r==n._nextWriter&&(n._nextWriter=Kr(n)),i.timeout()},t)),this._waitingWriters[r]=function(t){clearTimeout(e),t?setTimeout(function(){i.result(I)},0):(n._writer=r,setTimeout(function(){i.result(r)},0))},this._nextWriter||(this._nextWriter=r)},n),r},unlock:function(t){if(t==this._writer)this._writer=null;else{if(!this._readers[t])throw new N("There is no reader or writer with ticket number "+t+".");delete this._readers[t]}if(this._nextWriter)0<Object.keys(this._readers).length||(t=this._waitingWriters[this._nextWriter],delete this._waitingWriters[this._nextWriter],this._nextWriter=Kr(this),t.call(this,!1));else{for(var e=this._nextReader;0<Object.keys(this._waitingReaders).length;e=qr(e))this._waitingReaders[e]&&(t=this._waitingReaders[e],delete this._waitingReaders[e],t.call(this,!1));this._nextReader=0}}}),u.Class.mixin(J,{JSON_PARSE_ERROR:new J(0,y.FAIL,"Error parsing JSON."),JSON_ENCODE_ERROR:new J(1,y.FAIL,"Error encoding JSON."),ENVELOPE_HASH_MISMATCH:new J(2,y.FAIL,"Computed hash does not match envelope hash."),INVALID_PUBLIC_KEY:new J(3,y.FAIL,"Invalid public key provided."),INVALID_PRIVATE_KEY:new J(4,y.FAIL,"Invalid private key provided."),PLAINTEXT_ILLEGAL_BLOCK_SIZE:new J(5,y.FAIL,"Plaintext is not a multiple of the block size."),PLAINTEXT_BAD_PADDING:new J(6,y.FAIL,"Plaintext contains incorrect padding."),CIPHERTEXT_ILLEGAL_BLOCK_SIZE:new J(7,y.FAIL,"Ciphertext is not a multiple of the block size."),CIPHERTEXT_BAD_PADDING:new J(8,y.FAIL,"Ciphertext contains incorrect padding."),ENCRYPT_NOT_SUPPORTED:new J(9,y.FAIL,"Encryption not supported."),DECRYPT_NOT_SUPPORTED:new J(10,y.FAIL,"Decryption not supported."),ENVELOPE_KEY_ID_MISMATCH:new J(11,y.FAIL,"Encryption envelope key ID does not match crypto context key ID."),CIPHERTEXT_ENVELOPE_PARSE_ERROR:new J(12,y.FAIL,"Error parsing ciphertext envelope."),CIPHERTEXT_ENVELOPE_ENCODE_ERROR:new J(13,y.FAIL,"Error encoding ciphertext envelope."),SIGN_NOT_SUPPORTED:new J(14,y.FAIL,"Sign not supported."),VERIFY_NOT_SUPPORTED:new J(15,y.FAIL,"Verify not suppoprted."),SIGNATURE_ERROR:new J(16,y.FAIL,"Signature not initialized or unable to process data/signature."),HMAC_ERROR:new J(17,y.FAIL,"Error computing HMAC."),ENCRYPT_ERROR:new J(18,y.FAIL,"Error encrypting plaintext."),DECRYPT_ERROR:new J(19,y.FAIL,"Error decrypting ciphertext."),INSUFFICIENT_CIPHERTEXT:new J(20,y.FAIL,"Insufficient ciphertext for decryption."),SESSION_KEY_CREATION_FAILURE:new J(21,y.FAIL,"Error when creating session keys."),ASN1_PARSE_ERROR:new J(22,y.FAIL,"Error parsing ASN.1."),ASN1_ENCODE_ERROR:new J(23,y.FAIL,"Error encoding ASN.1."),INVALID_SYMMETRIC_KEY:new J(24,y.FAIL,"Invalid symmetric key provided."),INVALID_ENCRYPTION_KEY:new J(25,y.FAIL,"Invalid encryption key."),INVALID_HMAC_KEY:new J(26,y.FAIL,"Invalid HMAC key."),WRAP_NOT_SUPPORTED:new J(27,y.FAIL,"Wrap not supported."),UNWRAP_NOT_SUPPORTED:new J(28,y.FAIL,"Unwrap not supported."),UNIDENTIFIED_JWK_TYPE:new J(29,y.FAIL,"Unidentified JSON web key type."),UNIDENTIFIED_JWK_USAGE:new J(30,y.FAIL,"Unidentified JSON web key usage."),UNIDENTIFIED_JWK_ALGORITHM:new J(31,y.FAIL,"Unidentified JSON web key algorithm."),WRAP_ERROR:new J(32,y.FAIL,"Error wrapping plaintext."),UNWRAP_ERROR:new J(33,y.FAIL,"Error unwrapping ciphertext."),INVALID_JWK:new J(34,y.FAIL,"Invalid JSON web key."),INVALID_JWK_KEYDATA:new J(35,y.FAIL,"Invalid JSON web key keydata."),UNSUPPORTED_JWK_ALGORITHM:new J(36,y.FAIL,"Unsupported JSON web key algorithm."),WRAP_KEY_CREATION_FAILURE:new J(37,y.FAIL,"Error when creating wrapping key."),INVALID_WRAP_CIPHERTEXT:new J(38,y.FAIL,"Invalid wrap ciphertext."),UNSUPPORTED_JWE_ALGORITHM:new J(39,y.FAIL,"Unsupported JSON web encryption algorithm."),JWE_ENCODE_ERROR:new J(40,y.FAIL,"Error encoding JSON web encryption header."),JWE_PARSE_ERROR:new J(41,y.FAIL,"Error parsing JSON web encryption header."),INVALID_ALGORITHM_PARAMS:new J(42,y.FAIL,"Invalid algorithm parameters."),JWE_ALGORITHM_MISMATCH:new J(43,y.FAIL,"JSON web encryption header algorithms mismatch."),KEY_IMPORT_ERROR:new J(44,y.FAIL,"Error importing key."),KEY_EXPORT_ERROR:new J(45,y.FAIL,"Error exporting key."),DIGEST_ERROR:new J(46,y.FAIL,"Error in digest."),UNSUPPORTED_KEY:new J(47,y.FAIL,"Unsupported key type or algorithm."),UNSUPPORTED_JWE_SERIALIZATION:new J(48,y.FAIL,"Unsupported JSON web encryption serialization."),XML_PARSE_ERROR:new J(49,y.FAIL,"Error parsing XML."),XML_ENCODE_ERROR:new J(50,y.FAIL,"Error encoding XML."),INVALID_WRAPPING_KEY:new J(51,y.FAIL,"Invalid wrapping key."),UNIDENTIFIED_CIPHERTEXT_ENVELOPE:new J(52,y.FAIL,"Unidentified ciphertext envelope version."),UNIDENTIFIED_SIGNATURE_ENVELOPE:new J(53,y.FAIL,"Unidentified signature envelope version."),UNSUPPORTED_CIPHERTEXT_ENVELOPE:new J(54,y.FAIL,"Unsupported ciphertext envelope version."),UNSUPPORTED_SIGNATURE_ENVELOPE:new J(55,y.FAIL,"Unsupported signature envelope version."),UNIDENTIFIED_CIPHERSPEC:new J(56,y.FAIL,"Unidentified cipher specification."),UNIDENTIFIED_ALGORITHM:new J(57,y.FAIL,"Unidentified algorithm."),SIGNATURE_ENVELOPE_PARSE_ERROR:new J(58,y.FAIL,"Error parsing signature envelope."),SIGNATURE_ENVELOPE_ENCODE_ERROR:new J(59,y.FAIL,"Error encoding signature envelope."),INVALID_SIGNATURE:new J(60,y.FAIL,"Invalid signature."),WRAPKEY_FINGERPRINT_NOTSUPPORTED:new J(61,y.FAIL,"Wrap key fingerprint not supported"),UNIDENTIFIED_JWK_KEYOP:new J(62,y.FAIL,"Unidentified JSON web key key operation."),MASTERTOKEN_UNTRUSTED:new J(1e3,y.ENTITY_REAUTH,"Master token is not trusted."),MASTERTOKEN_KEY_CREATION_ERROR:new J(1001,y.ENTITY_REAUTH,"Unable to construct symmetric keys from master token."),MASTERTOKEN_EXPIRES_BEFORE_RENEWAL:new J(1002,y.ENTITY_REAUTH,"Master token expiration timestamp is before the renewal window opens."),MASTERTOKEN_SESSIONDATA_MISSING:new J(1003,y.ENTITY_REAUTH,"No master token session data found."),MASTERTOKEN_SEQUENCE_NUMBER_OUT_OF_RANGE:new J(1004,y.ENTITY_REAUTH,"Master token sequence number is out of range."),MASTERTOKEN_SERIAL_NUMBER_OUT_OF_RANGE:new J(1005,y.ENTITY_REAUTH,"Master token serial number is out of range."),MASTERTOKEN_TOKENDATA_INVALID:new J(1006,y.ENTITY_REAUTH,"Invalid master token data."),MASTERTOKEN_SIGNATURE_INVALID:new J(1007,y.ENTITY_REAUTH,"Invalid master token signature."),MASTERTOKEN_SESSIONDATA_INVALID:new J(1008,y.ENTITY_REAUTH,"Invalid master token session data."),MASTERTOKEN_SEQUENCE_NUMBER_OUT_OF_SYNC:new J(1009,y.ENTITY_REAUTH,"Master token sequence number does not have the expected value."),MASTERTOKEN_TOKENDATA_MISSING:new J(1010,y.ENTITY_REAUTH,"No master token data found."),MASTERTOKEN_TOKENDATA_PARSE_ERROR:new J(1011,y.ENTITY_REAUTH,"Error parsing master token data."),MASTERTOKEN_SESSIONDATA_PARSE_ERROR:new J(1012,y.ENTITY_REAUTH,"Error parsing master token session data."),MASTERTOKEN_IDENTITY_REVOKED:new J(1013,y.ENTITY_REAUTH,"Master token entity identity is revoked."),MASTERTOKEN_REJECTED_BY_APP:new J(1014,y.ENTITY_REAUTH,"Master token is rejected by the application."),USERIDTOKEN_MASTERTOKEN_MISMATCH:new J(2e3,y.USER_REAUTH,"User ID token master token serial number does not match master token serial number."),USERIDTOKEN_NOT_DECRYPTED:new J(2001,y.USER_REAUTH,"User ID token is not decrypted or verified."),USERIDTOKEN_MASTERTOKEN_NULL:new J(2002,y.USER_REAUTH,"User ID token requires a master token."),USERIDTOKEN_EXPIRES_BEFORE_RENEWAL:new J(2003,y.USER_REAUTH,"User ID token expiration timestamp is before the renewal window opens."),USERIDTOKEN_USERDATA_MISSING:new J(2004,y.USER_REAUTH,"No user ID token user data found."),USERIDTOKEN_MASTERTOKEN_NOT_FOUND:new J(2005,y.USER_REAUTH,"User ID token is bound to an unknown master token."),USERIDTOKEN_MASTERTOKEN_SERIAL_NUMBER_OUT_OF_RANGE:new J(2006,y.USER_REAUTH,"User ID token master token serial number is out of range."),USERIDTOKEN_SERIAL_NUMBER_OUT_OF_RANGE:new J(2007,y.USER_REAUTH,"User ID token serial number is out of range."),USERIDTOKEN_TOKENDATA_INVALID:new J(2008,y.USER_REAUTH,"Invalid user ID token data."),USERIDTOKEN_SIGNATURE_INVALID:new J(2009,y.USER_REAUTH,"Invalid user ID token signature."),USERIDTOKEN_USERDATA_INVALID:new J(2010,y.USER_REAUTH,"Invalid user ID token user data."),USERIDTOKEN_IDENTITY_INVALID:new J(2011,y.USER_REAUTH,"Invalid user ID token user identity."),RESERVED_2012:new J(2012,y.USER_REAUTH,"The entity is not associated with the user."),USERIDTOKEN_IDENTITY_NOT_FOUND:new J(2013,y.USER_REAUTH,"The user identity was not found."),USERIDTOKEN_PASSWORD_VERSION_CHANGED:new J(2014,y.USER_REAUTH,"The user identity must be reauthenticated because the password version changed."),USERIDTOKEN_USERAUTH_DATA_MISMATCH:new J(2015,y.USER_REAUTH,"The user ID token and user authentication data user identities do not match."),USERIDTOKEN_TOKENDATA_MISSING:new J(2016,y.USER_REAUTH,"No user ID token data found."),USERIDTOKEN_TOKENDATA_PARSE_ERROR:new J(2017,y.USER_REAUTH,"Error parsing user ID token data."),USERIDTOKEN_USERDATA_PARSE_ERROR:new J(2018,y.USER_REAUTH,"Error parsing user ID token user data."),USERIDTOKEN_REVOKED:new J(2019,y.USER_REAUTH,"User ID token is revoked."),USERIDTOKEN_REJECTED_BY_APP:new J(2020,y.USER_REAUTH,"User ID token is rejected by the application."),SERVICETOKEN_MASTERTOKEN_MISMATCH:new J(3e3,y.FAIL,"Service token master token serial number does not match master token serial number."),SERVICETOKEN_USERIDTOKEN_MISMATCH:new J(3001,y.FAIL,"Service token user ID token serial number does not match user ID token serial number."),SERVICETOKEN_SERVICEDATA_INVALID:new J(3002,y.FAIL,"Service token data invalid."),SERVICETOKEN_MASTERTOKEN_NOT_FOUND:new J(3003,y.FAIL,"Service token is bound to an unknown master token."),SERVICETOKEN_USERIDTOKEN_NOT_FOUND:new J(3004,y.FAIL,"Service token is bound to an unknown user ID token."),SERVICETOKEN_MASTERTOKEN_SERIAL_NUMBER_OUT_OF_RANGE:new J(3005,y.FAIL,"Service token master token serial number is out of range."),SERVICETOKEN_USERIDTOKEN_SERIAL_NUMBER_OUT_OF_RANGE:new J(3006,y.FAIL,"Service token user ID token serial number is out of range."),SERVICETOKEN_TOKENDATA_INVALID:new J(3007,y.FAIL,"Invalid service token data."),SERVICETOKEN_SIGNATURE_INVALID:new J(3008,y.FAIL,"Invalid service token signature."),SERVICETOKEN_TOKENDATA_MISSING:new J(3009,y.FAIL,"No service token data found."),UNIDENTIFIED_ENTITYAUTH_SCHEME:new J(4e3,y.FAIL,"Unable to identify entity authentication scheme."),ENTITYAUTH_FACTORY_NOT_FOUND:new J(4001,y.FAIL,"No factory registered for entity authentication scheme."),X509CERT_PARSE_ERROR:new J(4002,y.ENTITYDATA_REAUTH,"Error parsing X.509 certificate data."),X509CERT_ENCODE_ERROR:new J(4003,y.ENTITYDATA_REAUTH,"Error encoding X.509 certificate data."),X509CERT_VERIFICATION_FAILED:new J(4004,y.ENTITYDATA_REAUTH,"X.509 certificate verification failed."),ENTITY_NOT_FOUND:new J(4005,y.FAIL,"Entity not recognized."),INCORRECT_ENTITYAUTH_DATA:new J(4006,y.FAIL,"Entity used incorrect entity authentication data type."),RSA_PUBLICKEY_NOT_FOUND:new J(4007,y.ENTITYDATA_REAUTH,"RSA public key not found."),NPTICKET_GRACE_PERIOD_EXCEEDED:new J(4008,y.ENTITYDATA_REAUTH,"Fake NP-Tickets cannot be used after the grace period when the Playstation Network is up."),NPTICKET_SERVICE_ID_MISSING:new J(4009,y.ENTITYDATA_REAUTH,"NP-Ticket service ID is missing."),NPTICKET_SERVICE_ID_DISALLOWED:new J(4010,y.ENTITYDATA_REAUTH,"NP-Ticket service ID is not allowed."),NPTICKET_NOT_YET_VALID:new J(4011,y.ENTITYDATA_REAUTH,"NP-Ticket issuance date is in the future."),NPTICKET_EXPIRED:new J(4012,y.ENTITYDATA_REAUTH,"NP-Ticket has expired."),NPTICKET_PRIVATE_KEY_NOT_FOUND:new J(4013,y.ENTITYDATA_REAUTH,"No private key found for NP-Ticket GUID."),NPTICKET_COOKIE_VERIFICATION_FAILED:new J(4014,y.ENTITYDATA_REAUTH,"NP-Ticket cookie signature verification failed."),NPTICKET_INCORRECT_COOKIE_VERSION:new J(4015,y.ENTITYDATA_REAUTH,"Incorrect NP-Ticket cookie version."),NPTICKET_BROKEN:new J(4016,y.ENTITYDATA_REAUTH,"NP-Ticket broken."),NPTICKET_VERIFICATION_FAILED:new J(4017,y.ENTITYDATA_REAUTH,"NP-Ticket signature verification failed."),NPTICKET_ERROR:new J(4018,y.ENTITYDATA_REAUTH,"Unknown NP-Ticket TCM error."),NPTICKET_CIPHER_INFO_NOT_FOUND:new J(4019,y.ENTITYDATA_REAUTH,"No cipher information found for NP-Ticket."),NPTICKET_INVALID_CIPHER_INFO:new J(4020,y.ENTITYDATA_REAUTH,"Cipher information for NP-Ticket is invalid."),NPTICKET_UNSUPPORTED_VERSION:new J(4021,y.ENTITYDATA_REAUTH,"Unsupported NP-Ticket version."),NPTICKET_INCORRECT_KEY_LENGTH:new J(4022,y.ENTITYDATA_REAUTH,"Incorrect NP-Ticket public key length."),UNSUPPORTED_ENTITYAUTH_DATA:new J(4023,y.FAIL,"Unsupported entity authentication data."),CRYPTEX_RSA_KEY_SET_NOT_FOUND:new J(4024,y.FAIL,"Cryptex RSA key set not found."),ENTITY_REVOKED:new J(4025,y.FAIL,"Entity is revoked."),ENTITY_REJECTED_BY_APP:new J(4026,y.ENTITYDATA_REAUTH,"Entity is rejected by the application."),FORCE_LOGIN:new J(5e3,y.USERDATA_REAUTH,"User must login again."),NETFLIXID_COOKIES_EXPIRED:new J(5001,y.USERDATA_REAUTH,"Netflix ID cookie identity has expired."),NETFLIXID_COOKIES_BLANK:new J(5002,y.USERDATA_REAUTH,"Netflix ID or Secure Netflix ID cookie is blank."),UNIDENTIFIED_USERAUTH_SCHEME:new J(5003,y.FAIL,"Unable to identify user authentication scheme."),USERAUTH_FACTORY_NOT_FOUND:new J(5004,y.FAIL,"No factory registered for user authentication scheme."),EMAILPASSWORD_BLANK:new J(5005,y.USERDATA_REAUTH,"Email or password is blank."),AUTHMGR_COMMS_FAILURE:new J(5006,y.TRANSIENT_FAILURE,"Error communicating with authentication manager."),EMAILPASSWORD_INCORRECT:new J(5007,y.USERDATA_REAUTH,"Email or password is incorrect."),UNSUPPORTED_USERAUTH_DATA:new J(5008,y.FAIL,"Unsupported user authentication data."),SSOTOKEN_BLANK:new J(5009,y.SSOTOKEN_REJECTED,"SSO token is blank."),SSOTOKEN_NOT_ASSOCIATED:new J(5010,y.USERDATA_REAUTH,"SSO token is not associated with a Netflix user."),USERAUTH_USERIDTOKEN_INVALID:new J(5011,y.USERDATA_REAUTH,"User authentication data user ID token is invalid."),PROFILEID_BLANK:new J(5012,y.USERDATA_REAUTH,"Profile ID is blank."),UNIDENTIFIED_USERAUTH_MECHANISM:new J(5013,y.FAIL,"Unable to identify user authentication mechanism."),UNSUPPORTED_USERAUTH_MECHANISM:new J(5014,y.FAIL,"Unsupported user authentication mechanism."),SSOTOKEN_INVALID:new J(5015,y.SSOTOKEN_REJECTED,"SSO token invalid."),USERAUTH_MASTERTOKEN_MISSING:new J(5016,y.USERDATA_REAUTH,"User authentication required master token is missing."),ACCTMGR_COMMS_FAILURE:new J(5017,y.TRANSIENT_FAILURE,"Error communicating with the account manager."),SSO_ASSOCIATION_FAILURE:new J(5018,y.TRANSIENT_FAILURE,"SSO user association failed."),SSO_DISASSOCIATION_FAILURE:new J(5019,y.TRANSIENT_FAILURE,"SSO user disassociation failed."),MDX_USERAUTH_VERIFICATION_FAILED:new J(5020,y.USERDATA_REAUTH,"MDX user authentication data verification failed."),USERAUTH_USERIDTOKEN_NOT_DECRYPTED:new J(5021,y.USERDATA_REAUTH,"User authentication data user ID token is not decrypted or verified."),MDX_USERAUTH_ACTION_INVALID:new J(5022,y.USERDATA_REAUTH,"MDX user authentication data action is invalid."),CTICKET_DECRYPT_ERROR:new J(5023,y.USERDATA_REAUTH,"CTicket decryption failed."),USERAUTH_MASTERTOKEN_INVALID:new J(5024,y.USERDATA_REAUTH,"User authentication data master token is invalid."),USERAUTH_MASTERTOKEN_NOT_DECRYPTED:new J(5025,y.USERDATA_REAUTH,"User authentication data master token is not decrypted or verified."),CTICKET_CRYPTOCONTEXT_ERROR:new J(5026,y.USERDATA_REAUTH,"Error creating CTicket crypto context."),MDX_PIN_BLANK:new J(5027,y.USERDATA_REAUTH,"MDX controller or target PIN is blank."),MDX_PIN_MISMATCH:new J(5028,y.USERDATA_REAUTH,"MDX controller and target PIN mismatch."),MDX_USER_UNKNOWN:new J(5029,y.USERDATA_REAUTH,"MDX controller user ID token or CTicket is not decrypted or verified."),USERAUTH_USERIDTOKEN_MISSING:new J(5030,y.USERDATA_REAUTH,"User authentication required user ID token is missing."),MDX_CONTROLLERDATA_INVALID:new J(5031,y.USERDATA_REAUTH,"MDX controller authentication data is invalid."),USERAUTH_ENTITY_MISMATCH:new J(5032,y.USERDATA_REAUTH,"User authentication data does not match entity identity."),USERAUTH_INCORRECT_DATA:new J(5033,y.FAIL,"Entity used incorrect key request data type"),SSO_ASSOCIATION_WITH_NONMEMBER:new J(5034,y.USERDATA_REAUTH,"SSO user association failed because the customer is not a member."),SSO_ASSOCIATION_WITH_FORMERMEMBER:new J(5035,y.USERDATA_REAUTH,"SSO user association failed because the customer is a former member."),SSO_ASSOCIATION_CONFLICT:new J(5036,y.USERDATA_REAUTH,"SSO user association failed because the token identifies a different member."),USER_REJECTED_BY_APP:new J(5037,y.USERDATA_REAUTH,"User is rejected by the application."),PROFILE_SWITCH_DISALLOWED:new J(5038,y.TRANSIENT_FAILURE,"Unable to switch user profile."),MEMBERSHIPCLIENT_COMMS_FAILURE:new J(5039,y.TRANSIENT_FAILURE,"Error communicating with the membership manager."),USERIDTOKEN_IDENTITY_NOT_ASSOCIATED_WITH_ENTITY:new J(5040,y.USER_REAUTH,"The entity is not associated with the user."),UNSUPPORTED_COMPRESSION:new J(6e3,y.FAIL,"Unsupported compression algorithm."),COMPRESSION_ERROR:new J(6001,y.FAIL,"Error compressing data."),UNCOMPRESSION_ERROR:new J(6002,y.FAIL,"Error uncompressing data."),MESSAGE_ENTITY_NOT_FOUND:new J(6003,y.FAIL,"Message header entity authentication data or master token not found."),PAYLOAD_MESSAGE_ID_MISMATCH:new J(6004,y.FAIL,"Payload chunk message ID does not match header message ID ."),PAYLOAD_SEQUENCE_NUMBER_MISMATCH:new J(6005,y.FAIL,"Payload chunk sequence number does not match expected sequence number."),PAYLOAD_VERIFICATION_FAILED:new J(6006,y.FAIL,"Payload chunk payload signature verification failed."),MESSAGE_DATA_MISSING:new J(6007,y.FAIL,"No message data found."),MESSAGE_FORMAT_ERROR:new J(6008,y.FAIL,"Malformed message data."),MESSAGE_VERIFICATION_FAILED:new J(6009,y.FAIL,"Message header/error data signature verification failed."),HEADER_DATA_MISSING:new J(6010,y.FAIL,"No header data found."),PAYLOAD_DATA_MISSING:new J(6011,y.FAIL,"No payload data found in non-EOM payload chunk."),PAYLOAD_DATA_CORRUPT:new J(6012,y.FAIL,"Corrupt payload data found in non-EOM payload chunk."),UNIDENTIFIED_COMPRESSION:new J(6013,y.FAIL,"Unidentified compression algorithm."),MESSAGE_EXPIRED:new J(6014,y.EXPIRED,"Message expired and not renewable. Rejected."),MESSAGE_ID_OUT_OF_RANGE:new J(6015,y.FAIL,"Message ID is out of range."),INTERNAL_CODE_NEGATIVE:new J(6016,y.FAIL,"Error header internal code is negative."),UNEXPECTED_RESPONSE_MESSAGE_ID:new J(6017,y.FAIL,"Unexpected response message ID. Possible replay."),RESPONSE_REQUIRES_ENCRYPTION:new J(6018,y.KEYX_REQUIRED,"Message response requires encryption."),PAYLOAD_SEQUENCE_NUMBER_OUT_OF_RANGE:new J(6019,y.FAIL,"Payload chunk sequence number is out of range."),PAYLOAD_MESSAGE_ID_OUT_OF_RANGE:new J(6020,y.FAIL,"Payload chunk message ID is out of range."),MESSAGE_REPLAYED:new J(6021,y.REPLAYED,"Non-replayable message replayed."),INCOMPLETE_NONREPLAYABLE_MESSAGE:new J(6022,y.FAIL,"Non-replayable message sent non-renewable or without key request data or without a master token."),HEADER_SIGNATURE_INVALID:new J(6023,y.FAIL,"Invalid Header signature."),HEADER_DATA_INVALID:new J(6024,y.FAIL,"Invalid header data."),PAYLOAD_INVALID:new J(6025,y.FAIL,"Invalid payload."),PAYLOAD_SIGNATURE_INVALID:new J(6026,y.FAIL,"Invalid payload signature."),RESPONSE_REQUIRES_MASTERTOKEN:new J(6027,y.KEYX_REQUIRED,"Message response requires a master token."),RESPONSE_REQUIRES_USERIDTOKEN:new J(6028,y.USER_REAUTH,"Message response requires a user ID token."),REQUEST_REQUIRES_USERAUTHDATA:new J(6029,y.FAIL,"User-associated message requires user authentication data."),UNEXPECTED_MESSAGE_SENDER:new J(6030,y.FAIL,"Message sender is equal to the local entity or not the master token entity."),NONREPLAYABLE_MESSAGE_REQUIRES_MASTERTOKEN:new J(6031,y.FAIL,"Non-replayable message requires a master token."),NONREPLAYABLE_ID_OUT_OF_RANGE:new J(6032,y.FAIL,"Non-replayable message non-replayable ID is out of range."),MESSAGE_SERVICETOKEN_MISMATCH:new J(6033,y.FAIL,"Service token master token or user ID token serial number does not match the message token serial numbers."),MESSAGE_PEER_SERVICETOKEN_MISMATCH:new J(6034,y.FAIL,"Peer service token master token or user ID token serial number does not match the message peer token serial numbers."),RESPONSE_REQUIRES_INTEGRITY_PROTECTION:new J(6035,y.KEYX_REQUIRED,"Message response requires integrity protection."),HANDSHAKE_DATA_MISSING:new J(6036,y.FAIL,"Handshake message is not renewable or does not contain key request data."),MESSAGE_RECIPIENT_MISMATCH:new J(6037,y.FAIL,"Message recipient does not match local identity."),UNIDENTIFIED_KEYX_SCHEME:new J(7e3,y.FAIL,"Unable to identify key exchange scheme."),KEYX_FACTORY_NOT_FOUND:new J(7001,y.FAIL,"No factory registered for key exchange scheme."),KEYX_REQUEST_NOT_FOUND:new J(7002,y.FAIL,"No key request found matching header key response data."),UNIDENTIFIED_KEYX_KEY_ID:new J(7003,y.FAIL,"Unable to identify key exchange key ID."),UNSUPPORTED_KEYX_KEY_ID:new J(7004,y.FAIL,"Unsupported key exchange key ID."),UNIDENTIFIED_KEYX_MECHANISM:new J(7005,y.FAIL,"Unable to identify key exchange mechanism."),UNSUPPORTED_KEYX_MECHANISM:new J(7006,y.FAIL,"Unsupported key exchange mechanism."),KEYX_RESPONSE_REQUEST_MISMATCH:new J(7007,y.FAIL,"Key exchange response does not match request."),KEYX_PRIVATE_KEY_MISSING:new J(7008,y.FAIL,"Key exchange private key missing."),UNKNOWN_KEYX_PARAMETERS_ID:new J(7009,y.FAIL,"Key exchange parameters ID unknown or invalid."),KEYX_MASTER_TOKEN_MISSING:new J(7010,y.FAIL,"Master token required for key exchange is missing."),KEYX_INVALID_PUBLIC_KEY:new J(7011,y.FAIL,"Key exchange public key is invalid."),KEYX_PUBLIC_KEY_MISSING:new J(7012,y.FAIL,"Key exchange public key missing."),KEYX_WRAPPING_KEY_MISSING:new J(7013,y.FAIL,"Key exchange wrapping key missing."),KEYX_WRAPPING_KEY_ID_MISSING:new J(7014,y.FAIL,"Key exchange wrapping key ID missing."),KEYX_INVALID_WRAPPING_KEY:new J(7015,y.FAIL,"Key exchange wrapping key is invalid."),KEYX_INCORRECT_DATA:new J(7016,y.FAIL,"Entity used incorrect wrapping key data type"),CRYPTEX_ENCRYPTION_ERROR:new J(8e3,y.FAIL,"Error encrypting data with cryptex."),CRYPTEX_DECRYPTION_ERROR:new J(8001,y.FAIL,"Error decrypting data with cryptex."),CRYPTEX_MAC_ERROR:new J(8002,y.FAIL,"Error computing MAC with cryptex."),CRYPTEX_VERIFY_ERROR:new J(8003,y.FAIL,"Error verifying MAC with cryptex."),CRYPTEX_CONTEXT_CREATION_FAILURE:new J(8004,y.FAIL,"Error creating cryptex cipher or MAC context."),DATAMODEL_DEVICE_ACCESS_ERROR:new J(8005,y.TRANSIENT_FAILURE,"Error accessing data model device."),DATAMODEL_DEVICETYPE_NOT_FOUND:new J(8006,y.FAIL,"Data model device type not found."),CRYPTEX_KEYSET_UNSUPPORTED:new J(8007,y.FAIL,"Cryptex key set not supported."),CRYPTEX_PRIVILEGE_EXCEPTION:new J(8008,y.FAIL,"Insufficient privileges for cryptex operation."),CRYPTEX_WRAP_ERROR:new J(8009,y.FAIL,"Error wrapping data with cryptex."),CRYPTEX_UNWRAP_ERROR:new J(8010,y.FAIL,"Error unwrapping data with cryptex."),CRYPTEX_COMMS_FAILURE:new J(8011,y.TRANSIENT_FAILURE,"Error comunicating with cryptex."),CRYPTEX_SIGN_ERROR:new J(8012,y.FAIL,"Error computing signature with cryptex."),INTERNAL_EXCEPTION:new J(9e3,y.TRANSIENT_FAILURE,"Internal exception."),MSL_COMMS_FAILURE:new J(9001,y.FAIL,"Error communicating with MSL entity."),NONE:new J(9999,y.FAIL,"Special unit test error.")}),Object.freeze(J),(P=u.Class.create(Error())).mixin({init:function(t,e,i){var n,r,a;function o(){return r||(this.cause&&this.cause instanceof P?this.cause.messageId:I)}Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),n=t.message,e&&(n+=" ["+e+"]"),a=this.stack,Object.defineProperties(this,{message:{value:n,configurable:!0},error:{value:t,configurable:!0},cause:{value:i,configurable:!0},name:{value:"MslException",configurable:!0},masterToken:{value:null,writable:!0},entityAuthenticationData:{value:null,writable:!0},userIdToken:{value:null,writable:!0},userAuthenticationData:{value:null,writable:!0},messageId:{get:o,set(t){if(t<0||R<t)throw new RangeError("Message ID "+t+" is outside the valid range.");o()||(r=t)},configurable:!0},stack:{get(){var t=this.toString();return a&&(t+="\n"+a),i&&i.stack&&(t+="\nCaused by "+i.stack),t},configurable:!0}})},setEntity:function(t){return!t||this.masterToken||this.entityAuthenticationData||(t instanceof fi?this.masterToken=t:t instanceof Xt&&(this.entityAuthenticationData=t)),this},setUser:function(t){return!t||this.userIdToken||this.userAuthenticationData||(t instanceof di?this.userIdToken=t:t instanceof yi&&(this.userAuthenticationData=t)),this},setMessageId:function(t){return this.messageId=t,this},toString:function(){return this.name+": "+this.message}}),C=P.extend({init:function t(e,i,n){t.base.call(this,e,i,n),Object.defineProperties(this,{name:{value:"MslCryptoException",configurable:!0}})}}),j=P.extend({init:function t(e,i,n){t.base.call(this,e,i,n),Object.defineProperties(this,{name:{value:"MslEncodingException",configurable:!0}})}}),ft=P.extend({init:function t(e,i,n){t.base.call(this,e,i,n),Object.defineProperties(this,{name:{value:"MslEntityAuthException",configurable:!0}})}}),(lt=u.Class.create(Error())).mixin({init:function(t,e,i){var n;Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),n=this.stack,Object.defineProperties(this,{message:{value:t},cause:{value:e},requestCause:{value:i},name:{value:"MslErrorResponseException",configurable:!0},stack:{get(){var t=this.toString();return n&&(t+="\n"+n),e&&e.stack&&(t+="\nCaused by "+e.stack),t},configurable:!0}})},toString:function(){return this.name+": "+this.message}}),(b=u.Class.create(Error())).mixin({init:function(t,e){var i;Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),i=this.stack,Object.defineProperties(this,{message:{value:t},cause:{value:e},name:{value:"MslIoException",configurable:!0},stack:{get(){var t=this.toString();return i&&(t+="\n"+i),e&&e.stack&&(t+="\nCaused by "+e.stack),t},configurable:!0}})},toString:function(){return this.name+": "+this.message}}),(N=u.Class.create(Error())).mixin({init:function(t,e){var i;Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),i=this.stack,Object.defineProperties(this,{message:{value:t},cause:{value:e},name:{value:"MslInternalException",configurable:!0},stack:{get(){var t=this.toString();return i&&(t+="\n"+i),e&&e.stack&&(t+="\nCaused by "+e.stack),t},configurable:!0}})},toString:function(){return this.name+": "+this.message}}),(_=u.Class.create(Error())).mixin({init:function(t,e){var i;Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),i=this.stack,Object.defineProperties(this,{message:{value:t},cause:{value:e},name:{value:"MslInterruptedException",configurable:!0},stack:{get(){var t=this.toString();return i&&(t+="\n"+i),e&&e.stack&&(t+="\nCaused by "+e.stack),t},configurable:!0}})},toString:function(){return this.name+": "+this.message}}),E=P.extend({init:function t(e,i,n){t.base.call(this,e,i,n),Object.defineProperties(this,{name:{value:"MslKeyExchangeException",configurable:!0}})}}),dt=P.extend({init:function t(e,i){t.base.call(this,e),Object.defineProperties(this,{masterToken:{value:i},name:{value:"MslMasterTokenException",configurable:!0}})}}),M=P.extend({init:function t(e,i,n){t.base.call(this,e,i,n),Object.defineProperties(this,{name:{value:"MslMessageException",configurable:!0}})}}),pt=P.extend({init:function t(e,i,n){t.base.call(this,e,i,n),Object.defineProperties(this,{name:{value:"MslUserAuthException",configurable:!0}})}}),F=gt={LEGACY:1,V2014_01:2,V2014_02:3,LATEST:3},Object.freeze(gt),S=F.LATEST,k={encrypt:function(n,r,a){switch(S){case F.LEGACY:return new Promise(function(e,i){var t=l.encrypt(n,r,a);t.oncomplete=function(t){e(t.target.result)},t.onerror=function(t){i(t)}});case F.V2014_01:case F.V2014_02:return l.encrypt(n,r,a).then(function(t){return new Uint8Array(t)});default:throw Error("Unsupported Web Crypto version "+WEB_CRYPTO_VERSION+".")}},decrypt:function(n,r,a){switch(S){case F.LEGACY:return new Promise(function(e,i){var t=l.decrypt(n,r,a);t.oncomplete=function(t){e(t.target.result)},t.onerror=function(t){i(t)}});case F.V2014_01:case F.V2014_02:return l.decrypt(n,r,a).then(function(t){return new Uint8Array(t)});default:throw Error("Unsupported Web Crypto version "+WEB_CRYPTO_VERSION+".")}},sign:function(n,r,a){switch(S){case F.LEGACY:return new Promise(function(e,i){var t=l.sign(n,r,a);t.oncomplete=function(t){e(t.target.result)},t.onerror=function(t){i(t)}});case F.V2014_01:case F.V2014_02:return l.sign(n,r,a).then(function(t){return new Uint8Array(t)});default:throw Error("Unsupported Web Crypto version "+WEB_CRYPTO_VERSION+".")}},verify:function(n,r,a,o){switch(S){case F.LEGACY:return new Promise(function(e,i){var t=l.verify(n,r,a,o);t.oncomplete=function(t){e(t.target.result)},t.onerror=function(t){i(t)}});case F.V2014_01:case F.V2014_02:return l.verify(n,r,a,o);default:throw Error("Unsupported Web Crypto version "+WEB_CRYPTO_VERSION+".")}},digest:function(n,r){switch(S){case F.LEGACY:return new Promise(function(e,i){var t=l.digest(n,r);t.oncomplete=function(t){e(t.target.result)},t.onerror=function(t){i(t)}});case F.V2014_01:case F.V2014_02:return l.digest(n,r).then(function(t){return new Uint8Array(t)});default:throw Error("Unsupported Web Crypto version "+WEB_CRYPTO_VERSION+".")}},generateKey:function(n,t,e){var r=Gr(t),a=Vr(e);switch(S){case F.LEGACY:return new Promise(function(e,i){var t=l.generateKey(n,r,a);t.oncomplete=function(t){e(t.target.result)},t.onerror=function(t){i(t)}});case F.V2014_01:case F.V2014_02:return l.generateKey(n,r,a);default:throw Error("Unsupported Web Crypto version "+WEB_CRYPTO_VERSION+".")}},deriveKey:function(n,r,a,t,e){var o=Gr(t),s=Vr(e);switch(S){case F.LEGACY:return new Promise(function(e,i){var t=l.deriveKey(n,r,a,o,s);t.oncomplete=function(t){e(t.target.result)},t.onerror=function(t){i(t)}});case F.V2014_01:case F.V2014_02:return l.deriveKey(n,r,a,o,s);default:throw Error("Unsupported Web Crypto version "+WEB_CRYPTO_VERSION+".")}},importKey:function(n,r,a,t,e){var i,o,s,u,c,h=Gr(t),f=Vr(e);switch(S){case F.LEGACY:return new Promise(function(e,i){var t=l.importKey(n,r,a,h,f);t.oncomplete=function(t){e(t.target.result)},t.onerror=function(t){i(t)}});case F.V2014_01:case F.V2014_02:return i=n,o=r,s=a,u=h,c=f,Promise.resolve().then(function(){return l.importKey(i,o,s,u,c)}).catch(function(t){var e;if("spki"!==i&&"pkcs8"!==i)throw t;if(t=ASN1.webCryptoAlgorithmToJwkAlg(s),e=ASN1.webCryptoUsageToJwkKeyOps(c),t=ASN1.rsaDerToJwk(o,t,e,u))return t=JSON.stringify(t),l.importKey("jwk",Yn(t),s,u,c);throw Error("Could not make valid JWK from DER input")});default:throw Error("Unsupported Web Crypto version "+WEB_CRYPTO_VERSION+".")}},exportKey:function(n,r){switch(S){case F.LEGACY:return new Promise(function(e,i){var t=l.exportKey(n,r);t.oncomplete=function(t){e(t.target.result)},t.onerror=function(t){i(t)}});case F.V2014_01:case F.V2014_02:return e=n,i=r,Promise.resolve().then(function(){return l.exportKey(e,i)}).catch(function(t){if("spki"!==e&&"pkcs8"!==e)throw t;return l.exportKey("jwk",i).then(function(t){if(t=JSON.parse(Vn(new Uint8Array(t))),t=ASN1.jwkToRsaDer(t))return t.getDer().buffer;throw Error("Could not make valid DER from JWK input")})}).then(function(t){return new Uint8Array(t)});default:throw Error("Unsupported Web Crypto version "+WEB_CRYPTO_VERSION+".")}var e,i},wrapKey:function(t,n,r,a){switch(S){case F.LEGACY:return new Promise(function(e,i){var t=l.wrapKey(n,r,a);t.oncomplete=function(t){e(t.target.result)},t.onerror=function(t){i(t)}});case F.V2014_01:case F.V2014_02:return l.wrapKey(t,n,r,a).then(function(t){return new Uint8Array(t)});default:throw Error("Unsupported Web Crypto version "+WEB_CRYPTO_VERSION+".")}},unwrapKey:function(t,n,r,e,a,i,o){switch(S){case F.LEGACY:return new Promise(function(e,i){var t=l.unwrapKey(n,a,r);t.oncomplete=function(t){e(t.target.result)},t.onerror=function(t){i(t)}});case F.V2014_01:case F.V2014_02:return l.unwrapKey(t,n,r,e,a,Gr(i),Vr(o));default:throw Error("Unsupported Web Crypto version "+WEB_CRYPTO_VERSION+".")}}},tt&&tt.getKeyByName&&(k.getKeyByName=function(n){switch(S){case F.LEGACY:return new Promise(function(e,i){var t=tt.getKeyByName(n);t.oncomplete=function(t){e(t.target.result)},t.onerror=function(t){i(t)}});case F.V2014_01:case F.V2014_02:return tt.getKeyByName(n);default:throw Error("Unsupported Web Crypto version "+WEB_CRYPTO_VERSION+".")}}),bt.netflix=bt.netflix||{},bt.netflix.crypto=k,mt={name:"AES-KW"},vt={name:"AES-CBC"},yt={name:"HMAC",hash:{name:"SHA-256"}},wt={name:"RSA-OAEP",hash:{name:"SHA-1"}},At={name:"RSAES-PKCS1-v1_5"},_t={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},Et=["encrypt","decrypt"],kt=["wrap","unwrap"],St=["sign","verify"],Tt=u.Class.create({init:function(i,n,t){var r;function e(e){V(n,function(){var t=e?m(e):I;return Object.defineProperties(r,{rawKey:{value:i},keyData:{value:e},keyDataB64:{value:t}}),this},r)}V(n,function(){if(!i||"object"!=typeof i)throw new C(J.INVALID_SYMMETRIC_KEY);!t&&i.extractable?k.exportKey("raw",i).then(function(t){e(new Uint8Array(t))},function(t){n.error(new C(J.KEY_EXPORT_ERROR,"raw"))}):e(t)},r=this)},size:function(){return this.keyData.length},toByteArray:function(){return this.keyData},toBase64:function(){return this.keyDataB64}}),It=function(t,e){new Tt(t,e)},Ot=function(e,t,i,n){V(n,function(){try{e="string"==typeof e?O(e):e}catch(t){throw new C(J.INVALID_SYMMETRIC_KEY,"keydata "+e,t)}k.importKey("raw",e,t,!0,i).then(function(t){new Tt(t,n,e)},function(t){n.error(new C(J.INVALID_SYMMETRIC_KEY))})})},xt=u.Class.create({init:function(e,i,t){var n;function r(t){V(i,function(){return Object.defineProperties(n,{rawKey:{value:e,writable:!1,configurable:!1},encoded:{value:t}}),this},n)}n=this,V(i,function(){if(!e||"object"!=typeof e||"public"!=e.type)throw new TypeError("Only original public crypto keys are supported.");!t&&e.extractable?k.exportKey("spki",e).then(function(t){r(new Uint8Array(t))},function(t){i.error(new C(J.KEY_EXPORT_ERROR,"spki"))}):r(t)})},getEncoded:function(){return this.encoded}}),Rt=function(t,e){new xt(t,e)},Pt=function(e,t,i,n){V(n,function(){try{e="string"==typeof e?O(e):e}catch(t){throw new C(J.INVALID_PUBLIC_KEY,"spki "+e,t)}k.importKey("spki",e,t,!0,i).then(function(t){new xt(t,n,e)},function(t){n.error(new C(J.INVALID_PUBLIC_KEY))})})},Ct=u.Class.create({init:function(e,i,t){var n;function r(t){V(i,function(){return Object.defineProperties(n,{rawKey:{value:e,writable:!1,configurable:!1},encoded:{value:t}}),this},n)}n=this,V(i,function(){if(!e||"object"!=typeof e||"private"!=e.type)throw new TypeError("Only original private crypto keys are supported.");!t&&e.extractable?k.exportKey("pkcs8",e).then(function(t){r(new Uint8Array(t))},function(t){i.error(new C(J.KEY_EXPORT_ERROR,"pkcs8"))}):r(t)})},getEncoded:function(){return this.encoded}}),jt=function(t,e){new Ct(t,e)},cn=Lt={V1:1,V2:2},Nt=u.Class.create({init:function(r,a,o,t){V(t,function(){var t,e=cn.V1,i=r,n=null;for(t in at)if(at[t]==r){e=cn.V2,i=null,n=r;break}return Object.defineProperties(this,{version:{value:e},keyId:{value:i},cipherSpec:{value:n},iv:{value:a},ciphertext:{value:o}}),this},this)},toJSON:function(){var t={};switch(this.version){case cn.V1:t.keyid=this.keyId,this.iv&&(t.iv=m(this.iv)),t.ciphertext=m(this.ciphertext),t.sha256="AA==";break;case cn.V2:t.version=this.version,t.cipherspec=this.cipherSpec,this.iv&&(t.iv=m(this.iv)),t.ciphertext=m(this.ciphertext);break;default:throw new N("Ciphertext envelope version "+this.version+" encoding unsupported.")}return t}}),Mt=function(t,e,i,n){new Nt(t,e,i,n)},Dt=function(s,u,c){V(c,function(){var t,e,i=s.keyid,n=s.cipherspec,r=s.iv,a=s.ciphertext,o=s.sha256;if(!u)if((u=s.version)&&"number"==typeof u&&u==u){for(e in t=!1,cn)if(cn[e]==u){t=!0;break}if(!t)throw new C(J.UNIDENTIFIED_CIPHERTEXT_ENVELOPE,"ciphertext envelope "+JSON.stringify(s))}else u=cn.V1;switch(u){case cn.V1:if("string"!=typeof i||r&&"string"!=typeof r||"string"!=typeof a||"string"!=typeof o)throw new j(J.JSON_PARSE_ERROR,"ciphertext envelope "+JSON.stringify(s));break;case cn.V2:if((e=s.version)!=cn.V2)throw new C(J.UNIDENTIFIED_CIPHERTEXT_ENVELOPE,"ciphertext envelope "+JSON.stringify(s));if("string"!=typeof n||r&&"string"!=typeof r||"string"!=typeof a)throw new j(J.JSON_PARSE_ERROR,"ciphertext envelope "+JSON.stringify(s));if(!(n=ot(n)))throw new C(J.UNIDENTIFIED_CIPHERSPEC,"ciphertext envelope "+JSON.stringify(s));i=n;break;default:throw new C(J.UNSUPPORTED_CIPHERTEXT_ENVELOPE,"ciphertext envelope "+JSON.stringify(s))}try{r=r&&O(r),a=O(a)}catch(t){throw new C(J.CIPHERTEXT_ENVELOPE_PARSE_ERROR,"encryption envelope "+JSON.stringify(s),t)}new Nt(i,r,a,c)})},H=qt={V1:1,V2:2},Bt=u.Class.create({init:function(t,e,i){var n;switch(t){case H.V1:n=i;break;case H.V2:(n={}).version=t,n.algorithm=e,n.signature=m(i),n=G(JSON.stringify(n),x);break;default:throw new N("Signature envelope version "+t+" encoding unsupported.")}Object.defineProperties(this,{version:{value:t},algorithm:{value:e},signature:{value:i},bytes:{value:n}})}}),Ut=function(){var t,e,i,n;2==arguments.length?(t=H.V1,e=arguments[0],i=null,n=arguments[1]):3==arguments.length&&(t=H.V2,i=arguments[0],e=arguments[1],n=arguments[2]),V(n,function(){return new Bt(t,i,e)})},Ft=function(s,u,t){V(t,function(){var t,e,i,n,r,a,o;if(u)switch(u){case H.V1:return new Bt(H.V1,null,s);case H.V2:try{if(t=K(s,x),e=JSON.parse(t),i=parseInt(e.version),n=e.algorithm,r=e.signature,!i||"number"!=typeof i||i!=i||"string"!=typeof n||"string"!=typeof r)throw new j(J.JSON_PARSE_ERROR,"signature envelope "+m(s));if(H.V2!=i)throw new C(J.UNSUPPORTED_SIGNATURE_ENVELOPE,"signature envelope "+m(s));if(!(a=st(n)))throw new C(J.UNIDENTIFIED_ALGORITHM,"signature envelope "+m(s));if(o=O(r))return new Bt(H.V2,a,o);throw new C(J.INVALID_SIGNATURE,"signature envelope "+Base64Util.encode(s))}catch(t){if(t instanceof SyntaxError)throw new j(J.JSON_PARSE_ERROR,"signature envelope "+m(s),t);throw t}default:throw new C(J.UNSUPPORTED_SIGNATURE_ENVELOPE,"signature envelope "+m(s))}try{t=K(s,x),e=JSON.parse(t)}catch(t){e=null}switch(t=e&&e.version&&"number"==typeof(t=e.version)&&t==t?t:H.V1){case H.V1:return new Bt(t,null,s);case H.V2:if(a=e.algorithm,r=e.signature,"string"!=typeof a||"string"!=typeof r)return new Bt(H.V1,null,s);if(!(a=st(a)))return new Bt(H.V1,null,s);try{o=O(r)}catch(t){return new Bt(H.V1,null,s)}return new Bt(t,a,o);default:throw new C(J.UNSUPPORTED_SIGNATURE_ENVELOPE,"signature envelope "+s)}})},Ht=u.Class.create({encrypt:function(t,e){},decrypt:function(t,e){},wrap:function(t,e){},unwrap:function(t,e,i,n){},sign:function(t,e){},verify:function(t,e,i){}}),hn=Gt={RSA_OAEP:wt.name,A128KW:mt.name},Z="A128GCM",Kt=u.Class.create({init:function(t,e,i,n,r){switch(e){case hn.RSA_OAEP:r=r&&(r.rawKey||r),n=n&&(n.rawKey||n);break;case hn.A128KW:r=n=n&&(n.rawKey||n);break;default:throw new N("Unsupported algorithm: "+e)}Object.defineProperties(this,{_ctx:{value:t},_algo:{value:e},_enc:{value:i},_wrapKey:{value:r},_unwrapKey:{value:n}})},encrypt:function(t,e){e.error(new C(J.ENCRYPT_NOT_SUPPORTED))},decrypt:function(t,e){e.error(new C(J.DECRYPT_NOT_SUPPORTED))},wrap:function(t,e){V(e,function(){k.wrapKey("jwe+jwk",t.rawKey,this._wrapKey,this._wrapKey.algorithm).then(function(t){e.result(t)},function(t){e.error(new C(J.WRAP_ERROR))})},this)},unwrap:function(t,e,i,n){V(n,function(){k.unwrapKey("jwe+jwk",t,this._unwrapKey,this._unwrapKey.algorithm,e,!1,i).then(function(t){var e;e=t,V(n,function(){switch(e.type){case"secret":It(e,n);break;case"public":Rt(e,n);break;case"private":jt(e,n);break;default:throw new C(J.UNSUPPORTED_KEY,"type: "+e.type)}})},function(){n.error(new C(J.UNWRAP_ERROR))})},this)},sign:function(t,e){e.error(new C(J.SIGN_NOT_SUPPORTED))},verify:function(t,e,i){i.error(new C(J.VERIFY_NOT_SUPPORTED))}}),Vt=Ht.extend({encrypt:function(t,e){e.result(t)},decrypt:function(t,e){e.result(t)},wrap:function(t,e){e.result(t)},unwrap:function(t,e,i,n){n.result(t)},sign:function(t,e){e.result(new Uint8Array(0))},verify:function(t,e,i){i.result(!0)}}),fn=Jt={ENCRYPT_DECRYPT_OAEP:1,ENCRYPT_DECRYPT_PKCS1:2,WRAP_UNWRAP_OAEP:3,WRAP_UNWRAP_PKCS1:4,SIGN_VERIFY:5},Yt=Ht.extend({init:function t(e,i,n,r,a){t.base.call(this),n=n&&n.rawKey,r=r&&r.rawKey,Object.defineProperties(this,{id:{value:i},privateKey:{value:n},publicKey:{value:r},transform:{value:a==fn.ENCRYPT_DECRYPT_PKCS1?At:a==fn.ENCRYPT_DECRYPT_OAEP?wt:"nullOp"},wrapTransform:{value:a==fn.WRAP_UNWRAP_PKCS1?At:a==fn.WRAP_UNWRAP_OAEP?wt:"nullOp"},algo:{value:a==fn.SIGN_VERIFY?_t:"nullOp"}})},encrypt:function(t,i){var e=this;V(i,function(){if("nullOp"==this.transform)return t;if(!this.publicKey)throw new C(J.ENCRYPT_NOT_SUPPORTED,"no public key");if(0==t.length)return t;k.encrypt(e.transform,e.publicKey,t).then(function(t){Mt(e.id,null,t,{result:function(t){var e;try{e=JSON.stringify(t),i.result(G(e,x))}catch(t){i.error(new C(J.ENCRYPT_ERROR,null,t))}},error:function(t){t instanceof P||(t=new C(J.ENCRYPT_ERROR,null,t)),i.error(t)}})},function(t){i.error(new C(J.ENCRYPT_ERROR))})},this)},decrypt:function(i,n){var r=this;V(n,function(){var t,e;if("nullOp"==this.transform)return i;if(!this.privateKey)throw new C(J.DECRYPT_NOT_SUPPORTED,"no private key");if(0==i.length)return i;try{t=K(i,x),e=JSON.parse(t)}catch(t){if(t instanceof SyntaxError)throw new C(J.CIPHERTEXT_ENVELOPE_PARSE_ERROR,null,t);throw new C(J.DECRYPT_ERROR,null,t)}Dt(e,Lt.V1,{result:function(t){var e;try{if(t.keyId!=r.id)throw new C(J.ENVELOPE_KEY_ID_MISMATCH);e=n.result,k.decrypt(r.transform,r.privateKey,t.ciphertext).then(e,function(t){n.error(new C(J.DECRYPT_ERROR))})}catch(t){t instanceof P?n.error(t):n.error(new C(J.DECRYPT_ERROR,null,t))}},error:function(t){(t=t instanceof j?new C(J.CIPHERTEXT_ENVELOPE_ENCODE_ERROR,null,t):t)instanceof P||(t=new C(J.DECRYPT_ERROR,null,t)),n.error(t)}})},this)},wrap:function(e,i){V(i,function(){var t;if("nullOp"==this.wrapTransform||!this.publicKey)throw new C(J.WRAP_NOT_SUPPORTED,"no public key");t=i.result,k.wrapKey("jwk",e.rawKey,this.publicKey,this.wrapTransform).then(t,function(t){i.error(new C(J.WRAP_ERROR))})},this)},unwrap:function(t,e,i,n){function r(t){V(n,function(){switch(t.type){case"secret":It(t,n);break;case"public":Rt(t,n);break;case"private":jt(t,n);break;default:throw new C(J.UNSUPPORTED_KEY,"type: "+t.type)}})}V(n,function(){if("nullOp"==this.wrapTransform||!this.privateKey)throw new C(J.UNWRAP_NOT_SUPPORTED,"no private key");k.unwrapKey("jwk",t,this.privateKey,{name:this.privateKey.algorithm.name,hash:{name:"SHA-1"}},e,!1,i).then(r,function(t){n.error(new C(J.UNWRAP_ERROR))})},this)},sign:function(t,e){V(e,function(){if("nullOp"==this.algo)return new Uint8Array(0);if(!this.privateKey)throw new C(J.SIGN_NOT_SUPPORTED,"no private key");k.sign(this.algo,this.privateKey,t).then(function(t){Ut(t,{result:function(t){e.result(t.bytes)},error:e.error})},function(t){e.error(new C(J.SIGNATURE_ERROR))})},this)},verify:function(i,t,n){var r=this;V(n,function(){if("nullOp"==this.algo)return!0;if(!this.publicKey)throw new C(J.VERIFY_NOT_SUPPORTED,"no public key");Ft(t,qt.V1,{result:function(e){V(n,function(){var t=n.result;k.verify(this.algo,this.publicKey,e.signature,i).then(t,function(t){n.error(new C(J.SIGNATURE_ERROR))})},r)},error:n.error})},this)}}),zt=Ht.extend({init:function t(e,i,n,r,a){t.base.call(this),n=n&&n.rawKey,r=r&&r.rawKey,a=a&&a.rawKey,Object.defineProperties(this,{ctx:{value:e},id:{value:i},encryptionKey:{value:n},hmacKey:{value:r},wrapKey:{value:a}})},encrypt:function(t,i){var n=this;V(i,function(){var e;if(!this.encryptionKey)throw new C(J.ENCRYPT_NOT_SUPPORTED,"no encryption/decryption key");if(0==t.length)return t;e=new Uint8Array(16),this.ctx.getRandom().nextBytes(e),k.encrypt({name:vt.name,iv:e},n.encryptionKey,t).then(function(t){t=new Uint8Array(t),Mt(n.id,e,t,{result:function(t){var e;try{e=JSON.stringify(t),i.result(G(e,x))}catch(t){i.error(new C(J.ENCRYPT_ERROR,null,t))}},error:function(t){t instanceof P||(t=new C(J.ENCRYPT_ERROR,null,t)),i.error(t)}})},function(t){i.error(new C(J.ENCRYPT_ERROR))})},this)},decrypt:function(i,n){var r=this;V(n,function(){var t,e;if(!this.encryptionKey)throw new C(J.DECRYPT_NOT_SUPPORTED,"no encryption/decryption key");if(0==i.length)return i;try{t=K(i,x),e=JSON.parse(t)}catch(t){if(t instanceof SyntaxError)throw new C(J.CIPHERTEXT_ENVELOPE_PARSE_ERROR,null,t);throw new C(J.DECRYPT_ERROR,null,t)}Dt(e,Lt.V1,{result:function(t){try{if(t.keyId!=r.id)throw new C(J.ENVELOPE_KEY_ID_MISMATCH);k.decrypt({name:vt.name,iv:t.iv},r.encryptionKey,t.ciphertext).then(function(t){t=new Uint8Array(t),n.result(t)},function(){n.error(new C(J.DECRYPT_ERROR))})}catch(t){t instanceof P?n.error(t):n.error(new C(J.DECRYPT_ERROR,null,t))}},error:function(t){(t=t instanceof j?new C(J.CIPHERTEXT_ENVELOPE_ENCODE_ERROR,null,t):t)instanceof P||(t=new C(J.DECRYPT_ERROR,null,t)),n.error(t)}})},this)},wrap:function(t,e){V(e,function(){if(!this.wrapKey)throw new C(J.WRAP_NOT_SUPPORTED,"no wrap/unwrap key");k.wrapKey("raw",t.rawKey,this.wrapKey,this.wrapKey.algorithm).then(function(t){e.result(t)},function(t){e.error(new C(J.WRAP_ERROR))})},this)},unwrap:function(t,e,i,n){V(n,function(){if(!this.wrapKey)throw new C(J.UNWRAP_NOT_SUPPORTED,"no wrap/unwrap key");k.unwrapKey("raw",t,this.wrapKey,this.wrapKey.algorithm,e,!1,i).then(function(t){var e;e=t,V(n,function(){switch(e.type){case"secret":It(e,n);break;case"public":Rt(e,n);break;case"private":jt(e,n);break;default:throw new C(J.UNSUPPORTED_KEY,"type: "+e.type)}})},function(t){n.error(new C(J.UNWRAP_ERROR))})},this)},sign:function(t,i){var n=this;V(i,function(){if(!this.hmacKey)throw new C(J.SIGN_NOT_SUPPORTED,"no HMAC key.");k.sign(yt,this.hmacKey,t).then(function(e){V(i,function(){var t=new Uint8Array(e);Ut(t,{result:function(t){i.result(t.bytes)},error:i.error})},n)},function(){i.error(new C(J.HMAC_ERROR))})},this)},verify:function(e,t,i){var n=this;V(i,function(){if(!this.hmacKey)throw new C(J.VERIFY_NOT_SUPPORTED,"no HMAC key.");Ft(t,qt.V1,{result:function(t){V(i,function(){k.verify(yt,this.hmacKey,t.signature,e).then(function(t){i.result(t)},function(t){i.error(new C(J.HMAC_ERROR))})},n)},error:i.error})},this)}}),Wt=zt.extend({init:function t(e,i,n,r,a){if(n||r||a)t.base.call(this,e,n+"_"+i.sequenceNumber,r,a,null);else{if(!i.isDecrypted())throw new dt(J.MASTERTOKEN_UNTRUSTED,i);t.base.call(this,e,i.identity+"_"+i.sequenceNumber,i.encryptionKey,i.hmacKey,null)}}}),Qt=Ht.extend({encrypt:function(t,e){e.result(t)},decrypt:function(t,e){e.result(t)},wrap:function(t,e){e.error(new N("Wrap is unsupported by the MSL token crypto context."))},unwrap:function(t,e,i,n){n.error(new N("Unwrap is unsupported by the MSL token crypto context."))},sign:function(t,e){e.result(new Uint8Array(0))},verify:function(t,e,i){i.result(!1)}}),L={PSK:"PSK",MGK:"MGK",X509:"X509",RSA:"RSA",NPTICKET:"NPTICKET",ECC:"ECC",NONE:"NONE"},Object.freeze(L),Xt=u.Class.create({init:function(t){Object.defineProperties(this,{scheme:{value:t}})},getIdentity:function(){},getAuthData:function(){},equals:function(t){return this===t||t instanceof Xt&&this.scheme==t.scheme},toJSON:function(){var t={};return t.scheme=this.scheme,t.authdata=this.getAuthData(),t}}),Zt=function(t,e){var i=e.scheme,n=e.authdata;if(!i||!n)throw new j(J.JSON_PARSE_ERROR,"entityauthdata "+JSON.stringify(e));if(!L[i])throw new ft(J.UNIDENTIFIED_ENTITYAUTH_SCHEME,i);if(e=t.getEntityAuthenticationFactory(i))return e.createData(t,n);throw new ft(J.ENTITYAUTH_FACTORY_NOT_FOUND,i)},i=u.Class.create({init:function(t){Object.defineProperties(this,{scheme:{value:t,writable:!1,configurable:!1}})},createData:function(t,e){},getCryptoContext:function(t,e){}}),$t=Xt.extend({init:function t(e){t.base.call(this,L.MGK),Object.defineProperties(this,{identity:{value:e}})},getIdentity:function(){return this.identity},getAuthData:function(){var t={};return t.identity=this.identity,t},equals:function t(e){return this===e||e instanceof $t&&(t.base.call(this,this,e)&&this.identity==e.identity)}}),te=function(t){var e=t.identity;if(e)return new $t(e);throw new j(J.JSON_PARSE_ERROR,"mgk authdata"+JSON.stringify(t))},ee=i.extend({init:function t(e){t.base.call(this,L.MGK),Object.defineProperties(this,{localIdentity:{value:e}})},createData:function(t,e){return te(e)},getCryptoContext:function(t,e){if(!(e instanceof $t))throw new N("Incorrect authentication data type "+JSON.stringify(e)+".");if(e.identity!=this.localIdentity)throw new ft(J.ENTITY_NOT_FOUND,"mgk "+e.identity).setEntity(e);return new Vt}}),ie=Xt.extend({init:function t(e){t.base.call(this,L.PSK),Object.defineProperties(this,{identity:{value:e}})},getIdentity:function(){return this.identity},getAuthData:function(){var t={};return t.identity=this.identity,t},equals:function t(e){return this===e||e instanceof ie&&(t.base.call(this,this,e)&&this.identity==e.identity)}}),ne=function(t){var e=t.identity;if(e)return new ie(e);throw new j(J.JSON_PARSE_ERROR,"psk authdata"+JSON.stringify(t))},re=i.extend({init:function t(e){t.base.call(this,L.PSK),Object.defineProperties(this,{localIdentity:{value:e}})},createData:function(t,e){return ne(e)},getCryptoContext:function(t,e){if(!(e instanceof ie))throw new N("Incorrect authentication data type "+JSON.stringify(e)+".");if(e.getIdentity()!=this.localIdentity)throw new ft(J.ENTITY_NOT_FOUND,"psk "+e.identity).setEntity(e);return new Vt}}),ae=Xt.extend({init:function t(e,i){t.base.call(this,L.RSA),Object.defineProperties(this,{identity:{value:e},publicKeyId:{value:i}})},getIdentity:function(){return this.identity},getAuthData:function(){var t={};return t.identity=this.identity,t.pubkeyid=this.publicKeyId,t},equals:function t(e){return this===e||e instanceof ae&&(t.base.call(this,this,e)&&this.identity==e.identity&&this.publicKeyId==e.publicKeyId)}}),oe=function(t){var e=t.identity,i=t.pubkeyid;if(e&&"string"==typeof e&&i&&"string"==typeof i)return new ae(e,i);throw new j(J.JSON_PARSE_ERROR,"RSA authdata"+JSON.stringify(t))},se=i.extend({init:function t(e){t.base.call(this,L.RSA),Object.defineProperties(this,{store:{value:e}})},createData:function(t,e){return oe(e)},getCryptoContext:function(t,e){var i,n,r;if(!(e instanceof ae))throw new N("Incorrect authentication data type "+e+".");if(i=e.identity,n=e.publicKeyId,r=this.store.getPublicKey(n))return new Yt(t,i,null,r,Jt.SIGN_VERIFY);throw new ft(J.RSA_PUBLICKEY_NOT_FOUND,n).setEntity(e)}}),ue=Xt.extend({init:function t(e){t.base.call(this,L.NONE),Object.defineProperties(this,{identity:{value:e}})},getIdentity:function(){return this.identity},getAuthData:function(){var t={};return t.identity=this.identity,t},equals:function t(e){return this===e||e instanceof ue&&(t.base.call(this,this,e)&&this.identity==e.identity)}}),ce=function(t){var e=t.identity;if(e)return new ue(e);throw new j(J.JSON_PARSE_ERROR,"Unauthenticated authdata"+JSON.stringify(t))},he=i.extend({init:function t(){t.base.call(this,L.NONE)},createData:function(t,e){return ce(e)},getCryptoContext:function(t,e){if(e instanceof ue)return new Vt;throw new N("Incorrect authentication data type "+JSON.stringify(e)+".")}}),fe=u.Class.create({init:function(){Object.defineProperties(this,{rsaKeys:{value:{},writable:!1,configurable:!1}})},addPublicKey:function(t,e){if(!(e instanceof xt))throw new N("Incorrect key data type "+e+".");this.rsaKeys[t]=e},getIdentities:function(){return Object.keys(this.rsaKeys)},removePublicKey:function(t){delete this.rsaKeys[t]},getPublicKey:function(t){return this.rsaKeys[t]}}),i=u.Class.create({abort:function(){},close:function(){},mark:function(){},reset(){},markSupported:function(){},read:function(t,e,i){}}),Nn=u.Class.create({abort:function(){},close:function(t,e){},write:function(t,e,i,n,r){},flush:function(t,e){}}),le=u.Class.create({init:function(t){Object.defineProperties(this,{_data:{value:t,writable:!1,configurable:!1},_closed:{value:!1,writable:!0},_currentPosition:{value:0,writable:!0},_mark:{value:-1,writable:!0}})},abort:function(){},close:function(){this._close=!0},mark:function(){this._mark=this._currentPosition},reset(){if(-1==this._mark)throw new b("Stream has not been marked.");this._currentPosition=this._mark},markSupported:function(){return!0},read:function(e,t,i){Y(i,function(){var t;if(this._closed)throw new b("Stream is already closed.");return this._currentPosition==this._data.length?null:(-1==e&&(e=this._data.length-this._currentPosition),t=this._data.subarray(this._currentPosition,this._currentPosition+e),this._currentPosition+=t.length,t)},this)}}),de=u.Class.create({init:function(){var t={_closed:{value:!1,writable:!0},_result:{value:new Uint8Array(0),writable:!0,enuemrable:!1},_buffered:{value:[]}};Object.defineProperties(this,t)},abort:function(){},close:function(t,e){this._closed=!0,e.result(!0)},write:function(e,i,n,t,r){Y(r,function(){var t;if(this._closed)throw new b("Stream is already closed.");if(i<0)throw new RangeError("Offset cannot be negative.");if(n<0)throw new RangeError("Length cannot be negative.");if(i+n>e.length)throw new RangeError("Offset plus length cannot be greater than the array length.");return t=e.subarray(i,n),this._buffered.push(t),t.length},this)},flush:function(t,e){for(var i;0<this._buffered.length;)t=this._buffered.shift(),this._result?((i=new Uint8Array(this._result.length+t.length)).set(this._result),i.set(t,this._result.length),this._result=i):this._result=new Uint8Array(t);e.result(!0)},size:function(){return this.flush(1,{result:function(){}}),this._result.length},toByteArray:function(){return this.flush(1,{result:function(){}}),this._result}}),be=u.Class.create({getResponse:function(t,e,i){}}),ln=Nn.extend({init:function(t,e){t={_httpLocation:{value:t},_timeout:{value:e,writable:!0},_buffer:{value:new de},_response:{value:I,writable:!0},_abortToken:{value:I,writable:!0},_responseQueue:{value:new ut,writable:!0}},Object.defineProperties(this,t)},setTimeout:function(t){this._timeout=t},getResponse:function(t,e){var i=this;this._responseQueue.poll(t,{result:function(t){Y(e,function(){return t&&this._responseQueue.add(t),t},i)},timeout:function(){Y(e,function(){this._response={isTimeout:!0},this._responseQueue.add(this._response),this.abort(),e.timeout()},i)},error:function(t){Y(e,function(){throw this._response={isError:!0},this._responseQueue.add(this._response),t},i)}})},abort:function(){this._abortToken&&this._abortToken.abort()},close:function(t,e){var i=this;Y(e,function(){var t;return this._response||0<(t=this._buffer.toByteArray()).length&&(this._abortToken=this._httpLocation.getResponse({body:t},this._timeout,{result:function(t){i._response={response:t},i._responseQueue.add(i._response)},timeout:function(){i._response={isTimeout:!0},i._responseQueue.add(i._response)},error:function(t){i._response={isError:!0,error:t},i._responseQueue.add(i._response)}})),!0},this)},write:function(t,e,i,n,r){Y(r,function(){if(this._response)throw new b("HttpOutputStream already closed.");this._buffer.write(t,e,i,n,r)},this)},flush:function(t,e){Y(e,function(){if(this._response)return!0;this._buffer.flush(t,e)},this)}}),dn=i.extend({init:function(t){Object.defineProperties(this,{_out:{value:t},_buffer:{value:I,writable:!0},_exception:{value:I,writable:!0},_timedout:{value:!1,writable:!0},_aborted:{value:!1,writable:!0},_json:{value:I,writable:!0}})},abort:function(){this._out.abort()},close:function(){this._buffer&&this._buffer.close()},mark:function(){this._buffer||this._buffer.mark()},reset(){this._buffer&&this._buffer.reset()},markSupported:function(){if(this._buffer)return this._buffer.markSupported()},read:function(i,n,r){var a;Y(r,function(){if(this._exception)throw this._exception;if(this._timedout)r.timeout();else{if(this._aborted)return new Uint8Array(0);this._buffer?this._buffer.read(i,n,r):this._out.close(n,{result:function(t){var e;e=t,Y(r,function(){if(!e)return new Uint8Array(0);this._out.getResponse(n,{result:function(e){Y(r,function(){var t;if(e.isTimeout)this._timedout=!0,r.timeout();else{if(e.isError)throw this._exception=e.error||new b("Unknown HTTP exception."),this._exception;if(!e.response)throw this._exception=new b("Missing HTTP response."),this._exception;e.response.json!==I&&(this._json=e.response.json,this.getJSON=function(){return a._json}),t=e.response.content||Yn("string"==typeof e.response.body?e.response.body:JSON.stringify(this._json)),this._buffer=new le(t),this._buffer.read(i,n,r)}},a)},timeout:function(){r.timeout()},error:function(t){r.error(t)}})},a)},timeout:function(){r.timeout()},error:function(t){r.error(t)}})}},a=this)}}),pe=u.Class.create({init:function(t,e){Object.defineProperties(this,{_httpLocation:{value:t},_timeout:{value:e,writable:!0}})},setTimeout:function(t){this._timeout=t},openConnection:function(){var t=new ln(this._httpLocation,this._timeout);return{input:new dn(t),output:t}}}),pn=Nn.extend({init:function(){var t={_buffer:{value:new Uint8Array,writable:!0}};Object.defineProperties(this,t)},setTimeout:function(){},getResponse:function(t,e){e.result({success:!1,content:null,errorHttpCode:I,errorSubCode:I})},abort:function(){},close:function(t,e){e.result(!0)},write:function(t,e,i,n,r){var a,o;try{if(e<0)throw new RangeError("Offset cannot be negative.");if(i<0)throw new RangeError("Length cannot be negative.");if(e+i>t.length)throw new RangeError("Offset plus length cannot be greater than the array length.");a=t.subarray(e,i),(o=new Uint8Array(this._buffer.length+a.length)).set(this._buffer),o.set(a,this._buffer.length),this._buffer=o,r.result(a.length)}catch(t){r.error(t)}},flush:function(t,e){e.result(!0)},request:function(){return this._buffer}}),bn=i.extend({init:function(){},abort:function(){},close:function(){},mark:function(){},reset(){},markSupported:function(){},read:function(t,e,i){i.result(new Uint8Array(16))}}),ge=u.Class.create({init:function(){var t={output:{value:new pn},input:{value:new bn,writable:!0}};Object.defineProperties(this,t)},setTimeout:function(){},openConnection:function(){return{input:this.input,output:this.output}},getRequest:function(){return Vn(this.output.request())}}),me=function(r,t,a){var e;e=function(t,e){var i,n;if(t)a.error(t);else if(e)if(r.getJSON!==I&&"function"==typeof r.getJSON)a.result(r.getJSON());else{for(t=a.result,i=[],n=(e=new Ce(K(e,"utf-8"))).nextValue();n!==I;)i.push(n),n=e.nextValue();t.call(a,i)}else a.result(null)},r.read(-1,t,{result:function(t){t&&t.length?e(null,t):e(null,null)},timeout:function(){a.timeout()},error:function(t){e(t,null)}})},ve={SYMMETRIC_WRAPPED:"SYMMETRIC_WRAPPED",ASYMMETRIC_WRAPPED:"ASYMMETRIC_WRAPPED",DIFFIE_HELLMAN:"DIFFIE_HELLMAN",JWE_LADDER:"JWE_LADDER",JWK_LADDER:"JWK_LADDER",AUTHENTICATED_DH:"AUTHENTICATED_DH"},Object.freeze(ve),ye=u.Class.create({init:function(t){Object.defineProperties(this,{keyExchangeScheme:{value:t}})},getKeydata:function(){},toJSON:function(){var t={};return t.scheme=this.keyExchangeScheme,t.keydata=this.getKeydata(),t},equals:function(t){return this===t||t instanceof ye&&this.keyExchangeScheme==t.keyExchangeScheme},uniqueKey:function(){return this.keyExchangeScheme}}),we=function(n,r,a){V(a,function(){var t,e=r.scheme,i=r.keydata;if(!e||!i||"object"!=typeof i)throw new j(J.JSON_PARSE_ERROR,"keyrequestdata "+JSON.stringify(r));if(!ve[e])throw new E(J.UNIDENTIFIED_KEYX_SCHEME,e);if(!(t=n.getKeyExchangeFactory(e)))throw new E(J.KEYX_FACTORY_NOT_FOUND,e);t.createRequestData(n,i,a)})},Ae=u.Class.create({init:function(t,e){Object.defineProperties(this,{masterToken:{value:t},keyExchangeScheme:{value:e,wrtiable:!1}})},getKeydata:function(){},toJSON:function(){var t={};return t.mastertoken=this.masterToken,t.scheme=this.keyExchangeScheme,t.keydata=this.getKeydata(),t},equals:function(t){return this===t||t instanceof Ae&&(this.masterToken.equals(t.masterToken)&&this.keyExchangeScheme==t.keyExchangeScheme)},uniqueKey:function(){return this.masterToken.uniqueKey()+":"+this.keyExchangeScheme}}),_e=function(r,e,a){V(a,function(){var t=e.mastertoken,i=e.scheme,n=e.keydata;if(!i||!t||"object"!=typeof t||!n||"object"!=typeof n)throw new j(J.JSON_PARSE_ERROR,"keyresponsedata "+JSON.stringify(e));if(!ve[i])throw new E(J.UNIDENTIFIED_KEYX_SCHEME,i);li(r,t,{result:function(e){V(a,function(){var t=r.getKeyExchangeFactory(i);if(t)return t.createResponseData(r,e,n);throw new E(J.KEYX_FACTORY_NOT_FOUND,i)})},error:function(t){a.error(t)}})})},gn=u.Class.create({init:function(t,e){Object.defineProperties(this,{keyResponseData:{value:t},cryptoContext:{value:e}})}}),(Ee=u.Class.create({init:function(t){Object.defineProperties(this,{scheme:{value:t}})},createRequestData:function(t,e,i){},createResponseData:function(t,e,i){},generateResponse:function(t,e,i,n){},getCryptoContext:function(t,e,i,n,r){},generateSessionKeys:function(e,n){V(n,function(){var t=new Uint8Array(16),i=new Uint8Array(32);e.getRandom().nextBytes(t),e.getRandom().nextBytes(i),Ot(t,vt,Et,{result:function(e){Ot(i,yt,St,{result:function(t){n.result({encryptionKey:e,hmacKey:t})},error:function(t){n.error(new C(J.SESSION_KEY_CREATION_FAILURE,null,t))}})},error:function(t){n.error(new C(J.SESSION_KEY_CREATION_FAILURE,null,t))}})})},importSessionKeys:function(t,i,n){Ot(t,vt,Et,{result:function(e){Ot(i,yt,St,{result:function(t){n.result({encryptionKey:e,hmacKey:t})},error:function(t){n.error(t)}})},error:function(t){n.error(t)}})}})).KeyExchangeData=gn,mn={PSK:"PSK",MGK:"MGK",WRAP:"WRAP"},vn=ke=ye.extend({init:function t(e,i){switch(t.base.call(this,ve.JWE_LADDER),e){case mn.WRAP:if(i)break;throw new N("Previous wrapping key based key exchange requires the previous wrapping key data and ID.");default:i=null}Object.defineProperties(this,{mechanism:{value:e},wrapdata:{value:i}})},getKeydata:function(){var t={};return t.mechanism=this.mechanism,this.wrapdata&&(t.wrapdata=m(this.wrapdata)),t},equals:function t(e){return e===this||e instanceof ke&&(t.base.call(this,e)&&this.mechanism==e.mechanism&&Jn(this.wrapdata,e.wrapdata))},uniqueKey:function t(){var e=t.base.call(this)+":"+this.mechanism;return this.wrapdata&&(e+=":"+zn(this.wrapdata)),e}}),yn=Se=Ae.extend({init:function t(e,i,n,r,a){t.base.call(this,e,ve.JWE_LADDER),Object.defineProperties(this,{wrapKey:{value:i},wrapdata:{value:n},encryptionKey:{value:r},hmacKey:{value:a}})},getKeydata:function(){var t={};return t.wrapkey=m(this.wrapKey),t.wrapdata=m(this.wrapdata),t.encryptionkey=m(this.encryptionKey),t.hmackey=m(this.hmacKey),t},equals:function t(e){return this===e||e instanceof Se&&(t.base.call(this,e)&&Jn(this.wrapKey,e.wrapKey)&&Jn(this.wrapdata,e.wrapdata)&&Jn(this.encryptionKey,e.encryptionKey)&&Jn(this.hmacKey,e.hmacKey))},uniqueKey:function t(){return t.base.call(this)+":"+zn(this.wrapKey)+":"+zn(this.wrapdata)+":"+zn(this.encryptionKey)+":"+zn(this.hmacKey)}}),Ee.extend({init:function t(e){t.base.call(this,ve.JWE_LADDER),Object.defineProperties(this,{repository:{value:e}})},createRequestData:function(t,n,e){V(e,function(){var t,e=n.mechanism,i=n.wrapdata;if(!e||e==mn.WRAP&&(!i||"string"!=typeof i))throw new j(J.JSON_PARSE_ERROR,"keydata "+JSON.stringify(n));if(!mn[e])throw new E(J.UNIDENTIFIED_KEYX_MECHANISM,e);if(e===mn.WRAP){try{t=O(i)}catch(t){throw new E(J.KEYX_WRAPPING_KEY_MISSING,"keydata "+n.toString())}if(null==t||0==t.length)throw new E(J.KEYX_WRAPPING_KEY_MISSING,"keydata "+n.toString())}else t=null;return new vn(e,t)})},createResponseData:function(t,e,i){var n,r,a,o,s,u,c;if(t=i.wrapkey,n=i.wrapdata,r=i.encryptionkey,a=i.hmackey,!(t&&"string"==typeof t&&n&&"string"==typeof n&&r&&"string"==typeof r&&a)||"string"!=typeof a)throw new j(J.JSON_PARSE_ERROR,"keydata "+JSON.stringify(i));try{o=O(t),s=O(n)}catch(t){throw new C(J.INVALID_SYMMETRIC_KEY,"keydata "+JSON.stringify(i),t)}try{u=O(r)}catch(t){throw new C(J.INVALID_ENCRYPTION_KEY,"keydata "+JSON.stringify(i),t)}try{c=O(a)}catch(t){throw new C(J.INVALID_HMAC_KEY,"keydata "+JSON.stringify(i),t)}return new yn(e,o,s,u,c)},generateResponse:function(b,u,g,m){var v,y;function n(i,n,r){v.generateSessionKeys(b,{result:function(e){V(m,function(){var t,s,l,d,p;t=i,s=n,l=r,d=e.encryptionKey,p=e.hmacKey,V(m,function(){var i,n,r,a,o;i=b,n=u.mechanism,r=u.wrapdata,a=t,V(o={result:function(t){t.wrap(s,{result:function(t){var e,u,c,h,f;e=s,u=l,c=d,h=p,f=t,V(m,function(){var t=new Kt(b,Gt.A128KW,Z,e);t.wrap(c,{result:function(s){t.wrap(h,{result:function(t){var n,r,e,a,i,o;n=u,r=f,e=c,a=s,i=h,o=t,V(m,function(){var t=b.getTokenFactory();y?t.renewMasterToken(b,y,e,i,{result:function(i){V(m,function(){var t=new Wt(b,i),e=new yn(i,r,n,a,o);return new Ee.KeyExchangeData(e,t,m)},v)},error:function(t){V(m,function(){throw t instanceof P&&t.setEntity(y),t})}}):t.createMasterToken(b,g,e,i,{result:function(i){V(m,function(){var t=new Wt(b,i),e=new yn(i,r,n,a,o);return new Ee.KeyExchangeData(e,t,m)},v)},error:m.error})},v)},error:function(t){V(m,function(){throw t instanceof P&&t.setEntity(y),t})}})},error:function(t){V(m,function(){throw t instanceof P&&t.setEntity(y),t})}})},v)},error:function(t){V(m,function(){throw t instanceof P&&t.setEntity(y),t})}})},error:function(t){V(m,function(){throw t instanceof P&&t.setEntity(y),t})}},function(){var t,e;switch(n){case mn.PSK:if(t=new ie(a),e=i.getEntityAuthenticationFactory(L.PSK))return t=e.getCryptoContext(i,t),new Kt(i,Gt.A128KW,Z,I);throw new E(J.UNSUPPORTED_KEYX_MECHANISM,n);case mn.MGK:if(t=new $t(a),e=i.getEntityAuthenticationFactory(L.MGK))return t=e.getCryptoContext(i,t),new Kt(i,Gt.A128KW,Z,I);throw new E(J.UNSUPPORTED_KEYX_MECHANISM,n);case mn.WRAP:(t=i.getMslCryptoContext()).unwrap(r,mt,kt,{result:function(t){V(o,function(){return new Kt(i,Gt.A128KW,Z,t)})},error:o.error});break;default:throw new E(J.UNSUPPORTED_KEYX_MECHANISM,n)}})},v)},v)},error:function(t){V(m,function(){throw t instanceof P&&t.setEntity(y),t})}})}V(m,function(){var i,t;if(!(u instanceof vn))throw new N("Key request data "+JSON.stringify(u)+" was not created by this factory.");if((i=g)instanceof fi){if(!g.isVerified())throw new dt(J.MASTERTOKEN_UNTRUSTED,g);i=(y=g).identity}t=new Uint8Array(16),b.getRandom().nextBytes(t),Ot(t,mt,kt,{result:function(e){V(m,function(){b.getMslCryptoContext().wrap(e,{result:function(t){n(i,e,t)},error:function(t){V(m,function(){throw t instanceof P&&t.setEntity(y),t},v)}})},v)},error:function(t){V(m,function(){throw new C(J.WRAP_KEY_CREATION_FAILURE,null,t).setEntity(y)},v)}})},v=this)},getCryptoContext:function(c,t,h,e,f){var l;V(f,function(){var n,u;if(!(t instanceof vn))throw new N("Key request data "+JSON.stringify(t)+" was not created by this factory.");if(!(h instanceof yn))throw new N("Key response data "+JSON.stringify(h)+" was not created by this factory.");n=t.mechanism,u=t.wrapdata,c.getEntityAuthenticationData(null,{result:function(s){V(f,function(){var t,e,i=s.getIdentity();switch(n){case mn.PSK:if(t=new ie(i),!(e=c.getEntityAuthenticationFactory(L.PSK)))throw new E(J.UNSUPPORTED_KEYX_MECHANISM,n).setEntity(s);t=e.getCryptoContext(c,t),t=new Kt(c,Gt.A128KW,Z,I);break;case mn.MGK:if(t=new $t(i),!(e=c.getEntityAuthenticationFactory(L.MGK)))throw new E(J.UNSUPPORTED_KEYX_MECHANISM,n).setEntity(s);t=e.getCryptoContext(c,t),t=new Kt(c,Gt.A128KW,Z,t.wrapKey);break;case mn.WRAP:if(t=this.repository.getCryptoContext(u))break;throw new E(J.KEYX_WRAPPING_KEY_MISSING,m(u)).setEntity(s);default:throw new E(J.UNSUPPORTED_KEYX_MECHANISM,n).setEntity(s)}t.unwrap(h.wrapKey,mt,kt,{result:function(t){var n,r,a,o,e;n=s,r=h,a=u,o=i,e=t,V(f,function(){var i=new Kt(c,Gt.A128KW,Z,e);i.unwrap(r.encryptionKey,vt,Et,{result:function(e){i.unwrap(r.hmacKey,yt,St,{result:function(t){V(f,function(){return this.repository.addCryptoContext(r.wrapdata,i),this.repository.removeCryptoContext(a),new Wt(c,r.masterToken,o,e,t)},l)},error:function(t){V(f,function(){throw t instanceof P&&t.setEntity(n),t})}})},error:function(t){V(f,function(){throw t instanceof P&&t.setEntity(n),t})}})},l)},error:function(t){V(f,function(){throw t instanceof P&&t.setEntity(s),t})}})},l)},error:f.error})},l=this)}}),wn={PSK:"PSK",MGK:"MGK",WRAP:"WRAP"},An=Te=ye.extend({init:function t(e,i){switch(t.base.call(this,ve.JWK_LADDER),e){case wn.WRAP:if(i)break;throw new N("Previous wrapping key based key exchange requires the previous wrapping key data and ID.");default:i=null}Object.defineProperties(this,{mechanism:{value:e},wrapdata:{value:i}})},getKeydata:function(){var t={};return t.mechanism=this.mechanism,this.wrapdata&&(t.wrapdata=m(this.wrapdata)),t},equals:function t(e){return e===this||e instanceof Te&&(t.base.call(this,e)&&this.mechanism==e.mechanism&&Jn(this.wrapdata,e.wrapdata))},uniqueKey:function t(){var e=t.base.call(this)+":"+this.mechanism;return this.wrapdata&&(e+=":"+zn(this.wrapdata)),e}}),_n=Ie=Ae.extend({init:function t(e,i,n,r,a){t.base.call(this,e,ve.JWK_LADDER),Object.defineProperties(this,{wrapKey:{value:i},wrapdata:{value:n},encryptionKey:{value:r},hmacKey:{value:a}})},getKeydata:function(){var t={};return t.wrapkey=m(this.wrapKey),t.wrapdata=m(this.wrapdata),t.encryptionkey=m(this.encryptionKey),t.hmackey=m(this.hmacKey),t},equals:function t(e){return this===e||e instanceof Ie&&(t.base.call(this,e)&&Jn(this.wrapKey,e.wrapKey)&&Jn(this.wrapdata,e.wrapdata)&&Jn(this.encryptionKey,e.encryptionKey)&&Jn(this.hmacKey,e.hmacKey))},uniqueKey:function t(){return t.base.call(this)+":"+zn(this.wrapKey)+":"+zn(this.wrapdata)+":"+zn(this.encryptionKey)+":"+zn(this.hmacKey)}}),En=Ht.extend({init:function(t){t&&t.rawKey&&(t=t.rawKey),Object.defineProperties(this,{_wrapKey:{value:t}})},encrypt:function(t,e){e.error(new C(J.ENCRYPT_NOT_SUPPORTED))},decrypt:function(t,e){e.error(new C(J.DECRYPT_NOT_SUPPORTED))},wrap:function(t,e){V(e,function(){k.wrapKey("jwk",t.rawKey,this._wrapKey,mt).then(function(t){e.result(t)},function(t){e.error(new C(J.WRAP_ERROR))})},this)},unwrap:function(t,e,i,n){V(n,function(){k.unwrapKey("jwk",t,this._wrapKey,mt,e,!1,i).then(function(t){var e;e=t,V(n,function(){switch(e.type){case"secret":It(e,n);break;case"public":Rt(e,n);break;case"private":jt(e,n);break;default:throw new C(J.UNSUPPORTED_KEY,"type: "+e.type)}})},function(t){n.error(new C(J.UNWRAP_ERROR))})},this)},sign:function(t,e){e.error(new C(J.SIGN_NOT_SUPPORTED))},verify:function(t,e,i){i.error(new C(J.VERIFY_NOT_SUPPORTED))}}),Ee.extend({init:function t(e){t.base.call(this,ve.JWK_LADDER),Object.defineProperties(this,{repository:{value:e}})},createRequestData:function(t,n,e){V(e,function(){var t,e=n.mechanism,i=n.wrapdata;if(!e||e==wn.WRAP&&(!i||"string"!=typeof i))throw new j(J.JSON_PARSE_ERROR,"keydata "+JSON.stringify(n));if(!wn[e])throw new E(J.UNIDENTIFIED_KEYX_MECHANISM,e);if(e===wn.WRAP){try{t=O(i)}catch(t){throw new E(J.KEYX_WRAPPING_KEY_MISSING,"keydata "+n.toString())}if(null==t||0==t.length)throw new E(J.KEYX_WRAPPING_KEY_MISSING,"keydata "+n.toString())}else t=null;return new An(e,t)})},createResponseData:function(t,e,i){var n,r,a,o,s,u,c;if(t=i.wrapkey,n=i.wrapdata,r=i.encryptionkey,a=i.hmackey,!(t&&"string"==typeof t&&n&&"string"==typeof n&&r&&"string"==typeof r&&a)||"string"!=typeof a)throw new j(J.JSON_PARSE_ERROR,"keydata "+JSON.stringify(i));try{o=O(t),s=O(n)}catch(t){throw new C(J.INVALID_SYMMETRIC_KEY,"keydata "+JSON.stringify(i),t)}try{u=O(r)}catch(t){throw new C(J.INVALID_ENCRYPTION_KEY,"keydata "+JSON.stringify(i),t)}try{c=O(a)}catch(t){throw new C(J.INVALID_HMAC_KEY,"keydata "+JSON.stringify(i),t)}return new _n(e,o,s,u,c)},generateResponse:function(b,u,g,m){var v,y;function n(i,n,r){v.generateSessionKeys(b,{result:function(e){V(m,function(){var t,s,l,d,p;t=i,s=n,l=r,d=e.encryptionKey,p=e.hmacKey,V(m,function(){var i,n,r,a,o;i=b,n=u.mechanism,r=u.wrapdata,a=t,V(o={result:function(t){t.wrap(s,{result:function(t){var e,u,c,h,f;e=s,u=l,c=d,h=p,f=t,V(m,function(){var t=new En(e);t.wrap(c,{result:function(s){t.wrap(h,{result:function(t){var n,r,e,a,i,o;n=u,r=f,e=c,a=s,i=h,o=t,V(m,function(){var t=b.getTokenFactory();y?t.renewMasterToken(b,y,e,i,{result:function(i){V(m,function(){var t=new Wt(b,i),e=new _n(i,r,n,a,o);return new Ee.KeyExchangeData(e,t,m)},v)},error:function(t){V(m,function(){throw t instanceof P&&t.setEntity(y),t})}}):t.createMasterToken(b,g,e,i,{result:function(i){V(m,function(){var t=new Wt(b,i),e=new _n(i,r,n,a,o);return new Ee.KeyExchangeData(e,t,m)},v)},error:m.error})},v)},error:function(t){V(m,function(){throw t instanceof P&&t.setEntity(y),t})}})},error:function(t){V(m,function(){throw t instanceof P&&t.setEntity(y),t})}})},v)},error:function(t){V(m,function(){throw t instanceof P&&t.setEntity(y),t})}})},error:function(t){V(m,function(){throw t instanceof P&&t.setEntity(y),t})}},function(){var t,e;switch(n){case wn.PSK:if(t=new ie(a),e=i.getEntityAuthenticationFactory(L.PSK))return t=e.getCryptoContext(i,t),new En(I);throw new E(J.UNSUPPORTED_KEYX_MECHANISM,n);case wn.MGK:if(t=new $t(a),e=i.getEntityAuthenticationFactory(L.MGK))return t=e.getCryptoContext(i,t),new En(I);throw new E(J.UNSUPPORTED_KEYX_MECHANISM,n);case wn.WRAP:(t=i.getMslCryptoContext()).unwrap(r,mt,kt,{result:function(t){V(o,function(){return new En(t)})},error:o.error});break;default:throw new E(J.UNSUPPORTED_KEYX_MECHANISM,n)}})},v)},v)},error:function(t){V(m,function(){throw t instanceof P&&t.setEntity(y),t})}})}V(m,function(){var i,t;if(!(u instanceof An))throw new N("Key request data "+JSON.stringify(u)+" was not created by this factory.");if((i=g)instanceof fi){if(!g.isVerified())throw new dt(J.MASTERTOKEN_UNTRUSTED,g);i=(y=g).identity}t=new Uint8Array(16),b.getRandom().nextBytes(t),Ot(t,mt,kt,{result:function(e){V(m,function(){b.getMslCryptoContext().wrap(e,{result:function(t){n(i,e,t)},error:function(t){V(m,function(){throw t instanceof P&&t.setEntity(y),t},v)}})},v)},error:function(t){V(m,function(){throw new C(J.WRAP_KEY_CREATION_FAILURE,null,t).setEntity(y)},v)}})},v=this)},getCryptoContext:function(c,t,h,e,f){var l;V(f,function(){var n,u;if(!(t instanceof An))throw new N("Key request data "+JSON.stringify(t)+" was not created by this factory.");if(!(h instanceof _n))throw new N("Key response data "+JSON.stringify(h)+" was not created by this factory.");n=t.mechanism,u=t.wrapdata,c.getEntityAuthenticationData(null,{result:function(s){V(f,function(){var t,e,i=s.getIdentity();switch(n){case wn.PSK:if(t=new ie(i),!(e=c.getEntityAuthenticationFactory(L.PSK)))throw new E(J.UNSUPPORTED_KEYX_MECHANISM,n).setEntity(s);t=e.getCryptoContext(c,t),t=new En(t.wrapKey);break;case wn.MGK:if(t=new $t(i),!(e=c.getEntityAuthenticationFactory(L.MGK)))throw new E(J.UNSUPPORTED_KEYX_MECHANISM,n).setEntity(s);t=e.getCryptoContext(c,t),t=new En(t.wrapKey);break;case wn.WRAP:if(t=this.repository.getCryptoContext(u))break;throw new E(J.KEYX_WRAPPING_KEY_MISSING,m(u)).setEntity(s);default:throw new E(J.UNSUPPORTED_KEYX_MECHANISM,n).setEntity(s)}t.unwrap(h.wrapKey,mt,kt,{result:function(t){var n,r,a,o,e;n=s,r=h,a=u,o=i,e=t,V(f,function(){var i=new En(e);i.unwrap(r.encryptionKey,vt,Et,{result:function(e){i.unwrap(r.hmacKey,yt,St,{result:function(t){V(f,function(){return this.repository.addCryptoContext(r.wrapdata,i),this.repository.removeCryptoContext(a),new Wt(c,r.masterToken,o,e,t)},l)},error:function(t){V(f,function(){throw t instanceof P&&t.setEntity(n),t})}})},error:function(t){V(f,function(){throw t instanceof P&&t.setEntity(n),t})}})},l)},error:function(t){V(f,function(){throw t instanceof P&&t.setEntity(s),t})}})},l)},error:f.error})},l=this)}}),gn=u.Class.create({addCryptoContext:function(t,e){},getCryptoContext:function(t){},removeCryptoContext:function(t){}}),kn=xe={RSA:"RSA",ECC:"ECC",JWE_RSA:"JWE_RSA",JWEJS_RSA:"JWEJS_RSA",JWK_RSA:"JWK_RSA",JWK_RSAES:"JWK_RSAES"},Sn=Re=ye.extend({init:function t(e,i,n,r){t.base.call(this,ve.ASYMMETRIC_WRAPPED),Object.defineProperties(this,{keyPairId:{value:e},mechanism:{value:i},publicKey:{value:n},privateKey:{value:r}})},getKeydata:function(){var t={};return t.keypairid=this.keyPairId,t.mechanism=this.mechanism,t.publickey=m(this.publicKey.getEncoded()),t},equals:function t(e){var i;return e===this||e instanceof Re&&(i=this.privateKey===e.privateKey||this.privateKey&&e.privateKey&&Jn(this.privateKey.getEncoded(),e.privateKey.getEncoded()),t.base.call(this,e)&&this.keyPairId==e.keyPairId&&this.mechanism==e.mechanism&&Jn(this.publicKey.getEncoded(),e.publicKey.getEncoded())&&i)},uniqueKey:function t(){var e=this.publicKey.getEncoded(),i=this.privateKey&&this.privateKey.getEncoded(),e=t.base.call(this)+":"+this.keyPairId+":"+this.mechanism+":"+zn(e);return i&&(e+=":"+zn(i)),e}}),Tn=function(r,a){V(a,function(){var t,e=r.keypairid,i=r.mechanism,n=r.publickey;if(!e||"string"!=typeof e||!i||!n||"string"!=typeof n)throw new j(J.JSON_PARSE_ERROR,"keydata "+JSON.stringify(r));if(!kn[i])throw new E(J.UNIDENTIFIED_KEYX_MECHANISM,i);try{switch(t=O(n),i){case kn.JWE_RSA:case kn.JWEJS_RSA:case kn.JWK_RSA:Pt(t,wt,kt,{result:function(t){a.result(new Sn(e,i,t,null))},error:function(t){a.error(t)}});break;case kn.JWK_RSAES:Pt(t,At,kt,{result:function(t){a.result(new Sn(e,i,t,null))},error:function(t){a.error(t)}});break;default:throw new C(J.UNSUPPORTED_KEYX_MECHANISM,i)}}catch(t){if(t instanceof P)throw t;throw new C(J.INVALID_PUBLIC_KEY,"keydata "+JSON.stringify(r),t)}})},In=Pe=Ae.extend({init:function t(e,i,n,r){t.base.call(this,e,ve.ASYMMETRIC_WRAPPED),Object.defineProperties(this,{keyPairId:{value:i},encryptionKey:{value:n},hmacKey:{value:r}})},getKeydata:function(){var t={};return t.keypairid=this.keyPairId,t.encryptionkey=m(this.encryptionKey),t.hmackey=m(this.hmacKey),t},equals:function t(e){return this===e||e instanceof Pe&&(t.base.call(this,e)&&this.keyPairId==e.keyPairId&&Jn(this.encryptionKey,e.encryptionKey)&&Jn(this.hmacKey,e.hmacKey))},uniqueKey:function t(){return t.base.call(this)+":"+this.keyPairId+":"+zn(this.encryptionKey)+":"+zn(this.hmacKey)}}),Oe=Ee.extend({init:function t(){t.base.call(this,ve.ASYMMETRIC_WRAPPED)},createRequestData:function(t,e,i){Tn(e,i)},createResponseData:function(t,e,i){var n,r,a,o;if(t=i.keypairid,n=i.encryptionkey,r=i.hmackey,!t||"string"!=typeof t||!n||"string"!=typeof n||!r||"string"!=typeof r)throw new j(J.JSON_PARSE_ERROR,"keydata "+JSON.stringify(i));try{a=O(n)}catch(t){throw new C(J.INVALID_ENCRYPTION_KEY,"keydata "+JSON.stringify(i),t)}try{o=O(r)}catch(t){throw new C(J.INVALID_HMAC_KEY,"keydata "+JSON.stringify(i),t)}return new In(e,t,a,o)},generateResponse:function(u,c,h,f){var l;function e(o,s){V(f,function(){var t=Yr(u,c.keyPairId,c.mechanism,null,c.publicKey);t.wrap(o,{result:function(a){V(f,function(){t.wrap(s,{result:function(t){var e,n,i,r;e=o,n=a,i=s,r=t,V(f,function(){var t=u.getTokenFactory();h instanceof fi?t.renewMasterToken(u,h,e,i,{result:function(i){V(f,function(){var t=new Wt(u,i),e=new In(i,c.keyPairId,n,r);return new Ee.KeyExchangeData(e,t,f)},l)},error:function(t){V(f,function(){throw t instanceof P&&t.setEntity(h),t},l)}}):t.createMasterToken(u,h,e,i,{result:function(i){V(f,function(){var t=new Wt(u,i),e=new In(i,c.keyPairId,n,r);return new Ee.KeyExchangeData(e,t,f)},l)},error:f.error})},l)},error:function(t){V(f,function(){throw t instanceof P&&h instanceof fi&&t.setEntity(h),t},l)}})},l)},error:function(t){V(f,function(){throw t instanceof P&&h instanceof fi&&t.setEntity(h),t},l)}})},l)}V(f,function(){if(!(c instanceof Sn))throw new N("Key request data "+JSON.stringify(c)+" was not created by this factory.");this.generateSessionKeys(u,{result:function(t){e(t.encryptionKey,t.hmacKey)},error:function(t){V(f,function(){throw t instanceof P&&h instanceof fi&&t.setEntity(h),t},l)}})},l=this)},getCryptoContext:function(r,n,a,o,s){var u=this;V(s,function(){var t,e,i;if(!(n instanceof Sn))throw new N("Key request data "+JSON.stringify(n)+" was not created by this factory.");if(!(a instanceof In))throw new N("Key response data "+JSON.stringify(a)+" was not created by this factory.");if((t=n.keyPairId)!=(e=a.keyPairId))throw new E(J.KEYX_RESPONSE_REQUEST_MISMATCH,"request "+t+"; response "+e).setEntity(o);if(!(e=n.privateKey))throw new E(J.KEYX_PRIVATE_KEY_MISSING,"request Asymmetric private key").setEntity(o);(i=Yr(r,t,n.mechanism,e,null)).unwrap(a.encryptionKey,vt,Et,{result:function(n){i.unwrap(a.hmacKey,yt,St,{result:function(i){r.getEntityAuthenticationData(null,{result:function(e){V(s,function(){var t=e.getIdentity();return new Wt(r,a.masterToken,t,n,i)},u)},error:function(t){V(s,function(){throw t instanceof P&&t.setEntity(o),t},u)}})},error:function(t){V(s,function(){throw t instanceof P&&t.setEntity(o),t},u)}})},error:function(t){V(s,function(){throw t instanceof P&&t.setEntity(o),t},u)}})},u)}}),Ce=u.Class.create({init:function(t){var i,n,r,e=c.parser(),a=[],o=[],s=0,u=!1;e.onerror=function(t){u||(u=!0,e.end())},e.onopenobject=function(t){var e;i?(i[r]={},o.push(i),i=i[r]):n?(e={},o.push(n),n.push(e),i=e,n=I):i={},r=t},e.oncloseobject=function(){var t=o.pop();t?"object"==typeof t?i=t:(i=I,n=t):(a.push(i),s=e.index,i=I)},e.onopenarray=function(){var t;i?(i[r]=[],o.push(i),n=i[r],i=I):n=n?(t=[],o.push(n),n.push(t),t):[]},e.onclosearray=function(){var t=o.pop();n=t?"object"==typeof t?(i=t,I):t:(a.push(n),s=e.index,I)},e.onkey=function(t){r=t},e.onvalue=function(t){i?i[r]=t:n?n.push(t):(a.push(t),s=e.index)},e.write(t).close(),Object.defineProperties(this,{_values:{value:a},_lastIndex:{value:s,writable:!0}})},more:function(){return 0<this._values.length},nextValue:function(){return 0==this._values.length?I:this._values.shift()},lastIndex:function(){return this._lastIndex}}),Ne="entityauthdata",Me="signature",je=function(o,s,u,c){V(c,function(){var e,i,n,t=s.entityauthdata,r=s.mastertoken,a=s.signature;if(t&&"object"!=typeof t||r&&"object"!=typeof r||"string"!=typeof a)throw new j(J.JSON_PARSE_ERROR,"header/errormsg "+JSON.stringify(s));try{e=O(a)}catch(t){throw new M(J.HEADER_SIGNATURE_INVALID,"header/errormsg "+JSON.stringify(s),t)}if(i=null,t&&(i=Zt(o,t)),(n=s.headerdata)!=I&&null!=n){if("string"!=typeof n)throw new j(J.JSON_PARSE_ERROR,"header/errormsg "+JSON.stringify(s));r?li(o,r,{result:function(t){Ge(o,n,i,t,e,u,c)},error:function(t){c.error(t)}}):Ge(o,n,i,null,e,u,c)}else{if((t=s.errordata)==I||null==t)throw new j(J.JSON_PARSE_ERROR,JSON.stringify(s));if("string"!=typeof t)throw new j(J.JSON_PARSE_ERROR,"header/errormsg "+JSON.stringify(s));Be(o,t,i,e,c)}})},De=u.Class.create({init:function(e,n,r,a,o,s,u,c,h,f){var l=this;V(f,function(){var t,i;if(s<0&&(s=-1),a<0||R<a)throw new N("Message ID "+a+" is out of range.");if(!n)throw new M(J.MESSAGE_ENTITY_NOT_FOUND);if(h)return Object.defineProperties(this,{entityAuthenticationData:{value:n,writable:!1,configurable:!1},recipient:{value:r},messageId:{value:a},errorCode:{value:o},internalCode:{value:s},errorMessage:{value:u},userMessage:{value:c},errordata:{value:h.errordata},signature:{value:h.signature}}),this;t={},r&&(t.recipient=r),t.messageid=a,t.errorcode=o,0<s&&(t.internalcode=s),u&&(t.errormsg=u),c&&(t.usermsg=c);try{i=e.getEntityAuthenticationFactory(n.scheme).getCryptoContext(e,n)}catch(t){throw t instanceof P&&(t.setEntity(n),t.setMessageId(a)),t}t=G(JSON.stringify(t),x),i.encrypt(t,{result:function(e){V(f,function(){i.sign(e,{result:function(t){V(f,function(){return Object.defineProperties(this,{entityAuthenticationData:{value:n,writable:!1,configurable:!1},recipient:{value:r},messageId:{value:a},errorCode:{value:o},internalCode:{value:s},errorMessage:{value:u},userMessage:{value:c},errordata:{value:e},signature:{value:t}}),this},l)},error:function(t){V(f,function(){throw t instanceof P&&(t.setEntity(n),t.setMessageId(a)),t},l)}})},l)},error:function(t){V(f,function(){throw t instanceof P&&(t.setEntity(n),t.setMessageId(a)),t},l)}})},l)},toJSON:function(){var t={};return t[Ne]=this.entityAuthenticationData,t.errordata=m(this.errordata),t[Me]=m(this.signature),t}}),Le=function(t,e,i,n,r,a,o,s,u){new De(t,e,i,n,r,a,o,s,null,u)},Be=function(h,f,l,d,p){V(p,function(){var t,e,i;if(!l)throw new M(J.MESSAGE_ENTITY_NOT_FOUND);try{if(t=l.scheme,!(e=h.getEntityAuthenticationFactory(t)))throw new ft(J.ENTITYAUTH_FACTORY_NOT_FOUND,t);i=e.getCryptoContext(h,l)}catch(t){throw t instanceof P&&t.setEntity(l),t}try{f=O(f)}catch(t){throw new M(J.HEADER_DATA_INVALID,f,t).setEntity(l)}if(!f||0==f.length)throw new M(J.HEADER_DATA_MISSING,f).setEntity(l);i.verify(f,d,{result:function(t){V(p,function(){if(!t)throw new C(J.MESSAGE_VERIFICATION_FAILED).setEntity(l);i.decrypt(f,{result:function(c){V(p,function(){var t,e,i,n,r,a,o,s,u=K(c,x);try{t=JSON.parse(u)}catch(t){if(t instanceof SyntaxError)throw new j(J.JSON_PARSE_ERROR,"errordata "+u,t).setEntity(l);throw t}if(e=t.recipient!==I?t.recipient:null,i=parseInt(t.messageid),n=parseInt(t.errorcode),r=parseInt(t.internalcode),a=t.errormsg,o=t.usermsg,e&&"string"!=typeof e||!i||i!=i||!n||n!=n||t.internalcode&&r!=r||a&&"string"!=typeof a||o&&"string"!=typeof o)throw new j(J.JSON_PARSE_ERROR,"errordata "+u).setEntity(l);if(i<0||R<i)throw new M(J.MESSAGE_ID_OUT_OF_RANGE,"errordata "+u).setEntity(l);for(s in t=!1,y)if(y[s]==n){t=!0;break}if(t||(n=y.FAIL),r){if(r<0)throw new M(J.INTERNAL_CODE_NEGATIVE,"errordata "+u).setEntity(l).setMessageId(i)}else r=-1;u=new Jr(f,d),new De(h,l,e,i,n,r,a,o,u,p)})},error:function(t){V(p,function(){throw t instanceof P&&t.setEntity(l),t})}})})},error:function(t){V(p,function(){throw t instanceof P&&t.setEntity(l),t})}})})},xi=u.Class.create({getUserMessage:function(t,e){}}),qe=function(t,i){var e;return t&&i?(e=t.compressionAlgorithms.filter(function(t){for(var e=0;e<i.compressionAlgorithms.length;++e)if(t==i.compressionAlgorithms[e])return!0;return!1}),t=t.languages.filter(function(t){for(var e=0;e<i.languages.length;++e)if(t==i.languages[e])return!0;return!1}),new Ue(e,t)):null},Ue=u.Class.create({init:function(t,e){e=e||[],(t=t||[]).sort(),Object.defineProperties(this,{compressionAlgorithms:{value:t,enumerable:!0},languages:{value:e,enumerable:!0}})},toJSON:function(){var t={};return t.compressionalgos=this.compressionAlgorithms,t.languages=this.languages,t},equals:function(t){return this===t||t instanceof Ue&&(Qn(this.compressionAlgorithms,t.compressionAlgorithms)&&Qn(this.languages,t.languages))},uniqueKey:function(){return this.compressionAlgorithms.join(":")+"|"+this.languages.join(":")}}),Fe=function(t){var e,i=t.compressionalgos,n=t.languages;if(i&&!(i instanceof Array)||n&&!(n instanceof Array))throw new j(J.JSON_PARSE_ERROR,"capabilities "+JSON.stringify(t));t=[];for(var r=0;i&&r<i.length;++r)e=i[r],nt[e]&&t.push(e);return new Ue(t,n)},On=Ve=u.Class.create({init:function(t,e,i,n,r,a,o,s,u){Object.defineProperties(this,{messageId:{value:t},nonReplayableId:{value:e},renewable:{value:i},capabilities:{value:n},keyRequestData:{value:r},keyResponseData:{value:a},userAuthData:{value:o},userIdToken:{value:s},serviceTokens:{value:u}})}}),xn=Ye=u.Class.create({init:function(t,e,i){Object.defineProperties(this,{peerMasterToken:{value:t},peerUserIdToken:{value:e},peerServiceTokens:{value:i}})}}),He=u.Class.create({init:function(v,y,w,A,_,E,k){var S;function e(m){V(k,function(){var n,r,a,o,s,u,c,h,f,l,d,p,e,i,b,t,g;if(y=w?null:y,n=A.nonReplayableId,r=A.renewable,a=A.capabilities,o=A.messageId,s=A.keyRequestData||[],u=A.keyResponseData,c=A.userAuthData,h=A.userIdToken,f=A.serviceTokens||[],p=v.isPeerToPeer()?(l=_.peerMasterToken,d=_.peerUserIdToken,_.peerServiceTokens||[]):(d=l=null,[]),o<0||R<o)throw new N("Message ID "+o+" is out of range.");if(!y&&!w)throw new N("Message entity authentication data or master token must be provided.");if(i=u?v.isPeerToPeer()?(e=w,u.masterToken):(e=u.masterToken,l):(e=w,l),h&&(!e||!h.isBoundTo(e)))throw new N("User ID token must be bound to a master token.");if(d&&(!i||!d.isBoundTo(i)))throw new N("Peer user ID token must be bound to a peer master token.");if(f.forEach(function(t){if(t.isMasterTokenBound()&&(!e||!t.isBoundTo(e)))throw new N("Master token bound service tokens must be bound to the provided master token.");if(t.isUserIdTokenBound()&&(!h||!t.isBoundTo(h)))throw new N("User ID token bound service tokens must be bound to the provided user ID token.")},this),p.forEach(function(t){if(t.isMasterTokenBound()&&(!i||!t.isBoundTo(i)))throw new N("Master token bound peer service tokens must be bound to the provided peer master token.");if(t.isUserIdTokenBound()&&(!d||!t.isBoundTo(d)))throw new N("User ID token bound peer service tokens must be bound to the provided peer user ID token.")},this),E)return g=E.customer,t=Wr(0,b=E.messageCryptoContext,g,y,w,m,o,s,u,c,h,f,l,d,p,n,r,a,E.headerdata,E.signature),Object.defineProperties(this,t),this;g=h?h.customer:null,t={},m&&(t.sender=m),t.messageid=o,"number"==typeof n&&(t.nonreplayableid=n),t.renewable=r,a&&(t.capabilities=a),0<s.length&&(t.keyrequestdata=s),u&&(t.keyresponsedata=u),c&&(t.userauthdata=c),h&&(t.useridtoken=h),0<f.length&&(t.servicetokens=f),l&&(t.peermastertoken=l),d&&(t.peeruseridtoken=d),0<p.length&&(t.peerservicetokens=p);try{b=Qr(v,y,w)}catch(t){throw t instanceof P&&(t.setEntity(w),t.setEntity(y),t.setUser(h),t.setUser(c),t.setMessageId(o)),t}t=G(JSON.stringify(t),x),b.encrypt(t,{result:function(i){V(k,function(){b.sign(i,{result:function(e){V(k,function(){var t=Wr(0,b,g,y,w,m,o,s,u,c,h,f,l,d,p,n,r,a,i,e);return Object.defineProperties(this,t),this},S)},error:function(t){V(k,function(){throw t instanceof P&&(t.setEntity(w),t.setEntity(y),t.setUser(h),t.setUser(c),t.setMessageId(o)),t},S)}})},S)},error:function(t){V(k,function(){throw t instanceof P&&(t.setEntity(w),t.setEntity(y),t.setUser(h),t.setUser(c),t.setMessageId(o)),t},S)}})},S)}V(k,function(){E?e(E.sender):w?v.getEntityAuthenticationData(null,{result:function(t){e(t=t.getIdentity())},error:k.error}):e(null)},S=this)},isEncrypting:function(){return this.masterToken||Xn(this.entityAuthenticationData.scheme)},isRenewable:function(){return this.renewable},toJSON:function(){var t={};return this.masterToken?t.mastertoken=this.masterToken:t[Ne]=this.entityAuthenticationData,t.headerdata=m(this.headerdata),t[Me]=m(this.signature),t}}),Ke=function(t,e,i,n,r,a){new He(t,e,i,n,r,null,a)},Ge=function(y,w,A,_,E,k,S){V(S,function(){var e,v,i,n,t,r;if(!(A=_?null:A)&&!_)throw new M(J.MESSAGE_ENTITY_NOT_FOUND);e=w;try{w=O(e)}catch(t){throw new M(J.HEADER_DATA_INVALID,e,t)}if(!w||0==w.length)throw new M(J.HEADER_DATA_MISSING,e);try{v=Qr(y,A,_)}catch(t){throw t instanceof P&&(t.setEntity(_),t.setEntity(A)),t}i=v,n=w,t=E,V(r={result:function(m){V(S,function(){var p,b,g,t,e,i,n,r;try{p=JSON.parse(m)}catch(t){if(t instanceof SyntaxError)throw new j(J.JSON_PARSE_ERROR,"headerdata "+m,t).setEntity(_).setEntity(A);throw t}if(!(b=parseInt(p.messageid))||b!=b)throw new j(J.JSON_PARSE_ERROR,"headerdata "+m).setEntity(_).setEntity(A);if(b<0||R<b)throw new M(J.MESSAGE_ID_OUT_OF_RANGE,"headerdata "+m).setEntity(_).setEntity(A);if(g=_?p.sender:null,_&&(!g||"string"!=typeof g))throw new j(J.JSON_PARSE_ERROR,"headerdata "+m).setEntity(_).setEntity(A).setMessageId(b);if((t=p.keyresponsedata)&&"object"!=typeof t)throw new j(J.JSON_PARSE_ERROR,"headerdata "+m).setEntity(_).setEntity(A).setMessageId(b);e=S,i=y,n=t,V(r={result:function(d){V(S,function(){var t,e,i,n,a=!y.isPeerToPeer()&&d?d.masterToken:_,r=p.useridtoken;if(r&&"object"!=typeof r)throw new j(J.JSON_PARSE_ERROR,"headerdata "+m);t=y,e=r,i=a,V(n={result:function(l){V(S,function(){var t,e,i,n,r=p.userauthdata;if(r&&"object"!=typeof r)throw new j(J.JSON_PARSE_ERROR,"headerdata "+m);t=y,e=a,i=r,V(n={result:function(f){V(S,function(){var t,e,h;if(f){if(t=f.scheme,!(e=y.getUserAuthenticationFactory(t)))throw new pt(J.USERAUTH_FACTORY_NOT_FOUND,t).setUser(l).setUser(f);t=_?_.identity:A.getIdentity(),h=e.authenticate(y,t,f,l)}else h=l?l.customer:null;Xr(y,p.servicetokens,a,l,k,m,{result:function(c){V(S,function(){var o,t,s=p.nonreplayableid!==I?parseInt(p.nonreplayableid):null,u=p.renewable;if(s!=s||"boolean"!=typeof u)throw new j(J.JSON_PARSE_ERROR,"headerdata "+m);if(s<0||R<s)throw new M(J.NONREPLAYABLE_ID_OUT_OF_RANGE,"headerdata "+m);if(o=null,t=p.capabilities){if("object"!=typeof t)throw new j(J.JSON_PARSE_ERROR,"headerdata "+m);o=Fe(t)}$r(y,p,m,{result:function(a){Zr(y,p,d,k,m,{result:function(r){V(S,function(){var t=r.peerMasterToken,e=r.peerUserIdToken,i=r.peerServiceTokens,n=new On(b,s,u,o,a,d,f,l,c),t=new xn(t,e,i),e=new zr(h,g,v,w,E);new He(y,A,_,n,t,e,S)})},error:S.error})},error:function(t){V(S,function(){throw t instanceof P&&(t.setUser(l),t.setUser(f)),t})}})})},error:function(t){V(S,function(){throw t instanceof P&&(t.setEntity(a),t.setUser(l),t.setUser(f)),t})}})})},error:S.error},function(){if(!i)return null;wi(t,e,i,n)})})},error:S.error},function(){if(!e)return null;pi(t,e,i,n)})})},error:(S={result:function(t){e.result(t)},error:function(t){t instanceof P&&(t.setEntity(_),t.setEntity(A),t.setMessageId(b)),e.error(t)}}).error},function(){if(!n)return null;_e(i,n,r)})})},error:S.error},function(){i.verify(n,t,{result:function(t){V(r,function(){if(!t)throw new C(J.MESSAGE_VERIFICATION_FAILED);i.decrypt(n,{result:function(t){V(r,function(){return K(t,x)})},error:function(t){r.error(t)}})})},error:function(t){r.error(t)}})})})},Je=u.Class.create({init:function(i,n,r,a,o,s,u,c){var h=this;V(c,function(){var t,e;if(i<0||R<i)throw new N("Sequence number "+i+" is outside the valid range.");if(n<0||R<n)throw new N("Message ID "+n+" is outside the valid range.");if(u)return Object.defineProperties(this,{sequenceNumber:{value:i},messageId:{value:n},compressionAlgo:{value:a},data:{value:o},endofmsg:{value:r},payload:{value:u.payload},signature:{value:u.signature}}),this;a&&(t=Ii(a,o))||(a=null,t=o),(e={}).sequencenumber=i,e.messageid=n,r&&(e.endofmsg=r),a&&(e.compressionalgo=a),e.data=m(t),t=G(JSON.stringify(e),x),s.encrypt(t,{result:function(e){V(c,function(){s.sign(e,{result:function(t){V(c,function(){return Object.defineProperties(this,{sequenceNumber:{value:i,writable:!1,configurable:!1},messageId:{value:n},compressionAlgo:{value:a},data:{value:o},endofmsg:{value:r},payload:{value:e},signature:{value:t}}),this},h)},error:function(t){c.error(t)}})},h)},error:function(t){c.error(t)}})},h)},isEndOfMessage:function(){return this.endofmsg},toJSON:function(){var t={};return t.payload=m(this.payload),t.signature=m(this.signature),t}}),ze=function(t,e,i,n,r,a,o){new Je(t,e,i,n,r,a,null,o)},We=function(i,h,f){V(f,function(){var u,c,t=i.payload,e=i.signature;if(!t||"string"!=typeof t||"string"!=typeof e)throw new j(J.JSON_PARSE_ERROR,"payload chunk "+JSON.stringify(i));try{u=O(t)}catch(t){throw new M(J.PAYLOAD_INVALID,"payload chunk "+JSON.stringify(i),t)}try{c=O(e)}catch(t){throw new M(J.PAYLOAD_SIGNATURE_INVALID,"payload chunk "+JSON.stringify(i),t)}h.verify(u,c,{result:function(t){V(f,function(){if(!t)throw new C(J.PAYLOAD_VERIFICATION_FAILED);h.decrypt(u,{result:function(s){V(f,function(){var e,t,i,n,r,a,o=K(s,x);try{e=JSON.parse(o)}catch(t){if(t instanceof SyntaxError)throw new j(J.JSON_PARSE_ERROR,"payload chunk payload "+o,t);throw t}if(t=parseInt(e.sequencenumber),i=parseInt(e.messageid),n=e.endofmsg,r=e.compressionalgo,e=e.data,!t||t!=t||!i||i!=i||n&&"boolean"!=typeof n||r&&"string"!=typeof r||"string"!=typeof e)throw new j(J.JSON_PARSE_ERROR,"payload chunk payload "+o);if(t<0||R<t)throw new P(J.PAYLOAD_SEQUENCE_NUMBER_OUT_OF_RANGE,"payload chunk payload "+o);if(i<0||R<i)throw new P(J.PAYLOAD_MESSAGE_ID_OUT_OF_RANGE,"payload chunk payload "+o);if(n=n||!1,r&&!nt[r])throw new M(J.UNIDENTIFIED_COMPRESSION,r);try{a=O(e)}catch(t){throw new M(J.PAYLOAD_DATA_CORRUPT,e,t)}if(a&&0!=a.length)o=r?Oi(r,a):a;else{if(0<e.length)throw new M(J.PAYLOAD_DATA_CORRUPT,e);if(!n)throw new M(J.PAYLOAD_DATA_MISSING,e);o=new Uint8Array(0)}a=new ta(u,c),new Je(t,i,n,r,o,h,a,f)})},error:function(t){f.error(t)}})})},error:function(t){f.error(t)}})})},Rn=new Uint8Array(0),Pn=Xe=function(t){if(t<0||R<t)throw new N("Message ID "+t+" is outside the valid range.");return t==R?0:t+1},Ze=function(t){if(t<0||R<t)throw new N("Message ID "+t+" is outside the valid range.");return 0==t?R:t-1},$e=function(i,n,r,a,o){V(o,function(){var t;if(a==I||null==a)for(t=i.getRandom();(a=t.nextLong())<0||R<a;);else if(a<0||R<a)throw new N("Message ID "+a+" is outside the valid range.");i.getEntityAuthenticationData(null,{result:function(e){V(o,function(){var t=i.getMessageCapabilities();return new Qe(i,a,t,e,n,r,null,null,null,null,null)})},error:function(t){o.error(t)}})})},ti=function(p,b,g){V(g,function(){var h,e,f,i,n,l,r,t,a,o,s;function d(t){V(g,function(){throw t instanceof P&&(t.setEntity(h),t.setEntity(e),t.setUser(f),t.setUser(i),t.setMessageId(n)),t})}h=b.masterToken,e=b.entityAuthenticationData,f=b.userIdToken,i=b.userAuthenticationData,n=b.messageId,l=Pn(n),r=p,t=b,a=e,o=h,V(s={result:function(c){V(g,function(){var t=c?c.keyResponseData.masterToken:h;p.getEntityAuthenticationData(null,{result:function(u){V(g,function(){var r,a,o,s;r=p,a=b,o=t,V(s={result:function(n){V(g,function(){var t,e,i;return f=n,t=qe(b.messageCapabilities,p.getMessageCapabilities()),e=b.keyResponseData,i=b.serviceTokens,p.isPeerToPeer()?new Qe(p,l,t,u,e?e.masterToken:b.peerMasterToken,b.peerUserIdToken,b.peerServiceTokens,h,f,i,c):new Qe(p,l,t,u,e?e.masterToken:h,f,i,null,null,null,c)})},error:d},function(){var t,e=a.userIdToken,i=a.userAuthenticationData,n=a.messageId;if(e&&e.isVerified()){if(e.isRenewable()&&a.isRenewable()||e.isExpired()||!e.isBoundTo(o))return void(i=r.getTokenFactory()).renewUserIdToken(r,e,o,s)}else if(a.isRenewable()&&o&&i){if(!(e=a.customer)){if(e=i.scheme,!(t=r.getUserAuthenticationFactory(e)))throw new pt(J.USERAUTH_FACTORY_NOT_FOUND,e).setEntity(o).setUser(i).setMessageId(n);e=t.authenticate(r,o.identity,i,null)}return void(i=r.getTokenFactory()).createUserIdToken(r,e,o,s)}return e})})},error:d})})},error:d},function(){var e=t.keyRequestData;if(!(t.isRenewable()&&0<e.length))return null;o?o.isRenewable()||o.isExpired()?ea(r,e,o,null,s):r.getTokenFactory().isNewestMasterToken(r,o,{result:function(t){V(s,function(){if(t)return null;ea(r,e,o,null,s)})},error:s.error}):ea(r,e,null,a.getIdentity(),s)})})},ei=function(n,r,a,o,s){V(s,function(){n.getEntityAuthenticationData(null,{result:function(i){V(s,function(){var t,e;if(r!=I&&null!=r)t=Pn(r);else for(e=n.getRandom();(t=e.nextInt())<0||R<t;);Le(n,i,t,a.responseCode,a.internalCode,a.message,o,s)})},error:function(t){s.error(t)}})})},Qe=u.Class.create({init:function(t,e,i,n,r,a,o,s,u,c,h){var f,l,d,p,b;if(!t.isPeerToPeer()&&(s||u))throw new N("Cannot set peer master token or peer user ID token when not in peer-to-peer mode.");f=h&&!t.isPeerToPeer()?h.keyResponseData.masterToken:r,l=[],f=t.getMslStore().getServiceTokens(f,a),l.push.apply(l,f),o&&o.forEach(function(t){l.push(t)},this),d=[],t.isPeerToPeer()&&(p=s,b=u,o=h?h.keyResponseData.masterToken:s,u=t.getMslStore().getServiceTokens(o,u),d.push.apply(d,u),c&&c.forEach(function(t){d.push(t)},this)),Object.defineProperties(this,{_ctx:{value:t},_entityAuthData:{value:n},_masterToken:{value:r,writable:!0},_messageId:{value:e},_capabilities:{value:i},_keyExchangeData:{value:h},_nonReplayable:{value:!1,writable:!0},_renewable:{value:!1,writable:!0},_keyRequestData:{value:{}},_userAuthData:{value:null,writable:!0},_userIdToken:{value:a,writable:!0},_serviceTokens:{value:l},_peerMasterToken:{value:p,writable:!0},_peerUserIdToken:{value:b,writable:!0},_peerServiceTokens:{value:d}})},getMessageId:function(){return this._messageId},getMasterToken:function(){return this._masterToken},getUserIdToken:function(){return this._userIdToken},getKeyExchangeData:function(){return this._keyExchangeData},willEncryptHeader:function(){return this._masterToken||Xn(this._entityAuthData.scheme)},willEncryptPayloads:function(){return this._masterToken||!this._ctx.isPeerToPeer()&&this._keyExchangeData||Xn(this._entityAuthData.scheme)},willIntegrityProtectHeader:function(){return this._masterToken||Zn(this._entityAuthData.scheme)},willIntegrityProtectPayloads:function(){return this._masterToken||!this._ctx.isPeerToPeer()&&this._keyExchangeData||Zn(this._entityAuthData.scheme)},getHeader:function(n){V(n,function(){var t,e=this._keyExchangeData?this._keyExchangeData.keyResponseData:null,i=[];for(t in this._keyRequestData)i.push(this._keyRequestData[t]);if(this._nonReplayable){if(!this._masterToken)throw new M(J.NONREPLAYABLE_MESSAGE_REQUIRES_MASTERTOKEN);t=this._ctx.getMslStore().getNonReplayableId(this._masterToken)}else t=null;e=new Ve(this._messageId,t,this._renewable,this._capabilities,i,e,this._userAuthData,this._userIdToken,this._serviceTokens),i=new Ye(this._peerMasterToken,this._peerUserIdToken,this._peerServiceTokens),Ke(this._ctx,this._entityAuthData,this._masterToken,e,i,n)},this)},isNonReplayable:function(){return this._nonReplayable},setNonReplayable:function(t){return this._nonReplayable=t,this},isRenewable:function(){return this._renewable},setRenewable:function(t){return this._renewable=t,this},setAuthTokens:function(t,e){var i,n;if(e&&!e.isBoundTo(t))throw new N("User ID token must be bound to master token.");if(this._keyExchangeData&&!this._ctx.isPeerToPeer())throw new N("Attempt to set message builder master token when key exchange data exists as a trusted network server.");try{i=this._ctx.getMslStore().getServiceTokens(t,e)}catch(t){if(t instanceof P)throw new N("Invalid master token and user ID token combination despite checking above.",t);throw t}for(var r=this._serviceTokens.length-1;0<=r;--r)((n=this._serviceTokens[r]).isUserIdTokenBound()&&!n.isBoundTo(e)||n.isMasterTokenBound()&&!n.isBoundTo(t))&&this._serviceTokens.splice(r,1);i.forEach(function(t){this.excludeServiceToken(t.name,t.isMasterTokenBound(),t.isUserIdTokenBound()),this._serviceTokens.push(t)},this),this._masterToken=t,this._userIdToken=e},setUserAuthenticationData:function(t){return this._userAuthData=t,this},setCustomer:function(e,i){var n=this;V(i,function(){var t;if(!this._ctx.isPeerToPeer()&&null!=this._userIdToken||this._ctx.isPeerToPeer()&&null!=this._peerUserIdToken)throw new N("User ID token or peer user ID token already exists for the remote user.");if(!(t=this._keyExchangeData?this._keyExchangeData.keyResponseData.masterToken:this._ctx.isPeerToPeer()?this._peerMasterToken:this._masterToken))throw new N("User ID token or peer user ID token cannot be created because no corresponding master token exists.");this._ctx.getTokenFactory().createUserIdToken(this._ctx,e,t,{result:function(t){V(i,function(){return this._ctx.isPeerToPeer()?this._peerUserIdToken=t:(this._userIdToken=t,this._userAuthData=null),!0},n)},error:function(t){i.error(t)}})},n)},addKeyRequestData:function(t){return this._keyRequestData[t.uniqueKey()]=t,this},removeKeyRequestData:function(t){return delete this._keyRequestData[t.uniqueKey()],this},addServiceToken:function(t){var e=this._keyExchangeData&&!this._ctx.isPeerToPeer()?this._keyExchangeData.keyResponseData.masterToken:this._masterToken;if(t.isMasterTokenBound()&&!t.isBoundTo(e))throw new M(J.SERVICETOKEN_MASTERTOKEN_MISMATCH,"st "+JSON.stringify(t)+"; mt "+JSON.stringify(e)).setEntity(e);if(t.isUserIdTokenBound()&&!t.isBoundTo(this._userIdToken))throw new M(J.SERVICETOKEN_USERIDTOKEN_MISMATCH,"st "+JSON.stringify(t)+"; uit "+JSON.stringify(this._userIdToken)).setEntity(e).setUser(this._userIdToken);return this.excludeServiceToken(t.name,t.isMasterTokenBound(),t.isUserIdTokenBound()),this._serviceTokens.push(t),this},addServiceTokenIfAbsent:function(t){for(var e,i=this._serviceTokens.length-1;0<=i;--i)if((e=this._serviceTokens[i]).name==t.name&&e.isMasterTokenBound()==t.isMasterTokenBound()&&e.isUserIdTokenBound()==t.isUserIdTokenBound())return this;return this.addServiceToken(t),this},excludeServiceToken:function(){for(var t,e,i,n=1==arguments.length?(t=(n=arguments[0]).name,e=n.isMasterTokenBound(),n.isUserIdTokenBound()):(arguments.length=3,t=arguments[0],e=arguments[1],arguments[2]),r=this._serviceTokens.length-1;0<=r;--r)(i=this._serviceTokens[r]).name==t&&i.isMasterTokenBound()==e&&i.isUserIdTokenBound()==n&&this._serviceTokens.splice(r,1);return this},deleteServiceToken:function(){var t,i,n=2==arguments.length?(i=(t=arguments[0]).name,t.isMasterTokenBound(),t.isUserIdTokenBound(),arguments[1]):(arguments.length=4,i=arguments[0],arguments[3]),r=this;V(n,function(){var t=originalToken.isMasterTokenBound()?this._masterToken:null,e=originalToken.isUserIdTokenBound()?this._userIdToken:null;gi(this._ctx,i,Rn,t,e,!1,null,new Vt,{result:function(t){V(n,function(){return this.addServiceToken(t)},r)},error:function(t){t instanceof P&&(t=new N("Failed to create and add empty service token to message.",t)),n.error(t)}})},r)},getServiceTokens:function(){var t=[];return t.push.apply(t,this._serviceTokens),t},getPeerMasterToken:function(){return this._peerMasterToken},getPeerUserIdToken:function(){return this._peerUserIdToken},setPeerAuthTokens:function(t,e){var i,n;if(!this._ctx.isPeerToPeer())throw new N("Cannot set peer master token or peer user ID token when not in peer-to-peer mode.");if(e&&!t)throw new N("Peer master token cannot be null when setting peer user ID token.");if(e&&!e.isBoundTo(t))throw new M(J.USERIDTOKEN_MASTERTOKEN_MISMATCH,"uit "+e+"; mt "+t).setEntity(t).setUser(e);try{i=this._ctx.getMslStore().getServiceTokens(t,e)}catch(t){if(t instanceof P)throw new N("Invalid peer master token and user ID token combination despite proper check.",t);throw t}for(var r=this._peerServiceTokens.length-1;0<=r;--r)((n=this._peerServiceTokens[r]).isUserIdTokenBound()&&!n.isBoundTo(e)||n.isMasterTokenBound()&&!n.isBoundTo(t))&&this._peerServiceTokens.slice(r,1);return i.forEach(function(t){this.excludePeerServiceToken(t.name,t.isMasterTokenBound(),t.isUserIdTokenBound()),this._peerServiceTokens.push(t)},this),this._peerUserIdToken=e,this._peerMasterToken=t,this},addPeerServiceToken:function(t){if(!this._ctx.isPeerToPeer())throw new N("Cannot set peer service tokens when not in peer-to-peer mode.");if(t.isMasterTokenBound()&&!t.isBoundTo(this._peerMasterToken))throw new M(J.SERVICETOKEN_MASTERTOKEN_MISMATCH,"st "+JSON.stringify(t)+"; mt "+JSON.stringify(this._peerMasterToken)).setEntity(this._peerMasterToken);if(t.isUserIdTokenBound()&&!t.isBoundTo(this._peerUserIdToken))throw new M(J.SERVICETOKEN_USERIDTOKEN_MISMATCH,"st "+JSON.stringify(t)+"; uit "+JSON.stringify(this._peerUserIdToken)).setEntity(this._peerMasterToken).setUser(this._peerUserIdToken);return this.excludePeerServiceToken(t.name,t.isMasterTokenBound(),t.isUserIdTokenBound()),this._peerServiceTokens.push(t),this},addPeerServiceTokenIfAbsent:function(t){for(var e,i=this._peerServiceTokens.length-1;0<=i;--i)if((e=this._peerServiceTokens[i]).name==t.name&&e.isMasterTokenBound()==t.isMasterTokenBound()&&e.isUserIdTokenBound()==t.isUserIdTokenBound())return this;return this.addPeerServiceToken(t),this},excludePeerServiceToken:function(){for(var t,e,i,n=1==arguments.length?(t=(n=arguments[0]).name,e=n.isMasterTokenBound(),n.isUserIdTokenBound()):(arguments.length=3,t=arguments[0],e=arguments[1],arguments[2]),r=this._peerServiceTokens.length-1;0<=r;--r)(i=this._peerServiceTokens[r]).name==t&&i.isMasterTokenBound()==e&&i.isUserIdTokenBound()==n&&this._peerServiceTokens.splice(r,1);return this},deletePeerServiceToken:function(){var t,e,i,n,r=2==arguments.length?(e=(t=arguments[0]).name,i=t.isMasterTokenBound(),n=t.isUserIdTokenBound(),arguments[1]):(arguments.length=4,e=arguments[0],i=arguments[1],n=arguments[2],arguments[3]),a=this;V(r,function(){gi(this._ctx,e,Rn,i?this._peerMasterToken:null,n?this._peerUserIdToken:null,!1,null,new Vt,{result:function(t){V(r,function(){return this.addPeerServiceToken(t)},a)},error:function(t){t instanceof P&&(t=new N("Failed to create and add empty peer service token to message.",t)),r.error(t)}})},a)},getPeerServiceTokens:function(){var t=[];return t.push.apply(t,this._peerServiceTokens),t}}),ii=u.Class.create({init:function(t,e,i){t={ctx:{value:t},cryptoContexts:{value:e.getCryptoContexts()},builder:{value:i}},Object.defineProperties(this,t)},isPrimaryMasterTokenAvailable:function(){return!!na(this)},isPrimaryUserIdTokenAvailable:function(){return!!this.builder.getUserIdToken()},isPeerMasterTokenAvailable:function(){return!!this.builder.getPeerMasterToken()},isPeerUserIdTokenAvailable:function(){return!!this.builder.getPeerUserIdToken()},getPrimaryServiceTokens:function(){return this.builder.getServiceTokens()},getPeerServiceTokens:function(){return this.builder.getPeerServiceTokens()},addPrimaryServiceToken:function(t){try{return this.builder.addServiceToken(t),!0}catch(t){if(t instanceof M)return!1;throw t}},addPeerServiceToken:function(t){try{return this.builder.addPeerServiceToken(t),!0}catch(t){if(t instanceof M)return!1;throw t}},addUnboundPrimaryServiceToken:function(e,i,n,r,a){var o=this;V(a,function(){var t=ia(e,this.cryptoContexts);if(!t)return!1;gi(this.ctx,e,i,null,null,n,r,t,{result:function(t){V(a,function(){try{this.builder.addServiceToken(t)}catch(t){if(t instanceof M)throw new N("Service token bound to incorrect authentication tokens despite being unbound.",t);throw t}return!0},o)},error:function(t){a.error(t)}})},o)},addUnboundPeerServiceToken:function(e,i,n,r,a){var o=this;V(a,function(){var t=ia(e,this.cryptoContexts);if(!t)return!1;gi(this.ctx,e,i,null,null,n,r,t,{result:function(t){V(a,function(){try{this.builder.addPeerServiceToken(t)}catch(t){if(t instanceof M)throw new N("Service token bound to incorrect authentication tokens despite being unbound.",t);throw t}return!0},o)},error:function(t){a.error(t)}})},o)},addMasterBoundPrimaryServiceToken:function(i,n,r,a,o){var s=this;V(o,function(){var t,e=na(this);return!!e&&(!!(t=ia(i,this.cryptoContexts))&&void gi(this.ctx,i,n,e,null,r,a,t,{result:function(t){V(o,function(){try{this.builder.addServiceToken(t)}catch(t){if(t instanceof M)throw new N("Service token bound to incorrect authentication tokens despite setting correct master token.",t);throw t}return!0},s)},error:function(t){o.error(t)}}))},s)},addMasterBoundPeerServiceToken:function(i,n,r,a,o){var s=this;V(o,function(){var t,e=this.builder.getPeerMasterToken();return!!e&&(!!(t=ia(i,this.cryptoContexts))&&void gi(this.ctx,i,n,e,null,r,a,t,{result:function(t){V(o,function(){try{this.builder.addPeerServiceToken(t)}catch(t){if(t instanceof M)throw new N("Service token bound to incorrect authentication tokens despite setting correct master token.",t);throw t}return!0},s)},error:function(t){o.error(t)}}))},s)},addUserBoundPrimaryServiceToken:function(n,r,a,o,s){var u=this;V(s,function(){var t,e,i=na(this);return!!i&&(!!(t=this.builder.getUserIdToken())&&(!!(e=ia(n,this.cryptoContexts))&&void gi(this.ctx,n,r,i,t,a,o,e,{result:function(t){V(s,function(){try{this.builder.addServiceToken(t)}catch(t){if(t instanceof M)throw new N("Service token bound to incorrect authentication tokens despite setting correct master token and user ID token.",t);throw t}return!0},u)},error:function(t){s.error(t)}})))},u)},addUserBoundPeerServiceToken:function(n,r,a,o,s){var u=this;V(s,function(){var t,e,i=this.builder.getPeerMasterToken();return!!i&&(!!(t=this.builder.getPeerUserIdToken())&&(!!(e=ia(n,this.cryptoContexts))&&void gi(this.ctx,n,r,i,t,a,o,e,{result:function(t){V(s,function(){try{this.builder.addPeerServiceToken(t)}catch(t){if(t instanceof M)throw new N("Service token bound to incorrect authentication tokens despite setting correct master token and user ID token.",t);throw t}return!0},u)},error:function(t){s.error(t)}})))},u)},excludePrimaryServiceToken:function(){for(var t,e,i,n=1==arguments.length?(e=(t=arguments[0]).name,i=t.isMasterTokenBound(),t.isUserIdTokenBound()):(arguments.length=3,e=arguments[0],i=arguments[1],arguments[2]),r=this.builder.getServiceTokens(),a=0;a<r.length;++a)if((t=r[a]).name==e&&t.isMasterTokenBound()==i&&t.isUserIdTokenBound()==n)return this.builder.excludeServiceToken(e,i,n),!0;return!1},excludePeerServiceToken:function(){for(var t,e,i,n=1==arguments.length?(e=(t=arguments[0]).name,i=t.isMasterTokenBound(),t.isUserIdTokenBound()):(arguments.length=3,e=arguments[0],i=arguments[1],arguments[2]),r=this.builder.getPeerServiceTokens(),a=0;a<r.length;++a)if((t=r[a]).name==e&&t.isMasterTokenBound()==i&&t.isUserIdTokenBound()==n)return this.builder.excludePeerServiceToken(e,i,n),!0;return!1},deletePrimaryServiceToken:function(){var t,n,r,a,o;2==arguments.length?(n=(t=arguments[0]).name,r=t.isMasterTokenBound(),a=t.isUserIdTokenBound(),o=arguments[1]):4==arguments.length&&(n=arguments[0],r=arguments[1],a=arguments[2],o=arguments[3]),V(o,function(){for(var t,e=this.builder.getServiceTokens(),i=0;i<e.length;++i)if((t=e[i]).name==n&&t.isMasterTokenBound()==r&&t.isUserIdTokenBound()==a)return void this.builder.deleteServiceToken(n,r,a,{result:function(){o.result(!0)},error:function(t){o.error(t)}});return!1},this)},deletePeerServiceToken:function(){var t,n,r,a,o;2==arguments.length?(n=(t=arguments[0]).name,r=t.isMasterTokenBound(),a=t.isUserIdTokenBound(),o=arguments[1]):4==arguments.length&&(n=arguments[0],r=arguments[1],a=arguments[2],o=arguments[3]),V(o,function(){for(var t,e=this.builder.getPeerServiceTokens(),i=0;i<e.length;++i)if((t=e[i]).name==n&&t.isMasterTokenBound()==r&&t.isUserIdTokenBound()==a)return void this.builder.deletePeerServiceToken(n,r,a,{result:function(){o.result(!0)},error:function(t){o.error(t)}});return!1},this)}}),ni=i.extend({init:function(a,e,i,o,s,h,t){var f=this;Y(t,function(){var t;function u(){f._ready=!0,f._readyQueue.add(!0)}function n(a,o){var s;try{s=o.masterToken,a.getTokenFactory().isMasterTokenRevoked(a,s,{result:function(t){if(t)f._errored=new dt(t,s).setUser(o.userIdToken).setUser(o.userAuthenticationData).setMessageId(o.messageId),u();else{var e,i,n=a,r=o;try{e=r.masterToken,(i=r.userIdToken)?n.getTokenFactory().isUserIdTokenRevoked(n,e,i,{result:function(t){t?(f._errored=new MslUserIdTokenException(t,i).setEntity(e).setUser(i).setMessageId(r.messageId),u()):c(n,r)},error:function(t){t instanceof P&&(t.setEntity(r.masterToken),t.setUser(r.userIdToken),t.setUser(r.userAuthenticationData),t.setMessageId(r.messageId)),f._errored=t,u()}}):c(n,r)}catch(t){t instanceof P&&(t.setEntity(r.masterToken),t.setUser(r.userIdToken),t.setUser(r.userAuthenticationData),t.setMessageId(r.messageId)),f._errored=t,u()}}},error:function(t){t instanceof P&&(t.setEntity(o.masterToken),t.setUser(o.userIdToken),t.setUser(o.userAuthenticationData),t.setMessageId(o.messageId)),f._errored=t,u()}})}catch(t){t instanceof P&&(t.setEntity(o.masterToken),t.setUser(o.userIdToken),t.setUser(o.userAuthenticationData),t.setMessageId(o.messageId)),f._errored=t,u()}}function c(e,i){var n;try{(n=i.masterToken).isExpired()?i.isRenewable()&&0!=i.keyRequestData.length?e.getTokenFactory().isMasterTokenRenewable(e,n,{result:function(t){t?(f._errored=new M(t,"Master token is expired and not renewable.").setEntity(n).setUser(i.userIdToken).setUser(i.userAuthenticationData).setMessageId(i.messageId),u()):r(e,i)},error:function(t){t instanceof P&&(t.setEntity(i.masterToken),t.setUser(i.userIdToken),t.setUser(i.userAuthenticationData),t.setMessageId(i.messageId)),f._errored=t,u()}}):(f._errored=new M(J.MESSAGE_EXPIRED,JSON.stringify(i)).setEntity(n).setUser(i.userIdToken).setUser(i.userAuthenticationData).setMessageId(i.messageId),u()):r(e,i)}catch(t){t instanceof P&&(t.setEntity(i.masterToken),t.setUser(i.userIdToken),t.setUser(i.userAuthenticationData),t.setMessageId(i.messageId)),f._errored=t,u()}}function r(t,e){var i,n;try{i=e.masterToken,"number"==typeof(n=e.nonReplayableId)?i?t.getTokenFactory().acceptNonReplayableId(t,i,n,{result:function(t){t||(f._errored=new M(J.MESSAGE_REPLAYED,JSON.stringify(e)).setEntity(i).setUser(e.userIdToken).setUser(e.userAuthenticationData).setMessageId(e.messageId)),u()},error:function(t){t instanceof P&&(t.setEntity(i),t.setUser(e.userIdToken),t.setUser(e.userAuthenticationData),t.setMessageId(e.messageId)),f._errored=t,u()}}):(f._errored=new M(J.INCOMPLETE_NONREPLAYABLE_MESSAGE,JSON.stringify(e)).setEntity(e.entityAuthenticationData).setUser(e.userIdToken).setUser(e.userAuthenticationData).setMessageId(e.messageId),u()):u()}catch(t){t instanceof P&&(t.setEntity(e.masterToken),t.setEntity(e.entityAuthenticationData),t.setUser(e.userIdToken),t.setUser(e.userAuthenticationData),t.setMessageId(e.messageId)),f._errored=t,u()}}return t={_source:{value:e},_parser:{value:I,writable:!0},_charset:{value:i},_remainingData:{value:"",writable:!0},_timeout:{value:h},_header:{value:I,writable:!0},_cryptoContext:{value:I,writable:!0},_keyxCryptoContext:{value:I,writable:!0},_payloadSequenceNumber:{value:1,writable:!0,enuemrable:!1},_eom:{value:!1,writable:!0},_closeSource:{value:!1,writable:!0},_payloads:{value:[],writable:!0},_payloadIndex:{value:-1,writable:!0},_payloadOffset:{value:0,writable:!0,enuemrable:!1},_markOffset:{value:0,writable:!0},_currentPayload:{value:null,writable:!0},_readException:{value:null,writable:!0},_ready:{value:!1,writable:!0},_readyQueue:{value:new ut},_aborted:{value:!1,writable:!0},_timedout:{value:!1,writable:!0},_errored:{value:null,writable:!0}},Object.defineProperties(this,t),me(f._source,h,{result:function(t){f._json=t,f._jsonIndex=0,null===f._json?(f._errored=new j(J.MESSAGE_DATA_MISSING),u()):je(a,f._json[f._jsonIndex++],s,{result:function(t){var i;f._header=t,f._header instanceof De?(f._keyxCryptoContext=null,f._cryptoContext=null,u()):(i=f._header,ra(a,i,o,{result:function(t){var e;try{f._keyxCryptoContext=t,a.isPeerToPeer()||!f._keyxCryptoContext?f._cryptoContext=i.cryptoContext:f._cryptoContext=f._keyxCryptoContext;try{((e=i.masterToken)&&(a.isPeerToPeer()||e.isVerified())?n:r)(a,i)}catch(t){t instanceof P&&(t.setEntity(i.masterToken),t.setUser(i.userIdToken),t.setUser(i.userAuthenticationData),t.setMessageId(i.messageId)),f._errored=t,u()}}catch(t){t instanceof P&&(t.setEntity(i.masterToken),t.setEntity(i.entityAuthenticationData),t.setUser(i.userIdToken),t.setUser(i.userAuthenticationData),t.setMessageId(i.messageId)),f._errored=t,u()}},error:function(t){t instanceof P&&(t.setEntity(i.masterToken),t.setEntity(i.entityAuthenticationData),t.setUser(i.userIdToken),t.setUser(i.userAuthenticationData),t.setMessageId(i.messageId)),f._errored=t,u()}}))},error:function(t){f._errored=t,u()}})},timeout:function(){f._timedout=!0,u()},error:function(t){f._errored=t,u()}}),this},f)},nextData:function(t,e){var n=this;Y(e,function(){var a;if(a=this.getMessageHeader())return-1!=this._payloadIndex&&this._payloadIndex<this._payloads.length?this._payloads[this._payloadIndex++]:this._eom?null:void function e(i){Y(i,function(){if(this._jsonIndex<this._json.length)return this._json[this._jsonIndex++];me(this._source,this._timeout,{result:function(t){t&&t.length&&0<t.length?(t.forEach(function(t){this._json.push(t)}),e(i)):(this._eom=!0,i.result(null))},timeout:function(){i.timeout()},error:function(t){i.error(t)}})},n)}({result:function(t){Y(e,function(){if(!t)return null;if("object"!=typeof t)throw new j(J.MESSAGE_FORMAT_ERROR);We(t,this._cryptoContext,{result:function(r){Y(e,function(){var t=a.masterToken,e=a.entityAuthenticationData,i=a.userIdToken,n=a.getUserAuthenticationData;if(r.messageId!=a.messageId)throw new M(J.PAYLOAD_MESSAGE_ID_MISMATCH,"payload mid "+r.messageId+" header mid "+a.messageId).setEntity(t).setEntity(e).setUser(i).setUser(n);if(r.sequenceNumber!=this._payloadSequenceNumber)throw new M(J.PAYLOAD_SEQUENCE_NUMBER_MISMATCH,"payload seqno "+r.sequenceNumber+" expected seqno "+this._payloadSequenceNumber).setEntity(t).setEntity(e).setUser(i).setUser(n);return++this._payloadSequenceNumber,r.isEndOfMessage()&&(this._eom=!0),t=r.data,this._payloads.push(t),this._payloadIndex=-1,t},n)},error:function(t){t instanceof SyntaxError&&(t=new j(J.JSON_PARSE_ERROR,"payloadchunk",t)),e.error(t)}})},n)},timeout:function(){e.timeout()},error:function(t){e.error(t)}});throw new N("Read attempted with error message.")},n)},isReady:function(t,e){var i;function n(){Y(e,function(){if(this._aborted)return!1;if(!this._timedout){if(this._errored)throw this._errored;return!0}e.timeout()},i)}Y(e,function(){this._ready?n():this._readyQueue.poll(t,{result:function(t){Y(e,function(){if(t===I)return!1;n()},i)},timeout:function(){e.timeout()},error:function(t){e.error(t)}})},i=this)},getMessageHeader:function(){return this._header instanceof He?this._header:null},getErrorHeader:function(){return this._header instanceof De?this._header:null},getIdentity:function(){var t,e=this.getMessageHeader();return e?(t=e.masterToken)?t.identity:e.entityAuthenticationData.getIdentity():this.getErrorHeader().entityAuthenticationData.getIdentity()},getCustomer:function(){var t=this.getMessageHeader();return t?t.customer:null},getPayloadCryptoContext:function(){return this._cryptoContext},getKeyExchangeCryptoContext:function(){return this._keyxCryptoContext},closeSource:function(t){this._closeSource=t},abort:function(){this._aborted=!0,this._source.abort(),this._readyQueue.cancelAll()},close:function(){this._closeSource&&this._source.close()},mark:function(){if(this._currentPayload){for(;0<this._payloads.length&&this._payloads[0]!==this._currentPayload;)this._payloads.shift();this._payloadIndex=0,this._currentPayload=this._payloads[this._payloadIndex++],this._markOffset=this._payloadOffset}else this._payloadIndex=-1,this._payloads=[]},markSupported:function(){return!0},read:function(c,h,e){var f;function i(){Y(e,function(){var t,o,s,u;if(this._aborted)return new Uint8Array(0);if(this._timedout)e.timeout(new Uint8Array(0));else{if(this._errored)throw this._errored;if(null!=this._readException)throw t=this._readException,this._readException=null,t;o=-1!=c?new Uint8Array(c):I,u=s=0,!function r(a){Y(a,function(){var t,e,i;if(o&&u>=o.length)return o.subarray(0,u);if(t=-1,this._currentPayload){if(e=this._currentPayload.length-this._payloadOffset,!o){if(i=e,-1!=this._payloadIndex)for(var n=this._payloadIndex;n<this._payloads.length;++n)i+=this._payloads[n].length;0<i&&(o=new Uint8Array(i))}0<(e=Math.min(e,o?o.length-u:0))&&(t=this._currentPayload.subarray(this._payloadOffset,this._payloadOffset+e),o.set(t,s),s+=t=e,this._payloadOffset+=e)}-1!=t?(u+=t,r(a)):this.nextData(h,{result:function(t){Y(a,function(){return this._aborted?o?o.subarray(0,u):new Uint8Array(0):(this._currentPayload=t,this._payloadOffset=0,this._currentPayload?void r(a):0==u&&0!=c?null:o?o.subarray(0,u):new Uint8Array(0))},f)},timeout:function(){a.timeout(o?o.subarray(0,u):new Uint8Array(0))},error:function(t){Y(a,function(){if(t instanceof P&&(t=new b("Error reading the payload chunk.",t)),0<u)return f._readException=t,o.subarray(0,u);throw t},f)}})},f)}(e)}},f)}Y(e,function(){if(c<-1)throw new RangeError("read requested with illegal length "+c);this._ready?i():this._readyQueue.poll(h,{result:function(t){t===I?e.result(!1):i()},timeout:function(){e.timeout(new Uint8Array(0))},error:function(t){e.error(t)}})},f=this)},reset(){(this._payloadIndex=0)<this._payloads.length?(this._currentPayload=this._payloads[this._payloadIndex++],this._payloadOffset=this._markOffset):this._currentPayload=null}}),ri=function(t,e,i,n,r,a,o){new ni(t,e,i,n,r,a,o)},ai=Nn.extend({init:function(r,a,o,s,u,c,t){var h=this;Y(t,function(){var t,e,i;function n(){h._ready=!0,h._readyQueue.add(!0)}return e=null,(t=qe(r.getMessageCapabilities(),s.messageCapabilities))&&(e=rt(t.compressionAlgorithms)),t={_destination:{value:a},_charset:{value:o},_capabilities:{value:t},_header:{value:s},_compressionAlgo:{value:e,writable:!0},_cryptoContext:{value:u},_payloadSequenceNumber:{value:1,writable:!0},_currentPayload:{value:[],writable:!0},_closed:{value:!1,writable:!0},_payloads:{value:[]},_ready:{value:!1,writable:!0},_readyQueue:{value:new ut},_aborted:{value:!1,writable:!0},_timedout:{value:!1,writable:!0},_errored:{value:null,writable:!0}},Object.defineProperties(this,t),i=G(JSON.stringify(s),o),a.write(i,0,i.length,c,{result:function(t){try{h._aborted?n():t<i.length?(h._timedout=!0,n()):a.flush(c,{result:function(t){h._aborted||(h._timedout=!t),n()},timeout:function(){h._timedout=!0,n()},error:function(t){h._errored=t,n()}})}catch(t){h._errored=t,n()}},timeout:function(){h._timedout=!0,n()},error:function(t){h._errored=t,n()}}),this},h)},setCompressionAlgorithm:function(i,t,e){var n;function r(){n.flush(t,{result:function(t){Y(e,function(){if(t)return this._compressionAlgo=i,!0;throw new b("flush() aborted")},n)},timeout:function(){e.timeout()},error:function(t){e.error(t)}})}Y(e,function(){if(!this.getMessageHeader())throw new N("Cannot write payload data for an error message.");if(this._compressionAlgo==i)return!0;if(i){if(!this._capabilities)return!1;for(var t=this._capabilities.compressionAlgorithms,e=0;e<t.length;++e)if(t[e]==i)return void r();return!1}r()},n=this)},getMessageHeader:function(){return this._header instanceof He?this._header:null},getErrorMessage:function(){return this._header instanceof De?this._header:null},getPayloads:function(){return this._payloads},abort:function(){this._aborted=!0,this._destination.abort(),this._readyQueue.cancelAll()},close:function(t,e){var i=this;Y(e,function(){if(this._aborted)return!1;if(this._timedout)e.timeout();else{if(this._errored)throw this._errored;if(this._closed)return!0;this._closed=!0,this.flush(t,{result:function(t){Y(e,function(){return t&&(this._currentPayload=null),t},i)},timeout:function(){e.timeout()},error:function(t){e.error(t)}})}},i)},flush:function(o,s){var u;function e(){Y(s,function(){var t,e,i;if(this._aborted)return!1;if(this._timedout)s.timeout();else{if(this._errored)throw this._errored;if(!this._currentPayload||!this._closed&&0==this._currentPayload.length)return!0;if(!(t=this.getMessageHeader()))return!0;e=0,this._currentPayload&&this._currentPayload.forEach(function(t){e+=t.length});for(var n=new Uint8Array(e),r=0,a=0;this._currentPayload&&a<this._currentPayload.length;++a)i=this._currentPayload[a],n.set(i,r),r+=i.length;ze(this._payloadSequenceNumber,t.messageId,this._closed,this._compressionAlgo,n,this._cryptoContext,{result:function(e){Y(s,function(){var t;this._payloads.push(e),t=G(JSON.stringify(e),this._charset),this._destination.write(t,0,t.length,o,{result:function(t){Y(s,function(){if(this._aborted)return!1;t<e.length?s.timeout():this._destination.flush(o,{result:function(t){Y(s,function(){return!this._aborted&&(t?(++this._payloadSequenceNumber,this._currentPayload=this._closed?null:[],!0):void s.timeout())},u)},timeout:function(){s.timeout()},error:function(t){t instanceof P&&(t=new b("Error encoding payload chunk [sequence number "+u._payloadSequenceNumber+"].",t)),s.error(t)}})},u)},timeout:function(t){s.timeout()},error:function(t){t instanceof P&&(t=new b("Error encoding payload chunk [sequence number "+u._payloadSequenceNumber+"].",t)),s.error(t)}})},u)},error:function(t){t instanceof P&&(t=new b("Error encoding payload chunk [sequence number "+u._payloadSequenceNumber+"].",t)),s.error(t)}})}},u)}Y(s,function(){this._ready?e():this._readyQueue.poll(o,{result:function(t){t===I?s.result(!1):e()},timeout:function(){s.timeout()},error:function(t){s.error(t)}})},u=this)},write:function(e,i,n,t,r){Y(r,function(){var t;if(this._aborted)return!1;if(!this._timedout){if(this._errored)throw this._errored;if(this._closed)throw new b("Message output stream already closed.");if(i<0)throw new RangeError("Offset cannot be negative.");if(n<0)throw new RangeError("Length cannot be negative.");if(i+n>e.length)throw new RangeError("Offset plus length cannot be greater than the array length.");if(this.getMessageHeader())return t=e.subarray(i,i+n),this._currentPayload.push(t),t.length;throw new N("Cannot write payload data for an error message.")}r.timeout()},this)}}),oi=function(t,e,i,n,r,a,o){new ai(t,e,i,n,r,a,o)},i=u.Class.create({sentHeader:function(t){},receivedHeader:function(t){}}),Object.freeze({USERDATA_REAUTH:y.USERDATA_REAUTH,SSOTOKEN_REJECTED:y.SSOTOKEN_REJECTED}),si=u.Class.create({getCryptoContexts:function(){},getRecipient:function(){},isEncrypted:function(){},isIntegrityProtected:function(){},isNonReplayable:function(){},isRequestingTokens:function(){},getUserId:function(){},getUserAuthData:function(t,e,i,n){},getCustomer:function(){},getKeyRequestData:function(t){},updateServiceTokens:function(t,e,i){},write:function(t,e,i){},getDebugContext:function(){}}),u.Class.create({getInputStream:function(t){},getOutputStream:function(t){}}),Cn=Nn.extend({close:function(t,e){e.result(!0)},write:function(t,e,i,n,r){V(r,function(){return Math.min(t.length-e,i)})},flush:function(t,e){e.result(!0)}}),jn=xi.extend({getUserMessage:function(t,e){return null}}),Nn=si.extend({init:function(t){Object.defineProperties(this,{_appCtx:{value:t}})},getCryptoContexts:function(){return this._appCtx.getCryptoContexts()},isEncrypted:function(){return this._appCtx.isEncrypted()},isIntegrityProtected:function(){return this._appCtx.isIntegrityProtected()},isNonReplayable:function(){return this._appCtx.isNonReplayable()},isRequestingTokens:function(){return this._appCtx.isRequestingTokens()},getUserId:function(){return this._appCtx.getUserId()},getUserAuthData:function(t,e,i,n){this._appCtx.getUserAuthData(t,e,i,n)},getCustomer:function(){return this._appCtx.getCustomer()},getKeyRequestData:function(t){this._appCtx.getKeyRequestData(t)},updateServiceTokens:function(t,e,i){this._appCtx.updateServiceTokens(t,e,i)},write:function(t,e,i){this._appCtx.write(t,e,i)},getDebugContext:function(){return this._appCtx.getDebugContext()}}),Mn=Nn.extend({init:function t(e,i){t.base.call(this,i),Object.defineProperties(this,{_payloads:{value:e}})},write:function(a,o,s){var u;u=this,function e(i,n){var r;i==u._payloads.length?s.result(!0):(r=u._payloads[i],a.setCompressionAlgorithm(r.compressionAlgo,o,{result:function(t){a.write(r.data,0,r.data.length,o,{result:function(t){Y(s,function(){r.isEndOfMessage()?e(i+1,n):a.flush(o,{result:function(t){s.result(t)},timeout:function(){s.timeout()},error:function(t){s.error(t)}})},u)},timeout:function(t){s.timeout(t)},error:function(t){s.error(t)}})},timeout:function(){},error:function(t){s.error(t)}}))}(0)}}),Dn=Nn.extend({init:function t(e){t.base.call(this,e)},isEncrypted:function(){return!1},isNonReplayable:function(){return!1},write:function(t,e,i){i.result(!0)}}),Ln={},Bn=u.Class.create({init:function(t){t=t||new jn,Object.defineProperties(this,{_filterFactory:{value:null,writable:!0},_renewingContexts:{value:[]},_masterTokenLocks:{value:{}},_messageRegistry:{value:t}})},setFilterFactory:function(t){this._filterFactory=t},getNewestMasterToken:function(o,s,u,c){var h=this;Y(c,function(){var i,n,t,r=s.getMslStore(),a=r.getMasterToken();if(!a)return null;i=a.uniqueKey(),(n=this._masterTokenLocks[i])||(n=new ht,this._masterTokenLocks[i]=n),t=n.readLock(u,{result:function(e){Y(c,function(){var t;if(e===I)throw new _("getNewestMasterToken aborted.");if(t=r.getMasterToken(),a.equals(t))return new oa(a,e);n.unlock(e),n.writeLock(u,{result:function(t){Y(c,function(){if(t===I)throw new _("getNewestMasterToken aborted.");return delete this._masterTokenLocks[i],n.unlock(t),this.getNewestMasterToken(o,s,u,c)},h)},timeout:function(){c.timeout()},error:function(t){c.error(t)}})},h)},timeout:function(){c.timeout()},error:function(t){c.error(t)}}),o.setAbort(function(){t&&(n.cancel(t),t=I)})},h)},deleteMasterToken:function(n,r){var a;r&&(a=this,setTimeout(function(){var e=r.uniqueKey(),i=a._masterTokenLocks[e];i||(i=new ht,a._masterTokenLocks[e]=i),i.writeLock(-1,{result:function(t){n.getMslStore().removeCryptoContext(r),delete a._masterTokenLocks[e],i.unlock(t)},timeout:function(){throw new N("Unexpected timeout received.")},error:function(t){throw t}})},0))},releaseMasterToken:function(t){var e;if(t&&t.masterToken){if(e=t.masterToken.uniqueKey(),!(e=this._masterTokenLocks[e]))throw new N("Master token read/write lock does not exist when it should.");e.unlock(t.ticket)}},updateOutgoingCryptoContexts:function(t,e,i){var n=t.getMslStore();!t.isPeerToPeer()&&i&&(n.setCryptoContext(i.keyResponseData.masterToken,i.cryptoContext),this.deleteMasterToken(t,e.masterToken))},updateIncomingCryptoContexts:function(t,e,i){var n,r=i.getMessageHeader();r&&(n=t.getMslStore(),(r=r.keyResponseData)&&(n.setCryptoContext(r.masterToken,i.getKeyExchangeCryptoContext()),this.deleteMasterToken(t,e.masterToken)))},storeServiceTokens:function(t,e,i,n){var r,a;t=t.getMslStore();for(var o=[],s=0;s<n.length;++s)(r=n[s]).isBoundTo(e)&&e.isVerified()||((a=r.data)&&0==a.length?t.removeServiceTokens(r.name,r.isMasterTokenBound()?e:null,r.isUserIdTokenBound()?i:null):o.push(r));0<o.length&&t.addServiceTokens(o)},buildRequest:function(t,r,a,e,o){var s=this;this.getNewestMasterToken(t,r,e,{result:function(n){V(o,function(){var t,e=n&&n.masterToken,i=e?(i=a.getUserId(),t=r.getMslStore(),(i=i?t.getUserIdToken(i):null)&&i.isBoundTo(e)?i:null):null;$e(r,e,i,null,{result:function(t){V(o,function(){return t.setNonReplayable(a.isNonReplayable()),{builder:t,tokenTicket:n}})},error:function(t){V(o,function(){throw this.releaseMasterToken(n),t=t instanceof P?new N("User ID token not bound to master token despite internal check.",t):t},s)}})},s)},timeout:function(){o.timeout()},error:function(t){o.error(t)}})},buildResponse:function(t,a,o,e,i,s){var u=this;ti(a,e,{result:function(r){Y(s,function(){if(r.setNonReplayable(o.isNonReplayable()),!a.isPeerToPeer()&&!e.keyResponseData)return{builder:r,tokenTicket:null};this.getNewestMasterToken(t,a,i,{result:function(n){Y(s,function(){var t,e=n&&n.masterToken,i=e?(i=o.getUserId(),t=a.getMslStore(),(i=i?t.getUserIdToken(i):null)&&i.isBoundTo(e)?i:null):null;return r.setAuthTokens(e,i),{builder:r,tokenTicket:n}},u)},timeout:function(){s.timeout()},error:function(t){s.error(t)}})},u)},error:function(t){s.error(t)}})},buildErrorResponse:function(i,s,u,n,c,h,f){var l;function r(r,a){l.getNewestMasterToken(i,s,h,{result:function(n){Y(f,function(){var t=n&&n.masterToken,e=Xe(c.messageId),i=new Mn(a,u);$e(s,t,null,e,{result:function(t){Y(f,function(){return s.isPeerToPeer()&&t.setPeerAuthTokens(r.peerMasterToken,r.peerUserIdToken),t.setNonReplayable(i.isNonReplayable()),{errorResult:new sa(t,i),tokenTicket:n}},l)},error:function(t){f.error(t)}})},l)},timeout:function(){f.timeout()},error:function(t){f.error(t)}})}Y(f,function(){var e,a=n.requestHeader,o=n.payloads,t=c.errorCode;switch(t){case y.ENTITYDATA_REAUTH:case y.ENTITY_REAUTH:s.getEntityAuthenticationData(t,{result:function(t){Y(f,function(){if(!t)return null;var i,n;i=a,n=o,Y(f,function(){var t=Xe(c.messageId),e=new Mn(n,u);$e(s,null,null,t,{result:function(t){Y(f,function(){return s.isPeerToPeer()&&t.setPeerAuthTokens(i.peerMasterToken,i.peerUserIdToken),t.setNonReplayable(e.isNonReplayable()),{errorResult:new sa(t,e),tokenTicket:null}},l)},error:function(t){f.error(t)}})},l)},l)},error:function(t){f.error(t)}});break;case y.USERDATA_REAUTH:case y.SSOTOKEN_REJECTED:u.getUserAuthData(t,!1,!0,{result:function(t){Y(f,function(){if(!t)return null;r(a,o)},l)},error:function(t){f.error(t)}});break;case y.USER_REAUTH:r(a,o);break;case y.KEYX_REQUIRED:t=Xe(c.messageId),e=new Mn(o,u),$e(s,null,null,t,{result:function(t){Y(f,function(){return s.isPeerToPeer()&&t.setPeerAuthTokens(a.peerMasterToken,a.peerUserIdToken),t.setRenewable(!0),t.setNonReplayable(e.isNonReplayable()),{errorResult:new sa(t,e),tokenTicket:null}},l)},error:function(t){f.error(t)}});break;case y.EXPIRED:this.getNewestMasterToken(i,s,h,{result:function(r){Y(f,function(){var e=r&&r.masterToken,t=a.userIdToken,i=Xe(c.messageId),n=new Mn(o,u);$e(s,e,t,i,{result:function(t){Y(f,function(){return s.isPeerToPeer()&&t.setPeerAuthTokens(a.peerMasterToken,a.peerUserIdToken),a.masterToken.equals(e)&&t.setRenewable(!0),t.setNonReplayable(n.isNonReplayable()),{errorResult:new sa(t,n),tokenTicket:r}},l)},error:function(t){f.error(t)}})},l)},timeout:function(){f.timeout()},error:function(t){f.error(t)}});break;case y.REPLAYED:this.getNewestMasterToken(i,s,h,{result:function(r){Y(f,function(){var e=r&&r.masterToken,t=a.userIdToken,i=Xe(c.messageId),n=new Mn(o,u);$e(s,e,t,i,{result:function(t){Y(f,function(){return s.isPeerToPeer()&&t.setPeerAuthTokens(a.peerMasterToken,a.peerUserIdToken),a.masterToken.equals(e)?(t.setRenewable(!0),t.setNonReplayable(!1)):t.setNonReplayable(n.isNonReplayable()),{errorResult:new sa(t,n),tokenTicket:r}},l)},error:function(t){f.error(t)}})},l)},timeout:function(){f.timeout()},error:function(t){f.error(t)}});break;default:return null}},l=this)},cleanupContext:function(t,e,i){switch(i.errorCode){case y.ENTITY_REAUTH:this.deleteMasterToken(t,e.masterToken);break;case y.USER_REAUTH:i=e.userIdToken,e.masterToken&&i&&t.getMslStore().removeUserIdToken(i)}},send:function(u,c,h,r,f,l,d){var p;function a(e,i,n){Y(d,function(){var t=f.getPeerUserIdToken();(!c.isPeerToPeer()&&!i||c.isPeerToPeer()&&!t)&&(t=h.getCustomer())?f.setCustomer(t,{result:function(t){Y(d,function(){i=f.getUserIdToken(),o(e,i,n)},p)},error:function(t){d.error(t)}}):o(e,i,n)},p)}function o(a,o,t){Y(d,function(){var n,r=!t&&(!h.isEncrypted()||f.willEncryptPayloads())&&(!h.isIntegrityProtected()||f.willIntegrityProtectPayloads())&&(!h.isNonReplayable()||f.isNonReplayable()&&a);r||f.setNonReplayable(!1),n=[],f.isRenewable()&&(!a||a.isRenewable()||h.isNonReplayable())?h.getKeyRequestData({result:function(i){Y(d,function(){for(var t,e=0;e<i.length;++e)t=i[e],n.push(t),f.addKeyRequestData(t);s(a,o,r)},p)},error:function(t){d.error(t)}}):s(a,o,r)},p)}function s(i,n,s){Y(d,function(){var t=new ii(c,h,f);h.updateServiceTokens(t,!s,{result:function(t){f.getHeader({result:function(o){Y(d,function(){var t,e=h.getDebugContext();if(e&&e.sentHeader(o),e=f.getKeyExchangeData(),this.updateOutgoingCryptoContexts(c,o,e),this.storeServiceTokens(c,i,n,o.serviceTokens),e=(!c.isPeerToPeer()&&e?e:o).cryptoContext,u.isAborted())throw new _("send aborted.");t=null!=this._filterFactory?this._filterFactory.getOutputStream(r):r,oi(c,t,x,o,e,l,{result:function(t){var n,r,a,e,i;u.setAbort(function(){t.abort()}),n=t,r=o,(a=s)?h.write(n,l,{result:function(t){Y(d,function(){if(u.isAborted())throw new _("MessageOutputStream write aborted.");b(n,r,a)},p)},timeout:function(){d.timeout()},error:function(t){d.error(t)}}):(e=new Cn,i=new Vt,oi(c,e,x,r,i,l,{result:function(i){h.write(i,l,{result:function(t){Y(d,function(){if(u.isAborted())throw new _("MessageOutputStream proxy write aborted.");i.close(l,{result:function(e){Y(d,function(){var t;if(!e)throw new _("MessageOutputStream proxy close aborted.");t=i.getPayloads(),b(n,r,a,t)},p)},timeout:function(){d.timeout()},error:function(t){d.error(t)}})},p)},timeout:function(){d.timeout()},error:function(t){d.error(t)}})},timeout:function(){d.timeout()},error:function(t){d.error(t)}}))},timeout:function(){d.timeout()},error:function(t){d.error(t)}})},p)},timeout:function(){d.timeout()},error:function(t){d.error(t)}})},error:function(t){d.error(t)}})},p)}function b(e,i,n,r){e.close(l,{result:function(t){Y(d,function(){if(t)return r=r||e.getPayloads(),new ua(i,r,!n);throw new _("MessageOutputStream close aborted.")},p)},timeout:function(){d.timeout()},error:function(t){d.error(t)}})}Y(d,function(){var t,e=f.getMasterToken(),i=f.getUserIdToken(),n=!1;h.getUserId()?(t=!i,h.getUserAuthData(null,f.isRenewable(),t,{result:function(t){Y(d,function(){t&&(f.willEncryptHeader()&&f.willIntegrityProtectHeader()?f.setUserAuthenticationData(t):n=!0),a(e,i,n)},p)},error:function(t){d.error(t)}})):a(e,i,n)},p=this)},receive:function(n,u,c,r,h,a,f){var l=this;Y(f,function(){var t,e,i;if(n.isAborted())throw new _("receive aborted.");t=[],h&&(t=h.keyRequestData.filter(function(){return!0})),e=c.getCryptoContexts(),i=this._filterFactory?this._filterFactory.getInputStream(r):r,ri(u,i,x,t,e,a,{result:function(s){n.setAbort(function(){s.abort()}),s.isReady(a,{result:function(i){Y(f,function(){var a,o,t,e;if(!i)throw new _("MessageInputStream aborted.");if(a=s.getMessageHeader(),o=s.getErrorHeader(),(t=c.getDebugContext())&&t.receivedHeader(a||o),h&&(t=o?o.errorCode:null,a||t!=y.FAIL&&t!=y.TRANSIENT_FAILURE&&t!=y.ENTITY_REAUTH&&t!=y.ENTITYDATA_REAUTH)&&(t=(a||o).messageId)!=(e=Xe(h.messageId)))throw new M(J.UNEXPECTED_RESPONSE_MESSAGE_ID,"expected "+e+"; received "+t);u.getEntityAuthenticationData(null,{result:function(r){Y(f,function(){var t,e,i,n=r.getIdentity();if(a){if(t=a.entityAuthenticationData,t=(e=a.masterToken)?a.sender:t.getIdentity(),e&&e.isDecrypted()&&e.identity!=t||n==t)throw new M(J.UNEXPECTED_MESSAGE_SENDER,t);h&&this.updateIncomingCryptoContexts(u,h,s),n=a.keyResponseData,t=u.isPeerToPeer()?(n=n?n.masterToken:a.peerMasterToken,e=a.peerUserIdToken,a.peerServiceTokens):(n=(n||a).masterToken,e=a.userIdToken,a.serviceTokens),(i=c.getUserId())&&e&&!e.isVerified()&&u.getMslStore().addUserIdToken(i,e),this.storeServiceTokens(u,n,e,t)}else if(n==(t=o.entityAuthenticationData.getIdentity()))throw new M(J.UNEXPECTED_MESSAGE_SENDER,t);return s},l)},error:f.error})},l)},timeout:function(){f.timeout()},error:function(t){f.error(t)}})},timeout:function(){f.timeout()},error:function(t){f.error(t)}})},l)},sendReceive:function(r,a,o,s,u,c,h,f,l){var d;Y(l,function(){var e=new ut;this.acquireRenewalLock(r,a,o,e,c,h,{result:function(t){var i,n;i=e,n=t,Y(l,function(){c.setRenewable(n),this.send(r,a,o,u,c,h,{result:function(e){Y(l,function(){var t=e.requestHeader.keyRequestData;f||e.handshake||!t.isEmpty()?this.receive(r,a,o,s,e.requestHeader,h,{result:function(t){Y(l,function(){return n&&this.releaseRenewalLock(a,i,t),new ca(t,e)},d)},timeout:function(){Y(l,function(){n&&this.releaseRenewalLock(a,i,null),l.timeout()},d)},error:function(t){Y(l,function(){throw n&&this.releaseRenewalLock(a,i,null),t},d)}}):Y(l,function(){return n&&this.releaseRenewalLock(a,i,null),new ca(null,e)},d)},d)},timeout:function(){Y(l,function(){n&&this.releaseRenewalLock(a,i,null),l.timeout()},d)},error:function(t){Y(l,function(){throw n&&this.releaseRenewalLock(a,i,null),t},d)}})},d)},timeout:function(){l.timeout()},error:function(t){t instanceof _?l.result(null):l.error(t)}})},d=this)},acquireRenewalLock:function(u,c,h,f,l,d,p){var b;function g(n,r){Y(p,function(){var t;if(u.isAborted())throw new _("acquireRenewalLock aborted.");if(!n||n.isRenewable()||!r&&h.getUserId()||r&&r.isRenewable()){for(var e=null,i=0;i<this._renewingContexts.length;++i)if((t=this._renewingContexts[i]).ctx===c){e=t.queue;break}if(!e)return this._renewingContexts.push({ctx:c,queue:f}),!0}return!1},b)}Y(p,function(){var t=l.getMasterToken(),e=l.getUserIdToken(),i=h.getUserId();h.isEncrypted()&&!l.willEncryptPayloads()||h.isIntegrityProtected()&&!l.willIntegrityProtectPayloads()||l.isRenewable()||!t&&h.isNonReplayable()||t&&t.isExpired()||!(e||!i||l.willEncryptHeader()&&l.willIntegrityProtectHeader())||h.isRequestingTokens()&&(!t||i&&!e)?function r(a,o,s){Y(p,function(){var t,e;if(u.isAborted())throw new _("acquireRenewalLock aborted.");for(var i=null,n=0;n<this._renewingContexts.length;++n)if((t=this._renewingContexts[n]).ctx===c){i=t.queue;break}if(!i)return this._renewingContexts.push({ctx:c,queue:f}),!0;e=i.poll(d,{result:function(e){Y(p,function(){var t;if(e===I)throw new _("acquireRenewalLock aborted.");i.add(e),e===Ln||e.isExpired()?r(e,o,s):((s&&!o||o&&!o.isBoundTo(e))&&(t=c.getMslStore().getUserIdToken(s),o=t&&t.isBoundTo(e)?t:null),l.setAuthTokens(e,o),l.isRenewable()&&e.equals(a)||h.isRequestingTokens()&&!o?r(e,o,s):g(e,o))},b)},timeout:function(){},error:function(t){}}),u.setAbort(function(){e&&(i.cancel(e),e=I)})},b)}(t,e,i):g(t,e)},b=this)},releaseRenewalLock:function(t,e,i){for(var n,r,a,o=0;o<this._renewingContexts.length;++o)if((n=this._renewingContexts[o]).ctx===t){r=o,a=n.queue;break}if(a!==e)throw new N("Attempt to release renewal lock that is not owned by this queue.");(i=i&&i.messageHeader)?(a=i.keyResponseData)?e.add(a.masterToken):(t=t.isPeerToPeer()?i.peerMasterToken:i.masterToken)?e.add(t):e.add(Ln):e.add(Ln),this._renewingContexts.splice(r,1)}}),ui=u.Class.create({init:function(){var t={_impl:{value:new Bn},_shutdown:{value:!1}};Object.defineProperties(this,t)},setFilterFactory:function(t){this._impl.setFilterFactory(t)},shutdown:function(){this._shutdown=!0},receive:function(t,e,i,n,r,a){var o;if(this._shutdown)throw new P("MslControl is shutdown.");return o=new Un(this._impl,t,e,i,n,r),setTimeout(function(){o.call(a)},0),aa(o)},respond:function(t,e,i,n,r,a,o){var s;if(this._shutdown)throw new P("MslControl is shutdown.");return s=new Fn(this._impl,t,e,i,n,r,a),setTimeout(function(){s.call(o)},0),aa(s)},error:function(t,e,i,n,r,a,o){var s;if(this._shutdown)throw new P("MslControl is shutdown.");return s=new qn(this._impl,t,e,i,n,r,a),setTimeout(function(){s.call(o)},0),aa(s)},request:function(t,e){var i,n,r,a,o,s;if(this._shutdown)throw new P("MslControl is shutdown.");if(5==arguments.length){if(n=arguments[2],r=i=null,a=arguments[3],o=arguments[4],t.isPeerToPeer())return void o.error(new N("This method cannot be used in peer-to-peer mode."))}else if(6==arguments.length&&(n=null,i=arguments[2],r=arguments[3],a=arguments[4],o=arguments[5],!t.isPeerToPeer()))return void o.error(new N("This method cannot be used in trusted network mode."));return s=new Kn(this._impl,t,e,n,i,r,null,0,a),setTimeout(function(){s.call(o)},0),aa(s)}}),Un=u.Class.create({init:function(t,e,i,n,r,a){Object.defineProperties(this,{_ctrl:{value:t},_ctx:{value:e},_msgCtx:{value:i},_input:{value:n},_output:{value:r},_timeout:{value:a},_aborted:{value:!1,writable:!0},_abortFunc:{value:I,writable:!0}})},isAborted:function(){return this._aborted},abort:function(){this._aborted=!0,this._abortFunc&&this._abortFunc.call(this)},setAbort:function(t){this._abortFunc=t},call:function(f){var l;function e(e){Y(f,function(){var r=e.messageHeader;if(!r)return e;this.setAbort(function(){e.abort()}),e.mark(Number.MAX_VALUE),e.read(1,l._timeout,{result:function(t){Y(f,function(){return t&&0==t.length?null:t?(e.reset(),e):(h=e,void Y(f,function(){h.close(),this._ctrl.buildResponse(this,this._ctx,this._msgCtx,h.messageHeader,this._timeout,{result:function(c){Y(f,function(){var t,a,e,i,o,n=c.builder,r=c.tokenTicket,s=h.messageHeader,u=new Dn(this._msgCtx);!this._ctx.isPeerToPeer()||s.isEncrypting()||s.keyResponseData?(a=s,e=n,i=u,o=r,Y(f,function(){e.setRenewable(!1),this._ctrl.send(this._ctx,i,this._output,e,this._timeout,{result:function(t){Y(f,function(){return this._ctx.isPeerToPeer()&&this._ctrl.releaseMasterToken(o),null},l)},timeout:function(){Y(f,function(){this._ctx.isPeerToPeer()&&this._ctrl.releaseMasterToken(o),f.timeout()},l)},error:function(r){Y(f,function(){var t,e,i,n;if(this._ctx.isPeerToPeer()&&this._ctrl.releaseMasterToken(o),X(r))return null;n=r instanceof P?(t=r.messageId,e=r.error,i=a?a.messageCapabilities:null,i=this._ctrl.messageRegistry.getUserMessage(e,i?i.languages:null),r):r instanceof b?(t=a?a.messageId:null,e=J.MSL_COMMS_FAILURE,i=null,r):(t=a?a.messageId:null,e=J.INTERNAL_EXCEPTION,i=null,new N("Error sending an automatic handshake response.",r)),ha(this,this._ctx,this._msgCtx.getDebugContext(),t,e,i,this._output,this._timeout,{result:function(t){f.error(n)},timeout:function(){f.timeout()},error:function(t){Y(f,function(){if(X(t))return null;throw new lt("Error sending an automatic handshake response.",t,r)},l)}})},l)}})},l)):(t=new Kn(this._ctrl,this._ctx,u,null,this._input,this._output,c,1,this._timeout),this.setAbort(function(){t.abort()}),t.call(f))},l)},timeout:function(){f.timeout()},error:function(r){Y(f,function(){var t,e,i,n;if(X(r))return null;n=r instanceof P?(t=r.messageId,e=r.error,i=h.messageHeader.messageCapabilities,i=this._ctrl.messageRegistry.getUserMessage(e,i?i.languages:null),r):(t=requestHeader?requestHeader.messageId:null,e=J.INTERNAL_EXCEPTION,i=null,new N("Error creating an automatic handshake response.",r)),ha(this,this._ctx,this._msgCtx.getDebugContext(),t,e,i,this._output,this._timeout,{result:function(t){f.error(n)},timeout:function(){f.timeout()},error:function(t){Y(f,function(){if(X(t))return null;throw new lt("Error creating an automatic handshake response.",t,r)},l)}})},l)}})},l));var h},l)},timeout:function(){f.timeout()},error:function(n){Y(f,function(){var t,e,i;if(X(n))return null;t=r?r.messageId:null,i=n instanceof b?(e=J.MSL_COMMS_FAILURE,n):(e=J.INTERNAL_EXCEPTION,new N("Error peeking into the message payloads.")),ha(this,this._ctx,this._msgCtx.getDebugContext(),t,e,null,this._output,this._timeout,{result:function(t){f.error(i)},timeout:function(){f.timeout()},error:function(t){Y(f,function(){if(X(t))return null;throw new lt("Error peeking into the message payloads.",t,n)},l)}})},l)}})},l)}Y(f,function(){this._ctrl.receive(this,this._ctx,this._msgCtx,this._input,null,this._timeout,{result:function(t){e(t)},timeout:function(){f.timeout()},error:function(r){Y(f,function(){var t,e,i,n;if(X(r))return null;n=r instanceof P?(t=r.messageId,e=r.error,i=this._ctrl.messageRegistry.getUserMessage(e,null),r):(e=J.INTERNAL_EXCEPTION,i=t=null,new N("Error receiving the message header.",r)),ha(this,this._ctx,this._msgCtx.getDebugContext(),t,e,i,this._output,this._timeout,{result:function(t){f.error(n)},timeout:function(){f.timeout()},error:function(t){Y(f,function(){if(X(t))return null;throw new lt("Error receiving the message header.",t,r)},l)}})},l)}})},l=this)}}),Fn=u.Class.create({init:function(t,e,i,n,r,a,o){Object.defineProperties(this,{_ctrl:{value:t},_ctx:{value:e},_msgCtx:{value:i},_input:{value:n},_output:{value:r},_request:{value:a},_timeout:{value:o},_aborted:{value:!1,writable:!0},_abortFunc:{value:I,writable:!0}})},isAborted:function(){return this._aborted},abort:function(){this._aborted=!0,this._abortFunc&&this._abortFunc.call(this)},setAbort:function(t){this._abortFunc=t},trustedNetworkExecute:function(i,n,r){var a=this;Y(r,function(){var e,t;if(12<n+1)return!1;(e=this._msgCtx.isIntegrityProtected()&&!i.willIntegrityProtectHeader()?J.RESPONSE_REQUIRES_INTEGRITY_PROTECTION:this._msgCtx.isEncrypted()&&!i.willEncryptPayloads()?J.RESPONSE_REQUIRES_ENCRYPTION:null)?(t=Ze(i.getMessageId()),ha(this,this._ctx,this._msgCtx.getDebugContext(),t,e,null,this._output,this._timeout,{result:function(t){r.result(!1)},timeout:function(){r.timeout()},error:function(t){Y(r,function(){if(X(t))return!1;throw new lt("Response requires encryption or integrity protection but cannot be protected: "+e,t,null)},a)}})):!this._msgCtx.getCustomer()||i.getMasterToken()||i.getKeyExchangeData()?(i.setRenewable(!1),this._ctrl.send(this._ctx,this._msgCtx,this._output,i,this._timeout,{result:function(t){r.result(!0)},timeout:function(){r.timeout()},error:function(t){r.error(t)}})):(t=Ze(i.getMessageId()),ha(this,this._ctx,this._msgCtx.getDebugContext(),t,J.RESPONSE_REQUIRES_MASTERTOKEN,null,this._output,this._timeout,{result:function(t){r.result(!1)},timeout:function(){r.timeout()},error:function(t){Y(r,function(){if(X(t))return!1;throw new lt("Response wishes to attach a user ID token but there is no master token.",t,null)},a)}}))},a)},peerToPeerExecute:function(o,e,s,u){var c;Y(u,function(){var t;if(12<s+2)return!1;null!=o.getCustomer()&&null==e.getPeerMasterToken()&&null==e.getKeyExchangeData()?(t=Ze(e.getMessageId()),ha(this,this._ctx,o.getDebugContext(),t,J.RESPONSE_REQUIRES_MASTERTOKEN,null,this._output,this._timeout,{result:function(t){u.result(!1)},timeout:function(){u.timeout()},error:function(t){Y(u,function(){if(X(t))return!1;throw new lt("Response wishes to attach a user ID token but there is no master token.",t,null)},c)}})):this._ctrl.sendReceive(this._ctx,o,this._input,this._output,e,this._timeout,!1,{result:function(a){Y(u,function(){var t,e,i,n;function r(){t.read(32768,c._timeout,{result:function(t){Y(u,function(){t?r():Y(u,function(){var i=new Mn(a.payloads,o);this._ctrl.buildResponse(this,this._ctx,i,e,this._timeout,{result:function(t){Y(u,function(){var e=t.tokenTicket;this.peerToPeerExecute(i,t.builder,s,{result:function(t){Y(u,function(){return this._ctrl.releaseMasterToken(e),t},c)},timeout:function(){Y(u,function(){this._ctrl.releaseMasterToken(e),u.timeout()},c)},error:function(t){Y(u,function(){throw this._ctrl.releaseMasterToken(e),t},c)}})},c)},timeout:function(){u.timeout()},error:function(t){u.error(t)}})},c)},c)},timeout:function(){u.timeout()},error:function(t){u.error(t)}})}if(t=a.response,s+=2,!t)return!0;if(e=t.getMessageHeader()){if(i=0<(i=a.payloads).length&&0<i[0].data.length,!a.handshake||!i)return!0;r()}else n=a,Y(u,function(){var t=n.response;t.close(),t=t.getErrorHeader(),this._ctrl.cleanupContext(this._ctx,n.requestHeader,t),this._ctrl.buildErrorResponse(this,this._ctx,o,n,t,{result:function(i){Y(u,function(){var t,e;if(!i)return!1;t=i.errorResult,e=i.tokenTicket,this.peerToPeerExecute(t.msgCtx,t.builder,s,{result:function(t){Y(u,function(){return this._ctrl.releaseMasterToken(e),t},c)},timeout:function(){Y(u,function(){this._ctrl.releaseMasterToken(e),u.timeout()},c)},error:function(t){Y(u,function(){throw this._ctrl.releaseMasterToken(e),t},c)}})},c)}})},c)},c)},timeout:function(){u.timeout()},error:function(t){u.error(t)}})},c=this)},call:function(s){var u=this;this._ctrl.buildResponse(this,this._ctx,this._msgCtx,this._request,this._timeout,{result:function(t){Y(s,function(){var a=t.builder,o=t.tokenTicket;this._ctx.isPeerToPeer()?this.peerToPeerExecute(this._msgCtx,a,3,{result:function(t){Y(s,function(){return this._ctx.isPeerToPeer()&&this.releaseMasterToken(o),t},u)},timeout:function(){Y(s,function(){this._ctx.isPeerToPeer()&&this.releaseMasterToken(o),s.timeout()},u)},error:function(r){Y(s,function(){var t,e,i,n;if(this._ctx.isPeerToPeer()&&this.releaseMasterToken(o),X(r))return!1;t=Ze(a.getMessageId()),n=r instanceof P?(e=r.error,i=this._request.messageCapabilities,i=this._ctrl.messageRegistry.getUserMessage(e,i?i.languages:null),r):r instanceof b?(e=J.MSL_COMMS_FAILURE,i=null,r):(e=J.INTERNAL_EXCEPTION,i=null,new N("Error sending the response.",r)),ha(this,this._ctx,this._msgCtx.getDebugContext(),t,e,i,this._output,this._timeout,{result:function(t){s.error(n)},timeout:function(){s.timeout()},error:function(t){Y(s,function(){if(X(t))return!1;throw new lt("Error sending the response.",t,null)},u)}})},u)}}):this.trustedNetworkExecute(a,3,{result:function(t){Y(s,function(){return this._ctx.isPeerToPeer()&&this.releaseMasterToken(o),t},u)},timeout:function(){Y(s,function(){this._ctx.isPeerToPeer()&&this.releaseMasterToken(o),s.timeout()},u)},error:function(r){Y(s,function(){var t,e,i,n;if(this._ctx.isPeerToPeer()&&this.releaseMasterToken(o),X(r))return!1;t=Ze(a.getMessageId()),n=r instanceof P?(e=r.error,i=this._request.messageCapabilities,i=this._ctrl.messageRegistry.getUserMessage(e,i?i.languages:null),r):r instanceof b?(e=J.MSL_COMMS_FAILURE,i=null,r):(e=J.INTERNAL_EXCEPTION,i=null,new N("Error sending the response.",r)),ha(this,this._ctx,this._msgCtx.getDebugContext(),t,e,i,this._output,this._timeout,{result:function(t){s.error(n)},timeout:function(){s.timeout()},error:function(t){Y(s,function(){if(X(t))return!1;throw new lt("Error sending the response.",t,null)},u)}})},u)}})},u)},timeout:function(){s.timeout()},error:function(r){Y(s,function(){var t,e,i,n;if(X(r))return!1;n=r instanceof P?(t=r.messageId,e=r.error,i=this._request.messageCapabilities,i=this._ctrl.messageRegistry.getUserMessage(e,i?i.languages:null),r):(e=J.INTERNAL_EXCEPTION,i=t=null,new N("Error building the response.",r)),ha(this,this._ctx,this._msgCtx.getDebugContext(),t,e,i,this._output,this._timeout,{result:function(t){s.error(n)},timeout:function(){s.timeout()},error:function(t){Y(s,function(){if(X(t))return null;throw new lt("Error building the response.",t,r)},u)}})},u)}})}}),qn=u.Class.create({init:function(t,e,i,n,r,a,o){Object.defineProperties(this,{_ctrl:{value:t},_ctx:{value:e},_msgCtx:{value:i},_appError:{value:n},_output:{value:output},_request:{value:a},_timeout:{value:o},_aborted:{value:!1,writable:!0},_abortFunc:{value:I,writable:!0}})},isAborted:function(){return this._aborted},abort:function(){this._aborted=!0,this._abortFunc&&this._abortFunc.call(this)},setAbort:function(t){this._abortFunc=t},call:function(i){var n=this;Y(i,function(){var t,e;if(this._appError==ENTITY_REJECTED)t=this._request.masterToken?J.MASTERTOKEN_REJECTED_BY_APP:J.ENTITY_REJECTED_BY_APP;else{if(this._appError!=USER_REJECTED)throw new N("Unhandled application error "+this._appError+".");t=this._request.userIdToken?J.USERIDTOKEN_REJECTED_BY_APP:J.USER_REJECTED_BY_APP}e=this._request.messageCapabilities,e=this._ctrl.messageRegistry.getUserMessage(t,e?e.languages:null),ha(this,this._ctx,this._msgCtx.getDebugContext(),this._request.messageId,t,e,this._output,this._timeout,{result:function(t){i.result(t)},timeout:i.timeout,error:function(t){Y(i,function(){if(X(t))return!1;if(t instanceof P)throw t;throw new N("Error building the error response.",t)},n)}})},n)}}),Hn={result:function(){},timeout:function(){},error:function(){}},Kn=u.Class.create({init:function(t,e,i,n,r,a,o,s,u){var c;o=o?(c=o.builder,o.tokenTicket):c=null,Object.defineProperties(this,{_ctrl:{value:t},_ctx:{value:e},_msgCtx:{value:i},_remoteEntity:{value:n},_input:{value:r,writable:!0},_output:{value:a,writable:!0},_openedStreams:{value:!1,writable:!0},_builder:{value:c,writable:!0},_tokenTicket:{value:o,writable:!0},_timeout:{value:u},_msgCount:{value:s},_aborted:{value:!1,writable:!0},_abortFunc:{value:I,writable:!0}})},isAborted:function(){return this._aborted},abort:function(){this._aborted=!0,this._abortFunc&&this._abortFunc.call(this)},setAbort:function(t){this._abortFunc=t},execute:function(s,t,u,c,h){var f;function n(o){Y(h,function(){var r,e,t,i,a;function n(){r.read(32768,f._timeout,{result:function(t){t?n():Y(h,function(){var i=new Mn(o.payloads,s);this._ctrl.buildResponse(this,this._ctx,s,e,u,{result:function(t){Y(h,function(){var e=t.tokenTicket;this.execute(i,t.builder,this._timeout,c,{result:function(t){Y(h,function(){return this._ctrl.releaseMasterToken(e),t},f)},timeout:function(){Y(h,function(){this._ctrl.releaseMasterToken(e),h.timeout()},f)},error:function(t){Y(h,function(){throw this._ctrl.releaseMasterToken(e),t},f)}})},f)},timeout:function(){h.timeout()},error:function(t){h.error(t)}})},f)},timeout:function(){h.timeout()},error:function(t){h.error(t)}})}if(r=o.response,e=r.getMessageHeader(),t=0<(t=o.payloads).length&&0<t[0].data.length,this._ctx.isPeerToPeer())o.handshake&&t?n():0<e.keyRequestData.length&&(a=new Dn(s),this._ctrl.buildResponse(this,this._ctx,a,e,u,{result:function(t){Y(h,function(){var i=t.builder,n=t.tokenTicket;r.mark(),r.read(1,this._timeout,{result:function(t){Y(h,function(){function e(){r.read(32768,f._timeout,{result:function(t){t?e():f.execute(a,i,f._timeout,c,{result:function(t){Y(h,function(){return this._ctrl.releaseMasterToken(n),t},f)},timeout:function(){Y(h,function(){this._ctrl.releaseMasterToken(n),h.timeout()},f)},error:function(t){Y(h,function(){throw this._ctrl.releaseMasterToken(n),t},f)}})},timeout:function(){h.timeout()},error:function(t){h.error(t)}})}if(t){if(r.reset(),!(c+1<=12))return this.releaseMasterToken(n),r;i.setRenewable(!1),this._ctrl.send(this,this._ctx,a,this._output,i,this._timeout,{result:function(t){Y(h,function(){return this.releaseMasterToken(n),r},f)},timeout:function(){h.timeout()},error:function(t){h.error(t)}})}else e()},f)},timeout:function(){Y(h,function(){this.releaseMasterToken(n),h.timeout()},f)},error:function(t){Y(h,function(){throw this.releaseMasterToken(n),t},f)}})},f)},timeout:function(){h.timeout()},error:function(t){h.error(t)}}));else{if(!o.handshake||!t)return r;this._openedStreams&&(this._input.close(),this._output.close(u,Hn)),i=new Mn(o.payloads,s),this._ctrl.buildResponse(this,this._ctx,s,e,u,{result:function(e){Y(h,function(){var t=new Kn(this._ctrl,this._ctx,i,this._remoteEntity,null,null,e,c,this._timeout);this.setAbort(function(){t.abort()}),t.call(h)},f)},timeout:function(){h.timeout()},error:function(t){h.error(t)}})}},f)}Y(h,function(){if(12<c+2)return null;this._ctrl.sendReceive(this,this._ctx,s,this._input,this._output,t,u,!0,{result:function(e){Y(h,function(){var t,i;if(!e)return null;function o(e){Y(h,function(){var t=i.response;return e||t},f)}t=e.response,c+=2,t.getMessageHeader()?n(e):(i=e,Y(h,function(){var t,a=i.response;a.close(),t=a.getErrorHeader(),this._ctrl.cleanupContext(this._ctx,i.requestHeader,t),this._ctrl.buildErrorResponse(this,this._ctx,s,i,t,u,{result:function(r){Y(h,function(){var t,e,i,n;if(!r)return a;t=r.errorResult,e=r.tokenTicket,i=t.builder,t=t.msgCtx,this._ctx.isPeerToPeer()?this.execute(t,i,this._timeout,c,{result:function(t){Y(h,function(){this._ctrl.releaseMasterToken(e),o(t)},f)},timeout:function(){Y(h,function(){this._ctrl.releaseMasterToken(e),h.timeout()},f)},error:function(t){Y(h,function(){this._ctrl.releaseMasterToken(e),h.error(t)},f)}}):(this._openedStreams&&(this._input.close(),this._output.close(u,Hn)),n=new Kn(this._ctrl,this._ctx,t,this._remoteEntity,null,null,{builder:i,tokenTicket:e},c,this._timeout),this.setAbort(function(){n.abort()}),n.call({result:function(t){o(t)},timeout:function(){h.timeout()},error:function(t){h.error(t)}}))},f)},timeout:function(){h.timeout()},error:function(t){h.error(t)}})},f))},f)},timeout:function(){h.timeout()},error:function(t){h.error(t)}})},f=this)},call:function(n){var r;function a(t,e,i){Y(n,function(){this.execute(this._msgCtx,t,i,this._msgCount,{result:function(t){Y(n,function(){return this._ctrl.releaseMasterToken(e),this._openedStreams&&this._output.close(i,Hn),t&&t.closeSource(this._openedStreams),t},r)},timeout:function(){Y(n,function(){this._ctrl.releaseMasterToken(e),this._openedStreams&&(this._output.close(i,Hn),this._input.close()),n.timeout()},r)},error:function(t){Y(n,function(){if(this._ctrl.releaseMasterToken(e),this._openedStreams&&(this._output.close(i,Hn),this._input.close()),X(t))return null;throw t},r)}})},r)}Y(n,function(){var t,e,i=this._timeout;if(!this._input||!this._output)try{this._remoteEntity.setTimeout(this._timeout),t=Date.now(),e=this._remoteEntity.openConnection(),this._output=e.output,this._input=e.input,-1!=i&&(i=this._timeout-(Date.now()-t)),this._openedStreams=!0}catch(t){if(this._builder&&this._ctrl.releaseMasterToken(this._tokenTicket),this._output&&this._output.close(this._timeout,Hn),this._input&&this._input.close(),X(t))return null;throw t}this._builder?a(this._builder,this._tokenTicket,i):this._ctrl.buildRequest(this,this._ctx,this._msgCtx,this._timeout,{result:function(t){Y(n,function(){a(t.builder,t.tokenTicket,i)},r)},timeout:function(){Y(n,function(){this._openedStreams&&(this._output.close(this._timeout,Hn),this._input.close()),n.timeout()},r)},error:function(t){Y(n,function(){if(this._openedStreams&&(this._output.close(this._timeout,Hn),this._input.close()),X(t))return null;throw t},r)}})},r=this)}}),ci=u.Class.create({init:function(t){Object.defineProperties(this,{id:{value:t}})},toJSON:function(){var t={};return t.id=this.id,t},equals:function(t){return this===t||t instanceof ci&&this.id==t.id},uniqueKey:function(){return this.id}}),hi=function(t){var e=t.id;if(e)return new ci(e);throw new j(J.JSON_PARSE_ERROR,JSON.stringify(t))},u.Class.create({isNewestMasterToken:function(t,e,i){},isMasterTokenRevoked:function(t,e){},acceptNonReplayableId:function(t,e,i,n){},createMasterToken:function(t,e,i,n,r){},isMasterTokenRenewable:function(t,e,i){},renewMasterToken:function(t,e,i,n,r){},isUserIdTokenRevoked:function(t,e,i,n){},createUserIdToken:function(t,e,i,n){},renewUserIdToken:function(t,e,i,n){}}),fi=u.Class.create({init:function(s,e,i,u,c,h,f,l,d,p,b){var g=this;V(b,function(){var n,r,a,t,o;if(i.getTime()<e.getTime())throw new N("Cannot construct a master token that expires before its renewal window opens.");if(u<0||R<u)throw new N("Sequence number "+u+" is outside the valid range.");if(c<0||R<c)throw new N("Serial number "+c+" is outside the valid range.");if(n=Math.floor(e.getTime()/1e3),r=Math.floor(i.getTime()/1e3),a=p?p.sessiondata:(t={},h&&(t.issuerdata=h),t.identity=f,t.encryptionkey=m(l.toByteArray()),t.hmackey=m(d.toByteArray()),G(JSON.stringify(t),x)),p)return Object.defineProperties(this,{ctx:{value:s,writable:!1,configurable:!1},renewalWindowSeconds:{value:n},expirationSeconds:{value:r},sequenceNumber:{value:u},serialNumber:{value:c},issuerData:{value:h},identity:{value:f},encryptionKey:{value:l},hmacKey:{value:d},sessiondata:{value:a},verified:{value:p.verified},tokendata:{value:p.tokendata},signature:{value:p.signature}}),this;(o=s.getMslCryptoContext()).encrypt(a,{result:function(i){V(b,function(){var e,t={};t.renewalwindow=n,t.expiration=r,t.sequencenumber=u,t.serialnumber=c,t.sessiondata=m(i),e=G(JSON.stringify(t),x),o.sign(e,{result:function(t){V(b,function(){return Object.defineProperties(this,{ctx:{value:s,writable:!1,configurable:!1},renewalWindowSeconds:{value:n},expirationSeconds:{value:r},sequenceNumber:{value:u},serialNumber:{value:c},issuerData:{value:h},identity:{value:f},encryptionKey:{value:l},hmacKey:{value:d},sessiondata:{value:a},verified:{value:!0},tokendata:{value:e},signature:{value:t}}),this},g)},error:function(t){b.error(t)}})},g)},error:function(t){b.error(t)}})},this)},get renewalWindow(){return new Date(1e3*this.renewalWindowSeconds)},get expiration(){return new Date(1e3*this.expirationSeconds)},isDecrypted:function(){return!!this.sessiondata},isVerified:function(){return this.verified},isRenewable:function(t){return!this.isVerified()||this.renewalWindow.getTime()<=this.ctx.getTime()},isExpired:function(t){return!!this.isVerified()&&this.expiration.getTime()<=this.ctx.getTime()},isNewerThan:function(t){var e;return this.sequenceNumber==t.sequenceNumber?this.expiration>t.expiration:this.sequenceNumber>t.sequenceNumber?(e=this.sequenceNumber-R+127,t.sequenceNumber>=e):(e=t.sequenceNumber-R+127,this.sequenceNumber<e)},toJSON:function(){var t={};return t.tokendata=m(this.tokendata),t.signature=m(this.signature),t},equals:function(t){return this===t||t instanceof fi&&(this.serialNumber==t.serialNumber&&this.sequenceNumber==t.sequenceNumber&&this.expiration.getTime()==t.expiration.getTime())},uniqueKey:function(){return this.serialNumber+":"+this.sequenceNumber+this.expiration.getTime()}}),li=function(p,i,b){V(b,function(){var l,d,o=p.getMslCryptoContext(),t=i.tokendata,e=i.signature;if("string"!=typeof t||"string"!=typeof e)throw new j(J.JSON_PARSE_ERROR,"mastertoken "+JSON.stringify(i));try{l=O(t)}catch(t){throw new P(J.MASTERTOKEN_TOKENDATA_INVALID,"mastertoken "+JSON.stringify(i),t)}if(!l||0==l.length)throw new j(J.MASTERTOKEN_TOKENDATA_MISSING,"mastertoken "+JSON.stringify(i));try{d=O(e)}catch(t){throw new P(J.MASTERTOKEN_SIGNATURE_INVALID,"mastertoken "+JSON.stringify(i),t)}o.verify(l,d,{result:function(f){V(b,function(){var t,e,i,s,u,n,c,h,r,a=K(l,x);try{t=JSON.parse(a),e=parseInt(t.renewalwindow),i=parseInt(t.expiration),s=parseInt(t.sequencenumber),u=parseInt(t.serialnumber),n=t.sessiondata}catch(t){if(t instanceof SyntaxError)throw new j(J.MASTERTOKEN_TOKENDATA_PARSE_ERROR,"mastertokendata "+a,t);throw t}if(!e||e!=e||!i||i!=i||"number"!=typeof s||s!=s||"number"!=typeof u||u!=u||"string"!=typeof n)throw new j(J.MASTERTOKEN_TOKENDATA_PARSE_ERROR,"mastertokendata "+a);if(i<e)throw new P(J.MASTERTOKEN_EXPIRES_BEFORE_RENEWAL,"mastertokendata "+a);if(s<0||R<s)throw new P(J.MASTERTOKEN_SEQUENCE_NUMBER_OUT_OF_RANGE,"mastertokendata "+a);if(u<0||R<u)throw new P(J.MASTERTOKEN_SERIAL_NUMBER_OUT_OF_RANGE,"mastertokendata "+a);c=new Date(1e3*e),h=new Date(1e3*i);try{r=O(n)}catch(t){throw new P(J.MASTERTOKEN_SESSIONDATA_INVALID,n,t)}if(!r||0==r.length)throw new P(J.MASTERTOKEN_SESSIONDATA_MISSING,n);f?o.decrypt(r,{result:function(o){V(b,function(){var t,n,r,e,a,i=K(o,x);try{t=JSON.parse(i),n=t.issuerdata,r=t.identity,e=t.encryptionkey,a=t.hmackey}catch(t){if(t instanceof SyntaxError)throw new j(J.MASTERTOKEN_SESSIONDATA_PARSE_ERROR,"sessiondata "+i,t);throw t}if(n&&"object"!=typeof n||!r||"string"!=typeof e||"string"!=typeof a)throw new j(J.MASTERTOKEN_SESSIONDATA_PARSE_ERROR,"sessiondata "+i);Ot(e,vt,Et,{result:function(i){Ot(a,yt,St,{result:function(e){V(b,function(){var t=new fa(o,l,d,f);new fi(p,c,h,s,u,n,r,i,e,t,b)})},error:function(t){b.error(new C(J.MASTERTOKEN_KEY_CREATION_ERROR,t))}})},error:function(t){b.error(new C(J.MASTERTOKEN_KEY_CREATION_ERROR,t))}})})},error:function(t){b.error(t)}}):(e=new fa(null,l,d,f),new fi(p,c,h,s,u,null,null,null,null,e,b))})},error:function(t){b.error(t)}})})},di=u.Class.create({init:function(s,u,c,h,f,l,d,p,b){var g=this;V(b,function(){var n,r,a,t,e,i,o;if(c.getTime()<u.getTime())throw new N("Cannot construct a user ID token that expires before its renewal window opens.");if(!h)throw new N("Cannot construct a user ID token without a master token.");if(f<0||R<f)throw new N("Serial number "+f+" is outside the valid range.");if(n=Math.floor(u.getTime()/1e3),r=Math.floor(c.getTime()/1e3),a=h.serialNumber,p)return t=p.tokendata,e=p.signature,i=p.verified,a=h.serialNumber,Object.defineProperties(this,{ctx:{value:s},renewalWindowSeconds:{value:n},expirationSeconds:{value:r},mtSerialNumber:{value:a},serialNumber:{value:f},issuerData:{value:l},customer:{value:d},verified:{value:i},tokendata:{value:t},signature:{value:e}}),this;t={},l&&(t.issuerdata=l),t.identity=d,t=G(JSON.stringify(t),x),(o=s.getMslCryptoContext()).encrypt(t,{result:function(i){V(b,function(){var e,t={};t.renewalwindow=n,t.expiration=r,t.mtserialnumber=a,t.serialnumber=f,t.userdata=m(i),e=G(JSON.stringify(t),x),o.sign(e,{result:function(t){V(b,function(){return Object.defineProperties(this,{ctx:{value:s,writable:!1,configurable:!1},renewalWindowSeconds:{value:n},expirationSeconds:{value:r},mtSerialNumber:{value:h.serialNumber},serialNumber:{value:f},issuerData:{value:l},customer:{value:d},verified:{value:!0},tokendata:{value:e},signature:{value:t}}),this},g)},error:function(t){V(b,function(){throw t instanceof P&&t.setEntity(h),t},g)}})},g)},error:function(t){V(b,function(){throw t instanceof P&&t.setEntity(h),t},g)}})},this)},get renewalWindow(){return new Date(1e3*this.renewalWindowSeconds)},get expiration(){return new Date(1e3*this.expirationSeconds)},isVerified:function(){return this.verified},isDecrypted:function(){return!!this.customer},isRenewable:function(){return this.renewalWindow.getTime()<=this.ctx.getTime()},isExpired:function(){return this.expiration.getTime()<=this.ctx.getTime()},isBoundTo:function(t){return t&&t.serialNumber==this.mtSerialNumber},toJSON:function(){var t={};return t.tokendata=m(this.tokendata),t.signature=m(this.signature),t},equals:function(t){return this===t||t instanceof di&&(this.serialNumber==t.serialNumber&&this.mtSerialNumber==t.mtSerialNumber)},uniqueKey:function(){return this.serialNumber+":"+this.mtSerialNumber}}),pi=function(p,i,b,g){V(g,function(){var f,l,d=p.getMslCryptoContext(),t=i.tokendata,e=i.signature;if("string"!=typeof t||"string"!=typeof e)throw new j(J.JSON_PARSE_ERROR,"useridtoken "+JSON.stringify(i)).setEntity(b);try{f=O(t)}catch(t){throw new P(J.USERIDTOKEN_TOKENDATA_INVALID,"useridtoken "+JSON.stringify(i),t).setEntity(b)}if(!f||0==f.length)throw new j(J.USERIDTOKEN_TOKENDATA_MISSING,"useridtoken "+JSON.stringify(i)).setEntity(b);try{l=O(e)}catch(t){throw new P(J.USERIDTOKEN_TOKENDATA_INVALID,"useridtoken "+JSON.stringify(i),t).setEntity(b)}d.verify(f,l,{result:function(h){V(g,function(){var t,e,i,n,o,r,s,u,a,c=K(f,x);try{t=JSON.parse(c),e=parseInt(t.renewalwindow),i=parseInt(t.expiration),n=parseInt(t.mtserialnumber),o=parseInt(t.serialnumber),r=t.userdata}catch(t){if(t instanceof SyntaxError)throw new j(J.USERIDTOKEN_TOKENDATA_PARSE_ERROR,"usertokendata "+c,t).setEntity(b);throw t}if(!e||e!=e||!i||i!=i||"number"!=typeof n||n!=n||"number"!=typeof o||o!=o||"string"!=typeof r)throw new j(J.USERIDTOKEN_TOKENDATA_PARSE_ERROR,"usertokendata "+c).setEntity(b);if(i<e)throw new P(J.USERIDTOKEN_EXPIRES_BEFORE_RENEWAL,"mastertokendata "+c).setEntity(b);if(n<0||R<n)throw new P(J.USERIDTOKEN_MASTERTOKEN_SERIAL_NUMBER_OUT_OF_RANGE,"usertokendata "+c).setEntity(b);if(o<0||R<o)throw new P(J.USERIDTOKEN_SERIAL_NUMBER_OUT_OF_RANGE,"usertokendata "+c).setEntity(b);if(s=new Date(1e3*e),u=new Date(1e3*i),!b||n!=b.serialNumber)throw new P(J.USERIDTOKEN_MASTERTOKEN_MISMATCH,"uit mtserialnumber "+n+"; mt "+JSON.stringify(b)).setEntity(b);try{a=O(r)}catch(t){throw new P(J.USERIDTOKEN_USERDATA_INVALID,r,t).setEntity(b)}if(!a||0==a.length)throw new P(J.USERIDTOKEN_USERDATA_MISSING,r).setEntity(b);h?d.decrypt(a,{result:function(a){V(g,function(){var t,e,i,n,r=K(a,x);try{e=(t=JSON.parse(r)).issuerdata,i=t.identity}catch(t){if(t instanceof SyntaxError)throw new j(J.USERIDTOKEN_USERDATA_PARSE_ERROR,"userdata "+r).setEntity(b);throw t}if(e&&"object"!=typeof e||"object"!=typeof i)throw new j(J.USERIDTOKEN_USERDATA_PARSE_ERROR,"userdata "+r).setEntity(b);try{n=hi(i)}catch(t){throw new P(J.USERIDTOKEN_IDENTITY_INVALID,"userdata "+r,t).setEntity(b)}i=new la(f,l,h),new di(p,s,u,b,o,e,n,i,g)})},error:function(t){V(g,function(){throw t instanceof P&&t.setEntity(b),t})}}):(e=new la(f,l,h),new di(p,s,u,b,o,null,null,e,g))})},error:function(t){V(g,function(){throw t instanceof P&&t.setEntity(b),t})}})})},bi=u.Class.create({init:function(a,o,s,u,c,h,f,l,d,p){var b=this;V(p,function(){var i,n,t,r,e;if(u&&c&&!c.isBoundTo(u))throw new N("Cannot construct a service token bound to a master token and user ID token where the user ID token is not bound to the same master token.");if(i=u?u.serialNumber:-1,n=c?c.serialNumber:-1,d)return e=d.tokendata,Object.defineProperties(this,{ctx:{value:a,writable:!1,configurable:!1},name:{value:o},mtSerialNumber:{value:i},uitSerialNumber:{value:n},data:{value:s},encrypted:{value:h},compressionAlgo:{value:f},verified:{value:d.verified},tokendata:{value:e},signature:{value:d.signature}}),this;f&&(t=Ii(f,s)).length<s.length||(f=null,t=s),(r={}).name=o,-1!=i&&(r.mtserialnumber=i),-1!=n&&(r.uitserialnumber=n),r.encrypted=h,f&&(r.compressionalgo=f),h&&0<t.length?l.encrypt(t,{result:function(t){V(p,function(){var e;r.servicedata=m(t),e=G(JSON.stringify(r),x),l.sign(e,{result:function(t){V(p,function(){return Object.defineProperties(this,{ctx:{value:a,writable:!1,configurable:!1},name:{value:o},mtSerialNumber:{value:i},uitSerialNumber:{value:n},data:{value:s},encrypted:{value:h},compressionAlgo:{value:f},verified:{value:!0},tokendata:{value:e},signature:{value:t}}),this},b)},error:function(t){V(p,function(){throw t instanceof P&&(t.setEntity(u),t.setUser(c)),t})}})},b)},error:function(t){V(p,function(){throw t instanceof P&&(t.setEntity(u),t.setUser(c)),t})}}):(r.servicedata=m(t),e=G(JSON.stringify(r),x),l.sign(e,{result:function(t){V(p,function(){return Object.defineProperties(this,{ctx:{value:a,writable:!1,configurable:!1},name:{value:o},mtSerialNumber:{value:i},uitSerialNumber:{value:n},data:{value:s},encrypted:{value:h},compressionAlgo:{value:f},verified:{value:!0},tokendata:{value:e},signature:{value:t}}),this},b)},error:function(t){V(p,function(){throw t instanceof P&&(t.setEntity(u),t.setUser(c)),t})}}))},this)},isEncrypted:function(){return this.encrypted},isVerified:function(){return this.verified},isDecrypted:function(){return!!this.data},isDeleted:function(){return this.data&&0==this.data.length},isMasterTokenBound:function(){return-1!=this.mtSerialNumber},isBoundTo:function(t){return!!t&&(t instanceof fi?t.serialNumber==this.mtSerialNumber:t instanceof di&&t.serialNumber==this.uitSerialNumber)},isUserIdTokenBound:function(){return-1!=this.uitSerialNumber},isUnbound:function(){return-1==this.mtSerialNumber&&-1==this.uitSerialNumber},toJSON:function(){var t={};return t.tokendata=m(this.tokendata),t.signature=m(this.signature),t},equals:function(t){return this===t||t instanceof bi&&(this.name==t.name&&this.mtSerialNumber==t.mtSerialNumber&&this.uitSerialNumber==t.uitSerialNumber)},uniqueKey:function(){return this.name+":"+this.mtSerialNumber+":"+this.uitSerialNumber}}),gi=function(t,e,i,n,r,a,o,s,u){new bi(t,e,i,n,r,a,o,s,null,u)},mi=function(d,p,b,g,m,v){V(v,function(){var t,e,r,a,i,n,o,s,u,c,h,f,l;if(!m||m instanceof Ht||(m=function(e,t){var i,n,r=e.tokendata;if("string"!=typeof r)throw new j(J.JSON_PARSE_ERROR,"servicetoken "+JSON.stringify(e));try{i=O(r)}catch(t){throw new P(J.SERVICETOKEN_TOKENDATA_INVALID,"servicetoken "+JSON.stringify(e),t)}if(!i||0==i.length)throw new j(J.SERVICETOKEN_TOKENDATA_MISSING,"servicetoken "+JSON.stringify(e));try{n=JSON.parse(K(i,x)).name}catch(t){if(t instanceof SyntaxError)throw new j(J.JSON_PARSE_ERROR,"servicetoken "+JSON.stringify(e),t);throw t}if(n)return t[n]||t[""];throw new j(J.JSON_PARSE_ERROR,"servicetoken "+JSON.stringify(e))}(p,m)),t=p.tokendata,e=p.signature,"string"!=typeof t||"string"!=typeof e)throw new j(J.JSON_PARSE_ERROR,"servicetoken "+JSON.stringify(p)).setEntity(b).setEntity(g);try{r=O(t)}catch(t){throw new P(J.SERVICETOKEN_TOKENDATA_INVALID,"servicetoken "+JSON.stringify(p),t).setEntity(b).setEntity(g)}if(!r||0==r.length)throw new j(J.SERVICETOKEN_TOKENDATA_MISSING,"servicetoken "+JSON.stringify(p)).setEntity(b).setEntity(g);try{a=O(e)}catch(t){throw new P(J.SERVICETOKEN_SIGNATURE_INVALID,"servicetoken "+JSON.stringify(p),t).setEntity(b).setEntity(g)}i=K(r,x);try{n=JSON.parse(i),o=n.name,s=n.mtserialnumber?parseInt(n.mtserialnumber):-1,u=n.uitserialnumber?parseInt(n.uitserialnumber):-1,c=n.encrypted,h=n.compressionalgo,f=n.servicedata}catch(t){if(t instanceof SyntaxError)throw new j(J.JSON_PARSE_ERROR,"servicetokendata "+i,t).setEntity(b).setEntity(g);throw t}if(!o||"number"!=typeof s||s!=s||"number"!=typeof u||u!=u||"boolean"!=typeof c||h&&"string"!=typeof h||"string"!=typeof f)throw new j(J.JSON_PARSE_ERROR,"servicetokendata "+i).setEntity(b).setEntity(g);if(n.mtserialnumber&&s<0||R<s)throw new P(J.SERVICETOKEN_MASTERTOKEN_SERIAL_NUMBER_OUT_OF_RANGE,"servicetokendata "+i).setEntity(b).setEntity(g);if(n.uitserialnumber&&u<0||R<u)throw new P(J.SERVICETOKEN_USERIDTOKEN_SERIAL_NUMBER_OUT_OF_RANGE,"servicetokendata "+i).setEntity(b).setEntity(g);if(-1!=s&&(!b||s!=b.serialNumber))throw new P(J.SERVICETOKEN_MASTERTOKEN_MISMATCH,"st mtserialnumber "+s+"; mt "+b).setEntity(b).setEntity(g);if(-1!=u&&(!g||u!=g.serialNumber))throw new P(J.SERVICETOKEN_USERIDTOKEN_MISMATCH,"st uitserialnumber "+u+"; uit "+g).setEntity(b).setEntity(g);if(c=!0===c,h){if(!nt[h])throw new P(J.UNIDENTIFIED_COMPRESSION,h);l=h}else l=null;m?m.verify(r,a,{result:function(n){V(v,function(){var t,e;if(n){try{t=O(f)}catch(t){throw new P(J.SERVICETOKEN_SERVICEDATA_INVALID,"servicetokendata "+i,t).setEntity(b).setEntity(g)}if(!t||0!=f.length&&0==t.length)throw new P(J.SERVICETOKEN_SERVICEDATA_INVALID,"servicetokendata "+i).setEntity(b).setEntity(g);c&&0<t.length?m.decrypt(t,{result:function(i){V(v,function(){var t=l?Oi(l,i):i,e=new da(r,a,n);new bi(d,o,t,-1!=s?b:null,-1!=u?g:null,c,l,m,e,v)})},error:function(t){V(v,function(){throw t instanceof P&&(t.setEntity(b),t.setUser(g)),t})}}):(t=l?Oi(l,t):t,e=new da(r,a,n),new bi(d,o,t,-1!=s?b:null,-1!=u?g:null,c,l,m,e,v))}else t=""==f?new Uint8Array(0):null,e=new da(r,a,n),new bi(d,o,t,-1!=s?b:null,-1!=u?g:null,c,l,m,e,v)})},error:function(t){V(v,function(){throw t instanceof P&&(t.setEntity(b),t.setUser(g)),t})}}):(t=""==f?new Uint8Array(0):null,e=new da(r,a,!1),new bi(d,o,t,-1!=s?b:null,-1!=u?g:null,c,l,m,e,v))})},vi={EMAIL_PASSWORD:"EMAIL_PASSWORD",NETFLIXID:"NETFLIXID",SSO:"SSO",SWITCH_PROFILE:"SWITCH_PROFILE",MDX:"MDX"},Object.freeze(vi),yi=u.Class.create({init:function(t){Object.defineProperties(this,{scheme:{value:t}})},getAuthData:function(){},equals:function(t){return this===t||t instanceof yi&&this.scheme==t.scheme},toJSON:function(){var t={};return t.scheme=this.scheme,t.authdata=this.getAuthData(),t}}),wi=function(n,r,a,o){V(o,function(){var t,e=a.scheme,i=a.authdata;if(!e||!i)throw new j(J.JSON_PARSE_ERROR,"userauthdata "+JSON.stringify(a));if(!vi[e])throw new pt(J.UNIDENTIFIED_USERAUTH_SCHEME,e);if(!(t=n.getUserAuthenticationFactory(e)))throw new pt(J.USERAUTH_FACTORY_NOT_FOUND,e);t.createData(n,r,i,o)})},xi=u.Class.create({init:function(t){Object.defineProperties(this,{scheme:{value:t,writable:!1,configurable:!1}})},createData:function(t,e,i,n){},authenticate:function(t,e,i,n){}}),Ai=yi.extend({init:function t(e,i){t.base.call(this,vi.NETFLIXID),Object.defineProperties(this,{netflixId:{value:e},secureNetflixId:{value:i}})},getAuthData:function(){var t={};return t.netflixid=this.netflixId,this.secureNetflixId&&(t.securenetflixid=this.secureNetflixId),t},equals:function t(e){return this===e||e instanceof Ai&&(t.base.call(this,e)&&this.netflixId==e.netflixId&&this.secureNetflixId==e.secureNetflixId)}}),_i=function(t){var e=t.netflixid,i=t.securenetflixid;if(e)return new Ai(e,i);throw new j(J.JSON_PARSE_ERROR,"NetflixId authdata "+JSON.stringify(t))},Ei=xi.extend({init:function t(){t.base.call(this,vi.NETFLIXID)},createData:function(t,e,i,n){V(n,function(){return _i(i)})},authenticate:function(t,e,i,n){if(!(i instanceof Ai))throw new N("Incorrect authentication data type "+i+".");if(t=i.secureNetflixId,i.netflixId&&t)throw new pt(J.UNSUPPORTED_USERAUTH_DATA,this.scheme).setUser(i);throw new pt(J.NETFLIXID_COOKIES_BLANK).setUser(i)}}),ki=yi.extend({init:function t(e,i){t.base.call(this,vi.EMAIL_PASSWORD),Object.defineProperties(this,{email:{value:e},password:{value:i}})},getAuthData:function(){var t={};return t.email=this.email,t.password=this.password,t},equals:function t(e){return this===e||e instanceof ki&&(t.base.call(this,this,e)&&this.email==e.email&&this.password==e.password)}}),Si=function(t){var e=t.email,i=t.password;if(e&&i)return new ki(e,i);throw new j(J.JSON_PARSE_ERROR,"email/password authdata "+JSON.stringify(t))},Ti=xi.extend({init:function t(){t.base.call(this,vi.EMAIL_PASSWORD)},createData:function(t,e,i,n){V(n,function(){return Si(i)})},authenticate:function(t,e,i,n){if(!(i instanceof ki))throw new N("Incorrect authentication data type "+i+".");if(t=i.password,i.email&&t)throw new pt(J.UNSUPPORTED_USERAUTH_DATA,this.scheme).setUser(i);throw new pt(J.EMAILPASSWORD_BLANK).setUser(i)}}),Object.freeze({ENTITY_REAUTH:y.ENTITY_REAUTH,ENTITYDATA_REAUTH:y.ENTITYDATA_REAUTH}),Nn=u.Class.create({getTime:function(){},getRandom:function(){},isPeerToPeer:function(){},getMessageCapabilities:function(){},getEntityAuthenticationData:function(t,e){},getMslCryptoContext:function(){},getEntityAuthenticationFactory:function(t){},getUserAuthenticationFactory:function(t){},getTokenFactory:function(){},getKeyExchangeFactory:function(t){},getKeyExchangeFactories:function(){},getMslStore:function(){}}),xi=u.Class.create({setCryptoContext:function(t,e){},getMasterToken:function(){},getNonReplayableId:function(t){},getCryptoContext:function(t){},removeCryptoContext:function(t){},clearCryptoContexts:function(){},addUserIdToken:function(t,e){},getUserIdToken:function(t){},removeUserIdToken:function(t){},clearUserIdTokens:function(){},addServiceTokens:function(t){},getServiceTokens:function(t,e){},removeServiceTokens:function(t,e,i){},clearServiceTokens:function(){}}),Gn=nt,Ii=function(t,e){switch(t){case Gn.LZW:return et(e,{});case Gn.GZIP:return gzip$compress(e);default:throw new P(J.UNSUPPORTED_COMPRESSION,t)}},Oi=function(t,e,i){switch(t){case Gn.LZW:return it(e);case Gn.GZIP:return gzip$uncompress(e);default:throw new P(J.UNSUPPORTED_COMPRESSION,t.name())}},xi.extend({setCryptoContext:function(t,e){},getMasterToken:function(){return null},getNonReplayableId:function(t){return 1},getCryptoContext:function(t){return null},removeCryptoContext:function(t){},clearCryptoContexts:function(){},addUserIdToken:function(t,e){},getUserIdToken:function(t){return null},removeUserIdToken:function(t){},clearUserIdTokens:function(){},addServiceTokens:function(t){},getServiceTokens:function(t,e){if(e){if(!t)throw new P(J.USERIDTOKEN_MASTERTOKEN_NULL);if(!e.isBoundTo(t))throw new P(J.USERIDTOKEN_MASTERTOKEN_MISMATCH,"uit mtserialnumber "+e.mtSerialNumber+"; mt "+t.serialNumber)}return[]},removeServiceTokens:function(t,e,i){if(i&&e&&!i.isBoundTo(e))throw new P(J.USERIDTOKEN_MASTERTOKEN_MISMATCH,"uit mtserialnumber "+i.masterTokenSerialNumber+"; mt "+e.serialNumber)},clearServiceTokens:function(){}}),xi=xi.extend({init:function t(){t.base.call(this),Object.defineProperties(this,{masterTokens:{value:{}},cryptoContexts:{value:{}},userIdTokens:{value:{}},nonReplayableIds:{value:{}},unboundServiceTokens:{value:{}},mtServiceTokens:{value:{}},uitServiceTokens:{value:{}}})},setCryptoContext:function(t,e){var i;e?(i=t.uniqueKey(),this.masterTokens[i]=t,this.cryptoContexts[i]=e):this.removeCryptoContext(t)},getMasterToken:function(){var t,e,i=null;for(t in this.masterTokens)e=this.masterTokens[t],i&&!e.isNewerThan(i)||(i=e);return i},getNonReplayableId:function(t){var e;if(t=t.serialNumber,(e=this.nonReplayableIds[t]!==I?this.nonReplayableIds[t]:0)<0||R<e)throw new N("Non-replayable ID "+e+" is outside the valid range.");return e=e==R?0:e+1,this.nonReplayableIds[t]=e},getCryptoContext:function(t){return this.cryptoContexts[t.uniqueKey()]},removeCryptoContext:function(e){var t,i,n,r=e.uniqueKey();if(this.masterTokens[r]){for(i in t=e.serialNumber,this.masterTokens)if(!(n=this.masterTokens[i]).equals(e)&&n.serialNumber==t)return delete this.masterTokens[r],void delete this.cryptoContexts[r];Object.keys(this.userIdTokens).forEach(function(t){(t=this.userIdTokens[t]).isBoundTo(e)&&this.removeUserIdToken(t)},this);try{this.removeServiceTokens(null,e,null)}catch(t){if(t instanceof P)throw new N("Unexpected exception while removing master token bound service tokens.",t);throw t}delete this.nonReplayableIds[t],delete this.masterTokens[r],delete this.cryptoContexts[r]}},clearCryptoContexts:function(){[this.masterTokens,this.cryptoContexts,this.nonReplayableIds,this.userIdTokens,this.uitServiceTokens,this.mtServiceTokens].forEach(function(t){for(var e in t)delete t[e]},this)},addUserIdToken:function(t,e){var i,n=!1;for(i in this.masterTokens)if(e.isBoundTo(this.masterTokens[i])){n=!0;break}if(!n)throw new P(J.USERIDTOKEN_MASTERTOKEN_NOT_FOUND,"uit mtserialnumber "+e.mtSerialNumber);this.userIdTokens[t]=e},getUserIdToken:function(t){return this.userIdTokens[t]},removeUserIdToken:function(e){var t,i,n=null;for(t in this.masterTokens)if(i=this.masterTokens[t],e.isBoundTo(i)){n=i;break}Object.keys(this.userIdTokens).forEach(function(t){if(this.userIdTokens[t].equals(e)){try{this.removeServiceTokens(null,n,e)}catch(t){if(t instanceof P)throw new N("Unexpected exception while removing user ID token bound service tokens.",t);throw t}delete this.userIdTokens[t]}},this)},clearUserIdTokens:function(){for(var t in this.userIdTokens)this.removeUserIdToken(this.userIdTokens[t])},addServiceTokens:function(t){t.forEach(function(t){var e,i;if(t.isMasterTokenBound()){for(i in e=!1,this.masterTokens)if(t.isBoundTo(this.masterTokens[i])){e=!0;break}if(!e)throw new P(J.SERVICETOKEN_MASTERTOKEN_NOT_FOUND,"st mtserialnumber "+t.mtSerialNumber)}if(t.isUserIdTokenBound()){for(var n in e=!1,this.userIdTokens)if(t.isBoundTo(this.userIdTokens[n])){e=!0;break}if(!e)throw new P(J.SERVICETOKEN_USERIDTOKEN_NOT_FOUND,"st uitserialnumber "+t.uitSerialNumber)}},this),t.forEach(function(t){var e;t.isUnbound()?this.unboundServiceTokens[t.uniqueKey()]=t:(t.isMasterTokenBound()&&((e=(e=this.mtServiceTokens[t.mtSerialNumber])||{})[t.uniqueKey()]=t,this.mtServiceTokens[t.mtSerialNumber]=e),t.isUserIdTokenBound()&&((e=(e=this.uitServiceTokens[t.uitSerialNumber])?e:{})[t.uniqueKey()]=t,this.uitServiceTokens[t.uitSerialNumber]=e))},this)},getServiceTokens:function(t,e){var i,n,r,a;if(e){if(!t)throw new P(J.USERIDTOKEN_MASTERTOKEN_NULL);if(!e.isBoundTo(t))throw new P(J.USERIDTOKEN_MASTERTOKEN_MISMATCH,"uit mtserialnumber "+e.mtSerialNumber+"; mt "+t.serialNumber)}for(n in i={},this.unboundServiceTokens)i[(r=this.unboundServiceTokens[n]).uniqueKey()]=r;if(t&&(n=this.mtServiceTokens[t.serialNumber]))for(var o in n)(r=n[o]).isUserIdTokenBound()||(i[o]=r);if(e=e&&this.uitServiceTokens[e.serialNumber])for(var s in e)(o=e[s]).isBoundTo(t)&&(i[s]=o);for(a in t=[],i)t.push(i[a]);return t},removeServiceTokens:function(i,t,e){var n,r;if(e&&t&&!e.isBoundTo(t))throw new P(J.USERIDTOKEN_MASTERTOKEN_MISMATCH,"uit mtserialnumber "+e.mtSerialNumber+"; mt "+t.serialNumber);!i||t||e||Object.keys(this.unboundServiceTokens).forEach(function(t){this.unboundServiceTokens[t].name==i&&delete this.unboundServiceTokens[t]},this),t&&!e&&(n=this.mtServiceTokens[t.serialNumber])&&(Object.keys(n).forEach(function(t){var e=n[t];i&&e.name!=i||delete n[t]},this),this.mtServiceTokens[t.serialNumber]=n),e&&(r=this.uitServiceTokens[e.serialNumber])&&((t=Object.keys(r)).forEach(function(t){var e=r[t];i&&e.name!=i||delete r[t]},this),this.uitServiceTokens[e.serialNumber]=r)},clearServiceTokens:function(){[this.unboundServiceTokens,this.mtServiceTokens,this.uitServiceTokens].forEach(function(t){for(var e in t)delete t[e]},this)}}),gn.extend({init:function t(){t.base.call(this),Object.defineProperties(this,{_contextMap:{value:{}}})},addCryptoContext:function(t,e){e&&t&&t.length&&(t=m(t),this._contextMap[t]=e)},getCryptoContext:function(t){return t&&t.length?(t=m(t),this._contextMap[t]||null):null},removeCryptoContext:function(t){t&&t.length&&(t=m(t),delete this._contextMap[t])}}),ee.extend({init:function t(e,i,n,r){t.base.call(this,e),Object.defineProperties(this,{_kde:{value:i},_kdh:{value:n},_kdw:{value:r}})},getCryptoContext:function(t,e){if(!(e instanceof $t))throw new N("Incorrect authentication data type "+JSON.stringify(e)+".");if(e.identity!=this.localIdentity)throw new ft(J.ENTITY_NOT_FOUND,"mgk "+e.identity);return new zt(t,this.localIdentity,this._kde,this._kdh,this._kdw)}}),re.extend({init:function t(e,i,n,r){t.base.call(this,e),Object.defineProperties(this,{_kpe:{value:i},_kph:{value:n},_kpw:{value:r}})},getCryptoContext:function(t,e){if(!(e instanceof ie))throw new N("Incorrect authentication data type "+JSON.stringify(e)+".");if(e.identity!=this.localIdentity)throw new ft(J.ENTITY_NOT_FOUND,"psk "+e.identity);return new zt(t,this.localIdentity,this._kpe,this._kph,this._kpw)}}),Ri=xi.extend({init:function t(e,i,n,r,a,o){t.base.call(this),this._log=e,this._esn=i,this._keyRequestData=n,this._createKeyRequestData=r,this._systemKeyName=a,this._systemKeyWrapFormat=o},setCryptoContext:function t(e,i,n){var r=this;r._log.trace("Adding MasterToken",{SequenceNumber:e.sequenceNumber,SerialNumber:e.serialNumber,Expiration:e.expiration.getTime()}),t.base.call(this,e,i),!n&&(e=r._createKeyRequestData)&&(r._log.trace("Generating new keyx request data"),e().then(function(t){r._keyRequestData=t},function(t){r._log.error("Unable to generate new keyx request data",""+t)}))},addUserIdToken:function t(e,i){this._log.trace("Adding UserIdToken",{UserId:e,SerialNumber:i.serialNumber,MTSerialNumber:i.mtSerialNumber,Expiration:i.expiration.getTime()}),t.base.call(this,e,i)},addServiceTokens:function t(e){t.base.call(this,e.filter(function(t){return!Pi[t.name]}))},getUserIdTokenKeys:function(){var t,e=[];for(t in this.userIdTokens)e.push(t);return e},rekeyUserIdToken:function(t,e){this.userIdTokens[t]&&(this.userIdTokens[e]=this.userIdTokens[t],delete this.userIdTokens[t])},getKeyRequestData:function(){return this._keyRequestData},getStoreState:function(t){var a=this;V(t,function(){var r=a.getMasterToken();r?a.getKeysForStore(r,{result:function(n){V(t,function(){var e,i=a.userIdTokens,t=Object.keys(i).map(function(t){var e=i[t];return{userId:t,userIdTokenJSON:i[t].toJSON(),serviceTokenJSONList:a.getServiceTokens(r,e).map($n)}});return n.esn=a._esn,n.masterTokenJSON=r.toJSON(),n.userList=t,(e=a._keyRequestData.storeData)&&Object.keys(e).forEach(function(t){n[t]=e[t]}),n})},timeout:t.timeout,error:t.error}):t.result(null)})},getKeysForStore:function(e,i){var n=this;V(i,function(){var t=n.getCryptoContext(e);if(!(t={encryptionKey:t.encryptionKey,hmacKey:t.hmacKey}).encryptionKey||!t.hmacKey)throw new P(J.INTERNAL_EXCEPTION,"Unable to get CryptoContext keys");if(!n._systemKeyWrapFormat)return t;n.wrapKeysWithSystemKey(t,i)})},wrapKeysWithSystemKey:function(a,o){var s=this;tr(this._systemKeyName,{result:function(t){V(o,function(){var e=a.encryptionKey,i=a.hmacKey,n=e[Ci],r=i[Ci];if(n&&r)return{wrappedEncryptionKey:n,wrappedHmacKey:r};Promise.resolve().then(function(){return Promise.all([k.wrapKey(s._systemKeyWrapFormat,e,t,t.algorithm),k.wrapKey(s._systemKeyWrapFormat,i,t,t.algorithm)])}).then(function(t){n=m(t[0]),e[Ci]=n,r=m(t[1]),i[Ci]=r,o.result({wrappedEncryptionKey:n,wrappedHmacKey:r})}).catch(function(t){o.error(new P(J.INTERNAL_EXCEPTION,"Error wrapping key with SYSTEM key",t))})})},timeout:o.timeout,error:o.error})},unwrapKeysWithSystemKey:function(n,r){var a=this;tr(this._systemKeyName,{result:function(i){V(r,function(){var t=O(n.wrappedEncryptionKey),e=O(n.wrappedHmacKey);Promise.resolve().then(function(){return Promise.all([k.unwrapKey(a._systemKeyWrapFormat,t,i,i.algorithm,vt,!1,Et),k.unwrapKey(a._systemKeyWrapFormat,e,i,i.algorithm,yt,!1,St)])}).then(function(t){var e=t[0];t=t[1],e[Ci]=n.wrappedEncryptionKey,t[Ci]=n.wrappedHmacKey,r.result({encryptionKey:e,hmacKey:t})}).catch(function(t){r.error(new P(J.INTERNAL_EXCEPTION,"Error unwrapping with SYSTEM key",t))})})},timeout:r.timeout,error:r.error})},loadStoreState:function(e,h,i,n){var f,r,a,o,s,u,c;function l(c,t){var e;try{e=i.userList.slice()}catch(t){}e?function s(){var u=e.shift();u?pi(h,u.userIdTokenJSON,c,{result:function(t){try{f.addUserIdToken(u.userId,t);var i,n,r=c,a=t,e=u.serviceTokenJSONList,o={result:s,timeout:s,error:s};try{i=e.slice()}catch(t){}i?(n=f.getCryptoContext(r),function e(){var t=i.shift();t?mi(h,t,r,a,n,{result:function(t){f.addServiceTokens([t]),e()},timeout:function(){e()},error:function(){e()}}):o.result()}()):o.result()}catch(t){s()}},timeout:s,error:s}):t.result()}():t.result()}function d(){var t;!o&&s&&u&&c&&(o=!0,t=new Wt(h,s,e.esn,{rawKey:u},{rawKey:c}),f.setCryptoContext(s,t,!0),a.result(s))}function p(t,e){r.error(t,e&&""+e),o||(o=!0,a.error())}r=(f=this)._log,i.esn!=f._esn?(r.error("Esn mismatch, starting fresh"),n.error()):(a={result:function(t){l(t,n)},timeout:n.timeout,error:n.error},i.masterTokenJSON?(li(h,i.masterTokenJSON,{result:function(t){s=t,d()},timeout:function(){p("Timeout parsing MasterToken")},error:function(t){p("Error parsing MasterToken",t)}}),f._systemKeyWrapFormat?f.unwrapKeysWithSystemKey(i,{result:function(t){u=t.encryptionKey,c=t.hmacKey,d()},timeout:function(){p("Timeout unwrapping keys")},error:function(t){p("Error unwrapping keys",t)}}):Promise.resolve().then(function(){return k.encrypt({name:vt.name,iv:new Uint8Array(16)},i.encryptionKey,new Uint8Array(1))}).then(function(t){u=i.encryptionKey}).catch(function(t){p("Error loading encryptionKey")}).then(function(){return k.sign(yt,i.hmacKey,new Uint8Array(1))}).then(function(t){c=i.hmacKey,d()}).catch(function(t){p("Error loading hmacKey")})):p("Persisted store is corrupt"))}}),Pi={"streaming.servicetokens.movie":!0,"streaming.servicetokens.license":!0},Ci="$netflix$msl$wrapsys",Ni=Nn.extend({init:function(t,e,i,n,r,a){var o=new Ue([nt.LZW]),s=new fe;s.addPublicKey(e,i),n[L.RSA]=new se(s),(e={})[vi.EMAIL_PASSWORD]=new Ti,e[vi.NETFLIXID]=new Ei,t={_mslCryptoContext:{value:new Qt,writable:!0},_capabilities:{value:o},_entityAuthData:{value:r,writable:!0},_entityAuthFactories:{value:n},_userAuthFactories:{value:e},_keyExchangeFactories:{value:a},_store:{value:t}},Object.defineProperties(this,t)},getTime:function(){return Date.now()},getRandom:function(){return new ct},isPeerToPeer:function(){return!1},getMessageCapabilities:function(){return this._capabilities},getEntityAuthenticationData:function(t,e){e.result(this._entityAuthData)},getMslCryptoContext:function(){return this._mslCryptoContext},getEntityAuthenticationFactory:function(t){return this._entityAuthFactories[t]},getUserAuthenticationFactory:function(t){return this._userAuthFactories[t]},getTokenFactory:function(){return null},getKeyExchangeFactory:function(e){return this._keyExchangeFactories.filter(function(t){return t.scheme==e})[0]},getKeyExchangeFactories:function(){return this._keyExchangeFactories},getMslStore:function(){return this._store}}),Mi=si.extend({init:function(t,e,i,n){this._log=t,this._mslContext=e,this._mslRequest=i,this._keyRequestData=n},getCryptoContexts:function(){return{}},isEncrypted:function(){return!!this._mslRequest.encrypted},isNonReplayable:function(){return!!this._mslRequest.nonReplayable},isRequestingTokens:function(){return!0},getUserId:function(){return this._mslRequest.profileGuid||this._mslRequest.userId||null},getUserAuthData:function(t,e,i,n){var r=this._mslRequest;V(n,function(){return t||!r.shouldSendUserAuthData?null:r.email?new ki(r.email,r.password):r.useNetflixUserAuthData||i&&r.sendUserAuthIfRequired?new Ai:null})},getCustomer:function(){return null},getKeyRequestData:function(t){t.result(this._mslRequest.allowTokenRefresh?[this._keyRequestData]:[])},updateServiceTokens:function(i,t,n){var r,e,a,o=this._log,s=(this._mslRequest.serviceTokens||[]).slice(),u=this._mslContext;t=u.getMslStore(),r=i.builder.getMasterToken(),e=this.getUserId(),a=t.getUserIdToken(e),function e(){var t=s.shift();if(t)try{t instanceof bi?(i.addPrimaryServiceToken(t),e()):mi(u,t,r,a,null,{result:function(t){try{i.addPrimaryServiceToken(t)}catch(t){o.warn("Exception adding service token",""+t)}e()},timeout:function(){o.warn("Timeout parsing service token"),e()},error:function(t){o.warn("Error parsing service token",""+t),e()}})}catch(t){o.warn("Exception processing service token",""+t),e()}else n.result(!0)}()},write:function(e,i,n){var r=G(this._mslRequest.body);e.write(r,0,r.length,i,{result:function(t){t!=r.length?n.error(new b("Not all data was written to output.")):e.flush(i,{result:function(){n.result(!0)},timeout:function(){n.timeout()},error:function(t){n.error(t)}})},timeout:function(){n.timeout()},error:function(t){n.error(t)}})},getDebugContext:function(){return this._dc||(this._dc=new Di(this._log,this._mslRequest)),this._dc}}),Di=i.extend({init:function(t,e){this._log=t,this._mslRequest=e},sentHeader:function(t){this._log.trace("Sent MSL header",er(this._mslRequest,t),t.serviceTokens&&t.serviceTokens.map(ir).join("\n"))},receivedHeader:function(t){var e=er(this._mslRequest,t),i=t.errorCode;i?this._log.warn("Received MSL error header",e,{errorCode:i,errorMessage:t.errorMessage,internalCode:t.internalCode}):this._log.trace("Received MSL header",e)}}),Li={JWK_RSA:function(t){return r=t,e={name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-1"}},a=xe.JWK_RSA,o=!r.systemKeyWrapFormat,Promise.resolve().then(function(){var t=(e=r.storeState)&&e.keyxPublicKey,e=e&&e.keyxPrivateKey;return o&&t&&e?n(t,e):i()}).then(function(t){var e={};return e[L.NONE]=new he,{entityAuthFactories:e,entityAuthData:new ue(r.esn),keyExchangeFactories:[new Oe],keyRequestData:t,createKeyRequestData:o?i:I}});function i(){return Promise.resolve().then(function(){return k.generateKey(e,!1,["wrapKey","unwrapKey"])}).then(function(t){return n(t.publicKey,t.privateKey)})}function n(i,n){return Promise.all([new Promise(function(t,e){Rt(i,{result:t,error:function(t){e(new P(J.INTERNAL_EXCEPTION,"Unable to create keyx public key",t))}})}),new Promise(function(t,e){jt(n,{result:t,error:function(t){e(new P(J.INTERNAL_EXCEPTION,"Unable to create keyx private key",t))}})})]).then(function(t){return t=new Re("rsaKeypairId",a,t[0],t[1]),o&&(t.storeData={keyxPublicKey:i,keyxPrivateKey:n}),t})}var r,e,a,o}},bt.netflix=bt.netflix||{},bt.netflix.msl={createMslClient:function(n,e){var r,a,o,s=n.log,u=n.notifyMilestone||function(){};Promise.resolve().then(function(){if(l&&l.generateKey&&l.importKey&&l.unwrapKey)return S=l.generateKey({name:"AES-CBC",length:128},!0,Et).then?gt.V2014_02:gt.LEGACY,u("mslisik"),k.importKey("spki",n.serverIdentityKeyData,_t,!1,["verify"]);throw new P(J.INTERNAL_EXCEPTION,"No WebCrypto")}).then(function(i){return new Promise(function(t,e){Rt(i,{result:t,error:function(){e(new P(J.KEY_IMPORT_ERROR,"Unable to create server identity verification key"))}})})}).then(function(t){if(r=t,t=Li.JWK_RSA)return u("mslcc"),t(n);throw new P(J.INTERNAL_EXCEPTION,"Invalid authenticationType: JWK_RSA")}).then(function(t){var i;if(a=new Ri(s,n.esn,t.keyRequestData,t.createKeyRequestData,n.authenticationKeyNames.s,n.systemKeyWrapFormat),o=new Ni(a,n.serverIdentityId,r,t.entityAuthFactories,t.entityAuthData,t.keyExchangeFactories),i=n.storeState)return u("mslss"),s.info("Loading store state"),new Promise(function(t,e){a.loadStoreState(n,o,i,{result:t,timeout:t,error:t})});s.info("No store state, starting fresh")}).then(function(){var t=new ui;u("msldone"),e.result(new nr(s,t,o,a,n.ErrorSubCodes))}).catch(function(t){e.error(t)})},IHttpLocation:be,MslIoException:b},function(){var u,nt,r,e,i,a,o,s,c,l,b,m;function y(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function _(t,e){var i,n;if(e)t:{i=nt,t=t.split(".");for(var r=0;r<t.length-1;r++){if(!((n=t[r])in i))break t;i=i[n]}(e=e(r=i[t=t[t.length-1]]))!=r&&null!=e&&u(i,t,{configurable:!0,writable:!0,value:e})}}function E(t){return(t={next:t})[Symbol.iterator]=function(){return this},t}function rt(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:y(t)}}function L(t){for(var e,i=[];!(e=t.next()).done;)i.push(e.value);return i}function J(t){return t instanceof Array?t:L(rt(t))}function S(t,e){var i;if(t.prototype=r(e.prototype),t.prototype.constructor=t,s)s(t,e);else for(var n in e)"prototype"!=n&&(Object.defineProperties?(i=Object.getOwnPropertyDescriptor(e,n))&&Object.defineProperty(t,n,i):t[n]=e[n]);t.Ksc=e.prototype}function k(){this.iZ=!1,this.HG=null,this.qga=void 0,this.PF=1,this.q4a=this.OGb=0,this.RV=null}function I(t){if(t.iZ)throw new TypeError("Generator is already running");t.iZ=!0}function F(t,e){return t.PF=2,{value:e}}function O(t){this.Wf=new k,this.U7b=t}function x(e,t,i,n){var r,a;try{if(!((r=t.call(e.Wf.HG,i))instanceof Object))throw new TypeError("Iterator result "+r+" is not an object");if(!r.done)return e.Wf.iZ=!1,r;a=r.value}catch(t){return e.Wf.HG=null,e.Wf.x1(t),R(e)}return e.Wf.HG=null,n.call(e.Wf,a),R(e)}function R(e){for(var t;e.Wf.PF;)try{if(t=e.U7b(e.Wf))return e.Wf.iZ=!1,{value:t.value,done:!1}}catch(t){e.Wf.qga=void 0,e.Wf.x1(t)}if(e.Wf.iZ=!1,e.Wf.RV){if(t=e.Wf.RV,e.Wf.RV=null,t.MYb)throw t.qP;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function P(n){this.next=function(t){return n.f_(t)},this.throw=function(t){return n.x1(t)},this.return=function(t){return t=t,I((e=n).Wf),(i=e.Wf.HG)?x(e,"return"in i?i.return:function(t){return{value:t,done:!0}},t,e.Wf.return):(e.Wf.return(t),R(e));var e,i},this[Symbol.iterator]=function(){return this}}function at(t,e){return e=new P(new O(e)),s&&t.prototype&&s(e,t.prototype),e}function C(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function j(e,i){var n,r,t;return e instanceof String&&(e+=""),n=0,r=!1,(t={next:function(){var t;return!r&&n<e.length?(t=n++,{value:i(t,e[t]),done:!1}):{done:r=!0,value:void 0}}})[Symbol.iterator]=function(){return t},t}function N(t,e,i){for(var n,r=(t=t instanceof String?String(t):t).length,a=0;a<r;a++)if(n=t[a],e.call(i,n,a,t))return{hva:a,rz:n};return{hva:-1,rz:void 0}}function M(t,e,i){if(null==t)throw new TypeError("The 'this' value for String.prototype."+i+" must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype."+i+" must not be a regular expression");return t+""}function U(){}if(u="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,i){return t==Array.prototype||t==Object.prototype||(t[e]=i.value),t},nt=function(t){var e;t=["object"==typeof globalThis&&globalThis,t,"object"==typeof bt&&bt,"object"==typeof self&&self,"object"==typeof global&&global];for(var i=0;i<t.length;++i)if((e=t[i])&&e.Math==Math)return e;throw Error("Cannot find global object")}(this),_("Symbol",function(t){var i;function n(t,e){this.Pnb=t,u(this,"description",{configurable:!0,writable:!0,value:e})}return t||(n.prototype.toString=function(){return this.Pnb},i=0,function t(e){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new n("jscomp_symbol_"+(e||"")+"_"+i++,e)})}),_("Symbol.iterator",function(t){var e;if(t)return t;t=Symbol("Symbol.iterator");for(var i="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<i.length;n++)"function"==typeof(e=nt[i[n]])&&"function"!=typeof e.prototype[t]&&u(e.prototype,t,{configurable:!0,writable:!0,value:function(){return E(y(this))}});return t}),r="function"==typeof Object.create?Object.create:function(t){function e(){}return e.prototype=t,new e},e="undefined"!=typeof Reflect&&Reflect.construct?(Reflect.construct(U,[],function(){}),new U instanceof U?Reflect.construct:(l=Reflect.construct,function(t,e,i){return t=l(t,e),i&&Reflect.setPrototypeOf(t,i.prototype),t})):function(t,e,i){return i=r((i=void 0===i?t:i).prototype||Object.prototype),Function.prototype.apply.call(t,i,e)||i},"function"==typeof Object.setPrototypeOf)i=Object.setPrototypeOf;else{t:{a={a:!0},o={};try{o.__proto__=a,i=o.a;break t}catch(t){}i=!1}i=i?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}function H(t){var e;return m[t]?m[t].exports:(e=m[t]={hva:t,WZb:!1,exports:{}},b[t].call(e.exports,e,e.exports,H),e.WZb=!0,e.exports)}s=i,k.prototype.f_=function(t){this.qga=t},k.prototype.x1=function(t){this.RV={qP:t,MYb:!0},this.PF=this.OGb||this.q4a},k.prototype.return=function(t){this.RV={return:t},this.PF=this.q4a},O.prototype.f_=function(t){return I(this.Wf),this.Wf.HG?x(this,this.Wf.HG.next,t,this.Wf.f_):(this.Wf.f_(t),R(this))},O.prototype.x1=function(t){return I(this.Wf),this.Wf.HG?x(this,this.Wf.HG.throw,t,this.Wf.f_):(this.Wf.x1(t),R(this))},_("Reflect",function(t){return t||{}}),_("Reflect.construct",function(){return e}),_("Reflect.setPrototypeOf",function(t){return t||(s?function(t,e){try{return s(t,e),!0}catch(t){return!1}}:null)}),_("Object.setPrototypeOf",function(t){return t||s}),c="function"==typeof Object.assign?Object.assign:function(t,e){for(var i,n=1;n<arguments.length;n++)if(i=arguments[n])for(var r in i)C(i,r)&&(t[r]=i[r]);return t},_("Object.assign",function(t){return t||c}),_("Promise",function(t){var i,r;function o(t){var e;this.mS=0,this.F0=void 0,this.cR=[],this.l$a=!1,e=this.Aqa();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function e(){this.nE=null}function s(e){return e instanceof o?e:new o(function(t){t(e)})}return t||(e.prototype.nZa=function(t){var e;null==this.nE&&(this.nE=[],(e=this).oZa(function(){e.HPb()})),this.nE.push(t)},i=nt.setTimeout,e.prototype.oZa=function(t){i(t,0)},e.prototype.HPb=function(){for(var t,e;this.nE&&this.nE.length;){t=this.nE,this.nE=[];for(var i=0;i<t.length;++i){e=t[i],t[i]=null;try{e()}catch(t){this.CEb(t)}}}this.nE=null},e.prototype.CEb=function(t){this.oZa(function(){throw t})},o.prototype.Aqa=function(){var i,n;function t(e){return function(t){n||(n=!0,e.call(i,t))}}return n=!1,{resolve:t((i=this).q$b),reject:t(this.TAa)}},o.prototype.q$b=function(t){var e;if(t===this)this.TAa(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof o)this.Bbc(t);else{switch(typeof t){case"object":e=null!=t;break;case"function":e=!0;break;default:e=!1}e?this.p$b(t):this.j5a(t)}},o.prototype.p$b=function(t){var e=void 0;try{e=t.then}catch(t){return void this.TAa(t)}"function"==typeof e?this.Cbc(e,t):this.j5a(t)},o.prototype.TAa=function(t){this.cjb(2,t)},o.prototype.j5a=function(t){this.cjb(1,t)},o.prototype.cjb=function(t,e){if(0!=this.mS)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.mS);this.mS=t,this.F0=e,2===this.mS&&this.$$b(),this.IPb()},o.prototype.$$b=function(){var e=this;i(function(){var t;e.o3b()&&void 0!==(t=nt.console)&&t.error(e.F0)},1)},o.prototype.o3b=function(){var t,e,i;return!this.l$a&&(t=nt.CustomEvent,e=nt.Event,void 0===(i=nt.dispatchEvent)||("function"==typeof t?t=new t("unhandledrejection",{cancelable:!0}):"function"==typeof e?t=new e("unhandledrejection",{cancelable:!0}):(t=nt.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,t),t.promise=this,t.reason=this.F0,i(t)))},o.prototype.IPb=function(){if(null!=this.cR){for(var t=0;t<this.cR.length;++t)r.nZa(this.cR[t]);this.cR=null}},r=new e,o.prototype.Bbc=function(t){var e=this.Aqa();t.h8(e.resolve,e.reject)},o.prototype.Cbc=function(t,e){var i=this.Aqa();try{t.call(e,i.resolve,i.reject)}catch(t){i.reject(t)}},o.prototype.then=function(t,e){var i,n,r;function a(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(t){n(t)}}:t}return r=new o(function(t,e){i=t,n=e}),this.h8(a(t,i),a(e,n)),r},o.prototype.catch=function(t){return this.then(void 0,t)},o.prototype.h8=function(t,e){var i;function n(){switch(i.mS){case 1:t(i.F0);break;case 2:e(i.F0);break;default:throw Error("Unexpected state: "+i.mS)}}null==(i=this).cR?r.nZa(n):this.cR.push(n),this.l$a=!0},o.resolve=s,o.reject=function(i){return new o(function(t,e){e(i)})},o.race=function(r){return new o(function(t,e){for(var i=rt(r),n=i.next();!n.done;n=i.next())s(n.value).h8(t,e)})},o.all=function(t){var e=rt(t),a=e.next();return a.done?s([]):new o(function(i,t){var n,r;for(n=[],r=0;n.push(void 0),r++,s(a.value).h8(function(e){return function(t){n[e]=t,0==--r&&i(n)}}(n.length-1),t),!(a=e.next()).done;);})},o)}),_("Array.prototype.keys",function(t){return t||function(){return j(this,function(t){return t})}}),_("Array.prototype.find",function(t){return t||function(t,e){return N(this,t,e).rz}}),_("Object.is",function(t){return t||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}}),_("Array.prototype.includes",function(t){return t||function(t,e){var i,n=this,r=(n=n instanceof String?String(n):n).length;for((e=e||0)<0&&(e=Math.max(e+r,0));e<r;e++)if((i=n[e])===t||Object.is(i,t))return!0;return!1}}),_("String.prototype.includes",function(t){return t||function(t,e){return-1!==M(this,t,"includes").indexOf(t,e||0)}}),_("Math.tanh",function(t){return t||function(t){var e;return 0===(t=Number(t))?t:(e=(1-(e=Math.exp(-2*Math.abs(t))))/(1+e),t<0?-e:e)}}),_("Number.isNaN",function(t){return t||function(t){return"number"==typeof t&&isNaN(t)}}),_("WeakMap",function(n){var i,r;function t(t){if(this.QY=(r+=Math.random()+1).toString(),t){t=rt(t);for(var e;!(e=t.next()).done;)e=e.value,this.set(e[0],e[1])}}function a(){}function o(t){var e=typeof t;return"object"==e&&null!==t||"function"==e}function s(t){var e;C(t,i)||(e=new a,u(t,i,{value:e}))}function e(t){var e=Object[t];e&&(Object[t]=function(t){return t instanceof a?t:(Object.isExtensible(t)&&s(t),e(t))})}return function(){var t,e,i;if(n&&Object.seal)try{return(t=Object.seal({}),e=Object.seal({}),2!=(i=new n([[t,2],[e,3]])).get(t)||3!=i.get(e))?void 0:(i.delete(t),i.set(e,4),!i.has(t)&&4==i.get(e))}catch(t){return}}()?n:(i="$jscomp_hidden_"+Math.random(),e("freeze"),e("preventExtensions"),e("seal"),r=0,t.prototype.set=function(t,e){if(!o(t))throw Error("Invalid WeakMap key");if(s(t),C(t,i))return t[i][this.QY]=e,this;throw Error("WeakMap key fail: "+t)},t.prototype.get=function(t){return o(t)&&C(t,i)?t[i][this.QY]:void 0},t.prototype.has=function(t){return o(t)&&C(t,i)&&C(t[i],this.QY)},t.prototype.delete=function(t){return!!(o(t)&&C(t,i)&&C(t[i],this.QY))&&delete t[i][this.QY]},t)}),_("Map",function(r){var a,o;function i(){var t={};return t.Eq=t.next=t.head=t}function t(t,e){var i=t.JB;return E(function(){if(i){for(;i.head!=t.JB;)i=i.Eq;if(i.next!=i.head)return i=i.next,{done:!1,value:e(i)};i=null}return{done:!0,value:void 0}})}function n(t,e){var i,n,r=e&&typeof e;if("object"==r||"function"==r?a.has(e)?r=a.get(e):(r=""+ ++o,a.set(e,r)):r="p_"+e,(i=t.kB[r])&&C(t.kB,r))for(t=0;t<i.length;t++)if(n=i[t],e!=e&&n.key!=n.key||e===n.key)return{id:r,list:i,index:t,entry:n};return{id:r,list:i,index:-1,entry:void 0}}function e(t){if(this.kB={},this.JB=i(),this.size=0,t){t=rt(t);for(var e;!(e=t.next()).done;)e=e.value,this.set(e[0],e[1])}}return function(){var t,e,i,n;if(r&&"function"==typeof r&&r.prototype.entries&&"function"==typeof Object.seal)try{return(t=Object.seal({x:4}),"s"!=(e=new r(rt([[t,"s"]]))).get(t)||1!=e.size||e.get({x:4})||e.set({x:4},"t")!=e||2!=e.size)?void 0:!(n=(i=e.entries()).next()).done&&n.value[0]==t&&"s"==n.value[1]&&!((n=i.next()).done||4!=n.value[0].x||"t"!=n.value[1]||!i.next().done)}catch(t){return}}()?r:(a=new WeakMap,e.prototype.set=function(t,e){var i;return(i=n(this,t=0===t?0:t)).list||(i.list=this.kB[i.id]=[]),i.entry?i.entry.value=e:(i.entry={next:this.JB,Eq:this.JB.Eq,head:this.JB,key:t,value:e},i.list.push(i.entry),this.JB.Eq.next=i.entry,this.JB.Eq=i.entry,this.size++),this},e.prototype.delete=function(t){return!(!(t=n(this,t)).entry||!t.list)&&(t.list.splice(t.index,1),t.list.length||delete this.kB[t.id],t.entry.Eq.next=t.entry.next,t.entry.next.Eq=t.entry.Eq,t.entry.head=null,this.size--,!0)},e.prototype.clear=function(){this.kB={},this.JB=this.JB.Eq=i(),this.size=0},e.prototype.has=function(t){return!!n(this,t).entry},e.prototype.get=function(t){return(t=n(this,t).entry)&&t.value},e.prototype.entries=function(){return t(this,function(t){return[t.key,t.value]})},e.prototype.keys=function(){return t(this,function(t){return t.key})},e.prototype.values=function(){return t(this,function(t){return t.value})},e.prototype.forEach=function(t,e){for(var i,n=this.entries();!(i=n.next()).done;)i=i.value,t.call(e,i[1],i[0],this)},e.prototype[Symbol.iterator]=e.prototype.entries,o=0,e)}),_("Set",function(r){function t(t){if(this.By=new Map,t){t=rt(t);for(var e;!(e=t.next()).done;)this.add(e.value)}this.size=this.By.size}return function(){var t,e,i,n;if(r&&"function"==typeof r&&r.prototype.entries&&"function"==typeof Object.seal)try{return(t=Object.seal({x:4}),(e=new r(rt([t]))).has(t)&&1==e.size&&e.add(t)==e&&1==e.size&&e.add({x:4})==e&&2==e.size)?!(n=(i=e.entries()).next()).done&&n.value[0]==t&&n.value[1]==t&&(!(n=i.next()).done&&n.value[0]!=t&&4==n.value[0].x&&n.value[1]==n.value[0]&&i.next().done):void 0}catch(t){return}}()?r:(t.prototype.add=function(t){return this.By.set(t=0===t?0:t,t),this.size=this.By.size,this},t.prototype.delete=function(t){return t=this.By.delete(t),this.size=this.By.size,t},t.prototype.clear=function(){this.By.clear(),this.size=0},t.prototype.has=function(t){return this.By.has(t)},t.prototype.entries=function(){return this.By.entries()},t.prototype.keys=t.prototype.values=function(){return this.By.values()},t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(e,i){var n=this;this.By.forEach(function(t){return e.call(i,t,t,n)})},t)}),_("Array.prototype.entries",function(t){return t||function(){return j(this,function(t,e){return[t,e]})}}),_("Object.entries",function(t){return t||function(t){var e,i=[];for(e in t)C(t,e)&&i.push([e,t[e]]);return i}}),_("Object.getOwnPropertySymbols",function(t){return t||function(){return[]}}),_("Reflect.apply",function(t){var n;return t||(n=Function.prototype.apply,function(t,e,i){return n.call(t,e,i)})}),_("Number.isFinite",function(t){return t||function(t){return"number"==typeof t&&(!isNaN(t)&&1/0!==t&&-1/0!==t)}}),_("String.prototype.endsWith",function(t){return t||function(t,e){var i=M(this,t,"endsWith");t+="",void 0===e&&(e=i.length),e=Math.max(0,Math.min(0|e,i.length));for(var n=t.length;0<n&&0<e;)if(i[--e]!=t[--n])return!1;return n<=0}}),_("String.prototype.repeat",function(t){return t||function(t){var e=M(this,null,"repeat");if(t<0||1342177279<t)throw new RangeError("Invalid count value");t|=0;for(var i="";t;)1&t&&(i+=e),(t>>>=1)&&(e+=e);return i}}),_("Array.prototype.values",function(t){return t||function(){return j(this,function(t,e){return e})}}),_("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991}),_("Array.prototype.findIndex",function(t){return t||function(t,e){return N(this,t,e).hva}}),_("Array.from",function(t){return t||function(t,e,i){var n,r;if(e=null!=e?e:function(t){return t},n=[],"function"==typeof(r="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator])){t=r.call(t);for(var a=0;!(r=t.next()).done;)n.push(e.call(i,r.value,a++))}else for(r=t.length,a=0;a<r;a++)n.push(e.call(i,t[a],a));return n}}),_("Object.values",function(t){return t||function(t){var e,i=[];for(e in t)C(t,e)&&i.push(t[e]);return i}}),_("String.prototype.startsWith",function(t){return t||function(t,e){var i=M(this,t,"startsWith"),n=i.length,r=(t+="").length;e=Math.max(0,Math.min(0|e,i.length));for(var a=0;a<r&&e<n;)if(i[e++]!=t[a++])return!1;return r<=a}}),_("Promise.prototype.finally",function(t){return t||function(e){return this.then(function(t){return Promise.resolve(e()).then(function(){return t})},function(t){return Promise.resolve(e()).then(function(){throw t})})}}),_("String.fromCodePoint",function(t){return t||function(t){for(var e,i="",n=0;n<arguments.length;n++){if((e=Number(arguments[n]))<0||1114111<e||e!==Math.floor(e))throw new RangeError("invalid_code_point "+e);e<=65535?i+=String.fromCharCode(e):(e-=65536,i=(i+=String.fromCharCode(e>>>10&1023|55296))+String.fromCharCode(1023&e|56320))}return i}}),_("Number.parseInt",function(t){return t||parseInt}),b=[function(t,e,i){var n,r;function a(){return(a=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)}function o(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)}function s(t,e){function i(){this.constructor=t}if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function u(t,e){var i,n,r={};for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(n=0,i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(r[i[n]]=t[i[n]]);return r}function c(t,e,i,n){var r,a=arguments.length,o=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.fq)o=Reflect.fq(t,e,i,n);else for(var s=t.length-1;0<=s;s--)(r=t[s])&&(o=(a<3?r(o):3<a?r(e,i,o):r(e,i))||o);return 3<a&&o&&Object.defineProperty(e,i,o),o}function h(i,n){return function(t,e){n(t,e,i)}}function f(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.Ec)return Reflect.Ec(t,e)}function l(t,o,s,u){return new(s=s||Promise)(function(i,e){function n(t){try{a(u.next(t))}catch(t){e(t)}}function r(t){try{a(u.throw(t))}catch(t){e(t)}}function a(t){var e;t.done?i(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(n,r)}a((u=u.apply(t,o||[])).next())})}function d(n,r){var a,o,s,u,c;function t(i){return function(t){var e=[i,t];if(o)throw new TypeError("Generator is already executing.");for(;a=c&&e[c=0]?0:a;)try{if(o=1,s&&(u=2&e[0]?s.return:e[0]?s.throw||((u=s.return)&&u.call(s),0):s.next)&&!(u=u.call(s,e[1])).done)return u;switch(s=0,(e=u?[2&e[0],u.value]:e)[0]){case 0:case 1:u=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,s=e[1],e=[0];continue;case 7:e=a.il.pop(),a.Ih.pop();continue;default:if(!(u=0<(u=a.Ih).length&&u[u.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!u||e[1]>u[0]&&e[1]<u[3]))a.label=e[1];else if(6===e[0]&&a.label<u[1])a.label=u[1],u=e;else{if(!(u&&a.label<u[2])){u[2]&&a.il.pop(),a.Ih.pop();continue}a.label=u[2],a.il.push(e)}}e=r.call(n,a)}catch(t){e=[6,t],s=0}finally{o=u=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}return a={label:0,ib:function(){if(1&u[0])throw u[1];return u[1]},Ih:[],il:[]},c={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c}function p(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||n(e,t,i)}function b(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return{value:(t=t&&n>=t.length?void 0:t)&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(t,e){var i,n,r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;t=r.call(t),n=[];try{for(;(void 0===e||0<e--)&&!(i=t.next()).done;)n.push(i.value)}catch(t){var a={error:t}}finally{try{i&&!i.done&&(r=t.return)&&r.call(t)}finally{if(a)throw a.error}}return n}function m(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(g(arguments[e]));return t}function v(){for(var t,e=0,i=0,n=arguments.length;i<n;i++)e+=arguments[i].length;for(e=Array(e),i=t=0;i<n;i++)for(var r=arguments[i],a=0,o=r.length;a<o;a++,t++)e[t]=r[a];return e}function y(t,e,i){if(i||2===arguments.length)for(var n,r=0,a=e.length;r<a;r++)!n&&r in e||((n=n||Array.prototype.slice.call(e,0,r))[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))}function w(t){return this instanceof w?(this.rz=t,this):new w(t)}function A(t,e,i){var r,a,o;function n(n){r[n]&&(a[n]=function(i){return new Promise(function(t,e){1<o.push([n,i,t,e])||s(n,i)})})}function s(t,e){var i;try{(i=r[t](e)).value instanceof w?Promise.resolve(i.value.rz).then(u,c):h(o[0][2],i)}catch(t){h(o[0][3],t)}}function u(t){s("next",t)}function c(t){s("throw",t)}function h(t,e){t(e),o.shift(),o.length&&s(o[0][0],o[0][1])}if(Symbol.asyncIterator)return r=i.apply(t,e||[]),o=[],a={},n("next"),n("throw"),n("return"),a[Symbol.asyncIterator]=function(){return this},a;throw new TypeError("Symbol.asyncIterator is not defined.")}function _(n){var t,r;function e(e,i){t[e]=n[e]?function(t){return(r=!r)?{value:w(n[e](t)),done:"return"===e}:i?i(t):t}:i}return t={},e("next"),e("throw",function(t){throw t}),e("return"),t[Symbol.iterator]=function(){return this},t}function E(o){var t,e;function i(a){e[a]=o[a]&&function(r){return new Promise(function(t,e){var i,n;r=o[a](r),i=t,t=e,n=r.done,e=r.value,Promise.resolve(e).then(function(t){i({value:t,done:n})},t)})}}if(Symbol.asyncIterator)return(t=o[Symbol.asyncIterator])?t.call(o):(o=b(o),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);throw new TypeError("Symbol.asyncIterator is not defined.")}function k(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function S(t){var e;if(t&&t.__esModule)return t;if(e={},null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&n(e,t,i);return r(e,t),e}function T(t){return t&&t.__esModule?t:{default:t}}function I(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t===e&&n:e.has(t))return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t);throw new TypeError("Cannot read private member from an object whose class did not declare it")}function O(t,e,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t===e&&r:e.has(t))return"a"===n?r.call(t,i):r?r.value=i:e.set(t,i),i;throw new TypeError("Cannot write private member to an object whose class did not declare it")}function x(t,e){if(null===e||"object"!=typeof e&&"function"!=typeof e)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof t?e===t:t.has(e)}i.r(e),i.d(e,"__extends",function(){return s}),i.d(e,"__assign",function(){return a}),i.d(e,"__rest",function(){return u}),i.d(e,"__decorate",function(){return c}),i.d(e,"__param",function(){return h}),i.d(e,"__metadata",function(){return f}),i.d(e,"__awaiter",function(){return l}),i.d(e,"__generator",function(){return d}),i.d(e,"__createBinding",function(){return n}),i.d(e,"__exportStar",function(){return p}),i.d(e,"__values",function(){return b}),i.d(e,"__read",function(){return g}),i.d(e,"__spread",function(){return m}),i.d(e,"__spreadArrays",function(){return v}),i.d(e,"__spreadArray",function(){return y}),i.d(e,"__await",function(){return w}),i.d(e,"__asyncGenerator",function(){return A}),i.d(e,"__asyncDelegator",function(){return _}),i.d(e,"__asyncValues",function(){return E}),i.d(e,"__makeTemplateObject",function(){return k}),i.d(e,"__importStar",function(){return S}),i.d(e,"__importDefault",function(){return T}),i.d(e,"__classPrivateFieldGet",function(){return I}),i.d(e,"__classPrivateFieldSet",function(){return O}),i.d(e,"__classPrivateFieldIn",function(){return x}),n=Object.create?function(t,e,i,n){var r;void 0===n&&(n=i),(r=Object.getOwnPropertyDescriptor(e,i))&&("get"in r?e.__esModule:!r.writable&&!r.configurable)||(r={enumerable:!0,get(){return e[i]}}),Object.defineProperty(t,n,r)}:function(t,e,i,n){t[n=void 0===n?i:n]=e[i]},r=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}},function(t,e,i){_esm(e),t=i(41),e.Dkc=t,t=i(642),e.M2=t.M2,t=i(79),e.Bu=t.Bu,e.Ak=t.Ak,e.cA=t.cA,t=i(658),e.kGa=t.kGa,e.Ad=t.Ad,t=i(659),e.$=t.$,t=i(660),e.Ekb=t.Ekb,t=i(661),e.Mcb=t.Mcb,t=i(327),e.l=t.l,e.Bia=t.Bia,t=i(662),e.optional=t.optional,t=i(663),e.vp=t.vp,t=i(664),e.jK=t.jK,t=i(665),e.t1=t.t1,t=i(666),e.mfb=t.mfb,t=i(325),e.bja=t.bja,t=i(110),e.id=t.id,t=i(94),e.fq=t.fq,t=i(330),e.Blb=t.Blb,e.Fkb=t.Fkb,e.Ncb=t.Ncb,e.Klb=t.Klb,t=i(142),e.LP=t.LP,i=i(667),e.Icb=i.Icb},function(t,e,i){var n,r,a,o;function s(){return null!==o&&o.apply(this,arguments)||this}_esm(e),e.assert=void 0,n=i(0),r=i(129),o=Error,n.__extends(s,o),a=s,e.assert=function(t,e){var i;if(!t)throw i=new a(e||"Assertion failed"),r.Mm.H.error("Assertion failed",{value:t,message:e,stack:i.stack}),i}},function(t,e){_esm(e),e.default={TY:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e])},reset(){}}},function(t,e){var r,a,i;_esm(e),e.Oz=e.yJa=e.xJa=e.Qha=e.wJa=e.Pha=e.t4=e.g4=e.vJa=e.Y=e.Z=void 0,(i=r=e.Z||(e.Z={}))[i.mo=7001]="UNKNOWN",i[i.GTa=7002]="UNHANDLED_EXCEPTION",i[i.rsb=7003]="INIT_COMPONENT_LOG_TO_REMOTE",i[i.Orb=7004]="HLS_NOT_SUPPORTED",i[i.mia=7010]="INIT_ASYNCCOMPONENT",i[i.wsb=7011]="INIT_HTTP",i[i.psb=7014]="INIT_BADMOVIEID",i[i.oLa=7020]="INIT_PLAYBACK_LOCK",i[i.pLa=7022]="INIT_SESSION_LOCK",i[i.xsb=7029]="INIT_POSTAUTHORIZE",i[i.nLa=7031]="INIT_HEADER_MEDIA",i[i.ysb=7034]="INIT_TIMEDTEXT_TRACK",i[i.Ynb=7037]="ASE_SESSION_ERROR",i[i.Xnb=7038]="ASE_SEEK_THREW",i[i.Znb=7039]="ASE_SKIPPED_THREW",i[i.ssb=7041]="INIT_CORE_OBJECTS1",i[i.tsb=7042]="INIT_CORE_OBJECTS2",i[i.usb=7043]="INIT_CORE_OBJECTS3",i[i.hLa=7053]="INIT_COMPONENT_STORAGE",i[i.iLa=7054]="INIT_COMPONENT_STORAGELOCK",i[i.eLa=7058]="INIT_COMPONENT_MAINTHREADMONITOR",i[i.nia=7059]="INIT_COMPONENT_DEVICE",i[i.fLa=7063]="INIT_COMPONENT_MSL",i[i.dLa=7066]="INIT_COMPONENT_LOGBLOBBATCHER",i[i.sD=7067]="INIT_COMPONENT_PERSISTEDPLAYDATA",i[i.mLa=7083]="INIT_COMPONENT_WEBCRYPTO",i[i.cLa=7086]="INIT_COMPONENT_IDB_VIEWER_TOOL",i[i.aLa=7088]="INIT_COMPONENT_BATTERY_MANAGER",i[i.$Ka=7089]="INIT_COMPONENT_ASE",i[i.hM=7091]="INIT_COMPONENT_DRM_CACHE",i[i.qsb=7092]="INIT_COMPONENT_DRM",i[i.bLa=7094]="INIT_COMPONENT_FTL",i[i.gLa=7095]="INIT_COMPONENT_PREPARE_MODEL",i[i.jLa=7096]="INIT_COMPONENT_VIDEO_SESSION_EDGE",i[i.kLa=7097]="INIT_COMPONENT_VIDEO_SESSION_MDX",i[i.lLa=7098]="INIT_COMPONENT_VIDEO_SESSION_TEST",i[i.mM=7111]="MANIFEST",i[i.$sb=7114]="MANIFEST_MISTMATCH",i[i.IMa=7117]="MANIFEST_VERIFY",i[i.Jvb=7120]="START",i[i.jM=7121]="LICENSE",i[i.ika=7122]="RELEASE",i[i.Lvb=7123]="STOP",i[i.xia=7125]="KEEPALIVE",i[i.zub=7131]="PING",i[i.trb=7134]="ENGAGE",i[i.Wsb=7137]="LOGBLOB",i[i.Elc=7138]="PAUSE",i[i.Vlc=7139]="RESUME",i[i.SRa=7140]="SPLICE",i[i.Dob=7142]="BIND",i[i.Eob=7144]="BIND_DEVICE",i[i.Irb=7145]="GENERATE_SCREENSHOTS",i[i.dFa=7146]="AD_EVENT",i[i.Dub=7202]="PLAY_INIT_EXCEPTION",i[i.tja=7332]="PLAY_MSE_EME_KEY_STATUS_CHANGE_EXPIRED",i[i.Jub=7333]="PLAY_MSE_EME_KEY_STATUS_CHANGE_INTERNAL_ERROR",i[i.KOa=7334]="PLAY_MSE_EME_KEY_STATUS_CHANGE_OUTPUT_NOT_ALLOWED",i[i.Kub=7335]="PLAY_MSE_EME_KEY_STATUS_EXCEPTION",i[i.uja=7336]="PLAY_MSE_EME_KEY_STATUS_CHANGE_OUTPUT_RESTRICTED",i[i.Iub=7338]="PLAY_MSE_EME_KEY_MAPPING_EXCEPTION",i[i.OOa=7351]="PLAY_MSE_NOTSUPPORTED",i[i.JOa=7353]="PLAY_MSE_DECODER_TIMEOUT",i[i.vja=7355]="PLAY_MSE_SOURCEADD",i[i.IOa=7356]="PLAY_MSE_CREATE_MEDIAKEYS",i[i.hU=7357]="PLAY_MSE_GENERATEKEYREQUEST",i[i.NOa=7361]="PLAY_MSE_EVENT_ERROR",i[i.vM=7362]="PLAY_MSE_SETMEDIAKEYS",i[i.Ms=7363]="PLAY_MSE_EVENT_KEYERROR",i[i.Mub=7364]="PLAY_MSE_EME_SESSION_CLOSE",i[i.Nub=7365]="PLAY_MSE_GETCURRENTTIME",i[i.Oub=7367]="PLAY_MSE_SETCURRENTTIME",i[i.Pub=7371]="PLAY_MSE_SOURCEAPPEND",i[i.Tub=7375]="PLAY_MSE_UNEXPECTED_SEEKING",i[i.Sub=7376]="PLAY_MSE_UNEXPECTED_SEEKED",i[i.Rub=7377]="PLAY_MSE_UNEXPECTED_REWIND",i[i.Qub=7381]="PLAY_MSE_SOURCEBUFFER_ERROR",i[i.POa=7382]="PLAY_MSE_SOURCEBUFFER_CHANGETYPE",i[i.Eub=7391]="PLAY_MSE_CREATE_MEDIASOURCE",i[i.Fub=7392]="PLAY_MSE_CREATE_MEDIASOURCE_OBJECTURL",i[i.Gub=7393]="PLAY_MSE_CREATE_MEDIASOURCE_OPEN",i[i.LOa=7394]="PLAY_MSE_EME_MISSING_DRMHEADER",i[i.Lub=7395]="PLAY_MSE_EME_MISSING_PSSH",i[i.MOa=7397]="PLAY_MSE_EME_NO_PRK_SUPPORT",i[i.Hub=7398]="PLAY_MSE_DURATIONCHANGE_ERROR",i[i.G4=7399]="PLAY_MSE_SET_LICENSE_ERROR",i[i.gJa=7400]="EXTERNAL",i[i.F4=7500]="PAUSE_TIMEOUT",i[i.i4=7502]="INACTIVITY_TIMEOUT",i[i.hob=7510]="AUTHORIZATION_EXPIRED",i[i.krb=7700]="EME_INVALID_KEYSYSTEM",i[i.TIa=7701]="EME_CREATE_MEDIAKEYS_SYSTEMACCESS_FAILED",i[i.zT=7702]="EME_CREATE_MEDIAKEYS_FAILED",i[i.h3=7703]="EME_GENERATEREQUEST_FAILED",i[i.$Ia=7704]="EME_UPDATE_FAILED",i[i.YIa=7705]="EME_KEYSESSION_ERROR",i[i.XIa=7706]="EME_KEYMESSAGE_EMPTY",i[i.orb=7707]="EME_REMOVE_FAILED",i[i.mrb=7708]="EME_LOAD_FAILED",i[i.grb=7709]="EME_CREATE_SESSION_FAILED",i[i.Lha=7710]="EME_LDL_RENEWAL_ERROR",i[i.VIa=7711]="EME_INVALID_INITDATA_DATA",i[i.WIa=7712]="EME_INVALID_LICENSE_DATA",i[i.lrb=7713]="EME_LDL_KEYSSION_ALREADY_CLOSED",i[i.SIa=7716]="EME_CLOSE_FAILED",i[i.Mha=7717]="EME_SESSION_CLOSED_UNEXPECTEDLY",i[i.qrb=7718]="EME_SET_SERVER_CERTIFICATE",i[i.Aub=7800]="PLAYDATA_STORE_FAILURE",i[i.eT=7900]="BRANCH_PLAY_FAILURE",i[i.fT=7901]="BRANCH_QUEUE_FAILURE",i[i.uGa=7902]="BRANCH_UPDATE_NEXT_SEGMENT_WEIGHTS_FAILURE",i[i.Lob=7903]="BRANCH_CHOICE_MAP_MISSING",i[i.lub=8100]="PBO_EVENTLOOKUP_FAILURE",(i=a=e.Y||(e.Y={}))[i.mo=1001]="UNKNOWN",i[i.Om=1003]="EXCEPTION",i[i.Bsb=1004]="INVALID_DI",i[i.bob=1011]="ASYNCLOAD_EXCEPTION",i[i.cob=1013]="ASYNCLOAD_TIMEOUT",i[i.fic=1015]="ASYNCLOAD_BADCONFIG",i[i.$nb=1016]="ASYNCLOAD_COMPONENT_DUPLICATE",i[i.aob=1017]="ASYNCLOAD_COMPONENT_MISSING",i[i.KT=1101]="HTTP_UNKNOWN",i[i.jia=1102]="HTTP_XHR",i[i.HT=1103]="HTTP_PROTOCOL",i[i.GT=1104]="HTTP_OFFLINE",i[i.JT=1105]="HTTP_TIMEOUT",i[i.VG=1106]="HTTP_READTIMEOUT",i[i.qD=1107]="HTTP_ABORT",i[i.BKa=1108]="HTTP_PARSE",i[i.xKa=1110]="HTTP_BAD_URL",i[i.IT=1111]="HTTP_PROXY",i[i.Uia=1203]="MSE_AUDIO",i[i.Via=1204]="MSE_VIDEO",i[i.ltb=1250]="MSE_MEDIA_ERR_BASE",i[i.Fkc=1251]="MSE_MEDIA_ERR_ABORTED",i[i.Ikc=1252]="MSE_MEDIA_ERR_NETWORK",i[i.Gkc=1253]="MSE_MEDIA_ERR_DECODE",i[i.Jkc=1254]="MSE_MEDIA_ERR_SRC_NOT_SUPPORTED",i[i.Hkc=1255]="MSE_MEDIA_ERR_ENCRYPTED",i[i.Du=1260]="EME_MEDIA_KEYERR_BASE",i[i.Bjc=1261]="EME_MEDIA_KEYERR_UNKNOWN",i[i.wjc=1262]="EME_MEDIA_KEYERR_CLIENT",i[i.Ajc=1263]="EME_MEDIA_KEYERR_SERVICE",i[i.zjc=1264]="EME_MEDIA_KEYERR_OUTPUT",i[i.yjc=1265]="EME_MEDIA_KEYERR_HARDWARECHANGE",i[i.xjc=1266]="EME_MEDIA_KEYERR_DOMAIN",i[i.Cjc=1269]="EME_MEDIA_UNAVAILABLE_CDM",i[i.jrb=1270]="EME_INTERNAL_ERROR",i[i.frb=1271]="EME_CLOSED_BY_APPLICATION",i[i.nrb=1272]="EME_RELEASE_ACKNOWLEDGED",i[i.Kha=1273]="EME_HARDWARE_CONTEXT_RESET",i[i.prb=1274]="EME_RESOURCE_EVICTED",i[i.irb=1280]="EME_ERROR_NODRMSESSSION",i[i.hrb=1281]="EME_ERROR_NODRMREQUESTS",i[i.tjc=1282]="EME_ERROR_INDIV_FAILED",i[i.ujc=1283]="EME_ERROR_UNSUPPORTED_MESSAGETYPE",i[i.rrb=1284]="EME_TIMEOUT_MESSAGE",i[i.Djc=1285]="EME_TIMEOUT_KEYCHANGE",i[i.ZIa=1286]="EME_UNDEFINED_DATA",i[i.cM=1287]="EME_INVALID_STATE",i[i.vjc=1288]="EME_LDL_DOES_NOT_SUPPORT_PRK",i[i.UIa=1289]="EME_EMPTY_DATA",i[i.AT=1290]="EME_TIMEOUT",i[i.Xkc=1303]="NCCP_METHOD_NOT_SUPPORTED",i[i.$kc=1305]="NCCP_PARSEXML",i[i.Wub=1309]="PROCESS_EXCEPTION",i[i.Zkc=1311]="NCCP_NETFLIXID_MISSING",i[i.alc=1312]="NCCP_SECURENETFLIXID_MISSING",i[i.Ukc=1313]="NCCP_HMAC_MISSING",i[i.Tkc=1315]="NCCP_HMAC_MISMATCH",i[i.Skc=1317]="NCCP_HMAC_FAILED",i[i.Rkc=1321]="NCCP_CLIENTTIME_MISSING",i[i.Qkc=1323]="NCCP_CLIENTTIME_MISMATCH",i[i.TJa=1331]="GENERIC",i[i.Dtb=1333]="NCCP_PROTOCOL_INVALIDDEVICECREDENTIALS",i[i.Etb=1337]="NCCP_PROTOCOL_REDIRECT_LOOP",i[i.blc=1341]="NCCP_TRANSACTION",i[i.Vkc=1343]="NCCP_INVALID_DRMTYPE",i[i.Wkc=1344]="NCCP_INVALID_LICENCE_RESPONSE",i[i.Ykc=1345]="NCCP_MISSING_PAYLOAD",i[i.Jlc=1346]="PROTOCOL_NOT_INITIALIZED",i[i.Ilc=1347]="PROTOCOL_MISSING_FIELD",i[i.Hlc=1348]="PROTOCOL_MISMATCHED_PROFILEGUID",i[i.FD=1402]="STORAGE_NODATA",i[i.emc=1403]="STORAGE_EXCEPTION",i[i.mmc=1405]="STORAGE_QUOTA_NOT_GRANTED",i[i.nmc=1407]="STORAGE_QUOTA_TO_SMALL",i[i.VRa=1411]="STORAGE_LOAD_ERROR",i[i.Nvb=1412]="STORAGE_LOAD_TIMEOUT",i[i.WRa=1414]="STORAGE_SAVE_ERROR",i[i.Qvb=1415]="STORAGE_SAVE_TIMEOUT",i[i.rka=1417]="STORAGE_DELETE_ERROR",i[i.URa=1418]="STORAGE_DELETE_TIMEOUT",i[i.lmc=1421]="STORAGE_FS_REQUESTFILESYSTEM",i[i.imc=1423]="STORAGE_FS_GETDIRECTORY",i[i.kmc=1425]="STORAGE_FS_READENTRIES",i[i.fmc=1427]="STORAGE_FS_FILEREAD",i[i.hmc=1429]="STORAGE_FS_FILEWRITE",i[i.gmc=1431]="STORAGE_FS_FILEREMOVE",i[i.jmc=1432]="STORAGE_FS_PARSEJSON",i[i.Pvb=1451]="STORAGE_NO_LOCALSTORAGE",i[i.Ovb=1453]="STORAGE_LOCALSTORAGE_ACCESS_EXCEPTION",i[i.klc=1501]="NTBA_UNKNOWN",i[i.jlc=1502]="NTBA_EXCEPTION",i[i.flc=1504]="NTBA_CRYPTO_KEY",i[i.hlc=1506]="NTBA_CRYPTO_OPERATION",i[i.glc=1508]="NTBA_CRYPTO_KEYEXCHANGE",i[i.ilc=1515]="NTBA_DECRYPT_UNSUPPORTED",i[i.UHa=1553]="DEVICE_NO_ESN",i[i.mqb=1555]="DEVICE_ERROR_GETTING_ESN",i[i.ekc=1701]="FORMAT_UNKNOWN",i[i.Brb=1713]="FORMAT_XML",i[i.fkc=1715]="FORMAT_XML_CONTENT",i[i.ckc=1721]="FORMAT_BASE64",i[i.dkc=1723]="FORMAT_DFXP",i[i.bsb=1801]="INDEXDB_OPEN_EXCEPTION",i[i.YKa=1802]="INDEXDB_NOT_SUPPORTED",i[i.$rb=1803]="INDEXDB_OPEN_ERROR",i[i.ZKa=1804]="INDEXDB_OPEN_NULL",i[i.Zrb=1805]="INDEXDB_OPEN_BLOCKED",i[i.csb=1807]="INDEXDB_OPEN_TIMEOUT",i[i.Yrb=1808]="INDEXDB_INVALID_STORE_STATE",i[i.j4=1809]="INDEXDB_ACCESS_EXCEPTION",i[i.vtb=1901]="MSL_UNKNOWN",i[i.otb=1911]="MSL_INIT_NO_MSL",i[i.RMa=1913]="MSL_INIT_ERROR",i[i.ptb=1915]="MSL_INIT_NO_WEBCRYPTO",i[i.mtb=1931]="MSL_ERROR",i[i.utb=1933]="MSL_REQUEST_TIMEOUT",i[i.ttb=1934]="MSL_READ_TIMEOUT",i[i.ntb=1935]="MSL_ERROR_HEADER",i[i.Kkc=1936]="MSL_ERROR_ENVELOPE",i[i.Lkc=1937]="MSL_ERROR_MISSING_PAYLOAD",i[i.QMa=1957]="MSL_ERROR_REAUTH",i[i.Xka=2103]="WEBCRYPTO_MISSING",i[i.Smc=2105]="WEBCRYPTOKEYS_MISSING",i[i.twb=2107]="WEBCRYPTO_IFRAME_LOAD_ERROR",i[i.Oic=2200]="CACHEDDATA_PARSEJSON",i[i.SGa=2201]="CACHEDDATA_UNSUPPORTED_VERSION",i[i.Pic=2202]="CACHEDDATA_UPGRADE_FAILED",i[i.lD=2203]="CACHEDDATA_INVALID_FORMAT",i[i.cic=3e3]="ACCOUNT_CHANGE_INFLIGHT",i[i.dic=3001]="ACCOUNT_INVALID",i[i.kjc=3100]="DOWNLOADED_MANIFEST_UNAVAILABLE",i[i.jjc=3101]="DOWNLOADED_MANIFEST_PARSE_EXCEPTION",i[i.hjc=3200]="DOWNLOADED_LICENSE_UNAVAILABLE",i[i.ijc=3201]="DOWNLOADED_LICENSE_UNUSEABLE",i[i.gjc=3202]="DOWNLOADED_LICENSE_EXCEPTION",i[i.omc=3300]="STORAGE_VA_LOAD_ERROR",i[i.pmc=3301]="STORAGE_VA_LOAD_TIMEOUT",i[i.smc=3302]="STORAGE_VA_SAVE_ERROR",i[i.tmc=3303]="STORAGE_VA_SAVE_TIMEOUT",i[i.qmc=3304]="STORAGE_VA_REMOVE_ERROR",i[i.rmc=3305]="STORAGE_VA_REMOVE_TIMEOUT",i[i.qja=3077]="PBO_DEVICE_EOL_WARNING",i[i.AOa=3078]="PBO_DEVICE_EOL_FINAL",i[i.DOa=3100]="PBO_DEVICE_RESET",i[i.COa=3101]="PBO_DEVICE_RELOAD",i[i.BOa=3102]="PBO_DEVICE_EXIT",i[i.xub=5003]="PBO_VIEWABLE_OUT_OF_AVAILABILITY_WINDOW",i[i.bub=5005]="PBO_ACCOUNT_ON_HOLD",i[i.kub=5006]="PBO_CONCURRENT_STREAM_QUOTA_EXCEEDED",i[i.EOa=5007]="PBO_INCORRECT_PIN",i[i.uub=5008]="PBO_MOBILE_ONLY",i[i.yub=5009]="PBO_VIEWABLE_RESTRICTED_BY_PROFILE",i[i.cub=5010]="PBO_ADS_UNAVAILABLE_VIEWABLE",i[i.fub=5011]="PBO_ADS_UNSUPPORTED_DEVICE",i[i.dub=5012]="PBO_ADS_UNSUPPORTED_CLIENT_APP_VERSION",i[i.eub=5013]="PBO_ADS_UNSUPPORTED_COUNTRY",i[i.gub=5014]="PBO_ADS_VPN_USE_DETECTED",i[i.pub=5033]="PBO_INSUFFICIENT_MATURITY_LEVEL",i[i.iub=5059]="PBO_BLACKLISTED_IP",i[i.hub=5070]="PBO_AGE_VERIFICATION_REQUIRED",i[i.jub=5080]="PBO_CHOICE_MAP_ERROR",i[i.vub=5090]="PBO_RESTRICTED_TO_TESTERS",i[i.rub=5091]="PBO_MALFORMED_REQUEST",i[i.qub=5092]="PBO_INVALID_SERVICE_VERSION",i[i.tub=5093]="PBO_MDX_INVALID_CTICKET",i[i.oub=5094]="PBO_FREE_PREVIEW_ENDED",i[i.wub=5095]="PBO_STREAMING_LOCATION_DISALLOWED",i[i.nub=5096]="PBO_EXTRA_MEMBER_STREAM_HOLD",i[i.mub=5097]="PBO_EXTRA_MEMBER_REMOVED_STREAM_HOLD",i[i.Vpb=5100]="DECODER_TIMEOUT_BUFFERING",i[i.Xpb=5101]="DECODER_TIMEOUT_PRESENTING",i[i.Wpb=5102]="DECODER_TIMEOUT_PLAYING",i[i.Nqb=5200]="DOWNLOADER_IO_ERROR",i[i.tGa=5300]="BRANCHING_SEGMENT_NOTFOUND",i[i.Hob=5301]="BRANCHING_PRESENTER_UNINITIALIZED",i[i.sic=5302]="BRANCHING_SEGMENT_STREAMING_NOT_STARTED",i[i.Zga=5303]="BRANCHING_ASE_UNINITIALIZED",i[i.oic=5304]="BRANCHING_ASE_FAILURE",i[i.pic=5305]="BRANCHING_MOMENT_FAILURE",i[i.Fob=5306]="BRANCHING_CURRENT_SEGMENT_UNINITIALIZED",i[i.ric=5307]="BRANCHING_SEGMENT_LASTPTS_UNINIITALIZED",i[i.Iob=5308]="BRANCHING_SEEK_THREW",i[i.qic=5309]="BRANCHING_PLAY_NOTENOUGHNEXTSEGMENTS",i[i.Gob=5310]="BRANCHING_PLAY_TIMEDOUT",i[i.Job=5311]="BRANCHING_SEGMENT_ALREADYQUEUED",i[i.Kob=5312]="BRANCHING_UPDATE_NEXT_SEGMENT_WEIGHTS_THREW",i[i.Rvb=5500]="STUDIO_MUXED_MANIFEST",i[i.Pia=5600]="MANIFEST_HYDRATION_FAILURE",i[i.iob=5700]="AUXILIARY_MANIFEST_ERROR_RETRIEVING_PARENT_MANIFEST",i[i.job=5701]="AUXILIARY_MANIFEST_NO_MATCHING_HEACC_AUDIO_STREAM_FOUND",(i=e.vJa||(e.vJa={}))[i.Dic=5003]="BR_VIEWABLE_OUT_OF_AVAILABILITY_WINDOW",i[i.tic=5005]="BR_ACCOUNT_ON_HOLD",i[i.xic=5006]="BR_CONCURRENT_STREAM_QUOTA_EXCEEDED",i[i.Aic=5033]="BR_INSUFFICIENT_MATURITY_LEVEL",i[i.wic=5059]="BR_BLACKLISTED_IP",i[i.uic=5070]="BR_AGE_VERIFICATION_REQUIRED",i[i.Bic=2204]="BR_PLAYBACK_CONTEXT_CREATION",i[i.yic=2205]="BR_DRM_LICENSE_AQUISITION",i[i.Cic=2206]="BR_PLAYBACK_SERVICE_ERROR",i[i.zic=2207]="BR_ENDPOINT_ERROR",i[i.vic=2208]="BR_AUTHORIZATION_ERROR",e.g4={Sob:"400",Nmc:"401",XOa:"413"},e.t4={akc:1,Fmc:2,Gjc:3,Lmc:4,vkc:5,Fjc:6,Qka:7,Ijc:8,Tlc:9,bmc:10},e.Pha=function(t,e,i,n){return t==r.F4||t==r.i4||t==r.tja&&432e5<=i||t==r.Mha&&e===a.Kha&&0<Number(n)},e.wJa=function(t){return 1100<=t&&t<=1199},e.Qha=function(t,e){return 1<=t&&t<=9?e+t:e},e.xJa=function(t){return e.Qha(t,a.ltb)},e.yJa=function(t){return e.Qha(t,a.Du)},e.Oz=function(t){var e={},i=t.errorExternalCode||t.Of,n=t.errorDetails||t.Sb;return e.ErrorSubCode=t.errorSubCode||t.Ba||a.mo,i&&(e.ErrorExternalCode=i),n&&(e.ErrorDetails=n),e}},function(t,e,i){var n;function r(){return n.xU.apply(this,arguments)||this}function a(t){return new n.Hu(t,e.pa)}_esm(e),e.Ka=e.MKa=e.dja=e.Gp=e.pa=e.eH=e.timestamp=e.ZWb=e.pca=e.Fh=e.vc=e.qfb=e.M1b=e.gwb=void 0,S(r,(n=i(331)).xU),e.gwb=r,e.M1b=function(t){return new n.Hu(t,e.eH)},e.qfb=function(t){return new n.Hu(t*e.Gp.Sg,e.eH)},e.vc=a,e.Fh=function(t){return new n.Hu(t,e.Gp)},e.pca=function(t){return new n.Hu(t,e.dja)},e.ZWb=function(t){return new n.Hu(t,e.MKa)},e.timestamp=a,e.eH=new r(1,"s"),e.pa=new r(1e3,"ms",e.eH),e.Gp=new r(1e3*e.pa.Sg,"s",e.eH),e.dja=new r(60*e.Gp.Sg,"min",e.eH),e.MKa=new r(60*e.dja.Sg,"hr",e.eH),e.Ka=a(0)},function(t,e,i){_esm(e),i(0).__exportStar(i(395),e)},function(t,e){_esm(e),e.yT=e.ob=e.Iia=e.Ck=void 0,(t=e.Ck||(e.Ck={}))[t.zrb=0]="FATAL",t[t.Jf=1]="ERROR",t[t.Wka=2]="WARN",t[t.lia=3]="INFO",t[t.$Sa=4]="TRACE",t[t.S=5]="DEBUG",e.Iia="LogFieldBuilderFactorySymbol",e.ob="LoggerFactorySymbol",e.yT={}},function(t,e,i){var n;_esm(e),e.kU=e.UJa=void 0,(t=i(0)).__exportStar(i(400),e),t.__exportStar(i(105),e),t.__exportStar(i(19),e),t.__exportStar(i(920),e),t.__exportStar(i(921),e),t.__exportStar(i(922),e),t.__exportStar(i(923),e),t.__exportStar(i(924),e),t.__exportStar(i(925),e),t.__exportStar(i(926),e),t.__exportStar(i(410),e),n=t.__importDefault(i(927)),e.UJa=n.default,i=t.__importDefault(i(412)),e.kU=i.default},function(t,r,e){var n,i,a,o,s,u,c,h;_esm(r),r.Fa=r.zQa=r.WX=r.aj=r.dk=r.log=r.$f=r.DP=r.KZa=r.ht=r.RA=r.qc=r.oFb=r.Hoa=r.mFb=r.nFb=r.$j=r.MS=r.R1=r.hi=r.zc=r.Da=void 0,n=e(212),t=e(7),i=e(26),a=e(76),o=e(81),s=e(31),u=e(15),c=e(147),h=e(29),e=e(46),r.Da=n.mc.get(h.Lh),r.zc=n.mc.get(e.Wj),r.hi=n.mc.get(a.Pu),r.R1=r.hi.encode.bind(r.hi),r.MS=r.hi.decode.bind(r.hi),r.$j=n.mc.get(o.Ez),r.nFb=r.$j.encode.bind(r.$j),r.mFb=r.$j.decode.bind(r.$j),r.Hoa=r.$j.jJ.bind(r.$j),r.oFb=r.$j.mlb.bind(r.$j),r.qc=n.mc.get(s.Ji),r.RA=function(t){return t=u.vg(t)?r.MS(t):t,r.qc.encode(t)},r.ht=r.qc.decode.bind(r.qc),r.KZa=function(t){return r.R1(r.ht(t))},r.DP=function(){return n.mc.get(i.Jz)},r.$f=n.mc.get(t.ob),r.log=r.$f.jb("General"),r.dk=function(t,e){return r.$f.jb(t,void 0,e)},r.aj=function(t,e,i){return r.$f.jb(e,t,i)},r.WX=function(t,e,i,n){return r.$f.jb(t,void 0,n,e,i)},r.zQa=function(t,e,i){return n.mc.get(c.lU)(t,e,i).F1()},r.Fa=n.mc},function(t,e){_esm(e),e.S=!1},function(t){var a={Oa:function(t){return"number"==typeof t},fk:function(t){return"object"==typeof t},vg:function(t){return"string"==typeof t},sa:function(t){return void 0===t},gqc:function(t){return"boolean"==typeof t},gd:function(t){return"function"==typeof t},xb:function(t){return null===t},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},isFinite:function(t){return isFinite(t)&&!isNaN(parseFloat(t))},has:function(t,e){return null!=t&&Object.prototype.hasOwnProperty.call(t,e)},p5b:function(t){var e,i=[];if(!a.fk(t))throw new TypeError("Object.pairs called on non-object");for(e in t)t.hasOwnProperty(e)&&i.push([e,t[e]]);return i}};a.Nf=a.forEach=function(t,e,i){if(null==t)return t;if(t.length===+t.length)for(var n=0,r=t.length;n<r;n++)e.call(i,t[n],n,t);else for(n in t)a.has(t,n)&&e.call(i,t[n],n,t);return t},t.exports=a},function(t,e,i){(e=i(117)).tMb=0,t.exports={EventEmitter:e,Kf:i(916)}},function(t,e){_esm(e),e.io={Znc:"casttv",Ipa:"chrome",eoc:"chromecast",Ir:"edge",g3a:"edgeoss",F4a:"firefox",$pc:"ie",opera:"opera",Lhb:"safari",Jkb:"tesla"},e.Ep={w7:"android",G9a:"ios",Y_a:"chromeos",qab:"linux",Tab:"mac",ZEa:"windows"},e.f4={tIb:"computer",phone:"phone",Qdc:"tablet"},e.Oc="ConfigSymbol"},function(t,e){_esm(e),e.Vwa=e.localStorage=e.NXb=e.indexedDB=e.XNa=e.Fr=e.yD=e.xD=e.URL=e.y4=e.Htb=e.fNa=e.eNa=e.r4=e.XT=e.Uz=e.Gu=e.Dp=e.xtb=e.oM=e.TSa=e.aIa=e.Ytb=e.pop=e.forEach=e.filter=e.reduce=e.every=e.slice=e.map=e.sort=e.OA=e.Gtb=e.Nh=e.gx=e.YNa=e.hx=e.x4=e.hH=void 0,e.Ye=(t=bt).navigator,e.hH=null===e.Ye||void 0===e.Ye?void 0:e.Ye.userAgent,e.x4=t.location,e.hx=t.screen,e.YNa=t.devicePixelRatio,e.gx=t.performance,e.Nh=t.document,e.Gtb=e.Nh.documentElement,e.OA=Array.prototype,e.sort=e.OA.sort,e.map=e.OA.map,e.slice=e.OA.slice,e.every=e.OA.every,e.reduce=e.OA.reduce,e.filter=e.OA.filter,e.forEach=e.OA.forEach,e.pop=e.OA.pop,e.Ytb=Object.create,e.aIa=Date.now,e.TSa=String.fromCharCode,e.oM=Math.floor,e.xtb=Math.ceil,e.Dp=Math.round,e.Gu=Math.max,e.Uz=Math.min,e.XT=Math.random,e.r4=Math.abs,e.eNa=Math.pow,e.fNa=Math.sqrt,e.Htb=t.escape,e.y4=t.unescape,e.URL=t.URL||t.webkitURL,e.xD=t.MediaSource||t.WebKitMediaSource,e.yD=t.webkitCrypto||t.msCrypto||t.crypto,e.Fr=e.yD&&(e.yD.webkitSubtle||e.yD.subtle),e.XNa=t.webkitCryptokeys||t.msCryptokeys||t.cryptokeys;try{e.indexedDB=t.indexedDB}catch(t){e.NXb=t||"noex"}try{e.localStorage=t.localStorage}catch(t){e.Vwa=t||"noex"}},function(t,n,e){_esm(n),n.gd=n.L9a=n.oQ=n.vg=n.owa=n.QYb=n.EYb=n.ewa=n.xF=n.Y9a=n.Oa=n.mwa=n.isArray=n.w$a=n.fk=n.rd=n.is=void 0,t=e(211),n.is=t.XG,n.rd=function(t){return n.is.hh(t)},n.fk=function(t){return n.is.$V(t)},n.w$a=function(t){return n.is.una(t)},n.isArray=function(t){return n.is.iE(t)},n.mwa=function(t){return n.is.MYa(t)},n.Oa=function(t,e,i){return n.is.vo(t,e,i)},n.Y9a=function(t,e,i){return n.is.coa(t,e,i)},n.xF=function(t,e,i){return n.is.aW(t,e,i)},n.ewa=function(t){return n.is.PV(t)},n.EYb=function(t){return n.is.pCb(t)},n.QYb=function(t){return n.is.qCb(t)},n.owa=function(t){return n.is.NYa(t)},n.vg=function(t){return n.is.$u(t)},n.oQ=function(t){return n.is.wo(t)},n.L9a=function(t){return n.is.g7(t)},n.gd=function(t){return n.is.i7(t)}},function(t,e){function i(){}var n;_esm(e),e.Ze=e.rb=e.Tf=e.dc=e.u2=e.ma=e.sia=e.oH=e.Na=void 0,(n=e.Na||(e.Na={})).yab="loadedtracks",n.xab="loadedmetadata",n.loaded="loaded",n.error="error",n.closed="closed",n.Gr="currenttimechanged",n.Tlb="unthrottledcurrenttimechanged",n.Voa="bufferedtimechanged",n.wra="durationchanged",n.QEa="videosizechanged",n.Beb="pausedchanged",n.Uza="playingchanged",n.L3a="endedchanged",n.nO="busychanged",n.P7="audiotracklistchanged",n.gn="audiotrackchanged",n.Kw="timedtexttracklistchanged",n.Im="timedtexttrackchanged",n.H1="trickplayframeschanged",n.Kcb="mutedchanged",n.onb="volumechanged",n.JCa="showsubtitle",n.VAa="removesubtitle",n.lhc="watermark",n.iwa="isReadyToTransition",n.ZP="inactivated",n.D9a="internalPlaybackError",n.mac="segmentmaploaded",n.nac="segmentpresenting",n.BZa="autoplaywasallowed",n.R7="autoplaywasblocked",n.JDb="adsstatechanged",n.wQ="livestatechanged",(e.oH||(e.oH={})).L0="playgraphsegmenttransition",(e.sia=i).lib="serverTimeChanged",(n=e.ma||(e.ma={})).aO="aseReport",n.yoa="autoplayWasAllowed",n.Ui="autoplayWasBlocked",n.TA="bufferUnderrun",n.closed="closed",n.eh="closing",n.Gr="currentTimeChanged",n.NE="downloadComplete",n.ZP="inactivated",n.jab="licenseAdded",n.zZ="licensed",n.CZ="locationSelected",n.txa="manifestClosing",n.WJ="manifestPresenting",n.Uba="mediaBufferChanged",n.Bca="nextBranchingSegmentChosen",n.ow="playbackStart",n.Bm="playbackReady",n.kl="repositioned",n.OK="repositioning",n.Nhb="safePlayRequested",n.ZK="segmentPresenting",n.P0="serverSwitch",n.ljb="shouldUpdateVideoDiagInfo",n.qS="subtitleError",n.NDa="throttledMediaTimeChanged",n.Ulb="unthrottledMediaTimeChanged",n.vS="timedTextRebuffer",n.Kw="timedTextTrackListChanged",n.H1="trickPlayFramesChanged",n.vEa="updateNextBranchingSegmentWeights",n.zgc="userInitiatedPause",n.Qmb="userInitiatedResume",n.tlb="tracksHydrated",n.wQ="livestatechanged",(e.u2||(e.u2={})).j7="adBreakComplete",(n=e.dc||(e.dc={}))[n.sM=0]="NOTLOADED",n[n.LOADING=1]="LOADING",n[n.Me=2]="NORMAL",n[n.CLOSING=3]="CLOSING",n[n.CLOSED=4]="CLOSED",(n=e.Tf||(e.Tf={}))[n.Me=1]="NORMAL",n[n.ed=2]="BUFFERING",n[n.TRa=3]="STALLED",(n=e.rb||(e.rb={}))[n.fg=1]="WAITING",n[n.Gc=2]="PLAYING",n[n.Ug=3]="PAUSED",n[n.Gs=4]="ENDED",(n=e.Ze||(e.Ze={}))[n.Qz=0]="INITIAL",n[n.DD=1]="SEEK",n[n.g5=2]="TRACK_CHANGED",n[n.CM=3]="SEGMENT_CHANGED",n[n.k3=4]="FORCE_REBUFFER"},function(t,e){_esm(e),e.WT=e.o4=e.cpb=e.Yob=e.$ob=e.apb=e.GGa=e.Xob=e.Zob=e.FGa=e.bpb=e.ipb=e.gpb=e.hpb=e.fpb=e.arb=e.$qb=e.Zqb=e.dtb=e.etb=e.q4=e.NMa=e.OMa=e.p4=e.LIa=e.brb=e.Jha=e.g3=e.Utb=e.Fvb=e.KMa=e.Rob=e.RHa=e.E4=e.uM=e.D4=e.JMa=e.Tz=e.Qob=e.sGa=e.Qsb=e.owb=e.ctb=e.btb=e.yvb=e.xvb=e.Fu=e.Vg=e.sRa=e.ix=void 0,e.qGa=e.jka=void 0,e.ix=function(){},e.sRa=function(){return!0},e.Vg={ha:!0},e.Fu=1e3,e.xvb=86400,e.yvb=604800,e.btb=1e4,e.ctb=1e7,e.owb=1.5,e.Qsb=.128,e.sGa=7.8125,e.Qob=128,e.Tz=145152e5,e.JMa=1e5,e.D4="$netflix$player$order",e.uM=-1,e.E4=1,e.RHa=["en-US"],e.Rob=8,e.KMa=65535,e.Fvb=65536,e.Utb=Number.MAX_VALUE,e.g3="playready",e.Jha="widevine",e.brb="fps",e.LIa="clearkey",e.p4='audio/mp4; codecs="mp4a.40.5"',e.OMa='audio/mp4; codecs="mp4a.40.42"',e.NMa='audio/mp4; codecs="mp4a.a6"',e.q4='video/mp4; codecs="avc1.640028"',e.etb='video/mp4; codecs="hev1.2.6.L153.B0"',e.dtb='video/mp4; codecs="dvhe.01000000"',e.Zqb="9A04F079-9840-4286-AB92-E65BE0885F95",e.$qb="29701FE4-3CC7-4A34-8C5B-AE90C7439A47",e.arb="EDEF8BA9-79D6-4ACE-A3C8-27DCD51D21ED",e.fpb=["4E657466-6C69-7850-6966-665374726D21","4E657466-6C69-7848-6165-6465722E7632"],e.hpb="A2394F52-5A9B-4F14-A244-6C427C648DF4",e.gpb="4E657466-6C69-7846-7261-6D6552617465",e.ipb="8974DBCE-7BE7-4C51-84F9-7148F9882554",e.bpb="mp4a",e.FGa="enca",e.Zob="ec-3",e.Xob="avc1",e.GGa="encv",e.apb="hvcC",e.$ob="hev1",e.Yob="dvhe",e.cpb="vp09",e.o4=0,e.WT=1,e.jka="position:relative;width:100%;height:100%;overflow:hidden",e.qGa="AAAAJGZ0eXBpc28yAAAAAGlzb21pc28yZGFzaGlzbzZwaWZmAAAAhHV1aWROZXRmbGl4UGlmZlN0cm0hAQAAAAAAAAAEnph8AAAAAACYloAAAAABBq7BRQAAAAAAADQaAAAAAASeVDAAAAAAAAAjXwAAELsAAAAAAAAIKwAACoQxmsddr5Pt+Lrq/zLsOAU/AAAAAAAAHRsAAAOSAAAAAAAAIK0AAAKyAAAAGGZyZWUAAAAAAAAAAAAAAAAAAAAAAAAATXV1aWTi6QKlfkPiQZDaISEYxWQyAAAAAAAAAADesO2iTmV0ZmxpeCBNZWRpYSBMaWJyYXJ5IFZlcnNpb24gODAuMTAuMTcuIAAAAAcebW9vdgAAAHhtdmhkAQAAAAAAAADesO2jAAAAAN6w7aMAmJaAAAAAAAAAAAAAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAr5wc3NoAAAAAJoE8HmYQEKGq5LmW+CIX5UAAAKengIAAAEAAQCUAjwAVwBSAE0ASABFAEEARABFAFIAIAB4AG0AbABuAHMAPQAiAGgAdAB0AHAAOgAvAC8AcwBjAGgAZQBtAGEAcwAuAG0AaQBjAHIAbwBzAG8AZgB0AC4AYwBvAG0ALwBEAFIATQAvADIAMAAwADcALwAwADMALwBQAGwAYQB5AFIAZQBhAGQAeQBIAGUAYQBkAGUAcgAiACAAdgBlAHIAcwBpAG8AbgA9ACIANAAuADAALgAwAC4AMAAiAD4APABEAEEAVABBAD4APABQAFIATwBUAEUAQwBUAEkATgBGAE8APgA8AEsARQBZAEwARQBOAD4AMQA2ADwALwBLAEUAWQBMAEUATgA+ADwAQQBMAEcASQBEAD4AQQBFAFMAQwBUAFIAPAAvAEEATABHAEkARAA+ADwALwBQAFIATwBUAEUAQwBUAEkATgBGAE8APgA8AEsASQBEAD4AQQBBAEEAQQBBAE8AYwBHAHkAeQA0AEEAQQBBAEEAQQBBAEEAQQBBAEEAQQA9AD0APAAvAEsASQBEAD4APABDAEgARQBDAEsAUwBVAE0APgBvAE8ARwBWAHcAUwB0AGYAcABvAHMAPQA8AC8AQwBIAEUAQwBLAFMAVQBNAD4APABDAFUAUwBUAE8ATQBBAFQAVABSAEkAQgBVAFQARQBTAD4APABMAGkAdAB0AGwAZQBFAG4AZABpAGEAbgBLAEkARAA+AHQAcgB1AGUAPAAvAEwAaQB0AHQAbABlAEUAbgBkAGkAYQBuAEsASQBEAD4APAAvAEMAVQBTAFQATwBNAEEAVABUAFIASQBCAFUAVABFAFMAPgA8AC8ARABBAFQAQQA+ADwALwBXAFIATQBIAEUAQQBEAEUAUgA+AAAAAExwc3NoAAAAAClwH+Q8x0o0jFuukMdDmkcAAAAsAAAABAAAAAAG5y7LEQCZXm+LFtZ8GJ3qeQbAI/HmYiUnLTrYNjnKW2j/oyoAAAA0cHNzaAAAAADt74upedZKzqPIJ9zVHSHtAAAAFAgBEhAAAAAABucuywAAAAAAAAAAAAADJHRyYWsAAABodGtoZAEAAAcAAAAA3rDtowAAAADesO2jAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAFAAAAAtAAAAAAACxlZHRzAAAAJGVsc3QBAAAAAAAAAQAAAAEGrsFFAAAAAAAGW5sAAQAAAAACiG1kaWEAAAAsbWRoZAEAAAAAAAAA3rDtowAAAADesO2jAJiWgAAAAAAAAAAAVcQAAAAAADRoZGxyAAAAAAAAAAB2aWRlAAAAAAAAAAAAAAAAVmlkZW8gTWVkaWEgSGFuZGxlcgAAAAIgbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAB4HN0YmwAAAAQc3R0cwAAAAAAAAAAAAAAEGN0dHMAAAAAAAAAAAAAAYRzdHNkAAAAAAAAAAEAAAF0ZW5jdgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAUAAtAASAAAAEgAAAAAAAAAAQpBVkMgQ29kaW5nAAAAAAAAAAAAAAAAAAAAAAAAAAAAABj//wAAADxhdmNDAU1AH//hACVnTUAf6IAoAt2AiAAAAwAIAAADAYcBAAHH7gAAl/pSYYA8YMRIAQAEaOvssgAAABBwYXNwAAAAAQAAAAEAAAAidXVpZE5ldGZsaXhGcmFtZVJhdGUAAAAAAABdwAPoAAAAYHNpbmYAAAAMZnJtYWF2YzEAAAAUc2NobQAAAABwaWZmAAEAAQAAADhzY2hpAAAAMHV1aWSJdNvOe+dMUYT5cUj5iCVUAAAAAAAAAQgAAAAABucuywAAAAAAAAAAAAAAUHNpbmYAAAAMZnJtYWF2YzEAAAAUc2NobQAAAABjZW5jAAEAAAAAAChzY2hpAAAAIHRlbmMAAAAAAAABCAAAAAAG5y7LAAAAAAAAAAAAAAAQc3RzYwAAAAAAAAAAAAAAFHN0c3oAAAAAAAAAAAAAAAAAAAAQc3RjbwAAAAAAAAAAAAAAPG12ZXgAAAAUbWVoZAEAAAAAAAABBq7BRQAAACB0cmV4AAAAAAAAAAIAAAABAAAAAAAAAAABoQAA"},function(t,e){_esm(e),e.$c="ApplicationSymbol"},function(t,e,i){var n;function r(t,e){return t&&e?Math.abs(t*e/n.$E(t,e)):0}function a(t,e){"object"==typeof t?(this.wc=t.fb,this.wb=t.aa):(this.wc=t,this.wb=e),isFinite(this.wc)||(this.wb=1)}_esm(e),e.M=void 0,n=i(401),a.compare=function(t,e){return t.lm(e)},a.abs=function(t){return new a(Math.abs(t.wc),t.wb)},a.Ja=function(t){return 0===t?a.Ka:new a(t,1e3)},a.Bfa=function(t,e){return Math.floor(1e3*t/e)},a.Gcb=function(t,e){return Math.floor(t*e/1e3)},a.max=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.reduce(function(t,e){return t.greaterThan(e)?t:e})},a.min=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.reduce(function(t,e){return t.lessThan(e)?t:e})},a.$E=function(t,e){var i;return t.wb===e.wb?new a(n.$E(t.wc,e.wc),t.wb):(i=r(t.wb,e.wb),new a(n.$E(t.wc*i/t.wb,e.wc*i/e.wb),i))},Object.defineProperties(a.prototype,{fb:{get(){return this.wc},configurable:!0},aa:{get(){return this.wb},configurable:!0},W:{get(){return a.Bfa(this.wc,this.wb)},configurable:!0},DK:{get(){return 1e3*this.wc/this.wb},configurable:!0},WK:{get(){var t=this.DK;return t<0?Math.ceil(t):Math.floor(t)},configurable:!0},Fh:{get(){return this.wc/this.wb},configurable:!0}}),a.prototype.Rg=function(t){return t/=this.wb,new a(Math.floor(this.wc*t),Math.floor(this.wb*t))},a.prototype.add=function(t){var e;return this.wb===t.wb?new a(this.wc+t.wc,this.wb):(e=r(this.wb,t.wb),new a(this.wc*e/this.wb+t.wc*e/t.wb,e))},a.prototype.Ea=function(t){var e;return this.wb===t.wb?new a(this.wc-t.wc,this.wb):(e=r(this.wb,t.wb),new a(this.wc*e/this.wb-t.wc*e/t.wb,e))},a.prototype.jC=function(t){return new a(this.wc*t,this.wb)},a.prototype.Xk=function(t){var e;return"number"==typeof t?Math.floor(t)===t&&(e=r(this.wc,t))!==this.wc?this.Rg(e/this.wc*this.wb).Xk(t):new a(Math.floor(this.wc/t),this.wb):this.wb===t.wb?this.wc/t.wc:(e=r(this.wb,t.wb),this.wc*e/this.wb/(t.wc*e/t.wb))},a.prototype.UO=function(t){var e;return this.wb===t.wb?new a(Math.abs(this.wc-t.wc),this.wb):(e=r(this.wb,t.wb),new a(Math.abs(this.wc*e/this.wb-t.wc*e/t.wb),e))},a.prototype.Bgb=function(){return new a(this.wb,this.wc)},a.prototype.compare=function(t,e){var i;return this.wb===e.wb?t(this.wc,e.wc):(i=r(this.wb,e.wb),t(this.wc*i/this.wb,e.wc*i/e.wb))},a.prototype.lm=function(t){var e;return this.wb===t.wb?this.fb===t.wc?0:this.wc-t.wc:(e=r(this.wb,t.wb),this.wc*e/this.wb-t.wc*e/t.wb)},a.prototype.equal=function(t){return this.compare(function(t,e){return t===e},t)},a.prototype.yya=function(t){return this.compare(function(t,e){return t!==e},t)},a.prototype.lessThan=function(t){return this.compare(function(t,e){return t<e},t)},a.prototype.greaterThan=function(t){return this.compare(function(t,e){return e<t},t)},a.prototype.BF=function(t){return this.compare(function(t,e){return t<=e},t)},a.prototype.zj=function(t){return this.compare(function(t,e){return e<=t},t)},a.prototype.isFinite=function(){return!!this.wb&&isFinite(this.wc)},a.prototype.Q7a=function(t){return r(this.aa,t)},a.prototype.toJSON=function(){return{ticks:this.wc,timescale:this.wb}},a.prototype.toString=function(){return"".concat(this.wc,"/").concat(this.wb)},a.prototype.ac=function(){return"".concat(this.wc,"/").concat(this.wb," (").concat(this.W,"ms)")},a.Ka=new a(0,1e3),a.nC=new a(1,1e3),a.Uv=new a(1/0,1),e.M=a},function(t,I,n){var O,x,R,P,C,j,N,M,D,L,B,U,F,q,H,K,G,V,Y;function e(t){return(t=I.config.lfc[i(t)])?t:{}}function i(t){if(t)return 0<=t.indexOf("billboard")?"billboard":0<=t.toLowerCase().indexOf("preplay")?"preplay":0<=t.indexOf("embedded")?"embedded":0<=t.indexOf("content-sampling")?"content-sampling":0<=t.indexOf("video-merch-bob-horizontal")?"video-merch-bob-horizontal":0<=t.indexOf("mini-modal-horizontal")?"mini-modal-horizontal":0<=t.indexOf("standard")?"standard":0<=t.indexOf("branching")?"branching":0<=t.indexOf("live")?"live":t}_esm(I),I.vIb=I.wIb=I.I0a=I.kqa=I.J0a=I.jqa=I.config=void 0,O=n(17),x=n(40),R=n(9),P=n(39),C=n(23),j=n(26),N=n(42),M=n(25),n(7),D=n(14),L=n(15),B=n(177),U=n(50),F=n(85),q=n(111),H=n(52),K=n(5),G=n(47),V=n(18),Y=n(121),I.J0a=function(t,e){var i,n,s,r,a,o,u,c,h;function f(e,i,n,t){for(var r=[],a=3;a<arguments.length;++a)r[a-3]=arguments[a];return function(t){return L.rd(t)&&(n=t),C.Ua(L.gd(e)),e.apply(void 0,[i,n].concat(J(r)))}}function l(t){return t=t.toLowerCase(),r.hasOwnProperty(t)&&(s[t]=r[t],a[t]=r[t]),t}function d(t,e,i){var n;if(t=t.toLowerCase(),s.hasOwnProperty(t)){n=s[t];try{n=i?i(n):n}catch(t){n=void 0}if(void 0!==n)return n;C.Ua(!1),R.log.error("Invalid configuration value. Name: "+t)}return e}function p(t,e,i,n){return d(t,e,function(t){if(L.vg(t)&&(t=M.qk(t)),L.Y9a(t,i,n))return t})}function b(t,e,i,n){return d(t,e,function(t){if(L.vg(t)&&(t=M.qk(t)),L.xF(t,i,n))return t})}function g(t,e,i,n){return d(t,e,function(t){if(L.vg(t)&&(t=parseFloat(t)),L.Oa(t,i,n))return t})}function m(t,e,i){return d(t,e,function(t){if(i?i.test(t):L.vg(t))return t})}function v(t,e){return d(t,e,function(t){return"true"==t||!0===t||"false"!=t&&!1!==t&&void 0})}function y(t,e){return d(t,e,function(t){return L.vg(t)?JSON.parse(D.y4(t)):L.fk(t)?t:void 0})}function w(t,e,i,n,r,a){var o;if(t=t.toLowerCase(),s.hasOwnProperty(t)&&(o=s[t]),!L.rd(o))return e;if(L.vg(o))if(o[0]!==i)o=n(o);else try{o=JSON.parse(D.y4(o))}catch(t){o=void 0}if(void 0===o)return e;for(t=0;t<r.length;t++)if(!r[t](o))return e;return a?a(o):o}function A(t,e,i,n,r){return w(t,e,"[",function(t){for(var e=(t=t.split("|")).length;e--;)t[e]=M.qk(t[e]);return t},[function(t){return L.isArray(t)&&0<t.length},function(t){for(var e=t.length;e--;)if(!L.xF(t[e],i,n))return!1;return!0},function(t){return void 0===r||t.length>=r}])}function _(t,e){return w(t,e,"[",function(e){for(var t=(e=L.isArray(e)?e:e.split("|")).length;t--;)try{e[t]=JSON.parse(D.y4(e[t]))}catch(t){e=void 0;break}return e},[function(t){return L.isArray(t)&&0<t.length},function(t){for(var e=t.length;e--;)if(!L.rd(t[e])||!L.fk(t[e]))return!1;return!0}])}function E(t,e){var i=k(t,[]);return i&&0<i.length?Y.kp(i):_(t,e)}function k(t,e,i,n){return w(t,e,"[",function(t){return L.isArray(t)?t:t.split("|")},[function(t){return L.isArray(t)&&0<t.length},function(t){for(var e=t.length;e--;)if(i?!i.test(t[e]):!L.oQ(t[e]))return!1;return!0},function(t){return void 0===n||t.length>=n}])}function S(t,i,n){return w(t,i,"{",function(t){for(var e,i,n={},r=(t=t.split(";")).length;r--;){if((i=(e=t[r]).indexOf(":"))<=0)return;n[e.substring(0,i)]=e.substring(i+1)}return n},[function(t){return L.fk(t)&&0<Object.keys(t).length},function(t){if(n)for(var e in t)if(!n.test(t[e]))return!1;return!0}],function(t){var e={};return M.He(e,i),M.He(e,t),e})}function T(t){t.split(",").forEach(function(t){var e=t.indexOf("=");0<e&&(s[t.substring(0,e).toLowerCase()]=t.substring(e+1))})}i=/^[0-9]+[%]?$/,n=/^[0-9]*$/,a={},o=R.Fa.get(P.Bp),u=R.Fa.get(q.lH),s={},M.He(s,e),t&&t.length&&D.forEach.call(t,function(t){L.vg(t)?T(t):L.fk(t)&&M.He(s,t,{HZ:!0})}),r=M.He({},x.J$(),{HZ:!0}),(e=x.hgb().cadmiumconfig)&&(R.log.info("Config cookie loaded",e),T(e)),(R.Fa.get(G.Yq).t7||s.istestaccount)&&(M.He(s,r),a=r),I.config={},c={gPb:f(v,l("enableXHEAAC"),!1),s3a:f(v,l("enableDDPlus20"),!0),r3a:f(v,l("enableDDPlus"),!0),eP:f(v,l("enableDDPlusAtmos"),!1),NOb:f(v,l("enableLSSDH"),!0),IOb:f(v,l("enableHEVC"),!1),ieb:f(v,l("overrideEnableHEVC"),!1),Dra:f(v,l("enableHDR"),!1),heb:f(v,l("overrideEnableHDR"),!1),geb:f(v,l("overrideEnableDV"),!1),cP:f(v,l("enableAVCHigh"),u.cP),feb:f(v,l("overrideEnableAVCHigh"),!1),cPb:f(v,l("enableVP9"),!1),jeb:f(v,l("overrideEnableVP9"),!1),wOb:f(v,l("enableAV1"),!1),eeb:f(v,l("overrideEnableAV1"),!1),h5b:f(v,l("overrideEnableXHEAAC"),!1),f5b:f(v,"overrideEnableAllAudioProfiles",!1),g5b:f(v,"overrideEnableAllVideoProfiles",!1),TOb:f(v,l("enablePRK"),!1),FOb:f(v,l("enableDV"),!1),w3a:f(v,l("enableHWDRM"),!1),KOb:f(v,l("enableImageSubs"),!0),uI:f(E,l("audioProfiles"),u.uI),HOb:f(v,l("enableFullHdForWidevineL3"),!1),v3a:f(v,l("enableFullHdForWidevineL1"),!1),aPb:f(v,l("enableUHD"),!0),cga:f(b,"videoCapabilityDetectorType",j.Tm.Iz),toa:f(b,"audioCapabilityDetectorType",j.Ww.Iz),ho:f(E,l("videoProfiles"),u.ho),AYa:f(E,l("additionalVideoProfiles"),[]),SBb:f(k,l("timedTextProfiles"),u.Jw),Jw:function(){return c.SBb().filter(function(t){return t===N.Rm.sha?c.NOb():t!==N.Rm.rM||c.KOb()})},endpoint:f(v,l("endpoint"),!1),version:f(m,"version","unknown"),JOb:f(v,l("enableHdcp"),!1),Xt:f(v,l("prepareCadmium"),!1),uCb:f(v,l("acceptManifestOnPrepareItemParams"),!0),M6b:f(y,"ppmconfig",{maxNumberTitlesScheduled:1}),wX:f(v,l("enableLdlPrefetch"),!1),A3a:f(v,l("enableMediaPrefetch"),!1),OOb:f(v,l("enableManifestCache"),!0),NMb:f(v,l("deleteCachedManifestOnPlayback"),!1),MMb:f(v,l("deleteCachedManifestOnCreate"),!1),QMb:f(v,l("deleteOtherManifestCacheOnCreate"),!1),PMb:f(v,l("deleteOtherLdlCacheOnCreate"),!1),Drc:f(b,l("periodicPrepareLogsIntervalMilliseconds"),36e5),g7b:f(b,l("prepareManifestCacheMaxCount"),50),e7b:f(b,l("prepareLdlCacheMaxCount"),30),ufb:f(b,l("prepareManifestExpiryMilliseconds"),12e5),f7b:f(b,l("prepareLdlExpiryMilliseconds"),78e4),Z6b:f(b,l("prefetcherMaxWishlistSize"),10),Y6b:f(b,l("prefetcherBudgetInBytes"),1/0),$6b:f(v,l("prefetcherOverrideItemPriority"),!0),d7b:f(m,l("prepareInsertStrategyPersistentTasks"),"append",/^(prepend|append|ignore)$/),rtc:f(y,"videoApp"),tG:f(y,"storageRules"),b$:f(v,"ftlEnabled",u.b$),jva:f(b,l("imageSubsResolution"),0),xXb:f(b,l("imageSubsMaxBuffer"),u.d1b.ka(H.Xw),0),DW:f(v,l("captureBatteryStatus"),!1),rSb:f(b,l("getBatteryApiTimeoutMilliseconds"),5e3),Hn:f(m,l("keySystemId"),u.Hn),Q$a:f(k,l("keySystemList"),void 0,void 0),LEa:f(v,l("validateKeySystemAccess"),!1),Q1b:f(b,l("hdcpGlobalTimeout1"),1e4),R1b:f(b,l("hdcpGlobalTimeout2"),1e4),Uqc:f(b,l("hdcpQueryTimeout1"),1e3),Vqc:f(b,l("hdcpQueryTimeout2"),1e3),gcb:f(b,l("hdcpQueryTimeout2"),100),S1b:f(v,l("microsoftHwdrmRequiresHevc"),!1),fcb:f(v,l("microsoftClearLeadRequiresSwdrm"),!1),N1b:f(v,l("microsoftEnableDeviceInfo"),!1),O1b:f(v,l("microsoftEnableHardwareInfo"),!1),P1b:f(v,l("microsoftEnableHardwareReset"),!1),ogc:f(v,l("useHevcCodecForDolbyVision"),!1),QOb:f(v,l("enableMediaCapabilities"),!1),L6b:f(v,l("powerEfficientForVideo"),!1),ROb:f(v,l("enableMediaCapabilitiesSourceBufferCheck"),!1),e0b:f(v,"logMediaPipelineStatus",!1),r0:f(v,l("renderDomDiagnostics"),!0),Hab:function(){return-1},xQ:f(p,l("logDisplayMaxEntryCount"),u.xQ,-1),k0b:f(p,l("logToConsoleLevel"),-1),Onc:f(p,l("bladerunnerCmdHistorySize"),10),uB:function(){return o.uB},Zwa:f(v,"logErrorIfEsnNotProvided",!0),Jra:f(v,"enforceSinglePlayback",u.Jra),o9:f(v,"enforceSingleSession",u.o9),Xpa:f(v,"closeOtherPlaybacks",!0),BEb:f(b,"asyncLoadTimeout",15e3,1),u0b:f(b,"mainThreadMonitorPollRate",0),zJ:function(){return o.zJ},uO:function(){return o.uO},K1:function(){return o.K1},Zmb:f(b,l("verbosePlaybackInfoDenominator"),0),eea:f(v,"renderTimedText",!0),N6b:f(v,"preBufferTimedText",!0),hQb:f(v,"fatalOnTimedTextLoadError",!0),dlb:f(S,"timedTextStyleDefaults",{}),RDa:f(S,"timedTextStyleOverrides",{}),yfa:f(S,"timedTextFontFamilyMapping",u.yfa||{default:"font-family:Arial,Helvetica"}),wS:f(b,"timedTextSimpleFallbackThreshold",u.wS.ka(H.Xw)),YP:f(k,l("imscLanguageList"),u.YP,[]),uba:f(k,l("lessBoldLanguageList"),u.uba,[]),Kqa:f(m,l("customDfxpUrl")),$Ob:f(v,l("enableSubtitleTrackerLogging"),!1),Aac:f(v,l("sendSubtitleQoeLogblobOnMidplay"),!1),spa:f(A,"cdnIdWhiteList",[]),rpa:f(A,"cdnIdBlackList",[]),Jsa:f(m,l("forceAudioTrack")),Nsa:f(m,l("forceTimedTextTrack")),l1b:f(b,l("maxRetriesTimedTextDownload"),0),pec:f(b,l("timedTextRetryInterval"),8e3),Ucc:f(m,"storageType","idb",/^(none|fs|idb|ls)$/),Dab:f(b,"lockExpiration",1e4),c0b:f(b,"lockRefresh",3e3),NGb:f(v,"captureUnhandledExceptions",!0),wXb:f(v,"ignoreUnhandledExceptionDuringPlayback",!0),ofc:f(v,"unhandledExceptionsArePlaybackErrors",!1),Qlb:f(m,"unhandledExceptionSource",""),r7b:f(v,"preserveLastFrame",!1),Z1b:f(b,"minBufferingTimeInMilliseconds",4e3),V7b:f(b,"progressBackwardsGraceTimeMilliseconds",4e3),W7b:f(b,"progressBackwardsMinPercent",10),zFb:f(m,l("bookmarkIgnoreBeginning"),"0",i),AFb:f(m,l("bookmarkIgnoreEnd"),"5%",i),BFb:f(m,l("bookmarkIgnoreEndForBranching"),"60000",i),DQ:f(b,"maxParallelConnections",3),fBa:f(v,"reportThroughputInLogblobs",!0),Gy:f(b,"minAudioMediaRequestDuration",16e3),X1b:f(b,"minAudioMediaRequestDurationBranching",0),gC:f(b,"minVideoMediaRequestDuration",4e3),h2b:f(b,"minVideoMediaRequestDurationVariableGOP",0),f2b:f(b,"minVideoMediaRequestDurationBranching",0),eca:f(b,"minAudioMediaRequestSizeBytes",0),nca:f(b,"minVideoMediaRequestSizeBytes",0),$Nb:f(v,"droppedFrameRateFilterEnabled",!1),aOb:f(b,"droppedFrameRateFilterMaxObservation",60,10,1e3),cOb:f(function(t,e,n,r,i,a){return w(t,e,"[",function(t){for(var e=(t=t.split(";")).length;e--;){t[e]=t[e].split("|");for(var i=t[e].length;i--;)t[e][i]=M.qk(t[e][i])}return t},[function(t){return L.isArray(t)&&0<t.length},function(t){for(var e=t.length;e--&&void 0!==t;){if(!L.isArray(t[e]))return!1;for(var i=t[e].length;i--;)if(!L.xF(t[e][i],n,r))return!1}return!0},function(t){if(void 0!==i)for(var e=t.length;e--;)if(i!==t[e].length)return!1;return!0},function(t){return void 0===a||t.length>=a}])},"droppedFrameRateFilterPolicy",[[3,15],[6,9],[9,2],[15,1]],void 0,void 0,2,0),bOb:f(b,"droppedFrameRateFilterMinHeight",384),dOb:f(A,"droppedFramesPercentilesList",[]),T1b:f(v,"microsoftScreenSizeFilterEnabled",!1),PZb:f(v,"keyStatusFilterEnabled",!1),x8a:f(b,"hdcpEngagementWaitTime",0),kfc:f(v,"uiLabelFilterEnabled",!0),jfc:f(y,"uiLabelFilter",{}),yMb:f(b,l("defaultVolume"),100,0,100),Ixa:f(b,l("maxPlaybackRate"),2,0,16),i4a:f(v,"fastForwardAds",!1),F2a:f(v,"disableVideoRightClickMenu",!1),ica:f(b,"minDecoderBufferMilliseconds",1e3,0,O.Tz),SF:f(b,"optimalDecoderBufferMilliseconds",5e3,0,O.Tz),eza:f(b,"optimalDecoderBufferMillisecondsBranching",3e3,0,O.Tz),LF:f(b,"minimumTimeBeforeBranchDecision",3e3,0,O.Tz),wcb:f(b,"minimumTimeBeforeDelayedSeekToQueuedSegment",500,0,O.Tz),$B:f(b,"maxDecoderBufferMilliseconds",u.$B.ka(K.pa),0,O.Tz),d2a:f(b,"decoderTimeoutMilliseconds",1e4,1),bdb:f(b,"noRenderTimeoutMilliseconds",0),H5b:f(b,"pauseTimeoutLimitMilliseconds",18e5),lva:f(b,"inactivityMonitorInterval",3e4,0),tCb:f(A,"abrdelLogPointsSeconds",[15,30,60,120],0,void 0,4),hP:f(v,"enableTrickPlay",!1),ADb:f(A,"additionalDownloadSimulationParams",[2e3,2e3,100],0,void 0,3),Uec:f(b,"trickPlayHighResolutionBitrateThreshold",1e3),Vec:f(b,"trickPlayHighResolutionThresholdMilliseconds",1e4),Yec:f(g,"trickplayBufferFactor",.5),Tec:f(b,"trickPlayDownloadRetryCount",1),xxa:f(m,"marginPredictor","simple",/^(simple|scale|iqr|percentile|ci)$/),LPb:f(k,"experimentalFilter",["throughput-wssl"]),Jpa:f(m,"ciPredictorSource","throughput-ci"),TCa:f(m,"simulationDurationStrategy","default"),oya:f(m,"networkMeasurementGranularity","video_location",/^(location|video_location)$/),KKa:f(y,"HistoricalTDigestConfig",{maxc:25,rc:"ewma",c:.5,hl:7200}),zbb:f(p,"maxIQRSamples",1/0),ocb:f(p,"minIQRSamples",5),Kmb:f(v,"useResourceTimingAPI",!1),tXb:f(v,"ignoreFirstByte",!0),Rxa:f(v,"mediaRequestAsyncLoadStart",u.Rxa),wgc:f(v,"useXHROnLoadStart",!1),gsa:f(A,"failedDownloadRetryWaitsASE",[10,200,500,1e3,2e3,4e3]),r8:f(b,"connectTimeoutMilliseconds",8e3,500),uya:f(b,"noProgressTimeoutMilliseconds",8e3,500),clb:f(b,"timedTextDownloadRetryCountBeforeCdnSwitch",3),irc:f(b,"netflixRequestExpiryTimeout",0),mhc:f(v,"webkitDecodedFrameCountIncorrectlyReported",!1),dac:f(b,"seekBackOnAudioTrackChangeMilliseconds",8e3),pfa:f(k,l("supportedAudioTrackTypes"),[],void 0,1),Caa:f(b,"initialLogFlushTimeout",5e3),Yeb:f(m,"playdataPersistKey",o.uB?"unsentplaydatatest":"unsentplaydata"),rsc:f(v,"sendPersistedPlaydata",!0),o6b:f(b,"playdataPersistIntervalMilliseconds",4e3),Frc:f(b,"playdataSendDelayMilliseconds",1e4),ssc:f(v,"sendPlaydataBackupOnInit",!0),h0b:f(k,"logPerformanceTiming","navigationStart redirectStart fetchStart secureConnectionStart requestStart domLoading".split(" ")),hcb:f(v,"midplayEnabled",!0),cca:f(b,"midplayIntervalMilliseconds",3e5),icb:f(A,"midplayKeyPoints",[15e3,3e4,6e4,12e4]),e9:f(b,"downloadReportDenominator",0),NNb:f(b,"downloadReportInterval",3e5),Gab:f(b,"logConfigApplyDenominator",0),TZa:f(S,l("bookmarkByMovieId"),{}),QX:f(v,l("forceLimitedDurationLicense"),!1),CF:f(b,l("licenseRenewalRequestDelay"),0),Cza:f(b,l("persistedReleaseDelay"),1e4),uqc:f(v,l("limitedDurationFlagOverride"),void 0),Mhb:f(b,"safariPlayPauseWorkaroundDelay",100),xhc:f(b,"workaroundValueForSeekIssue",1200),opa:f(v,l("callEndOfStream"),u.opa),T5b:f(v,"performRewindCheck",!0),jQb:f(v,"fatalOnUnexpectedSeeking",!0),iQb:f(v,"fatalOnUnexpectedSeeked",!0),gQb:f(v,"fatalOnManifestMistmatch",!0),zbc:f(v,l("setVideoElementSize")),THb:f(v,l("clearVideoSrc"),!0),r2a:f(b,l("delayPlayPause"),0),wu:f(v,l("useTypescriptEme"),!1),Amb:f(v,l("useEncryptedEvent"),!0),pX:f(m,l("drmPersistKey"),"unsentDrmData"),Mfb:f(v,l("promiseBasedEme"),!1),r3b:f(v,l("nudgeSourceBuffer"),!1),UBa:f(p,l("seekDelta"),1),S_:f(v,l("preciseSeeking"),!1),P6b:f(v,l("preciseSeekingOnTwoCoreDevice"),!1),q2a:f(S,l("delayErrorHandling")),Fl:f(m,"esn",""),l4a:f(m,"fesn",""),VOb:f(v,l("enablePerformanceLogging"),!1),u3a:f(v,l("enableEmeVerboseLogging"),!1),appId:f(m,"appId","",n),sessionId:f(m,"sessionId","",n),tpa:f(m,"cdnProxyUrl"),tgc:f(v,"usePlayReadyHeaderObject",!1),Q4a:f(b,"forceXhrErrorResponseCode",void 0),Ir:{frc:f(m,"mslApiPath","/msl/"),Prc:f(m,"proxyPath",""),oz:f(m,"uiVersion"),Ofa:f(m,"uiPlatform"),$nc:function(){return"0"},Zza:f(k,"preferredLanguages",O.RHa,/^[a-zA-Z-]{2,5}$/,1),lRb:f(m,l("forceDebugLogLevel"),void 0,/^(ERROR|WARN|INFO|TRACE)$/),Bdc:f(v,"supportPreviewContentPin",!0),Cdc:f(v,"supportWatermarking",!0),bcc:f(v,"showAllSubDubTracks",!1),hpc:f(v,l("failOnGuidMismatch"),!1)},Nda:{enabled:f(v,"qcEnabled",!1),ip:f(m,"qcPackageId","")},vu:f(v,"useRangeHeader",!1),xX:f(v,"enableMilestoneEventList",!0),YEb:f(S,"authenticationKeyNames",M.He({e:"DKE",h:"DKH",w:"DKW",s:"DKS"})),Ndc:f(m,"systemKeyWrapFormat"),Wbc:f(v,"shouldSendUserAuthData",!0),hCa:f(v,"sendUserAuthIfRequired",u.hCa),Qbc:f(v,"shouldClearUserData",!1),LS:f(v,"usesMsl",!0),A2b:f(v,"mslDeleteStore",!1),C2b:f(v,"mslPersistStore",!0),SIb:f(v,"correctNetworkForShortTitles",!0),K6b:f(v,"postplayHighInitBitrate",!1),Hdc:f(v,"supportsUnequalizedDownloadables",!0),Y1a:f(b,l("debugAseDenominator"),100),E7:f(b,"aseAudioBufferSizeBytes",u.E7.ka(H.Xw)),H7:f(b,"aseVideoBufferSizeBytes",u.H7.ka(H.Xw)),hw:f(b,"minInitVideoBitrate",560),bya:f(b,"minHCInitVideoBitrate",560),bC:f(b,"maxInitVideoBitrate",1/0),$Z:f(b,"minInitAudioBitrate",0),YZ:f(b,"minHCInitAudioBitrate",0),LZ:f(b,"maxInitAudioBitrate",65535),dca:f(b,"minAcceptableVideoBitrate",235),KF:f(b,"minRequiredBuffer",3e4),Fj:f(b,"minPrebufSize",7800),hca:f(b,"minCheckBufferingCompleteInterval",999999),JAa:f(g,"rebufferingFactor",1),Yr:f(b,"maxBufferingTime",2600),GEa:f(v,"useMaxPrebufSize",!0),dC:f(b,"maxPrebufSize",45e3),Kxa:f(b,"maxRebufSize",1/0),zaa:f(_,"initialBitrateSelectionCurve",null),l9a:f(b,"initSelectionLowerBound",560),m9a:f(b,"initSelectionUpperBound",1050),w1:f(b,"throughputPercentForAudio",15),Eoa:f(b,"bandwidthMargin",10),Foa:f(v,"bandwidthMarginContinuous",!1),Goa:f(_,"bandwidthMarginCurve",[{m:65,b:8e3},{m:65,b:3e4},{m:50,b:6e4},{m:45,b:9e4},{m:40,b:12e4},{m:20,b:18e4},{m:5,b:24e4}]),mqa:f(b,"conservBandwidthMargin",20),GDa:f(v,"switchConfigBasedOnInSessionTput",!1),NW:f(b,"conservBandwidthMarginTputThreshold",0),nqa:f(_,"conservBandwidthMarginCurve",[{m:80,b:8e3},{m:80,b:3e4},{m:70,b:6e4},{m:60,b:9e4},{m:50,b:12e4},{m:30,b:18e4},{m:10,b:24e4}]),Bkb:f(v,"switchAlgoBasedOnHistIQR",!1),uG:f(m,"switchConfigBasedOnThroughputHistory","none",/^(none|iqr|avg)$/),Jxa:f(p,"maxPlayerStateToSwitchConfig",-1),jxa:f(m,"lowEndMarkingCriteria","none",/^(none|iqr|avg)$/),oia:f(g,"IQRThreshold",.5),Zua:f(m,"histIQRCalcToUse","simple"),dw:f(b,"maxTotalBufferLevelPerSession",0),uX:f(v,"enableCombinedPlaygraphs",!0),ZI:f(v,"enableAdPlaygraphs",!0),pea:f(v,"retainSbrOnFade",!1),Zra:f(k,"excludedContentPlaygraphIds",[]),l9:f(v,"enableDiscontiguousBuffering",!1),Lsa:f(A,"forceImmediateTransitionTypeForTitles",[]),Ksa:f(b,"forceImmediateTransitionExitZone",0),Vfa:f(v,"useBufferSizeLimiter",!1),FEa:f(v,"useLegacyFragmentRounding",!1),F8a:f(b,"highWatermarkLevel",3e4),llb:f(b,"toStableThreshold",3e4),Cfa:f(b,"toUnstableThreshold",u.Cfa.ka(K.pa)),VCa:f(v,"skipBitrateInUpswitch",!1),XEa:f(b,"watermarkLevelForSkipStart",8e3),kaa:f(b,"highStreamRetentionWindow",9e4),Dba:f(b,"lowStreamTransitionWindow",51e4),Vua:f(b,"highStreamRetentionWindowUp",3e5),lxa:f(b,"lowStreamTransitionWindowUp",3e5),Uua:f(b,"highStreamRetentionWindowDown",6e5),kxa:f(b,"lowStreamTransitionWindowDown",0),Tua:f(g,"highStreamInfeasibleBitrateFactor",.5),XB:f(b,"lowestBufForUpswitch",15e3),yba:f(b,"lockPeriodAfterDownswitch",15e3),nxa:f(b,"lowWatermarkLevel",25e3),xy:f(b,"lowestWaterMarkLevel",2e4),oxa:f(v,"lowestWaterMarkLevelBufferRelaxed",!1),Yba:f(g,"mediaRate",1),Qba:f(b,"maxTrailingBufferLen",1e4),fW:f(b,"audioBufferTargetAvailableSize",262144),V1:f(b,"videoBufferTargetAvailableSize",1048576),Obb:f(b,"maxVideoTrailingBufferSize",8388608),rbb:f(b,"maxAudioTrailingBufferSize",393216),C9:f(g,"fastUpswitchFactor",3),hsa:f(g,"fastDownswitchFactor",1),cw:f(b,"maxMediaBufferAllowed",24e4),SCa:f(v,"simulatePartialBlocks",!0),ojb:f(v,"simulateBufferFull",!0),oqa:f(v,"considerConnectTime",!1),lqa:f(g,"connectTimeMultiplier",1),Nab:f(b,"lowGradeModeEnterThreshold",12e4),Oab:f(b,"lowGradeModeExitThreshold",9e4),ubb:f(b,"maxDomainFailureWaitDuration",3e4),qbb:f(b,"maxAttemptsOnFailure",18),$3a:f(v,"exhaustAllLocationsForFailure",!0),Cbb:f(b,"maxNetworkErrorsDuringBuffering",20),Iba:f(b,"maxBufferingTimeAllowedWithNetworkError",12e4),h4a:f(b,"fastDomainSelectionBwThreshold",2e3),Pkb:f(b,"throughputProbingEnterThreshold",4e4),Qkb:f(b,"throughputProbingExitThreshold",34e3),Bab:f(b,"locationProbingTimeout",1e4),o4a:f(b,"finalLocationSelectionBwThreshold",1e4),Nkb:f(g,"throughputHighConfidenceLevel",.75),Okb:f(g,"throughputLowConfidenceLevel",.4),C3a:f(v,"enablePerfBasedLocationSwitch",!1),ww:f(v,"probeServerWhenError",!0),jAa:f(b,"probeRequestTimeoutMilliseconds",8e3),MA:f(v,"allowSwitchback",!0),uR:f(b,"probeDetailDenominator",100),Jba:f(b,"maxDelayToReportFailure",300),Wwa:f(b,"locationStatisticsUpdateInterval",6e4),a1a:f(v,"countGapInBuffer",!1),GYa:f(v,"allowCallToStreamSelector",!0),b_a:f(b,"bufferThresholdForAbort",1e4),k1b:f(b,"maxResponsesInitialTput",6),x3a:f(v,"enableInitialTputLogging",!1),Eza:f(b,"pipelineScheduleTimeoutMs",2),cC:f(b,"maxPartialBuffersAtBufferingStart",2),Lxa:f(b,"maxStreamingSkew",4e3),Hxa:f(b,"maxPendingBufferPercentage",10),iaa:f(b,"headerRequestSize",4096),Qra:f(v,"estimateHeaderSize",!1),XZ:f(b,"minBufferLenForHeaderDownloading",1e4),B0:f(b,"reserveForSkipbackBufferMs",1e4),Hya:f(b,"numExtraFragmentsAllowed",2),Ij:f(v,"pipelineEnabled",!1),Ajb:f(b,"socketReceiveBufferSize",0),N7:f(b,"audioSocketReceiveBufferSize",32768),PS:f(b,"videoSocketReceiveBufferSize",65536),Rua:f(b,"headersSocketReceiveBufferSize",32768),Tfa:f(b,"updatePtsIntervalMs",1e3),Soa:f(b,"bufferTraceDenominator",100),lO:f(b,"bufferLevelNotifyIntervalMs",2e3),bO:f(b,"aseReportDenominator",0),F7:f(b,"aseReportIntervalMs",3e5),xOb:f(v,"enableAbortTesting",!1),rCb:f(b,"abortRequestFrequency",8),uDa:f(b,"streamingStatusIntervalMs",2e3),uC:f(b,"prebufferTimeLimit",24e4),gca:f(b,"minBufferLevelForTrackSwitch",2e3),wza:f(b,"penaltyFactorForLongConnectTime",2),hxa:f(b,"longConnectTimeThreshold",200),Una:f(b,"additionalBufferingLongConnectTime",2e3),Vna:f(b,"additionalBufferingPerFailure",8e3),k0:f(b,"rebufferCheckDuration",6e4),z3a:f(v,"enableLookaheadHints",!1),Kab:f(b,"lookaheadFragments",2),sB:f(v,"enableOCSideChannel",!0),B4:f(y,"OCSCBufferQuantizationConfig",{lv:5,mx:240}),amb:f(v,"updateDrmRequestOnNetworkFailure",!1),p2a:f(v,"deferAseScheduling",!1),tbb:f(b,"maxDiffAudioVideoEndPtsMs",16e3),O8:f(b,"defaultHeaderCacheSize",4),N8:f(b,"defaultHeaderCacheDataPrefetchMs",8e3),lK:f(v,"neverWipeHeaderCache",!0),nya:f(b,"networkFailureResetWaitMs",2e3),mya:f(b,"networkFailureAbandonMs",6e4),Pba:f(b,"maxThrottledNetworkFailures",3),ufa:f(b,"throttledNetworkFailureThresholdMs",200),mxa:f(p,"lowThroughputThreshold",400),Yra:f(v,"excludeSessionWithoutHistoryFromLowThroughputThreshold",!1),Ecb:f(v,"mp4ParsingInNative",!1),Cjb:f(v,"sourceBufferInOrderAppend",!0),RK:f(v,"requireAudioStreamToEncompassVideo",!0),FYa:f(v,"allowAudioToStreamPastVideo",!0),Zi:f(v,"enableManagerDebugTraces",!1),$ab:f(b,"managerDebugMessageInterval",1e3),Zab:f(b,"managerDebugMessageCount",20),qdb:f(v,"notifyManifestCacheEom",!1),Roa:f(b,"bufferThresholdToSwitchToSingleConnMs",18e4),Qoa:f(b,"bufferThresholdToSwitchToParallelConnMs",12e4),lda:f(b,"periodicHistoryPersistMs",3e5),Bea:f(b,"saveVideoBitrateMs",18e4),VYa:f(v,"appendMediaRequestOnComplete",!0),iga:f(v,"waitForDrmToAppendMedia",!1),Q9:f(v,l("forceAppendHeadersAfterDrm"),!1),jRb:f(v,l("forceAppendEncryptedStreamHeaderFirst"),!0),y8b:f(v,l("reappendRequestsOnSkip"),!1),G2b:f(b,"netIntrStoreWindow",36e3),b2b:f(b,"minNetIntrDuration",8e3),bQb:f(b,"fastHistoricBandwidthExpirationTime",10368e3),hFb:f(b,"bandwidthExpirationTime",5184e3),ZPb:f(b,"failureExpirationTime",86400),UWb:f(b,"historyTimeOfDayGranularity",4),KPb:f(v,"expandDownloadTime",!1),o2b:f(b,"minimumMeasurementTime",500),n2b:f(b,"minimumMeasurementBytes",131072),fec:f(b,"throughputMeasurementTimeout",2e3),ZXb:f(b,"initThroughputMeasureDataSize",262144),gec:f(m,"throughputPredictor","ewma"),eec:f(b,"throughputMeasureWindow",5e3),jec:f(b,"throughputWarmupTime",5e3),dec:f(b,"throughputIQRMeasureWindow",5e3),Nsb:f(b,"IQRBucketizerWindow",15e3),yIb:f(b,"connectTimeHalflife",10),r$b:f(b,"responseTimeHalflife",10),TWb:f(b,"historicBandwidthUpdateInterval",2e3),m2b:f(b,"minimumBufferToStopProbing",1e4),TBa:f(m,"secondThroughputEstimator","none"),Whb:f(p,"secondThroughputMeasureWindowInMs",1/0),GOb:f(k,"enableFilters","throughput-ewma throughput-sw throughput-iqr throughput-tdigest avtp entropy".split(" ")),vQb:f(y,"filterDefinitionOverrides",{}),rMb:f(m,"defaultFilter","throughput-ewma"),cac:f(m,"secondaryFilter","none"),sMb:f(y,"defaultFilterDefinitions",{"throughput-ewma":{type:"discontiguous-ewma",mw:5e3,wt:5e3},"throughput-sw":{type:"slidingwindow",mw:5e3},"throughput-iqr":{type:"iqr",mx:1/0,mn:5,bw:15e3,iv:1e3},"throughput-iqr-history":{type:"iqr-history"},"throughput-location-history":{type:"discrete-ewma",hl:14400,in:3600},"respconn-location-history":{type:"discrete-ewma",hl:100,in:25},"throughput-tdigest":{type:"tdigest",maxc:25,c:.5,b:1e3,w:15e3,mn:6},"throughput-tdigest-history":{type:"tdigest-history",maxc:25,rc:"ewma",c:.5,hl:7200},"respconn-ewma":{type:"discrete-ewma",hl:10,in:10},avtp:{type:"avtp"},entropy:{type:"entropy",mw:2e3,sw:6e4,in:"none",mins:1,hdl:[150,230,352,539,825,1264,1936,2966,4543,6958],uhdl:[150,230,352,539,825,1264,1936,2966,4543,6958,10657,16322,25e3]}}),e_:f(v,"needMinimumNetworkConfidence",!0),Joa:f(v,"biasTowardHistoricalThroughput",!0),Ina:f(v,"addHeaderDataToNetworkMonitor",!1),cDa:f(v,"startMonitorOnLoadStart",!1),eBa:f(v,"reportFailedRequestsToNetworkMonitor",!1),Kba:f(p,"maxFastPlayBufferInMs",1/0),Exa:f(p,"maxFastPlayBitThreshold",1/0),foa:f(v,"appendFirstHeaderOnComplete",!0),oEb:f(m,"ase_stream_selector","optimized"),xva:f(m,"initBitrateSelectorAlgorithm","default"),Xoa:f(m,"bufferingSelectorAlgorithm","default"),Z1a:f(m,"ase_ls_failure_simulation",""),Oqa:f(v,"ase_dump_fragments",!1),Pqa:f(b,"ase_location_history",0),$1a:f(b,"ase_throughput",0),b2a:f(v,"ase_simulate_verbose",!1),F6b:f(b,"pollingPeriod",150),W_b:f(b,"loadTimeMs",18e4),N0b:f(b,"marginTimeMs",1e4),pta:f(v,"getDeviceIdFromBindDevice",!1),Hna:f(v,"addFailedLogBlobsToQueue",!0),lfc:{"content-sampling":{Yr:f(b,"contentSamplingMaxBufferingTime",3e3),SR:f(m,"contentSamplingSelectStartingVMAFMethod","fallback"),VV:f(v,"contentSamplingActivateSelectStartingVMAF",!0),iw:f(b,"contentSamplingMinStartingVideoVMAF",80),WZ:f(b,"contentSamplingMinAcceptableVMAF",70),eK:f(b,"contentSamplingMinAllowedVmaf",60)},billboard:{hw:f(b,"billboardMinInitVideoBitrate",1050),bC:f(b,"billboardMaxInitVideoBitrate",null),Fj:f(b,"billboardMinPrebufSize",null),dC:f(b,"billboardMaxPrebufSize",null),Yr:f(b,"billboardMaxBufferingTime",null),cC:f(b,"billboardMaxPartialBuffersAtBufferingStart",null),xy:f(b,"billboardLowestWaterMarkLevel",6e3),XB:f(b,"billboardLowestBufForUpswitch",25e3),uG:f(m,"billboardSwitchConfigBasedOnThroughputHistory","none",/^(none|iqr|avg)$/)},preplay:{hw:f(b,"preplayMinInitVideoBitrate",1050),bC:f(b,"preplayMaxInitVideoBitrate",null),Fj:f(b,"preplayMinPrebufSize",null),dC:f(b,"preplayMaxPrebufSize",null),Yr:f(b,"preplayMaxBufferingTime",null),cC:f(b,"preplayMaxPartialBuffersAtBufferingStart",null),xy:f(b,"preplayLowestWaterMarkLevel",6e3),XB:f(b,"preplayLowestBufForUpswitch",25e3)},embedded:{hw:f(b,"embeddedMinInitVideoBitrate",1050),bC:f(b,"embeddedMaxInitVideoBitrate",null),Fj:f(b,"embeddedMinPrebufSize",null),dC:f(b,"embeddedMaxPrebufSize",null),Yr:f(b,"embeddedMaxBufferingTime",null),cC:f(b,"embeddedMaxPartialBuffersAtBufferingStart",null),xy:f(b,"embeddedLowestWaterMarkLevel",6e3),XB:f(b,"embeddedLowestBufForUpswitch",25e3)},"video-merch-bob-horizontal":{hw:f(b,"videoMerchBobHorizontalMinInitVideoBitrate",null),bC:f(b,"videoMerchBobHorizontalMaxInitVideoBitrate",null),Fj:f(b,"videoMerchBobHorizontalMinPrebufSize",null),dC:f(b,"videoMerchBobHorizontalMaxPrebufSize",null),Yr:f(b,"videoMerchBobHorizontalMaxBufferingTime",null),cC:f(b,"videoMerchBobHorizontalMaxPartialBuffersAtBufferingStart",null),xy:f(b,"videoMerchBobHorizontalLowestWaterMarkLevel",null),XB:f(b,"videoMerchBobHorizontalLowestBufForUpswitch",null)},"mini-modal-horizontal":{hw:f(b,"miniModalHorizontalMinInitVideoBitrate",null),bC:f(b,"miniModalHorizontalMaxInitVideoBitrate",null),Fj:f(b,"miniModalHorizontalMinPrebufSize",null),dC:f(b,"miniModalHorizontalMaxPrebufSize",null),Yr:f(b,"miniModalHorizontalMaxBufferingTime",500),cC:f(b,"miniModalHorizontalMaxPartialBuffersAtBufferingStart",null),xy:f(b,"miniModalHorizontalLowestWaterMarkLevel",null),XB:f(b,"miniModalHorizontalLowestBufForUpswitch",null)},live:{Fj:f(b,"liveMinPrebufSize",2e3),dC:f(b,"liveMaxPrebufSize",4e3),Yr:f(b,"liveMaxBufferingTime",500)}},dPb:f(v,"enableVerbosePlaydelayLogging",!1),YOb:f(v,"enableSeamless",!1),Yua:f(b,"hindsightDenominator",0),Xua:f(b,"hindsightDebugDenominator",0),maa:f(y,"hindsightParam",{numB:1/0,bSizeMs:1e3,fillS:"last",fillHl:1e3}),yX:f(v,"enableSessionHistoryReport",!1),zra:f(b,"earlyStageEstimatePeriod",1e4),fab:f(b,"lateStageEstimatePeriod",3e4),Nba:f(b,"maxNumSessionHistoryStored",30),mca:f(b,"minSessionHistoryDuration",3e4),Cy:f(b,"maxActiveRequestsPerSession",3),Gba:f(b,"maxActiveRequestsSABCell100",2),Qwa:f(v,"limitAudioDiscountByMaxAudioBitrate",!0),pe:f(y,"browserInfo",{}),WFb:f(b,l("busyGracePeriod"),199),Bac:f(v,l("sendTransitionLogblob"),!0),nOb:f(v,l("editVideoFragments"),!0),h9:f(v,l("earlyAppendSingleChildBranch"),!0),FXb:f(v,l("includeSegmentInfoOnLogblobs"),!0),QPb:f(v,"exposeTestData",!1),PPb:f(v,l("exposeErrorData"),!1),Qqa:f(v,"declareBufferingCompleteAtSegmentEnd",!0),tI:f(v,l("applyProfileTimestampOffset"),!1),xo:f(v,l("applyProfileStreamingOffset"),!1),TZ:f(v,l("mediaSourceSupportsNegativePts"),!1),QDb:f(v,l("allowSmallSeekDelta"),!1),rcc:f(b,l("smallSeekDeltaThresholdMilliseconds"),B.Y4),COb:f(v,"enableCDMAttestedDescriptors",!1),iea:f(v,"requireDownloadDataAtBuffering",!1),jea:f(v,"requireSetupConnectionDuringBuffering",!1),LAa:f(v,"recordFirstFragmentOnSubBranchCreate",!1),HFb:f(v,"branchingAudioTrackFrameDropSmallSeekFix",!0),Emb:f(v,"useMobileVMAF",!1),y2a:f(m,"desiredVMAFTypeMobile","phone_plus_lts"),z2a:f(m,"desiredVMAFTypeNonMobile","plus_lts"),VV:f(v,"activateSelectStartingVMAF",!1),iw:f(b,"minStartingVideoVMAF",1),WZ:f(b,"minAcceptableVMAF",1),eK:f(b,"minAllowedVmaf",1),TDb:f(v,"alwaysNotifyEOSForPlaygraph",!0),gP:f(v,"enableNewAse",!0),Q1:f(v,"useNewApi",!0),Hba:f(b,"maxAllowedOutstandingRequests",4),XN:f(v,"alwaysRunUnderflowTimer",!0),cya:f(b,"minStreamableConcurrencyWindow",3e3),rDa:f(g,"streamableConcurrencyFactor",.3),yW:f(b,"bufferingConcurrencyWindow",7800),kcc:f(v,"singleStreamablePerBranch",!0),n9:f(v,"enableResolutionVMAFStreamFilter",!1),oea:f(y,"resolutionVMAFCappingRuleList",{}),zza:f(p,"percentCapTitlesForResolutionVMAFStreamFilter",100),sNb:f(v,"disableSkipping",!1),Xfa:f(v,"useHLSPlayer",u.Xfa),DEa:f(v,l("useExitZones"),!0),$9b:f(v,"requestSegmentVmaf",!1),jR:f(y,"perFragmentVMAFConfig",{enabled:!1}),jza:f(b,"paddingDurationMs",1e3),kza:f(m,"paddingMediaType","padding"),FDa:f(v,"supportsPtsChanged",!1)},h=!0,I.jqa=function(t){var e,i,n,r=R.Fa.get(V.$c).id;if(0<I.config.Gab&&0==r%I.config.Gab)try{e=R.Fa.get(U.jo),i=R.Fa.get(F.Sz).nv("config","info",{params:t}),e.Jc(i)}catch(t){R.log.error("Failed to log config$apply",t)}bt._cad_global.config=I.config,C.Ua(t),t&&(s=M.He({},t,{HZ:!0}),M.He(s,a,{HZ:!0}),function i(t,n){M.ih(t,function(t,e){L.gd(e)?n[t]=e.call(void 0,n[t]):L.fk(e)&&(n[t]=n[t]||{},i(e,n[t]))})}(c,I.config),s.istestaccount&&R.log.trace("Config applied for",(r=h?s:t,n=[],M.ih(r,function(t,e){var i;try{i="videoapp"===t.toLowerCase()?"[object object]":JSON.stringify(e)}catch(t){i="cantparse"}n.push(t+"="+i)}),n.join("\n"))),h=!1)},I.jqa(s)},I.kqa=function(t){return t=e(t),M.He({},n(178)(t),{Xca:!0})},I.I0a=function(t,e,i){return i=!!i&&(0<=i.indexOf("h264hpl")||0<=i.indexOf("vp9")||0<=i.indexOf("av1")),t={Gy:t?I.config.X1b:I.config.Gy,gC:t?I.config.f2b:i?I.config.h2b:I.config.gC,h9:!e},M.He({},n(178)(t),{Xca:!0})},I.wIb=e,I.vIb=i},function(t,e,i){function n(){return(n=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)}function r(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)}function a(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function o(t,e){var i,n,r={};for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(n=0,i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(r[i[n]]=t[i[n]]);return r}function s(t,e,i,n){var r,a=arguments.length,o=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.fq)o=Reflect.fq(t,e,i,n);else for(var s=t.length-1;0<=s;s--)(r=t[s])&&(o=(a<3?r(o):3<a?r(e,i,o):r(e,i))||o);return 3<a&&o&&Object.defineProperty(e,i,o),o}function u(i,n){return function(t,e){n(t,e,i)}}function c(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.Ec)return Reflect.Ec(t,e)}function h(t,o,s,u){return new(s=s||Promise)(function(i,e){function n(t){try{a(u.next(t))}catch(t){e(t)}}function r(t){try{a(u.throw(t))}catch(t){e(t)}}function a(t){var e;t.done?i(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(n,r)}a((u=u.apply(t,o||[])).next())})}function f(n,r){var a,o,s,u,t;function e(i){return function(t){var e=[i,t];if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,s&&(u=2&e[0]?s.return:e[0]?s.throw||((u=s.return)&&u.call(s),0):s.next)&&!(u=u.call(s,e[1])).done)return u;switch(s=0,(e=u?[2&e[0],u.value]:e)[0]){case 0:case 1:u=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,s=e[1],e=[0];continue;case 7:e=a.il.pop(),a.Ih.pop();continue;default:if(!(u=0<(u=a.Ih).length&&u[u.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!u||e[1]>u[0]&&e[1]<u[3]))a.label=e[1];else if(6===e[0]&&a.label<u[1])a.label=u[1],u=e;else{if(!(u&&a.label<u[2])){u[2]&&a.il.pop(),a.Ih.pop();continue}a.label=u[2],a.il.push(e)}}e=r.call(n,a)}catch(t){e=[6,t],s=0}finally{o=u=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}return a={label:0,ib:function(){if(1&u[0])throw u[1];return u[1]},Ih:[],il:[]},t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t}function l(t,e,i,n){t[n=void 0===n?i:n]=e[i]}function d(t,e){for(var i in t)"default"===i||e.hasOwnProperty(i)||(e[i]=t[i])}function p(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return{value:(t=t&&n>=t.length?void 0:t)&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function b(t,e){var i,n,r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;t=r.call(t),n=[];try{for(;(void 0===e||0<e--)&&!(i=t.next()).done;)n.push(i.value)}catch(t){var a={error:t}}finally{try{i&&!i.done&&(r=t.return)&&r.call(t)}finally{if(a)throw a.error}}return n}function g(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(b(arguments[e]));return t}function m(){for(var t,e=0,i=0,n=arguments.length;i<n;i++)e+=arguments[i].length;for(e=Array(e),i=t=0;i<n;i++)for(var r=arguments[i],a=0,o=r.length;a<o;a++,t++)e[t]=r[a];return e}function v(t){return this instanceof v?(this.rz=t,this):new v(t)}function y(t,e,i){var r,a,o;function n(n){r[n]&&(a[n]=function(i){return new Promise(function(t,e){1<o.push([n,i,t,e])||s(n,i)})})}function s(t,e){var i;try{(i=r[t](e)).value instanceof v?Promise.resolve(i.value.rz).then(u,c):h(o[0][2],i)}catch(t){h(o[0][3],t)}}function u(t){s("next",t)}function c(t){s("throw",t)}function h(t,e){t(e),o.shift(),o.length&&s(o[0][0],o[0][1])}if(Symbol.asyncIterator)return r=i.apply(t,e||[]),o=[],a={},n("next"),n("throw"),n("return"),a[Symbol.asyncIterator]=function(){return this},a;throw new TypeError("Symbol.asyncIterator is not defined.")}function w(n){var t,r;function e(e,i){t[e]=n[e]?function(t){return(r=!r)?{value:v(n[e](t)),done:"return"===e}:i?i(t):t}:i}return t={},e("next"),e("throw",function(t){throw t}),e("return"),t[Symbol.iterator]=function(){return this},t}function A(o){var t,e;function i(a){e[a]=o[a]&&function(r){return new Promise(function(t,e){var i,n;r=o[a](r),i=t,t=e,n=r.done,e=r.value,Promise.resolve(e).then(function(t){i({value:t,done:n})},t)})}}if(Symbol.asyncIterator)return(t=o[Symbol.asyncIterator])?t.call(o):(o=p(o),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);throw new TypeError("Symbol.asyncIterator is not defined.")}function _(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function E(t){var e;if(t&&t.__esModule)return t;if(e={},null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function k(t){return t&&t.__esModule?t:{default:t}}function S(t,e){if(e.has(t))return e.get(t);throw new TypeError("attempted to get private field on non-instance")}function T(t,e,i){if(e.has(t))return e.set(t,i),i;throw new TypeError("attempted to set private field on non-instance")}i.r(e),i.d(e,"__extends",function(){return a}),i.d(e,"__assign",function(){return n}),i.d(e,"__rest",function(){return o}),i.d(e,"__decorate",function(){return s}),i.d(e,"__param",function(){return u}),i.d(e,"__metadata",function(){return c}),i.d(e,"__awaiter",function(){return h}),i.d(e,"__generator",function(){return f}),i.d(e,"__createBinding",function(){return l}),i.d(e,"__exportStar",function(){return d}),i.d(e,"__values",function(){return p}),i.d(e,"__read",function(){return b}),i.d(e,"__spread",function(){return g}),i.d(e,"__spreadArrays",function(){return m}),i.d(e,"__await",function(){return v}),i.d(e,"__asyncGenerator",function(){return y}),i.d(e,"__asyncDelegator",function(){return w}),i.d(e,"__asyncValues",function(){return A}),i.d(e,"__makeTemplateObject",function(){return _}),i.d(e,"__importStar",function(){return E}),i.d(e,"__importDefault",function(){return k}),i.d(e,"__classPrivateFieldGet",function(){return S}),i.d(e,"__classPrivateFieldSet",function(){return T})},function(t,e,i){var n;function r(i){return i.filter(function(t,e){return i.indexOf(t)===e})}_esm(e),e.Fca=e.UVb=e.TIb=e.flatten=e.mcb=e.jIb=e.D7=e.cv=e.fZa=e.dW=e.C7=e.Yp=e.moa=e.Xc=void 0,n=i(0),e.Xc=function(t,e){for(var i=0;i<t.length;i++)if(e(t[i],i,t))return t[i]},e.moa=function(t,e){for(var i=t.length-1;0<=i;--i)if(e(t[i],i,t))return t[i]},e.Yp=function(t,n){var r=-1;return t.some(function(t,e,i){return n(t,r=e,i)})?r:-1},e.C7=function(t,e){for(var i=t.length-1;0<=i;i--)if(e(t[i],i,t))return i;return-1},e.dW=r,e.fZa=function(t,e){return-1!==(e=t.indexOf(e))&&(t.splice(e,1),!0)},e.cv=function(t,i,n){return n?t.filter(function(e){return!i.some(function(t){return n(e,t)})}):t.filter(function(t){return-1===i.indexOf(t)})},e.D7=function(t,e){return r(t.concat(e))},e.jIb=function(i){return function(t,e){return i(t)-i(e)}},e.mcb=function(i){return function(t,e){return i(t)<i(e)?t:e}},e.flatten=function(t){var e;return(e=[]).concat.apply(e,n.__spreadArray([],n.__read(t),!1))},e.TIb=function(t,i){return void 0===i&&(i=function(t){return t}),t.reduce(function(t,e){return void 0===t[e=i(e)]?t[e]=1:++t[e],t},{})},e.UVb=function(t,n){return t.reduce(function(t,e){var i=n(e);return void 0===t[i]?t[i]=[e]:t[i].push(e),t},{})},e.Fca=function(t){return null!=t}},function(t,e,i){var n,r,a;function o(){return a=a||n.Fa.get(r.Hz)}function s(t,e){return o().assert(t,e)}_esm(e),e.aMb=e.Nqa=e.ULb=e.YLb=e.NO=e.ZW=e.XLb=e.ZLb=e.$W=e.X1a=e.WLb=e.VLb=e.Ua=e.$Lb=e.Bob=void 0,n=i(9),r=i(112),e.Bob=function(){s(!1)},e.$Lb=!0,a=void 0,e.Ua=s,e.VLb=function(t,e){return o().sEb(t,e)},e.WLb=function(t,e){return o().tEb(t,e)},e.X1a=function(t,e){return o().I7(t,e)},e.$W=function(t,e){return o().zEb(t,e)},e.ZLb=function(t,e){return o().xEb(t,e)},e.XLb=function(t,e){return o().poa(t,e)},e.ZW=function(t,e){return o().vEb(t,e)},e.NO=function(t,e){return o().yEb(t,e)},e.YLb=function(t,e){return o().wEb(t,e)},e.ULb=function(t,e){return o().rEb(t,e)},e.Nqa=function(t,e){return o().uEb(t,e)},e.aMb=function(){return o().uYb()}},function(t,e,i){var n;function r(t,e,i,n,r){this.Xb=t,this.type=e,this.byteOffset=i,this.byteLength=n,this.parent=r,this.oe={},this.uK=n}_esm(e),n=i(102),e.S=!1,r.vB=function(t,e){var i;function n(t){t&&t.vB&&((t=t.vB(e)).length&&(i=i.concat(t)))}if(i=[],t.type===e&&i.push(t),t.oe)for(var r in t.oe)r=t.oe[r],Array.isArray(r)&&r.forEach(n);return i},r.XV=function(t,e){void 0===t.oe[e.type]&&(t.oe[e.type]=[]),t.oe[e.type].push(e)},r.dy=function(t,e){return r.vB(t,e)[0]},Object.defineProperties(r.prototype,{startOffset:{get(){return this.byteOffset},enumerable:!0,configurable:!0},length:{get(){return this.byteLength},enumerable:!0,configurable:!0},R:{get(){return this.Xb},enumerable:!0,configurable:!0}}),r.prototype.Eh=function(){var t=this.Xb.ic();this.version=t>>24,this.flags=16777215&t},r.prototype.XV=function(t){r.XV(this,t)},r.prototype.vB=function(t){return r.vB(this,t)},r.prototype.dy=function(t){return r.dy(this,t)},r.prototype.parse=function(){return!0},r.prototype.dJ=function(){return!0},r.prototype.Nq=function(t){if((t=this.oe[t])&&Array.isArray(t)&&1===t.length)return t[0]},r.prototype.Sn=function(t,e){e=void 0===e?this.Xb.offset:e,n.assert(e>=this.startOffset+8&&e+t<=this.startOffset+this.uK,"Removal range [0x"+e.toString(16)+"-0x"+(e+t).toString(16)+") must be in box [0x"+this.startOffset.toString(16)+"-0x"+(this.startOffset+this.uK).toString(16)+")"),this.Xb.Sn(t,e,this)},r.prototype.fea=function(t,e,i){i=void 0===i?this.Xb.offset:i,n.assert(i>=this.startOffset+8&&i+t<=this.startOffset+this.uK,"Removal range [0x"+i.toString(16)+"-0x"+(i+t).toString(16)+") must be in box [0x"+this.startOffset.toString(16)+"-0x"+(this.startOffset+this.uK).toString(16)+")"),this.Xb.fea(t,e,i,this)},r.prototype.pgb=function(t,e,i){if(1<i){for(var n=[];0<i--;)n.push(this.aXa(t,e));return n}return this.aXa(t,e)},r.prototype.Zy=function(t){var n,r=this;return void 0===n&&(n={}),t.forEach(function(t){var e,i;if("offset"===t.type){if(0<(e=t.offset)%8)throw Error("Requested offset "+t.offset+"is not an even byte multiple");r.Xb.offset+=e/8}else for(e in t)i=t[e],n[e]="string"==typeof i?r.pgb(i):r.pgb(i.type,i.length,i.hEb)}),n},r.prototype.aXa=function(t,e){var i=this.byteLength-this.Xb.offset+this.startOffset;switch(void 0===e&&(e=i),t){case"int8":t=this.Xb.Gd();break;case"int64":t=this.Xb.Tl();break;case"int32":t=this.Xb.ic();break;case"int16":t=this.Xb.mh();break;case"string":t=this.Xb.p8b(Math.min(e,i));break;default:throw Error("Invalid type: "+t)}return t},r.qd=!1,e.dg=r},function(t,o,e){var i,a,s,n,r,u;function c(t){return i.Ua(void 0!==n[t]),n[t]}_esm(o),o.OIb=o.R4a=o.wn=o.rg=o.cIb=o.ff=o.yy=o.trim=o.ava=o.kkb=o.agb=o.s5b=o.qk=o.gZa=o.A_a=o.He=o.ih=void 0,i=e(23),a=e(14),s=e(15),o.ih=function(t,e){for(var i in t)t.hasOwnProperty(i)&&e(i,t[i])},o.He=o.He||function(i,t,e){var n,r,a;return t&&(e?(n=e.HZ,r=e.prefix,a=e.Xca,o.ih(t,function(t,e){a&&!s.rd(e)||(i[(r||"")+(n?t.toLowerCase():t)]=e)})):o.ih(t,function(t,e){i[t]=e})),i},o.A_a=function(t,e,i,n){var r;return t&&(r=t[e],s.gd(r)&&(i=r.apply(t,a.slice.call(arguments,3)))),i},o.gZa=function(t){for(var e={},i=t.length;i--;)e[t[i]]=!0;return e},o.qk=o.qk||function(t){return parseInt(t,10)},o.s5b=function(t){return/^true$/i.test(t)},o.agb=function(t,e){return a.Dp(t+a.XT()*(e-t))},o.kkb=function(t){return JSON.stringify(t,null,"  ")},o.ava=(n={"&":"&amp;","'":"&#39;",'"':"&quot;","<":"&lt;",">":"&gt;"},r=/[&'"<>]/g,function(t){return t.replace(r,c)}),o.trim=(u=/^\s+|\s+$/gm,function(t){return t.replace(u,"")}),o.yy=function(t){return Array.isArray(t)?t:[t]},o.ff=o.ff||function(t){var e,i,n;if(t)return e=t.stack,i=t.number,n=(n=t.message)||""+t,e?0!=(t=""+e).indexOf(n)&&(t=n+"\n"+t):t=n,i&&(t+="\nnumber:"+i),t},o.cIb=function(t){for(var e,i=0;i<arguments.length;++i);for(var i=0,n=arguments.length;i<n;)if(e=arguments[i++],s.rd(e))return e},o.rg=function(t){return s.Oa(t)?t.toFixed(0):""},o.wn=function(t){return s.Oa(t)?(t/1e3).toFixed(0):""},o.R4a=function(t){return s.Oa(t)?t.toFixed():""},o.OIb=function(t){for(var e=[],i=0;i<t.length;i++)e[i]=t[i];return e}},function(t,e){var i;_esm(e),e.Jz=e.$Ta=e.pwb=e.Vq=e.wf=e.Tm=e.Ww=e.u=void 0,(i=e.u||(e.u={}))[i.Audio=0]="Audio",i[i.STa=1]="Video",(i=e.Ww||(e.Ww={}))[i.Iz=0]="Default",i[i.Wz=1]="Microsoft",(i=e.Tm||(e.Tm={}))[i.Iz=0]="Default",i[i.XL=1]="Chrome",i[i.Wz=2]="Microsoft",(i=e.wf||(e.wf={}))[i.rU=0]="SD",i[i.s3=1]="HD",i[i.HM=2]="UHD",i[i.Zw=3]="DV",i[i.gM=4]="HDR10",i[i.gD=5]="AVCHigh",i[i.HD=6]="VP9",i[i.sl=7]="AV1",(i=e.Vq||(e.Vq={}))[i.n4=0]="Level_1_4",i[i.$G=1]="Level_2_2",e.pwb=function(){},(i=e.$Ta||(e.$Ta={}))[i.Plc=0]="Platform",i[i.cjc=1]="CurrentTitle",e.Jz="DeviceCapabilitiesSymbol"},function(t,e){_esm(e),e.Tg="IsTypeSymbol"},function(t,e,i){_esm(e),t=i(77),e.default={Eic:{ox:0,dmc:1,name:["STARTUP","STEADY"]},L3:{Dg:0,cmc:1,lwb:2,name:["STARTING","STABLE","UNSTABLE"]},Sd:{P:t.u.P,J:t.u.J,Ob:t.u.Ob,name:["AUDIO","VIDEO","TEXT"]},Ckc:{P:t.u.P,J:t.u.J,Ob:t.u.Ob,name:["AUDIO","VIDEO","TEXT"]},ji:{URL:0,rH:1,LOCATION:2,Xz:3,name:["URL","SERVER","LOCATION","NETWORK"]},Sj:{HAVE_NOTHING:0,pD:1,oD:2,CT:3,name:["HAVE_NOTHING","HAVE_SOMETHING","HAVE_MINIMUM","HAVE_ENOUGH"]},nx:{kic:0,bkc:1,Glc:2,clc:3,Alc:4,Dmc:5,gkc:6,Bkc:7,ox:8,Jf:9,wja:10,Vub:11,Yga:12,Vsb:13,Usb:14,Cvb:15,Bvb:16,Zsb:17,Uvb:18,name:"maxweightedbw fastselection reuseprevious nextdomain onlychoice tolowgrade fromlowgrade mcqueen startup error probeswitchback probeswitchaway bitrate locswitchback locswitchaway serverswitchback serverswitchaway manifestadded switchlivedvr".split(" ")},Ejc:{Xz:0,djc:1,name:["NETWORK","DECODE"]},amc:{ejc:"delayedSeamless",okc:"hideLongTransition"}}},function(t,e){_esm(e),e.Lh="ClockSymbol"},function(t,e){_esm(e),e.ki="UtilitiesSymbol"},function(t,e){_esm(e),e.Ji="Base64EncoderSymbol"},function(t,e,i){var u,n;function r(t,e){return t&&t.Yv&&(e||!1!==t.Ev)}function c(t,e,i){return!u.Oa(t)||t<e?e:i<t?i:t}u=i(11),n=new(i(3).default.Console)("ASEJS_STREAM_SELECTOR","media|asejs"),t.exports={console:n,debug:!1,assert:function(t,e){if(!t)throw n.error("Assertion failed"+(t=e?" : "+e:"")),Error("ASEJS_STREAM_SELECTOR assertion failed"+t)},OJ:r,ysa:function(i,t,n){var e,r,a,o;function s(t){var e=i[t];return e.Yv&&(!n||n(e,t))&&(o=t,1)}for(r=0,a=e=i.length,u.isArray(t)&&(r=c(t[0],0,e),a=c(t[1],0,e),t=t[2]),e=(t=c(t,r-1,a))-1;r<=e;--e)if(s(e))return o;for(e=t+1;e<a;++e)if(s(e))return o;return-1},y2b:function(t,e){return Math.floor(t/(125*e)*1e3)},ZFb:function(t,e){return Math.ceil(t/1e3*e*125)},hqc:function(t,e){return!t.slice(e+1).some(r)},Hp:function t(e){if(!(this instanceof t))return new t(e);this.Ke=u.Oa(e)?e:void 0},Xc:function(t,n){var r;return t.some(function(t,e,i){return n(r=t,e,i)})?r:void 0},Yp:function(t,n){var r;return t.some(function(t,e,i){return n(t,r=e,i)})?r:-1},j8:c}},function(t,e){_esm(e),e.qha="ConfigurableInputsSymbol",e.Sm="ValidatingConfigurableInputsSymbol",e.L2="ConfigNameSymbol",e.MT="InitParamsSymbol"},function(t,e){_esm(e),e.nj="AsyncComponentLoaderSymbol"},function(t,e,i){_esm(e),(t=i(0)).__exportStar(i(904),e),t.__exportStar(i(153),e),t.__exportStar(i(905),e),t.__exportStar(i(906),e),t.__exportStar(i(907),e),t.__exportStar(i(908),e),t.__exportStar(i(407),e),t.__exportStar(i(909),e),t.__exportStar(i(910),e)},function(t,e,i){var s,r,a;function o(e,i,n,r,a){var o;Object.getOwnPropertyNames(e).filter(function(t){return a(t)&&(n||!Object.prototype.hasOwnProperty.call(i,t))&&(r||!(t in i))}).forEach(function(t){void 0!==(o=Object.getOwnPropertyDescriptor(e,t))&&Object.defineProperty(i,t,o)})}function u(t,e,i,n){var r,a=[];i||(a=Object.getOwnPropertyNames(e)),n||(a=function(t){var e,i,n,r=Object.getOwnPropertyNames(t);for(t=Object.getPrototypeOf(t);t!==Object.prototype;){try{e=void 0;for(var a=s.__values(Object.getOwnPropertyNames(t)),o=a.next();!o.done;o=a.next())n=o.value,-1===r.indexOf(n)&&r.push(n)}catch(t){e={error:t}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(e)throw e.error}}t=Object.getPrototypeOf(t)}return r}(e)),null!==(r=Object.getPrototypeOf(t))&&r!==Object.prototype&&u(r,e,i,n),o(t,e,!0,!0,function(t){return"constructor"!==t&&-1===a.indexOf(t)})}_esm(e),e.Ve=e.QIb=void 0,s=i(0),r=i(2),e.QIb=u,a=Object.getOwnPropertyNames(Function),e.Ve=function(t,e,i,n){return void 0===i&&(i=!0),(n=void 0===n?!0:n)||r.assert(!i),t.prototype?(u(t.prototype,e.prototype,i,n),o(t,e,i,n,function(t){return-1===a.indexOf(t)})):o(t,e.prototype,i,n,function(t){return-1===a.indexOf(t)}),e}},function(t,e,i){var l;function n(t,e,i,n,r,a,o,s,u,c,h,f){this.code=void 0===t?l.Z.mo:t,this.Kc=e,this.Xd=i,this.Lo=n,this.iC=r,this.message=a,this.details=o,this.data=s,this.$k=u,this.m6b=c,this.alert=h,this.Yna=f,this.ha=!1}_esm(e),e.jd=void 0,l=i(4),n.ff=function(t){var e,i,n;return t?(e=t.stack,i=t.number,n=(n=t.message)||""+t,e?0!==(t=""+e).indexOf(n)&&(t=n+"\n"+t):t=n,i&&(t+="\nnumber:"+i),t):""},n.prototype.fX=function(t){this.details=n.ff(t),this.data=t},n.prototype.toString=function(){return JSON.stringify(this.toJSON)},n.prototype.toJSON=function(){return{code:this.code,subCode:this.Kc,extCode:this.Xd,edgeCode:this.Lo,mslCode:this.iC,message:this.message,details:this.details,data:this.data,errorDisplayMessage:this.$k,playbackServiceError:this.m6b}},n.Qsa=function(t,e){return new n(t,l.Y.Om,void 0,void 0,void 0,void 0,e.message,e.stack)},n.ynb=function(t,e){return new n(t,e,void 0,void 0,void 0,void 0,void 0,void 0)},n.uhc=function(t,e,i){return new n(t,e,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,i)},e.jd=n},function(t,e){_esm(e),e.iUa="WindowTimersSymbol",e.YG="JSONSymbol",e.LTa="UserAgentSymbol",e.tM="NavigatorSymbol",e.ztb="MediaSourceSymbol",e.mMa="LocationSymbol",e.bIa="DateSymbol",e.Gja="PerformanceSymbol",e.J4="PlatformExtraInfoSymbol"},function(t,e){var i;_esm(e),e.Bp=e.fx=e.Nz=void 0,(i=e.Nz||(e.Nz={}))[i.cTa=0]="Test",i[i.HLa=1]="Int",i[i.Vvb=2]="Staging",i[i.jvb=3]="Prod",(i=e.fx||(e.fx={}))[i.mU=0]="PreferMsl",i[i.aRa=1]="PreferNoMsl",i[i.Ttb=2]="NoMsl",e.Bp="GeneralConfigSymbol"},function(t,i,e){var n,a,c,o,h,r;function s(){var t,e;return(t=i.J$.YWa)?t:(t=u(t=0<=(e=(t=o.x4.search.substr(1)).indexOf("#"))?t.substr(0,e):t),i.J$.YWa=t)}function u(t){for(var e,i=/[+]/g,n=(t||"").split("&"),r={},a=0;a<n.length;a++)0<=(e=(t=c.trim(n[a])).indexOf("="))?r[decodeURIComponent(t.substr(0,e).replace(i,"%20")).toLowerCase()]=decodeURIComponent(t.substr(e+1).replace(i,"%20")):r[t.toLowerCase()]=null;return r}function f(t){return(t=/function (.{1,})\(/.exec(t.toString()))&&1<t.length?t[1]:""}function l(t){return f(t.constructor)}function d(t){return o.sort.call(t,function(t,e){return t-e})}function p(t){for(var e=0,i=t.length;i--;)e+=t[i];return e}_esm(i),i.I6b=i.wJ=i.g6a=i.bba=i.D6b=i.j$a=i.dpb=i.epb=i.eRb=i.jv=i.sIb=i.N9=i.sQb=i.sK=i.vob=i.bT=i.wob=i.x2=i.uob=i.rYb=i.createElement=i.SW=i.k7b=i.Jya=i.kta=i.getFunctionName=i.E_=i.J$=i.LUb=i.hgb=i.uYa=i.Q0a=i.m8b=i.zE=i.x0a=void 0,n=e(17),a=e(9),c=e(25),o=e(14),h=e(15),r=e(48),i.x0a=function(t,e){if(t===e)return!0;if(!t||!e)return!1;for(var i in t)if(t.hasOwnProperty(i)&&(!e.hasOwnProperty(i)||t[i]!==e[i]))return!1;return!0},i.zE=i.zE||function(t,e){if(t.length!=e.length)return!1;for(var i=t.length;i--;)if(t[i]!=e[i])return!1;return!0},i.m8b=function(t){var e;if(t&&(e=t.length))return t[c.agb(0,e-1)]},i.Q0a=function(t,e){if(t.length!=e.length)return!1;t.sort(),e.sort();for(var i=t.length;i--;)if(t[i]!==e[i])return!1;return!0},i.uYa=function(e,i,n){e.addEventListener(i,function t(){e.removeEventListener(i,t),n.apply(this,arguments)})},i.hgb=function(){for(var t,e,i=o.Nh.cookie.split("; "),n=i.length,r={},a=0;a<n;a++)(t=c.trim(i[a]))&&0<(e=t.indexOf("="))&&(r[t.substr(0,e)]=t.substr(e+1));return r},i.LUb=s,i.J$=Object.assign(s,{YWa:void 0}),i.E_=u,i.getFunctionName=f,i.kta=l,i.Jya=function(t){var i="";return h.isArray(t)||h.mwa(t)?i=o.reduce.call(t,function(t,e){return t+(32<=e&&e<128?o.TSa(e):".")},""):h.vg(t)?i=t:c.ih(t,function(t,e){i+=(i?", ":"")+"{"+t+": "+(h.gd(e)?f(e)||"function":e)+"}"}),"["+l(t)+" "+i+"]"},i.k7b=function(t,e){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)},i.SW=i.SW||function(t){var i="";return c.ih(t,function(t,e){i+=(i?";":"")+t+":"+e}),i},i.createElement=i.createElement||function(t,e,i,n){var r=o.Nh.createElement(t);return e&&(r.style.cssText=e),i&&(r.innerHTML=i),n&&c.ih(n,function(t,e){r.setAttribute(t,e)}),r},i.rYb=function(t,e){var i=t[0];if(e<=i[0])return i.slice(1);for(var n,r=1;n=t[r++];){if(e<=n[0]){for(t=(e-i[0])/(n[0]-i[0]),e=[],r=1;r<i.length;r++)e.push((i[r]||0)+t*((n[r]||0)-(i[r]||0)));return e}i=n}return i.slice(1)},i.uob=function(t,e){for(var i,n={},r=0;r<e.length;r++){if("string"!=typeof(i=e[r])&&"number"!=typeof i)return!1;n[e[r]]=1}for(r=0;r<t.length;r++)if(!n[i=t[r]])return!1;return!0},i.x2=d,i.wob=p,i.bT=function(t,e){var i,n,r=-1,a=t.length;if(1===arguments.length){for(;++r<a&&!(null!=(i=t[r])&&i<=i);)i=void 0;for(;++r<a;)null!=(n=t[r])&&i<n&&(i=n)}else{for(;++r<a&&!(null!=(i=e.call(t,t[r],r))&&i<=i);)i=void 0;for(;++r<a;)null!=(n=e.call(t,t[r],r))&&i<n&&(i=n)}return i},i.vob=function(t,e){var i,n,r=-1,a=t.length;if(1===arguments.length){for(;++r<a&&!(null!=(i=t[r])&&i<=i);)i=void 0;for(;++r<a;)null!=(n=t[r])&&n<i&&(i=n)}else{for(;++r<a&&!(null!=(i=e.call(t,t[r],r))&&i<=i);)i=void 0;for(;++r<a;)null!=(n=e.call(t,t[r],r))&&n<i&&(i=n)}return i},i.sK=function(i){return h.gd(i.then)?i:new Promise(function(t,e){i.oncomplete=function(){t(i.result)},i.onerror=function(){e(i.error)}})},i.sQb=function(t,e){var i,n,r,a,o,s;function u(t){i.indexOf(t)<0&&h.Oa(t)&&i.push(t)}if(d(t=t.slice()),i=[],!e||!e.length)return t;if(!t.length)return[];n=e.length;try{for(;n--;)switch(a=""+e[n],o=c.qk(a),a[a.length-1]){case"-":for(r=t.length;r--;)if((s=t[r])<o){u(s);break}break;case"+":for(r=0;r<t.length;r++)if(o<(s=t[r])){u(s);break}break;default:0<=t.indexOf(o)&&u(o)}}catch(t){}return i.length||i.push(t[0]),d(i),i},i.N9=i.N9||function(t,e,i){var n;return t=i<t/e?(n=o.Dp(e*i),e):(n=t,o.Dp(t/i)),{width:n,height:t}},i.sIb=function(t,e,i){for(var n=[],r=0;r<e;r++)n.push(o.eNa(t[r]-i,2));return o.fNa(p(n)/n.length)},i.jv=function(t,e){var i=t.length;return 1===(e=(i-1)*e+1)?t[0]:e==i?t[i-1]:t[(i=o.oM(e))-1]+(e-i)*(t[i]-t[i-1])},i.eRb=function(t,e){if(!h.isArray(t))throw Error("boxes is not an array");if(t.length<=0)throw Error("There are no boxes in boxes");e=h.isArray(e)?e:[e];for(var i=t.length,n=0;n<i;n++)for(var r=0;r<e.length;r++)if(t[n].type==e[r])return t[n];throw Error("Box not found "+e)},i.epb=function(t){return t.TSb("trak/mdia/minf/stbl/stsd/"+n.FGa+"|"+n.GGa).children.filter(function(t){return"sinf"==t.type&&t.ipc.schm.hsc==r.Yw})[0].TSb("schi/tenc").vq},i.dpb=function(t){var n;function e(t,e){var i=n[t];n[t]=n[e],n[e]=i}return n=new Uint8Array(t),e(0,3),e(1,2),e(4,5),e(6,7),n},i.j$a=function(){return h.gd(o.Ye.requestMediaKeySystemAccess)},i.D6b=function(e){return function(t){return t&&t[e]}},h.gd(ArrayBuffer.prototype.slice)||(ArrayBuffer.prototype.slice=function(t,e){var i,n;return void 0===t&&(t=0),void 0===e&&(e=this.byteLength),t=Math.floor(t),e=Math.floor(e),t<0&&(t+=this.byteLength),e<0&&(e+=this.byteLength),t=Math.min(Math.max(0,t),this.byteLength),(e=Math.min(Math.max(0,e),this.byteLength))-t<=0?new ArrayBuffer(0):(i=new ArrayBuffer(e-t),n=new Uint8Array(i),t=new Uint8Array(this,t,e-t),n.set(t),i)}),i.bba=function(t){return t&&0==t.toLowerCase().indexOf("https")},i.g6a=function(){var t=new ArrayBuffer(4),e=new Uint8Array(t),t=new Uint32Array(t);return e[0]=161,e[1]=178,e[2]=195,e[3]=212,3569595041==t[0]?"LE":2712847316==t[0]?"BE":"undefined"},i.wJ=function(){var e,t,i;try{if(e=/playercore.*js/,(t=o.gx.getEntries("resource").filter(function(t){return null!==e.exec(t.name)}))&&0<t.length)return i=o.Dp(t[0].duration),JSON.stringify(i)}catch(t){}},i.I6b=function(t,n,r){if(t&&t.length)if(r&&r.AHb)try{t.forEach(function(t,e){var i=(e=r.AHb[e])&&e.media;i&&h.vg(i)?(i=a.ht(i).buffer,t.media={arrayBuffer:i,length:i.byteLength,stream:n,xc:e.cdn}):a.log.warn("chunk not in cache",t.Bh)})}catch(t){a.log.error("error reading cached chunks",t)}else a.log.warn("chunks not available in cached stream",r.type);else a.log.warn("chunks not available in mediabuffer",r.type)}},function(t,e){_esm(e),e.wD="named",e.u4="name",e.wU="unmanaged",e.rOa="optional",e.LT="inject",e.cH="multi_inject",e.XSa="inversify:tagged",e.YSa="inversify:tagged_props",e.pja="inversify:paramtypes",e.lqb="design:paramtypes",e.iU="post_construct"},function(t,e){_esm(e),e.I={QG:"playready-h264mpl30-dash",SG:"playready-h264mpl31-dash",$ha:"playready-h264mpl40-dash",aKa:"h264mpl30-dash-playready-prk-qc",bKa:"h264mpl31-dash-playready-prk-qc",cKa:"h264mpl40-dash-playready-prk-qc",ZJa:"playready-h264hpl22-dash",o3:"playready-h264hpl30-dash",q3:"playready-h264hpl31-dash",Yha:"playready-h264hpl40-dash",$Ja:"h264hpl22-dash-playready-live",p3:"h264hpl30-dash-playready-live",r3:"h264hpl31-dash-playready-live",Zha:"h264hpl40-dash-playready-live",Ska:"vp9-profile0-L21-dash-cenc",m5:"vp9-profile0-L30-dash-cenc",n5:"vp9-profile0-L31-dash-cenc",o5:"vp9-profile0-L40-dash-cenc",bia:"hevc-main10-L30-dash-cenc",cia:"hevc-main10-L31-dash-cenc",dia:"hevc-main10-L40-dash-cenc",eia:"hevc-main10-L41-dash-cenc",ET:"hevc-main10-L50-dash-cenc",FT:"hevc-main10-L51-dash-cenc",N3:"hevc-main10-L30-dash-cenc-prk",Q3:"hevc-main10-L31-dash-cenc-prk",T3:"hevc-main10-L40-dash-cenc-prk",W3:"hevc-main10-L41-dash-cenc-prk",O3:"hevc-main10-L30-dash-cenc-prk-do",R3:"hevc-main10-L31-dash-cenc-prk-do",U3:"hevc-main10-L40-dash-cenc-prk-do",X3:"hevc-main10-L41-dash-cenc-prk-do",Z3:"hevc-main10-L50-dash-cenc-prk-do",b4:"hevc-main10-L51-dash-cenc-prk-do",M3:"hevc-main10-L30-dash-cenc-live",P3:"hevc-main10-L31-dash-cenc-live",S3:"hevc-main10-L40-dash-cenc-live",V3:"hevc-main10-L41-dash-cenc-live",Y3:"hevc-main10-L50-dash-cenc-live",a4:"hevc-main10-L51-dash-cenc-live",P2:"hevc-dv5-main10-L30-dash-cenc-prk",R2:"hevc-dv5-main10-L31-dash-cenc-prk",wT:"hevc-dv5-main10-L40-dash-cenc-prk",U2:"hevc-dv5-main10-L41-dash-cenc-prk",W2:"hevc-dv5-main10-L50-dash-cenc-prk",Y2:"hevc-dv5-main10-L51-dash-cenc-prk",zha:"hevc-dv5-main10-L40-dash-cenc-prk-qc",Aha:"hevc-dv5-main10-L41-dash-cenc-prk-qc",Bha:"hevc-dv5-main10-L50-dash-cenc-prk-qc",Cha:"hevc-dv5-main10-L51-dash-cenc-prk-qc",Q2:"hevc-dv5-main10-L30-dash-cenc-prk-do",S2:"hevc-dv5-main10-L31-dash-cenc-prk-do",T2:"hevc-dv5-main10-L40-dash-cenc-prk-do",V2:"hevc-dv5-main10-L41-dash-cenc-prk-do",X2:"hevc-dv5-main10-L50-dash-cenc-prk-do",Z2:"hevc-dv5-main10-L51-dash-cenc-prk-do",u3:"hevc-hdr-main10-L30-dash-cenc-prk",x3:"hevc-hdr-main10-L31-dash-cenc-prk",DT:"hevc-hdr-main10-L40-dash-cenc-prk",C3:"hevc-hdr-main10-L41-dash-cenc-prk",F3:"hevc-hdr-main10-L50-dash-cenc-prk",I3:"hevc-hdr-main10-L51-dash-cenc-prk",v3:"hevc-hdr-main10-L30-dash-cenc-prk-do",y3:"hevc-hdr-main10-L31-dash-cenc-prk-do",A3:"hevc-hdr-main10-L40-dash-cenc-prk-do",D3:"hevc-hdr-main10-L41-dash-cenc-prk-do",G3:"hevc-hdr-main10-L50-dash-cenc-prk-do",J3:"hevc-hdr-main10-L51-dash-cenc-prk-do",t3:"hevc-hdr-main10-L30-dash-cenc-live",w3:"hevc-hdr-main10-L31-dash-cenc-live",z3:"hevc-hdr-main10-L40-dash-cenc-live",B3:"hevc-hdr-main10-L41-dash-cenc-live",E3:"hevc-hdr-main10-L50-dash-cenc-live",H3:"hevc-hdr-main10-L51-dash-cenc-live",hFa:"av1-main-L20-dash-cbcs-prk",iFa:"av1-main-L21-dash-cbcs-prk",eD:"av1-main-L30-dash-cbcs-prk",fD:"av1-main-L31-dash-cbcs-prk",q2:"av1-main-L40-dash-cbcs-prk",r2:"av1-main-L41-dash-cbcs-prk",s2:"av1-main-L50-dash-cbcs-prk",t2:"av1-main-L51-dash-cbcs-prk"},e.Td={I2:[e.I.QG,e.I.SG,e.I.$ha],m2:[e.I.o3,e.I.q3,e.I.Yha],l2:[e.I.p3,e.I.r3,e.I.Zha],vga:[e.I.m5,e.I.n5,e.I.o5],Qic:[e.I.bia,e.I.cia,e.I.dia,e.I.eia,e.I.ET,e.I.FT],lha:[e.I.N3,e.I.Q3,e.I.T3,e.I.W3,e.I.ET,e.I.FT],mha:[e.I.O3,e.I.R3,e.I.U3,e.I.X3,e.I.Z3,e.I.b4],kha:[e.I.M3,e.I.P3,e.I.S3,e.I.V3,e.I.Y3,e.I.a4],iha:[e.I.u3,e.I.x3,e.I.DT,e.I.C3,e.I.F3,e.I.I3],jha:[e.I.v3,e.I.y3,e.I.A3,e.I.D3,e.I.G3,e.I.J3],hha:[e.I.t3,e.I.w3,e.I.z3,e.I.B3,e.I.E3,e.I.H3],XGa:[e.I.P2,e.I.wT,e.I.W2,e.I.R2,e.I.U2,e.I.Y2],YGa:[e.I.Q2,e.I.T2,e.I.X2,e.I.S2,e.I.V2,e.I.Z2],rpb:[e.I.eD,e.I.fD,e.I.q2,e.I.r2,e.I.s2,e.I.t2]},e.ae={TG:"heaac-2-dash",K3:"heaac-5.1-dash",UG:"heaac-2hq-dash",eA:"xheaac-dash",uT:"ddplus-2.0-dash",N2:"ddplus-5.1-dash",vT:"ddplus-atmos-dash"},e.Rm={Evb:"simplesdh",sha:"dfxp-ls-sdh",XKa:"imsc1.1",q5:"webvtt-lssdh-ios8",rM:"nflx-cmisc"}},function(t,e,i){var f,n,l,d,r,a,p,o,b,g,m,v,y,w,A,_,E,k;function s(){throw new l}function u(t){try{return n('"use strict"; return ('+t+").constructor;")()}catch(t){}}if(f=SyntaxError,n=Function,l=TypeError,d=Object.getOwnPropertyDescriptor)try{d({},"")}catch(t){d=null}e=d?function(){try{return s}catch(t){try{return d(arguments,"callee").get}catch(t){return s}}}():s,r=i(318)(),a=Object.getPrototypeOf||function(t){return t.__proto__},p={},o="undefined"==typeof Uint8Array?void 0:a(Uint8Array),b={"%AggregateError%":"undefined"==typeof AggregateError?void 0:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayIteratorPrototype%":r?a([][Symbol.iterator]()):void 0,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":p,"%AsyncGenerator%":p,"%AsyncGeneratorFunction%":p,"%AsyncIteratorPrototype%":p,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"%BigInt%":"undefined"==typeof BigInt?void 0:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?void 0:FinalizationRegistry,"%Function%":n,"%GeneratorFunction%":p,"%Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":r?a(a([][Symbol.iterator]())):void 0,"%JSON%":"object"==typeof JSON?JSON:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&r?a((new Map)[Symbol.iterator]()):void 0,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?void 0:Promise,"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&r?a((new Set)[Symbol.iterator]()):void 0,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":r?a(""[Symbol.iterator]()):void 0,"%Symbol%":r?Symbol:void 0,"%SyntaxError%":f,"%ThrowTypeError%":e,"%TypedArray%":o,"%TypeError%":l,"%Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?void 0:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet},g=function t(e){var i,n;return"%AsyncFunction%"===e?i=u("async function () {}"):"%GeneratorFunction%"===e?i=u("function* () {}"):"%AsyncGeneratorFunction%"===e?i=u("async function* () {}"):"%AsyncGenerator%"===e?(n=t("%AsyncGeneratorFunction%"))&&(i=n.prototype):"%AsyncIteratorPrototype%"===e&&(n=t("%AsyncGenerator%"))&&(i=a(n.prototype)),b[e]=i},m={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},e=i(208),v=i(108),y=e.call(Function.call,Array.prototype.concat),w=e.call(Function.apply,Array.prototype.splice),A=e.call(Function.call,String.prototype.replace),_=e.call(Function.call,String.prototype.slice),E=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,k=/\\(\\)?/g,t.exports=function(t,e){var i,n,r,a,o,s,u,c,h;if("string"!=typeof t||0===t.length)throw new l("intrinsic name must be a non-empty string");if(1<arguments.length&&"boolean"!=typeof e)throw new l('"allowMissing" argument must be a boolean');if(n=0<(i=function(t){var r,e=_(t,0,1),i=_(t,-1);if("%"===e&&"%"!==i)throw new f("invalid intrinsic syntax, expected closing `%`");if("%"===i&&"%"!==e)throw new f("invalid intrinsic syntax, expected opening `%`");return r=[],A(t,E,function(t,e,i,n){r[r.length]=i?A(n,k,"$1"):e||t}),r}(t)).length?i[0]:"",v(m,a=r="%"+n+"%")&&(a="%"+(o=m[a])[0]+"%"),!v(b,a))throw new f("intrinsic "+r+" does not exist!");if(void 0===(s=(s=b[a])===p?g(a):s)&&!e)throw new l("intrinsic "+r+" exists, but is not available. Please file an issue!");for(r=s,a=!1,o&&(n=o[0],w(i,y([0,1],o))),o=1,s=!0;o<i.length;o+=1){if(u=i[o],c=_(u,0,1),h=_(u,-1),('"'===c||"'"===c||"`"===c||'"'===h||"'"===h||"`"===h)&&c!==h)throw new f("property names with quotes must have matching quotes");if("constructor"!==u&&s||(a=!0),v(b,c="%"+(n+="."+u)+"%"))r=b[c];else if(null!=r){if(!(u in r)){if(e)return;throw new l("base intrinsic for "+t+" exists, but the property is not available.")}r=d&&o+1>=i.length?(s=!!(h=d(r,u)))&&"get"in h&&!("originalValue"in h.get)?h.get:r[u]:(s=v(r,u),r[u]),s&&!a&&(b[c]=r)}}return r}},function(t,i,e){var n,r,u;function a(i){return function(t,e){return t.GAa(e,i)}}function c(t,e){switch(typeof(t=t.MB.data[e])){case"undefined":break;case"string":case"number":case"boolean":return t.toString();default:return JSON.stringify(t)}}_esm(i),i.NA=i.OAa=i.object=i.xPb=i.url=i.fa=i.Ll=i.iEa=i.tYb=i.sL=i.string=i.XC=i.Cd=i.sF=i.config=void 0,n=e(52),r=e(5),u=e(145),i.config=function(a,o,s){return s=void 0!==s&&s,function(t,e,i){var n=void 0!==o?o:e,r=i.get;return void 0!==r&&(i.get=function(){var t;if(!this.lZb(e))return this.UUb(e);t:{if(void 0!==(t=(this.ODb||s?function(t,e){return t.Oda.g8b[e]||c(t,e)}:c)(this,n.toString()))){if(!((t=a(this.k_,t))instanceof u.Wq))break t;this.X4a(n,t)}t=r.bind(this)()}return this.rBa(e,t),t}),i}},i.sF=function(t,e){return t.lgb(e)},i.Cd=function(t,e){return t.DAa(e)},i.XC=function(t,e){return t.ls(e)},i.string=function(t,e){return t.GAa(e)},i.sL=function(t,e){return t.jl(e,i.string)},i.tYb=function(t,e){return t.jl(e,i.sF)},i.iEa=function(t,e){return t.jl(e,i.XC)},i.Ll=function(t,e){return(t=t.ls(e))instanceof u.Wq?t:r.vc(t)},i.fa=function(t,e){return(t=t.ls(e))instanceof u.Wq?t:n.fa(t)},i.url=a(/^\S+$/),i.xPb=function(i){return function(t,e){return t.kgb(e,i)}},i.object=function(){return function(t,e){return t.mgb(e)}},i.OAa=a,i.NA=function(i,n){return function(t,e){return t.jl(e,i,n)}}},function(t,i,e){var n,r,a,o;function s(t,e){var i=o.call(this,t,e)||this;return i.K0a=e,i.debug=t.debug,i.Aa=t.$f.jb(i.K0a),i}function u(t,e){this.K0a=e,this.rAa={},this.MB=t.MB,this.k_=t.k_,this.Oda=t.Oda}_esm(i),i.uf=i.gT=i.ZSa=void 0,t=e(0),n=e(697),r=e(1),a=e(145),i.ZSa="isTestAccount",u.prototype.X4a=function(){},u.prototype.rBa=function(t,e){this.rAa[t]=[e,this.MB.rea]},u.prototype.lZb=function(t){return n.oja.of(this.rAa[t]).map(function(t){return t[1]}).or(-1)<this.MB.rea},u.prototype.UUb=function(t){return n.oja.of(this.rAa[t]).map(function(t){return t[0]}).or(function(){throw Error("Invalid State Error")})},nt.Object.defineProperties(u.prototype,{ODb:{configurable:!0,enumerable:!0,get(){var t,e=!!(this&&this.MB&&this.MB.data)&&(void 0!==(e=this.MB.data[i.ZSa])&&(t=e.toString()),!((e=this.k_.DAa(t))instanceof a.Wq)&&e);return e}}}),o=u,o=t.__decorate([r.$(),t.__param(0,r.vp()),t.__param(1,r.vp())],o),S(s,i.gT=o),s.prototype.X4a=function(t,e){this.Aa.error("Invalid configuration value.",{name:t},e),this.debug.assert(!1)},e=s,e=t.__decorate([t.__param(0,r.vp()),t.__param(1,r.vp())],e),i.uf=e},function(t,e){_esm(e),e.Wj="SchedulerSymbol"},function(t,e){_esm(e),e.Yq="PlatformSymbol",e.K4="PlatformMutableSymbol"},function(t,e,i){var a,u,n;_esm(e),e.Mva=e.Ita=e.Wta=e.A$=e.TKa=e.rD=e.Vrb=e.tka=e.ska=e.dUa=e.eUa=e.HOa=e.j3=e.TEMPORARY=e.Yw=void 0,a=i(15),u=i(9),n=i(172),e.Yw="cenc",e.TEMPORARY="temporary",e.j3="MIIE2jCCA8KgAwIBAgIIBRGnbPd8z1YwDQYJKoZIhvcNAQEFBQAwfzELMAkGA1UEBhMCVVMxEzARBgNVBAoMCkFwcGxlIEluYy4xJjAkBgNVBAsMHUFwcGxlIENlcnRpZmljYXRpb24gQXV0aG9yaXR5MTMwMQYDVQQDDCpBcHBsZSBLZXkgU2VydmljZXMgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNMTMwMzI3MjEyNjU2WhcNMTUwMzI4MjEyNjU2WjBjMQswCQYDVQQGEwJVUzEUMBIGA1UECgwLTmV0ZmxpeC5jb20xDDAKBgNVBAsMA0VEUzEwMC4GA1UEAwwnRlBTIEFwcGxpY2F0aW9uIENlcnRpZmljYXRlICgyMDEzIHYxLjApMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDfaIdDptThILsQcAbDMvT5FpK4JNn/BnHAY++rS9OFfhg5R4pV7CI+UMZeC64TFJJZciq6dX4/Vh7JDDULooAeZxlOLqJB4v+KDMpFS6VsRPweeMRSCE5rQffF5HoRKx682Kw4Ltv2PTxE3M16ktYCOxq+/7fxevMt3uII+2V0tQIDAQABo4IB+DCCAfQwHQYDVR0OBBYEFDuQUJCSl+l2UeybrEfNbUR1JcwSMAwGA1UdEwEB/wQCMAAwHwYDVR0jBBgwFoAUY+RHVMuFcVlGLIOszEQxZGcDLL4wgeIGA1UdIASB2jCB1zCB1AYJKoZIhvdjZAUBMIHGMIHDBggrBgEFBQcCAjCBtgyBs1JlbGlhbmNlIG9uIHRoaXMgY2VydGlmaWNhdGUgYnkgYW55IHBhcnR5IGFzc3VtZXMgYWNjZXB0YW5jZSBvZiB0aGUgdGhlbiBhcHBsaWNhYmxlIHN0YW5kYXJkIHRlcm1zIGFuZCBjb25kaXRpb25zIG9mIHVzZSwgY2VydGlmaWNhdGUgcG9saWN5IGFuZCBjZXJ0aWZpY2F0aW9uIHByYWN0aWNlIHN0YXRlbWVudHMuMDUGA1UdHwQuMCwwKqAooCaGJGh0dHA6Ly9jcmwuYXBwbGUuY29tL2tleXNlcnZpY2VzLmNybDAOBgNVHQ8BAf8EBAMCBSAwLQYLKoZIhvdjZAYNAQMBAf8EGwGcLBpLUU8iNtuBsGfgldUUE/I42u6RKyl8uzBJBgsqhkiG92NkBg0BBAEB/wQ3AV+LX+Xo3O4lI5WzFXfxVrna5jJD1GHioNsMHMKUv97Kx9dCozZVRhmiGdTREdjOptDoUjj2ODANBgkqhkiG9w0BAQUFAAOCAQEAmkGc6tT450ENeFTTmvhyTHfntjWyEpEvsvoubGpqPnbPXhYsaz6U1RuoLkf5q4BkaXVE0yekfKiPa5lOSIYOebyWgDkWBuJDPrQFw8QYreq5T/rteSNQnJS1lAbg5vyLzexLMH7kq47OlCAnUlrI20mvGM71RuU6HlKJIlWIVlId5JZQF2ae0/A6BVZWh35+bQu+iPI1PXjrTVYqtmrV6N+vV8UaHRdKV6rCD648iJebynWZj4Gbgzqw7AX4RE6UwiX0Rgz9ZMM5Vzfgrgk8KxOmsuaP8Kgqf5KWeH/LDa+ocftU7zGz1jO5L999JptFIatsdPyZXnA3xM+QjzBW8w==",e.HOa="Q0hBSQAAAAEAAAUMAAAAAAAAAAJDRVJUAAAAAQAAAfwAAAFsAAEAAQAAAFhr+y4Ydms5rTmj6bCCteW2AAAAAAAAAAAAAAAJzZtwNxHterM9CAoJYOM3CF9Tj0d9KND413a+UtNzRTb/////AAAAAAAAAAAAAAAAAAAAAAABAAoAAABU8vU0ozkqocBJMVIX2K4dugAAADZodHRwOi8vbnJkcC5uY2NwLm5ldGZsaXguY29tL3Jtc2RrL3JpZ2h0c21hbmFnZXIuYXNteAAAAAABAAUAAAAMAAAAAAABAAYAAABcAAAAAQABAgAAAAAAglDQ2GehCoNSsOaaB8zstNK0cCnf1+9gX8wM+2xwLlqJ1kyokCjt3F8P2NqXHM4mEU/G1T0HBBSI3j6XpKqzgAAAAAEAAAACAAAABwAAAEgAAAAAAAAACE5ldGZsaXgAAAAAH1BsYXlSZWFkeSBNZXRlcmluZyBDZXJ0aWZpY2F0ZQAAAAAABjIwMjQ4AAAAAAEACAAAAJAAAQBAU73up7T8eJYVK4UHuKYgMQIRbo0yf27Y5EPZRPmzkx1ZDMor7Prs77CAOU9S9k0RxpxPnqUwAKRPIVCe0aX2+AAAAgBb65FSx1oKG2r8AxQjio+UrYGLhvA7KMlxJBbPXosAV/CJufnIdUMSA0DhxD2W3eRLh2vHukIL4VH9guUcEBXsQ0VSVAAAAAEAAAL8AAACbAABAAEAAABYyTlnSi+jZfRvYL0rk9sVfwAAAAAAAAAAAAAABFNh3USSkWi88BlSM6PZ2gMuceJFJ9hzz0WzuCiwF9qv/////wAAAAAAAAAAAAAAAAAAAAAAAQAFAAAADAAAAAAAAQAGAAAAYAAAAAEAAQIAAAAAAFvrkVLHWgobavwDFCOKj5StgYuG8DsoyXEkFs9eiwBX8Im5+ch1QxIDQOHEPZbd5EuHa8e6QgvhUf2C5RwQFewAAAACAAAAAQAAAAwAAAAHAAABmAAAAAAAAACATWljcm9zb2Z0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAUGxheVJlYWR5IFNMMCBNZXRlcmluZyBSb290IENBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAMS4wLjAuMQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAIAAAAkAABAECsAomwQgNY0bm6U6Au9JRvwjbNnRzmVkZi+kg7npnRQ2T+4LgyrePBdBRQ3qb/jxXkn++4sOFa7vjRpFBzV0MMAAACAIZNYc/yJW5CLFaLPCgAHPs+FSdlhYS6BSG3mxgo2TbeHYJqj8Pm5/p6kNXKKUbx9kou+59dz/5+Q060QpP6xas=",e.eUa="Cr0CCAMSEOVEukALwQ8307Y2+LVP+0MYh/HPkwUijgIwggEKAoIBAQDm875btoWUbGqQD8eAGuBlGY+Pxo8YF1LQR+Ex0pDONMet8EHslcZRBKNQ/09RZFTP0vrYimyYiBmk9GG+S0wB3CRITgweNE15cD33MQYyS3zpBd4z+sCJam2+jj1ZA4uijE2dxGC+gRBRnw9WoPyw7D8RuhGSJ95OEtzg3Ho+mEsxuE5xg9LM4+Zuro/9msz2bFgJUjQUVHo5j+k4qLWu4ObugFmc9DLIAohL58UR5k0XnvizulOHbMMxdzna9lwTw/4SALadEV/CZXBmswUtBgATDKNqjXwokohncpdsWSauH6vfS6FXwizQoZJ9TdjSGC60rUB2t+aYDm74cIuxAgMBAAE6EHRlc3QubmV0ZmxpeC5jb20SgAOE0y8yWw2Win6M2/bw7+aqVuQPwzS/YG5ySYvwCGQd0Dltr3hpik98WijUODUr6PxMn1ZYXOLo3eED6xYGM7Riza8XskRdCfF8xjj7L7/THPbixyn4mULsttSmWFhexzXnSeKqQHuoKmerqu0nu39iW3pcxDV/K7E6aaSr5ID0SCi7KRcL9BCUCz1g9c43sNj46BhMCWJSm0mx1XFDcoKZWhpj5FAgU4Q4e6f+S8eX39nf6D6SJRb4ap7Znzn7preIvmS93xWjm75I6UBVQGo6pn4qWNCgLYlGGCQCUm5tg566j+/g5jvYZkTJvbiZFwtjMW5njbSRwB3W4CrKoyxw4qsJNSaZRTKAvSjTKdqVDXV/U5HK7SaBA6iJ981/aforXbd2vZlRXO/2S+Maa2mHULzsD+S5l4/YGpSt7PnkCe25F+nAovtl/ogZgjMeEdFyd/9YMYjOS4krYmwp3yJ7m9ZzYCQ6I8RQN4x/yLlHG5RH/+WNLNUs6JAZ0fFdCmw=",e.dUa="CAUSwwUKvQIIAxIQ5US6QAvBDzfTtjb4tU/7QxiH8c+TBSKOAjCCAQoCggEBAObzvlu2hZRsapAPx4Aa4GUZj4/GjxgXUtBH4THSkM40x63wQeyVxlEEo1D/T1FkVM/S+tiKbJiIGaT0Yb5LTAHcJEhODB40TXlwPfcxBjJLfOkF3jP6wIlqbb6OPVkDi6KMTZ3EYL6BEFGfD1ag/LDsPxG6EZIn3k4S3ODcej6YSzG4TnGD0szj5m6uj/2azPZsWAlSNBRUejmP6Tiota7g5u6AWZz0MsgCiEvnxRHmTRee+LO6U4dswzF3Odr2XBPD/hIAtp0RX8JlcGazBS0GABMMo2qNfCiSiGdyl2xZJq4fq99LoVfCLNChkn1N2NIYLrStQHa35pgObvhwi7ECAwEAAToQdGVzdC5uZXRmbGl4LmNvbRKAA4TTLzJbDZaKfozb9vDv5qpW5A/DNL9gbnJJi/AIZB3QOW2veGmKT3xaKNQ4NSvo/EyfVlhc4ujd4QPrFgYztGLNrxeyRF0J8XzGOPsvv9Mc9uLHKfiZQuy21KZYWF7HNedJ4qpAe6gqZ6uq7Se7f2JbelzENX8rsTpppKvkgPRIKLspFwv0EJQLPWD1zjew2PjoGEwJYlKbSbHVcUNygplaGmPkUCBThDh7p/5Lx5ff2d/oPpIlFvhqntmfOfumt4i+ZL3fFaObvkjpQFVAajqmfipY0KAtiUYYJAJSbm2DnrqP7+DmO9hmRMm9uJkXC2MxbmeNtJHAHdbgKsqjLHDiqwk1JplFMoC9KNMp2pUNdX9TkcrtJoEDqIn3zX9p+itdt3a9mVFc7/ZL4xpraYdQvOwP5LmXj9galK3s+eQJ7bkX6cCi+2X+iBmCMx4R0XJ3/1gxiM5LiStibCnfInub1nNgJDojxFA3jH/IuUcblEf/5Y0s1SzokBnR8V0KbA==",e.ska="SW_SECURE_CRYPTO",e.tka="SW_SECURE_DECODE",e.Vrb="HW_SECURE_DECODE",e.rD="HW_SECURE_ALL",e.TKa=[e.rD],e.A$=function(t){var i=t.getConfiguration();return[e.rD,e.tka,e.ska].find(function(e){var t;return null==(t=i.videoCapabilities)?void 0:t.some(function(t){return t.robustness===e})})},e.Wta=function(t){var e,i;try{for(var n,r=/\((\d[^)]+)\)/g;n=r.exec(t);)i=Number(n[1]),a.Oa(i)&&(e=i)}catch(t){}return e},e.Ita=function(t){var s={};try{t.forEach(function(t){var e;if(t.WI){for(var i=u.RA,n=t.WI,r=0,a=new Uint8Array(16),o=0;o<n.length;o+=2)a[r++]=parseInt(n.slice(o,o+2),16);i=i(a),t=null!=(e=t.height)?e:t.mBa,s[i]=Math.max(t,null!=(e=s[i])?e:0)}})}catch(t){}return s},e.Mva=function(t){return n.If.sl.test(t)}},function(t,e){_esm(e),e.u=void 0,e.u={P:0,J:1,Ob:2}},function(t,e){_esm(e),e.Gia="LogBatcherConfigSymbol",e.jo="LogBatcherSymbol",e.pMa="LogBatcherProviderSymbol"},function(t,e){_esm(e),e.Qm="PboCommandContextSymbol"},function(t,e,i){var n;function r(){return n.xU.apply(this,arguments)||this}function a(t){return new n.Hu(t,e.KG)}_esm(e),e.Ka=e.GNa=e.zia=e.Xw=e.KG=e.D1b=e.VZb=e.fa=e.kt=e.opb=void 0,S(r,(n=i(331)).xU),e.opb=r,e.kt=a,e.fa=function(t){return new n.Hu(t,e.Xw)},e.VZb=function(t){return new n.Hu(t,e.zia)},e.D1b=function(t){return new n.Hu(t,e.GNa)},e.KG=new r(1,"b"),e.Xw=new r(8*e.KG.Sg,"B",e.KG),e.zia=new r(1024*e.Xw.Sg,"KB",e.KG),e.GNa=new r(1024*e.zia.Sg,"MB",e.KG),e.Ka=a(0)},function(t,e,i){var r=i(126),a=i(179);t.exports=function(n){return function t(e,i){switch(arguments.length){case 0:return t;case 1:return a(e)?t:r(function(t){return n(e,t)});default:return a(e)&&a(i)?t:a(e)?r(function(t){return n(t,i)}):a(i)?r(function(t){return n(e,t)}):n(e,i)}}}},function(t,e,i){var c,h,n;function r(t){this.config=t,this.MK=[]}_esm(e),e.lka=e.ke=void 0,c=i(0),h=i(903),n=i(22),(i=e.ke||(e.ke={}))[i.Hq=0]="startPlayback",i[i.iq=1]="endPlayback",i[i.up=2]="underflow",r.prototype.mg=function(e){var t=c.__read(this.config.mEb.filter(function(t){return t.re===e.re}),1)[0];this.config.AOb&&(null!=(t=null==t?void 0:t.enabled)?t:e.enabled)?this.MK.push(e):e.tb&&e.tb()},r.prototype.SUb=function(e){return n.Xc(this.MK,function(t){return t.re===e.re})},r.prototype.al=function(t){var e,i,n,r={},a=[];try{for(var o=c.__values(this.MK),s=o.next();!s.done;s=o.next()){i=s.value;try{(n=i.al({cj:t}))&&(i.kw?r[i.kw]=n:r=c.__assign(c.__assign({},r),n))}catch(t){a.push(Error("".concat(i.re,"::").concat(t)))}}}catch(t){var u={error:t}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(u)throw u.error}}return a.length&&(r["rpt-error"]=h.Gga.stringify(new h.Gga("Reporting error",a))),r},e.lka=r},function(t,e){_esm(e),e.flatten=e.yq=e.fdc=e.Cdb=void 0,e.Cdb=function(t,e){return t-e},e.fdc=function(t,e){return t.localeCompare(e)},e.yq=function(t,e){var i=Object.getOwnPropertyDescriptor(t,e);i&&Object.defineProperty(t,e,{configurable:i.configurable,value:i.value,writable:i.writable})},e.flatten=function(t){return[].concat.apply([],J(t))}},function(t,e){_esm(e),e.Oqb="Cannot apply @injectable decorator multiple times.",e.Pqb="Metadata key was used more than once in a parameter:",e.eU="NULL argument",e.OLa="Key Not Found",e.Snb="Ambiguous match found for serviceIdentifier:",e.ppb="Could not unbind serviceIdentifier:",e.Ktb="No matching bindings found for serviceIdentifier:",e.itb="Missing required @injectable annotation in:",e.jtb="Missing required @inject or @multiInject annotation in:",e.kwb=function(t){return"@inject called with undefined this could mean that the class "+t+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},e.tpb="Circular dependency found:",e.dlc="Sorry, this feature is not fully implemented yet.",e.zsb="Invalid binding type:",e.Mtb="No snapshot available to restore.",e.Dsb="Invalid return type in middleware. Middleware must return!",e.Csb="Value provided to function binding must be a function!",e.Fsb="The toSelf function can only be applied when a constructor is used as service identifier",e.Asb="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",e.Unb=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"The number of constructor arguments in the derived class "+t[0]+" must be >= than the number of constructor arguments of its base class."},e.Ipb="Invalid Container constructor argument. Container options must be an object.",e.Gpb="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",e.Fpb="Invalid Container option. Auto bind injectable must be a boolean",e.Hpb="Invalid Container option. Skip base check must be a boolean",e.wtb="Cannot apply @postConstruct decorator multiple times in the same class",e.Uub=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"@postConstruct error in class "+t[0]+": "+t[1]},e.upb=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"It looks like there is a circular dependency in one of the '"+t[0]+"' bindings. Please investigate bindings withservice identifier '"+t[1]+"'."},e.Ivb="Maximum call stack size exceeded"},function(t,e){var i;_esm(e),e.Pwa=e.Li=void 0,(i=e.Li||(e.Li={}))[i.Zq=0]="STANDARD",i[i.Cp=1]="LIMITED",e.Pwa=function(t){return["STANDARD","LIMITED"][t]}},function(t,e){_esm(e),e.pg=void 0,e.pg=function(t){return setTimeout(t,0)}},function(t,e,i){var n,r,a,o,s;function u(){return n.mc.get(a.$c).UB.ka(s.pa)}_esm(e),e.YHb=e.m8=e.j0a=e.WHb=e.XHb=e.Vpa=e.Do=void 0,n=i(212),r=i(29),a=i(18),o=i(84),s=i(5),e.Do=function(){return n.mc.get(a.$c).Tb().ka(s.pa)},e.Vpa=function(){return n.mc.get(r.Lh).Ef.ka(s.Gp)},e.XHb=function(){return n.mc.get(a.$c).UB.ka(s.Gp)},e.WHb=function(){return n.mc.get(o.Rz).hB()},e.j0a=u,e.m8=function(){return n.mc.get(r.Lh).Ef.ka(s.pa)},e.YHb=u},function(t,e){var i,n,r;function a(){}_esm(e),e.Ap=e.Ra=e.Ek=void 0,(r=i=i||{})[r.Zq=0]="STANDARD",r[r.Cp=1]="LIMITED",r[r.Flc=2]="PREVIEW",(r=n=n||{})[r.HAVE_NOTHING=0]="HAVE_NOTHING",r[r.HAVE_METADATA=1]="HAVE_METADATA",r[r.HAVE_CURRENT_DATA=2]="HAVE_CURRENT_DATA",r[r.HAVE_FUTURE_DATA=3]="HAVE_FUTURE_DATA",r[r.HAVE_ENOUGH_DATA=4]="HAVE_ENOUGH_DATA",(r=t=e.Ek||(e.Ek={})).fob="asl_start",r.dob="asl_comp",r.gic="asl_exc",r.eob="asl_fail",r.Mvb="stf_creat",r.gsb="idb_open",r.dsb="idb_block",r.nsb="idb_upgr",r.msb="idb_succ",r.esb="idb_error",r.fsb="idb_invalid_state",r.isb="idb_open_timeout",r.ksb="idb_open_wrkarnd",r.lsb="idb_storelen_exc",r.hsb="idb_open_exc",r.jsb="idb_timeout_invalid_storelen",r.qtb="msl_load_data",r.stb="msl_load_no_data",r.rtb="msl_load_failed",(r=e.Ra||(e.Ra={})).sja="PlaybackRequestStart",r.rja="PlaybackRequestEnd",r.S4="RequestPrefetchManifestStart",r.R4="RequestPrefetchManifestEnd",r.Q4="RequestManifestStart",r.P4="RequestManifestEnd",r.O4="RequestLicenseStart",r.N4="RequestLicenseEnd",r.mT="RequestTimedTextUrlStart",r.lT="RequestTimedTextUrlEnd",r.kT="RequestAudioUrlStart",r.jT="RequestAudioUrlEnd",r.oT="RequestVideoUrlStart",r.nT="RequestVideoUrlEnd",r.xga="AppendBufferStart",r.wga="AppendBufferEnd",r.oka="SetMediaKeysStart",r.nka="SetMediaKeysEnd",r.m3="GenerateChallengeStart",r.l3="GenerateChallengeEnd",r.o2="ApplyLicenseStart",r.n2="ApplyLicenseEnd",(e.Ap=a).Aia=i,a.Z0a=function(t){return["STANDARD","LIMITED","PREVIEW"][t]},a.Ek=t,a.c4=n},function(t,r,e){var a,i;_esm(r),r.fQa=r.dQa=r.Mja=r.Nja=r.BD=r.Oja=r.eQa=r.Rja=r.Qja=r.Fp=r.hQa=r.Pja=void 0,a=e(17),i=e(23),r.Pja=function t(e,i){var n=r.Fp[0];(n=n==i?r.Fp[1]:n)?n.close(function(){t(e,i)}):e&&e(a.Vg)},r.hQa=function(t,e){switch(t){case r.eQa:return void r.Qja.push(e);case r.Oja:return void r.Rja.push(e)}i.Ua(!1)},r.Fp=[],r.Qja=[],r.Rja=[],r.eQa=1,r.Oja=3,r.BD={index:0,Dcb:void 0,Esa:void 0},r.Nja="network",r.Mja="media",r.dQa="timedtext",r.fQa="playback"},function(t,r,e){var i,a;_esm(r),r.U$=r.Dt=r.V$=r.jF=r.Vo=r.nf=void 0,t=e(73),i=e(58),a=e(14),r.nf=new t.Bk,r.Vo=1,r.jF=2,r.V$=3,r.Dt=4,r.U$=5,i.pg(function(){var t,i,e;function n(t,e){i?i.on(t,e):bt.addEventListener(t,e)}t=bt.jQuery,i=t&&t(bt),t=(t=bt.netflix)&&t.cadmium&&t.cadmium.addBeforeUnloadHandler,e=a.Nh.hidden,t?t(function(t){r.nf.Tc(r.Vo,t)}):n("beforeunload",function(t){r.nf.Tc(r.Vo,t)}),n("keydown",function(t){r.nf.Tc(r.jF,t)}),n("resize",function(){r.nf.Tc(r.V$)}),a.Nh.addEventListener("visibilitychange",function(){e!==a.Nh.hidden&&(e=a.Nh.hidden,r.nf.Tc(r.Dt))})}),bt.addEventListener("error",function(t){return r.nf.Tc(r.U$,t),!0})},function(t,u,c){!function(e){var i,t,n,r,a,o,s;_esm(u),u.x2b=u.platform=u.wh=u.yPb=u.PTb=u.tY=u.tJ=u.v0b=u.vH=u.ke=u.yp=u.zk=u.pM=u.Ku=u.xH=void 0,(i=c(0)).__exportStar(c(181),u),i.__exportStar(c(395),u),i.__exportStar(c(883),u),i.__exportStar(c(884),u),i.__exportStar(c(885),u),t=c(104),Object.defineProperties(u,{xH:{enumerable:!0,get(){return t.xH}}}),Object.defineProperties(u,{Ku:{enumerable:!0,get(){return t.Ku}}}),Object.defineProperties(u,{pM:{enumerable:!0,get(){return t.pM}}}),i.__exportStar(c(896),u),i.__exportStar(c(400),u),i.__exportStar(c(249),u),i.__exportStar(c(19),u),i.__exportStar(c(402),u),n=c(403),Object.defineProperties(u,{zk:{enumerable:!0,get(){return n.zk}}}),Object.defineProperties(u,{yp:{enumerable:!0,get(){return n.yp}}}),r=c(54),Object.defineProperties(u,{ke:{enumerable:!0,get(){return r.ke}}}),a=c(251),Object.defineProperties(u,{vH:{enumerable:!0,get(){return a.vH}}}),i.__exportStar(c(252),u),i.__exportStar(c(911),u),u.v0b=function(t){if(u.platform.TY(t),e.BX.eic)throw Error("Legacy not included in bundle");return c(915).TMa},u.tJ=function(t){return u.platform.TY(t),Promise.resolve().then(function(){return i.__importStar(c(274))}).then(function(t){return t.tJ()})},u.tY=function(t,e){return u.platform.TY(t),Promise.resolve().then(function(){return i.__importStar(c(459))}).then(function(t){return t.tY(e)})},u.PTb=function(){return c(256)},o=i.__importDefault(c(28)),u.yPb=o.default,o=c(1161),u.wh=o.wh,o=i.__importDefault(c(3)),u.platform=o.default,s=c(1162),u.x2b=function(){return{ex:s.ex}}}.call(this,c(128))},function(t,e,i){_esm(e),(t=i(0)).__exportStar(i(160),e),t.__exportStar(i(987),e),t.__exportStar(i(187),e)},function(t,h,e){var c,i,s,f;function l(t,e,i){var n,r,a;if(e=c.__assign({},null==(r=null==t?void 0:t.context)?void 0:r.call(t,{Edb:e,yo:i})),null!=t&&t.yo&&i)if(!0===t.yo)e.args=i;else{e.args=r={};try{for(var o=c.__values(t.yo),s=o.next();!s.done;s=o.next())r[a=s.value]=i[a]}catch(t){var u={error:t}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(u)throw u.error}}}return e}function n(t){this.Xr=[],this.k6=!1,this.dma={},this.K=c.__assign({cp:10},t),Object.defineProperties(t.Mn,{bla:{value:this,configurable:!0}})}_esm(h),h.Lu=h.yua=h.nb=void 0,c=e(0),i=e(10),s=c.__importDefault(e(3)),f=e(8),h.nb=function(c){return function(t,s,e){var u=e.value;e.value=function(){var t,e,i,n,r,a=h.yua(this);a&&(e=l(c,this,arguments),i=null!=(t=null==c?void 0:c.methodName)?t:String(s),n=a.ZV(i,e,null==c?void 0:c.Dl,null==c?void 0:c.Upc)),t=null==a?void 0:a.Iqa,a&&(a.Iqa=n);try{return r=null==u?void 0:u.apply(this,arguments),r=f.hwa(r)?r.then(function(t){return n&&null!=c&&c.return&&(n.data.resolve=t),t},function(t){return n&&(n.data.reject="".concat(t)),Promise.reject(t)}):r}catch(t){var o=t;throw t}finally{a&&(a.Iqa=t),n&&(n.data||(n.data={}),o?(n.data.error="".concat(o),null!=a&&a.zIb(n)):null!=c&&c.return&&!f.hwa(r)&&(n.data.lRet=r))}}}},h.yua=function(t){if(null!=t&&t.bla)return t.bla},Object.defineProperties(n.prototype,{source:{get(){return this.K.source},configurable:!0},enabled:{get(){return!this.k6},configurable:!0},KZb:{get(){return c.__spreadArray([],c.__read(this.Xr),!1)},configurable:!0},VWb:{get(){return this.dma},configurable:!0}}),n.prototype.av=function(t){var e;this.k6||(e=null==(e=h.yua(this.K.Mn))?void 0:e.Iqa)&&(e.data=c.__assign(c.__assign({},e.data),t))},n.prototype.ZV=function(t,e,i,n){var r,a,o;if(!this.k6)return a=!1,o=null==(o=(r=this.K).Wna)?void 0:o.call(r,this.K.Mn),r=l({},this.K.Mn),e=c.__assign(c.__assign(c.__assign({},o),r),e),e={methodName:t,data:0<Object.keys(e).length?e:void 0,time:s.default.time.ia()},n&&this.dma[t]++,i&&this.Xr.length&&((i=this.Xr[this.Xr.length-1]).methodName===t&&(i.data=i.data||{},i.data.dedup=i.data.dedup||{hitCount:1},i.data.dedup.hitCount++,i.data.dedup.lJournal=e,a=!0)),this.AIb(e),a||this.Xr.push(e),this.Xr.length>this.K.cp&&this.Xr.shift(),e},n.prototype.AIb=function(t){var e;i.S&&null!=(e=this.K.console)&&e.trace("".concat(this.K.source,"::").concat(t.methodName),t.data),"object"==typeof __ASE_DEVTOOLS_EXTENSION__&&__ASE_DEVTOOLS_EXTENSION__.register(this.K,t)},n.prototype.zIb=function(t){var e;i.S&&null!=(e=this.K.console)&&e.error("".concat(this.K.source,"::").concat(t.methodName),t.data)},n.prototype.tb=function(){Object.defineProperties(this.K.Mn,{bla:{value:null,configurable:!0}}),this.k6=!0,this.clear()},n.prototype.clear=function(){this.Xr=[],this.dma={}},h.Lu=n},function(t,e){_esm(e),e.Eg={exa:"logblob",ja:"manifest",r_b:"licensedmanifest",zh:"license",events:"events",bind:"bind",ping:"ping",config:"config"},e.rvb={HRa:"X-Netflix.Request.Attempt",mka:"X-Netflix.Client.Request.Name",NGa:"x-netflix.browsername",OGa:"x-netflix.browserversion",sOa:"x-netflix.osname",tOa:"x-xetflix.osversion",wHa:"x-netflix.clienttype",FTa:"x-netflix.uiversion"},e.CD={HRa:"reqAttempt",mka:"reqName",NGa:"browsername",OGa:"browserversion",sOa:"osname",tOa:"osversion",wHa:"clienttype",FTa:"uiversion"}},function(t,e,i){var n=i(41);function r(t,e){this.key=t,this.value=e}_esm(e),r.prototype.toString=function(){return this.key===n.wD?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},e.Metadata=r},function(t,e){_esm(e),e.Eu="EmeConfigSymbol"},function(t,e){function i(t){var e=Error.call(this,"TimeoutError");this.message=e.message,"stack"in e&&(this.stack=e.stack),this.interval=t}_esm(e),e.qH=e.Os=void 0,S(i,Error),e.Os=i,e.qH="PromiseTimerSymbol"},function(t,e,i){var n,r,a;function o(t,e){this.zx=e?[e]:[],this.ema="$op$"+a++,this.Sa=t}_esm(e),e.$b=void 0,n=i(17),r=i(23),a=0,o.prototype.addListener=function(t,e){var i=this;r.Nqa(t),r.Ua(this.zx.indexOf(t)<0),t[n.D4+this.ema]=e,this.zx=this.zx.slice(),this.zx.push(t),this.zx.sort(function(t,e){return i.tcc(t,e)})},o.prototype.removeListener=function(t){r.Nqa(t),this.zx=this.zx.slice(),0<=(t=this.zx.indexOf(t))&&this.zx.splice(t,1)},o.prototype.set=function(t,e){var i;if(this.Sa!==t){i={oldValue:this.Sa,newValue:t,Vk:e},this.Sa=t,this.Fxb=e,e=(t=this.zx).length;for(var n=0;n<e;n++)t[n](i)}},o.prototype.when=function(n){var r=this;return new Promise(function(i){if(n(r.Sa))return i(r.Sa);r.addListener(function t(e){if(n(e.newValue))return r.removeListener(t),i(e.newValue)})})},o.prototype.tcc=function(t,e){return(t[n.D4+this.ema]||0)-(e[n.D4+this.ema]||0)},nt.Object.defineProperties(o.prototype,{value:{configurable:!0,enumerable:!0,get(){return this.Sa}},Vk:{configurable:!0,enumerable:!0,get(){return this.Fxb}}}),e.$b=o},function(t,e){_esm(e),e.ax=e.lja=e.ResponseType=void 0,e.ResponseType={Text:1,Umc:2,Tob:3},e.lja="OPEN_CONNECT_APPLIANCE",e.ax="LegacyHttpSymbol"},function(t,e,i){var n;_esm(e),t=i(236),n=i(150),e.mjc=n,n=i(384),e.ETa=n,n=i(389),e.kW=n,e.xka=t.SQ.oe.sidx,t=i(820),e.ex=t.ex,t=i(245),e.fH=t.fH,t=i(825),e.dx=t.dx,e.AQ=t.AQ,t=i(826),e.yia=t.yia,t=i(87),e.GH=t.GH,i=i(827),e.u=i.u},function(t,e,i){var a,o;function n(){var r,n=this;this.Su={},this.on=function(t,e,i){n.addListener(t,e,i)},this.addListener=function(t,e,i){n.Su&&(n.Su[t]=n.Su[t]||new o.cka(!0)).add(e,i)},this.removeListener=function(t,e){n.Su&&n.Su[t]&&n.Su[t].removeAll(e)},this.uta=function(t){return n.Su&&n.Su[t]?n.Su[t].flatten():[]},(r=this).Tc=function(t,i,e){var n;if(r.Su)for(n=r.uta(t),t={QL:0};t.QL<n.length;(t={QL:t.QL}).QL++)e?function(e){return function(){var t=n[e.QL];a.pg(function(){t(i)})}}(t)():n[t.QL].call(this,i)}}_esm(e),e.Bk=void 0,a=i(58),o=i(355),n.prototype.ti=function(){this.Su=void 0},e.Bk=n},function(t,e,i){var n,r,a,o,c,s,u,h,f;function l(t,e,i){var n=f.call(this,t,e)||this;return l.xa(n,t,e,i),n}_esm(e),e.yk=void 0,n=i(0),r=i(2),a=n.__importDefault(i(28)),o=n.__importDefault(i(158)),c=i(426),s=i(19),t=i(36),u=i(184),h=i(262),i=i(78),f=u.Vw,n.__extends(l,f),l.xa=function(t,e,i,n){u.Vw.xa(t,e,i),t.ze=i.index,t.$M=i.Za,t.tx=i.mb,t.lCb=i.eb||e.eb,t.aL=i.aL,t.Vta=n,t.qVa=!!i.Dv,t.aWa=!!i.$o,t.eXa=null!=(n=i.region)?n:0,t.pVa=!!i.Fsa,t.$Va=!!i.vy,t.ya=void 0===i.W9||void 0===i.Osa||i.W9===i.Za&&i.Osa===i.mb?t:new h.iD(t,{Za:i.W9,mb:i.Osa}),t.wzb=i.jya,t.Jwb=i.Qk,t.Fyb=e.yWb,t.Hk=i.Ha?t.gdb(i.Ha):void 0,t.FXa=i.RC,t.me=!1},l.A1a=function(t){for(var e,i,n=new Uint32Array(t.length),r=new Uint32Array(t.length),a=new Uint8Array(t.length),o=new Uint8Array(t.length),s=0,u=0;u<t.length;++u)i=(e=t[u]).kd,n[u]=e.tx-e.$M,r[u]=i,a[u]=e.stream.cg,void 0!==e.eb&&null!==e.eb&&(o[u]=e.eb),s+=i;return new c.yka(n,r,t.length?t[0].aa:1e3,s)},Object.defineProperties(l.prototype,{uF:{get(){return!0},configurable:!0}}),Object.defineProperties(l.prototype,{index:{get(){return this.ze},configurable:!0},eb:{get(){return this.lCb},configurable:!0},Koa:{get(){return 8*this.fa/this.duration},configurable:!0},Za:{get(){return this.$M},configurable:!0},mb:{get(){return this.tx},configurable:!0},Lj:{get(){var t;return null!=(t=null==(t=this.Vta)?void 0:t.call(this))?t:0},configurable:!0},Dv:{get(){return this.qVa},configurable:!0},$o:{get(){return this.aWa},configurable:!0},region:{get(){return this.eXa},configurable:!0},Fsa:{get(){return this.pVa},configurable:!0},vy:{get(){return this.$Va},configurable:!0},jya:{get(){return this.wzb},configurable:!0},Qk:{get(){return this.Jwb},configurable:!0},Ha:{get(){return this.Hk},configurable:!0},RC:{get(){return this.FXa},configurable:!0},W9:{get(){return this.ya.Za},configurable:!0},Osa:{get(){return this.ya.mb},configurable:!0},vRb:{get(){return this.ya.tv},configurable:!0},Y9:{get(){return this.ya.ud},configurable:!0},a5a:{get(){return this.ya.gf},configurable:!0},$4a:{get(){return this.ya.duration},configurable:!0},Psa:{get(){return this.ya.dd},configurable:!0},uRb:{get(){return this.ya.Ic},configurable:!0},gy:{get(){var t=this.vRb;return r.assert(t),t/this.stream.oa.fb},configurable:!0}}),l.prototype.yxa=function(t){this.qVa=!!t},l.prototype.lbb=function(){this.aWa=!0},l.prototype.pbc=function(t){this.aL={xe:t.V5a(),get $aa(){return t.Hw}}},l.prototype.aS=function(t){this.FXa=t},l.prototype.mbc=function(t,e,i){this.eXa=t,this.pVa=e,this.$Va=i},l.prototype.kj=function(t){var e=this.stream.oa.fb,i=this.Hk||{start:0,end:this.gy};t=this.gdb(t=void 0===t?{}:t),this.ya&&this.ya!==this||(this.ya=new h.iD(this,this)),t.start>i.start&&(this.$M=this.ya.Za+t.start*e),t.end<i.end&&(this.tx=this.ya.Za+t.end*e),this.Hk=n.__assign(n.__assign({},i),t)},l.prototype.tra=function(t){void 0===t&&(t=1),this.Hk?this.kj({start:this.Hk.start+t,end:this.Hk.end}):this.kj({start:t})},l.prototype.ura=function(t){this.Hk?this.kj({start:this.Hk.start,end:(this.Hk.end||0)-t}):this.kj({start:0,end:-t})},l.prototype.yj=function(){this.Ha?this.kj({start:this.Ha.start,end:this.Ha.start}):this.kj({start:0,end:0})},l.prototype.qbc=function(t){this.Hk||this.kj(),this.Hk.Xea=t},l.prototype.Aib=function(t){this.Hk||this.kj(),this.Hk.yv=!0,t&&(this.Hk.e4a=t)},l.prototype.Bib=function(t){this.Hk||this.kj(),this.Hk.zv=!0,t&&(this.Hk.f4a=t)},l.prototype.A4a=function(t){var e;if(!(t<this.ea||t>=this.Qa)&&this.Qk&&this.Qk.length){t=new s.M(t+1-this.ea,1e3).Xk(this.stream.oa);for(var i=this.Qk.length-1;0<=i;--i)if((e=this.Qk[i]).jj<=t)return e;return{jj:0,Qd:this.Psa}}},l.prototype.RQb=function(t){var e;if(!(t<this.ea||t>=this.Qa)&&this.Qk&&this.Qk.length){t=new s.M(t+1-this.ea,1e3).Xk(this.stream.oa);for(var i=this.Qk.length-1;0<=i;--i)if((e=this.Qk[i]).jj<=t)return e;return{jj:0,Qd:this.Psa}}},l.prototype.r4a=function(t,e){var i,n,r;if(!(t<this.ea||t>=this.Qa))return!e&&this.Fyb?{jj:0,Qd:this.ea}:(i=this.oa.fb,n=this.oa.aa,r=Math.floor(this.tv/i),t=Math.min((e?Math.ceil:Math.floor)((s.M.Gcb(t,n)-this.Za+(e?-1:1)*(n/1e3-1))/i),r),i=s.M.Bfa(this.Za+t*i,n),t===r?void 0:{jj:t,Qd:i})},l.prototype.tsa=function(t){return this.mediaType===a.default.Sd.J?this.A4a(t):this.r4a(t,!1)},l.prototype.ssa=function(t){return this.mediaType===a.default.Sd.J?this.RQb(t):this.r4a(t,!0)},l.prototype.s7=function(t){this.kd+=t.fa,this.tx=t.mb,this.Hk&&(this.ya=new h.iD(this,{Za:this.W9,mb:this.tx}),this.Hk.end=this.gy)},l.prototype.dBa=function(t){var e={type:"logdata",target:"endplay",fields:{}},i=this.mediaType===a.default.Sd.P?"audioedit":"videoedit",n=[this.Y9===this.ea?this.Ic:this.dd,this.Y9===this.ea?-this.duration:this.duration];return t&&n.push(t),e.fields[i]={type:"array",value:n},e},l.prototype.toString=function(){return"[".concat(this.Pa,", ").concat(this.bitrate,"kbit/s, ")+"c:".concat(this.dd,"-").concat(this.Ic,",")+"p:".concat(this.ud,"-").concat(this.gf,",d:").concat(this.duration,"]")},l.prototype.toJSON=function(){var t=u.Vw.prototype.toJSON.call(this);return o.default({index:this.index,startPts:this.ea,endPts:this.Qa,"contentStartTicks:":this.Za,contentEndTicks:this.mb,contentStartPts:this.dd,contentEndPts:this.Ic,fragmentStartPts:this.Y9!==this.ea?this.Y9:void 0,fragmentEndPts:this.a5a!==this.Qa?this.a5a:void 0,edit:this.Ha},t),t},l.prototype.z4a=function(t){var e;if(this.Qk)for(var i=0;i<this.Qk.length;++i)this.Qk[i].jj===t&&(e=this.Qk[i].offset);return e},l.prototype.gdb=function(t){var e=t.start||0,i=void 0===t.end?this.gy:Math.min(this.gy,Math.max(e,t.end<0?this.gy+t.end:t.end));return n.__assign(n.__assign({},t),{start:e,end:i})},e.yk=e=l,t.Ve(i.Au,e),t.Ve(i.Dz,e)},function(t,e,i){var n,r,a,o,s;function u(t,e,i){this.context=t,this.errorCode=e,this.x$b=i}_esm(e),e.ii=void 0,t=i(0),n=i(1),r=i(549),a=i(5),o=i(37),s=i(39),u.prototype.send=function(t,e,i,n,r,a){var o=this;return a=void 0===a?s.fx.mU:a,this.ZSb(t,e,i,a,n,r).then(function(t){return o.context.yNb.send(t.context,t.request)})},u.prototype.ZSb=function(t,e,i,n,r,a){var o,s;try{return o=this.context.V9b.create(this.context.KB.hB(),e.url,i,r,n),s=this.SFb(e,t,n,a),Promise.resolve({context:s,request:o})}catch(t){return Promise.reject(t)}},u.prototype.SFb=function(t,e,i,n){return{pf:this.context.pf,log:e,Eo:t.name,url:this.context.kgc(r.m_a(this.context.ri,this.context.Bi,t.name,i)),wBa:this.x$b,timeout:a.Fh(59),headers:r.l_a(this.context.Bi,this.context.TI),Dm:t.Dm,uFb:n}},u.prototype.An=function(t){return t instanceof o.jd?t:r.An(this.errorCode,t)},i=u,i=t.__decorate([n.$(),t.__param(0,n.vp()),t.__param(1,n.vp()),t.__param(2,n.vp())],i),e.ii=i},function(t,e){_esm(e),e.Pu="Utf8EncoderSymbol"},function(t,e,i){var n;_esm(e),e.acb=e.$ba=e.Uf=e.u=void 0,n=i(49),Object.defineProperties(e,{u:{enumerable:!0,get(){return n.u}}}),e.Uf=[n.u.P,n.u.J],e.$ba=function(t,e,i){return t=t||e?e?[n.u.J]:[n.u.P]:[n.u.P,n.u.J],i&&t.push(n.u.Ob),t},e.acb=function(t){return t===n.u.P?"audio":t===n.u.J?"video":t===n.u.Ob?"text":"unknown"}},function(t,e,i){var n;function r(t,e){return void 0===t?void 0:0===t?n.M.Ka:new n.M(t,e)}function a(t,e){return t&&Math.floor(n.M.Bfa(t,e))}function o(t,e){return void 0===t||void 0===e?void 0:t+e}function s(t,e){return void 0===t||void 0===e?void 0:t-e}function u(){}function c(){}_esm(e),e.Dz=e.Au=void 0,n=i(19),Object.defineProperties(u.prototype,{tv:{get(){return s(this.mb,this.Za)||0},configurable:!0},v6b:{get(){return o(this.Za,this.Lj)},configurable:!0},s6b:{get(){return o(this.mb,this.Lj)},configurable:!0},uv:{get(){return r(this.tv,this.aa)},configurable:!0},ec:{get(){return r(this.Za,this.aa)},configurable:!0},Ed:{get(){return r(this.mb,this.aa)},configurable:!0},vd:{get(){return r(this.v6b,this.aa)},configurable:!0},Mc:{get(){return r(this.s6b,this.aa)},configurable:!0},wAa:{get(){return r(this.Lj,this.aa)},configurable:!0}}),e.Au=u,Object.defineProperties(c.prototype,{duration:{get(){return s(this.Qa,this.ea)||0},configurable:!0},ea:{get(){return a(o(this.Za,this.Lj),this.aa)},configurable:!0},Qa:{get(){return a(o(this.mb,this.Lj),this.aa)},configurable:!0},yw:{get(){return a(this.Lj,this.aa)},configurable:!0},Uk:{get(){return a(this.Za,this.aa)},configurable:!0},dd:{get(){return a(this.Za,this.aa)},configurable:!0},Ic:{get(){return a(this.mb,this.aa)},configurable:!0},ud:{get(){return a(o(this.Za,this.Lj),this.aa)},configurable:!0},gf:{get(){return a(o(this.mb,this.Lj),this.aa)},configurable:!0},sn:{get(){return this.duration},configurable:!0},xC:{get(){return this.ea},configurable:!0},Wy:{get(){return this.Qa},configurable:!0}}),e.Dz=c},function(t,e){_esm(e),e.Bu={Request:"Request",zka:"Singleton",k5:"Transient"},e.Ak={FHa:"ConstantValue",GHa:"Constructor",RIa:"DynamicValue",Uha:"Factory",Function:"Function",Instance:"Instance",Psb:"Invalid",oRa:"Provider"},e.cA={vHa:"ClassProperty",HHa:"ConstructorArgument",Tka:"Variable"}},function(t,e){_esm(e),e.FLa="Injector",e.Tz=145152e5,e.zM="ProfileSymbol"},function(t,e){_esm(e),e.Ez="Base16EncoderSymbol"},function(t,e){_esm(e),e.Zz="PboConfigSymbol"},function(t,e){_esm(e),e.GM="TimingApiSymbol",e.bU="MilestoneTimingApiSymbol"},function(t,e){_esm(e),e.Rz="IdProviderSymbol"},function(t,e){_esm(e),e.Sz="LogMessageFactorySymbol"},function(t,e){_esm(e),e.Uq={start:"start",stop:"stop",mZ:"keepAlive",iP:"engage",splice:"splice"},e.Rha="EventPboCommandFactorySymbol",e.GSa="StartEventPboCommandSymbol",e.MSa="StopEventPboCommandSymbol",e.QLa="KeepAliveEventPboCommandSymbol",e.BSa="SpliceEventPboCommandSymbol",e.qJa="EngageEventPboCommandSymbol"},function(t,e,i){var n;_esm(e),n=i(102),e.GH=function(t){return n.assert("number"==typeof t),String.fromCharCode(t>>>24&255)+String.fromCharCode(t>>>16&255)+String.fromCharCode(t>>>8&255)+String.fromCharCode(255&t)},e.MUa=function(t){return t.charCodeAt(3)+(t.charCodeAt(2)<<8)+(t.charCodeAt(1)<<16)+(t.charCodeAt(0)<<24)},e.bnc=function(t,e){return Math.floor(1e3*t/e)}},function(t,e,i){var n,r,a,o,s,u,c,h,f;function l(){return null!==r&&r.apply(this,arguments)||this}function d(){return null!==a&&a.apply(this,arguments)||this}function p(){return null!==o&&o.apply(this,arguments)||this}function b(){return null!==s&&s.apply(this,arguments)||this}function g(){return null!==u&&u.apply(this,arguments)||this}function m(){return null!==c&&c.apply(this,arguments)||this}function v(){return null!==h&&h.apply(this,arguments)||this}function y(){return null!==f&&f.apply(this,arguments)||this}_esm(e),n=i(21),r=i(237).default,n.__extends(l,r),l.prototype.parse=function(t){return r.prototype.parse.call(this,t),this.Zc=this.Zy([{offset:16,type:"offset"},{offset:16,type:"offset"},{offset:96,type:"offset"},{width:"int16"},{height:"int16"},{Vpc:"int32"},{qtc:"int32"},{offset:32,type:"offset"},{ppc:"int16"},{noc:{type:"int8",hEb:32}},{depth:"int16"},{offset:16,type:"offset"}]),!0},l.qd=!0,e.default=t=l,a=t,n.__extends(d,a),d.lf="avc1",e.lob=i=d,o=t,n.__extends(p,o),p.lf="avc2",e.mob=i=p,s=t,n.__extends(b,s),b.lf="avc3",e.nob=i=b,u=t,n.__extends(g,u),g.lf="avc4",e.oob=i=g,c=t,n.__extends(m,c),m.lf="hvc1",e.Urb=i=m,h=t,n.__extends(v,h),v.lf="hev1",e.Nrb=i=v,f=t,n.__extends(y,f),y.lf="av01",e.kob=t=y},function(t,e){function i(t){this.ce=t}_esm(e),e.Uw=void 0,i.prototype.wCa=function(t){this.ce=t},i.prototype.c0a=function(){this.ce=void 0},i.prototype.RX=function(t){return this.ce&&this.ce.Zca&&this.ce.Zca(t)},i.prototype.xP=function(t){this.ce&&this.ce.oC&&this.ce.oC(t)},i.prototype.ZE=function(t){this.ce&&this.ce.pK&&this.ce.pK(t)},i.prototype.hJ=function(t){this.ce&&this.ce.qK&&this.ce.qK(t)},i.prototype.S4a=function(t){this.ce&&this.ce.cza&&this.ce.cza(t)},i.prototype.Gv=function(t){this.ce&&this.ce.gl&&this.ce.gl(t)},i.prototype.U9=function(t){this.ce&&this.ce.y_&&this.ce.y_(t)},i.prototype.wP=function(t,e,i){this.ce&&this.ce.x_&&this.ce.x_(t,e,i)},i.prototype.V9=function(t,e,i){this.ce&&this.ce.rK&&this.ce.rK(t,e,i)},i.prototype.T4a=function(t){this.ce&&this.ce.Yca&&this.ce.Yca(t)},(e.Uw=t=i).prototype.Zca=t.prototype.RX,t.prototype.oC=t.prototype.xP,t.prototype.pK=t.prototype.ZE,t.prototype.qK=t.prototype.hJ,t.prototype.gl=t.prototype.Gv,t.prototype.y_=t.prototype.U9,t.prototype.x_=t.prototype.wP,t.prototype.cza=t.prototype.S4a,t.prototype.rK=t.prototype.V9,t.prototype.Yca=t.prototype.T4a},function(t){t.exports=function(t,e){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}},function(t,e){_esm(e),e.pj={audio:"audio",video:"video",zfa:"timedtext",dEa:"trickplay"}},function(t,e){_esm(e),e.Kz="DeviceFactorySymbol"},function(t,e,i){var n;_esm(e),e.Tj=e.Vtb=e.AD=void 0,n=i(15),e.AD=e.AD||function(t,e,i){return e<=t?t<=i?t:i:e},e.Vtb=function(t,e,i,n,r){return(t-e)*(r-n)/(i-e)+n},e.Tj=function(t){if(n.Oa(t))return(t/1e3).toFixed(3)}},function(t,e,i){var c,r;function a(t,e,i,n,r){var a,o={},s="number"==typeof r;if(r=void 0!==r&&s?r.toString():i,s&&void 0!==i)throw Error(c.Asb);if(i=(o=Reflect.Mua(t,e)?Reflect.getMetadata(t,e):o)[r],Array.isArray(i)){for(var s=0,u=i;s<u.length;s++)if((a=u[s]).key===n.key)throw Error(c.Pqb+" "+a.key.toString())}else i=[];i.push(n),o[r]=i,Reflect.T8(t,o,e)}_esm(e),c=i(56),r=i(41),e.wL=function(t,e,i,n){a(r.XSa,t,e,n,i)},e.s1=function(t,e,i){a(r.YSa,t.constructor,e,i)},e.fq=function(t,e,i){var n,r;"number"==typeof i?(t=[(n=i,r=t,function(t,e){r(t,e,n)})],Reflect.fq(t,e)):"string"==typeof i?Reflect.fq([t],e,i):Reflect.fq([t],e)}},function(t,e,i){var n,r,a;function o(){}_esm(e),e.aM=e.Db=void 0,n=i(122),r=i(37),a=i(4),o.gY=function(t){if(t){if(t.includes(e.aM.tC))return n.Nm.tC;if(t.includes("fps"))return n.Nm.XE;if(t.includes(e.aM.lga))return n.Nm.lga}throw new r.jd(a.Z.krb,void 0,void 0,void 0,void 0,"Invalid KeySystem: "+t)},o.sta=function(t){switch(t){case n.Nm.tC:return e.aM.tC;case n.Nm.XE:return e.aM.XE;default:return e.aM.lga}},(e.Db=o).$z="com.microsoft.playready",o.je="com.microsoft.playready.hardware",o.mH="com.microsoft.playready.software",o.Erb="com.apple.fps.2_0",o.gUa="com.widevine.alpha",o.$Pa="com.microsoft.playready.recommendation.3000",o.aQa="com.microsoft.playready.recommendation.2000",o.Xrb=[o.$Pa],e.aM={XE:"fairplay",lga:"widevine",tC:"playready"}},function(t,e){_esm(e),e.Wvb="StorageValidatorSymbol",e.hD="AppStorageFactorySymbol"},function(t,e,i){var a,o;function n(t,e,i,n,r){return t=void 0===t?a.Z.mo:t,o.jd.call(this,t,e,i,void 0,void 0,n,o.jd.ff(r),r)||this}_esm(e),e.Mh=void 0,a=i(4),S(n,(o=i(37)).jd),e.Mh=n},function(t,e){_esm(e),e.Vz="MediaKeySystemAccessServicesSymbol"},function(t,e){var i;_esm(e),e.cT=e.yob=e.Jga=e.Kga=void 0,(i=e.Kga||(e.Kga={}))[i.$2a=0]="downloading",i[i.TNb=1]="downloaded",i[i.me=2]="appended",i[i.buffered=3]="buffered",i[i.ER=4]="removed",i[i.gtc=5]="unused",(i=e.Jga||(e.Jga={}))[i.waiting=1]="waiting",i[i.qrc=2]="ondeck",i[i.$2a=4]="downloading",i[i.TNb=8]="downloaded",i[i.ZY=6]="inprogress",e.yob="AseBufferViewSymbol",e.cT="AseBufferAccountingSymbol"},function(t,e){_esm(e),e.Dja=e.ko=void 0,(t=e.ko||(e.ko={})).kH="PRE_FETCH",t.kvb="QC",t.Zq="STANDARD",t.a5="SUPPLEMENTAL",t.fjc="DOWNLOAD",e.Dja="PboManifestCommandSymbol"},function(t,i,e){var n,r;_esm(i),i.$7a=i.Rlb=i.nw=i.bca=i.bcb=void 0,t=e(753),n=e(756),r=e(777),e=e(781),i.bcb=t,i.bca=function(t,e){return i.bcb(function(t,e){return void 0!==e?e:t},t,e)},i.nw=n,i.Rlb=r,i.$7a=e},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),i=i(21),r=Error,i.__extends(a,r),n=a,e.assert=function(t,e){if(!t)throw new n(e||"Assertion failed")}},function(t,e){_esm(e),e.hja="6674654e-696c-5078-6966-665374726d21",e.ija="6674654e-696c-4878-6165-6465722e7632",e.WNa="6674654e-696c-5078-6966-66496e646578",e.w4="6674654e-696c-4d78-6f6f-6653697a6573",e.v4="6674654e-696c-5378-6565-6b506f696e74",e.GOa="cedb7489-e77b-514c-84f9-7148f9882554",e.FOa="524f39a2-9b5a-144f-a244-6c427c648df4",e.gja="6674654e-696c-4678-7261-6d6552617465"},function(t,e,i){_esm(e),(t=i(0)).__exportStar(i(886),e),t.__exportStar(i(887),e),t.__exportStar(i(888),e),t.__exportStar(i(889),e),t.__exportStar(i(890),e),t.__exportStar(i(891),e),t.__exportStar(i(892),e),t.__exportStar(i(893),e),t.__exportStar(i(398),e),t.__exportStar(i(399),e),t.__exportStar(i(894),e),t.__exportStar(i(895),e),t.__exportStar(i(248),e)},function(t,e,i){var n;function r(t,e){if(t.length==e.length&&1<t.length){for(var i=t.length,n=0,r=u(t),a=u(e),o=0;o<i;o++)n+=t[o]*e[o];return(n-r*a/i)/i}return!1}function a(t){return!(!Array.isArray(t)||t.length<2)&&(t=o(t),Math.sqrt(t))}function o(t){var e;return!(!Array.isArray(t)||t.length<2)&&(e=s(t),u(t.map(function(t){return(t-e)*(t-e)}))/(t.length-1))}function s(t){return!(!Array.isArray(t)||!t.length)&&u(t)/t.length}function u(t){return!!Array.isArray(t)&&t.reduce(function(t,e){return t+e},0)}function c(t,e,i){return Math.max(Math.min(t,i),e)}function h(t,e){return"number"==typeof t?t:e}function f(t){return 1/(1+Math.exp(-t))}n=i(11),t.exports={gb:function(e,t,i){try{e.emit(t,i)}catch(t){e.Ik("JAVASCRIPT EXCEPTION: Caught in ASE client event listener. Exception:",t,"Event:",i)}},st:function(){var t=Array.prototype.concat.apply([],arguments),e=t.reduce(function(t,e){return t+e.byteLength},0),i=new Uint8Array(e);return t.reduce(function(t,e){return i.set(new Uint8Array(e),t),t+e.byteLength},0),i.buffer},j8:c,GHb:function(t,e,i,n){return{min:c(h(t.min,e),i,n),max:c(h(t.max,e),i,n),YA:c(t.YA||6e4,0,6e5),H_a:c(t.H_a||0,-3e5,3e5),scale:c(t.scale||6e4,0,3e5),Rhb:c(t.Rhb||0,-3e5,3e5),gamma:c(t.gamma||1,.1,10)}},ih:function(t,e){void 0!==t&&n.p5b(t).forEach(function(t){e(t[0],t[1])})},Sra:function(t,e,i){return t.min+(t.max-t.min)*(1-Math.pow(f(6*(e-(t.YA+(t.H_a||0)*(1-i)))/(t.scale+(t.Rhb||0)*(1-i))),t.gamma))},EPb:function(t,e){return t.min+(t.max-t.min)*Math.pow(f(6*(e-t.YA)/t.scale),t.gamma)},Gpc:u,nSb:s,IVb:o,Epc:a,wpc:r,vpc:function(t,e){var i;return t.length==e.length&&(i=r(t,e),t=a(t),e=a(e),0<t&&0<e)&&i/(t*e)},ai:function(t,e,i){return e.C1a?e.C1a(i):new t.Console("ASEJS","media|asejs",e.prefix?e.prefix+" "+i:i)},jac:function(t){return t.length?"{"+t+"} ":""},V$b:function(t,e,i){return{min:t.min*i+(1-i)*e.min,max:t.max*i+(1-i)*e.max,YA:t.YA*i+(1-i)*e.YA,scale:t.scale*i+(1-i)*e.scale,gamma:t.gamma*i+(1-i)*e.gamma}},tanh:Math.tanh||function(t){var e=Math.exp(+t);return t=Math.exp(-t),1/0==e?1:1/0==t?-1:(e-t)/(e+t)},MCa:f,$v:function(t){var e=t.Va.$a.G.id;return{ea:t.ea,duration:t.duration,offset:t.offset,fa:t.fa,bitrate:t.bitrate,profile:t.profile,Cc:t.Cc,X:e,Pa:t.Pa,oc:t.oc,location:t.location,Vh:t.Vh,Uk:t.Uk,Tt:{$a:{G:{id:e}}}}}}},function(t,e,i){var n,r,s,a,u,o,c,h,f,l,d,p,b;function g(t,e,i,n,r,a,o){return(e=b.call(this,e,i)||this).Ryb=!!n.Cc,f.IG.xa(e,t,n,r,a,o),l.Vw.xa(e,t,n),e.Bwb=t.v7a(e.Cc,e.xq),e.ala=n.responseType,e.Awb=n.Uea,void 0===e.ala&&(e.ala=u.Rc&&!u.Rc.D0.sU?0:1),e.Oi=new s,e.Oi.on(e,u.We.oOa,e.Fma),e.Oi.on(e,u.We.nOa,e.nAb),e.Oi.on(e,u.We.pOa,e.qAb),e.Oi.on(e,u.We.fU,e.Ema),e.Oi.on(e,u.We.zlc,e.mAb),e.Oi.on(e,u.We.jH,e.nV),e.JM=!1,e.$e=!1,e.Zm=!1,e.Pp=!1,e.VU=!1,e.kBb=n.A0,e.wBb=n.HC,e.Yt=0,e}_esm(e),e.B2=e.Kh=void 0,t=(n=i(0)).__importDefault(i(12)),r=n.__importStar(i(11)),s=t.default.Kf,a=n.__importDefault(i(3)),u=a.default.Ks,o=i(182),c=n.__importDefault(i(155)),h=i(8),t=i(36),i(2),i(972),f=i(186),l=i(184),(p=d=e.Kh||(e.Kh={}))[p.Itb=0]="NOTHING_APPENDED",p[p.aub=1]="PARTIAL",p[p.Fs=2]="COMPLETE",p[p.Jf=3]="ERROR",b=u,n.__extends(g,b),Object.defineProperties(g.prototype,{Cc:{get(){return this.Ryb},configurable:!0},active:{get(){return this.$e},configurable:!0},KAa:{get(){return this.Zm},configurable:!0},complete:{get(){return!this.JM&&5===this.readyState},configurable:!0},aborted:{get(){return this.JM},configurable:!0},awa:{get(){return this.Pp&&!this.VU},configurable:!0}}),g.prototype.xa=function(t){var e;f.IG.prototype.xa.call(this,t),this.Np||!this.Ce.Ina&&this.Cc||(t=this.Np=c.default.instance(),!this.active)||(e=a.default.time.ia(),t.Bw(e,this.hG),this.Zm&&(t.jhb(),e=this.UK,this.connect&&0<e.length&&t.LA(e[0])))},g.prototype.Tr=function(){return this.me||1!==this.responseType?5===this.readyState:3<=this.readyState},g.prototype.jE=function(t,i,e,n,r){return n=n||h.$v(this),this.me=r?this.Ce.N4b?r.every(function(t,e){return i.appendBuffer(t,0===e?n:void 0)}):i.appendBuffer(1<r.length?h.st(r):r[0],n):i.appendBuffer(this.response,n),null!=(r=this.p6)&&r.S3b(),this.response&&this.CR(),{status:this.me?d.Fs:d.Jf}},g.prototype.tK=function(){var t;return null!=(t=this.p6)&&t.n4b(),(this.Pp=u.prototype.open.call(this,this.Bwb,{start:this.offset,end:this.offset+this.fa-1},this.ala,{},void 0,void 0,this.Awb,this.stream.ku))&&this.RX(this),this.Pp},g.prototype.abort=function(){var t,e;return this.aborted||(t=this.$e,(e=this.Np)&&t&&e.az(a.default.time.ia(),this.Zm,this.hG),this.JM=!0,this.Zm=this.$e=!1,u.prototype.abort.call(this),this.wP(this,t,this.awa)),!0},g.prototype.cd=function(){7!==this.readyState&&5!==this.readyState&&this.abort(),this.Oi&&this.Oi.clear(),b.prototype.cd.call(this)},g.prototype.Fma=function(){var t,e=this.Zf||this.loadTime;null!=(t=this.p6)&&t.g4b(),o.Fz.instance().push(a.default.time.ia()-e),this.$e||(this.$e=!0,this.Xv=this.track.Xv(),this.stream.K.nbb||(t=this.Np)&&t.Bw(e,this.hG),this.xP(this),this.vw=this.Zf)},g.prototype.nAb=function(){var t,e,i;null!==(w=this.p6)&&void 0!==w&&w.c4b(),w=this.Zf||this.zsa,t=this.connect,e=this.UK,o.Fz.instance().push(a.default.time.ia()-w),this.$e||(this.$e=!0),this.Zm||(this.Zm=!0,i=this.Np,this.stream.K.nbb&&i&&i.Bw(w,this.hG),i&&i.jhb(),t&&0<e.length&&i&&i.LA(e[0]),this.ZE(this),this.vw=w,this.fa<=0&&(w=this.fa,this.Oac(this.Ag),this.V9(this,this.Ag,w)),this.stream.ub?this.stream.ueb(this.getResponseHeader("X-TCP-Info",!0)):this.getAllResponseHeaders(!0))},g.prototype.qAb=function(){var e,t=this.Zf,i=this.bytesReceived-this.Yt;o.Fz.instance().push(a.default.time.ia()-t),this.Zm||(this.Zm=!0),(e=this.Np)&&(void 0!==this.vw&&e.hE(i,this.vw,t,this.hG),(i=this.UK)&&i.length&&i.forEach(function(t){e.KA(t)})),this.hJ(this),this.vw=t,this.Yt=this.bytesReceived},g.prototype.Ema=function(){var t,e;null!==(w=this.p6)&&void 0!==w&&w.o_(),w=this.Zf,t=this.bytesReceived-this.Yt,o.Fz.instance().push(a.default.time.ia()-w),(e=this.Np)&&(0<t&&e.hE(t,this.vw,w,this.hG),(t=this.UK)&&t.length&&t.forEach(function(t){e.KA(t)}),e.az(w,this.Zm,this.hG)),this.Zm=this.$e=!1,this.VU=!0,this.Gv(this),this.vw=w,this.Yt=this.bytesReceived,this.cd()},g.prototype.mAb=function(){this.T4a(this)},g.prototype.oyb=function(){var t=(t=this.stream)?t.toString():this.url,e=this.pO;return e&&(t+=",range "+e.start+"-"+e.end),t},Object.defineProperties(g.prototype,{hG:{get(){return{requestId:this.oyb(),Zk:this.oc,type:this.mediaType,A0:this.kBb,fa:this.fa,bytesReceived:this.bytesReceived,HC:this.wBb}},configurable:!0}}),g.prototype.nV=function(){var t,e,i;this.H.warn("AseMediaRequest._onError:",this.toString()),w=this.Zf,t=this.status,e=this.qg,i=this.zi,o.Fz.instance().push(a.default.time.ia()-w),this.complete?this.H.warn("Error on a done request "+this.toString()+", failurecode: "+e):this.aborted?this.H.warn("Error on an aborted request "+this.toString()+", failurecode: "+e):r.Oa(e)?((e=this.Np)&&this.Ce&&this.Ce.eBa&&this.loadTime&&void 0===t&&e.hE(this.Yt?this.bytesReceived-this.Yt:this.bytesReceived,this.vw||this.loadTime,w,this.hG),this.stream.ub&&(w=this.getResponseHeader("X-TCP-Info",!0))&&this.stream.ueb(w)&&(this.zWb=!0),this.U9(this)):this.H.warn("ignoring undefined request error (nativecode: "+i+")")},e.B2=i=g,t.Ve(f.IG,i,!1),t.Ve(l.Vw,i,!1)},function(t,k,e){var i,S,a,T,I,O,x,R,o,P,C,s,j;function n(){this.hg=O.dk("Http"),this.ul=new i.Bk,this.HH=0,this.Zb={ssl:0,"non-ssl":0,invalid:0},this.T4={Ob:1,vwb:2,rGa:3},this.addEventListener=this.ul.addListener,this.removeEventListener=this.ul.removeListener}function r(t){var e=t.url.split("?"),i="sc="+t.aac,n=t.n_a?"random="+(1e17*o.XT()).toFixed(0):"",r=e[0],r=e[1]?r+("?"+e[1])+"&"+i:r+"?"+i;return r+=n?"&"+n:"",r=t.xc&&!a.bba(r)&&(t=S.config&&S.config.tpa)?t.replace("{URL}",r).replace("{EURL}",encodeURIComponent(r)):r}function N(t,e){var i=t.url.split("?"),n=u(t),r=i[0];n&&(e.bu=n,(void 0===t.vu?S.config:t).vu||t.ku!==s.lja?(t.headers=t.headers||{},t.headers.Range="bytes="+n):(e.bu=n,r="/"===r[r.length-1]?r+"range/":r+"/range/",r+=n)),n=t.n_a?"random="+(1e17*o.XT()).toFixed(0):"",S.config.sB&&t.Uea&&(n="sc="+t.Uea+(n?"&"+n:"")),r=i[1]?r+("?"+i[1])+(n?"&"+n:""):r+(n?"?"+n:""),t.xc&&!a.bba(r)&&(t=S.config&&S.config.tpa)&&(r=t.replace("{URL}",r).replace("{EURL}",encodeURIComponent(r))),e.url=r}function u(t){var e=t.offset;if(void 0!==e)return x.ZW(e),void 0!==t.length?(t=e+t.length-1,x.ZW(t),e+"-"+t):e+"-"}function M(i,t,e,n){var r=n.lfb,a=n.headers;switch(i.open(r?"POST":"GET",t,!e),n.responseType){case k.PY:i.responseType="arraybuffer";break;case k.cva:R.A_a(i,"overrideMimeType",void 0,"text/xml")}r&&(t={"Content-Type":C.vg(r)?"text/plain":"application/x-octet-stream"},a=a?R.He(t,a):t),a&&R.ih(a,function(t,e){i.setRequestHeader(t,e)}),n.withCredentials&&(i.withCredentials=!0),r?i.send(r):i.send()}function D(t,e){switch(e.type){case k.PY:return t.response||new ArrayBuffer(0);case k.cva:return t.responseXML;default:return t.responseText}}_esm(k),k.PY=k.cva=k.bva=k.fXb=k.eva=k.eXb=k.L8a=k.naa=k.pf=k.wwb=k.xwb=k.dXb=k.dva=k.aXb=k.bXb=k.$Wb=k.cXb=void 0,i=e(73),S=e(20),t=e(17),a=e(40),T=e(59),I=e(4),O=e(9),x=e(23),R=e(25),o=e(14),P=e(58),C=e(15),s=e(71),j=e(1211),n.prototype.dcc=function(t){var e=new XMLHttpRequest;t=r(t),e.open("HEAD",t),e.onreadystatechange=function(){e.readyState},e.send()},n.prototype.download=function(i,t){var n,e,r,a,o,s,u,c,h,f,l,d,p,b;function g(){var t;u||(u=!0,b&&(bt.clearTimeout(b),b=null),n.ul.removeListener(k.eva,w),n.Sma(l,d),d&&(d.onloadstart=null,d.onreadystatechange=null,d.onprogress=null,d.onerror=null,d.onload=null,d=d.onabort=null),l.ha||(l.Ba!=I.Y.qD?r.warn("Download failed",s,I.Oz(l)):r.trace("Download aborted",s)),t=c,(c=null)!=t&&t.reduceRight(function(t,e){P.pg(function(){return e(l)})},null),n.ul.Tc(k.L8a,l,!0))}function m(){b&&(bt.clearTimeout(b),b=null),b=bt.setTimeout(A,p?o:a)}function v(t,e,i,n){var r,a;l.ha=!1,l.Ba=t,r=T.Do(),(a=l.xm).hj=a.hj||r,a.Fq=a.Fq||r,e&&0<e&&(l.El=e,l.Of=e.toString()),i&&(l.Sb=i),n&&(l.iG=n),t!==I.Y.GT&&t!==I.Y.VG&&t!==I.Y.JT||!d||(d.onabort=null,_()),g()}function y(t){var e,i;try{(i=t.getResponseHeader("X-Netflix.Retry.Server.Policy"))&&(e=JSON.parse(i))}catch(t){}return e}function w(){k.dva()||v(I.Y.GT)}function A(){v(p?I.Y.VG:I.Y.JT)}function _(){try{null!=d&&d.abort()}catch(t){}}function E(){v(I.Y.qD)}return n=this,x.Ua(t),r=null!=(e=null==i?void 0:i.j)&&e.log?O.aj(i.j,"Http"):this.hg,a=i.r8||S.config.r8,o=i.uya||S.config.uya,s={Num:this.HH++},u=!1,c=[t],h={},this.cCb(i),l=new j.SKa(i,_,A,h,function(t){u||(x.Ua(c,"Callback should be added before download starts."),c&&c.unshift(t))}),p=!1,P.pg(function(){var t,e;if(C.owa(i.url))try{N(i,l),f=l.url,x.$W(f),s.Url=f,k.dva()?(d=new XMLHttpRequest,(t=S.config.wgc&&void 0!==d.onloadstart)&&(d.onloadstart=function(){var t=T.Do();h.ps=t,l.r_({mediaRequest:i,timestamp:t})}),d.onreadystatechange=function(){2===(null==d?void 0:d.readyState)&&(p=!0,h.hj=T.Do(),d.onreadystatechange=null,m(),n.Sma(l,d),l.s_({timestamp:h.hj,connect:!0,mediaRequest:i,start:h.ps,rt:[h.hj-h.ps],responseHeaders:l.headers}))},d.onprogress=function(t){p=!0,h.PW=t.loaded,m(),n.Sma(l,d),t={mediaRequest:i,bytes:t.loaded,timestamp:T.Do(),bytesLoaded:t.loaded,responseHeaders:l.headers},l.s_(t)},d.onload=function(t){!u&&d&&(x.Ua(void 0===h.Fq),h.Fq=T.Do(),h.hj=h.hj||h.Fq,h.PW=t.loaded,200<=d.status&&d.status<=299?(t=D(d,l),l.parsed=!1,l.content=t,l.ha=!0):420===d.status?v(I.Y.IT,d.status):v(I.Y.HT,d.status,d.response,y(d)),g())},d.onabort=E,d.onerror=function(){var t,e;if(d)if(t=d.status,0<(t=void 0!==S.config.Q4a?S.config.Q4a:t))if(420===t)v(I.Y.IT,t);else{try{e=d.responseText}catch(t){}v(I.Y.HT,t,e,y(d))}else v(I.Y.KT)},e=T.Do(),M(d,f,!1,i),n.ul.Tc(k.naa,l,!0),t||(h.ps=e,l.r_({mediaRequest:i,timestamp:e})),m(),n.ul.addListener(k.eva,w)):P.pg(v.bind(void 0,I.Y.GT))}catch(t){r.error("Exception starting download",t,s),v(I.Y.jia,void 0,R.ff(t))}else v(I.Y.xKa)}),l},n.prototype.C7b=function(t){var e=new XMLHttpRequest,i=t.url,n=t.B7b;e.open("HEAD",i),e.timeout=Math.max(2*n.$_b,S.config.jAa),e.onreadystatechange=function(){2===e.readyState&&n&&n.ZQ({url:i})},e.ontimeout=e.onerror=function(){n&&n.Cya({url:i})},e.send()},n.prototype.cCb=function(t){var e;try{e=t.url,C.owa(e)?0===e.indexOf("https")?this.Zb.ssl++:0===e.indexOf("http")?this.Zb["non-ssl"]++:this.Zb.invalid++:this.Zb.invalid++}catch(t){}},n.prototype.Sma=function(t,e){var i;!t.headers&&e&&(i={},e.getAllResponseHeaders().trim().split(/[\r\n]+/).forEach(function(t){var e=rt(t.split(": "));t=e.next().value,e=L(e).join(": "),t&&(i[t.toLowerCase()]=e)}),t.headers=i)},k.cXb=r,k.$Wb=function(t){var e=t.url.split("?"),i="bb_reason="+t.reason,n=t.n_a?"random="+(1e17*o.XT()).toFixed(0):"",r=e[0],r=e[1]?r+("?"+e[1])+"&"+i:r+"?"+i;return r+=n?"&"+n:"",r=t.xc&&!a.bba(r)&&(t=S.config&&S.config.tpa)?t.replace("{URL}",r).replace("{EURL}",encodeURIComponent(r)):r},k.bXb=N,k.aXb=u,k.dva=t.sRa,k.dXb=function(){return!1!==o.Ye.onLine},k.xwb=M,k.wwb=D,k.pf=new n,k.naa=1,k.L8a=2,k.eXb=3,k.eva=4,k.fXb=5,k.bva=k.pf.T4.Ob,k.cva=k.pf.T4.vwb,k.PY=k.pf.T4.rGa,bt._cad_global.http=k.pf},function(t,e,i){e=i(208),t.exports=e.call(Function.call,Object.prototype.hasOwnProperty)},function(t,e,i){var n=i(635);t.exports=function(t){return"symbol"==typeof t?"Symbol":"bigint"==typeof t?"BigInt":n(t)}},function(t,e){var i;_esm(e),i=0,e.id=function(){return i++}},function(t,e){_esm(e),e.lH="PlatformConfigDefaultsSymbol"},function(t,e){_esm(e),e.eIa="DebugConfigSymbol",e.Hz="DebugSymbol"},function(t,e){_esm(e),e.Sha="EventSourceSymbol",e.Vha="GlobalEventSourceSymbol",e.b3="DebugEventSourceSymbol",e.tIa="DiagnosticsEventSourceSymbol"},function(t,e){_esm(e),e.EM="ThrottleFactorySymbol"},function(t,e){_esm(e),e.lM="LoggerSinksSymbol"},function(t,e){_esm(e),e.dH="ManifestFetcherSymbol"},function(t){var e,o,i,n;function s(){s.xa.call(this)}function u(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function r(t,e,i,n){var r,a;return u(i),void 0===(r=t.Gg)?(r=t.Gg=Object.create(null),t.MH=0):(void 0!==r.lrc&&(t.emit("newListener",e,i.listener||i),r=t.Gg),a=r[e]),void 0===a?(r[e]=i,++t.MH):("function"==typeof a?a=r[e]=n?[i,a]:[a,i]:n?a.unshift(i):a.push(i),0<(i=void 0===t.mV?s.tMb:t.mV)&&a.length>i&&!a.ihc&&(a.ihc=!0,(i=Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",i.yt=t,i.type=e,i.count=a.length,console&&console.warn&&console.warn(i))),t}function a(t,e,i){return(e=function(){if(!this.D4a)return this.target.removeListener(this.type,this.znb),this.D4a=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(t={D4a:!1,znb:void 0,target:t,type:e,listener:i})).listener=i,t.znb=e}function c(t){var e=this.Gg;if(void 0!==e){if("function"==typeof(t=e[t]))return 1;if(void 0!==t)return t.length}return 0}function h(i,n,r,a){if("function"==typeof i.on)a.once?i.once(n,r):i.on(n,r);else{if("function"!=typeof i.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof i);i.addEventListener(n,function t(e){a.once&&i.removeEventListener(n,t),r(e)})}}e="object"==typeof Reflect?Reflect:null,o=e&&"function"==typeof e.apply?e.apply:function(t,e,i){return Function.prototype.apply.call(t,e,i)},i=Number.isNaN||function(t){return t!=t},t.exports=s,t.exports.once=function(s,u){return new Promise(function(t,e){function i(t){s.removeListener(u,n),e(t)}function n(){"function"==typeof s.removeListener&&s.removeListener("error",i),t([].slice.call(arguments))}var r,a,o;h(s,u,n,{once:!0}),"error"!==u&&(a=i,o={once:!0},"function"==typeof(r=s).on&&h(r,"error",a,o))})},(s.EventEmitter=s).prototype.Gg=void 0,s.prototype.MH=0,s.prototype.mV=void 0,n=10,Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get(){return n},set(t){if("number"!=typeof t||t<0||i(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");n=t}}),s.xa=function(){void 0!==this.Gg&&this.Gg!==Object.getPrototypeOf(this).Gg||(this.Gg=Object.create(null),this.MH=0),this.mV=this.mV||void 0},s.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||i(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this.mV=t,this},s.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);if(r="error"===t,void 0!==(i=this.Gg))r=r&&void 0===i.error;else if(!r)return!1;if(r){if((n=0<e.length?e[0]:n)instanceof Error)throw n;throw(e=Error("Unhandled error."+(n?" ("+n.message+")":""))).context=n,e}if(void 0===(i=i[t]))return!1;if("function"==typeof i)o(i,this,e);else{for(var n=i.length,r=Array(n),a=0;a<n;++a)r[a]=i[a];for(i=0;i<n;++i)o(r[i],this,e)}return!0},s.prototype.on=s.prototype.addListener=function(t,e){return r(this,t,e,!1)},s.prototype.V_=function(t,e){return r(this,t,e,!0)},s.prototype.once=function(t,e){return u(e),this.on(t,a(this,t,e)),this},s.prototype.$za=function(t,e){return u(e),this.V_(t,a(this,t,e)),this},s.prototype.Hy=s.prototype.removeListener=function(t,e){var i,n,r,a,o;if(u(e),void 0===(n=this.Gg))return this;if(void 0===(r=n[t]))return this;if(r===e||r.listener===e)0==--this.MH?this.Gg=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!=typeof r){for(a=-1,i=r.length-1;0<=i;i--)if(r[i]===e||r[i].listener===e){o=r[i].listener,a=i;break}if(a<0)return this;if(0===a)r.shift();else{for(;a+1<r.length;a++)r[a]=r[a+1];r.pop()}1===r.length&&(n[t]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",t,o||e)}return this},s.prototype.removeAllListeners=function(t){var e,i,n=this.Gg;if(void 0===n)return this;if(void 0===n.removeListener)return 0===arguments.length?(this.Gg=Object.create(null),this.MH=0):void 0!==n[t]&&(0==--this.MH?this.Gg=Object.create(null):delete n[t]),this;if(0===arguments.length){for(e=Object.keys(n),n=0;n<e.length;++n)"removeListener"!==(i=e[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this.Gg=Object.create(null),this.MH=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;0<=n;n--)this.removeListener(t,e[n]);return this},s.prototype.listeners=function(t){if(void 0===(e=this.Gg))t=[];else if(void 0===(t=e[t]))t=[];else if("function"==typeof t)t=[t.listener||t];else{for(var e=Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];t=e}return t},s.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):c.call(t,e)},s.prototype.listenerCount=c},function(t,e,i){var h,f,l,n,s;function r(t){this.AH=t,this.we=[],this.console=new n.default.Console("ASEJS_DOWNLOAD_TRACK_POOL","media|asejs")}_esm(e),e.zp=void 0,h=i(0),f=h.__importDefault(i(28)),l=i(6),n=h.__importDefault(i(3)),s=i(973),Object.defineProperties(r,{instance:{get(){var t;return void 0===r.mN&&(t=i(3).default,r.mN=new r(t.$L)),r.mN},configurable:!0}}),r.reset=function(){r.mN=void 0},r.prototype.vt=function(t,e,i,n,r,a){var o=a.Ibc?this.LQb(i,e,t,a.Jbc):-1;return-1===o?(o={track:this.MKb(i,n,t,r,a),tk:i,L:e,$fb:t,fG:[],Al:!1,TO:!1},this.we.push(o),this.F8b(o),t=!1):(t=!0,o=this.we[o]),t=new s.LRa(this.console,o.track,o.Al,t),o.fG.push(t),t},r.prototype.F8b=function(e){e.track.on("created",function t(){e.Al=!0,e.track.removeListener("created",t)})},r.prototype.SO=function(e){var t;e.Hr(),-1!==(g=this.MX(function(t){return t.track===e.track}))?1===(g=this.we[g]).fG.length?(g.track.Hr(),g.TO=!0):0<=(t=g.fG.indexOf(e))&&g.fG.splice(t,1):e.track.Hr()},r.prototype.Pf=function(){this.AH.Pf()},r.prototype.MKb=function(t,e,i,n,r){var a=this,o=!1,s=u=!1,u=t?i===l.u.J?(t=1,r.Ij?(s=!0,t=r.DQ):r.Cy&&2<r.Cy&&(s=!0,t=r.Cy),u=r.Hmb||!s,{type:this.AH.J,openRange:u,pipeline:s,connections:t,socketBufferSize:r.PS,minRequestSize:r.fK}):i===l.u.P?(o=r.Ij&&(r.rgc||e&&r.sgc),u=r.Hmb||!o,{type:this.AH.P,openRange:u,pipeline:o,connections:1,socketBufferSize:r.N7,minRequestSize:r.fK}):i===l.u.Ob?{type:this.AH.Ob,openRange:!0,pipeline:!1,connections:1,socketBufferSize:r.aec,minRequestSize:r.fK}:{type:r.pNb?this.AH.J:this.AH.Lrb,openRange:!1,pipeline:!0,connections:1,socketBufferSize:r.Rua,minRequestSize:r.fK}:{type:i===l.u.P?f.default.Sd.P:f.default.Sd.J,openRange:!1,pipeline:!1,connections:1,socketBufferSize:i===l.u.P?r.N7:r.PS,minRequestSize:r.fK},c=new this.AH(u,n);return c.Ij=s,c.on("transportreport",function(t){var e=a.MX(function(t){return t.track===c});-1===e||(e=a.we[e]).fG.length&&e.fG[0].emit("transportreport",t)}),c.on("mediaRequestComplete",function(t){var e=a.MX(function(t){return t.track===c});-1===e||(e=a.we[e]).fG.length&&e.fG[0].emit("mediaRequestComplete",t)}),c.on("destroyed",function(){var t=a.MX(function(t){return t.track===c});-1!==t&&a.we.splice(t,1),c.removeAllListeners()}),c.on("pipelinedisabled",function(){c.Ij=!1,(o&&r.qgc||r.Jmb)&&(r.Jmb&&c.config.type===l.u.J?c.Yda(h.__assign(h.__assign({},c.config),{socketBufferSize:r.i2b,pipeline:!1,openRange:!0,connections:1})):c.Yda(h.__assign(h.__assign({},c.config),{pipeline:!1,openRange:!0})))}),c},r.prototype.LQb=function(e,i,n,r){return this.MX(function(t){return!t.TO&&(!r&&t.track.config.urc||!e?!t.tk&&t.$fb===n:t.tk&&t.L===i&&t.$fb===n)})},r.prototype.MX=function(t){for(var e=0;e<this.we.length;++e)if(t(this.we[e]))return e;return-1},e.zp=r},function(t,e){_esm(e),e.yH="VideoPreparerSymbol"},function(t,e){_esm(e),e.xM=e.pH=void 0,(t=e.pH||(e.pH={})).rkc="ident",t.Oia="main",t.gHa="credits",e.xM="PlaygraphHelperSymbol"},function(t,e){_esm(e),e.kp=void 0,e.kp=function(t,e){return[].concat.apply([],J(t)).map(function(t){return Object.assign({name:t},null!=e?e:{})})}},function(t,e){_esm(e),e.crb=e.Nm=void 0,(t=e.Nm||(e.Nm={}))[t.tC=0]="playready",t[t.lga=1]="widevine",t[t.XE=2]="fairplay",t[t.ioc=3]="clearkey",e.crb="DrmTypeSymbol"},function(t,e,i){var n;function r(){}_esm(e),e.Rd=void 0,n=i(26),r.H1a=function(t){var e={};return e[n.wf.rU]=r.n3,e[n.wf.s3]=r.n3,e[n.wf.HM]=r.aia,e[n.wf.gM]=r.gM,e[n.wf.Zw]=t||r.Zw,e[n.wf.gD]=r.n3,e[n.wf.HD]=r.yU,e[n.wf.sl]=r.sl,e},(e.Rd=r).$xa='video/mp4; codecs="avc1.4d0028"',r.n3="avc1.4d0028",r.aia="hev1.1.6.L93.B0",r.uha="dvhe.05.01",r.$Ha="dvhe.05.04",r.vha="dvhe.05.05",r.wha="dvhe.05.06",r.xha="dvhe.05.07",r.yha="dvhe.05.09",r.Zw=r.uha,r.gM=r.aia,r.uga="mp4a.40.2",r.eA="mp4a.40.42",r.Rpb="ec-3",r.yU="vp09.00.11.08.02",r.sl="av01.0.04M.08"},function(t,e){_esm(e),e.JIa="DrmServicesSymbol",e.f3="DrmServicesProviderSymbol"},function(t,e,i){var n;function r(){}_esm(e),e.tH=void 0,t=i(0),i=i(1),r.prototype.format=function(t,e){for(var i,n=1;n<arguments.length;++n);return i=Array.prototype.slice.call(arguments,1),t.replace(/{(\d+)}/g,function(t,e){return void 0!==i[e]?i[e]:t})},r.prototype.hkb=function(t){for(var e=t.length,i=new Uint16Array(e),n=0;n<e;n++)i[n]=t.charCodeAt(n);return i.buffer},r.prototype.kkb=function(t){return JSON.stringify(t,null,"  ")},n=r,n=t.__decorate([i.$()],n),e.tH=n},function(t,e,i){var n=i(179);t.exports=function(i){return function t(e){return 0===arguments.length||n(e)?t:i.apply(this,arguments)}}},function(t,e){_esm(e),e.j5=void 0,e.$q={wM:"PRIMARY",yga:"ASSISTIVE",$Ga:"COMMENTARY",NONE:"NONE"},e.j5={assistive:e.$q.yga,closedcaptions:e.$q.yga,directorscommentary:e.$q.$Ga,commentary:e.$q.$Ga,subtitles:e.$q.wM,primary:e.$q.wM,none:e.$q.NONE}},function(t){var i,n,r,a,o,s;function u(){throw Error("setTimeout has not been defined")}function c(){throw Error("clearTimeout has not been defined")}function h(e){if(i===setTimeout)return setTimeout(e,0);if((i===u||!i)&&setTimeout)return(i=setTimeout)(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}function f(){a&&o&&(a=!1,o.length?r=o.concat(r):s=-1,r.length&&l())}function l(){var t;if(!a){t=h(f),a=!0;for(var e=r.length;e;){for(o=r,r=[];++s<e;)o&&o[s].dz();s=-1,e=r.length}o=null,a=!1,!function(e){if(n===clearTimeout)return clearTimeout(e);if((n===c||!n)&&clearTimeout)return(n=clearTimeout)(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(t)}}function d(t,e){this.LRb=t,this.NA=e}function e(){}t=t.exports={},i="function"==typeof setTimeout?setTimeout:u,n="function"==typeof clearTimeout?clearTimeout:c,a=!(r=[]),s=-1,t.orc=function(t){var e=Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];r.push(new d(t,e)),1!==r.length||a||h(l)},d.prototype.dz=function(){this.LRb.apply(null,this.NA)},t.title="browser",t.Qnc=!0,t.BX={},t.Anc=[],t.version="",t.ptc={},t.on=e,t.addListener=e,t.once=e,t.Hy=e,t.removeListener=e,t.removeAllListeners=e,t.emit=e,t.V_=e,t.$za=e,t.listeners=function(){return[]},t.Mnc=function(){throw Error("process.binding is not supported")},t.soc=function(){return"/"},t.doc=function(){throw Error("process.chdir is not supported")},t.ftc=function(){return 0}},function(t,e,i){var n,r;function a(t){t="(".concat(t,")"),this.H=new n.default.Console("ASEJS","media|asejs",t),this.xma=[]}_esm(e),e.Mm=void 0,n=i(0).__importDefault(i(3)),r=i(105),a.prototype.nq=function(t){var e;return this.xma[t]||(e="[".concat(t,"]"),this.xma[t]=r.ai(n.default,this.H,e)),this.xma[t]},e.Mm=new a(0)},function(t,c,h){!function(t){var a,n,e,o,i,s;function u(t,e){return t-e}function r(t,e){this.name=t,this.iqa=e,this.rF=[],this.oYb=0}_esm(c),c.Jrb=c.kJ=void 0,a=h(0),n=h(10),e=a.__importDefault(h(3)),o="gctag"===t.BX.Hrb,c.kJ=function(t,e){var i,n;return o?(i=new s(t.name,e),n=t,a.__extends(r,n),r):t;function r(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(t=n.apply(this,a.__spreadArray([],a.__read(t),!1))||this).k5a=i.QKb(t),t}},Object.defineProperties(r,{console:{get(){return i=i||new e.default.Console("GCTAGGER")},configurable:!0}}),r.prototype.QKb=function(t){var e,i;if(o&&(e=(e=this.iqa)||r.console,!t.k5a&&"undefined"!=typeof nrdp))return t={type:this.name,id:this.oYb++},this.rF.push(t.id),i=JSON.stringify(t),i=nrdp.k5a(i,function(t,e,i,n){t.rF.splice(t.rF.indexOf(e),1),t.rF=t.rF.sort(u);for(var r=[],a=0;a<t.rF.length&&a<5;a++)r.push(t.rF[a]);null!=n&&n.error("Removing instance for ".concat(i,"/").concat(e,". ")+"".concat(t.rF.length," remaining, earliest: ").concat(r,"}"))}.bind(null,this,t.id,t.type,e)),n.S&&e&&e.info("Creating tagged instance",t),i},s=r,c.Jrb=s}.call(this,h(128))},function(t,e,i){var n,r,a,o,s,u,c,h,f,l;function d(t){return!(!t||"function"!=typeof t.ti)}function p(t){return!(!d(t)||"boolean"!==(t=typeof t.LYb)&&"undefined"!==t)}function b(t){var e=this;this.Eyb=t,this.cV=!1,this.RAb=function(t){return e.J7b(t)},this.g1a()}function g(t){var e=h.call(this,function(){return e.hUb()})||this;return e.NA=t,e.index=0,e}function m(t,e,i){var n=f.call(this,function(){return n.qya()})||this;return n.console=e,n.dm=i,n.qAa=!1,Array.isArray(t)?n.oV=new s(t):n.oV=t,n}function v(t,e,i){var n=l.call(this,function(){return n.pyb()})||this;return n.source=t,n.wxa=e,n.iqa=i,n}_esm(e),e.flatten=e.map=e.Opb=e.RPb=e.KYb=e.xob=e.AsyncIterator=void 0,n=i(0),r=i(10),b.HZb=function(i,n){!function e(){var t=i.next();t.then(function(t){p(i)&&i.LYb||n(t)}),t.then(function(t){return!t.done&&e()})}()},Object.defineProperties(b.prototype,{It:{get(){return this.cV},configurable:!0}}),b.e6a=function(){return new s([])},b.sua=function(){return a=a||Promise.resolve({done:!0})},Object.defineProperties(b.prototype,{fQ:{get(){return this.Um||!1},configurable:!0}}),b.prototype.ti=function(){this.cancel()},b.prototype.cancel=function(){return this.KWa(),this.Um=!0,this.pla},b.prototype.next=function(){return this.Um?this.pla:Promise.race([this.pla,this.Eyb()]).then(this.RAb)},b.prototype.J7b=function(t){return t.done&&(this.cV=!0,this.ti()),this.fQ||(this.KWa(),this.g1a()),t},b.prototype.g1a=function(){var e=this;this.pla=new Promise(function(t){e.KWa=function(){t({done:!0})}})},o=b,e.AsyncIterator=o,h=o,n.__extends(g,h),g.prototype.ti=function(){d(this.NA)&&this.NA.ti(),h.prototype.ti.call(this)},g.prototype.hUb=function(){return this.NA.length>this.index?Promise.resolve({value:this.NA[this.index++],done:!1}):Promise.resolve({done:!0})},s=g,e.xob=s,e.KYb=d,e.RPb=p,f=o,n.__extends(m,f),m.prototype.L7b=function(t){var e;return this.qAa=!1,e=this.console,r.S&&e&&e.trace("CompoundIterator: processNextOuterIterator"),t.done?t:(t=t.value,this.oN?(d(t)&&t.ti(),o.sua()):(Array.isArray(t)?this.dm=new s(t):this.dm=t,this.qya()))},m.prototype.K7b=function(t){var e=this.console;return r.S&&e&&e.trace("CompoundIterator: processNextInnerResult",this.oN,t.done),!t.done||this.oN?t:(this.dm=void 0,this.qya())},m.prototype.ti=function(){var t=this.console;r.S&&t&&t.trace("CompoundIterator: dispose"),this.oN=!0,f.prototype.ti.call(this),d(this.oV)&&this.oV.ti(),d(this.dm)&&this.dm.ti()},m.prototype.toString=function(){return"CompoundIterator ".concat(this.oN," ").concat(this.oV," ").concat(this.dm)},m.prototype.qya=function(){var e=this,t=this.console;return r.S&&t&&t.trace("CompoundIterator: nextImpl"),this.dm?(r.S&&t&&t.trace("CompoundIterator: getNextInner"),this.dm.next().then(function(t){return e.K7b(t)})):(this.qAa=!0,r.S&&t&&t.trace("CompoundIterator: getNextOuter"),this.oV.next().then(function(t){return e.L7b(t)}))},u=m,e.Opb=u,e.map=function(t,e,i){return new c(t,e,i)},l=o,n.__extends(v,l),v.prototype.ti=function(){d(this.source)&&this.source.ti(),l.prototype.ti.call(this)},v.prototype.pyb=function(){var t=this.iqa,e=this.wxa,i=this.source;return r.S&&t&&t.trace("MappedIterator: Requesting next"),i.next().then(function(t){return t.done?t:e(t.value)})},c=v,e.flatten=function(t,e,i){return new u(t,e,i)}},function(t,e,i){!function(r,a){function o(t,e,i,n){this.console=new t("ASEJS_PROGRESS","media|asejs"),this.now=e,this.rib=this.Ecc=t=this.now(),this.q9=t+i,this.U5b=i,this.W1a=t+n,this.debug=!1,this.counter=this.aC=0,this.Xx=1e4,this.Ykb=i/100,this.$kb=t,this.Zkb=+this.Ykb/4,this.vfa=0,this.aX="",this.hg(t,"progress tracking start")}(o.prototype.constructor=o).prototype.hg=function(t,e){var i=((t-this.rib)/1e3).toFixed(3),i="     ".slice(i.length-4)+i,n=r.I1b();this.console.info(i+(" "+((this.W1a-t)/1e3).toFixed(3))+" "+Math.round(this.Xx)+" M:("+Math.floor(n.Rpc/1024/1024)+" MB/"+Math.floor(n.C8a/1024/1024)+" MB) "+this.aX+e)},o.prototype.ABb=function(t){var e=this.now();this.aX=t&&t+": ",this.aC=0,this.rib=e,this.hg(e,"starting")},o.prototype.$Bb=function(t){var e,i;if(this.counter++,!(this.counter<this.Xx)){if(this.counter=0,i=(e=this.now())-(this.$kb+this.Ykb),this.$kb=e,this.vfa=.9*this.vfa+.1*i,this.vfa>this.Zkb?(this.Xx*=.875,this.Xx=Math.max(1,this.Xx)):this.vfa<-this.Zkb&&(this.Xx*=1.5,this.Xx=Math.min(this.Xx,1e5)),e>=this.W1a)throw this.hg("Execution deadline exceeded after "+(e-this.Ecc)+" ms"+this.aX),Error("Execution deadline exceeded"+this.aX);if(i=r.I1b(),this.aC=Math.max(this.aC,i.C8a),7516192768<i.C8a)throw Error("Heap total limit exceeded"+this.aX);if(!(e<=this.q9)){for(;e>this.q9;)this.q9+=this.U5b;this.hg(e,t)}}},o.xa=function(t,e,i,n){a.dG=new o(t,e,i||5e3,n||33e5)},o.pCa=function(t){a.dG&&a.dG.ABb(t)},o.update=function(t){a.dG&&a.dG.$Bb(t)},o.S6a=function(){if(a.dG)return a.dG.aC},o.now=function(){return(a.dG||Date).now()},t.exports=o}.call(this,i(128),i(207))},function(t){var i={TY:function(t){for(var e in t)t.hasOwnProperty(e)&&(i[e]=t[e])}};t.exports=i},function(t,e,i){var n,r;function a(t){return t instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(t)}function o(t){return n.vg(t)}function s(t){return n.Oa(t)}function u(t){return!a(t)&&!o(t)&&!s(t)&&!Array.isArray(t)&&n.fk(t)}n=i(11),t.exports={zua:function(t){return a(t)?r.OG:o(t)?r.Z4:s(t)?r.Ntb:u(t)?r.A4:r.mo},Kaa:a,vg:o,Oa:s,fk:u,Js:r={OG:0,Z4:1,Ntb:2,A4:3,mo:4}}},function(t,i,d){!function(r){var a,u,o,t,c,n,s,h,e;function f(t,e,i,n){return e===c.cx.lX?(e=u.M.Ka,(null==n?void 0:n.nsc)===h.end&&(e=u.M.Ja(null!=(n=i.yg.ba.O[t].wa)?n:0),o.assert(0<e.W,"EndTime must be non null")),i.Xh.oB({offset:e,X:t}).X):i.Xh.Pq({offset:u.M.Ka,X:t}).X}function l(t,e,i){return e===c.cx.pEa?i.Xh.Pq(t):i.Xh.oB(t)}_esm(i),i.Qy=void 0,a=d(0),u=d(19),o=d(2),t=d(1105),e=d(276),c=d(196),n=d(63),s=d(1109),e=e.Ihb(),t=t.k_a()({kbb:"combinedPlaygraph",NR:{wi:e()({map:l,vE:s.i$a}),Fe:e()({map:function(t,e,i,n){return e=l(null!=n&&n.us?s.v$(t,n.us):t.position,e,i),t=s.Wpa(t,null==n?void 0:n.us),null!=n&&n.us?s.Cib(t,n.us,e):t.position=e,t},vE:function(t,e,i){return null!=i&&i.us?s.v$(t,i.us):s.Fe(t)}}),$Ea:e()({map:function(t,e,i,n){return e===c.cx.lX?t.inner:((e=s.Wpa(t,null==n?void 0:n.us)).inner||(e.inner=t,"gctag"===r.BX.Hrb&&(e.gctag=void 0)),e)},vE:function(t,e,i){return null!=i&&i.us?"object"==typeof s.v$(t,i.us):"object"==typeof t}}),X:e()({map:f,vE:s.n$a}),K0:e()({map:function(t,e,i,n){var r;return e=f(null!=(r=t.X)?r:t.segmentId,e,i,n),t.X?a.__assign(a.__assign({},t),{X:e}):a.__assign(a.__assign({},t),{segmentId:e})},vE:s.r8a}),S0a:e()({map:function(t,e,i){return e=(i=(e=e===c.cx.lX?(t=n.NI(i.yg.ba,t.N,t.bk,{Vhb:!0}),o.assert(void 0!==t,"Graph position must exist in ux playgraph"),e=(t=i.Xh.oB(t)).X,t=t.offset,i.yc.ba.O[e]):(t=n.NI(i.yc.ba,t.N,t.bk,{Vhb:!0}),o.assert(void 0!==t,"Graph position must exist in combined playgraph"),e=(t=i.Xh.Pq(t)).X,t=t.offset,i.yg.ba.O[e])).N,e.va),{bk:t=u.M.Ja(e).add(t),N:i}},vE:s.Q9a}),Ooa:e()({vE:s.N9a,map:function(t,e,i){var n,r,a,o,s;return e===c.cx.lX?(e={X:t.G.id,offset:u.M.Ka},a=i.Xh.oB(e),e=i.yc.ba.O[a.X],i=i.yg.ba.O[t.G.id],o=e.wa,s=e.va,o=null!=(n=o&&o-s)?n:0,{Dd:i=t.Dd.add(u.M.Ja(e.va-i.va)),sC:t.Cq.add(u.M.Ja(o)),Cq:t.Cq,G:{id:a.X,kf:u.M.Ja(e.va),Lg:u.M.Ja(null!=(r=e.wa)?r:0)}}):(e={X:t.G.id,offset:u.M.Ka},r=i.Xh.Pq(e),e=(s=i.Hva.h_).O[t.G.id],a=i.yg.ba.O[r.X],n=u.M.Ja(null!=(o=a.wa&&a.wa-a.va)?o:0),a.wa&&1/0!==a.wa||(o=i.Xh.LTb(r),(s=s.O[o]).wa&&(n=i.Xh.Pq({X:o,offset:u.M.Ja(s.wa-s.va)}).offset)),s=(o=t.Cq.Ea(r.offset)).add(n),i=t.Dd.add(u.M.Ja(a.va-e.va)),t=u.M.Ja(a.va),e=n.add(t),{Dd:i,sC:s,Cq:o,G:{id:r.X,kf:t,Lg:e}})}})}}),(e=h=h||{})[e.Lnc=0]="beginning",e[e.end=1]="end",i.Qy=t}.call(this,d(128))},function(t,e){_esm(e),e.nM="ManifestFactorySymbol"},function(t,e){_esm(e),e.cvb=e.Qqb=e.fIa=void 0,(t=e.fIa||(e.fIa={})).Nlc="PboDebugEvent",t.Qlc="PlaygraphEvent",e.Qqb={Mkc:"Manifest",Event:"Event",ykc:"Logblob"},e.cvb={Mmc:"UX",Xic:"Combined_1",Yic:"Combined_2"}},function(t,e){_esm(e),e.tl=void 0,(t=e.tl||(e.tl={})).Al="created",t.lz="started",t.rS="succeeded",t.Av="failed",t.Mf="cancelled",t.MGb="cancelled_on_start",t.qpa="cancelled_not_encrypted"},function(t,e){var r;function i(e,i){var n=this;this.Ula=[],r.forEach(function(t){(t=t(e,i))&&n.Ula.push(t)})}_esm(e),e.ZT=e.FNa=void 0,r=[],i.prototype.JC=function(t){for(var e,i=[],n=this.Ula.length;n--;)(e=this.Ula[n]).JC(t)&&i.push(e.F9);if(i.length)return i},e.FNa=i,e.ZT=function(t){r.push(t)}},function(t,e,i){var n,a,o,s,u,c,r,h,f,l,d,p,b,g,m,v;function y(t){var e,r=this;this.qda=new v.Tja,this.createPlaygraphPlayer=function(t,e,i){var n;return t=p.Xja.encode(t),n=s.Fa.get(b.nM),i=i?n.create(i):void 0,(n=s.Fa.get(f.Zja).create(t)).nLb(t.yd,r.qda.vxa(r.yZa(e,n.nta())),i)},this.closeAllPlayers=function(t){o.Pja(t=void 0===t?function(){}:t)},this.init=function(e){r.kE.AZ(function(t){t.ha?r.xac().then(function(){n.WPa()}).catch(function(t){s.log.error("Unable to initialize the playdata services",t)}).then(function(){Object.assign(r,y.eO),e(Object.assign({success:!0},y.eO))}):e({success:!1,error:s.zQa(t.errorCode||c.Z.mia,t)})})},this.applyConfig=function(t){r.emb(t),a.jqa(t)},this.prepare=function(t,e){var i;if(t=r.sfb.ZMb(t)||[],i=new Set,t=t.filter(function(t){var e=i.has(t.L);return i.add(t.L),!e}),a.config.Xt&&r.zd)try{r.zd.FK(t,e)}catch(t){s.log.warn("Prepare call failed",t)}},this.ppmUpdate=function(t){bt._cad_global.playerPredictionModel?(t=r.sfb.aNb(t))&&bt._cad_global.playerPredictionModel.update(t):s.log.error("ppmUpdate called but there is no ppmModel")},this.supportsHdr=function(e){s.DP().m1().then(function(t){return e(t.result)}).catch(function(){return e(!1)})},this.supportsUltraHd=function(t){s.DP().n1().then(t).catch(function(){return t(!1)})},this.supportsDolbyAtmos=function(t){s.DP().k1().then(t).catch(function(){return t(!1)})},this.supportsDolbyVision=function(e){s.DP().qfa().then(function(t){return e(t.result)}).catch(function(){return e(!1)})},this.close=function(){},this.isSeamlessEnabled=function(){return a.config.YOb},this.emb(t),s.Fa.get(m.KFa),this.sfb=s.Fa.get(u.YPa),this.kE=s.Fa.get(d.nj),e=s.Fa.get(g.TPa).apply(),a.J0a([t],e),this.zd=s.Fa.get(l.yH),s.DP().n1()}_esm(e),e.zH=void 0,n=i(302),a=i(20),o=i(61),s=i(9),u=i(540),c=i(4),r=i(33),h=i(152),f=i(310),l=i(119),d=i(34),p=i(35),b=i(136),g=i(332),m=i(515),v=i(588),y.prototype.yZa=function(t,e){var i=null!=(i=null==(i=(t=void 0===t?{}:t).playbackState)?void 0:i.currentTime)?i:e.va;return Object.assign(Object.assign({startPts:i,uiPlayStartTime:Date.now()},t),{endPts:null!=(i=e.wa)?i:void 0,isPlaygraph:!0})},y.prototype.emb=function(t){s.Fa.get(r.MT).J1b(t)},y.prototype.xac=function(){return s.Fa.get(h.jU)().catch(function(t){throw s.log.error("Unable to initialize the playdata services",t),t}).then(function(t){return t.send(1/0)}).catch(function(t){s.log.error("Unable to send deferred playdata",t)})},(e.zH=y).eO={}},function(t,e,i){var n=i(43),r=i(606),a=r(n("String.prototype.indexOf"));t.exports=function(t,e){return"function"==typeof(e=n(t,!!e))&&-1<a(t,".prototype.")?r(e):e}},function(t,e,i){var n;function r(t){return"function"==typeof t?t.name:"symbol"==typeof t?t.toString():t}function a(t){return function t(e,i){var n;return void 0===i&&(i=[]),n=r(e.oh),i.push(n),null!==e.pC?t(e.pC,i):i}(t).reverse().join(" --\x3e ")}function o(t){var e;return t.name||((e=(t=t.toString()).match(/^function\s*([^\s(]+)/))?e[1]:"Anonymous function: "+t)}_esm(e),n=i(56),e.LP=r,e.rab=function(t,e,i){var n="";return 0!==(t=i(t,e)).length&&(n="\nRegistered bindings:",t.forEach(function(t){var e="Object";null!==t.Cn&&(e=o(t.Cn)),n=n+"\n "+e,t.LI.dcb&&(n=n+" - "+t.LI.dcb)})),n},e.CHb=function e(t){t.Gpa.forEach(function(t){if(function t(e,i){return null!==e.pC&&(e.pC.oh===i||t(e.pC,i))}(t,t.oh))throw t=a(t),Error(n.tpb+" "+t);e(t)})},e.t_b=function(t,e){var i,n;return e.kwa()||e.Zva()?(i="",n=e.fUb(),e=e.PSb(),null!==n&&(i+=n.toString()+"\n"),null!==e&&e.forEach(function(t){i+=t.toString()+"\n"})," "+t+"\n "+t+" - "+i):" "+t},e.getFunctionName=o},function(t,e,i){var n,r,a,o;function s(t,e){var i,n,r,a,o=t.ZB,s=t.OQ;return t=t.gR,i=e.ZB,n=e.OQ,e=e.gR,a=(r=void 0===o||void 0===i)||void 0===s||void 0===n,r||i<o||o===i&&(a||n<s)||o===i&&s===n&&(a||void 0===t||void 0===e||e<=t)}_esm(e),e.AP=e.BP=e.BZb=e.Maa=e.fZ=void 0,n=i(5),r=i(95),a=i(42),o=i(121),e.fZ=function(t,e,i,n){return s({ZB:t.Y4b,OQ:t.Z4b,gR:t.$4b},{ZB:e,OQ:i,gR:n})},e.Maa=function(t,e){return s({ZB:t.Cr},{ZB:e})},e.BZb=s,e.BP=function(){return{version:"6.0038.071.911",sca:!0,yP:!0,fra:"browser",k2a:["en-US"],dxa:"",gX:"cadmium",Rmb:!0,t7:!0}},e.AP=function(){return{uI:o.kp([a.ae.TG,a.ae.UG]),ho:o.kp([].concat(J(a.Td.I2),J(a.Td.m2),J(a.Td.l2),J(a.Td.vga))),Hn:r.Db.gUa,$B:n.vc(31e3)}}},function(t,e){_esm(e),e.YT="MediaKeysStorageFactorySymbol"},function(t,e){_esm(e),e.f5=e.Wq=void 0,e.Wq=function(){},e.f5="StringObjectReaderSymbol"},function(t,e){_esm(e),e.WSa="SystemRandomSymbol",e.U4="RandomGeneratorSymbol"},function(t,e){_esm(e),e.lU="PlayerErrorFactorySymbol"},function(t,e,i){var o=i(126),s=i(53),u=i(179);t.exports=function(a){return function t(i,n,r){switch(arguments.length){case 0:return t;case 1:return u(i)?t:s(function(t,e){return a(i,t,e)});case 2:return u(i)&&u(n)?t:u(i)?s(function(t,e){return a(t,n,e)}):u(n)?s(function(t,e){return a(i,t,e)}):o(function(t){return a(i,n,t)});default:return u(i)&&u(n)&&u(r)?t:u(i)&&u(n)?s(function(t,e){return a(t,e,r)}):u(i)&&u(r)?s(function(t,e){return a(t,n,e)}):u(n)&&u(r)?s(function(t,e){return a(i,t,e)}):u(i)?o(function(t){return a(t,n,r)}):u(n)?o(function(t){return a(i,t,r)}):u(r)?o(function(t){return a(i,n,t)}):a(i,n,r)}}}},function(t,e){function n(t,e){return"number"==typeof t&&"number"==typeof e&&(t&&e?Math.abs(t*e/r(t,e)):0)}function r(t,e){var i;for(t=Math.abs(t),e=Math.abs(e);e;)e=t%(i=e),t=i;return t}function a(t,e){"object"==typeof t?(this.wc=t.fb,this.wb=t.aa):(this.wc=t,this.wb=e)}_esm(e),a.Ja=function(t){return new a(t,1e3)},a.Bfa=function(t,e){return Math.floor(1e3*t/e)},a.Gcb=function(t,e){return Math.floor(t*e/1e3)},a.max=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.reduce(function(t,e){return t.greaterThan(e)?t:e})},a.min=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.reduce(function(t,e){return t.lessThan(e)?t:e})},a.$E=function(t,e){var i;return t.aa===e.aa?new a(r(t.fb,e.fb),t.aa):(i=n(t.aa,e.aa),a.$E(t.Rg(i),e.Rg(i)))},Object.defineProperties(a.prototype,{fb:{get(){return this.wc},enumerable:!0,configurable:!0},aa:{get(){return this.wb},enumerable:!0,configurable:!0},W:{get(){return 1e3*this.wc/this.wb},enumerable:!0,configurable:!0},Fh:{get(){return this.wc/this.wb},enumerable:!0,configurable:!0}}),a.prototype.Rg=function(t){return t/=this.aa,new a(Math.floor(this.fb*t),Math.floor(this.aa*t))},a.prototype.add=function(t){var e;return this.aa===t.aa?new a(this.fb+t.fb,this.aa):(e=n(this.aa,t.aa),this.Rg(e).add(t.Rg(e)))},a.prototype.Ea=function(t){return this.add(new a(-t.fb,t.aa))},a.prototype.jC=function(t){return new a(this.fb*t,this.aa)},a.prototype.Xk=function(t){var e;return this.aa===t.aa?this.fb/t.fb:(e=n(this.aa,t.aa),this.Rg(e).Xk(t.Rg(e)))},a.prototype.Q7a=function(t){return n(this.aa,t)},a.prototype.Bgb=function(){return new a(this.aa,this.fb)},a.prototype.compare=function(t,e){var i;return this.aa===e.aa?t(this.fb,e.fb):(i=n(this.aa,e.aa),t(this.Rg(i).fb,e.Rg(i).fb))},a.prototype.equal=function(t){return this.compare(function(t,e){return t===e},t)},a.prototype.yya=function(t){return this.compare(function(t,e){return t!==e},t)},a.prototype.lessThan=function(t){return this.compare(function(t,e){return t<e},t)},a.prototype.greaterThan=function(t){return this.compare(function(t,e){return e<t},t)},a.prototype.BF=function(t){return this.compare(function(t,e){return t<=e},t)},a.prototype.zj=function(t){return this.compare(function(t,e){return e<=t},t)},a.prototype.toJSON=function(){return{ticks:this.fb,timescale:this.aa}},a.prototype.toString=function(){return this.fb+"/"+this.aa},a.Ka=new a(0,1),a.nC=new a(1,1e3),e.M=a},function(t){var e,i;function n(){var t;if(DataView.prototype&&DataView.prototype.DY&&!i){try{t=new ArrayBuffer(4),new DataView(t).RP(0,4,1)}catch(t){return}try{t=new ArrayBuffer(4),new DataView(t).RP(1,2,2)}catch(t){DataView.prototype.RP=r(DataView.prototype.RP,DataView.prototype.getUint8,Uint8Array),DataView.prototype.P$=r(DataView.prototype.P$,DataView.prototype.getUint16,Uint16Array),DataView.prototype.DY=r(DataView.prototype.DY,DataView.prototype.getUint32,Uint32Array),DataView.prototype.Fta=r(DataView.prototype.Fta,DataView.prototype.getInt8,Int8Array),DataView.prototype.Cta=r(DataView.prototype.Cta,DataView.prototype.getInt16,Int16Array),DataView.prototype.Dta=r(DataView.prototype.Dta,DataView.prototype.getInt32,Int32Array)}e.EVb=function(t,e,i,n,r){return i?t.RP(e,i,n||1,r):new Uint8Array(0)},e.CVb=function(t,e,i,n,r){return i?t.P$(e,i,n||2,r):new Uint16Array(0)},e.DVb=function(t,e,i,n,r){return i?t.DY(e,i,n||4,r):new Uint32Array(0)},e.Apc=function(t,e,i,n,r){return i?t.Fta(e,i,n||1,r):new Int8Array(0)},e.ypc=function(t,e,i,n,r){return i?t.Cta(e,i,n||2,r):new Int16Array(0)},e.zpc=function(t,e,i,n,r){return i?t.Dta(e,i,n||4,r):new Int32Array(0)},i=!0}}function r(a,o,s){return function(t,e,i,n){var r;return t+e*(i=i||s.BYTES_PER_ELEMENT)>this.byteLength?((r=new s(e)).set(a.call(this,t,e-1,i,n)),r[e-1]=o.call(this,t+(e-+i),n),r):a.call(this,t,e,i,n)}}i=!(e={RP:function(t,e,i,n,r){var a=new Uint8Array(i);n=n||1;for(var o=0;o<i;++o,e+=n)a[o]=t.getUint8(e,r);return a},P$:function(t,e,i,n,r){var a=new Uint16Array(i);n=n||2;for(var o=0;o<i;++o,e+=n)a[o]=t.getUint16(e,r);return a},DY:function(t,e,i,n,r){var a=new Uint32Array(i);n=n||4;for(var o=0;o<i;++o,e+=n)a[o]=t.getUint32(e,r);return a},Fta:function(t,e,i,n,r){var a=new Int8Array(i);n=n||1;for(var o=0;o<i;++o,e+=n)a[o]=t.getInt8(e,r);return a},Cta:function(t,e,i,n,r){var a=new Int16Array(i);n=n||2;for(var o=0;o<i;++o,e+=n)a[o]=t.getInt16(e,r);return a},Dta:function(t,e,i,n,r){var a=new Int32Array(i);n=n||4;for(var o=0;o<i;++o,e+=n)a[o]=t.getInt32(e,r);return a},gpc:n}),e.WSb=function(){return i},n(),t.exports=e},function(t,e,i){var n,a;function o(t,e,i){this.tag=t,this.view=e,this.R=i,this.startOffset=i.offset}_esm(e),n=i(21),a=i(238),o.igb=function(t,e,i){var n=t.Gd(),r=t.r8b();return(t=new(a.RO[n]||o)(n,t.U5a(r),t)).parse(e,i),t},Object.defineProperties(o.prototype,{length:{get(){return this.view.byteLength},enumerable:!0,configurable:!0}}),o.prototype.parse=function(){return this.R.offset=this.startOffset+this.length,!(this.R.Od=0)},o.prototype.s4a=function(t){var e=[];if(this.tag===t&&e.push(this),this.RO)for(var i=0;i<this.RO.length;i++)e=n.__spreadArrays(e,this.RO[i].s4a(t));return e},o.prototype.dy=function(t){if(0<(t=this.s4a(t)).length)return t[0]},o.prototype.$Wa=function(t){for(this.RO=[];this.R.offset<this.startOffset+this.length;)this.RO.push(o.igb(this.R,t,this))},t=o,(e.Gha=t).prototype.skip=t.prototype.parse},function(t,e){_esm(e),e.HPa="PboPlaydataServicesSymbol",e.jU="PboPlaydataServicesProviderSymbol"},function(t,e){function a(i){return i&&"object"==typeof i?Array.isArray(i)?i.map(a):Object.keys(i).reduce(function(t,e){return t[e]=a(i[e]),t},{}):i}function i(t){t&&(this.fL(t.yd),this.ECa(t.xe),this.yCa(t.O))}_esm(e),e.jx=void 0,i.prototype.fL=function(t){return this.yd=t,this},i.prototype.ECa=function(t){return this.xe=t,this},i.prototype.Iib=function(t){return this.Fd=t,this},i.prototype.ng=function(t,e,i){var n,r;return this.O||(this.O={}),this.O[t]=a(e),i&&((e=(t=this.O[t]).next)&&(t.next=(n=e,r=i,Object.keys(n).reduce(function(t,e){return t[r[e]||e]=n[e],t},{}))),t.Rb&&i[t.Rb]&&(t.Rb=i[t.Rb])),this},i.prototype.yCa=function(t,e,i){return void 0===e&&(e=function(){return!0}),this.O={},this.tYa(t,e,i)},i.prototype.tYa=function(i,e,n,r){var a=this;return void 0===e&&(e=function(){return!0}),Object.keys(i).filter(function(t){return e(i[t],t)}).forEach(function(t){var e=i[t];r&&(e=r(e,t)),a.ng(t,e,n)}),this},i.prototype.q8a=function(t){var e;return!(null==(e=this.O)||!e[t])},i.prototype.Wi=function(){var t;if(!this.O)throw Error("Invalid playgraph - `segments` is not defined");if(!this.yd)throw Error("Invalid playgraph - `initialSegment` is not defined");if(this.O[this.yd])return t={yd:this.yd,O:this.O},this.xe&&(t.xe=this.xe),this.Fd&&(t.Fd=this.Fd),t;throw Error("Invalid playgraph - `initialSegment` is not part of `segments`")},e.jx=i},function(t,e,i){function n(t,e){this.MN=t,this.Pk=Math.floor((t+e-1)/e),this.Ud=e,this.reset()}i(2),n.prototype.shift=function(){this.de.shift(),this.Ix.shift()},n.prototype.My=function(t){return this.s_a(this.de[t],t)},n.prototype.update=function(t,e){this.de[t]=(this.de[t]||0)+e},n.prototype.push=function(){this.de.push(0),this.Ix.push(0),this.Ab+=this.Ud},n.prototype.add=function(t,e,i){var n,r,a;if(null===this.Ab)for(n=Math.max(Math.floor((i-e+this.Ud-1)/this.Ud),1),this.Ab=e;this.de.length<n;)this.push();for(;this.Ab<=i;)this.push(),this.de.length>this.Pk&&this.shift();if((null===this.Ip||e<this.Ip)&&(this.Ip=e),e>this.Ab-this.Ud)this.update(this.de.length-1,t);else if(e==i)0<=(n=this.de.length-Math.max(Math.ceil((this.Ab-i)/this.Ud),1))&&this.update(n,t);else for(n=1;n<=this.de.length;++n)if(a=(r=this.Ab-n*this.Ud)+this.Ud,!(i<r)){if(a<e)break;this.update(this.de.length-n,Math.round(t*(Math.min(a,i)-Math.max(r,e))/(i-e)))}for(;this.de.length>this.Pk;)this.shift()},n.prototype.start=function(t){null===this.Ip&&(this.Ip=t),null===this.Ab&&(this.Ab=t)},n.prototype.stop=function(t){var e,i;if(null!==this.Ab)if(t-this.Ab>10*this.MN)this.reset();else{for(;this.Ab<=t;)this.push(),this.de.length>this.Pk&&this.shift();if(e=this.de.length-Math.ceil((this.Ab-this.Ip)/this.Ud),0<=(i=this.de.length-Math.ceil((this.Ab-t)/this.Ud)))if(e<0&&(this.Ip=this.Ab-this.Ud*this.de.length,e=0),e===i)this.Ix[e]+=t-this.Ip;else if(e<i)for(this.Ix[e]+=(this.Ab-this.Ip)%this.Ud,this.Ix[i]+=this.Ud-(this.Ab-t)%this.Ud,t=e+1;t<i;++t)this.Ix[t]=this.Ud;this.Ip=null}},n.prototype.s_a=function(t,e){return 0===(e=this.Vsa(e))?null:8*t/e},n.prototype.Vsa=function(t){var e=this.Ix[t];return null!==this.Ip&&((t=this.Ab-(this.de.length-t-1)*this.Ud)>this.Ip&&(e=t-this.Ip<=this.Ud?e+(t-this.Ip):this.Ud)),e},n.prototype.get=function(t,e){var i,n=this.de.map(this.s_a,this);if("last"===t)for(t=0;t<n.length;++t)null===n[t]&&(n[t]=0<t?n[t-1]:0);else if("average"===t)for(e=1-Math.pow(.5,1/((e||2e3)/this.Ud)),t=0;t<n.length;++t)null===n[t]?n[t]=Math.floor(i||0):i=void 0!==i?e*n[t]+(1-e)*i:n[t];return n},n.prototype.reset=function(){this.fma||(this.de=[],this.Ix=[],this.Ip=this.Ab=null)},n.prototype.setInterval=function(t){this.Pk=Math.floor((t+this.Ud-1)/this.Ud)},t.exports=n},function(t,e,i){var n,o,r,a,s,u,c,h,f,l,d,p;function b(t,e,i){var n=p.call(this)||this;return n.bn={},n.xV=0,n.TD=0,n.AU=[],n.EH=0,n.jnc=!1,n.K=i,n.jVa=new a.default(i),n.TU=new c.Oha(!0),n.zU=new c.Oha(!1),i.B3a&&(n.yN=new h.SOa(n.K)),n.reset(),n.wWa=t,n.em=e,n.TVa=f.Bq.name(),n.em.Nea(n.TVa),f.events.on("networkchange",n.k4b.bind(n)),d=n}_esm(e),n=i(0),o=n.__importStar(i(11)),t=i(12),r=n.__importDefault(i(154)),a=n.__importDefault(i(416)),s=i(940),u=i(417),c=i(941),h=i(943),f=i(3).default,l=new f.Console("ASEJS_NETWORK_MONITOR","media|asejs"),p=t.EventEmitter,n.__extends(b,p),b.instance=function(){return d},b.reset=function(){d&&d.reset()},b.prototype.k4b=function(t){this.TVa=t,this.em.Nea(t)},b.prototype.dmb=function(){var t;this.nna||(t=this.O7a(),this.em.qI(t.default.ta,this.confidence),t["initial-throughput-ewma"]&&this.em.nI(t["initial-throughput-ewma"].ta),t["throughput-ci"]&&this.em.rI(t["throughput-ci"]),t.deliverytime&&this.em.TN(t.deliverytime),this.em.LL(t.Wv?t.Wv.kda:void 0,t.Wv?t.Wv.K$b:void 0),o.xb(this.Vc)||(this.nna=!0))},Object.defineProperties(b.prototype,{startTime:{get(){return this.$g},configurable:!0},confidence:{get(){return this.bn.confidence.get(0)},configurable:!0},tj:{get(){return this.LM},configurable:!0},ZXa:{get(){return this.AU},configurable:!0},b_b:{get(){return this.XVa},configurable:!0},location:{get(){return this.SH},configurable:!0}}),b.prototype.Bxb=function(){var t=this.K,e=t.Sxb.concat(t.byb),i=t.Tla,n=this.jVa;return(e=e.reduce(function(t,e){return t[e]=n.create(e,i),t},{})).confidence=new u.Aja(t,new s.aOa(t,this.Oca.bind(this))),e},b.prototype.reset=function(){var t,e=this.K.Tla,i=this.jVa,n=this.K;this.SH=null,this.bn=this.Bxb(),this.K.F3a&&(t=this.K.Skb,this.bn.hec=new r.default(t.numB*t.bSizeMs,t.bSizeMs)),this.TU.reset(),this.zU.reset(),this.AA=i.create("respconn-ewma",e),this.pA=i.create("respconn-ewma",e),this.yN&&this.yN.reset(),this.bCb=this.dmb.bind(this),this.f7=void 0,this.qA=this.Vc=this.$g=null,this.b7=0,n.phb&&(this.TD=this.xV=this.LM=0,this.AU=[])},b.prototype.$R=function(t){var e=this.bn;if(t!==this.SH){if(o.sa(this.f7)||(clearInterval(this.f7),this.f7=void 0),o.xb(this.SH)&&(this.b7=0,this.$g=null),!o.xb(t)){for(var i in e)e[i]&&e[i].reset&&e[i].reset();this.AA.reset(),this.pA.reset()}o.xb(this.$g)||(this.b7+=(o.xb(this.Vc)?f.time.ia():this.Vc)-this.$g),this.Vc=this.$g=null,this.SH=t,this.em.$R(t)}},b.prototype.Nea=function(t){this.em.Nea(t)},b.prototype.VCb=function(t){this.bn.QoEEvaluator?l.warn("monitor (QoEEvaluator) already existed."):this.bn.QoEEvaluator=t},b.prototype.u9b=function(){delete this.bn.QoEEvaluator},b.prototype.hE=function(t,e,i,n){var r;if(this.XVa=Math.max(this.XVa||0,i),this.TD-=t,z=this.K,r=this.bn,!0===n.WS)(n=r["throughput-wssl"])&&n.add(t,e,i,!0);else if(o.sa(e))l.warn("addDataReceived called with undefined start time");else{for(var a in this.yN&&this.yN.hE(t,e,i,n),z.ayb&&i-e<10?e=i-10:0==i-e&&(e=i-1),this.TU.hE(t,e,i,n),this.zU.hE(t,e,i,n),r)r[a]&&r[a].add&&r[a].add(t,e,i,n);o.xb(this.$g)&&(this.$g=e,this.Vc=null,this.nna=!1),o.xb(this.Vc)||(e>this.Vc&&(this.$g+=e-this.Vc),this.Vc=null,this.nna=!1),o.xb(this.qA)||(e-this.qA>z.xWa?this.wWa.E9a(this.qA,e):i-e>z.xWa&&this.wWa.E9a(e,i)),this.qA=this.qA?Math.max(i,this.qA):i}},b.prototype.LA=function(t){this.AA.add(t),this.em.LA(t)},b.prototype.KA=function(t){this.pA.add(t),this.em.KA(t)},b.prototype.start=function(t,e){var i;if(o.xb(this.qA)&&!o.xb(this.Vc)&&(this.qA=t),i=this.bn,this.K.cDa)for(var n in i)i[n]&&i[n].start&&i[n].start(t,e)},b.prototype.stop=function(t,e){var i,n=this.bn;for(i in n)n[i]&&n[i].stop&&n[i].stop(t,e);this.Vc=o.xb(this.Vc)?t:Math.min(this.Vc,t),this.qA=null},b.prototype.flush=function(){var t,e=this.bn;for(t in e)e[t]&&e[t].flush&&e[t].flush()},b.prototype.h6a=function(){var t,e=this.bn.$oc;return e&&(t=e.gGb(),e.reset()),t},b.prototype.O7a=function(){var t,e=f.time.ia(),i=this.bn,n=this.K,r=n.Hxb,a=n.Ixb,o=n.uBb,s={};for(t in i)i[t]&&i[t].get&&(s[t]=i[t].get(e,this.TD),"iqr"===i[t].type&&(s.Wv=s[t]),"tdigest"===i[t].type&&(s.Qg=s[t]),"wssl"===i[t].type&&(s.WS=s[t]));return s.cdnavtp=this.TU.So(),s.activecdnavtp=this.zU.So(),s.default=r&&s[r]&&a&&void 0!==s[r][a]?{ta:s[r][a]}:r&&s[r]?s[r]:s["throughput-ewma"],"none"!==n.TBa&&"none"!==o&&(s.Xhb=o&&s[o]?s[o]:s["throughput-sw"]),s},b.prototype.F$=function(){return this.yN?this.yN.F$():void 0},b.prototype.get=function(){var t,e=this.O7a(),i=e.default,n=this.AA.get(),r=this.pA.get(),a=this.K;return e.Xhb&&(t=e.Xhb,i=o.Oa(i.ta)&&o.Oa(t.ta)&&i.ta>t.ta&&0<t.ta?t:i),e.Xa=i,e.p9a=e["initial-throughput-ewma"],!a.fPb||!i||o.xb(i.ta)||isNaN(i.ta)||!e.WS||o.xb(e.WS.ta)||isNaN(e.WS.ta)||("max"===a.Dnb?e.Xa.ta=Math.max(e.WS.ta,i.ta):"sum"===a.Dnb&&(e.Xa.ta+=e.WS.ta)),e.ll=n,e.XP=r,this.K.F3a&&(i=this.K.Skb,e.Ysc=this.bn.hec.get(i.fillS,i.fillHl)),i=this.b7+(o.xb(this.$g)?0:(o.xb(this.Vc)?f.time.ia():this.Vc)-this.$g),e.time=i,e},b.prototype.xVb=function(){var t,e={},i=this.get();return i.confidence&&i["throughput-ewma"]&&(e.aseavtp=Number(i["throughput-ewma"].ta).toFixed(2),e.asevartp=Number(i["throughput-ewma"].ye).toFixed(2),i.Wv&&(!(t=i.Wv.kda)||void 0===t.Pl||void 0===t.Ol||void 0===t.nk||isNaN(t.Pl||0)||isNaN(t.Ol)||isNaN(t.nk)||(e.aseniqr=0<t.nk?Number((t.Pl-t.Ol)/t.nk).toFixed(2):-1,e.aseiqr=Number(t.Pl-t.Ol).toFixed(2),e.asemedtp=Number(t.nk).toFixed(2)),e.iqrsamples=i.Wv.K$b),i.Qg&&i.Qg.CB&&(e.tdigest=i.Qg.CB())),e},b.prototype.Bw=function(t,e){var i,n,r=e.requestId;if(1==++this.LM&&this.emit("active",t),this.K.p3a)for(n in i=this.bn)i[n]&&i[n].Bw&&i[n].Bw(t,e);this.K.ffa&&this.start(t,e),r&&(this.K.ffa||this.start(t,e),this.AU.push(r)),this.TD+=e.fa||0,this.TU.Bw(t,e),this.zU.Bw(t,e)},b.prototype.jhb=function(){++this.xV},b.prototype.az=function(t,e,i){var n,r,a=i.requestId;if(e&&--this.xV,--this.LM,this.TD=Math.max((this.TD||0)-((i.fa||0)-(i.bytesReceived||0)),0),this.K.phb&&(this.LM=Math.max(this.LM,0),this.xV=Math.max(this.xV,0)),this.K.p3a)for(r in n=this.bn)n[r]&&n[r].az&&n[r].az(t,e,i);this.K.ffa&&this.stop(t,i),0===this.LM&&(this.K.ffa||this.stop(t,i),this.emit("inactive",t)),a&&0<=(e=this.AU.indexOf(a))&&this.AU.splice(e,1),this.TU.az(t,i),this.zU.az(t,i)},b.prototype.Oca=function(){this.dmb(),this.f7=setInterval(this.bCb,this.K.czb)},e.default=i=b},function(t,e){_esm(e),e.Th=e.Yh=e.fj=e.ej=e.height=e.width=e.bitrate=e.profile=e.duration=e.oa=void 0,e.xa="IAcgZnR5BwBpBzBvA2gBYBABgA4CBkBzBtgAIBdpeGRhBzBogCQAACDXBtFvB2gDYBdsbXZoBkgA4BcA32O1C5gAYCgBIABdDAgB4CgGoAgAQDgAAIgBgLgB4QBAgDwNgAANACgAQBcrdHJhBrgBYBBcB0BrgOYDABgOYIgLoPgO4rABCqgAgBDwgBwDckZWR0BzgA4BccZWxzB0gGIMAHDSgBIEcBo21kBpBhgkYCgA4AgfYUBVDEgGADA3gDoABsBygM4Gd2aWRlgO4Kc/QEdQBBBDAxAuAwAuAxAtByBlB2gAQABsBlgrIAgEICcBRG1pBuBmgBABAUB2BtgcwEgGoJAkgPIAgDYDAcBkgGAAgA4CgTwGcMdXJsAggugFAEgXAABiBsgBYBC4gA4ABzgTwDgEYFeoYXZjAxgigVgCAAgg4AggAABIgBABgAYCgEITgAAPAYH/gAoBAugKoBdDAU1AAND/DhAAAWBngA4BDsGgD9CHAIgDAAAfgJIAcF3AB4ChBMCwgJQAcFaOvjDLgT4CAQBwgcgABwgA4BAEgAYBADgcYCBig6YAgswBACDxgAYAAjgPIBgAYCgEYAgW4AgwQDgAAGgB4BBzBjgB4JAUgB4BB6gRYNgEYBBjBvgB4JA4hSwABlB4gC4CBtBlg0QEgzQFAggNwAgC4DgcIGgAYBADDpgBoG",e.ug=!0,e.ya="EAABCgBtFvBmgA4AcAEG1mBoBkgA4BgAACABgAQBeIdHJhgC4CAYB0gC4CACAAAKgC4EgAYCADDpgF4CgC4ABkB0gF4FgCwCA0gF4AB1BugA4AAOgEYCAYgB4BCogAYAcC8QJggDYCAHDSgAgBARABBhgBYCATCNgAgBgEgAgBYDgC4DgBYAChgIgHgBYFgL4DAXgF4JAQgF6BAWgF40APCkgF4IgC4DgEYKAkBzgoQABwgBoCAmEWEagAYRgDIAcEc21kBhgs4BcCrgYFH/eq3EXpC9DmDZBIC3CWAsDYAgDZAjDuDvB4AyA2A0AgAtAgBjBvByBlAgAxA2AzAgByAzAwA2AwAgA1BkBiA2FhA2gDABBIAugEABcvTVBFBHAtgE4ABBBWBDgFIBBkBlBjgDABdDb3B5BsBlBmB0AgAyEwAzAtgAgAAyAxgCgBBoF0BwA6EvJ3AuB2BpgE4AdvbGFuAugLIABnAvgMoCAugDgABtBsgEYBgG4Ad0aW9uBzA6gJIAdhYmFjA9gGwAgPIABmA9gPAAgFoAdibG9jBrgB4AA6AwgAIAAggG4AdhbHlzBlA9AwB4gB4BgAYAgAAAAgBtgBgAdoZXggBzB1BigBIBc3IHBzB5gHQBgAoBBfByBkgBAAAugQYAgEwAgAgBgEoAdpeGVkgCQAgKIBgGICgBAAgI4ABngFoAga4AgNYAdocm9tBhBfgHQBgC4AhM4ABlFsBpBzgBIBc4eDhkBjB0gMgAgDwABxBtgAoBgQQABhBkB6gTQAgEYAgZYAAsgOIBdmYXN0BfgMIABrBpBwgFQBgIAFBxBwBfhdgABmgTAAgGgAgeQAgJAAgCYAgGIBgJAAgRoAgXIABvBrBhgTwAgBgABfgCYGgGIABzgMYABjgRYBgCAGgLwABuBygMYDBjBpgI4AB0gQ4CBpBugAwABygkIAgEgBgC4BgfgAB1gVgAgZgAgroABtBwgDoAgSICgkQBhoABgEYAgIQBgFABgBIAgEYCBmgAwAgYIAgJQAglgABigS4AB5gBYBgsQAgVQAgBYBgLwABhgqYAgKABgBIABiBpgWYAgMgCBpgOYAga4BgCIAd3ZWlnguwABigBIBguoAdlbl9ngAoAgDoBgCgEgBIAgHQABrBlB5gLYBgBAAA1gCgAgBQEgkAAgAgAgBwAgL4ABzgSgAgPAABjB1gDQAA0gDIAgPoDgqQCgAQABzBogHwBByBjBfgdwHgD4CgB4Ac9Y3JmgtoABigq4BgawCgBgBgIQBgxgAAgBxgZgCgGAAAuhJ4BgmwAgLACgA4DdheD02A5gBABgboABlgDgAhKQAgrgAg0gBhCABg4YBgJYBBhBxg/4Bg5oCAACAhagBc7ZYiEgAgAf//vdOC/ACCbBUDCAqADCSBXAKD2DKCkAmBZC5BSBrABDyCmgEAAfzSlmhC/B7DLBeDoDwAFAIgBoAdsxLMdDRAhClA4CMCPA3BDCBgHwBcNQZokBsBDC/D+CpCWgBYABvDAgCABcKQZ5CB4CFD/gBAACDgDwCAKABCegPAABCC/gBAAC2gNYCgBoBBjBqgBoDgDYCATgHQAdoSahBBoCZBMAIB3gP4AgIADDBgCwBAMgIAAeGRREsAvgIQJClgIQEgBoFCngIQEgKACgIQBCsgIQBBsgIQJgQYCgIQBDKBFAVgIQLDpgQoLDrgIQLDwgIQFBvgIQACnghYAAADegGQCgIQACfAOgIQMCfAtgQoKCfAvgIQIcSQZs0gIQFBngIQACeAQiGwAiyQCgIIBBSgIINBxgQgKCfBzgIILB3gIIFBXgIIAA4BAgqwABJgIIECVgIIBArgIIBgGYGC2gnwF",e.sg=!0,e.oa={fb:1001,aa:24e3},e.duration={fb:24024,aa:24e3},e.profile="none-h264mpl30-dash",e.bitrate=64,e.width=320,e.height=240,e.ej=4,e.fj=3,e.Yh=[176,739],e.Th=[44]},function(t,e){_esm(e),e.Th=e.Yh=e.fj=e.ej=e.height=e.width=e.bitrate=e.profile=e.duration=e.oa=void 0,e.xa="IAcgZnR5BwBpBzBvA2gBYBABgA4CBkBzBtgAIBdpeGRhBzBogCQAACDXBtFvB2gDYBdsbXZoBkgA4BcA32O1C5gAYCgBIABdDAgB4CgGoAgAQDgAAIgBgLgB4QBAgDwNgAANACgAQBcrdHJhBrgBYBBcB0BrgOYDABgOYIgLoPgO4rABgAgCDwgBwDckZWR0BzgA4BccZWxzB0gGIMAHDSgBIEcBo21kBpBhgkYCgA4AgfYUBVDEgGADA3gDoABsBygM4Gd2aWRlgO4Kc/QEdQBBBDAxAuAwAuAxAtByBlB2gAQABsBlgrIAgEICcBRG1pBuBmgBABAUB2BtgcwEgGoJAkgPIAgDYDAcBkgGAAgA4CgTwGcMdXJsAggugFAEgXAABiBsgBYBC4gA4ABzgTwDgEYFeoYXZjAxgigVggQCggAABIgBABgAYCgEITgAAPAYH/gAoBAugKoBdDAU1AAND/DhAAAWBngA4BDsGgD9CACIgDAAAfgJIAcF3AB4ChBMCwgJQAcFaOvjDLgT4CAQBwgcgABwgLoFgAYCAUBig6YAgswBACDxgAYAAjgPIBgAYCgEYAgW4AgwQDgAAGgB4BBzBjgB4JAUgB4BB6gRYNgEYBBjBvgB4JA4hSwABlB4gC4CBtBlg0QEgzQFAggNwAgC4DgcIGgAYBADDpgBoG",e.ug=!0,e.ya="EAABCgBtFvBmgA4AcAEG1mBoBkgA4BgAACABgAQBeIdHJhgC4CAYB0gC4CACAAAKgC4EgAYCADDpgF4CgC4ABkB0gF4FgCwCA0gF4AB1BugA4AAOgEYCAYgB4BCogAYAcC8QJggDYCAHDSgAgBARABBhgBYCATCNgAgBgEgAgBYDgC4DgBYAChgIgHgBYFgL4DAXgF4JAQgF6BAWgF40APCkgF4IgC4DgEYKAkBzgoQABwgBoCAmEWEagAYRgDIAcEc21kBhgs4BcCrgYFH/eq3EXpC9DmDZBIC3CWAsDYAgDZAjDuDvB4AyA2A0AgAtAgBjBvByBlAgAxA2AzAgByAzAwA2AwAgA1BkBiA2FhA2gDABBIAugEABcvTVBFBHAtgE4ABBBWBDgFIBBkBlBjgDABdDb3B5BsBlBmB0AgAyEwAzAtgAgAAyAxgCgBBoF0BwA6EvJ3AuB2BpgE4AdvbGFuAugLIABnAvgMoCAugDgABtBsgEYBgG4Ad0aW9uBzA6gJIAdhYmFjA9gGwAgPIABmA9gPAAgFoAdibG9jBrgB4AA6AwgAIAAggG4AdhbHlzBlA9AwB4gB4BgAYAgAAAAgBtgBgAdoZXggBzB1BigBIBc3IHBzB5gHQBgAoBBfByBkgBAAAugQYAgEwAgAgBgEoAdpeGVkgCQAgKIBgGICgBAAgI4ABngFoAga4AgNYAdocm9tBhBfgHQBgC4AhM4ABlFsBpBzgBIBc4eDhkBjB0gMgAgDwABxBtgAoBgQQABhBkB6gTQAgEYAgZYAAsgOIBdmYXN0BfgMIABrBpBwgFQBgIAFBxBwBfhdgABmgTAAgGgAgeQAgJAAgCYAgGIBgJAAgRoAgXIABvBrBhgTwAgBgABfgCYGgGIABzgMYABjgRYBgCAGgLwABuBygMYDBjBpgI4AB0gQ4CBpBugAwABygkIAgEgBgC4BgfgAB1gVgAgZgAgroABtBwgDoAgSICgkQBhoABgEYAgIQBgFABgBIAgEYCBmgAwAgYIAgJQAglgABigS4AB5gBYBgsQAgVQAgBYBgLwABhgqYAgKABgBIABiBpgWYAgMgCBpgOYAga4BgCIAd3ZWlnguwABigBIBguoAdlbl9ngAoAgDoBgCgEgBIAgHQABrBlB5gLYBgBAAA1gCgAgBQEgkAAgAgAgBwAgL4ABzgSgAgPAABjB1gDQAA0gDIAgPoDgqQCgAQABzBogHwBByBjBfgdwHgD4CgB4Ac9Y3JmgtoABigq4BgawCgBgBgIQBgxgAAgBxgZgCgGAAAuhJ4BgmwAgLACgA4DdheD02A5gBABgboABlgDgAhKQAgrgAg0gBhCABg4YBgJYBBhBxg/4Bg5oCAACAhagBc7ZYiEgAgAf//vdOC/ACCbBUDCAqADCSBXAKD2DKCkAmBZC5BSBrABDyCmgEAAfzSlmhC/B7DLBeDoDwAFAIgBoAdsxLMdDRAhClA4CMCPA3BDCBgHwBcNQZokBsBDC/D+CpCWgBYABvDAgCABcKQZ5CB4CFD/gBAACDgDwCAKABCegPAABCC/gBAAC2gNYCgBoBBjBqgBoDgDYCATgHQAdoSahBBoCZBMAIB3gP4AgIADDBgCwBAMgIAAeGRREsAvgIQJClgIQEgBoFCngIQEgKACgIQBCsgIQBBsgIQJgQYCgIQBDKBFAVgIQLDpgQoLDrgIQLDwgIQFBvgIQACnghYAAADegGQCgIQACfAOgIQMCfAtgQoKCfAvgIQIcSQZs0gIQFBngIQACeAQiGwAiyQCgIIBBSgIINBxgQgKCfBzgIILB3gIIFBXgIIAA4BAgqwABJgIIECVgIIBArgIIBgGYGC2gnwF",e.sg=!0,e.oa={fb:1001,aa:24e3},e.duration={fb:24024,aa:24e3},e.profile="none-h264mpl30-dash",e.bitrate=64,e.width=320,e.height=240,e.ej=1,e.fj=1,e.Yh=[176,739],e.Th=[44]},function(t,e){_esm(e),e.default=function t(e,i){var n;e.__proto__&&e.__proto__!==Object.prototype&&t(e.__proto__,i),Object.getOwnPropertyNames(e).forEach(function(t){void 0!==(n=Object.getOwnPropertyDescriptor(e,t))&&Object.defineProperty(i,t,n)})}},function(t,e){var i,n;function r(){var e=this;this.zV=[],this.z9b=function(t){0<=(t=e.zV.indexOf(t))&&e.zV.splice(t,1)}}function a(t){this.$Ab=t}function o(t,e){this.y4b=t,this.console=e,this.counter=new i}_esm(e),e.Cia=e.V4=void 0,Object.defineProperties(r.prototype,{Ox:{get(){return 0!==this.zV.length},configurable:!0},Ddb:{get(){return this.zV.length},configurable:!0}}),r.prototype.add=function(){var t=new n(this.z9b);return this.zV.push(t),t},r.prototype.nga=function(t){var e=this.add();try{return Promise.resolve(t()).then(function(t){return e.release(),t},function(t){return e.release(),Promise.reject(t)})}catch(t){return e.release(),Promise.reject(t)}},i=r,e.V4=i,a.prototype.release=function(){this.$Ab(this)},n=a,o.prototype.Kx=function(){var t,e=this;return this.console.trace("Acquiring lease, total count",this.counter.Ddb+1),t=this.counter.add(),{release:function(){t.release(),e.console.trace("Releasing lease, total count",e.counter.Ddb),e.y4b(function(){return!e.counter.Ox})}}},e.Cia=o},function(t,e,i){var n,r,a,o;function s(t,e){this.type=t,this.timestamp=e}function u(){}_esm(e),e.Oh=e.uka=void 0,n=i(19),(i=r=e.uka||(e.uka={}))[i.absolute=0]="absolute",i[i.Hgb=1]="relative",s.prototype.toString=function(){return"timeStamp: ".concat(this.timestamp,", type: ").concat(r[this.type])},Object.defineProperties(s,{Ka:{get(){return a=a||new s(r.Hgb,n.M.Ka)},configurable:!0}}),o=s,u.Rw=function(t){return new o(r.absolute,t)},Object.defineProperties(u,{ghc:{get(){return o.Ka},configurable:!0}}),u.GG=function(t){return new o(r.Hgb,t)},u.UEa=new o(r.absolute,n.M.Uv),e.Oh=u},function(t,e,i){var r,a,n;_esm(e),e.jD=void 0,r=i(105),a=i(446),n=i(63),t=function(){for(var t=2;14!==t;)switch(t){case 7:return e.prototype.sEa=function(t){for(var e=2;1!==e;)2===e&&(this.config=t,e=1)},e;case 2:e.prototype.G2a=function(t,e){for(var i,n=2;3!==n;)switch(n){case 1:return e=null!=e?e:this.CQ,t=this.config.Qwa&&e?(t=a.ioa(t,e),Math.max(t,i)):i;case 2:i=null===this.M7?t*(100-this.config.w1)/100:a.ioa(t,this.M7),n=1}},e.prototype.ICa=function(t){return this.config.LOb&&(t===n.za.Dg||t===n.za.ed)},e.prototype.So=function(t,e){{var i;return this.ICa(e)?(null==(i=t.p9a)?void 0:i.ta)||(null==(i=t.Xa)?void 0:i.ta)||0:(null==(i=t.Xa)?void 0:i.ta)||0}},e.prototype.gz=function(t){for(var e=2;1!==e;)2===e&&(this.M7=t,e=1)},e.prototype.XX=function(){return this.M7},t=9;break;case 9:e.prototype.iL=function(t){for(var e=2;1!==e;)switch(e){case 4:this.fnb=t,e=3;break;case 2:this.fnb=t,e=1}},e.prototype.EY=function(){return this.fnb},t=7}function e(t,e){for(var n,i=2;8!==i;)2===i&&((n=this).config=t,this.CQ=e,this.fnb=this.M7=null,this.T_=function(t,e,i){return t=n.So(t,i),n.config.JZa?{lower:t*(1-(e=r.Sra(n.config.IZa,e.Tk-e.tc,1))),upper:void 0}:{lower:t*n.config.w1/100,upper:void 0}},i=8)}}(),e.jD=t},function(t,e,i){var n;_esm(e),e.ZL=e.Uqb=void 0,n=i(26),e.Uqb=function(){this.uI=[],this.ho=[],this.AYa=[],this.toa=n.Ww.Iz,this.cga=n.Tm.Iz},e.ZL="DeviceCapabilitiesConfigSymbol"},function(t,e){_esm(e),e.tU="SourceBufferTypeProviderSymbol"},function(t,e){_esm(e),e.cU="MslProviderSymbol"},function(t){function n(t,e){return t.some(function(t){return t.id===e})}function r(t,e){return t.filter(function(t,e){return t.id===e.id&&t.displayTime+t.duration===e.displayTime}.bind(null,e)).map(i).reduce(a,0)}function i(t){return t.duration}function a(t,e){return t+e}t.exports={kIb:function(t,e,i){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return i.error("indexId mismatch in sidx",{sIndexId:t,mIndexId:e}),!1;return!0},Bqa:function(t,e,i){var n={};return n.displayTime=t.displayTime,n.duration=t.duration,n.originX=t.O4b,n.originY=t.P4b,n.sizeX=t.lcc,n.sizeY=t.mcc,n.imageData=e,n.id=t.DJ,n.rootContainerExtentX=i.z$b,n.rootContainerExtentY=i.A$b,n},rta:function(t,e){return"o_"+t+"s_"+e},Ggc:function(t,e){e("P"===String.fromCharCode(t[1])),e("N"===String.fromCharCode(t[2])),e("G"===String.fromCharCode(t[3]))},rd:function(t){return void 0!==t},lsc:n,Uoc:r,iY:function(t,e){var i,n=Object.create({});for(i in t)n[i]=t[i];return t instanceof Error&&(n.message=t.message,n.stack=t.stack),n.errorString=e,n},assert:function(t,e){if(!t)throw e&&e.error(Error("Assertion Failed").stack),Error("Assertion Failed")},T8a:function(t){return t&&0<t.entries.length&&0===t.images.length},sdc:function(t,e){for(var i,n=e.entries.length,r=0;r<n;r++)if((i=e.entries[r]).displayTime<=t&&i.displayTime+i.duration>=t)return!0;return!1},tdc:function(t,e,i){for(var n,r,a=i.entries.length,o=0;o<a&&(n=(r=(n=i.entries[o]).displayTime)+n.duration,!(e<r));o++)if(r<=t&&t<=n||t<r&&r<=e)return!0;return!1},M0a:function(i){return i.map(function(t,e){return t.duration+=r(i.slice(e+1),t),t}).reduce(function(t,e){return n(t,e.id)||t.push(e),t},[])},mua:function(t){return t.reduce(function(t,e){return t+e.entries.reduce(function(t,e){return e.iva+t},0)},0)},GNb:function(t,e){return t&&t.Xy<=e&&t.js>=e},nTb:function(t){if(t)return t.endTime},KTb:function(t){try{return String.fromCharCode.apply(String,t)}catch(t){}return""}}},function(t,e){_esm(e),e.nH="PlaygraphConfigSymbol"},function(t,e){function i(){}_esm(e),e.yr=e.zob=void 0,e.zob=i,e.yr=new i},function(t,e,i){var n,o,r;function a(t,e,i,n){return(e=r.ii.call(this,t,e,n)||this).context=t,e.Vra=i,e}_esm(e),e.Es=void 0,t=i(0),n=i(1),o=i(66),r=i(75),i(137),S(a,r.ii),a.prototype.Pf=function(t,e){var i=this,n=this.rE(e);return this.send(t,{url:e.href,name:o.Eg.events,Dm:o.Eg.events+"/"+this.Vra},n).then(function(){return e}).catch(function(t){throw i.An(t)})},a.prototype.kq=function(t,e,i){var n=this,r=this.rE(i),a={url:e.FP("events").href,name:o.Eg.events,Dm:o.Eg.events+"/"+this.Vra};return this.send(t,a,r).then(function(t){return e.Jna(t.result.links),i}).catch(function(t){throw n.An(t)})},a.prototype.rE=function(t){return{event:this.Vra,xid:t.ga,position:t.position||0,clientTime:t.aB,sessionStartTime:t.Xn,videoTrackId:t.QS,audioTrackId:t.zo,timedTextTrackId:t.xS,mediaId:t.GQ,trackId:t.trackId,sessionId:t.sessionId,appId:t.appId,playTimes:this.apa(t.Vt),sessionParams:t.Wn}},a.prototype.$oa=function(t){return{downloadableId:t.Wb,duration:t.duration}},a.prototype.apa=function(t){var e={total:t.total,audio:t.audio.map(this.$oa),video:t.video.map(this.$oa),text:t.text.map(this.$oa)};return t.total!==t.EL&&(e.totalContentTime=t.EL),0!==t.zG&&(e.totalAdDuration=t.zG),0!==t.AG&&(e.totalOtherDuration=t.AG),0===t.AG&&0===t.zG||(e.totalCombinedDuration=t.zS),e},i=a,i=t.__decorate([n.$(),t.__param(0,n.vp()),t.__param(1,n.vp()),t.__param(2,n.vp()),t.__param(3,n.vp())],i),e.Es=i},function(t){t.exports=Number.isNaN||function(t){return t!=t}},function(t,e){_esm(e),e.LG="BrowserInfoSymbol"},function(t,e){function n(t){this.buffer=t,this.position=0}_esm(e),n.prototype.seek=function(t){this.position=t},n.prototype.skip=function(t){this.position+=t},n.prototype.cua=function(){return this.buffer.length-this.position},n.prototype.zC=function(){return this.buffer[this.position++]},n.prototype.jl=function(t){var e=this.position;return this.position+=t,this.xZb(this.buffer)?this.buffer.subarray(e,this.position):this.buffer.slice(e,this.position)},n.prototype.xZb=function(t){return void 0!==t.subarray},n.prototype.ks=function(t){for(var e=0;t--;)e=256*e+this.buffer[this.position++];return e},n.prototype.EAa=function(t){for(var e="";t--;)e+=String.fromCharCode(this.buffer[this.position++]);return e},n.prototype.ci=function(){return this.ks(2)},n.prototype.ls=function(){return this.ks(4)},n.prototype.zR=function(){return this.ks(8)},n.prototype.Yy=function(t){for(var e,i="";t--;)i+="0123456789ABCDEF"[(e=this.zC())>>>4]+"0123456789ABCDEF"[15&e];return i},n.prototype.FAa=function(t){for(var e=0,i=0;i<t;i++)e+=this.zC()<<(i<<3);return e},n.prototype.yR=function(){return this.FAa(4)},n.prototype.g2=function(t){this.VS(t,2)},n.prototype.dD=function(t){this.VS(t,4)},n.prototype.pga=function(t){this.buffer[this.position++]=t},n.prototype.VS=function(t,e){this.position+=e;for(var i=1;i<=e;i++)this.buffer[this.position-i]=255&t,t=Math.floor(t/256)},n.prototype.cD=function(t){for(var e=0;e<t.length;e++)this.buffer[this.position++]=t.charCodeAt(e)},n.prototype.f2=function(t){for(var e=t.length,i=0;i<e;i++)this.buffer[this.position++]=t[i]},n.prototype.US=function(t,e){this.f2(t.jl(e))},n.prototype.Cnb=function(t){t=new n(t);for(var e,i;;){if(!(i=(e=t.cua())>>>14)){e<128?this.pga(e):this.VS(32768|e,2),this.US(t,e);break}i=Math.min(4,i),this.pga(192|i),this.US(t,16384*i)}},n.prototype.fgb=function(){for(var t,e=[],i=new n(e);;){if(128&(t=this.zC())){if(128!=(192&t)){if(0<(t&=63)&&t<=4){i.US(this,16384*t);continue}throw Error("bad asn1")}t=((t&=63)<<8)+this.zC(),i.US(this,t)}else i.US(this,t);break}return new Uint8Array(e)},e.xT=n},function(t,e){function i(){}_esm(e),e.If=void 0,(e.If=i).qKa=/^hevc-main/,i.pKa=/^hevc-hdr-|hevc-dv/,i.gM=/^hevc-hdr-/,i.Zw=/^hevc-dv/,i.n3=/h264mpl/,i.QG=/h264mpl30/,i.SG=/h264mpl31/,i.gD=/h264hpl/,i.HD=/^vp9-/,i.sl=/^av1-/,i.Arb=/[l|L]4[0-1]-/,i.HM=/-L5[0-1]-/,i.uga=/^heaac-2-/,i.Prb=/^heaac-2hq-dash/,i.eA=/^xheaac-dash/,i.Spb=/ddplus-2/,i.Tpb=/ddplus-5/,i.Upb=/ddplus-atmos/},function(t,e){_esm(e),e.K2="CannedChallengeProvider"},function(t,e){_esm(e),e.CRa="ReportSyncSymbol",e.ARa="ReportApiErrorSyncSymbol",e.PJa="FtlProbeConfigSymbol",e.RJa="FtlProbeSymbol"},function(t,e){_esm(e),e.w2="ApiInfoSymbol"},function(t,e){_esm(e),e.a3="DebouncerFactorySymbol"},function(t,e,i){var n,r;_esm(e),e.tRa=e.Y4=e.t$=void 0,n=i(49),r=i(4),e.t$=function(t){return t===n.u.P?r.Y.Uia:r.Y.Via},e.Y4=50,e.tRa=1e3},function(t,e){_esm(e),t.exports=function(t){return{minInitVideoBitrate:t.hw,minHCInitVideoBitrate:t.bya,maxInitVideoBitrate:t.bC,minInitAudioBitrate:t.$Z,maxInitAudioBitrate:t.LZ,minHCInitAudioBitrate:t.YZ,minAcceptableVideoBitrate:t.dca,minRequiredBuffer:t.KF,minPrebufSize:t.Fj,minCheckBufferingCompleteInterval:t.hca,rebufferingFactor:t.JAa,useMaxPrebufSize:t.GEa,maxPrebufSize:t.dC,maxRebufSize:t.Kxa,maxBufferingTime:t.Yr,minAudioMediaRequestSizeBytes:t.eca,minVideoMediaRequestSizeBytes:t.nca,initialBitrateSelectionCurve:t.zaa,initSelectionLowerBound:t.l9a,initSelectionUpperBound:t.m9a,throughputPercentForAudio:t.w1,bandwidthMargin:t.Eoa,bandwidthMarginContinuous:t.Foa,bandwidthMarginCurve:t.Goa,conservBandwidthMargin:t.mqa,switchConfigBasedOnInSessionTput:t.GDa,conservBandwidthMarginTputThreshold:t.NW,conservBandwidthMarginCurve:t.nqa,switchAlgoBasedOnHistIQR:t.Bkb,switchConfigBasedOnThroughputHistory:t.uG,maxPlayerStateToSwitchConfig:t.Jxa,lowEndMarkingCriteria:t.jxa,IQRThreshold:t.oia,histIQRCalcToUse:t.Zua,maxTotalBufferLevelPerSession:t.dw,highWatermarkLevel:t.F8a,toStableThreshold:t.llb,toUnstableThreshold:t.Cfa,skipBitrateInUpswitch:t.VCa,watermarkLevelForSkipStart:t.XEa,highStreamRetentionWindow:t.kaa,lowStreamTransitionWindow:t.Dba,highStreamRetentionWindowUp:t.Vua,lowStreamTransitionWindowUp:t.lxa,highStreamRetentionWindowDown:t.Uua,lowStreamTransitionWindowDown:t.kxa,highStreamInfeasibleBitrateFactor:t.Tua,lowestBufForUpswitch:t.XB,lockPeriodAfterDownswitch:t.yba,lowWatermarkLevel:t.nxa,lowestWaterMarkLevel:t.xy,lowestWaterMarkLevelBufferRelaxed:t.oxa,mediaRate:t.Yba,maxTrailingBufferLen:t.Qba,audioBufferTargetAvailableSize:t.fW,videoBufferTargetAvailableSize:t.V1,maxVideoTrailingBufferSize:t.Obb,maxAudioTrailingBufferSize:t.rbb,fastUpswitchFactor:t.C9,fastDownswitchFactor:t.hsa,maxMediaBufferAllowed:t.cw,simulatePartialBlocks:t.SCa,simulateBufferFull:t.ojb,considerConnectTime:t.oqa,connectTimeMultiplier:t.lqa,lowGradeModeEnterThreshold:t.Nab,lowGradeModeExitThreshold:t.Oab,maxDomainFailureWaitDuration:t.ubb,maxAttemptsOnFailure:t.qbb,exhaustAllLocationsForFailure:t.$3a,maxNetworkErrorsDuringBuffering:t.Cbb,maxBufferingTimeAllowedWithNetworkError:t.Iba,fastDomainSelectionBwThreshold:t.h4a,throughputProbingEnterThreshold:t.Pkb,throughputProbingExitThreshold:t.Qkb,locationProbingTimeout:t.Bab,finalLocationSelectionBwThreshold:t.o4a,throughputHighConfidenceLevel:t.Nkb,throughputLowConfidenceLevel:t.Okb,locationStatisticsUpdateInterval:t.Wwa,enablePerfBasedLocationSwitch:t.C3a,probeServerWhenError:t.ww,probeRequestTimeoutMilliseconds:t.jAa,allowSwitchback:t.MA,probeDetailDenominator:t.uR,maxDelayToReportFailure:t.Jba,countGapInBuffer:t.a1a,bufferThresholdForAbort:t.b_a,allowCallToStreamSelector:t.GYa,pipelineScheduleTimeoutMs:t.Eza,maxPartialBuffersAtBufferingStart:t.cC,maxActiveRequestsSABCell100:t.Gba,maxStreamingSkew:t.Lxa,maxPendingBufferPercentage:t.Hxa,headerRequestSize:t.iaa,estimateHeaderSize:t.Qra,minBufferLenForHeaderDownloading:t.XZ,reserveForSkipbackBufferMs:t.B0,numExtraFragmentsAllowed:t.Hya,pipelineEnabled:t.Ij,maxParallelConnections:t.DQ,socketReceiveBufferSize:t.Ajb,audioSocketReceiveBufferSize:t.N7,videoSocketReceiveBufferSize:t.PS,headersSocketReceiveBufferSize:t.Rua,updatePtsIntervalMs:t.Tfa,bufferTraceDenominator:t.Soa,bufferLevelNotifyIntervalMs:t.lO,aseReportDenominator:t.bO,aseReportIntervalMs:t.F7,enableAbortTesting:t.xOb,abortRequestFrequency:t.rCb,streamingStatusIntervalMs:t.uDa,prebufferTimeLimit:t.uC,minBufferLevelForTrackSwitch:t.gca,penaltyFactorForLongConnectTime:t.wza,longConnectTimeThreshold:t.hxa,additionalBufferingLongConnectTime:t.Una,additionalBufferingPerFailure:t.Vna,rebufferCheckDuration:t.k0,enableLookaheadHints:t.z3a,lookaheadFragments:t.Kab,enableOCSideChannel:t.sB,OCSCBufferQuantizationConfig:t.B4,updateDrmRequestOnNetworkFailure:t.amb,deferAseScheduling:t.p2a,maxDiffAudioVideoEndPtsMs:t.tbb,defaultHeaderCacheSize:t.O8,defaultHeaderCacheDataPrefetchMs:t.N8,neverWipeHeaderCache:t.lK,networkFailureResetWaitMs:t.nya,networkFailureAbandonMs:t.mya,maxThrottledNetworkFailures:t.Pba,throttledNetworkFailureThresholdMs:t.ufa,lowThroughputThreshold:t.mxa,excludeSessionWithoutHistoryFromLowThroughputThreshold:t.Yra,mp4ParsingInNative:t.Ecb,sourceBufferInOrderAppend:t.Cjb,requireAudioStreamToEncompassVideo:t.RK,allowAudioToStreamPastVideo:t.FYa,enableManagerDebugTraces:t.Zi,managerDebugMessageInterval:t.$ab,managerDebugMessageCount:t.Zab,bufferThresholdToSwitchToSingleConnMs:t.Roa,bufferThresholdToSwitchToParallelConnMs:t.Qoa,netIntrStoreWindow:t.G2b,minNetIntrDuration:t.b2b,fastHistoricBandwidthExpirationTime:t.bQb,bandwidthExpirationTime:t.hFb,failureExpirationTime:t.ZPb,historyTimeOfDayGranularity:t.UWb,expandDownloadTime:t.KPb,minimumMeasurementTime:t.o2b,minimumMeasurementBytes:t.n2b,throughputMeasurementTimeout:t.fec,initThroughputMeasureDataSize:t.ZXb,throughputMeasureWindow:t.eec,throughputIQRMeasureWindow:t.dec,IQRBucketizerWindow:t.Nsb,connectTimeHalflife:t.yIb,responseTimeHalflife:t.r$b,historicBandwidthUpdateInterval:t.TWb,throughputWarmupTime:t.jec,minimumBufferToStopProbing:t.m2b,throughputPredictor:t.gec,ase_stream_selector:t.oEb,enableFilters:t.GOb,filterDefinitionOverrides:t.vQb,defaultFilter:t.rMb,secondaryFilter:t.cac,defaultFilterDefinitions:t.sMb,initBitrateSelectorAlgorithm:t.xva,bufferingSelectorAlgorithm:t.Xoa,ase_ls_failure_simulation:t.Z1a,ase_dump_fragments:t.Oqa,ase_location_history:t.Pqa,ase_throughput:t.$1a,ase_simulate_verbose:t.b2a,secondThroughputEstimator:t.TBa,secondThroughputMeasureWindowInMs:t.Whb,marginPredictor:t.xxa,networkMeasurementGranularity:t.oya,HistoricalTDigestConfig:t.KKa,maxIQRSamples:t.zbb,minIQRSamples:t.ocb,periodicHistoryPersistMs:t.lda,saveVideoBitrateMs:t.Bea,needMinimumNetworkConfidence:t.e_,biasTowardHistoricalThroughput:t.Joa,maxFastPlayBufferInMs:t.Kba,maxFastPlayBitThreshold:t.Exa,minAudioMediaRequestDuration:t.Gy,minVideoMediaRequestDuration:t.gC,minAudioMediaRequestDurationCache:t.Gy,minVideoMediaRequestDurationCache:t.gC,addHeaderDataToNetworkMonitor:t.Ina,hindsightDenominator:t.Yua,hindsightDebugDenominator:t.Xua,hindsightParam:t.maa,minimumTimeBeforeBranchDecision:t.LF,minimumTimeBeforeDelayedSeekToQueuedSegment:t.wcb,enableSessionHistoryReport:t.yX,earlyStageEstimatePeriod:t.zra,lateStageEstimatePeriod:t.fab,maxNumSessionHistoryStored:t.Nba,minSessionHistoryDuration:t.mca,appendMediaRequestOnComplete:t.VYa,waitForDrmToAppendMedia:t.iga,forceAppendHeadersAfterDrm:t.Q9,startMonitorOnLoadStart:t.cDa,reportFailedRequestsToNetworkMonitor:t.eBa,reappendRequestsOnSkip:t.y8b,maxActiveRequestsPerSession:t.Cy,limitAudioDiscountByMaxAudioBitrate:t.Qwa,appendFirstHeaderOnComplete:t.foa,maxAudioFragmentOverlapMs:0,editVideoFragments:t.nOb,declareBufferingCompleteAtSegmentEnd:t.Qqa,applyProfileTimestampOffset:t.tI,applyProfileStreamingOffset:t.xo,mediaSourceSupportsNegativePts:t.TZ,requireDownloadDataAtBuffering:t.iea,requireSetupConnectionDuringBuffering:t.jea,recordFirstFragmentOnSubBranchCreate:t.LAa,earlyAppendSingleChildBranch:t.h9,selectStartingVMAFMethod:t.SR,activateSelectStartingVMAF:t.VV,minStartingVideoVMAF:t.iw,minAcceptableVMAF:t.WZ,minAllowedVmaf:t.eK,alwaysNotifyEOSForPlaygraph:t.TDb,enableNewAse:t.gP,useNewApi:t.Q1,enableCombinedPlaygraphs:t.uX,enableAdPlaygraphs:t.ZI,retainSbrOnFade:t.pea,excludedContentPlaygraphIds:t.Zra,enableDiscontiguousBuffering:t.l9,forceImmediateTransitionTypeForTitles:t.Lsa,forceImmediateTransitionExitZone:t.Ksa,useBufferSizeLimiter:t.Vfa,useLegacyFragmentRounding:t.FEa,maxAllowedOutstandingRequests:t.Hba,alwaysRunUnderflowTimer:t.XN,minStreamableConcurrencyWindow:t.cya,streamableConcurrencyFactor:t.rDa,bufferingConcurrencyWindow:t.yW,singleStreamablePerBranch:t.kcc,enableResolutionVMAFStreamFilter:t.n9,resolutionVMAFCappingRuleList:t.oea,percentCapTitlesForResolutionVMAFStreamFilter:t.zza,useExitZones:t.DEa,perFragmentVMAFConfig:t.jR,enableInitialTputLogging:t.x3a,maxResponsesInitialTput:t.k1b,paddingDurationMs:t.jza,paddingMediaType:t.kza,supportsPtsChanged:t.FDa,ciPredictorSource:t.Jpa,experimentalFilter:t.LPb,simulationDurationStrategy:t.TCa}}},function(t){t.exports=function(t){return null!=t&&"object"==typeof t&&!0===t["@@functional/placeholder"]}},function(t,e,i){var n,r,a;function o(){return null!==a&&a.apply(this,arguments)||this}_esm(e),n=i(21),r=i(24),a=i(237).default,n.__extends(o,a),o.prototype.parse=function(t){var e=a.prototype.parse.call(this,t);return this.R.offset+=8,this.wpa=this.R.mh(),this.GBa=this.R.mh(),this.R.offset+=4,this.samplerate=this.R.mh(),this.R.offset+=2,r.S&&this.R.console.trace("MP4AudioSampleEntry: channelcount: "+this.wpa+", samplesize: "+this.GBa+", samplerate: "+this.samplerate),null!=t&&t.rf&&(t.rf.wpa=this.wpa,t.rf.GBa=this.GBa,t.rf.samplerate=this.samplerate),e},o.qd=!1,e.default=o},function(t,e,i){var a;function o(t){var e={profile:t.spoofedProfile||t.profile,a$:t.max_framerate_value,Z9:t.max_framerate_scale,maxWidth:t.maxWidth,maxHeight:t.maxHeight,Fza:t.pixelAspectX,Gza:t.pixelAspectY,channels:t.channels,sampleRate:t.channels?48e3:void 0};return t.spoofedProfile&&(e.vrc=t.profile),e}_esm(e),e.U6a=e.Mta=void 0,a=i(6),e.Mta=function(e,n,t){var r=[{},{}];return(t===a.u.P?["audio_tracks"]:["audio_tracks","video_tracks"]).forEach(function(t,i){e[t].some(function(t,e){return e===n[i]&&(r[i]=o(t),!0)})}),r},e.U6a=o},function(t,e,i){var n,r;function a(t){this.config=t,this.reset()}_esm(e),e.Fz=void 0,n=i(183),r=i(2),a.instance=function(){return r.assert(void 0!==a.mN),a.mN},a.xIb=function(t){a.mN=new a(t)},a.prototype.push=function(t){this.Qg&&this.Qg.push(t)},a.prototype.Lb=function(){if(this.Qg)return this.Qg.eB(),this.Qg.Hj([.25,.5,.75,.9,.95,.99]).map(function(t){return t?parseFloat(t.toFixed(1)):0})},a.prototype.reset=function(){this.config.E3a&&this.config.uia&&(this.Qg=new n.Ika(this.config.uia.c,this.config.uia.maxc))},e.Fz=a},function(t,e,i){var n;function r(t,e,i){this.VO=!1===t,this.gq=t||.01,this.wia=void 0===e?25:e,this.hHa=void 0===i?1.1:i,this.xj=new n(a),this.reset()}function a(t,e){return t.ag>e.ag?1:t.ag<e.ag?-1:0}function o(t,e){return t.Ey-e.Ey}function s(t){this.config=t||{},this.mode=this.config.mode||"auto",r.call(this,"cont"===this.mode&&t.gq),this.jNb=this.config.ratio||.9,this.kNb=this.config.Qsc||1e3,this.tca=0}n=i(917).nvb,r.prototype.reset=function(){this.xj.clear(),this.Mwa=this.n=0},r.prototype.size=function(){return this.xj.size},r.prototype.co=function(t){var e=[];return t?(this.N5(!0),this.xj.Nf(function(t){e.push(t)})):this.xj.Nf(function(t){e.push({ag:t.ag,n:t.n})}),e},r.prototype.summary=function(){return[(this.VO?"exact ":"approximating ")+this.n+" samples using "+this.size()+" centroids","min = "+this.Hj(0),"Q1  = "+this.Hj(.25),"Q2  = "+this.Hj(.5),"Q3  = "+this.Hj(.75),"max = "+this.Hj(1)].join("\n")},r.prototype.push=function(t,e){e=e||1,t=Array.isArray(t)?t:[t];for(var i=0;i<t.length;i++)this.XUa(t[i],e)},r.prototype.zAa=function(t){t=Array.isArray(t)?t:[t];for(var e=0;e<t.length;e++)this.XUa(t[e].ag,t[e].n)},r.prototype.N5=function(t){var e;this.n===this.Mwa||!t&&this.hHa&&this.hHa>this.n/this.Mwa||(e=0,this.xj.Nf(function(t){t.Ey=e+t.n/2,e=t.HO=e+t.n}),this.n=this.Mwa=e)},r.prototype.SQb=function(t){var e,i;return 0===this.size()?null:(i=null===(e=this.xj.lowerBound({ag:t})).data()?e.IK():e.data()).ag!==t&&!this.VO&&(e=e.IK())&&Math.abs(e.ag-t)<Math.abs(i.ag-t)?e:i},r.prototype.wN=function(t,e,i){this.xj.Xo({ag:t,n:e,HO:i}),this.n+=e},r.prototype.u5=function(t,e,i){e!==t.ag&&(t.ag+=i*(e-t.ag)/(t.n+i)),t.HO+=i,t.Ey+=i/2,t.n+=i,this.n+=i},r.prototype.XUa=function(t,e){var i=this.xj.min(),n=this.xj.max(),r=this.SQb(t);r&&r.ag===t?this.u5(r,t,e):r===i?this.wN(t,e,0):r===n?this.wN(t,e,this.n):this.VO?this.wN(t,e,r.HO):(i=r.Ey/this.n,Math.floor(4*this.n*this.gq*i*(1-i))-r.n>=e?this.u5(r,t,e):this.wN(t,e,r.HO)),this.N5(!1),!this.VO&&this.wia&&this.size()>this.wia/this.gq&&this.eB()},r.prototype.CFb=function(t){var e;return this.xj.oo=o,h=this.xj.upperBound({Ey:t}),this.xj.oo=a,[e=h.IK(),t=e&&e.Ey===t?e:h.next()]},r.prototype.Hj=function(t){var e=(Array.isArray(t)?t:[t]).map(this.EAb,this);return Array.isArray(t)?e:e[0]},r.prototype.EAb=function(t){var e,i;if(0!==this.size())return this.N5(!0),this.xj.min(),this.xj.max(),t*=this.n,i=(e=this.CFb(t))[0],(e=e[1])===i||null===i||null===e?(i||e).ag:this.VO?(t<=i.HO?i:e).ag:i.ag+(t-i.Ey)*(e.ag-i.ag)/(e.Ey-i.Ey)},r.prototype.eB=function(){var t;if(!this.G0a){for(t=this.co(),this.reset(),this.G0a=!0;0<t.length;)this.zAa(t.splice(Math.floor(Math.random()*t.length),1)[0]);this.N5(!0),this.G0a=!1}},((s.prototype=Object.create(r.prototype)).constructor=s).prototype.push=function(t){r.prototype.push.call(this,t),this.wHb()},s.prototype.wN=function(t,e,i){this.tca+=1,r.prototype.wN.call(this,t,e,i)},s.prototype.u5=function(t,e,i){1===t.n&&--this.tca,r.prototype.u5.call(this,t,e,i)},s.prototype.wHb=function(){!("auto"!==this.mode||this.size()<this.kNb)&&this.tca/this.size()>this.jNb&&(this.mode="cont",this.VO=!1,this.gq=this.config.gq||.01,this.eB())},t.exports={TDigest:r,Digest:s}},function(t,e,i){function n(t,e){n.xa(this,t,e)}_esm(e),e.Vw=void 0,i(2),n.xa=function(t,e,i){t.od=e,t.kd=i.fa,t.Pb=i.offset},Object.defineProperties(n.prototype,{stream:{get(){return this.od},configurable:!0},fa:{get(){return this.kd},configurable:!0},offset:{get(){return this.Pb},configurable:!0},T:{get(){return this.od.T},configurable:!0},L:{get(){return this.od.L},configurable:!0},mediaType:{get(){return this.od.mediaType},configurable:!0},Pa:{get(){return this.od.Pa},configurable:!0},bitrate:{get(){return this.od.bitrate},configurable:!0},profile:{get(){return this.od.profile},configurable:!0},aa:{get(){return this.od.aa},configurable:!0},iK:{get(){return this.od.iK},configurable:!0},oa:{get(){return this.od.oa},configurable:!0}}),n.prototype.Oac=function(t){this.kd=t},n.prototype.toJSON=function(){return{movieId:this.L,streamId:this.Pa,offset:this.offset,bytes:this.fa}},e.Vw=n},function(t,e,i){var n,r,s,u;function a(t,e,i,n,r,a,o){return e=u.call(this,t,e,i,n,r,a,o)||this,s.Vw.xa(e,t,n),e}_esm(e),e.TL=void 0,t=(n=i(0)).__importDefault(i(158)),r=i(106),s=i(184),u=r.B2,n.__extends(a,u),e.TL=i=a,t.default(s.Vw.prototype,i.prototype)},function(t,e,i){var n,o,s;function u(t,e,i,n,r){var a=s.call(this,i)||this;return a.q7=!1,u.xa(a,t,e,i,n,r),a}_esm(e),e.IG=void 0,n=i(0),o=n.__importDefault(i(3)),s=i(89).Uw,n.__extends(u,s),u.xa=function(t,e,i,n,r,a){t.ce=n,t.bz=e,t.Ce=r,t.SH=e.location||i.location,t.EV=e.kc||i.oc,t.kCa=e.kCa||i.kCa,t.xq=i.xq,t.wfa=o.default.time.ia(),t.H=a},Object.defineProperties(u.prototype,{console:{get(){return this.H},configurable:!0},location:{get(){return this.SH},configurable:!0},oc:{get(){return this.EV},configurable:!0}}),u.prototype.xa=function(t){this.Va=t},u.prototype.xCa=function(t,e){this.SH=t,this.EV=e},u.prototype.zEa=function(){var t,e,i;return this.complete?0:(e=(t=this.bz).T,t.url?(i=t.v7a(this.Cc,this.xq),this.url===i||(e.xCa(this,t.location,t.kc),this.rfa(i))?0:(this.H.warn("swapUrl failed: ",this.tP),2)):(this.H.warn("updateurl, missing url for streamId:",t.Pa,"mediaRequest:",this,"stream:",t),1))},e.IG=u},function(t,e,i){var n,r;function a(t,e){void 0===e&&(e=0),this.name=t,this.priority=e,this.Qc=r.pending}_esm(e),e.Lka=e.lo=void 0,n=i(160),(i=r=e.lo||(e.lo={}))[i.pending=0]="pending",i[i.uea=1]="running",i[i.complete=2]="complete",i[i.TO=3]="destroyed",Object.defineProperties(a.prototype,{state:{get(){return this.Qc},configurable:!0},yYb:{get(){return this.Qc===r.pending||this.Qc===r.uea},configurable:!0},$d:{get(){return this.sr},configurable:!0}}),a.prototype.AEb=function(t){var e;null!=(e=this.sr)&&e.dea(this),this.sr=t},a.prototype.dz=function(){this.Qc=r.uea,this.Pf(),this.Cca()===n.Oh.UEa&&(this.Qc=r.complete)},a.prototype.tb=function(){var t;this.Qc=r.TO,null!=(t=this.sr)&&t.dea(this)},a.prototype.K_a=function(t){this.sr.dea(this),this.sr=t,this.sr.Ahb(this)},e.Lka=a},function(t,e,i){var n,o,s,r,a,u,c,h;function f(t,e,i,n,r,a){return i=h.call(this,t,e,i,n,r)||this,u.yk.xa(i,t,e,a),i.kd=0,i.me=!1,i}_esm(e),e.Cz=void 0,n=i(0),o=i(2),t=i(36),s=i(8),r=i(22),a=i(433),u=i(74),c=i(106),h=a.Iga,n.__extends(f,h),Object.defineProperties(f.prototype,{Cc:{get(){return!1},configurable:!0}}),f.prototype.push=function(t){this.kd+=t.fa,h.prototype.push.call(this,t)},f.prototype.Tr=function(){var t;return!this.me&&!!this.Ma.length&&!(null==(t=r.Xc(this.Ma,function(t){return!t.me}))||!t.Tr())},f.prototype.jE=function(e,i,n){var r,a;return o.assert(!this.me),r=c.Kh.Itb,a=s.$v(this),this.me=this.Ma.every(function(t){return!!t.me||!!t.Tr()&&(r=t.jE(e,i,n,a).status)===c.Kh.Fs}),{status:r=r!==c.Kh.Fs||this.me?r:c.Kh.aub}},f.prototype.m9b=function(){this.Ma.forEach(function(t){t.CR()})},f.prototype.Vh=function(){return this.Ma?this.Ma[0].Vh()+"-"+this.Ma[this.Ma.length-1].Vh():"empty"},f.prototype.rK=function(t,e,i){this.kd+=e-i,this.V9(this,e,i)},f.prototype.toString=function(){return"ID: "+this.Vh()+":"+u.yk.prototype.toString.call(this)+"(aggregate)"},f.prototype.toJSON=function(){return{ID:this.Vh(),request:h.prototype.toJSON.call(this)}},e.Cz=i=f,t.Ve(u.yk,i)},function(t,e,i){var n,o,r,s,u,c,a,h,f;function l(t){return t.YXa(),{done:!1,value:t.value}}function d(t,e){this.console=t,this.Bg=e,this.Dzb=this.OU=0,this.Wg=[],this.console=u.ai(s.default,this.console,"QueueIterator:")}function p(t,e,i){var n=f.call(this,function(){return r.S&&n.console.trace("Next item requested",{index:n.index}),n.B$b(n.index++)})||this;return n.parent=t,n.B$b=e,n.console=i,n.oN=!1,n.index=0,n.gma=!1,n.Odb=function(t){var e=t.index;t=t.Iya,n.index>=e&&(n.index=Math.max(e,n.index-t)),e=n.console,r.S&&e&&e.trace("QueueIteratorInstance: onRemoved modified",n.index)},n}_esm(e),e.ZEb=e.mvb=e.VL=void 0,n=i(0),t=i(12),o=i(131),r=i(10),s=n.__importDefault(i(3)),u=i(8),c=i(2),i=i(36),Object.defineProperties(d.prototype,{TMb:{get(){return this.OU},configurable:!0},C0a:{get(){for(var t,e=0;e<this.Wg.length&&(t=this.Wg[e]).eZ&&(null==(t=t.item)||!t.done);e++);return e},configurable:!0},count:{get(){return this.Bg},configurable:!0},It:{get(){return 0===this.Bg},configurable:!0},kBa:{get(){for(var t=0;t<this.Wg.length&&this.Wg[t].jwa;t++);return t},configurable:!0},head:{get(){var t=n.__read(this.Wg,1)[0];return(t=t&&t.item)&&!t.done&&t.value},configurable:!0},rya:{get(){for(var t=0;t<this.Wg.length&&this.Wg[t].eZ;t++);return t},configurable:!0}}),d.prototype.jP=function(){var t;void 0===this.Bg&&(t=this.console,r.S&&t&&t.trace("QueueIterator: enqueueEnd"),this.tEa(this.rya-(this.Bg||0)))},d.prototype.co=function(){return this.Wg.map(function(t){return t.item})},d.prototype.G1=function(){return this.Vf||(this.Vf=this.Wg.filter(function(t){return(null==t?void 0:t.item)&&!t.item.done}).map(function(t){return t.item.value})),this.Vf},d.prototype.tEa=function(t){var e;r.S&&this.console.trace("updateCount",{prc:this.Bg,gq:t}),void 0!==this.Bg&&(e=this.Wg[this.Bg])&&this.Fva(e),this.Bg=void 0===this.Bg||void 0===t?t:this.Bg+t,void 0!==this.Bg&&(this.Bg=Math.max(0,this.Bg),(e=this.Wg[this.Bg])&&e.QJ.resolve({done:!0}))},d.prototype.enqueue=function(t){var e;return r.S&&this.console.trace("Enqueue called"),e=this.rya,this.l8(),this.Y7b(e,{value:t,done:!1}).v2a.promise},d.prototype.shb=function(){r.S&&this.console.trace("resetEnd"),this.tEa(void 0)},d.prototype.clear=function(t){var e,i;for(r.S&&this.console.trace("clear"),this.Sfb(),v=this.kBa,0<(e=this.Wg.length-v)&&(i={index:v,Iya:e},r.S&&this.console.trace("Removing items",i),this.Wg.splice(v,e),this.l8(),this.emit("onRemoved",i)),e=1;e<v;e++)this.Fva(this.Wg[e]);this.Bg=void 0,this.tEa(t&&t+v),this.OU&&(this.OU=0)},d.prototype.getIterator=function(){var e=this,t=u.ai(s.default,this.console,"QueueIteratorInstance::");return new h(this,function(t){return e.$6a(t)},t)},d.prototype.QO=function(){var t;if(0<this.kBa&&(t=n.__read(this.Wg,1)[0]).eZ)return r.S&&this.console.trace("dequeue",t.id),this.Sfb(1),this.emit("onDequeue",t.QJ.promise)},d.prototype.remove=function(t){for(var e,i,n=0;n<this.Wg.length;n++)if((i=(e=this.Wg[n]).item)&&!i.done&&i.value===t){this.Wg.splice(n,1),this.Bg&&this.Bg>n&&this.Bg--,this.l8(),r.S&&this.console.trace("removed",{id:e.id}),this.emit("onRemoved",{index:n,Iya:1});break}},d.prototype.Sfb=function(t){var e;0<(t=t||Math.min(this.kBa,this.rya))&&(e=this.Wg.splice(0,t),this.l8(),this.Bg&&(this.Bg-=t),r.S&&this.console.trace("pruned",t),Promise.resolve().then(function(){e.forEach(function(t){t.v2a.resolve()})}),this.emit("onRemoved",{index:0,Iya:t}),this.OU+=t)},d.prototype.$6a=function(t){var e;return r.S&&this.console.trace("getNextItemCalled",{offset:t}),void 0===this.count||0<this.count?(this.k9a(t),(e=this.Wg[t]).b$b.resolve(),t=e.QJ.promise,r.S&&this.console.trace("getNextItem:return",{id:e.id})):(r.S&&this.console.trace("getNextItem:returnDone"),t=Promise.resolve({done:!0})),t},d.prototype.Y7b=function(t,e){var i=(i=!e.done&&e.value)&&i.toJSON?i.toJSON():i;return r.S&&this.console.trace("Providing result",{gEb:t,item:i}),this.k9a(t),(i=(t=this.Wg[t]).QJ.resolve)(e),t},d.prototype.k9a=function(t){var e;void 0===this.Wg[t]&&(this.Fva(e={}),this.Wg[t]=e,t===this.Bg&&e.QJ.resolve({done:!0}),r.S&&this.console.trace("Item initialized",{gEb:t}))},d.prototype.zqa=function(i){var n={};return n.promise=new Promise(function(e,t){n.resolve=function(t){e(t),i&&i(t)},n.reject=t}),n},d.prototype.Fva=function(e){var i=this;e.QJ=this.zqa(function(t){e.item=t,e.eZ=!0,r.S&&i.console.trace("Item resolved",{id:e.id})}),e.id&&e.jwa&&!e.eZ&&(e.QJ.resolve({done:!0}),r.S&&this.console.warn("Overwriting requested queue item",e.id)),e.v2a=this.zqa(),e.b$b=this.zqa(function(){e.jwa=!0,r.S&&i.console.trace("Item requested",{id:e.id})}),e.id=this.Dzb++,e.jwa=!1,e.eZ=!1,e.item=void 0},d.prototype.l8=function(){this.Vf=void 0},d.prototype.bta=function(){var r=this,t=u.ai(s.default,this.console,"QueueIteratorInstance::"),a=new h(this,function(t){var i,n;return 0===r.count?o.AsyncIterator.sua():(i=r.$6a(t),n=r.Wg[0],i.then(function(t){return e=function(){a.fQ||(n===r.Wg[0]?r.QO():c.assert(!r.Wg.filter(function(t){return t.QJ.promise===i}).length,"Out of order acknowledgements are not supported"))},(t=t).done?t:{value:{value:t.value,YXa:e}};var e}))},t);return a},e.VL=a=d,i.Ve(t.EventEmitter,a),f=o.AsyncIterator,n.__extends(p,f),p.prototype.ti=function(){this.console.trace("disposed"),this.oN=!0,this.cd(),f.prototype.ti.call(this)},p.prototype.next=function(){return this.fQ||this.cQ(),f.prototype.next.call(this)},p.prototype.cancel=function(){return this.cd(),f.prototype.cancel.call(this)},p.prototype.cd=function(){this.parent.Hy("onRemoved",this.Odb),this.gma=!1},p.prototype.cQ=function(){this.gma||(this.gma=!0,this.parent.on("onRemoved",this.Odb))},h=p,e.mvb=h,e.ZEb=function(t){return o.map(t,l)}},function(t,e,i){var n;function r(t){this.uA=t,this.I4a=new n.nD}_esm(e),e.e5=void 0,n=i(8),Object.defineProperties(r.prototype,{V$a:{get(){var t;return null!=(t=this.NWb)?t:null==(t=this.parent)?void 0:t.V$a},configurable:!0},pZ:{get(){var t;return null!=(t=this.Z2b)?t:null==(t=this.parent)?void 0:t.pZ},configurable:!0},um:{get(){var t;return null!=(t=this.Gh)?t:null==(t=this.parent)?void 0:t.um},configurable:!0},$$a:{get(){var t;return null!=(t=this.Ke)?t:null==(t=this.track)||!t.equals(null==(t=this.parent)?void 0:t.track)||null==(t=this.parent)?void 0:t.Ke},configurable:!0},cab:{get(){var t;return null!=(t=this.Vcc)?t:null==(t=this.parent)?void 0:t.cab},configurable:!0},Fwa:{get(){var t;return null!=(t=this.Wcc)?t:null==(t=this.parent)?void 0:t.Fwa},configurable:!0},track:{get(){return this.rac},configurable:!0},tnb:{get(){return this.I4a.promise},configurable:!0},parent:{get(){var t;return null==(t=this.uA)?void 0:t.call(this)},configurable:!0}}),r.prototype.tb=function(){this.uA=void 0},r.prototype.Dib=function(t){this.NWb=t},r.prototype.gbc=function(t){this.Z2b=t},r.prototype.Sib=function(t){this.Gh=t,this.I4a.resolve()},r.prototype.T0=function(t){this.Ke=t},r.prototype.sbc=function(t){this.Vcc=t},r.prototype.Uib=function(t){this.Wcc=t},r.prototype.V0=function(t){this.rac=t},e.e5=r},function(t,e,i){var n;_esm(e),t=i(1016),n=i(442),i=i(1018),e.default={STARTING:i.aCa,BUFFERING:t.M0,REBUFFERING:t.M0,PLAYING:n.Vn,PAUSED:n.Vn}},function(t,e,i){var n,r,a,o,s;_esm(e),e.IP=e.jD=void 0,n=i(445),r=i(1028),a=i(1029),o=i(1030),s=i(161),Object.defineProperties(e,{jD:{enumerable:!0,get(){return s.jD}}}),e.IP=function(t,e){switch(t.xxa){case"manifold":return new n.Yia(t,e);case"stddev":return new a.KSa(t,e);case"ci":return new o.DHa(t,e);default:return new r.wSa(t,e)}}},function(t,e,i){var n,r,a,o;function s(t,e){this.gi=t,this.options=n.__assign({QHb:!0},e)}_esm(e),e.px=void 0,n=i(0),r=i(10),a=i(8),o=i(54),Object.defineProperties(s.prototype,{kw:{get(){return"trace-".concat(this.gi.source)},configurable:!0},re:{get(){return this.kw},configurable:!0},enabled:{get(){return r.S},configurable:!0}}),s.prototype.al=function(t){var e,i;if(t.cj===o.ke.iq||t.cj===o.ke.up)return e=a.g2a(this.gi.KZb),i=this.gi.VWb,t.cj===o.ke.iq&&this.options.QHb&&this.gi.clear(),t=e,t=Object.keys(i).length?n.__spreadArray(n.__spreadArray([],n.__read(e),!1),[i],!1):t},s.prototype.tb=function(){var t;null!=(t=this.gi)&&t.tb()},e.px=s},function(t,e){function i(){}_esm(e),e.sT=void 0,e.sT=(i.Iaa=function(t,n){var r;return r=0,function t(e){return((i=r++)>=n.length?function(){throw Error("The last delegate in the chain should not invoke next() nextDelegateIndex ".concat(i))}:n[i])(e,t);var i}(t)},i)},function(t,n,e){var r,a;_esm(n),n.fua=n.Uo=n.isEqual=n.kZ=void 0,r=e(8),a=e(252),n.kZ=function(t){return!!t.N},n.isEqual=function(t,e){var i=n.kZ(t);return i===n.kZ(e)&&(i?t.N===e.N:t.ba===e.ba)},n.Uo=function(t){return(n.kZ(t)?t:(t=t.ba).O[t.yd]).N},n.fua=function(t,e){var i;return t.U7?t.U7 instanceof r.M?null!=(t=a.NI(e,n.Uo(t.key),t.U7))&&t.offset.greaterThan(r.M.Ka)?t:{offset:r.M.Ka,X:null!=(i=null==t?void 0:t.X)?i:e.yd}:t.U7:{offset:r.M.Ka,X:e.yd}}},function(t,e){_esm(e),e.cx=void 0,(t=e.cx||(e.cx={}))[t.pEa=0]="up",t[t.lX=1]="down"},function(t,e){_esm(e),e.RT="LogblobBuilderFactorySymbol",e.Jia="LogblobBuilderCommonSymbol"},function(t,e){_esm(e),e.Otb="NativeLocalStorageSymbol",e.ZNa="NativeLocalStorageFactorySymbol",e.WKa="IDBFactorySymbol"},function(t,e,i){var n,r;function a(t){switch(t){case n.Y.HT:return"http";case n.Y.JT:return"connectiontimeout";case n.Y.VG:return"readtimeout";case n.Y.BKa:return"corruptcontent";case n.Y.qD:return"abort";case n.Y.KT:case n.Y.jia:return"unknown"}}_esm(e),e.eua=e.l7a=e.Sta=void 0,n=i(4),r=i(14),e.Sta=a,e.l7a=function(t,e){return t={errorcode:t+(e.errorCode||n.Z.mo)},e.Ba&&(t.errorsubcode=e.Ba),e.Of&&(t.errorextcode=e.Of),e.Mra&&(t.erroredgecode=e.Mra),e.Sb&&(t.errordetails=e.Sb),e.El&&(t.httperr=e.El),e.vca&&(t.aseneterr=e.vca),e.TE&&(t.errordata=e.TE),e.SZ&&(t.mediaerrormessage=e.SZ),(e=a(Number(e.Ba)))&&(t.nwerr=e),t},e.eua=function(){return{screensize:r.hx.width+"x"+r.hx.height,screenavailsize:r.hx.availWidth+"x"+r.hx.availHeight,clientsize:bt.innerWidth+"x"+bt.innerHeight,devicePixelRatio:r.YNa}}},function(t,e){_esm(e),e.PT="LicenseProviderSymbol"},function(t,n,e){var r,a;_esm(n),n.C0b=n.web=n.w5b=n.W5a=n.E5b=n.Gnb=n.Fnb=n.Az=n.cFa=n.Enb=n.i2=void 0,r=e(25),a=e(23),n.i2="$attributes",n.Enb="$children",n.cFa="$name",n.Az="$text",n.Fnb="$parent",n.Gnb="$sibling",n.E5b=/^\s*<\?xml.*\?>/i,n.W5a=function(t,e,i){for(var n=2;n<arguments.length;++n);for(n=1;(e=arguments[n++])&&(t=t[e]););return t},n.w5b=function(t,e){var i;return t?i=r.qk(t[n.Az]):void 0!==e&&(i=e),a.ZW(i),i},n.web=function(t,e){var i;return t?i=t[n.Az]:void 0!==e&&(i=e),a.X1a(i),i},n.C0b=function(t,e){var i={};return i[n.i2]=t,i[n.Az]=e,i}},function(t,e){},function(t,e){_esm(e),e.fM=void 0,e.fM=function(){return""}},function(t,e){_esm(e),e.Hha=e.BIa=void 0,e.BIa=function(){this.P=0,this.J=1,this.Lrb=2,this.Pf=function(){}},e.Hha="DownloadTrackConstructorFactorySymbol"},function(t,e){function i(){}_esm(e),e.Ac=void 0,(e.Ac=i).We={oOa:"mr1",nOa:"mr2",pOa:"mr3",fU:"mr4",Xtb:"mr5",jH:"mr6"},i.Uc={UNSENT:0,OPENED:1,bA:2,aA:3,DONE:5,eM:6,aT:7,name:"UNSENT OPENED SENT RECEIVING DONE FAILED ABORTED".split(" ")},i.i3={NO_ERROR:-1,xqb:0,WHa:1,Jqb:2,Bqb:3,Apb:4,eHa:5,cHa:6,Bpb:7,Cpb:8,Dpb:9,xpb:10,zpb:11,dHa:12,ypb:13,wpb:14,Rrb:15,zKa:16,yKa:17,gia:18,iia:19,hia:20,d4:21,Trb:22,e4:23,AKa:24,Srb:25,Eqb:26,yqb:27,Hvb:28,oqb:29,pqb:30,qqb:31,rqb:32,sqb:33,tqb:34,uqb:35,vqb:36,wqb:37,zqb:38,Aqb:39,Cqb:40,Dqb:41,Fqb:42,Gqb:43,Hqb:44,Iqb:45,Kqb:46,Lqb:47,Gvb:48,TIMEOUT:49,vKa:50,wKa:51,Qrb:52,name:"DNS_ERROR DNS_TIMEOUT DNS_QUERY_REFUSED DNS_NOT_FOUND CONNECTION_REFUSED CONNECTION_TIMEOUT CONNECTION_CLOSED CONNECTION_RESET CONNECTION_RESET_ON_CONNECT CONNECTION_RESET_WHILE_RECEIVING CONNECTION_NET_UNREACHABLE CONNECTION_NO_ROUTE_TO_HOST CONNECTION_NETWORK_DOWN CONNECTION_NO_ADDRESS CONNECTION_ERROR HTTP_CONNECTION_ERROR HTTP_CONNECTION_TIMEOUT HTTP_CONNECTION_STALL HTTP_PROTOCOL_ERROR HTTP_RESPONSE_4XX HTTP_RESPONSE_420 HTTP_RESPONSE_5XX HTTP_TOO_MANY_REDIRECTS HTTP_TRANSACTION_TIMEOUT HTTP_MESSAGE_LENGTH_ERROR HTTP_HEADER_LENGTH_ERROR DNS_NOT_SUPPORTED DNS_EXPIRED SSL_ERROR DNS_BAD_FAMILY DNS_BAD_FLAGS DNS_BAD_HINTS DNS_BAD_NAME DNS_BAD_STRING DNS_CANCELLED DNS_CHANNEL_DESTROYED DNS_CONNECTION_REFUSED DNS_EOF DNS_FILE DNS_FORMAT_ERROR DNS_NOT_IMPLEMENTED DNS_NOT_INITIALIZED DNS_NO_DATA DNS_NO_MEMORY DNS_NO_NAME DNS_QUERY_MALFORMED DNS_RESPONSE_MALFORMED DNS_SERVER_FAILURE SOCKET_ERROR TIMEOUT HTTPS_CONNECTION_ERROR HTTPS_CONNECTION_TIMEOUT HTTPS_CONNECTION_REDIRECT_TO_HTTP".split(" ")},i.Rc={D0:{Vnb:!0,sU:!1,Jtb:!0}}},function(t,r,e){var a,o,s,u,c,h,i,f,l;_esm(r),r.Wk=void 0,a=e(17),o=e(20),t=e(4),s=e(23),u=e(9),c=e(509),h=e(14),i=e(34),f=e(47),(l=u.Fa.get(i.nj)).register(t.Z.nia,function(e){var t,i,n=u.Fa.get(f.Yq);s.Ua(o.config),s.Ua(h.yD&&h.yD.getDeviceId||h.XNa||n.yP),t=u.Fa.get(c.sIa),i=u.dk("Device"),l.Se("devs"),t.create({deviceId:o.config.deviceId,yP:n.yP,A2a:"deviceid",Fl:o.config.Fl,jq:n.jq,gX:n.gX,userAgent:h.hH,Zwa:o.config.Zwa,pta:o.config.pta,hrc:o.config.uB?"mslstoretest":"mslstore",LS:o.config.LS}).then(function(t){r.Wk=t,bt._cad_global.device=r.Wk,i.info("Esn source: "+r.Wk.s9),l.Se("devdone"),e(a.Vg)}).catch(function(t){t.ha=void 0,e(t)})})},function(t){var e=function(){return this}();try{e=e||new Function("return this")()}catch(t){"object"==typeof bt&&(e=bt)}t.exports=e},function(t,e,i){e=i(600),t.exports=Function.prototype.bind||e},function(t){t.exports=function(){if("function"!=typeof Promise)throw new TypeError("`Promise.prototype.finally` requires a global `Promise` be available.")}},function(t,e,i){var a,o,n,s;e=i(43),a=e("%TypeError%"),o=e("%SyntaxError%"),n=i(108),s={"Property Descriptor":function(t){var e,i={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(e in t)if(n(t,e)&&!i[e])return!1;if(i=n(t,"[[Value]]"),t=n(t,"[[Get]]")||n(t,"[[Set]]"),i&&t)throw new a("Property Descriptors may not be both accessor and data descriptors");return!0},"Match Record":i(633)},t.exports=function(t,e,i,n){var r=s[e];if("function"!=typeof r)throw new o("unknown record type: "+e);if("Object"!==t(n)||!r(n))throw new a(i+" must be a "+e)}},function(t,e){var i;function n(){}_esm(e),e.XG=void 0,i=/^\S+$/,n.prototype.SI=function(t){return void 0!==t},n.prototype.hh=function(t){return null!=t},n.prototype.$V=function(t){return n.LYa(t)},n.prototype.una=function(t){return!(!t||!n.LYa(t))},n.prototype.iE=function(t){return Array.isArray(t)},n.prototype.MYa=function(t){return!(!t||t.constructor!=Uint8Array)},n.prototype.vo=function(t,e,i){return n.VXa(t,e,i)},n.prototype.tna=function(t){return n.tna(t)},n.prototype.coa=function(t,e,i){return n.v7(t,e,i)&&0==t%1},n.prototype.aW=function(t,e,i){return n.v7(t,e||0,i)},n.prototype.PV=function(t){return n.v7(t,1)},n.prototype.pCb=function(t){return n.v7(t,0,255)},n.prototype.qCb=function(t){return t===+t&&(0===t||t!==(0|t))&&!0},n.prototype.NYa=function(t){return!(!t||!i.test(t))},n.prototype.$u=function(t){return n.WXa(t)},n.prototype.wo=function(t){return!(!n.WXa(t)||!t)},n.prototype.g7=function(t){return!0===t||!1===t},n.prototype.i7=function(t){return"function"==typeof t},n.WXa=function(t){return"string"==typeof t},n.VXa=function(t,e,i){return"number"==typeof t&&!isNaN(t)&&isFinite(t)&&(void 0===e||e<=t)&&(void 0===i||t<=i)},n.tna=function(t){return"number"==typeof t&&isNaN(t)},n.v7=function(t,e,i){return n.VXa(t,e,i)&&0==t%1},n.LYa=function(t){return"object"==typeof t},e.XG=new n},function(t,e,i){var n,r,a,o,s,u;_esm(e),e.mc=void 0,t=i(1),n=i(80),r=i(668),a=i(217),o=i(694),s=i(701),u=i(705),i=i(1407),e.mc=new t.M2({lL:!0}),u.tab(e.mc),e.mc.load(r.platform),e.mc.load(o.config),a.$O.load(s.l3a),e.mc.load(i.RYa),e.mc.load(i.profile),e.mc.bind(n.FLa).Jm(e.mc)},function(t,e,i){var n;function r(t){this.Lc=t}_esm(e),n=i(214),r.prototype.Iy=function(t){return this.Lc.Iy=t,new n.cha(this.Lc)},e.E2=r},function(t,e,i){var n;function r(t){this.Lc=t}_esm(e),n=i(213),i(330),r.prototype.when=function(t){return this.Lc.LI=t,new n.E2(this.Lc)},r.prototype.d2=function(){return this.Lc.LI=function(t){return null!==t.target&&!t.target.Zva()&&!t.target.kwa()},new n.E2(this.Lc)},e.cha=r},function(t,e){_esm(e),e.Lja="PlatformEmeSymbol"},function(t,e){_esm(e),e.Gka="StringUtilsSymbol"},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,d,p,b,g,m,v,y;_esm(e),e.$O=e.k3a=void 0,t=i(1),n=i(124),r=i(333),a=i(218),o=i(219),s=i(679),u=i(681),c=i(98),h=i(144),f=i(682),l=i(173),d=i(683),p=i(220),b=i(684),g=i(222),m=i(688),v=i(342),y=i(692),e.k3a=new t.Ad(function(t){t(r.FIa).to(a.EIa).la(),t(o.pha).to(s.kHa).la(),t(n.f3).E1(u.Pfb),t(c.Vz).yG(function(t){return e.$O.parent=t.zb,e.$O.get(c.Vz)}),t(h.YT).Ue(function(){return function(){return new f.xNa}}),t(l.K2).to(d.lHa).la(),t(p.Nha).to(b.iJa).la(),t(g.Iha).to(m.KIa).la(),t(v.uNa).to(y.tNa).la()}),e.$O=new t.M2({lL:!0})},function(t,e,i){var n;function r(){}function a(t){t?(this.active=!1,this.Ssa(t)):this.active=!0}_esm(e),e.EIa=e.e3=void 0,t=i(0),i=i(1),a.prototype.Ssa=function(t){this.Re=t.keySessionData?t.keySessionData.map(function(t){return{id:t.id,VJ:t.licenseContextId,yZ:t.licenseId}}):[],this.ga=t.xid,this.L=t.movieId},a.prototype.Lw=function(){return JSON.parse(JSON.stringify({keySessionData:this.Re?this.Re.map(function(t){return{id:t.id,licenseContextId:t.VJ,licenseId:t.yZ}}):[],xid:this.ga,movieId:this.L}))},e.e3=a,r.prototype.create=function(){return new a},r.prototype.load=function(t){return new a(t)},n=r,n=t.__decorate([i.$()],n),e.EIa=n},function(t,e){_esm(e),e.pha="CachedDrmDataSymbol"},function(t,e){_esm(e),e.Nha="EmeApiFactorySymbol"},function(t,e,i){var n,r,o,a,s,u,c,h,f,l,d;function p(t,e,i,n,r,a){this.d_=t,this.is=e,this.qc=i,this.Ii=n,this.Yk=r,this.hi=a,o.yq(this,"nav")}_esm(e),e.lx=void 0,t=i(0),r=i(1),o=i(55),a=i(4),s=i(38),u=i(27),c=i(97),h=i(30),f=i(31),l=i(68),i=i(76),p.prototype.BB=function(){if(this.Bb)return this.Bb.sessionId},p.prototype.T9b=function(t,e){return this.d_.requestMediaKeySystemAccess(t,e)},p.prototype.createMediaKeys=function(t){return t.createMediaKeys()},p.prototype.createSession=function(t,e){this.Bb=t.createSession(e)},p.prototype.B8=function(){return Promise.reject(new c.Mh(a.Z.h3))},p.prototype.pZb=function(){return!!this.Bb},p.prototype.setServerCertificate=function(t,e){return this.is.i7(t.setServerCertificate)&&e?t.setServerCertificate(e):Promise.resolve()},p.prototype.generateRequest=function(t,e){return this.Bb?this.Bb.generateRequest(t,e[0]):Promise.reject(new c.Mh(a.Z.h3,a.Y.cM,void 0,"Unable to generate a license request, key session is not valid"))},p.prototype.update=function(t){return this.Bb?this.Bb.update(t[0]):Promise.reject(new c.Mh(a.Z.$Ia,a.Y.cM,void 0,"Unable to update the EME with a response, key session is not valid"))},p.prototype.load=function(t){return this.Bb?this.Bb.load(t):Promise.reject(new c.Mh(a.Z.mrb,a.Y.cM,void 0,"Unable to load a key session, key session is not valid"))},p.prototype.close=function(){var t;return this.Ypa=void 0,this.Bb?(t=Promise.resolve(),this.BB()&&(t=this.Bb.close()),this.Bb=void 0,t):Promise.reject(new c.Mh(a.Z.SIa,a.Y.cM,void 0,"Unable to close a key session, key session is not valid"))},p.prototype.remove=function(){return this.Bb?this.Bb.remove():Promise.reject(new c.Mh(a.Z.orb,a.Y.cM,void 0,"Unable to remove a key session, key session is not valid"))},p.prototype.KK=function(){return Promise.reject(new c.Mh(a.Z.Lha,void 0,"Unable to renew a key session, not supported"))},p.prototype.nYa=function(t){if(!this.Bb)throw ReferenceError("Unable to add message handler, key session is not valid");this.Bb.addEventListener(n.eJa,t)},p.prototype.jYa=function(t){if(!this.Bb)throw ReferenceError("Unable to add key status handler, key session is not valid");this.Bb.addEventListener(n.dJa,t)},p.prototype.gYa=function(t){if(!this.Bb)throw ReferenceError("Unable to add error handler, key session is not valid");this.Bb.addEventListener(n.cJa,t)},p.prototype.QCb=function(t){var i=this;if(!this.Bb)throw ReferenceError("Unable to add closed unexpectedly handler, key session is not valid");this.Ypa=t,this.Bb.closed.then(function(t){var e;return null==(e=i.Ypa)?void 0:e.call(i,t)})},p.prototype.Qgb=function(t){if(!this.Bb)throw ReferenceError("Unable to remove message handler, key session is not valid");this.Bb.removeEventListener(n.eJa,t)},p.prototype.Ngb=function(t){if(!this.Bb)throw ReferenceError("Unable to remove key status handler, key session is not valid");this.Bb.removeEventListener(n.dJa,t)},p.prototype.Lgb=function(t){if(!this.Bb)throw ReferenceError("Unable to remove error handler, key session is not valid");this.Bb.removeEventListener(n.cJa,t)},(d=n=p).eJa="message",d.dJa="keystatuseschange",d.cJa="error",d=n=t.__decorate([r.$(),t.__param(0,r.l(s.tM)),t.__param(1,r.l(u.Tg)),t.__param(2,r.l(f.Ji)),t.__param(3,r.l(h.ki)),t.__param(4,r.l(l.Eu)),t.__param(5,r.l(i.Pu))],d),e.lx=d},function(t,e){_esm(e),e.Iha="DrmTraitsFactorySymbol"},function(t,e){var i;_esm(e),e.Ova=e.$w=void 0,(i=e.$w||(e.$w={})).wmb="usable",i.Mr="expired",i.released="released",i.aeb="output-restricted",i.c5b="output-downscaled",i.Occ="status-pending",i.qYb="internal-error",e.Ova=function(t){return!!t&&!!t.keyStatuses}},function(t,e){_esm(e),e.Rka="UserAgentDataPlatformVersionProviderSymbol"},function(t,e){_esm(e),e.i5="TimeoutMonitorFactorySymbol"},function(t,e){_esm(e),e.Fk="_ANY_",e.tJa="EnricherSymbol"},function(t,e,i){var r,n,a;function o(t,e,i,n){this.Ga=t,this.b8=e,this.pp=i,this.aq=void 0===n?"General":n,this.$pa={}}_esm(e),e.kM=void 0,r=i(7),n=i(361),a=i(734),o.prototype.dYa=function(t,e){this.$pa[t]=e},o.prototype.fatal=function(t,e){for(var i=[],n=1;n<arguments.length;++n)i[n-1]=arguments[n];this.fE(r.Ck.zrb,t,this.NS(t,i))},o.prototype.error=function(t,e){for(var i=[],n=1;n<arguments.length;++n)i[n-1]=arguments[n];this.fE(r.Ck.Jf,t,this.NS(t,i))},o.prototype.warn=function(t,e){for(var i=[],n=1;n<arguments.length;++n)i[n-1]=arguments[n];this.fE(r.Ck.Wka,t,this.NS(t,i))},o.prototype.info=function(t,e){for(var i=[],n=1;n<arguments.length;++n)i[n-1]=arguments[n];this.fE(r.Ck.lia,t,this.NS(t,i))},o.prototype.trace=function(t,e){for(var i=[],n=1;n<arguments.length;++n)i[n-1]=arguments[n];this.fE(r.Ck.$Sa,t,this.NS(t,i))},o.prototype.debug=function(t,e){for(var i=1;i<arguments.length;++i);},o.prototype.log=function(t,e){for(var i=[],n=1;n<arguments.length;++n)i[n-1]=arguments[n];this.debug.apply(this,[t].concat(J(i)))},o.prototype.write=function(t,e,i){for(var n=[],r=2;r<arguments.length;++r)n[r-2]=arguments[r];this.fE(t,e,this.NS(e,n))},o.prototype.toString=function(){return JSON.stringify(this)},o.prototype.toJSON=function(){return{category:this.aq}},o.prototype.z8=function(t){return new o(this.Ga,this.b8,this.pp,t)},o.prototype.fE=function(t,e,i){for(t=new n.Hia(t,this.aq,this.Ga.Tb(),e,i),i=(e=rt(this.pp.pp)).next();!i.done;i=e.next())(i=i.value)(t)},o.prototype.JSb=function(t){return 0<Object.keys(this.$pa).length?[this.$pa].concat(J(t)):t},o.prototype.NS=function(t,e){return t&&"null"!==t&&"undefined"!==t||e.push({StackTrace:null!=(t=Error("Empty message").stack)?t:"nostack"}),a.j_a(this.b8,this.JSb(e))},e.kM=o},function(t,e){_esm(e),e.wka="SegmentManagerFactorySymbol"},function(t,e){_esm(e),e.Eja="PboPlaydataFactorySymbol"},function(t){t.exports=function(t,e){return Object.prototype.hasOwnProperty.call(e,t)}},function(t,e,i){var a,o,r,s;function u(t,e,i){for(var n=i.next();!n.done;){if((e=t["@@transducer/step"](e,n.value))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}n=i.next()}return t["@@transducer/result"](e)}function c(t,e,i,n){return t["@@transducer/result"](i[n](r(t["@@transducer/step"],t),e))}a=i(759),o=i(761),r=i(762),s="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",t.exports=function(t,e,i){if("function"==typeof t&&(t=o(t)),a(i)){for(var n=0,r=i.length;n<r;){if((e=t["@@transducer/step"](e,i[n]))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}n+=1}return t["@@transducer/result"](e)}if("function"==typeof i["fantasy-land/reduce"])return c(t,e,i,"fantasy-land/reduce");if(null!=i[s])return u(t,e,i[s]());if("function"==typeof i.next)return u(t,e,i);if("function"==typeof i.reduce)return c(t,e,i,"reduce");throw new TypeError("reduce: list must be array or iterable")}},function(t){t.exports=function(t,h){switch(t){case 0:return function(){return h.apply(this,arguments)};case 1:return function(t){return h.apply(this,arguments)};case 2:return function(t,e){return h.apply(this,arguments)};case 3:return function(t,e,i){return h.apply(this,arguments)};case 4:return function(t,e,i,n){return h.apply(this,arguments)};case 5:return function(t,e,i,n,r){return h.apply(this,arguments)};case 6:return function(t,e,i,n,r,a){return h.apply(this,arguments)};case 7:return function(t,e,i,n,r,a,o){return h.apply(this,arguments)};case 8:return function(t,e,i,n,r,a,o,s){return h.apply(this,arguments)};case 9:return function(t,e,i,n,r,a,o,s,u){return h.apply(this,arguments)};case 10:return function(t,e,i,n,r,a,o,s,u,c){return h.apply(this,arguments)};default:throw Error("First argument to _arity must be a non-negative integer no greater than ten")}}},function(t,e){_esm(e),e.Uja="PlaybackSegmentDataFactorySymbol"},function(t,e){_esm(e),e.Xia="ManifestParserFactorySymbol"},function(t,e){_esm(e),e.fia="HLSConfigSymbol"},function(D,t,e){var h,r,s,o,i,n,a,u,c,f,L,B,U,F,q,H,K,l,G,V,Y,J,d,p,z,W,Q,X,Z,$,tt,et,it,nt,b;function g(t,e,i,n,r){o.call(this,t,e,i,n,r)}function m(t,e,i,n,r){o.call(this,t,e,i,n,r)}function v(t,e,i,n,r){o.call(this,t,e,i,n,r)}function y(t,e,i,n,r){o.call(this,t,e,i,n,r),this.LCa=t.config.LCa,this.te=this.sizes=void 0}function w(t,e,i,n,r){o.call(this,t,e,i,n,r)}function rt(){for(var t=new DataView(this),e="",i=0;i<this.byteLength;i++)e+=("00"+t.getUint8(i).toString(16)).slice(-2);return e}function A(t,e,i,n,r){o.call(this,t,e,i,n,r)}function _(t,e,i,n,r){o.call(this,t,e,i,n,r)}function E(t,e,i,n,r){o.call(this,t,e,i,n,r)}function k(t,e,i,n,r){o.call(this,t,e,i,n,r)}function S(t,e,i,n,r){o.call(this,t,e,i,n,r)}function at(a){function t(t,e,i,n,r){o.call(this,t,e,i,n,r),this.Tcb=a}return t.qd=!1,(t.prototype=new o).constructor=t,Object.defineProperties(t.prototype,{ZHa:{get(){return this.Tcb}}}),t.prototype.parse=function(){return this.R.console.trace("renaming '"+this.type+"' to draft type '"+this.Tcb+"'"),this.R.offset=this.startOffset+4,this.Xb.Bnb(this.ZHa),this.type=this.ZHa,!0},t}function T(t,e,i,n,r){o.call(this,t,e,i,n,r)}function I(t,e,i,n,r){o.call(this,t,e,i,n,r)}function O(t,e,i,n,r){o.call(this,t,e,i,n,r)}function x(t,e,i,n,r){o.call(this,t,e,i,n,r)}function R(t,e,i,n,r){o.call(this,t,e,i,n,r)}function P(t,e,i,n,r){o.call(this,t,e,i,n,r)}function C(t,e,i,n,r){o.call(this,t,e,i,n,r)}function j(t,e,i,n,r){o.call(this,t,e,i,n,r)}function N(t,e,i,n,r){o.call(this,t,e,i,n,r)}function M(t,e){t.forEach(function(t){e[t.lf]=t})}h=e(102).assert,t=e(103),r=e(149).M,s=e(384),e(150),e(87),e(87),e(87),o=e(24).dg,i=e(785).default,n=e(786).default,a=e(787).default,u=e(788).default,c=e(789).default,f=e(790).default,L=e(791).default,B=e(792).default,U=e(793).default,e(237),e(180),F=e(385).Qnb,q=e(385).erb,H=e(794).default,K=e(795).default,l=e(88).default,G=e(88).lob,V=e(88).mob,Y=e(88).nob,J=e(88).oob,d=e(796).default,p=e(797).default,z=e(798).default,W=e(88).Urb,Q=e(88).Nrb,X=e(88).kob,Z=e(799).default,$=e(800).default,tt=e(801).default,et=e(386).default,it=e(387).default,e(151),e(240),e(241),e(239),nt=e(802).default,b=e(803).jwb,e=e(819).default,g.qd=!0,(g.prototype=new o).constructor=g,m.qd=!0,(m.prototype=new o).constructor=m,v.qd=!1,v.prototype=new o,y.qd=!((v.prototype.constructor=v).prototype.parse=function(t){var e;return this.Eh(),1===this.version?(this.R.Tl(),this.R.Tl(),this.aa=this.R.ic(),this.duration=this.R.Tl()):(this.R.ic(),this.R.ic(),this.aa=this.R.ic(),this.duration=this.R.ic()),e=32767&this.R.mh(),this.language=String.fromCharCode(96+(e>>>10),96+(e>>>5&31),96+(31&e)),t&&t.rf&&(t.rf.aa=this.aa,t.rf.duration=this.duration),!0}),((y.prototype=new o).constructor=y).prototype.AAb=function(){this.Eh(),this.R.ic(),this.aa=this.R.ic(),0===this.version?(this.f3a=this.R.ic(),this.H4a=this.R.ic()):(this.f3a=this.R.Tl(),this.H4a=this.R.Tl()),this.i$b=this.R.mh(),this.Ggb=this.R.mh()},y.prototype.vxb=function(t,e){var i,n;Va=this.aa,t=t&&t.aa||Va,i=t/Va,Va=this.R.Qda(e,12,!1),n=1==i?this.R.Qda(e,12,!1):s.from(Uint32Array,{length:e},function(){var t=Math.round(this.R.ic()*i);return this.R.offset+=8,t},this),this.aCb(e,n,Va,t)},y.prototype.aCb=function(t,e,i,n){if(this.LCa){n=this.LCa*n/1e3;for(var r=0,a=1;a<t;a++)Math.abs(e[r]-n)>Math.abs(e[r]+e[a]-n)?(e[r]+=e[a],i[r]+=i[a]):++r!==a&&(e[r]=e[a],i[r]=i[a]);++r,e=new Uint32Array(e.buffer.slice(0,4*r)),i=new Uint32Array(i.buffer.slice(0,4*r))}this.sizes=i,this.te=e},w.qd=!(y.prototype.parse=function(t){var e,i,n;return this.AAb(),this.oa=t.oa,Xa=this.aa,e=this.oa&&this.oa.aa||Xa,i=this.Ggb,n=this.startOffset+this.length+this.H4a,Xa=new r(this.f3a,Xa).Rg(e).fb,this.da={aa:e,Yn:Xa,offset:n},this.vxb(this.oa,i),this.da.te=this.te,this.da.sizes=this.sizes,t.iz=this,!0}),w.prototype=new o,A.qd=!((w.prototype.constructor=w).prototype.parse=function(){var t;this.yz=[],this.Y5b=[],t=(this.length-11)/2,this.R.Gd(),this.R.Gd(),this.R.Gd();for(var e=0;e<t;e++)this.yz.push(this.R.Gd()),this.Y5b.push(this.R.Gd());return!0}),A.prototype=new o,_.qd=!((A.prototype.constructor=A).prototype.parse=function(t){var e;return this.Eh(),this.R.offset+=1,0==this.version?this.R.offset+=1:(e=this.R.Gd(),this.BMb=e>>4,this.HMb=15&e,t&&t.rf&&(t.rf.Coc=this.BMb,t.rf.Foc=this.HMb)),this.n2a=this.R.Gd(),this.m2a=this.R.Gd(),this.uwa=this.R.offset,this.vq=this.R.Sda(16),this.vq.toString=rt,t&&t.rf&&(t.rf.Doc=this.n2a,t.rf.DMb=this.m2a,t.rf.Eoc=this.vq),1==this.n2a&&0==this.m2a&&(this.AMb=this.R.Gd(),this.zMb=this.R.Sda(this.AMb),t&&t.rf&&(t.rf.CMb=this.zMb)),!0}),_.prototype=new o,E.qd=!((_.prototype.constructor=_).prototype.parse=function(){return this.Eh(),this.Jr=this.R.mh(),this.u1b=this.R.Qda(this.Jr,void 0,!0),!0}),((E.prototype=new o).constructor=E).prototype.parse=function(t){var e,i,n,r,a,o=t.iz;if(h(o),t=t.oa,e=o.aa,o=o.Ggb,h(t),h(e),h(o),this.Eh(),h(this.version<2),this.Jr=this.R.mh(),this.oR=new Uint16Array(o+1),i=t.Q7a(e),n=i/e,r=t.Rg(i).fb,0===this.version){for(this.OR=new Uint16Array,this.Ai=new Uint32Array,t=e=0;t<=o;++t)if(this.oR[t]=e,t<this.Jr&&0!==(a=this.R.Gd()))for(i=0;i<a;++i,++e)this.OR[e]=Math.floor((this.R.ic()+1)*n)/r,this.Ai[e]=this.R.ic()}else if(1===this.version)for(i=this.R.o8b(this.Jr),this.R.offset+=4,this.Ai=this.R.Qda(this.Jr,10,!1),this.R.offset-=8,this.OR=s.from(Uint16Array,{length:this.Jr},function(){var t=Math.floor((this.R.ic()+1)*n)/r;return this.R.offset+=6,t},this),e=t=0;t<=o;++t){for(;e<i.length&&i[e]<t;)++e;this.oR[t]=e}return this.Qk={oR:this.oR,OR:this.OR,Ai:this.Ai},!0},k.qd=!0,(k.prototype=Object.create(g.prototype)).constructor=k,S.qd=!0,S.prototype=Object.create(g.prototype),T.qd=!((S.prototype.constructor=S).prototype.dJ=function(){var t=this.Nq("tfhd");return t&&(this.jt=t.LZa?t.jt:this.parent.startOffset),!0}),T.prototype=new o,I.qd=!((T.prototype.constructor=T).prototype.parse=function(){var t,e=this.R.offset;if(this.Eh(),1===this.version){this.R.console.trace("translating vpcC box to draft equivalent"),this.R.offset+=2;for(var i=this.R.offset,n=this.R.Gd(),r=this.R.Gd(),a=this.R.Gd(),o=this.R.Gd(),s=this.R.mh(),u=[],c=0;c<s;++c)u=this.R.Gd();switch(c=(240&n)>>>4,t=(14&n)>>>1,n&=1,a=16===a?1:0,r!=o&&this.R.console.warn("VP9: Has the VP9 spec for vpcC changed? colourPrimaries "+r+" and matrixCoefficients "+o+" should be the same value!"),o=2,r){case 1:o=2;break;case 6:o=1;break;case 9:o=5;break;default:this.R.console.warn("VP9: Unknown colourPrimaries "+r+"! Falling back to default color space VP9_COLOR_SPACE_BT709_6 (2)")}this.version=0,this.Xb.oga(this.version,e),this.Xb.oga(c<<4|o,i++),this.Xb.oga(t<<4|a<<1|n,i++),s+=2,u.push(0,0),this.Xb.yhc(s),i+=2,u.forEach(function(t){this.Xb.oga(t,i++)})}return!0}),((I.prototype=new o).constructor=I).lf="tfhd",Object.defineProperties(I.prototype,{LZa:{get(){return 1&this.flags}},M$b:{get(){return 2&this.flags}},EMb:{get(){return 8&this.flags}},GMb:{get(){return 16&this.flags}},o2a:{get(){return 32&this.flags}}}),O.qd=!(I.prototype.parse=function(t){return this.Eh(),this.DS=this.R.ic(),this.jt=this.LZa?this.R.Tl():void 0,this.Ohb=this.M$b?this.R.ic():void 0,this.ay=this.EMb?this.R.ic():void 0,this.mB=this.GMb?this.R.ic():void 0,this.lB=this.o2a?this.R.ic():void 0,t&&t.ya&&(t.ya.DS=this.DS,t.ya.jt=this.jt,t.ya.Ohb=this.Ohb,t.ya.ay=this.ay,t.ya.mB=this.mB,t.ya.lB=this.o2a?this.lB:void 0),!0}),((O.prototype=new o).constructor=O).prototype.parse=function(t){return this.Eh(),this.hO=1===this.version?this.R.Tl():this.R.ic(),t&&t.ya&&(t.ya.hO=this.hO),!0},x.qd=!(O.prototype.Ha=function(t){var e=this.startOffset+12;this.hO+=t,1===this.version?this.Xb.zhc(this.hO,e):this.Xb.Sw(this.hO,e)}),(x.prototype=Object.create(o.prototype)).constructor=x,Object.defineProperties(x.prototype,{wI:{get(){return 1&this.flags}}}),x.prototype.parse=function(t){return this.Eh(),this.wI&&this.R.yC(),this.wI&&this.R.ic(),this.FMb=this.R.Gd(),this.Zd=this.R.ic(),this.OXb=this.R.Rda(this.Zd),t&&t.ya&&(t.ya.N$b=this.OXb),!0},R.qd=!(x.prototype.Ha=function(t,e){if(t&&0===this.FMb){if(t=e?this.Zd-t:t,this.Xb.offset=this.startOffset+13+(this.wI?8:0),this.Zd-=t,this.Xb.Sw(this.Zd),this.BBa=0,e)this.Xb.offset+=this.Zd;else{for(e=0;e<t;++e)this.BBa+=this.Xb.Gd();this.Xb.offset-=t}this.Sn(t,this.R.offset)}return!0}),(R.prototype=Object.create(o.prototype)).constructor=R,Object.defineProperties(R.prototype,{wI:{get(){return 1&this.flags}}}),R.prototype.parse=function(t){var e,i,n,r;if(this.Eh(),this.wI&&this.R.yC(),this.wI&&this.R.ic(),this.Jr=this.R.ic(),h(1===this.Jr,"Expected a single entry in Sample Auxiliary Information Offsets box"),this.Ho=0===this.version?this.R.Uda():this.R.v8b(),this.R.offset=this.Ho,t&&t.ya&&t.rf){e=t.rf.DMb,i=t.ya.N$b,h(0<e||void 0!==t.rf.CMb,"Expected per sample or constant IV"),h(0<(i||[]).length,"Expected saix box parsing to find sample info sizes"),t.ya.XK=[];for(var a=0;a<i.length;a++){for(var o=e?this.R.Sda(e):void 0,s=[],u=this.R.mh(),c=0;c<u;c++)n=this.R.mh(),r=this.R.ic(),s.push({aGb:n,bGb:r});t.ya.XK.push({wDa:s,pia:o})}}return!0},P.qd=!(R.prototype.Ha=function(t,e){return this.Ho+=t,this.Xb.offset=this.startOffset+16+(this.wI?8:0)+(0===this.version?0:4),this.Xb.aFa(e,this.Ho),!0}),(P.prototype=Object.create(o.prototype)).constructor=P,Object.defineProperties(P.prototype,{keb:{get(){return 1&this.flags}},Omb:{get(){return 2&this.flags}}}),P.prototype.parse=function(t){var e,i,n;if(this.Eh(),e=0,this.keb&&(e=this.JZb=255&this.R.ic(),this.R.Rda(16)),t&&t.ya){if(t.ya.XK)return;t.ya.nl||(t.ya.nl=[])}if(0!==e&&8!==e&&16!==e)return!0;if(this.Zd=this.R.ic(),t&&t.ya)for(var r=0;r<this.Zd;r++)if(t.ya.nl[r].pia=0<e?this.R.Sda(e):void 0,this.Omb){for(var a=[],o=this.R.mh(),s=0;s<o;s++)i=this.R.mh(),n=this.R.ic(),a.push({aGb:i,bGb:n});t.ya.nl[r].wDa=a}return!0},C.qd=!(P.prototype.Ha=function(t,e){var i,n=e?this.Zd-t:t;if(this.Xb.offset=this.startOffset+28+(this.keb?20:0),this.Zd-=n,this.Xb.Sw(this.Zd),t=this.Xb.offset,this.Omb)for(n=e?this.Zd:n;0<n;--n)this.Xb.offset+=8,i=this.Xb.mh(),this.Xb.offset+=6*i;else this.Xb.offset+=8*(e?this.Zd:n);e?this.Sn(this.length-(this.R.offset-this.startOffset),this.R.offset):this.Sn(this.R.offset-t,t)}),((C.prototype=Object.create(o.prototype)).constructor=C).prototype.parse=function(t){if(this.Eh(),t&&t.ya){void 0===t.ya.nl&&(t.ya.nl=[]);for(var e=0;e<this.length-12;e++)t.ya.nl[e].esc=this.R.Gd()}return!0},j.qd=!(C.prototype.Ha=function(t,e,i){return i?this.Sn(e-t,this.startOffset+12+t):this.Sn(t,this.startOffset+12),!0}),((j.prototype=Object.create(o.prototype)).constructor=j).prototype.parse=function(){this.Eh(),this.R.yC(),1===this.version&&this.R.ic(),this.Jr=this.R.ic(),this.G0=[];for(var t=0;t<this.Jr;++t)for(var e=this.R.ic(),i=this.R.ic(),n=0;n<e;++n)this.G0.push(i);return!0},N.qd=!(j.prototype.Ha=function(t,e){return this.G0=e?this.G0.slice(0,t):this.G0.slice(t),t=this.G0.reduce(function(t,e){return 0!==t.length&&t[t.length-1].group===e||t.push({group:e,count:0}),++t[t.length-1].count,t},[]),this.Xb.offset=this.startOffset+16+(1===this.version?4:0),this.Xb.Sw(t.length),t.forEach(function(t){this.Xb.Sw(t.count),this.Xb.Sw(t.group)}.bind(this)),this.Jr>t.length&&this.Sn(8*(this.Jr-t.length)),this.Jr=t.length,!0}),M([p,z,f,L,e,B,W,Q,X,i,u,et,it,c,U,n,a,nt,b],(l={oe:{moov:m,trak:g,mdia:g,mdhd:v,minf:g,encv:l,schi:g,sidx:y,sinf:g,stbl:g,tenc:A,mvex:g,moof:k,traf:S,tfhd:I,trun:b,sbgp:j,sdtp:C,saiz:x,saio:R,tfdt:O,mdat:(N.prototype=Object.create(o.prototype)).constructor=N,vmaf:w},Rec:{vpcC:T,SmDm:at("smdm"),CoLL:at("coll")},zlb:{schm:d},CBa:{}}).oe),M([F,H,G,V,Y,J,q,K,$,Z],l.CBa),M([p,d],l.zlb),l.oe[t.GOa]=A,l.oe[t.w4]=_,l.oe[t.v4]=E,l.oe[t.FOa]=P,l.CBa[t.gja]=tt,l.dg=o,D.exports={SQ:l}},function(t,e,i){var n,r,a;function o(){return null!==a&&a.apply(this,arguments)||this}_esm(e),n=i(21),t=i(24),r=i(24),a=t.dg,n.__extends(o,a),o.prototype.parse=function(t){return this.R.offset+=6,this.R.mh(),r.S&&this.R.console.trace("VideoSampleEntry sampleEntryType: "+this.type),null!=t&&t.rf&&(t.rf.J$b=this.type),!0},e.default=i=o},function(t,e,i){var n;_esm(e),(t=i(21)).__exportStar(i(151),e),t.__exportStar(i(239),e),t.__exportStar(i(240),e),t.__exportStar(i(241),e),t=i(240),n=i(241),i=i(239),e.RO={3:i.aJa,4:t.hIa,5:n.Rqb}},function(t,e,i){var n,r,a;function o(){return null!==a&&a.apply(this,arguments)||this}_esm(e),n=i(21),r=i(24),a=i(151).Gha,n.__extends(o,a),o.prototype.parse=function(t){var e;return this.vrb=this.R.mh(),e=this.R.Gd(),this.ckb=!!(128&e),this.HTa=!!(64&e),this.mOa=!!(32&e),this.Zcc=31&e,this.SMb=this.ckb?this.R.mh():void 0,this.HTa&&this.R.Rda(this.R.Gd()),this.Wtb=this.mOa?this.R.mh():void 0,r.S&&this.R.console.trace("ESDescriptor: ES_ID="+this.vrb+", streamDependenceFlag="+this.ckb+", URL_Flag="+this.HTa+", OCRstreamFlag="+this.mOa+", streamPriority="+this.Zcc+", dependsOn_ES_ID="+this.SMb+", OCR_ES_Id="+this.Wtb),this.$Wa(t),!0},o.tag=3,e.aJa=o},function(t,e,i){var n,r,a;function o(){return null!==a&&a.apply(this,arguments)||this}_esm(e),n=i(21),r=i(24),a=i(151).Gha,n.__extends(o,a),o.prototype.parse=function(t){var e;return this.Kca=this.R.Gd(),e=this.R.Gd(),this.qDa=e>>>2,this.qEa=e>>>1&1,this.Poa=256*this.R.mh()+this.R.Gd(),this.maxBitrate=this.R.ic(),this.S7=this.R.ic(),r.S&&this.R.console.trace("DecoderConfigDescriptor: objectTypeIndication= 0x"+this.Kca.toString(16)+", streamType="+this.qDa+", upStream="+this.qEa+", bufferSizeDB="+this.Poa+", maxBitrate="+this.maxBitrate+", avgBitrate="+this.S7),null!=t&&t.ck&&(t.ck.Kca=this.Kca,t.ck.qDa=this.qDa,t.ck.qEa=this.qEa,t.ck.Poa=this.Poa,t.ck.maxBitrate=this.maxBitrate,t.ck.S7=this.S7),this.$Wa(t),!0},o.tag=4,e.hIa=o},function(t,e,i){var n,a,r,o;function s(){return null!==o&&o.apply(this,arguments)||this}_esm(e),n=i(21),a=i(24),t=i(151),r=i(238),o=t.Gha,n.__extends(s,o),s.prototype.ogb=function(){var t=this.R.Hd(4);return 15!==t?[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350][t]:this.R.Hd(24)},s.prototype.parse=function(t,e){if(this.JYb(e)&&64===e.Kca){if(null!=t&&t.ck){e=this.R.U5a(this.length);for(var i=new ArrayBuffer(this.length),n=new Uint8Array(i),r=0;r<this.length;r++)n[r]=e.getUint8(r);t.ck.yoc=i}switch(this.zr=this.ggb(),this.zea=this.ogb(),this.vpa=this.R.Hd(4),this.JBa=this.EX=5===this.zr||29===this.zr?5:-1,this.tAa=29===this.zr?1:-1,0<this.EX&&(this.csa=this.ogb(),this.zr=this.ggb(),22===this.zr&&(this.bsa=this.R.Hd(4))),this.zr){case 1:case 2:case 3:case 4:case 6:case 7:case 17:case 19:case 20:case 21:case 22:case 23:this.SX=this.R.Hd(1),this.uqa=(this.RMb=this.R.Hd(1))?this.R.Hd(14):void 0,this.R.Hd(1),this.iJ=3===this.zr?256:23===this.zr?this.SX?480:512:this.SX?960:1024}a.S&&this.R.console.trace("AudioSpecificConfig: audioObjectType="+this.zr+", samplingFrequency="+this.zea+", channelConfiguration="+this.vpa+", extensionAudioObjectType="+this.EX+", sbrPresentFlag="+this.JBa+", psPresentFlag="+this.tAa+", extensionSamplingFrequency="+this.csa+", extensionChannelConfiguration="+this.bsa+", frameLengthFlag="+this.SX+", coreCoderDelay="+this.uqa+", frameLength="+this.iJ),null!=t&&t.ck&&(t.ck.zr=this.zr,t.ck.zea=this.zea,t.ck.vpa=this.vpa,t.ck.EX=this.EX,t.ck.JBa=this.JBa,t.ck.tAa=this.tAa,t.ck.csa=this.csa,t.ck.bsa=this.bsa,t.ck.SX=this.SX,t.ck.uqa=this.uqa,t.ck.iJ=this.iJ)}return this.skip(),!0},s.prototype.ggb=function(){var t=this.R.Hd(5);return t=31===t?32+this.R.Hd(6):t},s.prototype.JYb=function(t){return t.tag===r.hIa.tag},s.tag=5,e.Rqb=i=s},function(t,e){function i(t){this.data=t,this.kt=this.Pb=this.Od=0,this.view=new DataView(t.buffer,t.byteOffset,t.byteLength)}_esm(e),e.F2=void 0,Object.defineProperty(i.prototype,"offset",{get(){return this.Pb},configurable:!0}),i.prototype.read=function(t){if(0===this.Od){if(8===t)return this.data[this.Pb++];if(16===t)return t=this.view.getUint16(this.Pb),this.Pb+=2,t;if(32===t)return t=this.view.getUint32(this.Pb),this.Pb+=4,t}for(;this.Od<t;)this.kt=(this.kt<<8)+this.data[this.Pb++],this.Od+=8;return this.Od-=t,this.kt>>>this.Od&(1<<t)-1},i.prototype.advance=function(t){var e;t<=this.Od?this.Od-=t:(t-=this.Od,e=Math.floor(t/8),this.Pb+=e,this.kt=this.data[this.Pb++],this.Od=8-(t-8*e))},i.prototype.write=function(t,e){var i,n;if(e&=(1<<t)-1,0===this.Od){if(8===t)return void(this.data[this.Pb++]=e);if(16===t)return this.view.setUint16(this.Pb,e),void(this.Pb+=2);if(32===t)return this.view.setUint32(this.Pb,e),void(this.Pb+=4)}for(0<this.Od&&(i=Math.min(t,this.Od),n=this.data[this.Pb-1]&(~((1<<this.Od)-1)^(1<<this.Od-i)-1),this.data[this.Pb-1]=n^(i<=t?e>>>t-i:e<<this.Od-i),this.Od-=i,t-=i);8<=t;)t-=8,this.data[this.Pb++]=e>>>t&255;0<t&&(this.Od=8-t,n=this.data[this.Pb]&(1<<this.Od)-1,this.kt=this.data[this.Pb++]=n^(e&(1<<t)-1)<<8-t)},i.prototype.reverse=function(t){0!==this.Od&&t<=8-this.Od?this.Od+=t:(0!==this.Od&&(t-=8-this.Od,--this.Pb),this.Pb-=Math.floor(t/8),this.kt=this.data[this.Pb-1],this.Od=t%8)},i.prototype.XFb=function(){0!==this.Od&&(this.Od=0)},e.F2=i},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),e.assert=void 0,i=i(388),r=Error,i.__extends(a,r),n=a,e.assert=function(t,e){if(!t)throw new n(e||"Assertion failed")}},function(t,e){_esm(e),e.concat=function(){for(var i,t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return e=(t=Array.prototype.concat.apply([],t)).reduce(function(t,e){return t+e.byteLength},0),i=new Uint8Array(e),t.reduce(function(t,e){return i.set(new Uint8Array(e),t),t+e.byteLength},0),i.buffer}},function(t,e,i){var n,r,a;function o(t,e,i){this.console=t,this.stream=e,this.view=i instanceof ArrayBuffer?new DataView(i):new DataView(i.data,i.offset,i.length)}_esm(e),n=i(390),r=i(236),a=i(391),o.prototype.parse=function(t){var e=new a.lIa(this.view.byteLength);return this.zg=new n.dha(r.SQ.oe,e,this.view,this.console,{oza:!0}),t=this.zg.parse(t),this.oe=this.zg.oe,t},e.fH=o},function(t,e,i){var n,r;function a(){}_esm(e),e.d3=void 0,n=i(42),r=i(123),a.ut=function(){var t={};return t[n.I.QG]="avc1.4D401E",t[n.I.SG]="avc1.4D401F",t[n.I.$ha]="avc1.4D4028",t[n.I.aKa]="avc1.4D401E",t[n.I.bKa]="avc1.4D401F",t[n.I.cKa]="avc1.4D4028",t[n.I.bia]="hev1.2.6.L90.B0",t[n.I.cia]="hev1.2.6.L93.B0",t[n.I.dia]="hev1.2.6.L120.B0",t[n.I.eia]="hev1.2.6.L123.B0",t[n.I.N3]="hev1.2.6.L90.B0",t[n.I.Q3]="hev1.2.6.L93.B0",t[n.I.T3]="hev1.2.6.L120.B0",t[n.I.W3]="hev1.2.6.L123.B0",t[n.I.ET]="hev1.2.6.L150.B0",t[n.I.FT]="hev1.2.6.L153.B0",t[n.I.O3]="hev1.2.6.L90.B0",t[n.I.R3]="hev1.2.6.L93.B0",t[n.I.U3]="hev1.2.6.L120.B0",t[n.I.X3]="hev1.2.6.L123.B0",t[n.I.Z3]="hev1.2.6.L150.B0",t[n.I.b4]="hev1.2.6.L153.B0",t[n.I.M3]="hev1.2.6.L90.B0",t[n.I.P3]="hev1.2.6.L93.B0",t[n.I.S3]="hev1.2.6.L120.B0",t[n.I.V3]="hev1.2.6.L123.B0",t[n.I.Y3]="hev1.2.6.L150.B0",t[n.I.a4]="hev1.2.6.L153.B0",t[n.I.u3]="hev1.2.6.L90.B0",t[n.I.x3]="hev1.2.6.L93.B0",t[n.I.DT]="hev1.2.6.L120.B0",t[n.I.C3]="hev1.2.6.L123.B0",t[n.I.F3]="hev1.2.6.L150.B0",t[n.I.I3]="hev1.2.6.L153.B0",t[n.I.v3]="hev1.2.6.L90.B0",t[n.I.y3]="hev1.2.6.L93.B0",t[n.I.A3]="hev1.2.6.L120.B0",t[n.I.D3]="hev1.2.6.L123.B0",t[n.I.G3]="hev1.2.6.L150.B0",t[n.I.J3]="hev1.2.6.L153.B0",t[n.I.t3]="hev1.2.6.L90.B0",t[n.I.w3]="hev1.2.6.L93.B0",t[n.I.z3]="hev1.2.6.L120.B0",t[n.I.B3]="hev1.2.6.L123.B0",t[n.I.E3]="hev1.2.6.L150.B0",t[n.I.H3]="hev1.2.6.L153.B0",t[n.I.P2]=r.Rd.uha,t[n.I.R2]=r.Rd.$Ha,t[n.I.wT]=r.Rd.vha,t[n.I.U2]=r.Rd.wha,t[n.I.W2]=r.Rd.xha,t[n.I.Y2]=r.Rd.yha,t[n.I.zha]=r.Rd.vha,t[n.I.Aha]=r.Rd.wha,t[n.I.Bha]=r.Rd.xha,t[n.I.Cha]=r.Rd.yha,t[n.I.Q2]=r.Rd.uha,t[n.I.S2]=r.Rd.$Ha,t[n.I.T2]=r.Rd.vha,t[n.I.V2]=r.Rd.wha,t[n.I.X2]=r.Rd.xha,t[n.I.Z2]=r.Rd.yha,t[n.I.ZJa]="avc1.640016",t[n.I.o3]="avc1.64001E",t[n.I.q3]="avc1.64001F",t[n.I.Yha]="avc1.640028",t[n.I.$Ja]="avc1.640016",t[n.I.p3]="avc1.64001E",t[n.I.r3]="avc1.64001F",t[n.I.Zha]="avc1.640028",t[n.I.Ska]=r.Rd.yU,t[n.I.m5]=r.Rd.yU,t[n.I.n5]=r.Rd.yU,t[n.I.o5]=r.Rd.yU,t[n.I.hFa]=r.Rd.sl,t[n.I.iFa]=r.Rd.sl,t[n.I.eD]=r.Rd.sl,t[n.I.fD]=r.Rd.sl,t[n.I.q2]=r.Rd.sl,t[n.I.r2]=r.Rd.sl,t[n.I.s2]=r.Rd.sl,t[n.I.t2]=r.Rd.sl,t},e.d3=a},function(t,e){function i(t){return"globalAudioMemoryLimit"===t||"globalVideoMemoryLimit"===t?"global":("staticAudioMemoryLimit"===t||"staticVideoMemoryLimit"===t)&&"static"}_esm(e),e.cdc=e.qgb=e.HAa=void 0,e.HAa=function(t){return"globalMemoryLimit"===t?"global":"staticMemoryLimit"===t?"static":i(t)},e.qgb=i,e.cdc=function(t){return"IStreamable: ".concat(t.identifier," [").concat(t.mediaType,"] ").concat(t.groupId," ")+"p:".concat(JSON.stringify(t.bi)," sp:").concat(t.GC," ")+"pssp:".concat(t.Y_," ")+"state:".concat(t.Cf," path-complete:").concat(t.qC," ")+"streaming:".concat(t.qu," current:").concat(t.xt)}},function(t,e,i){var r,a;function n(t,e){this.console=t,this.config=e,this.Wfa=!1}_esm(e),e.pM=void 0,r=i(10),a=i(63),n.prototype.un=function(t,e,i,n){if(void 0===i&&(i=a.M.Ka),void 0===n&&(n=!1),r.S&&this.console.trace("Filtering streams for fastplay",{Wfa:this.Wfa,bk:i.W,mqc:n}),this.Wfa||i.W>=this.config.b1b||!1===n){if((e=t.filter(this.XNb)).length)return e;r.S&&this.console.trace("No drm streams to return")}return(e=t.filter(this.RHb)).length?e:(r.S&&this.console.trace("No clear streams to return"),t)},n.prototype.Ckb=function(){this.Wfa=!0},n.prototype.XNb=function(t){return t.Aj},n.prototype.RHb=function(t){return!t.Aj},e.pM=n},function(t,e){function i(t,e,i,n){var r=this;this.properties=t,this.transform=e,this.tO=i,this.state=n,this.xa(),t.forEach(function(t){return t.addListener(r.Vya)}),this.Vya()}_esm(e),e.nja=void 0,i.prototype.clear=function(){var e=this;this.properties.forEach(function(t){return t.removeListener(e.Vya)})},i.prototype.S9a=function(t){return void 0!==t.equal},i.prototype.xa=function(){var i=this;this.Vya=function(){var t=i.state,e=i.properties.map(function(t){return t.value});i.state=i.transform(e),(i.S9a(i.state)&&i.S9a(t)?i.state.equal(t):t===i.state)||i.tO(i.state)}},e.nja=i},function(t,e){_esm(e),e.zk=void 0,(t=e.zk||(e.zk={}))[t.CLOSED=0]="CLOSED",t[t.OPEN=1]="OPEN",t[t.Vj=2]="STREAMING"},function(t,e){function i(t){this.nXa=t}_esm(e),e.vH=void 0,Object.defineProperties(i.prototype,{fQ:{get(){return this.Oyb},configurable:!0},result:{get(){return this.nXa},configurable:!0},vBa:{get(){var t=this;return this.nXa.then(function(){return t})},configurable:!0}}),i.prototype.cancel=function(){this.Oyb=!0},i.prototype.o_=function(e,i){var n=this;return this.result.then(function(t){n.fQ?i&&i(t):e(t)}),this},e.vH=i},function(t,e,i){var d,p,n;_esm(e),e.NI=e.$Pb=e.$A=e.oG=void 0,d=i(0),p=i(19),n=i(35),Object.defineProperties(e,{oG:{enumerable:!0,get(){return n.oG}}}),Object.defineProperties(e,{$A:{enumerable:!0,get(){return n.$A}}}),e.$Pb=function(t,e){var i,n,r;t=Math.max(t.duration-3e4,3e4);for(var a,o={},s=0,u=0;u<t;u+=3e4)n="s".concat(s++),r={N:e,va:u,wa:u+3e4<t?u+3e4:null},void 0!==a&&(a.next=((i={})[n]={weight:1},i),a.Rb=n),a=o[n]=r;return{yd:"s0",O:o,xe:"lazy"}},e.NI=function(e,i,n,t){var r,a,o,s,u,c;void 0===t&&(t={}),o=p.M.max(n,p.M.Ka);try{for(var h=d.__values(Object.keys(e.O)),f=h.next();!f.done;f=h.next())if(s=f.value,(u=e.O[s]).N===i&&(c=p.M.Ja(u.va),o.zj(c)&&(!isFinite(null!=(a=u.wa)?a:NaN)||o.lessThan(p.M.Ja(u.wa)))))return{X:s,offset:n.Ea(c)}}catch(t){var l={error:t}}finally{try{f&&!f.done&&(r=h.return)&&r.call(h)}finally{if(l)throw l.error}}if(t.Vhb&&((u=Object.keys(e.O).map(function(t){return{key:t,G:e.O[t]}}).filter(function(t){return t.G.N===i}).map(function(t){var e,i=p.M.abs(n.Ea(p.M.Ja(t.G.va)));return t.G.wa&&isFinite(t.G.wa)&&(e=p.M.abs(n.Ea(p.M.Ja(t.G.wa))),i=p.M.min(i,e)),d.__assign(d.__assign({},t),{gq:i})})).sort(function(t,e){return t.gq.W-e.gq.W}),c=d.__read(u,1)[0]))return u=c.G,t=c.key,c=p.M.Ja(u.va),{X:t,offset:n.Ea(c)}}},function(t,e){_esm(e),e.eZa=e.dW=e.Xc=void 0,e.Xc=function(t,e){for(var i=0;i<t.length;i++)if(e(t[i],i,t))return t[i]},e.dW=function(i){return i.filter(function(t,e){return i.indexOf(t)===e})},e.eZa=function(i,n){return i.filter(function(t,e){return i.indexOf(t)===e&&-1!==n.indexOf(t)})}},function(t,e,i){_esm(e),(t=i(0)).__exportStar(i(408),e),t.__exportStar(i(912),e),t.__exportStar(i(913),e),t.__exportStar(i(914),e)},function(t,e,i){var r,a,o,s,n,u,c,h;function f(t,e,i){var n=this;this.dj=new a.default(t,i),this.ep=new o.default(t),this.bc=new s.default(this.ep,this.dj,t),new u.d5(c.default.H8,e,t),r.Fz.xIb(t),t.lda&&setInterval(function(){n.dj.save(),n.ep.save()},t.lda)}_esm(e),e.YL=void 0,t=i(0),r=i(182),a=t.__importDefault(i(256)),o=t.__importDefault(i(939)),s=t.__importDefault(i(155)),n=i(2),u=i(419),c=t.__importDefault(i(3)),e.YL=(f.D$=function(t,e,i){return void 0===h?(f.config=t,f.xG=i,h=new f(t,e,i)):(n.assert(f.config===t),n.assert(f.xG===i)),h},f.reset=function(){f.config=void 0,h=f.xG=void 0},f)},function(t,e,i){var p,f,b,l,n,d;function a(t){var e=t.Tla;this.K=t,this.KD=f.Sj.HAVE_NOTHING,this.Cla=t.Cla,t=new n(t),this.JV=t.create("throughput-location-history",e),this.h6=t.create("throughput-location-history",e),this.Y6=t.create("throughput-location-history",e),this.Z6=t.create("throughput-location-history",e),this.X6=t.create("throughput-location-history",e),this.AA=t.create("respconn-location-history",e),this.pA=t.create("respconn-location-history",e),this.V6=t.create("throughput-tdigest-history",e),this.i6=t.create("throughput-iqr-history",e),this.S5=t.create("throughput-location-history",e),this.U5=t.create("throughput-location-history",e),this.T5=t.create("throughput-location-history",e),this.V5=t.create("throughput-location-history",e),this.Ab=null}function o(t,e,i,n,r){for(this.Uu=new a(r),this.Up=[],this.rzb=b.time.ia()-Date.now()%864e5,this.Tu=null,this.K=r,t=0;t<n;++t)this.Up.push(new a(r))}function s(t,e,i){return p.has(t,e)?t[e]:t[e]=i}function r(t,e){var i;this.K=t,this.GXa=e,this.APb(),this.OH=new a(this.K),this.iV(),(i=t.Pqa)&&(i={confidence:f.Sj.CT,Xa:{ta:parseInt(i,10),ye:0},ll:{ta:0,ye:0},XP:{ta:0,ye:0}},this.get=function(){return i})}p=i(11),f=i(28).default,e=i(8),b=i(3).default,l=e.UJa,n=i(928).Frb,new b.Console("ASEJS_LOCATION_HISTORY","media|asejs"),d={confidence:f.Sj.HAVE_NOTHING},a.prototype.qI=function(t,e){this.KD=e,this.JV.add(t),this.V6.add(t),this.Ab=b.time.ia()},a.prototype.nI=function(t){this.h6.add(t)},a.prototype.rI=function(t){this.Y6.add(t.initial),this.Z6.add(t.low),this.X6.add(t.high)},a.prototype.LL=function(t,e){this.i6.set(t,e)},a.prototype.LA=function(t){this.AA.add(t)},a.prototype.KA=function(t){this.pA.add(t)},a.prototype.TN=function(t){this.S5.add(t.ta),this.U5.add(t.ye),this.T5.add(t.gO),this.V5.add(t.OS)},a.prototype.getState=function(){var t,e=this.JV.getState(),i=this.h6.getState(),n=this.Y6.getState(),r=this.Z6.getState(),a=this.X6.getState(),o=this.AA.getState(),s=this.pA.getState(),u=this.i6.getState(),c=this.V6.getState(),h=this.S5.getState(),f=this.U5.getState(),l=this.T5.getState(),d=this.V5.getState();return p.xb(e)&&p.xb(o)&&p.xb(s)?null:(t={c:this.KD,t:b.time.iya(this.Ab)},p.xb(e)||(t.tp=e),p.xb(i)||(t.itp=i),p.xb(n)||(t.tcii=n),p.xb(r)||(t.tcil=r),p.xb(a)||(t.tcih=a),p.xb(o)||(t.rt=o),p.xb(s)||(t.hrt=s),p.xb(u)||(t.iqr=u),p.xb(c)||(t.td=c),p.xb(h)||(t.dta=h),p.xb(f)||(t.dtv=f),p.xb(l)||(t.dtta=l),p.xb(d)||(t.dttv=d),t)},a.prototype.Jd=function(t){var e=b.time.now();return!(t&&p.has(t,"c")&&p.has(t,"t")&&p.has(t,"tp")&&p.isFinite(t.c)&&p.isFinite(t.t))||t.c<0||t.c>f.Sj.CT||t.t>e||!this.JV.Jd(t.tp)?(this.KD=f.Sj.HAVE_NOTHING,this.Tu=this.Ab=null,this.JV.Jd(null),this.AA.Jd(null),this.pA.Jd(null),!1):(this.KD=t.c,this.Ab=b.time.Eya(t.t),this.AA.Jd(p.has(t,"rt")?t.rt:null),this.pA.Jd(p.has(t,"hrt")?t.hrt:null),this.h6.Jd(p.has(t,"itp")?t.itp:null),this.Y6.Jd(p.has(t,"tcii")?t.tcii:null),this.Z6.Jd(p.has(t,"tcil")?t.tcil:null),this.X6.Jd(p.has(t,"tcih")?t.tcih:null),this.S5.Jd(p.has(t,"dta")?t.dta:null),this.U5.Jd(p.has(t,"dtv")?t.dtv:null),this.T5.Jd(p.has(t,"dtta")?t.dtta:null),this.V5.Jd(p.has(t,"dttv")?t.dttv:null),p.has(t,"iqr")&&this.i6.Jd(t.iqr),p.has(t,"td")&&this.V6.Jd(t.td),!0)},a.prototype.get=function(){var t,e,i,n,r,a,o,s,u,c,h=this.K;return p.xb(this.Ab)?d:((t=(b.time.ia()-this.Ab)/1e3)>h.Hyb?this.KD=f.Sj.HAVE_NOTHING:t>h.eyb&&(this.KD=Math.min(this.KD,f.Sj.pD)),h=this.JV.get(),e=this.h6.get(),i=this.Y6.get().ta,n=this.Z6.get().ta,r=this.X6.get().ta,a=this.AA.get(),o=this.pA.get(),s=this.i6.get(),u=this.V6.get(),c={ta:this.S5.bua().ta,ye:this.U5.bua().ta,gO:this.T5.get().ta,OS:this.V5.get().ta},result={en:t,confidence:this.KD,Xa:h,p9a:e,"throughput-ci":{initial:i,low:n,high:r},ll:a,XP:o,Wv:s,Qg:u,Io:c},h&&(result.Ssc=l.prototype.Sy.bind(h)),a&&(result.Zrc=l.prototype.Sy.bind(a)),o&&(result.Xpc=l.prototype.Sy.bind(o)),result)},a.prototype.time=function(){return this.Ab},o.prototype.ze=function(){return((b.time.ia()-this.rzb)/1e3/3600/(24/this.Up.length)|0)%this.Up.length},o.prototype.getState=function(){var t={g:this.Uu.getState(),h:this.Up.map(function(t){return t.getState()})};return p.xb(this.Tu)||(t.f=b.time.iya(this.Tu)),t},o.prototype.Jd=function(i){var n,r;return!!this.Uu.Jd(i.g)&&(n=this.Up.length,r=!1,this.Up.forEach(function(t,e){r=!t.Jd(i.h[e*i.h.length/n|0])||r}),this.Tu=p.has(i,"f")?b.time.Eya(i.f):null,r)},o.prototype.qI=function(t,e){this.Uu.qI(t,e),this.Up[this.ze()].qI(t,e),this.Tu=null},o.prototype.nI=function(t){this.Uu.nI(t),this.Up[this.ze()].nI(t),this.Tu=null},o.prototype.rI=function(t){this.Uu.rI(t),this.Up[this.ze()].rI(t),this.Tu=null},o.prototype.LL=function(t,e){this.Uu.LL(t,e),this.Up[this.ze()].LL(t,e)},o.prototype.LA=function(t){this.Uu.LA(t),this.Up[this.ze()].LA(t)},o.prototype.KA=function(t){this.Uu.KA(t),this.Up[this.ze()].KA(t)},o.prototype.TN=function(t){this.Uu.TN(t),this.Up[this.ze()].TN(t)},o.prototype.fail=function(t){this.Tu=t},o.prototype.get=function(){var t,e;if(!p.xb(this.Tu)){if((b.time.ia()-this.Tu)/1e3<this.K.dyb)return{confidence:f.Sj.HAVE_NOTHING,Av:!0};this.Tu=null}return t=this.Up[this.ze()].get(),e=this.Uu.get(),(t=t.confidence>=e.confidence?t:e).Av=!1,t},o.prototype.time=function(){return this.Uu.time()},r.prototype.wVa=function(t,e){var i=this.K;return t=s(this.$U,t,{}),s(t,e,new o(i.NVa||14400,i.MVa,i.LVa,i.LWa||4,i))},r.prototype.iV=function(){var t=b.storage.get("lh"),e=b.storage.get("gh");t&&this.dna(t),e&&this.BBb(e)},r.prototype.ama=function(){var n={};return p.Nf(this.$U,function(t,i){p.Nf(t,function(t,e){s(n,i,{})[e]=t.getState()},this)},this),n},r.prototype.BBb=function(t){this.OH.Jd(t)},r.prototype.dna=function(t){var r=null,a=this.K;return p.Nf(t,function(t,n){p.Nf(t,function(t,e){var i=new o(a.NVa||14400,a.MVa,a.LVa,a.LWa||4,a);i.Jd(t)?(s(this.$U,n,{})[e]=i,r=!0):p.xb(r)&&(r=!1)},this)},this),!!p.xb(r)||r},r.prototype.save=function(){var t=this.ama();b.storage.set("lh",t),b.storage.set("gh",this.OH.getState()),this.GXa&&this.GXa.rCa(this.OH.getState())},r.prototype.APb=function(){this.$U={},this.bN=this.RUa="",this.em=null},r.prototype.$R=function(t){this.RUa=t,this.em=null},r.prototype.Nea=function(t){this.bN=t,this.em=null},r.prototype.NH=function(){return p.xb(this.em)&&(this.em=this.wVa(this.RUa,this.bN)),this.em},r.prototype.qI=function(t,e){this.NH().qI(t,e),this.OH.qI(t,e)},r.prototype.nI=function(t){this.NH().nI(t),this.OH.nI(t)},r.prototype.rI=function(t){this.NH().rI(t),this.OH.rI(t)},r.prototype.LL=function(t,e){t&&t.Ol&&t.nk&&t.Pl&&(this.NH().LL(t,e),this.OH.LL(t,e))},r.prototype.LA=function(t){this.NH().LA(t)},r.prototype.KA=function(t){this.NH().KA(t)},r.prototype.TN=function(t){this.NH().TN(t)},r.prototype.fail=function(t,e){this.wVa(t,this.bN).fail(e)},r.prototype.get=function(t,e){var n,r,a,o;return t=(t=this.$U[t])?t[this.bN]:null,n=null,t&&(n=t.get()).confidence>f.Sj.HAVE_NOTHING?n:!1===e?d:(r=n=null,a=!1,o=null,p.Nf(this.$U,function(t){p.Nf(t,function(t,e){var i;a&&e!=this.bN||(i=t.get())&&(!r||r<=i.confidence)&&(!o||r<i.confidence||o<t.time())&&(r=i.confidence,a=e==this.bN,o=t.time(),n=i)},this)},this),n||d)},t.exports=r},function(t,e,i){var n;function r(t){this.LN=t,this.reset()}function a(t){this.Pk=new r(t),this.Pb=0,this.Vc=null}function o(t,e){this.LN=t,this.nWa=e,this.reset()}n=i(11),r.prototype.WWa=function(t,e){this.Ab+=t,this.Gk+=t,this.kd+=e,this.Rp.push({d:t,b:e})},r.prototype.vV=function(){for(var t;this.Gk>this.LN;)t=this.Rp.shift(),this.kd-=t.b,this.Gk-=t.d},r.prototype.reset=function(){this.Rp=[],this.Ab=null,this.Gk=this.kd=0},r.prototype.setInterval=function(t){this.LN=t,this.vV()},r.prototype.start=function(t){n.xb(this.Ab)&&(this.Ab=t)},r.prototype.add=function(t,e,i){n.xb(this.Ab)&&(this.Ab=e),e>this.Ab&&this.WWa(e-this.Ab,0),this.WWa(i>this.Ab?i-this.Ab:0,t),this.vV()},r.prototype.get=function(){return{ta:Math.floor(8*this.kd/this.Gk),ye:0}},a.prototype.reset=function(){this.Pk.reset(),this.Pb=0,this.Vc=null},a.prototype.add=function(t,e,i){!n.xb(this.Vc)&&i>this.Vc&&(e>this.Vc&&(this.Pb+=e-this.Vc),this.Vc=null),this.Pk.add(t,e-this.Pb,i-this.Pb)},a.prototype.start=function(t){!n.xb(this.Vc)&&t>this.Vc&&(this.Pb+=t-this.Vc,this.Vc=null),this.Pk.start(t-this.Pb)},a.prototype.stop=function(t){this.Vc=n.xb(this.Vc)?t:Math.min(t,this.Vc)},a.prototype.get=function(){return this.Pk.get()},a.prototype.setInterval=function(t){this.Pk.setInterval(t)},o.prototype.reset=function(){this.Rp=[],this.kd=this.Gk=0},o.prototype.add=function(t,e,i,n){void 0!==n&&!0===n&&(this.Gk+=e=i-e,this.kd+=t,this.Rp.push({d:e,b:t}),this.vV())},o.prototype.vV=function(){for(var t;this.Gk>this.LN||this.Rp.length>this.nWa;)t=this.Rp.shift(),this.kd-=t.b,this.Gk-=t.d},o.prototype.start=function(){},o.prototype.stop=function(){},o.prototype.get=function(){return{ta:Math.floor(8*this.kd/this.Gk),ye:0}},o.prototype.setInterval=function(t,e){this.LN=t,this.nWa=e,this.vV()},t.exports={$ic:r,Wqb:a,uwb:o}},function(t,e,i){var n,p,b,r,a;function o(t,e,i,n,r){this.alpha=t,this.ta=e,this.weight=n,this.Aka=i*this.weight,this.D1=r}function s(){return null!==r&&r.apply(this,arguments)||this}function u(t){var e=a.call(this,t)||this;return e.Ql=t,e}_esm(e),e.mIa=e.Sqb=e.Fha=e.yrb=e.Tqb=void 0,n=i(0),p=i(932),e.Tqb=i=function(){},o.prototype.si=function(){return new o(this.alpha,this.ta,this.ye,this.weight,this.D1)},Object.defineProperties(o.prototype,{ye:{get(){return this.weight?this.Aka/this.weight:0},configurable:!0}}),o.prototype.update=function(t,e,i){var n,r,a;g=this.alpha,n=this.weight,r=this.D1,5<(a=g*(t-r))&&(this.weight/=Math.exp(a),this.D1=r=t),t=Math.exp(g*(e-r))-Math.exp(g*(t-r)),e=this.weight+=t,g=this.ta,this.ta=r=g+t*(i-g)/e,this.Aka=n?this.Aka*(e-t)/n+t*(i-r)*(i-g):0},b=o,e.yrb=b,t=function(){for(var t=2;14!==t;)switch(t){case 8:i.prototype.stop=function(){},i.prototype.flush=function(){},t=6;break;case 6:return i;case 2:i.prototype.si=function(t){for(var e=2;8!==e;)switch(e){case 2:(t=t||new i(this.Ql)).tu=this.tu,t.vG=this.vG,e=4;break;case 4:return t.oL=this.oL.si(),t.pL=this.pL.si(),t}},i.prototype.reset=function(){for(var t,e=2;3!==e;)2===e&&(t=-Math.log(.5)/this.AJ,this.oL=new b(t,0,0,0,0),this.pL=new b(t,0,0,0,0),this.tu=this.vG=null,e=3)},i.prototype.start=function(t){for(var e=2;1!==e;)2===e&&(null===this.tu&&(this.tu=t),e=1)},i.prototype.add=function(t,e,i){for(var n,r=a000,a=2;7!==a;)2===a&&(n=this.tu,this.tu=null===n?e:Math.min(n,e),n=this.vG,this.vG=null===n?i:Math.max(n,i),r.h9M(0),n=Math.max(r.K9M(e,i),1),r.O9M(1),this.oL.update(e,i,r.I9M(t,n)),r.O9M(2),this.pL.update(e,i,r.K9M(n,8,t)),a=7)},i.prototype.get=function(t,e){for(var i,n,r,a,o,s,u,c,h=a000,f=2;16!==f;)switch(f){case 17:u=this.oL,c=this.pL,f=20;break;case 5:u=new b(u.alpha,u.ta,u.ye,u.weight,u.D1),c=new b(c.alpha,c.ta,c.ye,c.weight,c.D1),f=0<u.weight&&0!==e?4:20;break;case 12:n=s-(i=new p.l4(s,d).PGb(o))[1],i=1-i[0],f=10;break;case 14:h.O9M(0),u.update(h.K9M(r,a),h.I9M(r,t,h.h9M(0)),h.K9M(e,o,h.h9M(1))),f=13;break;case 2:r=this.tu||0,o=t-(a=this.vG||0),s=this.a2b,u=this.oL,c=this.pL,f=1;break;case 4:void 0===e&&(e=this.ncb),s=(e=s<=o?Math.min(e,this.ncb):e)*u.ta,f=8;break;case 8:h.O9M(3);var l=h.I9M(16,10,12,16),d=Math.pow(e,l)*u.ye,f=7;break;case 7:f=0===d?6:12;break;case 1:f=0<o?5:17;break;case 10:o=1e-11<i?Math.max(n/i,o):o+2*d/s,f=14;break;case 13:h.O9M(0),c.update(h.K9M(r,a),h.K9M(r,t),0),f=20;break;case 6:o=Math.max(o,s),f=14;break;case 20:return t=u.weight,e=c.weight,{ta:t?u.ta:null,ye:t?u.ye:null,gO:e?c.ta:null,OS:e?c.ye:null}}},i.prototype.toString=function(){return"DeliveryDist(".concat(this.AJ,")")},t=8}function i(t){for(var e=2;7!==e;)switch(e){case 2:var i=(this.Ql=t).min_b,n=t.min_iv;this.AJ=t.hl,e=3;break;case 3:this.ncb=i,this.a2b=n,this.reset(),e=7}}}(),e.Fha=t,r=i,n.__extends(s,r),e.Sqb=i=s,a=t,n.__extends(u,a),u.prototype.get=function(){var t,e,i;return 0===this.oL.weight||0===this.pL.weight?{low:null,high:null,initial:null}:"deliverytime"!==this.Ql.MQ?(t=this.pL,t=new p.l4(t.ta,t.ye),e=this.Ql.accuracy,i=this.Ql.e1b,{low:t.Sy(this.Ql.EZ,e,i),high:t.Sy(this.Ql.NY,e,i),initial:t.Sy(this.Ql.Daa,e,i)}):(t=this.oL,t=new p.l4(t.ta,t.ye),e=this.Ql.accuracy,i=this.Ql.e1b,{low:8/t.Sy(this.Ql.NY,e,i),high:8/t.Sy(this.Ql.EZ,e,i),initial:8/t.Sy(this.Ql.Daa,e,i)})},u.prototype.si=function(){var t=new u(this.Ql);return a.prototype.si.call(this,t),t},u.prototype.toString=function(){return"DeliveryDistCI([".concat((this.Ql.EZ,this.Ql.NY),"])")},e.mIa=u},function(t){function e(){for(var t=2;5!==t;)2===t&&(this.XD=this.kd=0,this.Ab=this.$g=void 0,t=5)}for(var i=2;8!==i;)switch(i){case 4:e.prototype.get=function(){return{ta:this.XD?Math.floor(8*this.kd/this.XD):null,c9:this.XD||0}},t.exports=e,i=8;break;case 2:e.prototype.start=function(t){for(var e=2;1!==e;)2===e&&(this.$g?t<this.$g?(this.XD+=this.$g-t,this.$g=t):t>this.Ab&&(this.Ab=this.$g=t):this.Ab=this.$g=t,e=1)},e.prototype.stop=function(t){for(var e=2;1!==e;)2===e&&(this.Ab&&t>this.Ab&&(this.XD+=t-this.Ab,this.Ab=t),e=1)},e.prototype.add=function(t,e,i){for(var n=2;4!==n;)2===n&&(this.start(e),this.stop(i),this.kd+=t,n=4)},i=4}},function(t,e,i){function n(){return(n=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)}function r(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)}function a(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function o(t,e){var i,n,r={};for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(n=0,i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(r[i[n]]=t[i[n]]);return r}function s(t,e,i,n){var r,a=arguments.length,o=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.fq)o=Reflect.fq(t,e,i,n);else for(var s=t.length-1;0<=s;s--)(r=t[s])&&(o=(a<3?r(o):3<a?r(e,i,o):r(e,i))||o);return 3<a&&o&&Object.defineProperty(e,i,o),o}function u(i,n){return function(t,e){n(t,e,i)}}function c(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.Ec)return Reflect.Ec(t,e)}function h(t,o,s,u){return new(s=s||Promise)(function(i,e){function n(t){try{a(u.next(t))}catch(t){e(t)}}function r(t){try{a(u.throw(t))}catch(t){e(t)}}function a(t){var e;t.done?i(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(n,r)}a((u=u.apply(t,o||[])).next())})}function f(n,r){var a,o,s,u,t;function e(i){return function(t){var e=[i,t];if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,s&&(u=2&e[0]?s.return:e[0]?s.throw||((u=s.return)&&u.call(s),0):s.next)&&!(u=u.call(s,e[1])).done)return u;switch(s=0,(e=u?[2&e[0],u.value]:e)[0]){case 0:case 1:u=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,s=e[1],e=[0];continue;case 7:e=a.il.pop(),a.Ih.pop();continue;default:if(!(u=0<(u=a.Ih).length&&u[u.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!u||e[1]>u[0]&&e[1]<u[3]))a.label=e[1];else if(6===e[0]&&a.label<u[1])a.label=u[1],u=e;else{if(!(u&&a.label<u[2])){u[2]&&a.il.pop(),a.Ih.pop();continue}a.label=u[2],a.il.push(e)}}e=r.call(n,a)}catch(t){e=[6,t],s=0}finally{o=u=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}return a={label:0,ib:function(){if(1&u[0])throw u[1];return u[1]},Ih:[],il:[]},t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t}function l(t,e,i,n){t[n=void 0===n?i:n]=e[i]}function d(t,e){for(var i in t)"default"===i||e.hasOwnProperty(i)||(e[i]=t[i])}function p(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return{value:(t=t&&n>=t.length?void 0:t)&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function b(t,e){var i,n,r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;t=r.call(t),n=[];try{for(;(void 0===e||0<e--)&&!(i=t.next()).done;)n.push(i.value)}catch(t){var a={error:t}}finally{try{i&&!i.done&&(r=t.return)&&r.call(t)}finally{if(a)throw a.error}}return n}function g(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(b(arguments[e]));return t}function m(){for(var t,e=0,i=0,n=arguments.length;i<n;i++)e+=arguments[i].length;for(e=Array(e),i=t=0;i<n;i++)for(var r=arguments[i],a=0,o=r.length;a<o;a++,t++)e[t]=r[a];return e}function v(t){return this instanceof v?(this.rz=t,this):new v(t)}function y(t,e,i){var r,a,o;function n(n){r[n]&&(a[n]=function(i){return new Promise(function(t,e){1<o.push([n,i,t,e])||s(n,i)})})}function s(t,e){var i;try{(i=r[t](e)).value instanceof v?Promise.resolve(i.value.rz).then(u,c):h(o[0][2],i)}catch(t){h(o[0][3],t)}}function u(t){s("next",t)}function c(t){s("throw",t)}function h(t,e){t(e),o.shift(),o.length&&s(o[0][0],o[0][1])}if(Symbol.asyncIterator)return r=i.apply(t,e||[]),o=[],a={},n("next"),n("throw"),n("return"),a[Symbol.asyncIterator]=function(){return this},a;throw new TypeError("Symbol.asyncIterator is not defined.")}function w(n){var t,r;function e(e,i){t[e]=n[e]?function(t){return(r=!r)?{value:v(n[e](t)),done:"return"===e}:i?i(t):t}:i}return t={},e("next"),e("throw",function(t){throw t}),e("return"),t[Symbol.iterator]=function(){return this},t}function A(o){var t,e;function i(a){e[a]=o[a]&&function(r){return new Promise(function(t,e){var i,n;r=o[a](r),i=t,t=e,n=r.done,e=r.value,Promise.resolve(e).then(function(t){i({value:t,done:n})},t)})}}if(Symbol.asyncIterator)return(t=o[Symbol.asyncIterator])?t.call(o):(o=p(o),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);throw new TypeError("Symbol.asyncIterator is not defined.")}function _(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function E(t){var e;if(t&&t.__esModule)return t;if(e={},null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function k(t){return t&&t.__esModule?t:{default:t}}function S(t,e){if(e.has(t))return e.get(t);throw new TypeError("attempted to get private field on non-instance")}function T(t,e,i){if(e.has(t))return e.set(t,i),i;throw new TypeError("attempted to set private field on non-instance")}i.r(e),i.d(e,"__extends",function(){return a}),i.d(e,"__assign",function(){return n}),i.d(e,"__rest",function(){return o}),i.d(e,"__decorate",function(){return s}),i.d(e,"__param",function(){return u}),i.d(e,"__metadata",function(){return c}),i.d(e,"__awaiter",function(){return h}),i.d(e,"__generator",function(){return f}),i.d(e,"__createBinding",function(){return l}),i.d(e,"__exportStar",function(){return d}),i.d(e,"__values",function(){return p}),i.d(e,"__read",function(){return b}),i.d(e,"__spread",function(){return g}),i.d(e,"__spreadArrays",function(){return m}),i.d(e,"__await",function(){return v}),i.d(e,"__asyncGenerator",function(){return y}),i.d(e,"__asyncDelegator",function(){return w}),i.d(e,"__asyncValues",function(){return A}),i.d(e,"__makeTemplateObject",function(){return _}),i.d(e,"__importStar",function(){return E}),i.d(e,"__importDefault",function(){return k}),i.d(e,"__classPrivateFieldGet",function(){return S}),i.d(e,"__classPrivateFieldSet",function(){return T})},function(t,e,i){var k,S,r,T,I,O,x,R,P,C,n,j,N,a,o,M,D;function s(t,e){var r,a,o,s,u,c,h,f,i=e.Ub,n=e.ja,l=e.Dq,d=e.Fd,p=e.Rbb,b=e.Yi,g=e.config,m=e.A8a,v=e.KR,y=e.e$,w=e.bc,A=e.dj,_=e.j_,E=e.T3a;return e=e.qG,(r=D.call(this)||this).N=t,r.MY=!1,r.RVa=[],r.lWa=[],r.mi=[],r.IE=[],r.po=!1,r.ldb=!1,r.Ub=i,r.lV=n,r.Dq=l,r.uc=function(t){return 0<=d.indexOf(t)},r.config=g,r.console=new P.default.Console("ASEJS","media|asejs","<"+String(r.N)+">"),m&&(t=m.dF,r.tg=new O.FKa(r,r.console,r.config,m.mC,m.zY,t,m.Oaa,m.Yf,m.Xl,m.Uh,m.mF),r.dF=t),r.Sv=new S.EventEmitter,r.e$=y,r.bc=w,r.j_=_,r.KR=v,r.qG=e,r.Hf=new M(p),r.Yi=b,a=[[],[],[]],o=[{},{},{}],u=!(s=[0,0]),h=r.uc(R.u.P),f=r.uc(R.u.J),b=r.ub,["audio_tracks","video_tracks"].forEach(function(t,i){var e=i===R.u.J,n=i===R.u.P;n&&!h||e&&!f||r.ja[t].forEach(function(t,e){t.type===R.u.P&&!1===t.bj||(e=new T.UL({T:r,wm:t,mediaType:i,Pe:p.Rva,UC:e,IA:e+(n?r.ja.video_tracks.length:0)},r.config,r.console),i===R.u.J&&g.ePb&&new j.iGa(g).Q7b(e.Pc),i===R.u.J&&(c=N.IM.from({lw:t.Nxa,rv:t.Mxa})),a[i].push(e),o[i]=k.__assign(k.__assign({},o[i]),e.EB()),e.maxBitrate>s[e.mediaType]&&(s[e.mediaType]=e.maxBitrate),u=u||e.Wo)})}),b&&r.ja.timedtexttracks.forEach(function(t,e){var i;"none"!==t.id&&(i=R.u.Ob,t=new T.UL({T:r,wm:t,mediaType:i,Pe:!1,UC:e,IA:e},r.config,r.console),a[i].push(t),o[i]=k.__assign(k.__assign({},o[i]),t.EB()))}),r.ja.VN&&(C.assert(c,"Should have video track if there are adverts"),r.VN={jg:r.ja.VN.jg.map(function(t){return k.__assign(k.__assign({},t),{KL:t.ap,ap:c.normalize(t.ap)})})}),r.Jl=new x.lMa(r.ja,o,w,A,r.config,null==E?void 0:E.mC),E&&(w=E.Et,A=E.Zo,r.nr=E.Sf,r.Zo=A,r.Et=w,r.Mla=new I.uJa(r.Jl,r.config,r.YVb.bind(r),r.XVb.bind(r))),r.OM=a,r.jfa=o,r.Rt=s,r.Wo=u,r}_esm(e),e.Tga=void 0,k=i(0),S=i(12),r=i(967),t=i(89),T=i(423),I=i(969),O=i(971),x=i(435),R=i(6),P=k.__importDefault(i(3)),C=i(2),i(8),n=i(22),j=i(975),N=i(263),a=i(130),o=i(181),M=function(t){var e=t.m$a;t=t.Rva,this.QZ=this.replace=e,this.Pe=t},D=t.Uw,k.__extends(s,D),Object.defineProperties(s.prototype,{ja:{get(){return this.lV},configurable:!0},ub:{get(){var t=this.ja,e=t.vQ;return"LIVE"===t.mfa&&!!e},configurable:!0},PZ:{get(){var t;return!(null==(t=this.OM[R.u.J][0])||!t.PZ)},configurable:!0},Zh:{get(){return this.RVa},configurable:!0},c1b:{get(){return this.lWa},configurable:!0},L:{get(){return this.ja.movieId},configurable:!0},Co:{get(){return this.ja.choiceMap},configurable:!0},duration:{get(){return this.ja.duration},configurable:!0},el:{get(){return this.po},configurable:!0},Kr:{get(){return C.assert(this.Mla,"ErrorDirector is not available on old architecture prefetch viewables."),this.Mla},configurable:!0},oP:{get(){return this.Kr.events},configurable:!0},kib:{get(){return this.mib?P.default.time.ia()-this.mib:P.default.time.now()},set(t){this.mib=P.default.time.ia()-t},configurable:!0}}),s.prototype.tb=function(){this.close(),this.cd()},s.prototype.close=function(){var t;this.IE=[],null!=(t=this.Mla)&&t.tb(),this.Jl.tb(),this.po=!0},s.prototype.cd=function(){this.tg&&this.tg.cd()},s.prototype.qz=function(t){var e,n,s,u=this,c=t.ja,i=t.Yi,r=t.Pe,h=void 0!==r&&r;t=t.Fd,e=void 0===t?R.Uf:t,C.assert(i===this.Yi,"Updating Viewable clearplay not supported"),R.Uf.forEach(function(t){C.assert(u.uc(t)===0<=e.indexOf(t),"Updating Viewable media types not supported")}),C.assert(c.movieId===this.ja.movieId,"Changing Viewable manifest movieId unsupported"),n=this.uc(R.u.P),s=this.uc(R.u.J),["audio_tracks","video_tracks"].forEach(function(t,r){var i,a,e=r===R.u.J,o=r===R.u.P;o&&!n||e&&!s||(i=c[t],a=u.OM[r],C.assert(a.every(function(t){var e=i[t.UC];return e&&e.ES===t.trackId&&(e.type===R.u.J||!1!==e.bj)}),"Existing tracks must still exist and be hydrated in updated manifest"),i.forEach(function(t,e){var i,n;t.type===R.u.P&&!1===t.bj||((i=u.getTrackById(t.ES))?(t=t.streams,n=Object.keys(i.EB()),C.assert(t.length===n.length,"Expected updated manifest track to have same number of streams"),t.forEach(function(t){t=t.downloadable_id,C.assert(-1!==n.indexOf(t),"Changing Viewable track streams unsupported")})):(i=new T.UL({T:u,wm:t,mediaType:r,Pe:h,UC:e,IA:e+(o?u.ja.video_tracks.length:0)},u.config,u.console),a.push(i),u.jfa[r]=k.__assign(k.__assign({},u.jfa[r]),i.EB()),i.maxBitrate>u.Rt[i.mediaType]&&(u.Rt[i.mediaType]=i.maxBitrate),C.assert(u.Wo||!i.Wo,"Can not update clear viewable with drm track.")))}))}),this.lV=c,this.Jl.UN(this.ja,this.jfa)},s.prototype.lG=function(t){var e=t.jp,i=t.ga,n=t.ME;t=t.fp,e&&i?(this.Tea=new r.tSa(e,{ga:String(i),ME:!!n,t1b:this.config.B4.mx,LFb:this.config.B4.lv},t),this.Kr.lG(this.Tea)):this.ldb||(t("SideChannel: pbcid/xid is missing."),this.ldb=!0)},s.prototype.ty=function(){return void 0!==this.Co},s.prototype.Ro=function(t,e){return o.Mta(this.ja,t,e)},s.prototype.getTracks=function(t){return this.OM[t]},s.prototype.getTrackById=function(e){var i;return this.OM.some(function(t){return t.some(function(t){if(t.trackId===e)return i=t,!0})}),i||this.console.warn("getTrackById not found:",e,"length:",this.OM.length),i},s.prototype.zVb=function(t,e){var i=this.OM[t];if(!(e<0||e>=i.length))return i[e];this.console.warn("getTrackByIndex out of range:",e,"length:",i.length,"mediaType:",t)},s.prototype.ly=function(t,e){return(t=this.EB(t))&&t[e]},s.prototype.EB=function(t){return this.jfa[t]},s.prototype.Ffc=function(t,e){(this.RVa[t]=e).stream.da&&this.gmb(t,e.stream.da)},s.prototype.yZb=function(e){var t,i;return void 0!==e.Hda&&void 0!==e.hAa||(i=(t=this.Jl.kC.filter(function(t){return void 0!==t.streams[e.Pa]})[0]).children.filter(function(t){return t.urls.some(function(t){return t.stream.id===e.Pa})})[0],e.Hda=t.id,e.hAa=i.id),{pwa:e.location===e.Hda,zZb:e.kc===e.hAa}},s.prototype.xCa=function(t,e,i){void 0!==e&&void 0!==i&&(this.bhb(t.mediaType,e),t.xCa(e,i))},s.prototype.bhb=function(t,e){var i=this.config.oya;("location"===i||"video_location"===i&&t===R.u.J)&&this.bc.$R(e),null!=(i=this.e$)&&i.call(this).l4b(t,e)},s.prototype.Sf=function(t,e,i,n,r,a){return C.assert(this.nr,"Stream failure reporting can not be used on old architecture prefetch viewables."),this.nr(t,e,i,n,r,a)},s.prototype.bm=function(){var t,e=this,i=[];return this.el?(this.console.error("updateRequestUrls, closed Viewable:",this.N),!1):(R.Uf.forEach(function(t){e.uc(t)&&e.Yfc(t)&&(0<(t=e.Nfc(t)).length&&i.push.apply(i,t))}),0<(t=this.Gfc()).length&&i.push.apply(i,t),this.h$b(i))},s.prototype.vn=function(t,e){var i=this.getTracks(R.u.J)[0];if(C.assert(i),i.HJ)return i.vn(t,e)},s.prototype.Yfc=function(i){var e=this;return this.el?(this.console.warn("updateStreamUrls ignored, viewable cleaned up"),!1):this.uc(i)?this.mi.reduce(function(t,e){return n.D7(t,e.we.filter(function(t){return t.mediaType===i}))},[]).map(function(t){return e.Jl.N1(e.N,t.Pc)}).every(function(t){return t}):(this.console.warn("updateStreamUrls ignored, streaming for mediaType type not enabled",i),!1)},s.prototype.Gfc=function(){return C.assert(this.tg,"Headers not available on old architecture prefetch viewables."),this.tg.bm()},s.prototype.Nfc=function(t){var e,i,n=[];if(this.el)return this.console.warn("updateStreamUrls ignored, viewable cleaned up"),n;if(!this.uc(t))return this.console.warn("updateStreamUrls ignored, streaming for mediaType type not enabled",t),n;try{for(var r=k.__values(this.mi),a=r.next();!a.done;a=r.next())(i=a.value.bm(t)).length&&n.push.apply(n,i)}catch(t){var o={error:t}}finally{try{a&&!a.done&&(e=r.return)&&e.call(r)}finally{if(o)throw o.error}}return n},s.prototype.h$b=function(t){var i,n,r=this;return 0===t.length||(i=0,n=[],t.forEach(function(t){var e;t.Cc&&(e=t.T).Ub>r.Ub&&(n.push({T:e,track:t.stream.track}),++i)}),n.forEach(function(t){var e=t.track;t.T.PK([e.mediaType===R.u.P?e:void 0,e.mediaType===R.u.J?e:void 0],void 0,e.mediaType)}),i===t.length)},s.prototype.mk=function(){var e=this;this.Jl.mk(),this.Kr.mk(),this.Tea&&(C.assert(this.dF),R.Uf.forEach(function(t){t=e.dF(t),e.Tea.cCa("rebuffer",t.Lwa)}))},s.prototype.Mya=function(){this.Kr.Mya()},s.prototype.yEa=function(t,e){C.assert(this.tg,"Headers not available on old architecture prefetch viewables."),this.tg.yEa(t,e)},s.prototype.caa=function(){return C.assert(this.tg,"Headers not available on old architecture prefetch viewables.."),this.tg.caa()},s.prototype.Ppa=function(){C.assert(this.tg,"Headers not available on old architecture prefetch viewables."),this.tg.Ppa()},s.prototype.YR=function(t){C.assert(this.tg,"Headers not available on old architecture prefetch viewables."),this.tg.YR(t)},s.prototype.fEa=function(){return C.assert(this.tg,"Headers not available on old architecture prefetch viewables."),this.tg.fEa()},s.prototype.mq=function(t,e){return C.assert(this.tg,"Headers not available on old architecture prefetch viewables."),this.tg.mq(t,e)},s.prototype.m1a=function(t,e,i){C.assert(this.tg,"Headers not available on old architecture prefetch viewables."),this.tg.Kfa(t,e,i,!0)},s.prototype.l7=function(t,e,i){return C.assert(this.tg,"Headers not available on old architecture prefetch viewables."),this.tg.l7(t,e,!!i)},s.prototype.Tac=function(t,e){this.IE.push({stream:t,pVb:e})},s.prototype.Jgb=function(){this.IE=[]},s.prototype.t9b=function(e){this.IE=this.IE.filter(function(t){return t.stream!==e})},s.prototype.s9b=function(e){this.IE=this.IE.filter(function(t){return t!==e})},s.prototype.OP=function(){var s=this;return C.assert(this.Zo,"Streamables not available on old architecture prefetch viewables."),this.Zo()?[]:this.IE.map(function(t){var e=t.stream,i=(o=(i=t.pVb)()).bi,n=o.Cf,r=o.qC,a=o.qu,o=o.xt;return{identifier:"".concat(e.N,"-").concat(e.mediaType,"-").concat(e.bitrate),mediaType:e.mediaType,bi:i,Cf:n,qC:r,qu:a,xt:o,eAa:0,dAa:1/0,Y_:1,GC:1,G4a:0,groupId:"".concat(s.N),wF:!0,Jt:!1,x$a:function(){return{result:!0}},B$a:function(){return e.BG()?(s.t9b(e),{Bj:!0,reason:"success"}):(s.s9b(t),{Bj:!1,reason:"viewableTryIssueHeaderRequest"})}}})},s.prototype.BG=function(t,e){return C.assert(this.tg,"Headers not available on old architecture prefetch viewables."),this.tg.BG(t,e)},s.prototype.ON=function(t,e){return C.assert(this.tg,"Headers not available on old architecture prefetch viewables."),this.tg.ON(t,e)},s.prototype.uBa=function(t){return C.assert(this.tg,"Headers not available on old architecture prefetch viewables."),this.tg.uBa(t)},s.prototype.PK=function(t,e,i){return C.assert(this.tg,"Headers not available on old architecture prefetch viewables."),this.tg.PK(t,e,i)},s.prototype.$Vb=function(t){var e,i;B=t.Pa,e=t.mediaType,this.ub||this.gmb(e,t.stream.da),B=this.ly(e,B),i=this.ty()?this.config.ybb:0,B.Zlb(P.default.oq()[e],i),this.Sv.emit("onHeaderFragments",t)},s.prototype.PAa=function(t){this.mi.push(t)},s.prototype.oEa=function(t){t=this.mi.indexOf(t),C.assert(-1!==t,"Unexpected call to unregisterBranch, branch not registered with Viewable."),this.mi.splice(t,1)},s.prototype.Zca=function(t){var e;null!=(e=this.KR)&&e.bv(t)},s.prototype.oC=function(t){this.el?this.console.warn("onloadstart ignored, viewable cleaned up, mediaRequest:",t):void 0!==t.location&&this.bhb(t.mediaType,t.location)},s.prototype.qK=function(t){this.el?this.console.warn("onprogress ignored, viewable cleaned up, mediaRequest:",t):this.Kr.Pfa(t)},s.prototype.gl=function(t){var e;null!=(e=this.KR)&&e.CC(t),C.assert(this.Zo&&this.j_,"Requests cannot be handled on old architecture prefetch viewables."),this.el?this.console.warn("oncomplete ignored, viewable cleanuped, mediaRequest:",t):this.Zo()||(this.Kr.Pfa(t),this.j_(t))},s.prototype.x_=function(t,e,i){i&&null!=(i=this.KR)&&i.CC(t)},s.prototype.y_=function(t){this.el?this.console.warn("onerror ignored, viewable cleaned up, mediaRequest:",t):(this.Kr.cu(t,void 0,t.status,t.qg,t.zi),this.ub&&!t.Cc&&t.xq&&!t.bz.Rfb(t.xq)?this.Kfc(t):this.bm()||this.Sf(t.tP||"unknown","NFErr_MC_StreamingFailure",t.qg,t.status,t.zi))},s.prototype.Kfc=function(t){var e,i;try{for(var n=k.__values(this.mi),r=n.next();!r.done;r=n.next())(i=r.value.ab(t.mediaType))&&i.n8b(t)}catch(t){var a={error:t}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}},s.prototype.gmb=function(t,e){this.lWa[t]=e.Fxa},s.prototype.YVb=function(t){var e,i,n;this.po||(e=t.hZb,i=t.T4b,n=t.V4b,t=t.W4b,this.console.warn("Streaming failure, is permanent: "+e+", last error code: "+i+", last http code: "+n+", last native code: "+t),(e=e?(this.console.warn(" > Permanent failure, done"),this.Sf("Permanent failure","NFErr_MC_StreamingFailure",i,n,t)):(this.console.warn(" > We are buffering, calling it!"),this.Sf("Temporary failure while buffering","NFErr_MC_StreamingFailure",t,n,t,!0)))||(this.console.warn(" > Resetting failures"),this.Kr.lea()))},s.prototype.XVb=function(){C.assert(this.Et,"Error handling not available on old architecture prefetch viewables."),this.po||(this.bm(),this.Et())},i=k.__decorate([a.kJ],s),e.Tga=i},function(t,e,i){function n(t,e){this.uA=t,this.$M=e.Za,this.tx=e.mb}_esm(e),e.iD=void 0,t=i(36),i=i(78),Object.defineProperties(n.prototype,{Za:{get(){return void 0!==this.$M?this.$M:this.uA.Za},configurable:!0},mb:{get(){return void 0!==this.tx?this.tx:this.uA.mb},configurable:!0},aa:{get(){return this.uA.aa},configurable:!0},Lj:{get(){return this.uA.Lj},configurable:!0}}),n.prototype.S0=function(t){this.tx=t},n.prototype.Opa=function(){this.tx=void 0},e.iD=e=n,t.Ve(i.Au,e),t.Ve(i.Dz,e)},function(t,e,i){var n;function r(t,e){this.WH=t,this.LH=e,this.O$b()}_esm(e),e.IM=void 0,n=i(19),r.from=function(t){return"number"==typeof t?new r(t,1):new r(t.lw,t.rv)},r.DRb=function(t){return new r(t.aa,t.fb)},Object.defineProperties(r.prototype,{lw:{get(){return this.WH},configurable:!0},rv:{get(){return this.LH},configurable:!0}}),r.prototype.oa=function(){return new n.M(this.LH,this.WH)},r.prototype.equal=function(t){return this.WH===t.WH&&this.LH===t.LH},r.prototype.normalize=function(t){var e=1e3*this.rv;return Math.floor(Math.floor((Math.floor(t+1)*this.lw-1)/e)*e/this.lw)},r.prototype.O$b=function(){var t=Math.floor(1e3*this.WH/this.LH),e=Math.floor(1001*this.WH/this.LH),i=1e3*Math.round(t/1e3);this.WH=i,this.LH=Math.abs(e-i)>Math.abs(t-i)?1e3:1001},e.IM=r},function(t,e,i){var n,c,r,h,o,a,f,s,u,l,d;function p(t,e,i,n,r,a,o,s,u){var c=this;return(c=d.call(this)||this).H=t,c.Zg=e,c.ig=i,c.Bd=n,c.K=r,c.Yzb=a,c.U=o,c.sr=s,c.Uh=u,c.TXa=!1,c.cVa=!1,c.GV=!1,c.Ik=c.H.error.bind(c.H),c.Qb=c.H.warn.bind(c.H),c.Xj=c.H.trace.bind(c.H),null!=(t=n.events)&&t.addListener("ready",function(){c.qx()}),c.$bb=new f.ENa(c.K,c.Zg,c.ig.Rc,c.H),c.reset(),c}_esm(e),e.gha=e.jw=void 0,n=i(0),t=i(12),c=n.__importDefault(i(28)),r=i(6),h=n.__importDefault(i(3)),o=i(19),a=i(2),f=i(976),s=i(106),u=i(64),l=i(22),e.jw=function(t){return t.Ea(o.M.Ja(t.WK))},d=t.EventEmitter,n.__extends(p,d),Object.defineProperties(p.prototype,{endOfStream:{get(){return this.RU},configurable:!0},hhc:{get(){return this.cn.length},configurable:!0},XZb:{get(){return this.vl},configurable:!0},ukb:{get(){return!!this.Bd.oPb},configurable:!0}}),p.prototype.reset=function(t){var e;null!=(e=this.BWa)&&e.tb(),this.Lk=!1,t||(this.cn=[]),this.vl=this.Xla=this.RH=void 0,this.Fla=!1,this.rN=void 0,this.GV=this.RU=!1,this.vXa(o.M.Ka),null!=(t=(e=this.Bd).reset)&&t.call(e),this.$bb.reset()},p.prototype.O4a=function(){this.Xla=!0},p.prototype.pause=function(){this.Lk=!0},p.prototype.resume=function(){this.Lk=!1,this.qx()},p.prototype.rB=function(){this.cVa=!0,this.Lk||this.qx()},p.prototype.nG=function(t){this.TXa=t},p.prototype.Jta=function(){var t;return null==(t=this.vl)?void 0:t.gf},p.prototype.FEb=function(t){var e;this.K.t3a&&(a.assert(t.Va),e=t.Va.$a,a.assert(void 0!==t.dd),a.assert(void 0!==e.Ic),t.dd>=e.Ic)||(this.cn.push(t),this.qx())},p.prototype.Ow=function(){this.qx()},p.prototype.v0=function(t){-1!==(t=this.cn.indexOf(t))&&this.cn.splice(t,1)},p.prototype.ndb=function(t,e){this.K.foa&&e&&void 0===this.vl&&this.yUa(t,0),this.qx()},p.prototype.i_=function(t,e){var i,n=this;void 0===t&&(t=!1),this.RU||(this.RU=!0,this.qx(),!t&&this.ukb)||(e&&this.sr&&this.K.KMb?(t=o.M.Ja(this.K.Wkb),e=e.Ea(t),e=(t=u.kga(this.sr,e,!0)).ao,t=t.promise,null!=(i=this.BWa)&&i.tb(),this.BWa=e,t.then(function(){n.RU&&n.Bd.endOfStream()})):this.Bd.endOfStream())},p.prototype.Jea=function(){return JSON.stringify(this.cn)},p.prototype.vXa=function(t){var e;null!=(e=this.TBb)&&e.equal(t)||(this.TBb=t,this.Bd.xbc(t.fb,t.aa))},p.prototype.qx=function(){var t,e,i,n,r,a,o,s,u=this.K;if(this.cn.length||this.vl&&!this.vl.me)if(this.Bd&&!1!==this.Bd.ready){if((!this.vl||this.vl.me||this.vl.Tr())&&(this.vl&&!this.vl.me||this.cn.length))if(this.Lk)n=this.vl&&!this.vl.me?this.vl:this.cn[0],this.BN("@"+h.default.time.ia()+", bufferManager _append ignored, paused, nextRequest: "+JSON.stringify(n));else if((!this.vl||this.vl.me||(this.YUa(this.vl),this.vl.me))&&this.cn.length)if((n=this.cn[0]).aborted)this.Qb("aborted MediaRequest should not appear in the toAppend list:",n.toString(),"complete:",n.complete),this.BN("@"+h.default.time.ia()+", append: removing aborted request from toAppend: "+n.toString()),this.cn.shift();else if(a=(r=n.stream).T,r.Mg)if(n.Dv&&!this.GV&&(null!=(e=(t=this.Bd).Kjb)&&e.call(t,{N:r.track.T.N,R9a:r.Aj}),this.GV=!0),this.Mbc(r,n.index))this.Xla=!1,this.yUa(r,n.index);else if(t=this.U.Yo(a),r=this.AXb(r),t||r||!this.Fla&&!u.iga)if(t=this.u7a(n),this.Zg!==c.default.Sd.P||!n.$o&&!n.vy||!n.Ha||u.RK||this.RU||1!==this.cn.length||!(t>u.a_)||null!=(i=n.aL)&&i.$aa){if(!((u.t3a||u.MOb)&&(i=n.Va.$a,(e=this.fNb())&&(o=i.Cl,s=n.Ic>=e,t=t>u.a_,e<i.Ic&&s&&t&&!o))))if(u.G5b&&this.Uh&&(u=this.Uh(a.Ub))&&!u.cW)this.pause();else{this.Fla||(this.Fla=r),this.cn.shift();try{this.Owb(n)}catch(t){throw this.H.error(t),t}}}else this.Z$b()}else this.BN("@"+h.default.time.ia()+", append: not appending, sourceBuffer not ready")},p.prototype.Z$b=function(){var t=this;this.sr&&(this.qwa?this.qwa.yYb||this.qwa.ij():this.qwa=this.sr.iB(function(){return t.OZb()},"JIT Appender"))},p.prototype.OZb=function(){var e,i;return n.__generator(this,function(t){switch(t.label){case 0:return 1!==this.cn.length?[3,3]:!(e=this.cn[0]).$o&&!e.vy||null!=(i=e.aL)&&i.$aa?[2]:(i=this.u7a(e),(e=this.K.a_)<i?[4,u.Oh.GG(o.M.Ja(i-e))]:[3,2]);case 1:t.ib(),t.label=2;case 2:return this.qx(),[3,0];case 3:return[2]}})},p.prototype.u7a=function(t){return t.ud-this.U.Qe()},p.prototype.Mbc=function(t,e){return!(!this.Xla&&void 0!==this.RH&&t.Pa===this.RH.Pa)||(t=t.Mg,a.assert(t),1<t.length&&l.C7(t,function(t){return t.ee<=e})!==this.RH.X9a)},p.prototype.AXb=function(t){return t.mediaType===r.u.P||!t.Aj||void 0!==this.RH&&(t.track.PZ?(t=t.Mg,a.assert(t),!1===t[this.RH.X9a].pm):!t.Aj)},p.prototype.fNb=function(){throw Error("not supported")},p.prototype.yUa=function(t,n){var e,i,r,a;if(!this.TXa||this.cVa){if(r=t.Mg.reduce(function(t,e,i){return e.ee<=n?i:t},0),a=t.Mg[r],this.RH||(null!=(i=(e=this.Bd).Kjb)&&i.call(e,{N:t.track.T.N,R9a:t.Aj}),this.GV=!0),!this.Bd.appendBuffer(a.data,{Cc:!0,profile:t.profile,bitrate:t.bitrate,Pa:t.id}))throw this.Qb("appendHeader error: "+this.Bd.error),this.BN("@"+h.default.time.ia()+", appendHeader error: "+this.Bd.error),Error("appendHeaderError");this.BN("@"+h.default.time.ia()+", header appended, streamId: "+t.Pa),this.RH={Pa:t.Pa,X9a:r},this.gBb(t.T.Ub||0,t.Pa,r),this.qx()}},p.prototype.Owb=function(t){var e,i,n=this,r=t.wAa||o.M.Ka,a=t.Va.$a.G;a.Qa&&1/0!==a.Qa&&(r=new o.M(a.Qa,1e3).add(r).Fh,1/0===this.ig.duration||this.ig.duration<r)&&(this.ig.duration=r),r=void 0!==t.RC?o.M.Ja(t.RC).add(t.wAa):void 0,a=null==(e=this.cn[0])?void 0:e.vd,e={endOfStream:this.endOfStream||!(null==(i=t.aL)||!i.$aa),JQ:r,pya:a},i=(r=this.$bb.append(t,e)).yj,a=r.Ej,e=r.response,r=r.offset,null!=a&&a.forEach(function(t){return n.emit(t.type,t)}),(a=t.stream).ub&&(a=a.cF().n7b,r=r.Ea(a)),this.vXa(r),i&&(t.$o||t.vy)&&t.yj(),this.YUa(t,i,e)},p.prototype.YUa=function(t,e,i){var n,r,a;switch(i=(a=(e=void 0===e?!1:e)?{status:s.Kh.Fs,ik:void 0}:t.jE(this.ig,this.Bd,this.ig.Rc,void 0,i)).status,(a=a.ik)&&this.emit(a.type,a),i){case s.Kh.Jf:this.Nwb(t);break;case s.Kh.Fs:e||(this.vl=t,void 0===this.rN||this.Zg!==c.default.Sd.P||t.vd.equal(this.rN)||(this.rN=void 0),this.BN("@"+h.default.time.ia()+", request appended, type: "+t.mediaType+", streamId: "+t.Pa+", pts: "+t.ud+"-"+t.gf)),t.$o||t.vy?(this.rN=e?t.vd:t.Mc,null!=(r=(n=this.Bd).oPb)&&r.call(n,t.aL),this.GV=!1,null!=(r=t.aL)&&r.$aa&&this.Yzb&&this.i_(!1,this.rN)):this.rN=void 0,this.hBb(t),this.qx()}},p.prototype.Nwb=function(t){if(void 0===this.Bd.error)throw t=Error("failure to append queued mediaRequest: "+(null==t?void 0:t.toString())+" err: "+this.Bd.error),this.Ik(t.message),t;if("done"!==this.Bd.error)throw this.Ik("failure to append queued mediaRequest:",null==t?void 0:t.toString(),"err:",JSON.stringify(this.Bd.error)),this.Bd.error},p.prototype.gBb=function(t,e,i){t={type:"headerAppended",mediaType:this.Zg,manifestIndex:t,streamId:e,isIndex:i},this.emit(t.type,t)},p.prototype.hBb=function(t){t={type:"requestAppended",mediaType:this.Zg,request:t},this.emit(t.type,t)},p.prototype.BN=function(t){this.emit((t={type:"managerdebugevent",message:t}).type,t)},e.gha=i=p},function(t,e,i){var n;function r(t,e){return t<e?-1:e<t?1:0}function a(t,e){if(this.data=null!=t?t:[],this.compare=null!=e?e:r,!this.empty)for(t=(this.length>>1)-1;0<=t;t--)this.Hla(t)}_esm(e),e.s4=void 0,n=i(0),Object.defineProperties(a.prototype,{length:{get(){return this.data.length},configurable:!0},empty:{get(){return 0===this.data.length},configurable:!0}}),a.prototype.push=function(t){this.data.push(t),this.NXa(this.length-1)},a.prototype.pop=function(){var t,e;if(!this.empty)return t=this.data[0],e=this.data.pop(),this.empty||(this.data[0]=e,this.Hla(0)),t},a.prototype.My=function(){return this.data[0]},a.prototype.map=function(t){return this.data.map(t)},a.prototype.find=function(t){return n.__read(this.data.filter(t),1)[0]},a.prototype.clear=function(){this.data=[]},a.prototype.remove=function(t){var e,i,n=this.data;-1!==(t=n.indexOf(t))&&(e=n.pop(),t<n.length&&(n[t]=e,n=n[i=t-1>>1],0<=i&&this.compare(e,n)<0?this.NXa(t):this.Hla(t)))},a.prototype.WEb=function(){for(var t=this.data,e=1;e<t.length;e++)if(this.compare(t[e],t[e-1>>1])<0)throw Error("Audit failed at position ".concat(e," of ").concat(t))},a.prototype.contains=function(t){return 0<=this.data.indexOf(t)},a.prototype.NXa=function(t){for(var e,i,n=this.data,r=this.compare,a=n[t];0<t&&!(0<=r(a,i=n[e=t-1>>1]));)n[t]=i,t=e;n[t]=a},a.prototype.Hla=function(t){for(var e,i,n,r=this.data,a=this.compare,o=this.length>>1,s=r[t];t<o&&(n=r[e=1+(t<<1)],(i=e+1)<this.length&&a(r[i],n)<0&&(n=r[e=i]),!(0<=a(n,s)));)r[t]=n,t=e;r[t]=s},e.s4=a},function(t,e,i){var n;_esm(e),e.xda=void 0,n=i(6),e.xda=function(t){switch(t){case n.za.ed:t=n.Nc.ed;break;case n.za.eg:t=n.Nc.eg;break;case n.za.Dg:case n.za.Uj:case n.za.Ns:t=n.Nc.Uj;break;default:t=n.Nc.Vj}return t}},function(t,e,i){var n,r,a;function o(t){var e;((e=this).items=t=void 0===t?[]:t).forEach(function(t){return e.uEa(t)})}_esm(e),e.qM=void 0,n=i(2),r=i(6),a=i(22),Object.defineProperties(o.prototype,{length:{get(){return this.items.length},configurable:!0},$_:{get(){var t;return null!=(t=this.video)?t:this.audio},configurable:!0}}),o.prototype.get=function(t){return t===r.u.J?this.video:this.audio},o.prototype.every=function(t){return this.items.every(t)},o.prototype.some=function(t){return this.items.some(t)},o.prototype.forEach=function(t){this.items.forEach(t)},o.prototype.find=function(t){return a.Xc(this.items,t)},o.prototype.reduce=function(t,e){return this.items.reduce(t,e)},o.prototype.filter=function(t){return new o(this.items.filter(t))},o.prototype.replace=function(t,e){var i=this.items.indexOf(t);n.assert(-1<i),n.assert(t.mediaType===e.mediaType),this.items[i]=e,this.uEa(e)},o.prototype.Nac=function(t,e){(t=this.get(t))?this.replace(t,e):this.add(e)},o.prototype.add=function(t){this.items.push(t),this.uEa(t)},o.prototype.remove=function(t){var e=this.items.indexOf(t);return-1!==e&&(this.items.splice(e,1),this.NHb(t.mediaType),!0)},o.prototype.clear=function(){this.items=[],this.audio=this.video=void 0},o.prototype.uEa=function(t){t.mediaType===r.u.J?this.video=t:this.audio=t},o.prototype.NHb=function(t){t===r.u.J?this.video=void 0:this.audio=void 0},e.qM=o},function(t,e,i){var n,l,r,d,p,b,g,m;_esm(e),e.z2=void 0,n=i(0),i(2),t=i(36),l=n.__importDefault(i(28)),r=n.__importDefault(i(3)),d=i(188),p=i(74),b=i(106),g=r.default.Ks,m=i(1003),i=function(h){function f(t,e,i,n,r,a,o,s){for(var u=2;6!==u;)switch(u){case 2:var c=this;c=(c=["cache","edit"].filter(function(t,e){return[r,i.Ha][e]})).length?"("+c.join(",")+")":"",void 0===i.responseType&&(i.responseType=i.Ha||g.Rc&&!g.Rc.D0.sU?0:1),c=h.call(this,t,e,c,i,n,a,o)||this,u=8;break;case 8:return p.yk.xa(c,t,i,s),c}}for(var t=2;9!==t;)switch(t){case 2:n.__extends(f,h),f.create=function(t,e,i,n,r,a,o,s){for(var u,c=2;11!==c;)switch(c){case 2:c=!e.Hh&&n.Ha&&t.mediaType===l.default.Sd.J&&g.Rc&&g.Rc.D0.sU?1:5;break;case 5:c=n.EQ&&n.fa>n.EQ?4:12;break;case 14:var h;a+=(h={offset:a,fa:Math.min(u,s),responseType:n.responseType}).fa,u-=h.fa,r.push(new b.B2(t,i,"subrequest",h,r,e,o)),c=6;break;case 1:return new m.RFa(t,i,n,r,a,e,o,s);case 4:h=Math.ceil(n.fa/n.EQ),a=n.offset,u=n.fa,r=new d.Cz(t,n,r,e,o,s),c=7;break;case 7:s=Math.ceil(n.fa/h),c=6;break;case 6:c=0<u?14:13;break;case 13:return r;case 12:return new f(t,i,n,r,a,e,o,s)}},t=5;break;case 5:return f.prototype.toString=function(){return"ID: "+this.Vh()+":"+p.yk.prototype.toString.call(this)},f.prototype.toJSON=function(){return{ID:this.Vh(),request:p.yk.prototype.toJSON.call(this)}},f}}(b.B2),e.z2=i,t.Ve(p.yk,i,!1)},function(t,e,i){_esm(e),i(0).__exportStar(i(1010),e)},function(t,e,i){var n,h,f,r,a,l,d;function o(t,e,i,n,r,a,o,s,u,c){this.BRb=t,this.R4b=e,this.ZN=n,this.events=r,this.Vs=a,this.slb=s,this.priority=u,this.Kl=[],this.console=f.ai(l.default,e,"PresentationTracker [".concat(this.BRb,"] ").concat(this.slb,"]")),this.rza=d.add(f.M.Ja(null!=(r=null==(t=a.dS)?void 0:t.W)?r:0)),this.listeners=new h.Kf,this.Oza=new h.Kf,this.FV=!c,this.tLb(o),this.Lib(i,o,n)}_esm(e),e.L4=void 0,n=i(0),h=i(12),f=i(8),r=i(10),a=i(64),l=n.__importDefault(i(3)),d=f.M.Ja(1e3),o.prototype.Lib=function(t,e,i){var n=this;this.ZN=i,this.listeners.clear(),this.Oza.clear(),this.Ia=t,this.$d=e,this.Oza.on(t.U,"skipped",this.t_.bind(this)),this.listeners.on(i,"requestAppended",function(t){return n.ew(t.request)}),this.events=t.events,this.aP.K_a(e),this.g0.K_a(e)},o.prototype.tLb=function(t){var e=this;this.aP=t.iB(function(){return e.uOb()},"Presentation Emit",this.priority),this.g0=t.iB(function(){return e.a8b()},"Presentation Prune")},o.prototype.t_=function(){this.trace("skipped, scheduler clock ".concat(this.$d.Da.currentTime.ac())),this.FV=!0,this.aP.ij()},o.prototype.uOb=function(){var e,i;return n.__generator(this,function(t){switch(t.label){case 0:r.S&&this.console.trace("Starting emit job"),this.HK=this.Q2b(this.FV),e=this.Vcb(),t.label=1;case 1:return e?(this.trace("queuing task for ".concat(e.Mw)+" at player time ".concat(e.timestamp.ac())+" scheduler clock is ".concat(this.$d.Da.currentTime.ac())),[4,a.Oh.Rw(e.timestamp)]):[3,3];case 2:t.ib(),this.trace("executing task for ".concat(e.Mw)+" at player time ".concat(e.timestamp.ac())+" scheduler clock is ".concat(this.$d.Da.currentTime.ac())),i=this.FV?this.Ia.se:null==e?void 0:e.timestamp,this.FV=!1;try{this.Cra(e,i)}catch(t){this.console.error("Error in ".concat(this.slb," emit, continuing"),t)}return this.HK++,e=this.Vcb(),i=null==e?void 0:e.timestamp,[3,1];case 3:return r.S&&this.console.trace("Ending emit job"),[2]}})},o.prototype.Vcb=function(){if(void 0!==this.HK)return this.Kl[this.HK]},o.prototype.Q2b=function(t){for(var e,i,n=!(t=void 0===t?!1:t)&&null!=(e=this.HK)?e:0;n<this.Kl.length;n++)if(e=this.Kl[n],i=f.M.Ja(null!=(i=this.Vs.Pza)?i:0),e.timestamp.greaterThan(this.Ia.se.add(i)))return t&&0<n?n-1:n;return Math.max(this.Kl.length-1,0)},o.prototype.a8b=function(){var e;return n.__generator(this,function(t){switch(t.label){case 0:return 1<this.Kl.length?(e=n.__read(this.Kl,2),e=e[1],this.trace("queuing pruning task for ".concat(e.Mw)+" at player time ".concat(this.rza.add(e.timestamp).ac())+" scheduler clock is ".concat(this.$d.Da.currentTime.ac())),[4,a.Oh.Rw(this.rza.add(e.timestamp))]):[3,2];case 1:return t.ib(),this.trace("executing pruning task for ".concat(e.Mw)+" at player time ".concat(this.rza.add(e.timestamp).ac())+" scheduler clock is ".concat(this.$d.Da.currentTime.ac())),this.Kl.shift(),this.HK&&this.HK--,[3,0];case 2:return[2]}})},o.prototype.dt=function(t,e,i){this.Lib(t,e,i)},o.prototype.reset=function(){this.Kl=[],r.S&&this.trace("reset"),this.FV=!0,this.pQ=void 0,this.HK=0,this.g0.ij(),this.aP.ij()},o.prototype.close=function(){r.S&&this.trace("close()"),this.Oza.clear(),this.aP.tb(),this.g0.tb(),this.listeners.clear(),this.Kl=[]},o.prototype.dh=function(t){var e;return r.S&&this.trace("canSkip() ".concat(t)),0===this.Kl.length?(r.S&&this.trace("canSkip false, no media sequence"),!1):(e=this.Kl[0]).timestamp.greaterThan(t)?(r.S&&this.trace("canSkip false, before earliest item at ".concat(e.timestamp)),!1):void 0!==this.pQ&&!this.pQ.lessThan(t)||(r.S&&this.trace("canSkip false, later than last appended at ".concat(this.pQ)),!1)},o.prototype.trace=function(t){r.S&&this.console.trace(t)},o.prototype.Lna=function(t,e,i){return i&&(this.pQ=i),(void 0===(i=this.Kl.length?this.Kl[this.Kl.length-1]:void 0)||!this.D$a(i.Mw,t))&&(this.Kl.push({Mw:t,timestamp:e}),this.aP.state===a.lo.complete&&this.aP.ij(),this.g0.state===a.lo.complete&&this.g0.ij(),!0)},o.prototype.D$a=function(t,e){var i;return t===e||(null==(i=t.S3a)?void 0:i.call(t,e))},o.prototype.aIb=function(t){t.Kl=n.__spreadArray([],n.__read(this.Kl),!1),t.pQ=this.pQ},e.L4=o},function(t,e,i){var o,n;function r(){}function a(t,e){this.kn=t,void 0!==e?(n(e<=t.Un,"require remain_sec <= chunk.sec but has "+e+" and "+t.Un),this.Ul=e):this.Ul=t.Un}function s(t){var e;void 0===t&&(t=[]),this.au=[],this.ei=this.Km=0;try{for(var i=o.__values(t),n=i.next();!n.done;n=i.next())this.add(n.value,void 0)}catch(t){var r={error:t}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(r)throw r.error}}}o=i(0),n=i(2).assert,r.prototype=Error(),(a.prototype.constructor=a).prototype.si=function(){return new a(this.kn,this.Ul)},(s.prototype.constructor=s).prototype.add=function(t,e){t=new a(t,e),this.au.push(t),this.ei+=t.Ul,this.Km+=t.kn.FB()*t.Ul},s.prototype.si=function(){var t,e,i=new s(void 0);try{for(var n=o.__values(this.au),r=n.next();!r.done;r=n.next())e=r.value,i.add(e.kn,e.Ul)}catch(t){var a={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},s.prototype.Ov=function(){try{return this.au[0]}catch(t){}},s.prototype.Teb=function(t){var e;for(n(0<=t,"unexpected play_for_x_sec: x="+t);0<t;){if(void 0===this.Ov())throw new r;t<this.Ov().Ul?(e=this.Ov().kn.FB()*t,this.Ov().Ul-=t,this.ei-=t,this.Km-=e,t=0):(e=this.au.shift(),this.ei-=e.Ul,this.Km-=e.kn.FB()*e.Ul,t-=e.Ul)}},s.prototype.k6b=function(t){var e;n(0<=t,"unexpected play_y_kb: y="+t);for(var i=0;0<t;){if(void 0===this.Ov())throw new r;t<this.Ov().Ul*this.Ov().kn.FB()?(e=t/this.Ov().kn.FB(),this.Ov().Ul-=e,this.ei-=e,this.Km-=t,i+=e,t=0):(e=this.au.shift(),this.ei-=e.Ul,this.Km-=e.kn.FB()*e.Ul,i+=e.Ul,t-=e.kn.FB()*e.Ul)}return i},t.exports={PGa:s,npb:r}},function(t){t.exports={MMa:{code:-1,description:"MediaCache is not supported."},Ulc:{code:100,description:"Resource was not found"},gtb:{code:101,description:"Resource Metadata was not found"},AM:{code:102,description:"Read failed",Ds:function(t,e){return{code:this.code,description:t,cause:e}}},s5:{code:200,description:"Daily write limit exceeded"},WL:{code:201,description:"Capacity has been exceeded"},r5:{code:202,description:"Write failed, cause unknown",Ds:function(t,e){return{code:this.code,description:t,cause:e}}},Tmc:{code:203,description:"Write failed, cause unknown"},kqb:{code:300,description:"Failed to delete resource",Ds:function(t,e){return{code:this.code,description:t,cause:e}}},tD:{code:900,description:"Invalid partition name"},Esb:{code:700,description:"Invalid parition configuration, commitment exceeds capacity."},VHa:{code:701,description:"Failed to initialize underlying disk cache."},ftb:{code:800,description:'Metadata failed to pass validation. Metadata must be an object with a numeric "lifespan" property.'}}},function(t){t.exports={Z7a:function(t){var n;if(t&&0!==t.length)return n=[],t.forEach(function(e){var i;void 0===e.error.code&&(e.error.code=0),void 0===e.error.description&&(e.error.description="Unknown"),n.forEach(function(t){e.error&&e.error.code==t.error.code&&e.error.description===t.error.description&&(i=t)}),i?i.resources.push(e.qs):n.push({error:e.error,resources:[e.qs]})}),n},P5a:function(t){var e={freeSize:t.Oo,dailyBytesRemaining:t.LO,bytesWritten:t.zl,time:t.time,duration:t.duration};return t.items&&(e.items=t.items.map(function(t){return{key:t.key,operation:t.Nl,itemBytes:t.eba,error:t.error}})),e},Vy:function(t){return t.catch(function(t){setTimeout(function(){throw t},0)})}}},function(t,e,i){var n,r,a;_esm(e),e.tJ=void 0,n=i(0).__importDefault(i(3)),r=i(1067),e.tJ=function(){var t;return a||(t=new n.default.Console("ASEJS","media|asejs"),a=new r.EFa(t)),a}},function(t,e,i){var n,r;function a(t){void 0===t&&(t={gk:!1,currentTime:r.M.Ka,speed:1}),this.Qc={gk:function(){return"function"==typeof t.gk?t.gk():t.gk},currentTime:function(){return"function"==typeof t.currentTime?t.currentTime():t.currentTime},speed:function(){return"function"==typeof t.speed?t.speed():t.speed}}}_esm(e),e.c5=void 0,t=i(12),n=i(36),r=i(19),Object.defineProperties(a.prototype,{gk:{get(){return this.Qc.gk()},configurable:!0},currentTime:{get(){return this.Qc.currentTime()},configurable:!0},speed:{get(){return this.Qc.speed()},configurable:!0}}),e.c5=i=a,n.Ve(t.EventEmitter,i)},function(t,e,i){var f;_esm(e),e.Ihb=e.O6a=e.map=void 0,f=i(0),i(1106),e.map=function(h){return function(u,c){return void 0===c&&(c=!1),function(t,e,i){var n,r,a=Reflect.f7a(h,t,e)||{},o="number"==typeof i,s=c;(r=o?null!=(r=(null!=(n=a.Fb)?n:{})[i])?r:{}:s?a.return:a.Xxa)||(r={rules:[]}),n=f.__assign(f.__assign(f.__assign({},r),u),{rules:f.__spreadArray(f.__spreadArray([],f.__read(null!=(r=r.rules)?r:[]),!1),f.__read(null!=(r=u.rules)?r:[]),!1)}),o?(a.Fb||(a.Fb={}),a.Fb[i]=n):s?a.return=n:a.Xxa=n,Reflect.T8(h,a,t,e)}}},e.O6a=function(r){return function(t,e){var i,n;for(t=null!=(i=null!=(i=null==(i=t.__proxyCtor)?void 0:i.prototype)?i:null==(i=null==t?void 0:t.constructor)?void 0:i.prototype)?i:t;t&&void 0===n;)n=Reflect.f7a(r,t,e),t=t.__proto__;return n}},e.Ihb=function(){return function(){return function(t){return t}}}},function(t,e,i){var n,r,a,h,o,u,c;function s(t,e,i,n,r,a,o,s){return(e=c.call(this,"cdnList".concat(u++),e,i,n,r,a,o,"cdnList",s)||this).Jg=t,e.xa(),e}_esm(e),e.rT=void 0,n=i(0),r=i(12),a=i(2),h=i(22),o=i(10),u=0,c=i(270).L4,n.__extends(s,c),s.prototype.xa=function(){var e=this;this.zN=new r.Kf,this.zN.on(this.Ia.U,"skipped",function(t){e.yDa(null==t?void 0:t.Krc)}),this.zN.on(this.Ia.U,"paused",function(){e.yDa()}),this.zN.on(this.Ia.U,"playing",function(){e.MD=void 0}),this.zN.on(this.Ia.U,"underflow",function(){e.yDa()})},s.prototype.dt=function(t,e,i){this.zN.clear(),c.prototype.dt.call(this,t,e,i),this.xa()},s.prototype.close=function(){o.S&&this.console.trace("close"),c.prototype.close.call(this),this.zN.clear()},s.prototype.yDa=function(t){var e;this.MD&&(t||this.Ia.Fe)&&this.rA&&(t=t||this.Ia.se,this.MD.greaterThan(t))&&(e=this.MD.Ea(t),this.rA.totalTime-=e.W,this.MD=t)},s.prototype.YCa=function(t){var e,i;return this.m6&&this.rA&&this.MD?(i=this.rA.totalTime,this.MD.zj(t)&&(i-=(t=this.MD.Ea(t)).W),i=n.__assign(n.__assign({},this.Jg),((t={})[this.m6]=n.__assign(n.__assign({},this.Jg[this.m6]),{pB:n.__assign(n.__assign({},this.Jg[this.m6].pB),((e={})[this.rA.Wb]=n.__assign(n.__assign({},this.rA),{totalTime:i}),e))}),t)),o.S&&this.console.trace("getting snapshot",{moc:this.Jg,result:i}),i):this.Jg},s.prototype.ew=function(t){var e=t.stream,i=t.vd,n=t.Mc;a.assert(void 0!==i),o.S&&this.console.trace("Media appended",{vd:i,Mc:n}),this.Lna({request:t,vmb:e.url,S3a:function(t){return this.request===t.request}},i,n)},s.prototype.yta=function(t){var e,i,n;return t=t.Mw,i=t.vmb,n=(t=t.request.stream).FF,a.assert(n,"manifestStream should exist)"),n=null==(e=h.Xc(n.urls,function(t){return t.url===i}))?void 0:e.Bo,e=null==(t=t.T.ja.wO)?void 0:t.jp,"".concat(n,"::").concat(e)},s.prototype.Cra=function(t,e){var i,n,r,a,o=this.Jg,s=t.Mw,u=s.request,c=s.vmb;s=u.duration,u.vd&&e.greaterThan(u.vd)&&(s-=e=e.Ea(u.vd).W),(n=(e=u.stream).FF)&&(r=null==(r=h.Xc(n.urls,function(t){return t.url===c}))?void 0:r.Bo,a=null==(i=e.T.ja.wO)?void 0:i.jp,i=e.track.L,o=o[t=this.yta(t)]||(o[t]={Ao:r,jp:a,L:i,pB:{}}),this.m6=t,this.rA=(r=o.pB)[a=n.hq]||(r[a]={bitrate:e.bitrate,Wb:n.hq,mediaType:u.mediaType,totalTime:0,eb:e.eb}),this.MD=u.Mc,this.rA.totalTime+=s)},s.prototype.clone=function(t,e){return t=new((e=void 0===e?{}:e).lkb||s)(t,this.R4b,this.Ia,this.ZN,this.events,this.Vs,this.$d,e.priority),this.aIb(t),o.S&&t.console.trace("Cloning",{znc:t.Kl.length}),t},t=s,e.rT=t},function(t,e){_esm(e),e.bd=void 0,(t=e.bd||(e.bd={})).xFb="bitraterestriction",t.G_a="cdnsel",t.zO="chgstrm",t.debug="debug",t.BNb="dlreport",t.$I="endplay",t.Jva="intrplay",t.IF="midplay",t.sda="playbackaborted",t.Xgb="renderstrmswitch",t.HR="repos",t.MR="resumeplay",t.Gac="serversel",t.rG="startplay",t.Tjb="statechanged",t.transition="transition",t.WBa="segmentdropped",t.pEb="asereport",t.vZa="audioswitch",t.SZa="blockedautoplay",t.config="config",t.mra="dlreq",t.spc="ftlProbeError",t.udc="subtitleerror",t.vdc="subtitleqoe",t.rec="timedtextrebuffer",t.elb="timedtextswitch",t.Gjb="speedchanged"},function(t,e){_esm(e),e.MLa="IsTypeSupportedProviderFactorySymbol",e.UPa="PlatformIsTypeSupportedSymbol"},function(t,e,i){var n,r,a;function o(){this.type=n.Ww.Wz}_esm(e),e.vD=void 0,n=i(26),t=i(125),r=i(95),a=new t.tH,o.WKb=function(){return{isTypeSupported:function(t){var e;try{return-1==t.toLowerCase().indexOf("codec")?bt.MSMediaKeys.isTypeSupported(t,"video/mp4"):1===(e=t.split("|")).length?bt.MSMediaKeys.isTypeSupported(r.Db.$z,t):"probably"===o.DDa(e[0],e[1])}catch(t){return!1}}}},o.y8=function(t,e,i){return e=a.format(o.Nfa,e),0===i.length?e:(i=a.format('features="{0}"',i.join()),a.format("{0}|{1}{2}",t,e,i))},o.DDa=function(t,e){var i;try{i=bt.MSMediaKeys.isTypeSupportedWithFeatures?bt.MSMediaKeys.isTypeSupportedWithFeatures(t,e):""}catch(t){i="exception"}return i},(e.vD=o).Nfa='video/mp4; codecs="{0},mp4a";'},function(t,e){function i(t,i){var n=this;this.status={},t.forEach(function(t,e){n.status[t]=i[e]})}_esm(e),e.M4=void 0,i.prototype.MP=function(){return this.status},i.prototype.N$=function(){return Object.entries(this.status).filter(function(t){return(t=rt(t)).next(),t.next().value.supported}).map(function(t){var e=(t=rt(t)).next().value;return t.next(),e})},e.M4=i},function(t,e,i){var a,n,o,s,r,u,c;function h(t,e,i,n){var r=o.NG.call(this,t,e,a.u.STa,n)||this;return r.config=t,r.lk=e,r.is=i,r.Sba=n,r.type=a.Tm.Iz,r.Ygc=s.Rd.H1a(),r}_esm(e),e.mD=void 0,a=i(26),n=i(42),o=i(484),t=i(125),s=i(123),r=i(246),u=i(101),c=i(281),new t.tH,S(h,o.NG),h.prototype.vL=function(){return Promise.resolve(!1)},h.prototype.pJ=function(){return Promise.resolve("")},h.prototype.r$=function(){return Promise.resolve("")},h.prototype.m1=function(){return this.config().Dra?this.Sba.Sva()?this.Sba.HX(n.I.DT).then(function(t){return{result:t.supported,reason:"media-capabilities"}}):Promise.resolve({result:!1,reason:"non-hdr-display"}):Promise.resolve({result:!1,reason:"disabled"})},h.prototype.qfa=function(){return this.config().Dra?this.Sba.Sva()?this.Sba.HX(n.I.wT).then(function(t){return{result:t.supported,reason:"media-capabilities"}}):Promise.resolve({result:!1,reason:"non-hdr-display"}):Promise.resolve({result:!1,reason:"disabled"})},h.prototype.n1=function(){return Promise.resolve(!1)},h.prototype.k1=function(){return Promise.resolve(!1)},h.prototype.aY=function(t){return this.Ygc[t]},h.prototype.Gna=function(){},h.prototype.K0b=function(t){switch(t){case a.Vq.n4:return"1.4";case a.Vq.$G:return"2.2"}},h.prototype.ut=function(){return r.d3.ut()},h.prototype.r7a=function(){return u.Rlb(function(t,e){return t.name===e.name},this.config().AYa,this.config().ho)},h.prototype.vY=function(){return Promise.resolve(void 0)},h.prototype.G$=function(){return Promise.resolve(void 0)},h.prototype.x8=function(t){var e=[];return this.is.hh(t)&&e.push(this.K0b(t)),[{type:"DigitalVideoOutputDescriptor",outputType:"unknown",supportedHdcpVersions:e,isHdcpEngaged:!!e.length}]},h.prototype.IX=function(t){return this.config().g5b?Promise.resolve(new c.M4(t,t.map(function(){return{supported:!0}}))):o.NG.prototype.IX.call(this,t)},(e.mD=h).Nfa="video/mp4; codecs={0};"},function(t,e){_esm(e),e.Tha=e.Pz=void 0,(t=e.Pz||(e.Pz={})).nwb="unknown",t.jFa="absent",t.iRa="present",t.Error="error",e.Tha="ExternalDisplayLogHelperSymbol"},function(t,e){_esm(e),e.VKa="IDBDatabaseFactorySymbol",e.ALa="IndexedDBFactorySymbol",e.CLa="IndexedDBStorageFactorySymbol"},function(t,e){_esm(e),e.l5="TransportConfigSymbol"},function(t,e){_esm(e),e.B0b=e.BQ=e.z0b=void 0,e.z0b=function(t){return t},e.BQ=function(t){return t},e.B0b=function(t){return Object.assign({},t)}},function(t,e,i){var n,o,h,A,_,E,s,f,r,a,u,c,k;function l(t,e,i,n,r,a,o,s,u,c,h,f,l,d,p,b,g,m,v,y,w){this.j=t,this.trackId=e,this.sy=i,this.cc=n,this.bj=r,this.plb=a,this.Wb=o,this.sv=s,this.nra=u,this.Bf=c,this.displayName=h,this.Hi=f,this.tL=l,this.variant=d,this.gG=p,this.profile=b,this.gw=g,this.YQ=m,this.qRb=v,this.Waa=y,this.Rv=w,this.type=A.pj.zfa,this.vu=void 0,this.Il=!(!b||b!=E.Rm.rM),this.Bh={bcp47:c,trackId:e,downloadableId:o,isImageBased:this.Il},this.log=_.aj(t,"TimedTextTrack"),this.state=k.z4,this.request=this.request.bind(this)}_esm(e),e.uH=void 0,n=i(0),o=i(107),h=i(20),A=i(91),_=i(9),E=i(42),s=i(23),f=i(15),r=i(1212),a=i(16),u=i(4),c=i(1213),(i=k=k||{})[i.z4=0]="NOT_LOADED",i[i.LOADING=1]="LOADING",i[i.ZG=2]="LOADED",i[i.OT=3]="LOAD_FAILED",l.prototype.yaa=function(){var e=this;return this.j.state.value===a.dc.CLOSED||this.j.state.value===a.dc.CLOSING?Promise.reject({ha:!1}):this.Il?this.fYb():(this.W2a||(this.W2a=this.Y2a()),this.W2a.then(function(t){return e.iYb(t)}))},l.prototype.getState=function(){return this.state},l.prototype.Vr=function(){return this.YQ},l.prototype.uq=function(){return this.qRb},l.prototype.Lv=function(e,i){var t;try{return null==(t=this.xDa)?void 0:t.Lv(e,i)}catch(t){this.log.error("error in getSubtitlesCount",t,{start:e,end:i,isImageBased:this.Il})}},l.prototype.jVb=function(){var t,e,i;if(!f.rd(this.ea))try{i=null==(e=null==(t=this.xDa)?void 0:t.CP(0))?void 0:e[0],this.ea=null==i?void 0:i.displayTime}catch(t){this.log.error("exception in getStartPts",t)}return this.ea},l.prototype.Rea=function(t){return this.j.state.value===a.dc.CLOSING||this.j.state.value===a.dc.CLOSED?(this.log.info("playback is closing, abort timed text retry",t),!1):this.j.Vb.value===this||(this.log.info("timed text track was changed, abort timed text retry",t),!1)},l.prototype.D1a=function(t){var e,i=this,n=_.aj(this.j,"TimedTextTrack");return n.warn=n.trace.bind(n),n.info=n.debug.bind(n),n=r.E1a(this.j,n,this.request,this),(e=new c.default(n,t)).on("ready",function(){i.xDa=e}),e},l.prototype.fYb=function(){var e,r,a,o,s,u,c=this;return this.r9a||(this.state=k.LOADING,e={profile:"nflx-cmisc",url:"",CZa:!1,Zxa:this.gw.offset,jcb:this.gw.length,Qd:this.j.mediaTime.value||0,bufferSize:h.config.xXb,Eea:{O:this.j.$X()}},r=(this.nra||[]).filter(function(t){return t.id in c.sv}).sort(function(t,e){return t.cc-e.cc}).map(function(t){return t.id}),o={},s=!(a=0),u=function(i,n){var t;f.rd(i)?s||c.Rea(c.Jv(c.pv,"","image"))?(s=!1,c.gw.url=c.sv[c.pv],e.url=c.gw.url,o[i]=(o[i]||0)+1,(t=c.D1a(e)).on("ready",function(){n({ha:!0,track:c})}),t.on("error",function(t){var e;t=Object.assign({ha:!1},t),(e=c.Jv(c.pv,c.gw.url,"image")).details={midxoffset:c.gw.offset,midxsize:c.gw.length},e.errorstring=t.errorString,o[i]<=h.config.clb?(c.J9(e,!0,"retry with current cdn"),c.Coa(o[i]).then(function(t){c.log.trace("retry timed text download after "+t,c.Jv(c.pv,"","image")),u(c.pv,n)})):(c.pv=r[a++],c.pv?(c.J9(e,!0,"retry with next cdn"),c.Coa(o[i]).then(function(t){c.log.trace("retry timed text download after "+t,c.Jv(c.pv,"","image")),u(c.pv,n)})):(c.J9(e,!1,"all cdns tried"),n({ha:!1,z2b:"all cdns failed for image subs",track:c})))}),t.start()):n({ha:!1,aborted:!0}):(n({ha:!1,z2b:"cdnId is not defined for image subs downloadUrl"}),c.J9(c.Jv(0,"","image"),!1,"cdnId is undefined"))},this.pv=r[a++],this.r9a=new Promise(function(e,i){u(c.pv,function(t){t.ha?(c.log.info("Loaded image subtitle manager"),c.state=k.ZG,e(t)):(c.log.error("Unable to load image subtitles manager",t),c.state=k.OT,i(t))})})),this.r9a},l.prototype.iYb=function(n){var r=this,a=this.j.EG.value;return s.Ua(a),new Promise(function(t,e){var i=r.D1a({profile:r.profile,xml:n,wh:h.config.dlb,preferences:h.config.RDa,Qd:r.j.mediaTime.value||0,CZa:!1,videoSize:a});i.on("ready",function(){t(i)}).on("error",function(t){e({ha:!1,error:t})}).start()}).then(function(){return r.state=k.ZG,{ha:!0,track:r}}).catch(function(t){throw r.log.error("Unable to parse timed text track",u.Oz(t),r.Bh,{url:t.url}),r.state=k.OT,t.reason="parseerror",t.track=r,t})},l.prototype.J9=function(t,e,i){t=Object.assign({},t,{vtc:e,status:i}),this.j.fireEvent(a.ma.qS,t),this.log.warn("subtitleerror event",t)},l.prototype.request=function(t,e){var i,n=this;this.log.trace("Downloading",t),i=this.ita(this.pv),t={url:t.url,offset:t.offset,length:t.size,vu:this.vu,responseType:o.PY,headers:{},xc:i,KE:"tt-"+this.Bf,ku:null!=(i=null==i?void 0:i.type)?i:"unknown"},this.j.oaa.download(t,function(t){n.log.trace("imgsub: request status "+t.ha),t.ha?e(null,new Uint8Array(t.content)):e({Ba:t.Ba,Of:t.Of})})},l.prototype.Jv=function(t,e,i){return{currentCdnId:t,url:e,profile:this.profile,dlid:this.Wb,subtitletype:i,bcp47:this.Bf,trackId:this.trackId,cdnCount:Object.keys(this.sv).length,isImageBased:this.Il}},l.prototype.ita=function(e){return(this.nra||[]).find(function(t){return t.id===e})},l.prototype.Y2a=function(){var e,a;function r(r){return n.__awaiter(e,void 0,void 0,function t(){var e,i,n=this;return at(t,function(t){return e=s(),(i=n.Jv(r.xc.id,r.url,"text")).errorstring=r.reason,e&&n.Rea(i)?t.return(n.Coa(a[e.id]).then(o)):t.return(Promise.reject({ha:!1,aborted:!0}))})})}function o(){return n.__awaiter(e,void 0,void 0,function t(){var e,i,n=this;return at(t,function(t){return i=(e=s())&&n.sv[e.id],e&&i?(a[e.id]=(a[e.id]||0)+1,t.return(n.KNb(i,e).catch(r))):t.return(Promise.reject({}))})})}function s(){return(e.nra||[]).find(function(t){return!!((a[t.id]||0)<h.config.clb&&e.sv[t.id])})}return(e=this).state=k.LOADING,a={},o()},l.prototype.Coa=function(i){return new Promise(function(t){var e=1e3*Math.min(Math.pow(2,i-1),8);setTimeout(function(){return t(e)},e)})},l.prototype.KNb=function(t,r){var a=this;return this.log.trace("Downloading",r&&{xc:r.id},this.Jv(r.id,t,"text")),new Promise(function(e,i){var n={responseType:o.bva,url:t,track:a,xc:r,KE:"tt-"+a.Bf,ku:r.type};a.j.oaa.download(n,function(t){t.ha?e(t.content):(t=Object.assign(Object.assign({},t),{reason:"downloadfailed",url:n.url,track:a,xc:r}),i(t))})})},nt.Object.defineProperties(l.prototype,{Xf:{configurable:!0,enumerable:!0,get(){return this.plb.Xf}},WF:{configurable:!0,enumerable:!0,get(){return this.plb.WF}}}),(e.uH=l).ED=k},function(t){function e(t){this.buffer=t,this.position=0}e.prototype={seek:function(t){this.position=t},skip:function(t){this.position+=t},cua:function(){return this.buffer.length-this.position},zC:function(){return this.buffer[this.position++]},jl:function(t){var e=this.position;return this.position+=t,(t=this.buffer).subarray?t.subarray(e,this.position):t.slice(e,this.position)},ks:function(t){for(var e=0;t--;)e=256*e+this.buffer[this.position++];return e},EAa:function(t){for(var e="";t--;)e+=String.fromCharCode(this.buffer[this.position++]);return e},ci:function(){return this.ks(2)},ls:function(){return this.ks(4)},zR:function(){return this.ks(8)},Yy:function(t){for(var e,i="";t--;)i+="0123456789ABCDEF"[(e=this.zC())>>>4]+"0123456789ABCDEF"[15&e];return i},FAa:function(t){for(var e=0,i=0;i<t;i++)e+=this.zC()<<(i<<3);return e},yR:function(){return this.FAa(4)},g2:function(t){this.VS(t,2)},dD:function(t){this.VS(t,4)},pga:function(t){this.buffer[this.position++]=t},VS:function(t,e){this.position+=e;for(var i=1;i<=e;i++)this.buffer[this.position-i]=255&t,t=Math.floor(t/256)},cD:function(t){for(var e=0;e<t.length;e++)this.buffer[this.position++]=t.charCodeAt(e)},f2:function(t){for(var e=t.length,i=0;i<e;i++)this.buffer[this.position++]=t[i]},US:function(t,e){this.f2(t.jl(e))}},t.exports=e},function(t,e){_esm(e),e.xMa="LogMessageRulerConfigSymbol",e.zMa="LogMessageRulerSymbol"},function(t,e){_esm(e),e.cja="MilestonesEventBuilderSymbol"},function(t,e){_esm(e),e.Cja="PboLicenseResponseTransformerSymbol"},function(t,e,i){var n,r,a,o,s,u;function c(t,e,i,n){this.Da=t,this.FY=e,this.Ga=i,this.profile=n}function h(){}function f(){}function l(){}_esm(e),e.DPa=e.I4=void 0,t=i(0),n=i(1),r=i(29),a=i(5),o=i(13),s=i(18),i=i(80),l.prototype.encode=function(t){return{downloadableId:t.Wb,duration:t.duration}},l.prototype.decode=function(t){return{Wb:t.downloadableId,duration:t.duration}},f.prototype.encode=function(t){return{total:t.total,totalContentTime:t.EL,totalAdDuration:t.zG,totalCombinedDuration:t.zS,totalOtherDuration:t.AG,audio:t.audio.map((new l).encode),video:t.video.map((new l).encode),text:t.text.map((new l).encode)}},f.prototype.decode=function(t){var e;return{total:t.total,EL:null!=(e=t.totalContentTime)?e:t.total,zG:t.totalAdDuration,zS:t.totalCombinedDuration,AG:t.totalOtherDuration,audio:t.audio.map((new l).decode),video:t.video.map((new l).decode),text:t.text.map((new l).decode)}},h.prototype.encode=function(t){return{type:t.type,href:t.href,xid:t.ga,movieId:t.L,position:t.position,clientTime:t.aB,sessionStartTime:t.Xn,videoTrackId:t.QS,audioTrackId:t.zo,timedTextTrackId:t.xS,mediaId:t.GQ,playTimes:(new f).encode(t.Vt),trackId:t.trackId,sessionId:t.sessionId,appId:t.appId,sessionParams:t.Wn,profileId:t.profileId}},h.prototype.decode=function(t){return{type:t.type,href:t.href,ga:t.xid,L:t.movieId,position:t.position,aB:t.clientTime,Xn:t.sessionStartTime,QS:t.videoTrackId,zo:t.audioTrackId,xS:t.timedTextTrackId,GQ:t.mediaId,Vt:(new f).decode(t.playTimes),trackId:t.trackId,sessionId:t.sessionId,appId:t.appId,Wn:t.sessionParams,profileId:t.profileId}},e.I4=h,c.prototype.create=function(t){var e,i=Object.assign(Object.assign({},null!=(i=t.kb.Wn)?i:{}),{uiVersion:this.FY().Ir.oz});return{href:t.ja&&t.ja.Cj?t.ja.Cj.FP("events").href:"",type:"online",ga:t.ga.toString(),L:t.L,position:Math.floor(t.E8||0),aB:this.Da.cL.ka(a.pa),Xn:t.QB?t.QB.ka(a.pa):-1,QS:null==(e=t.Jh.value)?void 0:e.trackId,zo:null==(e=t.Bc.value)?void 0:e.trackId,xS:null==(e=t.Vb.value)?void 0:e.trackId,GQ:void 0,Vt:this.wY(t),trackId:void 0!==t.ql?t.ql.toString():"",sessionId:this.FY().sessionId||this.Ga.id,appId:this.FY().appId||this.Ga.id,Wn:i,profileId:this.profile}},c.prototype.load=function(t){return(new h).decode(t)},c.prototype.Zta=function(t){return t.map(function(t){return{Wb:t.downloadableId,duration:t.duration}})},c.prototype.wY=function(t){return(t=t.Am)?{total:(t=t.yUb()).total,EL:t.totalContentTime,zG:t.totalAdDuration,AG:t.totalOtherDuration,zS:t.totalCombinedDuration,audio:this.Zta(t.audio),video:this.Zta(t.video),text:this.Zta(t.timedtext)}:{total:0,EL:0,zG:0,zS:0,AG:0,video:[],audio:[],text:[]}},u=c,u=t.__decorate([n.$(),t.__param(0,n.l(r.Lh)),t.__param(1,n.l(o.Oc)),t.__param(2,n.l(s.$c)),t.__param(3,n.l(i.zM))],u),e.DPa=u},function(t,e){_esm(e),e.JPa="PboPlaydataValidatorSymbol",e.APa="PboPlaydataArrayValidatorSymbol",e.CPa="PboPlaydataCollectionValidatorSymbol"},function(t,e){function i(){}_esm(e),e.Kia=void 0,(e.Kia=i).nqb="display",i.Epb="console"},function(t,e){_esm(e),e.bka=e.yM=void 0,(t=e.yM||(e.yM={})).Wdc="taskstart",t.Udc="taskabort",t.Vdc="taskfail",t.Xdc="tasksuccess",e.bka="PreparerTaskSchedulerSymbol"},function(t,e){_esm(e),e.oha="CacheManagerFactorySymbol"},function(t,e){_esm(e),e.bGa="AsePrefetcherAdapterSymbol",e.cGa="AsePrefetcherProviderSymbol"},function(t,e){_esm(e),e.Fja="PboPublisherSymbol"},function(t,e){_esm(e),e.Mga=e.ke=void 0,(t=e.ke||(e.ke={}))[t.Hq=0]="startPlayback",t[t.iq=1]="endPlayback",t[t.up=2]="underflow",e.Mga="AseIntegrationFactorySymbol"},function(t,i,e){var v,y,n,w,A,r,a,_,E,o,k;_esm(i),i.rL=void 0,v=e(17),y=e(20),n=e(62),w=e(59),A=e(4),r=e(23),a=e(9),_=e(25),E=e(14),o=e(301),k=e(15),t=e(34),a.Fa.get(t.nj).register(A.Z.iLa,function(e){var p,b,g;function m(){var e;m=v.ix,e=setInterval(t,y.config.c0b),n.nf.addListener(n.Vo,function(t){t&&t.isPopStateEvent?p.trace("popstate event, Lock timers can stay"):(_.ih(b,function(t,e){localStorage.removeItem(e.Ot)}),clearInterval(e))},v.uM)}function t(){var i=w.Vpa();_.ih(b,function(t,e){t=localStorage.getItem(e.Ot),(t=JSON.parse(t))?t.updated=i:t={updated:i,sessionId:g,count:1},localStorage.setItem(e.Ot,JSON.stringify(t))})}r.Ua(o.storage),p=a.dk("StorageLock"),b={},g=Date.now()+"-"+Math.floor(1e6*Math.random()),i.rL={Kx:function(t,e,i){var n,r,a,o,s,u,c,h,f,l;function d(t){localStorage.setItem(a,JSON.stringify(t)),t={Ot:a},b[a]=t,p.trace("Lock acquired",{Name:t.Ot}),m(),e({ha:!0,zba:t})}if(n=this,i=void 0!==i&&i,localStorage){r=w.Vpa(),a="lock-"+t,o={updated:r,sessionId:g,count:1};try{a in localStorage?(s=localStorage.getItem(a),u=0,c=JSON.parse(s),k.xF(c.updated)&&(u=c.updated),h=E.r4(r-u)*v.Fu,f=g===c.sessionId,h<y.config.Dab?f?(c.count+=1,p.debug("Incremented lock count for existing playbackSession",{id:g,count:c.count}),c.updated=r,d(c)):i?(l=y.config.Dab-h+v.Fu,p.error("Waiting until current expiration to confirm whether lock is still active",{id:g,count:c.count,Epoch:r,LockEpoch:u,waitTimeoutMs:l}),bt.setTimeout(function(){return n.Kx(t,e,!1)},l)):e({ha:!1}):(p.error("Lock was expired or invalid, ignoring",{Epoch:r,LockEpoch:u}),d(o))):d(o)}catch(t){p.error("Error acquiring Lock",{errorSubCode:A.Y.Om,errorDetails:_.ff(t)}),e({ha:!0})}}else E.Vwa?p.error("Local storage access exception",{errorSubCode:A.Y.Ovb,errorDetails:_.ff(E.Vwa)}):p.error("No localstorage",{errorSubCode:A.Y.Pvb}),e({ha:!0})},release:function(e,t){var i,n;if(r.Ua(b[e.Ot]==e),localStorage){try{i=localStorage.getItem(e.Ot),(n=JSON.parse(i))&&1<n.count?(--n.count,localStorage.setItem(e.Ot,JSON.stringify(n)),p.trace("Lock count decremented",{Name:e.Ot,count:n.count})):(localStorage.removeItem(e.Ot),delete b[e.Ot],p.trace("Lock released",{Name:e.Ot}))}catch(t){p.error("Unable to release Lock",{Name:e.Ot},t)}t&&t(v.Vg)}}},y.config.o9?i.rL.Kx("session",function(t){i.rL.qib=t,e(v.Vg)}):e(v.Vg)})},function(t,i,e){var n,r,a,o,s,u;_esm(i),i.storage=void 0,n=e(20),r=e(17),a=e(558),t=e(4),o=e(559),s=e(561),u=e(9),e=e(34),i.storage=i.storage||void 0,u.Fa.get(e.nj).register(t.Z.hLa,function(e){var t;switch(n.config.Ucc){case"idb":t=o.Xjb;break;case"none":t=a.Zjb;break;case"ls":t=s.Yjb}t(function(t){t.ha?(i.storage=t.storage,e(r.Vg)):e(t)})})},function(t,e,i){var o,s,u,c,h,f,r,l,d,p,n,b;function a(r,i){var a;a=f.dk("PlayDataManager"),i=i||s.ix,u.config.wu?i(s.Vg):g(a).then(function(n){var e=n.g9.filter(function(t){return!1===t.active}).map(function(t){return e=n,(i=t).Re&&0!==i.Re.length&&i.Re[0].VJ?o.BC(r,i).then(function(){return a.trace("Successfully released license for session",JSON.stringify(i)),e?e.q0(i):Promise.resolve()}).catch(function(t){throw a.error("Unable to send stop command for session",JSON.stringify({jc:i,error:t})),t}):(a.error("releaseDrmSession exception: missing valid keySessionData"),e?e.q0(i):Promise.resolve());var e,i});Promise.all(e).then(function(){a.info("release drm session completed for "+e.length+" entries"),i(s.Vg)}).catch(function(t){(t=t||{}).DrmCacheSize=e.length,a.error("Unable to release one or more DRM session data",t),i(s.Vg)})}).catch(function(t){a.error("Unable to load DRM session data",t),i(s.Vg)})}function g(i){var n;return e.qra||(n=f.Fa.get(r.pha),e.qra=new Promise(function(t,e){n.jgb().then(function(){t(n)}).catch(function(t){i.error("Unable to load DRM data for license release",t),e(t)})})),e.qra}_esm(e),e.WPa=e.VPa=e.qra=void 0,o=i(303),s=i(17),u=i(20),c=i(62),h=i(47),f=i(9),t=i(4),r=i(219),l=i(152),d=i(16),p=i(50),n=i(34),b=i(215),e.VPa=function(n){var r,e,i,a,t,o;function s(){i=!0,a&&a.close(),c.nf.removeListener(c.Vo,s)}return r=f.aj(n,"PlayDataManager"),i=!1,(t=f.Fa.get(h.K4)).dM&&t.bM||(o=f.Fa.get(b.Lja)(),t.dM=o.jc,t.bM=o.request),n.Se("pdctor"),n.addEventListener(d.ma.eh,function(){c.nf.removeListener(c.Vo,s)}),n.addEventListener(d.ma.zZ,function(){var e;!u.config.wu&&n.ef&&(e=n.s8.i1a(),g(r).then(function(t){return t.fYa(e)}).catch(function(){r.error("Unable to load/add cached DRM data")}))}),n.addEventListener(d.ma.eh,function(){var t;i||(n.dhc(),t=[u.config.wu||!n.ef?Promise.resolve():new Promise(function(e){var i;r.info("Sending the expedited playdata"),i=n.s8.i1a(),n.ef.a4a(i).then(function(){return r.info("Sent the expedited playdata"),g(r)}).then(function(t){return t?t.q0(i):Promise.resolve()}).then(function(){e(void 0)}).catch(function(t){r.error("Unable to send the expedited playdata",t),e()})}),(e||(n.Se("pdsb"),e=f.Fa.get(l.jU)().then(function(t){return a=t,n.Se("pdsc"),t}).catch(function(t){throw r.error("Unable to initialize the playdata services",t),n.Se("pdse"),t})),e.then(function(t){return t.h1(n.na)}).then(function(){r.info("Sent the playdata")}).catch(function(t){r.error("Unable to send the playdata",t)})),new Promise(function(t){f.Fa.get(p.jo).flush(!1).catch(function(){r.error("Unable to send logblob"),t(void 0)}).then(function(){t(void 0)})})],Promise.all(t).then(function(){n.Ica()}).catch(function(){n.Ica()}))}),c.nf.addListener(c.Vo,s),{}},e.WPa=function(){return new Promise(function(e){a({},function(t){e(t)})})},f.Fa.get(n.nj).register(t.Z.sD,function(t){t(s.Vg)})},function(t,e,i){var n,s,r,a,u,c,o,h;function f(t){this.j=t,this.nab=!1,this.log=s.aj(this.j,"Playback"),this.uQ=s.Fa.get(o.PT),r.Ua(n.config),n.config.wu||(this.VNb=s.Fa.get(a.FIa))}function l(t,e){var i;function n(t){return t&&0<t.length&&t[0].VJ}return i=s.Fa.get(o.PT),t.ga&&n(t.Re)?i.release({ga:t.ga,Re:t.Re}).then(function(){}):e.ga&&n(e.Re)?i.release(e).then(function(){}):Promise.resolve()}_esm(e),e.BC=e.MHa=void 0,n=i(20),s=i(9),r=i(23),a=i(333),u=i(60),c=i(15),o=i(200),h=i(16),f.prototype.qJ=function(a){var o=this;return new Promise(function(e,t){var i=u.Ap.Z0a(a.wg),n=a.Rk.map(function(t){return{sessionId:t.sessionId,dataBase64:s.RA(t.data)}}),r=o.j.AUb(a.Rk[0].sessionId);o.uQ.Kx({Og:r.Og,wg:c.is.wo(a.wg)?a.wg:i,f9:[r.om],Rk:n,ga:r.ga,Ko:a.Ko,Cj:r.ja.Cj}).then(function(t){o.j.Re=t.Re,e(t),o.TQb(r)}).catch(t)})},f.prototype.release=function(t){return l(this.j,t)},f.prototype.i1a=function(){var t=this.VNb.create();return t.Re=this.j.Re,t.ga=this.j.ga,t.L=this.j.L,t},f.prototype.TQb=function(t){this.nab||(this.nab=!0,this.j.fireEvent(h.ma.zZ,{L:t.L}))},e.MHa=f,e.BC=l},function(t,e,i){var o,s,u,c,n,h,f,r,l,a,d,p;function b(t){t=Error.call(this,t),this.message=t.message,"stack"in t&&(this.stack=t.stack),this.name="CodecSwitchingError"}function g(i,t,e,n){var r,a=this;this.j=i,this.type=t,this.log=n,this.j6=new u.$b(!1),this.IH={data:[],state:"",operation:""},this.mimeType=this.d4a((this.type===p.u.J?this.j.Jh:this.j.Bc).value.streams),this.ul=new c.Bk,this.uma={Type:this.type},s.config.CF&&(r=!0,this.Bsa=new u.$b(!1)),this.log.trace("Adding source buffer",this.uma,{TypeId:this.mimeType}),this.Bd=e.addSourceBuffer(this.mimeType),this.Bd.addEventListener("updatestart",function(){a.IH.state="updatestart"}),this.Bd.addEventListener("update",function(){a.IH.state="update"}),this.Bd.addEventListener("updateend",function(){var t;a.j6.set(!1),a.JUa&&a.JUa(),a.IH.state="updateend",t=0;try{t=a.Bd.buffered.length}catch(t){}r&&t&&(r=!1,a.Bsa.set(!0))}),this.Bd.addEventListener("error",function(t){var e;try{e=t.target.error&&t.target.error.message,(t.message||e)&&n.error("error event received on sourcebuffer",{mediaErrorMessage:t.message})}catch(t){}i.Md(h.Z.Qub,o.t$(a.type))}),this.Bd.addEventListener("abort",function(){}),i.addEventListener(l.ma.closed,function(){a.Bd=void 0})}_esm(e),e.Npb=e.$ia=void 0,o=i(177),s=i(20),u=i(70),c=i(73),n=i(9),i(99),h=i(4),i(5),f=i(23),r=i(15),l=i(16),a=i(163),d=i(205),p=i(49),g.prototype.vi=function(){return this.j6.value},g.prototype.updating=function(){return!!this.Bd&&this.Bd.updating},g.prototype.Mea=function(t){this.JUa=t},g.prototype.nta=function(){return this.IH},g.prototype.buffered=function(){return this.Bd.buffered},g.prototype.toString=function(){return"SourceBuffer (type: "+this.type+")"},g.prototype.toJSON=function(){return{type:this.type}},g.prototype.j$=function(){var t,e,i,n,r,a,o;try{if(t=this.Bd.buffered,e=0,t)for(i=[],n=0,r=t.length,n=0;n<r;n++)a=t.start(n),e+=(o=t.end(n))-a,f.Ua(a<o),i.push(a+"-"+o);if(i)return{Buffered:e.toFixed(3),Ranges:i.join("|")}}catch(t){}},g.prototype.UYa=function(t,e){try{f.Ua(this.Bd.buffered&&this.Bd.buffered.length<=1,"Gaps in media are not allowed: "+JSON.stringify(this.j$()))}catch(t){}f.Ua(!this.vi()),this.djb("append",t),e=e&&e.yw/1e3,r.Oa(e)&&this.Bd.timestampOffset!==e&&(this.Bd.timestampOffset=e),this.Bd.appendBuffer(t),this.j6.set(!0)},g.prototype.remove=function(t,e){f.Ua(!this.vi());try{this.djb("remove"),this.Bd.remove(t,e),this.j6.set(!0)}catch(t){this.log.error("SourceBuffer remove exception",t,this.uma)}},g.prototype.djb=function(t,e){this.IH.data=e||[],this.IH.state="init",this.IH.operation=t},g.prototype.xbc=function(t,e){this.k_b=Math.floor(t/e*1e3)},g.prototype.ZGb=function(e){var i;if(this.Bd){if((e=this.d4a([{type:this.HIb,mf:e}]))!==this.mimeType){if(i=this.mimeType,this.log.info("Changing SourceBuffer mime-type from: "+this.mimeType+" to: "+e),!this.Bd.changeType)throw new b("Platform doesnt support changing SourceBuffer mime-type");try{this.Bd.changeType(e),this.mimeType=e}catch(t){throw this.log.error("Error changing SourceBuffer type",t,this.uma,{From:i,To:e}),new b(t.message)}}}else this.log.info("No SourceBuffer")},g.prototype.appendBuffer=function(t,e){return!e||e.Cc?this.goa(t,e):this.z7(t,e),!0},g.prototype.goa=function(t,e){this.j.qf.goa(this,t,e||{})},g.prototype.z7=function(t,e){t=this.CIb(t,e),this.j.qf.z7(t)},g.prototype.CIb=function(t,e){var i=this.k_b||0;return{JHb:function(){this.response=void 0},Vh:function(){return this.requestId},constructor:{name:"MediaRequest"},mediaType:this.mediaType,readyState:d.Ac.Uc.DONE,xC:e.ea,Wy:e.ea+e.duration,sn:e.duration,yw:i,Uk:e.Uk,X:e.X,Pa:e.Pa,oc:+e.oc,location:e.location,qO:e.offset,oO:e.offset+e.fa-1,bitrate:e.bitrate,response:t,l8a:t&&0<t.byteLength,uF:!0,get Cc(){return!this.uF},Zhb:this.Gk-i||1/0,toJSON:function(){var t={requestId:this.requestId,segmentId:this.X,isHeader:this.Cc,ptsStart:this.xC,ptsOffset:this.yw,responseType:this.lnc,duration:this.sn,readystate:this.oi};return this.stream&&(t.bitrate=this.stream.bitrate),JSON.stringify(t)}}},g.prototype.endOfStream=function(){var t;this.j.pI("EndOfStream"),null!=(t=this.j.qf)&&t.i_(this.mediaType)},g.prototype.Kjb=function(t){this.IBb=t},g.prototype.addEventListener=function(t,e,i){this.ul.addListener(t,e,i)},g.prototype.removeEventListener=function(t,e){this.ul.removeListener(t,e)},g.prototype.d4a=function(t){var e=n.Fa.get(a.tU);return this.type===p.u.J?e.C8(t):e.w8(t)},nt.Object.defineProperties(g.prototype,{mediaType:{configurable:!0,enumerable:!0,get(){return this.type}},Ljb:{configurable:!0,enumerable:!0,get(){return this.IBb}},HIb:{configurable:!0,enumerable:!0,get(){return 0===this.type?"audio":"video"}}}),e.$ia=g,S(b,Error),e.Npb=b},function(t,e,i){var n,r,a,o,s,u;function c(t){return n.Ua(void 0!==o[t]),o[t]}_esm(e),e.M1a=e.pxa=void 0,n=i(23),r=i(25),a=i(15),o={'"':'""',"\r":"","\n":" "},s=/["\r\n]/g,u=/[", ]/,e.M1a=function(t){return a.rd(t)?a.Oa(t)?t:a.vg(t)?t.replace(s,c):a.L9a(t)?t:isNaN(t)?"NaN":"":""},e.pxa=function(t){var i=e.M1a,n="";return r.ih(t,function(t,e){t=i(t)+"="+i(e),u.test(t)&&(t='"'+t+'"'),n=n?n+","+t:t}),n}},function(t,e){_esm(e),e.Dk=void 0,(t=e.Dk||(e.Dk={}))[t.Fjb=1]="sourceopen",t[t.Gr=2]="currentTimeChanged",t[t.J0=3]="seeked",t[t.mab=5]="licenseadded",t[t.Djb=6]="sourceBuffersAdded",t[t.Tca=7]="onNeedKey"},function(t,e){_esm(e),e.tob={unc:"adStart",aYa:"adProgress",snc:"adComplete"},e.lFa={j7:"adBreakComplete"},e.pFa="AdImpressionLoggerrFactorySymbol"},function(t,e){_esm(e),e.Fga="AdEventPboCommandSymbol",e.Ega="AdBreakEventPboCommandSymbol"},function(t,e){function i(){var t=this;this.mQ=!1,this.trace=[],this.MO=function(){t.X3a.Xl(function(){t.wE()})}}_esm(e),e.Sq=void 0,i.prototype.start=function(t){var e=this;this.j=t,this.kg=this.j.Po(),this.mQ||(this.kg.dn.addListener(this.wE),this.j.addEventListener("closing",function(){return e.unsubscribe()}),this.mQ=!0)},i.prototype.unsubscribe=function(){this.kg.dn.removeListener(this.wE),this.mQ=!1,this.trace=[]},e.Sq=i},function(t,e){_esm(e),e.Zja="PlaygraphManagerFactorySymbol"},function(t,e){_esm(e),e.aka="PlaygraphVideoPlayerFactorySymbol"},function(t,e,i){var n,a;function r(t,e){var r=this;this.Jj=t,this.Dh=e,this.addEventListener=function(t,e,i){return r.Dh.addListener(t,r.f2a(t,e),i)},this.removeEventListener=function(t,e){return r.Dh.removeListener(t,r.f2a(t,e))},this.getReady=function(){return r.Dh.isReady()},this.getXid=function(){return r.Ib().Nv()},this.getMovieId=function(){return r.Ib().Z6a()},this.getPlaygraphId=function(){return r.Dh.CUb()},this.getElement=function(){return r.Dh.Qo()},this.isPlaying=function(){return r.Ib().Wr()},this.isPaused=function(){return r.Ib().hZ()},this.isMuted=function(){return r.Ib().Yva()},this.isReady=function(){return r.Ib().isReady()},this.isBackground=function(){return r.Ib().K9a()},this.setBackground=function(t){return r.Ib().nCa(t)},this.startInactivityMonitor=function(){return r.Ib().kS()},this.setTransitionTime=function(t){return r.Ib().DCa(t)},this.getDiagnostics=function(){return r.Ib().X5a()},this.getTextTrackList=function(t){return r.Ib().uua(t)},this.getMaxRecommendedTextIndex=function(t){return r.Ib().Lta(t)},this.getTextTrack=function(){return r.Ib().tua()},this.setTextTrack=function(t){return r.Ib().zCa(t)},this.getVolume=function(){return r.Ib().W7a()},this.isEnded=function(){return r.Ib().Pva()},this.getBusy=function(){return r.Ib().vi()},this.getError=function(){return r.Ib().getError()},this.getCurrentTime=function(){return r.Ib().Kv()},this.getAdManager=function(){return r.Ib().Po()},this.getLivePlaybackManager=function(){var e=r.Ib().L6a();if(a.Ua(e,"Unexpected call to getLivePlaybackManager()"),e.ub)return{seekToLiveEdge:function(){return e.eac()},isAtLiveEdge:function(){return e.I9a()},isLiveEventEnded:function(){return e.Z9a()},getLiveEventState:function(t){return e.OTb(t)}}},this.getBufferedTime=function(){return r.Ib().C5a()},this.getSegmentTime=function(){return r.Ib().n$()},this.getDuration=function(){return r.Ib().lta()},this.getVideoSize=function(){return r.Ib().V7a()},this.getAudioTrackList=function(){return r.Ib().t5a()},this.getMaxRecommendedAudioIndex=function(){return r.Ib().T6a()},this.getAudioTrack=function(){return r.Ib().s5a()},this.getTimedTextTrackList=function(t){return r.Ib().uua(t)},this.getMaxRecommendedTimedTextIndex=function(t){return r.Ib().Lta(t)},this.getTimedTextTrack=function(){return r.Ib().tua()},this.getAdditionalLogInfo=function(){return r.Ib().q5a()},this.getTrickPlayFrame=function(t){return r.Ib().S7a(t)},this.getSessionSummary=function(){return r.Ib().lua()},this.getTimedTextSettings=function(){return r.Ib().BY()},this.setMuted=function(t){return r.Ib().Jib(t)},this.setVolume=function(t){return r.Ib().Zib(t)},this.getPlaybackRate=function(){return r.Ib().pq()},this.setPlaybackRate=function(t){return r.Ib().Kib(t)},this.setAudioTrack=function(t){return r.Ib().tib(t)},this.setTimedTextTrack=function(t){return r.Ib().zCa(t)},this.setTimedTextSettings=function(t){return r.Ib().bS(t)},this.prepare=function(){return r.Ib().FK()},this.load=function(){return r.Ib().load()},this.close=function(t){return r.YYa(r.Dh.close(),t)},this.play=function(){return r.Ib().play()},this.pause=function(){return r.Ib().pause()},this.seek=function(){throw Error("Seek by graph position has not been implemented")},this.transition=function(){throw Error("Transition segment has not been implemented")},this.engage=function(t,e){return r.YYa(r.Ib().iP(t),e)},this.induceError=function(t){return r.Ib().h9a(t)},this.loadCustomTimedTextTrack=function(t,e,i,n){return r.Ib().uab(t,e,i,n)},this.tryRecoverFromStall=function(){},this.getCropAspectRatio=function(){return r.Ib().o$()},this.generateScreenshots=function(t){return r.Ib().l5a(t)},this.getCurrentSegmentId=function(){return r.Dh.T5a()},this.getPlaygraphMap=function(){return r.Dh.xJ()},this.updatePlaygraphMap=function(t){return r.Dh.Nw(t)},this.Ura=new Map,this.log=n.dk("VideoPlayer"),Object.defineProperty(this,"diagnostics",{get:this.getDiagnostics})}_esm(e),e.p5=void 0,n=i(9),i(99),a=i(23),r.prototype.Ib=function(){return this.Dh.Ib()},r.prototype.f2a=function(t,e){var i;return this.Ura.has(t)||this.Ura.set(t,new Map),(i=this.Ura.get(t)).has(e)||i.set(e,this.nMb(t,e)),i.get(e)},r.prototype.nMb=function(e,i){var n=this;return function(t){return i(Object.assign({},t,{type:e,target:n}))}},r.prototype.YYa=function(t,e){return e?t.then(e,e):t},e.p5=r},function(t,e,i){e=i(128),t.exports=void 0!==e&&"undefined"!=typeof nrdp?nrdp.ia:Date.now},function(t){t.exports={Gz:{Kka:0,QRa:1,cm:2,name:["transient","semiTransient","permanent"]},Bz:{FJa:0,PRa:1,X4:2,gU:3,Yz:100,name:["firstLoad","scrollHorizontal","search","playFocus"]},Qmc:{Emc:0,Ekc:1,Tic:2,Yz:100,name:["trailer","montage","content"]},bx:{SLa:0,uRa:1,mwb:2,Mqb:3,Yz:100,name:["left","right","up","down"]},NT:{Jpb:0,X4:1,mkc:2,Hjc:3,nic:4,lkc:5,Cob:6,Yz:100,name:"continueWatching search grid episode billboard genre bigRow".split(" ")},iM:{gU:0,THa:1,Yz:100,name:["playFocused","detailsOpened"]}}},function(t,e,i){var c,h=i(598),f="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),l=Object.prototype.toString,d=Array.prototype.concat,p=Object.defineProperty;e=i(317)(),c=p&&e,t.exports=function(t,e){var i,n,r,a,o=2<arguments.length?arguments[2]:{},s=h(e);f&&(s=d.call(s,Object.getOwnPropertySymbols(e)));for(var u=0;u<s.length;u+=1)n=s[u],r=e[s[u]],a=o[s[u]],n in(i=t)&&("function"!=typeof a||"[object Function]"!==l.call(a)||!a())||(c?p(i,n,{configurable:!0,value:r,writable:!0}):i[n]=r)}},function(t){var i=Object.prototype.toString;t.exports=function(t){var e=i.call(t);return"[object Arguments]"===e||"[object Array]"!==e&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&0<=t.length&&"[object Function]"===i.call(t.callee)}},function(t,e,i){var n;function r(){if(n)try{return n({},"a",{value:1}),!0}catch(t){}return!1}n=i(43)("%Object.defineProperty%",!0),r.mWb=function(){if(!r())return null;try{return 1!==n([],"length",{value:1}).length}catch(t){return!0}},t.exports=r},function(t,e,i){var n="undefined"!=typeof Symbol&&Symbol,r=i(319);t.exports=function(){return"function"==typeof n&&"function"==typeof Symbol&&"symbol"==typeof n("foo")&&"symbol"==typeof Symbol("bar")&&r()}},function(t){t.exports=function(){var t,e,i;if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;if(t={},e=Symbol("test"),i=Object(e),"string"==typeof e||"[object Symbol]"!==Object.prototype.toString.call(e)||"[object Symbol]"!==Object.prototype.toString.call(i))return!1;for(e in t[e]=42,t)return!1;return!("function"==typeof Object.keys&&0!==Object.keys(t).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)&&!(1!==(i=Object.getOwnPropertySymbols(t)).length||i[0]!==e||!Object.prototype.propertyIsEnumerable.call(t,e)||"function"==typeof Object.getOwnPropertyDescriptor&&(42!==(t=Object.getOwnPropertyDescriptor(t,e)).value||!0!==t.enumerable))}},function(t,e,i){var n=i(603),r=i(604),a=i(605),o=i(169),s=i(323),u=i(614);t.exports=function(t){return t=a(t),o(t)||0===t?0:s(t)?u(t)*r(n(t)):t}},function(t){var i,e,n,r,a,o,s,u;function c(t){var e;try{return e=i.call(t),a.test(e)}catch(t){return}}if(i=Function.prototype.toString,"function"==typeof(e="object"==typeof Reflect&&null!==Reflect&&Reflect.apply)&&"function"==typeof Object.defineProperty)try{n=Object.defineProperty({},"length",{get(){throw r}}),r={},e(function(){throw 42},null,n)}catch(t){t!==r&&(e=null)}else e=null;a=/^\s*class\b/,o=Object.prototype.toString,s="function"==typeof Symbol&&!!Symbol.toStringTag,u="object"==typeof document&&void 0===document.all&&void 0!==document.all?document.all:{},t.exports=e?function(t){if(t===u)return!0;if(!t||"function"!=typeof t&&"object"!=typeof t)return!1;if("function"==typeof t&&!t.prototype)return!0;try{e(t,null,n)}catch(t){if(t!==r)return!1}return!c(t)}:function(t){var e;if(t===u)return!0;if(!t||"function"!=typeof t&&"object"!=typeof t)return!1;if("function"==typeof t&&!t.prototype)return!0;if(s){try{e=!c(t)&&(i.call(t),!0)}catch(t){e=!1}return e}return!c(t)&&("[object Function]"===(t=o.call(t))||"[object GeneratorFunction]"===t)}},function(t,e,i){var n=i(319);t.exports=function(){return n()&&!!Symbol.toStringTag}},function(t){var e=Number.isNaN||function(t){return t!=t};t.exports=Number.isFinite||function(t){return"number"==typeof t&&!e(t)&&1/0!==t&&-1/0!==t}},function(t,e,i){t.exports=i(321)},function(t,e,i){var n;function r(){}_esm(e),n=i(41),r.prototype.Q5a=function(t){return{z0a:Reflect.getMetadata(n.pja,t),ygc:(t=Reflect.getMetadata(n.XSa,t))||{}}},r.prototype.JUb=function(t){return Reflect.getMetadata(n.YSa,t)||[]},e.bja=r},function(t,e,i){var n;_esm(e),n=i(56),e.o$a=function(t){return t instanceof RangeError||t.message===n.Ivb}},function(t,e,i){var a,o,s,u;function n(t){this.jxb=t}_esm(e),a=i(56),o=i(41),s=i(67),u=i(94),n.prototype.vfc=function(){return this.jxb()},e.Bia=n,e.l=function(r){return function(t,e,i){var n;if(void 0===r)throw Error(a.kwb(t.name));n=new s.Metadata(o.LT,r),"number"==typeof i?u.wL(t,e,i,n):u.s1(t,e,n)}}},function(t,e,i){var r,a,o,s;function n(t,e,i,n){this.id=a.id(),this.type=t,this.oh=i,this.name=new s.lvb(e||""),this.Ec=[],t=null,"string"==typeof n?t=new o.Metadata(r.wD,n):n instanceof o.Metadata&&(t=n),null!==t&&this.Ec.push(t)}_esm(e),r=i(41),a=i(110),o=i(67),s=i(649),n.prototype.s8a=function(t){for(var e=0,i=this.Ec;e<i.length;e++)if(i[e].key===t)return!0;return!1},n.prototype.isArray=function(){return this.s8a(r.cH)},n.prototype.V0b=function(t){return this.Axa(r.cH)(t)},n.prototype.Zva=function(){return this.s8a(r.wD)},n.prototype.kwa=function(){return this.Ec.some(function(t){return t.key!==r.LT&&t.key!==r.cH&&t.key!==r.u4&&t.key!==r.wU&&t.key!==r.wD})},n.prototype.d$a=function(){return this.Axa(r.rOa)(!0)},n.prototype.fUb=function(){return this.Zva()?this.Ec.filter(function(t){return t.key===r.wD})[0]:null},n.prototype.PSb=function(){return this.kwa()?this.Ec.filter(function(t){return t.key!==r.LT&&t.key!==r.cH&&t.key!==r.u4&&t.key!==r.wU&&t.key!==r.wD}):null},n.prototype.Axa=function(r){var a=this;return function(t){for(var e,i=0,n=a.Ec;i<n.length;i++)if((e=n[i]).key===r&&e.value===t)return!0;return!1}},e.h5=n},function(t,e,i){var n,r;function a(t){this.Lc=t,this.FU=new r.cha(this.Lc),this.jla=new n.E2(this.Lc)}_esm(e),n=i(213),r=i(214),a.prototype.when=function(t){return this.FU.when(t)},a.prototype.d2=function(){return this.FU.d2()},a.prototype.Iy=function(t){return this.jla.Iy(t)},e.JG=a},function(t,e,i){var n;function r(i){return function(e){function t(t){return null!==t&&null!==t.target&&t.target.Axa(i)(e)}return t.dcb=new n.Metadata(i,e),t}}_esm(e),t=i(41),n=i(67),e.Blb=function t(e,i){return null!==(e=e.pC)&&(!!i(e)||t(e,i))},i=(e.Fkb=r)(t.wD),e.Ncb=i,e.Klb=function(i){return function(t){var e;return null!==t&&(e=t.uW[0],"string"==typeof i?e.oh===i:i===t.uW[0].Cn)}}},function(t,e,i){var n;function r(t,e){this.Sg=e,this.YB=Math.floor(t),this.display=this.YB+" "+this.Sg.name}function a(t,e,i){this.Sg=t,this.name=e,this.Ar=i||this,n.yq(this,"base")}_esm(e),e.Hu=e.xU=void 0,n=i(55),a.prototype.CX=function(t){return this.Sg==t.Sg},a.prototype.toJSON=function(){return this.name},e.xU=a,r.prototype.ka=function(t){return this.Sg.CX(t)?this.YB:Math.floor(this.YB*this.Sg.Sg/t.Sg)},r.prototype.pfb=function(t){return this.Sg.CX(t)?this.YB:this.YB*this.Sg.Sg/t.Sg},r.prototype.as=function(t){return new r(this.ka(t),t)},r.prototype.to=function(t){return new r(this.ka(t),t)},r.prototype.toString=function(){return this.display},r.prototype.toJSON=function(){return{magnitude:this.YB,units:this.Sg.name}},r.prototype.add=function(t){return this.s0a(t)},r.prototype.Ea=function(t){return this.s0a(t,function(t){return-t})},r.prototype.scale=function(t){return new r(this.ka(this.Sg.Ar)*t,this.Sg.Ar)},r.prototype.lm=function(t){return this.ka(this.Sg.Ar)-t.ka(this.Sg.Ar)},r.prototype.CX=function(t){return 0==this.lm(t)},r.prototype.y$a=function(){return 0==this.YB},r.prototype.$va=function(){return this.YB<0},r.prototype.jZb=function(){return 0<this.YB},r.prototype.s0a=function(t,e){return e=void 0===e?function(t){return t}:e,new r(this.ka(this.Sg.Ar)+e(t.ka(this.Sg.Ar)),this.Sg.Ar)},e.Hu=r},function(t,e){_esm(e),e.TPa="PlatformConfigOverridesSymbol"},function(t,e){_esm(e),e.FIa="DrmDataFactorySymbol"},function(t,e,i){var a;function n(t,e,i,n,r){this.version=t,this.yK=e,this.mDa=i,this.Iq=n,this.Lw=r,this.Yl=new a.uLa(t,e,i,n,r),this.hn=[]}_esm(e),e.qia=void 0,a=i(680),n.prototype.load=function(t){var e=this;return this.Yl.load(t).then(function(){var t;e.hn=null!=(t=e.Yl.hn)?t:[]})},n.prototype.add=function(t){return this.hn.push(t),this.Yl.set(this.hn)},n.prototype.remove=function(t,e){return 0<=(t=this.G5a(this.zP(t,e)))?(this.hn.splice(t,1),this.Yl.set(this.hn)):Promise.resolve()},n.prototype.update=function(t,e){return 0<=(e=this.G5a(this.zP(t,e)))?(this.hn[e]=t,this.Yl.set(this.hn)):Promise.resolve()},n.prototype.zP=function(t,e){for(var i=0;i<this.hn.length;++i)if(e(this.hn[i],t))return this.hn[i]},n.prototype.G5a=function(t){return t?this.hn.indexOf(t):-1},e.qia=n},function(t,e){_esm(e),e.hUa=["AAAANHBzc2gAAAAA7e+LqXnWSs6jyCfc1R0h7QAAABQIARIQAAAAAAPSZ0kAAAAAAAAAAA=="],e.JJa=["c2tkOi8vbmV0ZmxpeC9BQUFBQkFBQUFBQUV3MzFBcDVKNTB0Qml4WTVMaTNYSGJFc3dKdDdybTdhdEExVWpPMkw3Q1ArckJYTT0=","c2tkOi8vbmV0ZmxpeC9BQUFBQkFBQUFBQUV3MzFCczgwL0dQUmxsNXEweHl3bHhac1Nya3hjMndPRHZpWWNCMmJoWDdQOTNHQT0=","c2tkOi8vbmV0ZmxpeC9BQUFBQkFBQUFBQUV3MzFDcWNFL25GeU0waXVKY1pKSi9xTkl3T0xJaGFCdnB4WEpDNGtyV2VpaGJBOD0=","c2tkOi8vbmV0ZmxpeC9BQUFBQkFBQUFBQUV3MzFFamVRbC8rZTBLYWpjSEhZQkt1U0hkb21BdXhmSGlWUTNZYTFpRGJqYjF5Zz0="],e.ZPa=["AAADPHBzc2gAAAAAmgTweZhAQoarkuZb4IhflQAAAxwcAwAAAQABABIDPABXAFIATQBIAEUAQQBEAEUAUgAgAHgAbQBsAG4AcwA9ACIAaAB0AHQAcAA6AC8ALwBzAGMAaABlAG0AYQBzAC4AbQBpAGMAcgBvAHMAbwBmAHQALgBjAG8AbQAvAEQAUgBNAC8AMgAwADAANwAvADAAMwAvAFAAbABhAHkAUgBlAGEAZAB5AEgAZQBhAGQAZQByACIAIAB2AGUAcgBzAGkAbwBuAD0AIgA0AC4AMgAuADAALgAwACIAPgA8AEQAQQBUAEEAPgA8AFAAUgBPAFQARQBDAFQASQBOAEYATwA+ADwASwBJAEQAUwA+ADwASwBJAEQAIABBAEwARwBJAEQAPQAiAEEARQBTAEMAVABSACIAIABWAEEATABVAEUAPQAiAEEAQQBBAEEAQQBNAFkARQB4AEkARQBBAEEAQQBBAEEAQQBBAEEAQQBBAEEAPQA9ACIAPgA8AC8ASwBJAEQAPgA8AC8ASwBJAEQAUwA+ADwALwBQAFIATwBUAEUAQwBUAEkATgBGAE8APgA8AEwAQQBfAFUAUgBMAD4AaAB0AHQAcAA6AC8ALwBjAGEAcABwAHIAcwB2AHIAMAA2AC8AcwBpAGwAdgBlAHIAbABpAGcAaAB0ADUALwByAGkAZwBoAHQAcwBtAGEAbgBhAGcAZQByAC4AYQBzAG0AeAA8AC8ATABBAF8AVQBSAEwAPgA8AEwAVQBJAF8AVQBSAEwAPgBoAHQAdABwADoALwAvAGMAYQBwAHAAcgBzAHYAcgAwADYALwBzAGkAbAB2AGUAcgBsAGkAZwBoAHQANQAvAHIAaQBnAGgAdABzAG0AYQBuAGEAZwBlAHIALgBhAHMAbQB4ADwALwBMAFUASQBfAFUAUgBMAD4APABEAEUAQwBSAFkAUABUAE8AUgBTAEUAVABVAFAAPgBPAE4ARABFAE0AQQBOAEQAPAAvAEQARQBDAFIAWQBQAFQATwBSAFMARQBUAFUAUAA+ADwALwBEAEEAVABBAD4APAAvAFcAUgBNAEgARQBBAEQARQBSAD4A"]},function(t,e){_esm(e),e.wH=void 0,(t=e.wH||(e.wH={}))[t.Request=0]="Request",t[t.yRa=1]="Renewal"},function(t,e){function i(){}_esm(e),e.b5=void 0,i.MXb=function(t){return"ID"+(t+1)},i.ikb=function(t){return Number(t.substr(2))-1},e.b5=i},function(t,e){_esm(e),e.q4='video/mp4; codecs="avc1.640028"',e.p4='audio/mp4; codecs="mp4a.40.5"',e.sjc="DrmTraitsSymbol"},function(t,s,e){var i,E,k,u,n,S,r,c,o,a,h,f,T,l;function d(t,e,i,n,r,a){var _=this;this.Ga=e,this.mE=i,this.config=n,this.$t=r,this.hC=a,this.keyStatuses=new o.$b({}),this.Sya=function(t){var e,i,n,r,a,o;try{if(n=(i=_.Lm.tqa(t)).bK,r=i.messageType,a=i.sessionId,_.uy=_.uy||i.uy,_.Q0(a),_.log.trace("Received "+t.type+" event",{sessionId:a,messageType:r,keyIds:_.uy}),r===s.Ria){if(_.config.jra)return void _.log.trace("Disabling license renewal");_.log.trace("Received a renewal request"),_.wg=k.Li.Zq,_.Nl=f.LK}_.Nl===f.zh&&_.wr(u.Cu.xgb),_.Nl===f.LK&&_.wr(u.Cu.ygb),o={Rk:n,I_a:r,wg:_.wg},null!=(e=_.Ldb)&&e.call(_,o),_.xZ&&(_.Lua(n)?_.zF(new c.jd(E.Z.XIa)):(_.xZ.resolve(o),_.xZ=void 0))}catch(t){_.zF(t)}},this.Qya=function(t){var e,i,n,r,a,o,s,u,c,h,f,l,d,p,b=t.target,g=b.keyStatuses;_.Q0(b.sessionId),_.log.trace("Received event: "+t.type);try{y=null==(e=_.context)?void 0:e.jba,t=[];for(var m=rt(g),v=m.next();!v.done;v=m.next())r=(n=rt(v.value)).next().value,a=n.next().value,o=_.mE.encode(new Uint8Array(r)),t.push({vq:o,status:a,height:null==y?void 0:y[o]});t.sort(function(t,e){return(t.height||0)-(e.height||0)}),s=t.map(function(t){return t.vq}),u=t.map(function(t){return t.height}),c=t.map(function(t){return t.status}),_.vwa=s+", "+u+", "+c,_.log.trace("KeyStatus: "+_.vwa);for(var y={},w=rt(g),A=w.next();!A.done;A=w.next())f=(h=rt(A.value)).next().value,l=h.next().value,d=_.mE.encode(new Uint8Array(f)),p=T[l],y[d]=p.status,_.MJ(d,p.error)&&(i=new S.Mh(p.error));_.keyStatuses.set(y)}catch(t){(i=new S.Mh(E.Z.Kub)).fX(t)}i?_.Nt?_.cba(i):_.lZ(i):(_.Lm.o8()||_.A$a(),_.wg!==k.Li.Cp||_.Lm.xoa()||(_.config.jra?_.log.trace("Disabling license renewal"):_.E9b()))},this.Ln=function(t){var e=_.Lm.gB(t);_.log.error("Received event: "+t.type,e),_.zF(e),_.cba(e),_.Nr||_.Nt||_.lZ(e)},this.$3b=function(t){_.log.error("MediaKeySession closed unexpectedly: "+t),_.lZ(new c.jd(E.Z.Mha,l[t]))},this.zF=function(e){var t;_.Nr&&_.close().then(function(){var t;_.log.trace("Issuing a generate challenge error"),null!=(t=_.Nr)&&t.reject(e),_.Nr=void 0},function(t){_.log.error("EmeSession closed with an error.",_.Lm.gB(t)),null!=(t=_.Nr)&&t.reject(e),_.Nr=void 0}),null!=(t=_.xZ)&&t.reject(e)},this.FZb=function(){var t;null!=(t=_.Nr)&&t.resolve(),_.Nr=void 0},this.cba=function(e){return _.log.error("Failed to add license",e),_.close().then(function(){var t;_.log.trace("Issuing a license error"),_.Nr=void 0,null!=(t=_.Nt)&&t.reject(e),_.Nt=void 0},function(t){_.log.error("EmeSession closed with an error.",_.Lm.gB(t)),_.Nl===f.LK&&_.wr(u.Cu.sYa),_.Nr=void 0,null!=(t=_.Nt)&&t.reject(e),_.Nt=void 0}).then(function(){throw e})},this.A$a=function(){_.Nt&&(_.log.info("Successfully added license"),_.Nl===f.zh?_.wr(u.Cu.lYa):_.Nl===f.LK&&_.wr(u.Cu.rYa),_.Nt.resolve(),_.Nt=void 0)},this.lZ=function(e){_.close().then(function(){var t;_.log.trace("Issuing a CDM error"),_.Nr=void 0,_.Nt=void 0,null!=(t=_.Idb)&&t.call(_,e)},function(t){_.log.error("EmeSession closed with an error.",_.Lm.gB(t)),_.Nr=void 0,_.Nt=void 0,null!=(t=_.Idb)&&t.call(_,e)})},this.wr=function(t){_.sd.push({time:_.Ga.Tb(),VZ:t})},this.Ygb=!1,this.log=t.jb("EmeSession"),this.Nl=f.pfc,this.ri=a.l1a(),this.Lm=a.k1a(),this.sd=[]}_esm(s),s.mJa=s.Ria=s.Sia=void 0,i=e(5),E=e(4),k=e(57),u=e(340),t=e(223),n=e(336),S=e(97),r=e(69),c=e(37),o=e(70),a=e(341),h=e(48),(e=f=f||{})[e.pfc=0]="unknown",e[e.create=1]="create",e[e.load=2]="load",e[e.zh=3]="license",e[e.LK=4]="renewal",e[e.stop=5]="stop",e[e.closed=6]="closed",s.Sia="license-request",s.Ria="license-renewal",T={usable:{status:t.$w.wmb},expired:{status:t.$w.Mr,error:E.Z.tja},released:{status:t.$w.released},"output-not-allowed":{status:t.$w.aeb,error:E.Z.KOa},"output-restricted":{status:t.$w.aeb,error:E.Z.uja},"output-downscaled":{status:t.$w.c5b},"status-pending":{status:t.$w.Occ},"internal-error":{status:t.$w.qYb,error:E.Z.Jub}},l={"internal-error":E.Y.jrb,"closed-by-application":E.Y.frb,"release-acknowledged":E.Y.nrb,"hardware-context-reset":E.Y.Kha,"resource-evicted":E.Y.prb},d.prototype.lY=function(){return this.hC.kba},d.prototype.A6a=function(){return this.vwa},d.prototype.BB=function(){return this.sessionId},d.prototype.close=function(){var e=this;return this.Ldb=this.context=void 0,this.Nl=f.closed,this.sd=[],this.ri.pZb()?(this.log.trace("Closing the session"),this.ri.Qgb(this.Sya),this.ri.Ngb(this.Qya),this.ri.Lgb(this.Ln),this.mediaKeys=void 0,this.$t.fu(this.config.PYa,this.ri.close()).then(function(){e.log.info("Closed the session")}).catch(function(t){throw e.log.error("Close failed",t),e.Lm.gB(t).code=E.Z.Mub,t})):Promise.resolve(void 0)},d.prototype.Iv=function(){return this.hC.Iv()},d.prototype.faa=function(){return void 0!==this.hk},d.prototype.createSession=function(e,t,i){var n=this;return this.context=i,this.wg=t,this.Nl=f.create,this.wr(u.Cu.lab),(e.m8a()?Promise.resolve():this.$t.fu(this.config.QYa,this.ri.createMediaKeys(this.hC)).then(function(t){return n.log.trace("Created media keys"),n.dEb(t).then(function(){return e.mYa(t)}).catch(function(t){return Promise.reject(n.mAa(t,E.Z.qrb))})})).then(function(){n.mediaKeys=e.mediaKeys;try{n.ri.createSession(n.mediaKeys,h.TEMPORARY),n.ri.nYa(n.Sya),n.ri.jYa(n.Qya),n.ri.gYa(n.Ln),n.ri.QCb(n.$3b),n.Q0(n.ri.BB())}catch(t){return Promise.reject(n.mAa(t,E.Z.grb))}}).catch(function(t){return Promise.reject(n.mAa(t,E.Z.zT))})},d.prototype.jbc=function(t){this.sk=t,this.log.dYa("xid",t.ga)},d.prototype.SRb=function(t,e){var i=this;return this.generateRequest(t,e).then(function(){return i.log.trace("Returning the challenge promise"),i.xZ.promise})},d.prototype.TRb=function(t,e){return this.generateRequest(t,e),this.Nr.promise},d.prototype.kYa=function(t){this.Re=t.Re,t=t.hk.map(function(t){return t.data}),this.Lua(t)?(this.log.error("The license buffer is empty"),this.zF(new S.Mh(E.Z.WIa,E.Y.UIa))):(this.Nl===f.zh&&(this.wr(u.Cu.wgb),this.hk=t,this.b3a=this.Lm.EP(this.uy,t),this.FZb()),this.Nl===f.LK&&(this.wr(u.Cu.zgb),this.hk=t,this.b3a=this.Lm.EP(this.uy,t),this.koa()))},d.prototype.aDb=function(t){this.Nl===f.LK?(this.wr(u.Cu.Agb),this.lZ(t)):this.zF(t)},d.prototype.koa=function(){var t,e=this;return this.hk?(this.Nt=new a.oU,t=this.hk,this.hk=void 0,this.$t.fu(this.config.TYa,this.ri.update(t,this.Nl===f.zh?n.wH.Request:n.wH.yRa,this.uy)).then(function(){e.Lm.o8()&&e.A$a()}).catch(function(t){(t=e.Lm.gB(t)).code=E.Z.G4,t.message="Unable to update the EME",e.log.error(t.message,t),e.cba(t)}),this.Nt.promise):this.cba(new S.Mh(E.Z.WIa,E.Y.ZIa))},d.prototype.bbc=function(t){this.Ldb=t},d.prototype.Wac=function(t){this.Idb=t},d.prototype.EP=function(){return this.b3a},d.prototype.generateRequest=function(t,e){var n=this;return this.Nl=f.zh,this.log.trace("Generating a license challenge"),this.Nr=new a.oU,this.xZ=new a.oU,t?this.Lua(t)?(t=new S.Mh(E.Z.VIa,E.Y.UIa),this.zF(t),Promise.reject(t)):this.$t.fu(this.config.y7,this.ri.generateRequest(this.Lm.kY(),t,e)).then(function(){n.Q0(n.ri.BB())}).catch(function(t){var e,i=new S.Mh(E.Z.h3,t instanceof r.Os?E.Y.AT:E.Y.Om);try{e=n.Lm.gB(t),i.Xd=e.Xd,i.message="Unable to generate request.",i.fX(t)}catch(t){}return n.log.error("Unable to generate a license request",i),n.zF(i),Promise.reject(i)}):(t=new S.Mh(E.Z.VIa,E.Y.ZIa),this.zF(t),Promise.reject(t))},d.prototype.dEb=function(t){return this.$t.fu(this.config.SYa,this.ri.setServerCertificate(t,this.Lm.l$()))},d.prototype.Q0=function(t){t&&t!==this.sessionId&&(this.sessionId&&this.log.warn("sessionId changed from "+this.sessionId+" to "+t),this.sessionId=t,this.log.dYa("sessionId",t))},d.prototype.E9b=function(){var t=this;this.Ygb||(this.Ygb=!0,this.log.info("Kicking off license renewal",{timeout:this.config.CF}),setTimeout(function(){t.KK()},this.config.CF.ka(i.pa)))},d.prototype.wZb=function(t){var e;return 1080<(null!=(e=null==(e=null==(e=this.context)?void 0:e.jba)?void 0:e[t])?e:0)},d.prototype.MJ=function(t,e){return e===E.Z.uja?this.wZb(t)?this.config.ceb:this.config.beb:!!e},d.prototype.KK=function(){this.log.trace("Initiating a renewal request"),this.wg=k.Li.Zq,this.Nl=f.LK,this.Lm.ppa()?this.Lm.Gva(this.ri):this.B8()},d.prototype.B8=function(){var t=this;this.ri.B8(this.mediaKeys,h.TEMPORARY,this.Sya,this.Qya,this.Ln).then(function(){t.log.debug("Creating session to renew license"),t.Q0(t.ri.BB())}).catch(function(){t.lZ(new S.Mh(E.Z.h3))})},d.prototype.Lua=function(t){return 0===t.length||t.reduce(function(t,e){return t||0===e.length},!1)},d.prototype.mAa=function(t,e){var i;return null!=t&&t.code&&null!=t&&t.Kc?t:(i=h.Wta(null==t?void 0:t.message),new S.Mh(e,t instanceof r.Os?E.Y.AT:E.Y.Om,null==(e=null==i?void 0:i.toString(16))?void 0:e.toUpperCase(),null==t?void 0:t.message,t))},s.mJa=d},function(t,e){var i,n;_esm(e),e.c3a=e.Cu=void 0,(n=i=e.Cu||(e.Cu={}))[n.lab=0]="licenseStarted",n[n.xgb=1]="receivedLicenseChallenge",n[n.wgb=2]="receivedLicense",n[n.ygb=3]="receivedRenewalChallengeComplete",n[n.zgb=4]="receivedRenewalLicenseComplete",n[n.Agb=5]="receivedRenewalLicenseFailed",n[n.B8b=6]="receivedIndivChallengeComplete",n[n.C8b=7]="receivedIndivLicenseComplete",n[n.lYa=8]="addLicenseComplete",n[n.rYa=9]="addRenewalLicenseComplete",n[n.sYa=10]="addRenewalLicenseFailed",e.c3a=function(t){switch(t){case i.lab:return"lg";case i.xgb:return"lc";case i.wgb:return"lr";case i.ygb:return"renew_lc";case i.zgb:return"renew_lr";case i.Agb:return"renew_lr_failed";case i.B8b:return"ilc";case i.C8b:return"ilr";case i.lYa:return"ld";case i.rYa:return"renew_ld";case i.sYa:return"renew_ld_failed";default:return"unknown"}}},function(t,e){_esm(e),e.oU=void 0,e.oU=function(){var i=this;this.promise=new Promise(function(t,e){i.resolve=t,i.reject=e})}},function(t,e){_esm(e),e.uNa="MediaKeySystemAccessInternalFactorySymbol"},function(t,e){_esm(e),e.gka="QueryStringDataProviderSymbol"},function(t,e){_esm(e),e.cOa="NetworkMonitorConfigSymbol"},function(t,e){_esm(e),e.HIa="DrmProviderSymbol"},function(t,e){_esm(e),e.lJa="EmeSessionFactorySymbol"},function(t,e){_esm(e),e.zHa="ClockConfigSymbol"},function(t,e){_esm(e),e.vOa="OneWayCounterFactorySymbol"},function(t,e,i){var r,n;function a(){}_esm(e),e.$ga=void 0,t=i(0),i=i(1),r={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},a.prototype.decode=function(t){for(var e=new Uint8Array(t.length/2),i=0;i<e.length;i++)e[i]=this.mlb(t.substr(2*i,2));return e},a.prototype.encode=function(t){for(var e,i="",n=t.length,r=0;r<n;r++)i+="0123456789ABCDEF"[(e=t[r])>>>4]+"0123456789ABCDEF"[15&e];return i},a.prototype.jJ=function(t,e){var i="";for(e<<=1;e--;)i=("0123456789ABCDEF"[15&t]||"0")+i,t>>>=4;return i},a.prototype.mlb=function(t){var e=t.length;if(7<e)throw Error("hex to long");for(var i=0,n=0;n<e;n++)i=16*i+r[t[n]];return i},n=a,n=t.__decorate([i.$()],n),e.$ga=n},function(t,e,i){var n,r,a,s,u,c,h,f;function o(){}_esm(e),e.aha=void 0,t=i(0),i=i(1),r=Array.prototype.slice,a=r.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),r=r.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),s={},u={},c={},h={},f=/\s+/g,[a,r].forEach(function(t){for(var e,i=t.length;i--;)e=t[i],s[e]=i<<18,u[e]=i<<12,c[e]=i<<6,h[e]=i}),o.prototype.encode=function(t){return n.Fra(t,a,"=")},o.prototype.decode=function(t){return n.Sqa(t)},o.Sqa=function(t){var e,i;switch(r=(t=t.replace(f,"")).length,"="!==(e=t.charAt(r-1))&&"."!==e||r--,"="!==(e=t.charAt(r-1))&&"."!==e||r--,e=3*(r>>2),i=0,r%4){case 2:i=1;break;case 3:i=2;break;case 1:throw Error("bad base64")}for(var n,r=new Uint8Array(e+i),a=0,o=0;o<e;){if(!(0<=(n=s[t[a++]]+u[t[a++]]+c[t[a++]]+h[t[a++]])&&n<=16777215))throw Error("bad base64");r[o++]=n>>>16,r[o++]=n>>>8&255,r[o++]=255&n}if(0<i&&(n=s[t[a++]]+u[t[a++]],r[o++]=n>>>16,1<i&&(n+=c[t[a++]],r[o++]=n>>>8&255),!(0<=n&&n<=16776960&&0==(n&(1<i?255:65535)))))throw Error("bad base64");return r},o.Fra=function(t,e,i){for(var n,r="",a=0,o=t.length,s=o-2;a<s;){if(!(0<=(n=(t[a++]<<16)+(t[a++]<<8)+t[a++])&&n<=16777215))throw Error("not bytes");r+=e[n>>>18]+e[n>>>12&63]+e[n>>>6&63]+e[63&n]}if(a==s){if(!(0<=(n=(t[a++]<<8)+t[a++])&&n<=65535))throw Error("not bytes");r+=e[n>>>10]+e[n>>>4&63]+e[n<<2&63]+i}else if(a==o-1){if(!(0<=(n=t[a++])&&n<=255))throw Error("not bytes");r+=e[n>>>2]+e[n<<4&63]+i+i}return r},r=n=o,r=n=t.__decorate([i.$()],r),e.aha=r},function(t,e,i){var n,r;function a(){this.Lr={},this.id="$es$"+n.counter++}_esm(e),e.Bk=void 0,t=i(0),i=i(1),a.prototype.addListener=function(t,e,i){var n,r="$netflix$player$order"+this.id+"$"+t;this.Lr&&(n=this.Lr[t]?this.Lr[t].slice():[],i&&(e[r]=i),n.indexOf(e)<0&&(n.push(e),n.sort(function(t,e){return(t[r]||0)-(e[r]||0)})),this.Lr[t]=n)},a.prototype.removeListener=function(t,e){if(this.Lr&&this.Lr[t]){for(var i,n=this.Lr[t].slice();0<=(i=n.indexOf(e));)n.splice(i,1);this.Lr[t]=n}},a.prototype.Tc=function(t,i,e){var n;if(this.Lr)for(n=this.uta(t),t={RL:0};t.RL<n.length;(t={RL:t.RL}).RL++)e?function(e){return function(){var t=n[e.RL];setTimeout(function(){t(i)},0)}}(t)():n[t.RL].call(this,i)},a.prototype.ti=function(){this.Lr=void 0},a.prototype.on=function(t,e,i){this.addListener(t,e,i)},a.prototype.uta=function(t){return null!=(t=this.Lr&&(this.Lr[t]||(this.Lr[t]=[])))?t:[]},(r=n=a).counter=0,r=n=t.__decorate([i.$()],r),e.Bk=r},function(t,e){_esm(e),e.PHa="CsvEncoderSymbol"},function(t,e){_esm(e),e.Dha="DecoderTimeoutPathologistSymbol"},function(t,e){_esm(e),e.eja=e.Ctb=void 0,e.Ctb=function(){},e.eja="MseConfigSymbol"},function(t,e,i){var n;function r(t){this.Vyb=void 0!==t&&t,this.yf={0:[]}}_esm(e),e.cka=void 0,t=i(0),i=i(1),r.prototype.add=function(t,e){var i;(i=this.yf[e=void 0===e?0:e])?this.Vyb&&-1!==i.indexOf(t)||i.push(t):this.yf[e]=[t]},r.prototype.remove=function(t,e){this.yA(t,void 0===e?0:e)},r.prototype.removeAll=function(t){this.yA(t)},r.prototype.flatten=function(){var i=this;return Object.keys(this.yf).sort().reduce(function(t,e){return t.concat(i.yf[e])},[])},r.prototype.yA=function(i,n){Object.entries(this.yf).forEach(function(t){var e=rt(t);t=e.next().value,e=e.next().value,void 0!==n&&n!==parseInt(t)||-1<(t=e.indexOf(i))&&e.splice(t,1)})},n=r,n=t.__decorate([i.$()],n),e.cka=n},function(t,e){_esm(e),e.ITa="UrlFactorySymbol"},function(t,e,i){var n,s,r;function a(t,e,i,n,r,a,o){this.debug=t,this.config=e,this.platform=i,this.Wba=n,this.debug.assert(r&&r!=s.Z.mo,"There should always be a specific error code"),this.errorCode=r||s.Z.mo,a&&"object"==typeof a?(this.Ba=a.Ba||a.Kc,this.Of=a.Of||a.Xd,this.Mra=a.Mra||a.Lo,this.Sb=a.Sb||a.details,this.kX=a.$k,this.r9=a.r9||a.grc||a.iC,this.TE=a.TE||a.data,a.SZ&&(this.SZ=a.SZ),this.El=a.El,this.method=a.method,this.vca=a.vca,this.alert=a.alert,this.Yna=a.Yna,this.CJ=a.CJ,!this.Sb&&this.CJ&&(this.Sb=JSON.stringify(this.CJ)),this.debug.assert(!this.El||this.El==this.Of)):(this.Ba=a,this.Of=o),this.stack=[this.errorCode],this.Ba?this.stack.push(this.Ba):this.Of&&this.stack.push(s.Y.mo),this.Of&&this.stack.push(this.Of),this.a9=this.platform.At+this.stack.join("-")}_esm(e),e.AQa=void 0,n=i(17),s=i(4),r=i(15),i(25),a.prototype.Mib=function(t){this.t6b=t},a.prototype.toString=function(){var t="[PlayerError #"+this.a9+"]";return this.Sb&&(t+=" "+this.Sb),this.kX&&(t+=" (CustomMessage: "+this.kX+")"),t},a.prototype.F1=function(){var t,e;if((t=this.kX?["streaming_error"]:t)||this.Wba.Iv()!==n.g3||("80080017"==this.Of&&(t=["admin_mode_not_supported","platform_error"]),"8004CD12"===this.Of&&(t=["pause_timeout"])),(t=t||this.Wba.Iv()!==n.Jha||this.errorCode!==s.Z.TIa&&this.errorCode!==s.Z.zT?t:["no_cdm","platform_error","plugin_error"])||this.errorCode!==s.Z.Mha||this.Ba!==s.Y.Kha||(t=["pause_timeout"]),this.r9===s.t4.Qka&&(this.ypa("2018")||this.ypa("2020")?t=["received_soad"]:this.ypa("5000")&&(t=["should_reset_device"])),(e=this.CSb())&&(t=[e],this.kX=void 0),!t)switch(this.errorCode){case s.Z.F4:case s.Z.i4:case s.Z.hob:case s.Z.tja:this.t6b&&(t=["pause_timeout"]);break;case s.Z.oLa:case s.Z.pLa:t=this.Ba?["platform_error"]:["multiple_tabs"];break;case s.Z.nia:case s.Z.OOa:case s.Z.vja:case s.Z.IOa:t=["platform_error","plugin_error"];break;case s.Z.hU:t=["no_cdm","platform_error","plugin_error"];break;case s.Z.$Ia:case s.Z.Ms:case s.Z.G4:switch(this.Of){case"FFFFD000":t=["device_needs_service","platform_error"];break;case"48444350":t=["unsupported_output","platform_error"];break;case"00000024":t=["private_mode"]}break;case s.Z.KOa:case s.Z.uja:t=["unsupported_output"]}if(!(t=(t=!t&&s.wJa(this.Ba)?this.Ba==s.Y.IT?["geo"]:["internet_connection_problem"]:t)||this.errorCode!==s.Z.zT||this.Ba!==s.Y.Om||"S"!==this.platform.At?t:["private_mode"]))switch(this.mkb(this.Ba)){case s.Y.Xka:t=["should_upgrade"];break;case s.Y.DOa:t=["should_reset_device"];break;case s.Y.COa:t=["should_reload_device"];break;case s.Y.BOa:t=["should_exit_device"];break;case s.Y.Dtb:case s.Y.QMa:t=["should_signout_and_signin"];break;case s.Y.Etb:t=["internet_connection_problem"];break;case s.Y.UHa:t=["platform_error","plugin_error"];break;case s.Y.mqb:case s.Y.YKa:case s.Y.ZKa:t=["private_mode"];break;case s.Y.Pia:t=["should_reload_with_preferred_locales"]}return(t=t||[]).push(this.platform.At+this.errorCode),this.Ba&&(this.mkb(this.Ba)===s.Y.EOa?t.push("incorrect_pin"):t.push(""+this.Ba)),t={display:{code:this.a9,text:this.kX},messageIdList:t,alert:this.alert,alertTag:this.Yna,preferredAudioLocale:null==(e=this.CJ)?void 0:e.O8a,preferredTextLocale:null==(e=this.CJ)?void 0:e.P8a},this.config().PPb&&(t.debugData=this.TE),t},a.prototype.mkb=function(t){var e=parseInt(t,10);return isNaN(e)?t:e},a.prototype.ypa=function(t){return(r.Oa(this.Of)?this.Of.toString():r.vg(this.Of)?this.Of:"").endsWith(t)},a.prototype.CSb=function(){if(this.errorCode===s.Z.jM&&(this.Ba===s.Y.qja||this.Ba===s.Y.AOa))return this.DSb(this.Ba===s.Y.qja)},a.prototype.DSb=function(t){var e=this.config().browserInfo||{},i=null==(n=e.os)?void 0:n.name,n=((null==(r=e.os)?void 0:r.version)||"").split("."),r=parseInt(n&&n[0]);switch(n=parseInt(n&&n[1]),i){case"windows":return r<6||6===r&&n<1?t?"cdm_not_supported_warning_switch_windows":"cdm_not_supported_switch_windows":t?"cdm_not_supported_warning_update":"cdm_not_supported_update";case"mac":return r<10||10===r&&n<10?t?"cdm_not_supported_warning_switch_mac":"cdm_not_supported_switch_mac":t?"cdm_not_supported_warning_update":"cdm_not_supported_update";default:return t?"cdm_not_supported_warning_other":"cdm_not_supported_other"}},e.AQa=a},function(t,e){_esm(e),e.Zia="MediaElementHelpersSymbol"},function(t,e){_esm(e),e.BT="EventSourceFactorySymbol"},function(t,e,i){var n,r;function a(){}_esm(e),e.BT=e.AJa=void 0,t=i(0),n=i(351),i=i(1),a.prototype.create=function(){return new n.Bk},r=a,r=t.__decorate([i.$()],r),e.AJa=r,e.BT="EventSourceFactorySymbol"},function(t,e,i){var r;function n(t,e,i,n,r,a){this.level=t,this.aq=e,this.timestamp=i,this.message=n,this.Zc=r,this.index=void 0===a?0:a,this.Ssb={0:"F",1:"E",2:"W",3:"I",4:"T",5:"D"}}_esm(e),e.Hia=void 0,r=i(5),n.prototype.Afa=function(e,i){var n=""+this.message;return this.Zc.forEach(function(t){n+=t.DL(e,i)}),(this.timestamp.ka(r.pa)/1e3).toFixed(3)+"|"+this.index+"|"+(this.Ssb[this.level]||this.level)+"|"+this.aq+"| "+n},e.Hia=n},function(t,e){_esm(e),e.PNa="MomentObserverFactory"},function(t,e){_esm(e),e.iSa="SegmentConfigFactorySymbol"},function(t,e){_esm(e),e.kQa="PlaybackFactorySymbol"},function(t,e){_esm(e),e.WTa="VideoPlayerFactorySymbol"},function(t,e){_esm(e),e.sTa="TransitionLoggerSymbol"},function(t,e){_esm(e),e.uIa="DiagnosticsFactorySymbol"},function(t,e){_esm(e),e.mPa="PboGenerateScreenshotsCommandSymbol"},function(t){t.exports=function(t){return"[object Object]"===Object.prototype.toString.call(t)}},function(t,e,i){var n,r,a,o,s,u;e=i(53),n=i(371),r=i(758),a=i(369),o=i(231),s=i(763),u=i(374),i=e(n(["filter"],s,function(i,n){return a(n)?o(function(t,e){return i(n[e])&&(t[e]=n[e]),t},{},u(n)):r(i,n)})),t.exports=i},function(t,e,i){var o=i(372),s=i(757);t.exports=function(n,r,a){return function(){var t,e;if(0===arguments.length)return a();if(e=(t=Array.prototype.slice.call(arguments,0)).pop(),!o(e)){for(var i=0;i<n.length;){if("function"==typeof e[n[i]])return e[n[i]].apply(e,t);i+=1}if(s(e))return r.apply(null,t)(e)}return a.apply(this,arguments)}}},function(t){t.exports=Array.isArray||function(t){return null!=t&&0<=t.length&&"[object Array]"===Object.prototype.toString.call(t)}},function(t){t.exports={xa:function(){return this.h2["@@transducer/init"]()},result:function(t){return this.h2["@@transducer/result"](t)}}},function(t,e,i){var a,o,s,u,c;e=i(126),a=i(230),o=i(764),s=!{toString:null}.propertyIsEnumerable("toString"),u="constructor valueOf isPrototypeOf toString propertyIsEnumerable hasOwnProperty toLocaleString".split(" "),c=function(){return arguments.propertyIsEnumerable("length")}(),i=e("function"!=typeof Object.keys||c?function(t){var e,i,n,r;if(Object(t)!==t)return[];for(n in e=[],i=c&&o(t),t)!a(n,t)||i&&"length"===n||(e[e.length]=n);if(s)for(i=u.length-1;0<=i;){if(n=u[i],r=a(n,t)){t:{for(r=0;r<e.length;){if(e[r]===n){r=!0;break t}r+=1}r=!1}r=!r}r&&(e[e.length]=n),--i}return e}:function(t){return Object(t)!==t?[]:Object.keys(t)}),t.exports=i},function(t){t.exports=function(t,e){for(var i=0,n=e.length,r=Array(n);i<n;)r[i]=t(e[i]),i+=1;return r}},function(t,e,i){var n,r=i(232),a=i(126);e=i(53),n=i(767),i=e(function(t,e){return 1===t?a(e):r(t,n(t,[],e))}),t.exports=i},function(t,e){_esm(e),e.sKa="HLSPlaylistBuilderSymbol"},function(t,e){_esm(e),e.DQa="PlayerPlaydataMonitorSymbol"},function(t,e){_esm(e),e.Eka="StreamChangeDetectorSymbol"},function(t,e){_esm(e),e.UT="HLSLogblobMonitorFactorySymbol"},function(t,e){_esm(e),e.EKa="HeaderFetcherSymbol"},function(t,e){_esm(e),e.OKa="HttpDispatcherSymbol"},function(t,e){_esm(e),e.IKa="HLSHeaderParserFactorySymbol"},function(t){(e=new Uint32Array([0,0])).set(new Uint32Array([16843009]),1);var e=0!==e[0]?function(t,e,i){new Uint8Array(t.buffer,t.byteOffset,t.byteLength).set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),i*t.byteLength/t.length)}:function(t,e,i){t.set(e,i)};t.exports={from:function(t,e,i,n){t=new t(e.length);for(var r="function"==typeof i,a=0;a<e.length;++a)t[a]=r?i.call(n,e[a],a,e):e[a];return t},set:e}},function(t,e,i){var n,r,a,o;function s(){var t=null!==r&&r.apply(this,arguments)||this;return t.iJ=1536,t}function u(){return null!==a&&a.apply(this,arguments)||this}function c(){return null!==o&&o.apply(this,arguments)||this}_esm(e),n=i(21),r=i(180).default,n.__extends(s,r),s.qd=!0,e.default=t=s,a=t,n.__extends(u,a),u.lf="ac-3",e.Qnb=i=u,o=t,n.__extends(c,o),c.lf="ec-3",e.erb=t=c},function(t,e,i){var n,r,a;function o(){return null!==a&&a.apply(this,arguments)||this}_esm(e),n=i(21),r=i(103),t=i(24),i=r.hja,a=t.dg,n.__extends(o,a),o.prototype.parse=function(){return this.Eh(),this.fileSize=this.R.Tl(),this.aa=this.R.Tl(),this.duration=this.R.Tl(!1,!0),this.J3b=this.R.Tl(),this.R.Tl(),this.N3b=this.R.Tl(),this.S2b=this.R.ic(),this.K3b=this.R.Tl(),this.dRb=this.R.ic(),this.R.Vda(),this.Cm={moof:{offset:this.J3b},sidx:{offset:this.K3b,size:this.dRb}},this.Cm[r.WNa]={offset:this.N3b,size:this.S2b},this.R.offset-this.startOffset<=this.length-24&&(this.M3b=this.R.Tl(),this.I2b=this.R.ic(),this.L3b=this.R.Tl(),this.H2b=this.R.ic(),this.Cm[r.w4]={offset:this.M3b,size:this.I2b},this.Cm[r.v4]={offset:this.L3b,size:this.H2b}),!0},o.lf=i,o.qd=!1,e.default=o},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),n=i(21),t=i(103),i=i(24),t=t.ija,r=i.dg,n.__extends(a,r),a.prototype.parse=function(){var t,e;this.Eh(),1<=this.version&&this.R.Vda(),f=this.R.ic(),this.Cm={};for(var i=this.startOffset+this.length,n=0;n<f;++n)"uuid"===(t=this.R.yC())&&(t=this.R.Vda()),e=this.R.Tl(),this.Cm[t]={offset:i,size:e},i+=e;return!0},a.lf=t,a.qd=!1,e.default=i=a},function(t,e,i){function n(){return(n=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)}function r(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)}function a(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function o(t,e){var i,n,r={};for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(n=0,i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(r[i[n]]=t[i[n]]);return r}function s(t,e,i,n){var r,a=arguments.length,o=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.fq)o=Reflect.fq(t,e,i,n);else for(var s=t.length-1;0<=s;s--)(r=t[s])&&(o=(a<3?r(o):3<a?r(e,i,o):r(e,i))||o);return 3<a&&o&&Object.defineProperty(e,i,o),o}function u(i,n){return function(t,e){n(t,e,i)}}function c(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.Ec)return Reflect.Ec(t,e)}function h(t,o,s,u){return new(s=s||Promise)(function(i,e){function n(t){try{a(u.next(t))}catch(t){e(t)}}function r(t){try{a(u.throw(t))}catch(t){e(t)}}function a(t){var e;t.done?i(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(n,r)}a((u=u.apply(t,o||[])).next())})}function f(n,r){var a,o,s,u,t;function e(i){return function(t){var e=[i,t];if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,s&&(u=2&e[0]?s.return:e[0]?s.throw||((u=s.return)&&u.call(s),0):s.next)&&!(u=u.call(s,e[1])).done)return u;switch(s=0,(e=u?[2&e[0],u.value]:e)[0]){case 0:case 1:u=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,s=e[1],e=[0];continue;case 7:e=a.il.pop(),a.Ih.pop();continue;default:if(!(u=0<(u=a.Ih).length&&u[u.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!u||e[1]>u[0]&&e[1]<u[3]))a.label=e[1];else if(6===e[0]&&a.label<u[1])a.label=u[1],u=e;else{if(!(u&&a.label<u[2])){u[2]&&a.il.pop(),a.Ih.pop();continue}a.label=u[2],a.il.push(e)}}e=r.call(n,a)}catch(t){e=[6,t],s=0}finally{o=u=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}return a={label:0,ib:function(){if(1&u[0])throw u[1];return u[1]},Ih:[],il:[]},t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t}function l(t,e,i,n){t[n=void 0===n?i:n]=e[i]}function d(t,e){for(var i in t)"default"===i||e.hasOwnProperty(i)||(e[i]=t[i])}function p(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return{value:(t=t&&n>=t.length?void 0:t)&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function b(t,e){var i,n,r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;t=r.call(t),n=[];try{for(;(void 0===e||0<e--)&&!(i=t.next()).done;)n.push(i.value)}catch(t){var a={error:t}}finally{try{i&&!i.done&&(r=t.return)&&r.call(t)}finally{if(a)throw a.error}}return n}function g(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(b(arguments[e]));return t}function m(){for(var t,e=0,i=0,n=arguments.length;i<n;i++)e+=arguments[i].length;for(e=Array(e),i=t=0;i<n;i++)for(var r=arguments[i],a=0,o=r.length;a<o;a++,t++)e[t]=r[a];return e}function v(t){return this instanceof v?(this.rz=t,this):new v(t)}function y(t,e,i){var r,a,o;function n(n){r[n]&&(a[n]=function(i){return new Promise(function(t,e){1<o.push([n,i,t,e])||s(n,i)})})}function s(t,e){var i;try{(i=r[t](e)).value instanceof v?Promise.resolve(i.value.rz).then(u,c):h(o[0][2],i)}catch(t){h(o[0][3],t)}}function u(t){s("next",t)}function c(t){s("throw",t)}function h(t,e){t(e),o.shift(),o.length&&s(o[0][0],o[0][1])}if(Symbol.asyncIterator)return r=i.apply(t,e||[]),o=[],a={},n("next"),n("throw"),n("return"),a[Symbol.asyncIterator]=function(){return this},a;throw new TypeError("Symbol.asyncIterator is not defined.")}function w(n){var t,r;function e(e,i){t[e]=n[e]?function(t){return(r=!r)?{value:v(n[e](t)),done:"return"===e}:i?i(t):t}:i}return t={},e("next"),e("throw",function(t){throw t}),e("return"),t[Symbol.iterator]=function(){return this},t}function A(o){var t,e;function i(a){e[a]=o[a]&&function(r){return new Promise(function(t,e){var i,n;r=o[a](r),i=t,t=e,n=r.done,e=r.value,Promise.resolve(e).then(function(t){i({value:t,done:n})},t)})}}if(Symbol.asyncIterator)return(t=o[Symbol.asyncIterator])?t.call(o):(o=p(o),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);throw new TypeError("Symbol.asyncIterator is not defined.")}function _(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function E(t){var e;if(t&&t.__esModule)return t;if(e={},null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function k(t){return t&&t.__esModule?t:{default:t}}function S(t,e){if(e.has(t))return e.get(t);throw new TypeError("attempted to get private field on non-instance")}function T(t,e,i){if(e.has(t))return e.set(t,i),i;throw new TypeError("attempted to set private field on non-instance")}i.r(e),i.d(e,"__extends",function(){return a}),i.d(e,"__assign",function(){return n}),i.d(e,"__rest",function(){return o}),i.d(e,"__decorate",function(){return s}),i.d(e,"__param",function(){return u}),i.d(e,"__metadata",function(){return c}),i.d(e,"__awaiter",function(){return h}),i.d(e,"__generator",function(){return f}),i.d(e,"__createBinding",function(){return l}),i.d(e,"__exportStar",function(){return d}),i.d(e,"__values",function(){return p}),i.d(e,"__read",function(){return b}),i.d(e,"__spread",function(){return g}),i.d(e,"__spreadArrays",function(){return m}),i.d(e,"__await",function(){return v}),i.d(e,"__asyncGenerator",function(){return y}),i.d(e,"__asyncDelegator",function(){return w}),i.d(e,"__asyncValues",function(){return A}),i.d(e,"__makeTemplateObject",function(){return _}),i.d(e,"__importStar",function(){return E}),i.d(e,"__importDefault",function(){return k}),i.d(e,"__classPrivateFieldGet",function(){return S}),i.d(e,"__classPrivateFieldSet",function(){return T})},function(t,e){var i,n,r;_esm(e),t={name:"heaac-2-dash reset sample",profile:53,channels:2,sampleRate:24e3,duration:1024,Wea:new Uint8Array([33,17,69,0,20,80,1,70,157,188,0,0,8,28,0,0,0,14]).buffer},i={name:"heaac-2-dash standard sample",profile:53,channels:2,sampleRate:24e3,duration:1024,Wea:new Uint8Array([33,17,69,0,20,80,1,70,240,77,251,1,60,8,64,0,0,0,0,0,0,0,0,0,7,14,0,14]).buffer},n={name:"ddplus-5.1-dash standard sample",profile:54,channels:6,sampleRate:48e3,duration:1536,Wea:new Uint8Array([11,119,1,127,63,134,255,225,6,32,0,32,0,66,10,65,0,135,216,68,3,254,202,2,88,163,1,16,177,64,146,32,160,75,20,80,37,136,35,227,36,160,152,156,165,37,38,41,37,73,74,9,201,146,130,114,82,116,160,152,152,150,136,58,125,89,245,39,207,159,63,116,150,147,242,73,95,165,171,175,253,215,126,82,21,55,188,8,165,126,249,242,100,175,255,249,73,42,255,253,215,124,246,156,23,239,108,36,134,249,211,228,181,255,246,253,205,119,176,179,86,126,166,27,231,175,225,58,255,222,170,110,127,249,215,41,232,146,73,183,0,88,211,192,0,0,31,7,178,116,62,122,114,245,8,233,196,71,223,196,18,59,202,113,248,103,242,80,250,118,15,1,60,79,251,46,14,8,9,37,4,14,183,67,131,195,103,241,250,32,124,81,61,76,9,40,161,2,1,16,64,114,219,225,217,172,140,44,12,64,147,49,210,195,206,12,52,186,196,0,107,134,202,4,9,216,72,67,11,127,185,13,125,124,124,194,90,203,69,1,209,8,129,183,36,196,101,7,248,73,181,38,181,30,232,124,27,18,222,207,92,251,85,227,78,0,70,196,59,0,207,194,0,252,226,209,111,144,239,111,148,54,39,28,176,248,160,58,88,113,9,76,65,57,180,96,82,224,115,52,208,161,184,86,120,211,212,168,13,52,217,124,121,189,237,163,53,72,52,157,245,160,110,16,182,219,180,152,180,136,47,23,151,198,192,20,62,220,249,107,82,0,0,0,234,22,24,202,252,104,154,198,95,7,98,110,113,104,187,197,110,105,201,123,18,61,45,233,135,20,0,151,155,45,131,75,174,9,228,53,214,32,19,131,131,87,146,156,22,16,160,0,0,5,169,31,241,155,119,242,21,168,176,225,35,130,186,60,97,189,244,57,5,158,124,200,224,156,74,33,48,12,75,235,252,25,83,61,12,178,134,75,92,124,56,71,63,232,35,142,23,11,179,154,25,17,254,160,55,0,28,144,253,91,117,102,221,190,135,231,10,70,30,23,176,0,0,1,176,4,8,133,150,0,255,79,159,83,83,77,46,180,197,95,161,141,13,44,47,253,61,176,86,148,52,201,148,194,126,246,155,165,78,181,18,73,32,28,45,70,221,101,80,78,20,6,206,130,30,219,0,30,251,237,127,232,113,255,107,248,25,147,2,185,140,224,224,189,152,101,89,28,152,47,182,88,216,198,90,3,213,0,64,150,89,96,5,18,73,32,18,105,56,170,112,129,132,77,233,15,190,8,58,109,254,217,232,164,181,91,34,227,8,27,140,83,141,186,71,175,110,91,83,37,82,15,247,58,112,134,42,42,18,3,0,8,18,196,44,5,18,73,32,25,234,135,27,145,161,76,95,163,44,124,140,151,13,189,174,93,108,80,63,112,61,88,28,46,219,213,65,40,74,243,69,108,141,37,80,21,72,191,2,50,88,122,3,0,0,10,36,146,64,54,170,52,196,80,163,79,142,148,81,36,46,131,66,255,221,26,128,73,23,103,49,192,55,30,59,219,161,166,249,122,141,88,62,36,228,107,116,158,14,252,92,103,226,0,0,20,73,36,128,113,105,27,109,199,165,26,100,240,30,8,113,124,175,175,166,144,115,74,138,80,24,32,117,28,206,194,21,85,40,218,254,177,100,37,127,63,131,208,68,250,76,169,40,0,0,0,0,0,0,0,95,208,40,5]).buffer},r={name:"ddplus-2.0-dash standard sample",profile:57,channels:2,sampleRate:48e3,duration:1536,Wea:new Uint8Array([11,119,0,191,52,134,255,224,4,32,24,132,33,46,136,15,236,128,165,150,32,161,69,16,65,66,33,0,160,224,136,32,48,40,56,176,233,159,62,203,176,139,218,213,221,58,124,249,83,239,245,26,179,232,106,97,174,75,74,149,104,85,223,38,74,253,242,95,253,47,117,10,116,228,206,145,61,126,153,83,169,201,146,214,124,251,202,125,62,3,184,113,105,44,145,91,107,58,206,87,7,170,74,27,187,48,217,65,241,1,161,157,113,91,21,163,111,51,104,115,118,123,44,77,110,247,112,43,8,73,76,172,73,150,207,95,153,3,182,105,124,66,2,0,118,237,94,135,88,83,124,41,205,76,76,109,131,40,166,169,150,166,233,51,26,43,143,131,162,201,227,35,146,30,46,75,41,1,28,21,124,91,11,74,112,106,170,137,88,102,81,122,90,108,154,41,64,72,81,74,40,176,29,246,45,81,141,178,47,68,210,113,129,217,48,217,176,77,157,147,211,28,106,174,210,66,110,190,228,106,249,236,107,188,90,91,41,31,191,71,149,201,40,136,209,138,100,91,53,25,18,245,27,148,208,18,20,81,70,24,7,147,116,48,233,47,145,81,32,242,74,51,50,138,85,186,6,202,227,8,169,201,206,77,68,201,80,186,57,179,90,232,234,208,230,109,96,154,4,249,38,86,153,185,81,45,38,146,243,73,117,105,140,5,34,48,227,11,10,32,130,14,49,4,40,131,127,229,199,232,95,78,126,229,243,175,254,117,124,233,83,154,239,93,63,195,190,120,247,107,232,10,68,177,11,22,24,32,66,4,99,231,207,159,7,124,241,174,215,192,0,0,0,0,0,0,0,0,0,0,84,40,187,227]).buffer},e.kW={standard:{"heaac-2-dash":i,"heaac-2hq-dash":i,"ddplus-5.1-dash":n,"ddplus-5.1hq-dash":n,"ddplus-2.0-dash":r},reset:{"heaac-2-dash":t,"heaac-2hq-dash":t},"heaac-2-dash":t,"heaac-2-dash-alt":i,"ddplus-5.1-dash":n,"ddplus-2.0-dash":r}},function(t,e,i){var n,r,s,a;function o(t,e,i,n,r){return(i=a.call(this,i,n,r)||this).DFb=t,i.nS=e,i.oe={},i}_esm(e),n=i(21),r=i(24),s=i(87),a=i(822).rwb,n.__extends(o,a),o.prototype.parse=function(t){var e,i,n,r,a,o;for(this.offset=0,e=[],t=t||{};this.offset<this.view.byteLength&&!(this.view.byteLength-this.offset<8);){if(i=this.offset,0===(n=this.ic()))return{done:!1,offset:this.offset,error:"Invalid zero-length box"};if(null===(r=s.GH(this.ic())))return{done:!1,offset:this.offset,error:"Invalid box type"};if("uuid"===r){if(this.view.byteLength-this.offset<16)break;r=this.Vda()}if(0===e.length&&this.nS.W4a(r,i,n))break;if(i+n>this.view.byteLength)break;if(o=void 0,a=this.DFb[r]){if(o=new a(this,r,i,n,e[0]),(e[0]||this).XV(o),!o.parse(t))return{done:!1,offset:this.offset,error:"parse error in "+r+" box"};this.config.oza&&a.qd?e.unshift(o):this.offset=i+n}else this.offset=i+n;for(;e.length&&this.offset>e[0].byteOffset+e[0].uK-8;){if(!(o=e.shift()).dJ(t))return{done:!1,offset:this.offset,error:"finalize error in "+o.type+" box"};this.offset=o.byteOffset+o.uK}if(0===e.length&&this.nS.Q2a(r,i,n,o))break}return!this.nS.done&&0<(t=this.nS.endOffset?this.nS.endOffset-this.view.byteLength:4096)?{done:!1,offset:this.offset,Ocb:t}:{done:!0,offset:Math.min(this.nS.endOffset||1/0,this.offset)}},o.prototype.XV=function(t){r.dg.XV(this,t)},e.dha=o},function(t,e,i){var a;function o(t,e){-1!==(t=e.indexOf(t))&&e.splice(t,1)}function n(t){this.endOffset=t,this.done=!1}function r(t,e,i,n){void 0===e&&(e=[]),void 0===i&&(i=[]),void 0===n&&(n=!1),this.Cw=t,this.V8=e,this.Ikb=i,this.xeb=n,this.done=!1,this.Cm={}}_esm(e),a=i(103),n.prototype.W4a=function(){return this.done},n.prototype.Q2a=function(t,e,i){return this.done=e+i>=this.endOffset},e.lIa=n,r.prototype.W4a=function(t,e,i){if(-1!==r.GWb.indexOf(t)&&(this.Cm[t]={offset:e,size:i}),-1!==this.Ikb.indexOf(t)){if(this.Cm[t]={offset:e,size:i},!this.xeb)return this.endOffset=e,this.done=!0;this.endOffset=e+i}else this.Cw&&-1!==this.Cw.indexOf(t)?(t=1<this.Cw.length?4096:0,this.endOffset=Math.max(e+i+t,this.endOffset||0)):-1!==this.V8.indexOf(t)&&(t=this.Cw?4096:0,this.endOffset=Math.max(e+i+t,this.endOffset||0));return this.done},r.prototype.Q2a=function(t,e,i,n){var r=this;return-1!==this.Ikb.indexOf(t)?this.done=!0:(t===a.hja&&this.Qib(n.Cm),t===a.ija&&this.Qib(n.Cm),this.Cw&&o(t,this.Cw),o(t,this.V8),this.Cw&&0===this.Cw.length&&!this.V8.some(function(t){return r.Cm[t]})?this.done=!0:this.done)},r.prototype.Qib=function(t){var i=this;this.Cm=t,this.endOffset=(this.Cw||[]).concat(this.V8).reduce(function(t,e){return i.Cm[e]?(e=i.Cm[e],Math.max(e.offset+(e.size||4096),t)):t},this.endOffset||0)},r.GWb=["moov","sidx"],e.Wrb=r},function(t,e){_esm(e),e.uKa="HLSPlaylistTransformerSymbol"},function(t,e){_esm(e),e.sHa="CdnPartitionerSymbol"},function(t,e,i){var n;function r(){}_esm(e),e.Eha=void 0,n=i(42),r.ut=function(){var t={};return t[n.ae.TG]="mp4a.40.2",t[n.ae.K3]="mp4a.40.2",t[n.ae.UG]="mp4a.40.2",t[n.ae.eA]="mp4a.40.42",t[n.ae.uT]="ec-3",t[n.ae.N2]="ec-3",t[n.ae.vT]="ec-3",t},e.Eha=r},function(t,e,i){_esm(e),(t=i(0)).__exportStar(i(833),e),t.__exportStar(i(834),e),t.__exportStar(i(835),e),t.__exportStar(i(836),e),t.__exportStar(i(837),e),t.__exportStar(i(396),e),t.__exportStar(i(838),e),t.__exportStar(i(839),e),t.__exportStar(i(840),e),t.__exportStar(i(841),e),t.__exportStar(i(842),e),t.__exportStar(i(843),e),t.__exportStar(i(847),e),t.__exportStar(i(247),e),t.__exportStar(i(848),e),t.__exportStar(i(77),e),t.__exportStar(i(849),e),t.__exportStar(i(850),e),t.__exportStar(i(851),e),t.__exportStar(i(852),e),t.__exportStar(i(853),e),t.__exportStar(i(854),e),t.__exportStar(i(855),e),t.__exportStar(i(856),e),t.__exportStar(i(857),e),t.__exportStar(i(858),e),t.__exportStar(i(859),e),t.__exportStar(i(860),e),t.__exportStar(i(861),e),t.__exportStar(i(862),e),t.__exportStar(i(863),e),t.__exportStar(i(864),e),t.__exportStar(i(865),e),t.__exportStar(i(866),e),t.__exportStar(i(867),e),t.__exportStar(i(876),e),t.__exportStar(i(879),e),t.__exportStar(i(880),e),t.__exportStar(i(881),e),t.__exportStar(i(882),e)},function(t,e){var i,n;_esm(e),e.Nc=e.tq=void 0,(n=i=i||{})[n.Uj=0]="STOPPED",n[n.ed=1]="BUFFERING",n[n.eg=2]="REBUFFERING",n[n.Vj=3]="STREAMING",n[n.uU=4]="TRACK_SWITCH",e.Nc=i,e.tq=function(t){return t===i.ed||t===i.eg||t===i.uU}},function(t,e){_esm(e),e.joa=void 0,e.joa=function(i,n,t){var r,a=!0;return t.forEach(function(t){var e;a&&i===t.profile&&(e=t.ranges,!(a=void 0===e?n>=t.min&&n<=t.max:e.some(function(t){return n>=t.min&&n<=t.max}))&&t.disallowed&&t.disallowed.some(function(t){if(t.stream.bitrate===n)return r=t.disallowedBy,!0}))}),{inRange:a,Z8:r}}},function(t,e){_esm(e),e.iH=void 0,e.iH={un:function(t){return t}}},function(t,e,i){var n,s;function r(t,e){var i;(i=this).GGb=e=void 0===e?!1:e,this.filters=((e={})[s.sR]=[],e[s.cJ]=[],e),Array.isArray(t)?t.forEach(function(t){return i.and(t,s.sR)}):this.and(t)}_esm(e),e.Ku=e.DM=void 0,n=i(398),(i=s=e.DM||(e.DM={}))[i.sR=0]="primary",i[i.cJ=1]="fallback",r.prototype.and=function(t,e){return void 0===e&&(e=s.sR),t!==n.iH&&this.filters[e].push({filter:t,L0a:!0}),this},r.prototype.or=function(t,e){return void 0===e&&(e=s.sR),this.filters[e].push({filter:t,L0a:!1}),this},r.prototype.filter=function(i){var t=this;[s.sR,s.cJ].forEach(function(e){t.filters[e]=t.filters[e].filter(function(t){return i(e,t.filter)})})},r.prototype.un=function(i,n,r,a){var o=this;return[s.sR,s.cJ].reduce(function(t,e){return o.filters[e].reduce(function(t,e){return e.L0a?t=e.filter.un(t,n,r,a):0===t.length&&(t=e.filter.un(i,n,r,a)),t},t)},i)},e.Ku=r},function(t,e,i){var n,r,a;function o(t,e){this.Sa=t,this.GB=e?[e]:[]}function s(t,e){return a.call(this,t,e)||this}_esm(e),e.Ls=e.qvb=void 0,n=i(0),r=i(249),Object.defineProperties(o.prototype,{value:{get(){return this.Sa},configurable:!0}}),o.prototype.addListener=function(t){-1===this.GB.indexOf(t)&&(this.GB=this.GB.slice(),this.GB.push(t))},o.prototype.removeListener=function(t){-1!==(t=this.GB.indexOf(t))&&(this.GB=this.GB.slice(),this.GB.splice(t,1))},e.qvb=t=o,a=t,n.__extends(s,a),s.VEa=function(t,e,i){return new r.nja(t,e,i,!1)},Object.defineProperties(s.prototype,{value:{get(){return this.Sa},set(t){this.set(t)},configurable:!0}}),s.prototype.set=function(e){var i=this.Sa;i!==e&&(this.Sa=e,this.GB.forEach(function(t){return t({oldValue:i,newValue:e})}))},e.Ls=t=s},function(t,e){_esm(e),e.$E=void 0,e.$E=function(t,e){var i;for(t=Math.abs(t),e=Math.abs(e);e;)e=t%(i=e),t=i;return t}},function(t,e,i){var n;function r(t,e){return(t=n.call(this,t)||this).U3a=e,t.name="PlaybackError",t}_esm(e),e.iQa=void 0,i=i(0),n=Error,i.__extends(r,n),r.iZb=function(t){return!!(t&&t.message&&t.stack&&t.U3a)&&"PlaybackError"===(null==t?void 0:t.name)},e.iQa=r},function(t,e,i){var n;_esm(e),e.ke=void 0,(t=i(0)).__exportStar(i(404),e),t.__exportStar(i(897),e),t.__exportStar(i(250),e),t.__exportStar(i(898),e),t.__exportStar(i(899),e),t.__exportStar(i(900),e),t.__exportStar(i(405),e),t.__exportStar(i(902),e),n=i(54),Object.defineProperties(e,{ke:{enumerable:!0,get(){return n.ke}}})},function(t,e){var i;_esm(e),e.yp=e.dT=void 0,(i=e.dT||(e.dT={}))[i.default=0]="default",i[i.disabled=1]="disabled",i[i.q0b=2]="lowCpuPlaybackStarting",(i=e.yp||(e.yp={}))[i.CLOSED=0]="CLOSED",i[i.OPEN=1]="OPEN"},function(t,e){_esm(e)},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),e.assert=e.AssertionError=void 0,i=i(0),r=Error,i.__extends(a,r),n=a,e.AssertionError=n,e.assert=function(t,e){if(!t)throw new n(e||"Assertion failed")}},function(t,e,i){var n;_esm(e),e.H9=e.PQb=e.qsa=void 0,n=i(253),e.qsa=function(e,i){var n=void 0;return Object.keys(e.O).some(function(t){return null==(t=(n=e.O[t]).next)?void 0:t[i]})?n:void 0},e.PQb=function(e,i){return n.Xc(Object.keys(e.O),function(t){return null==(t=e.O[t].next)?void 0:t[i]})},e.H9=function(e,i){return Object.keys(e.O).filter(function(t){return null==(t=e.O[t].next)?void 0:t[i]})}},function(t,e,i){var n;function r(t){this.vh=t,this.dZ=this.IB=!1}_esm(e),e.NFa=void 0,n=i(63),Object.defineProperties(r.prototype,{id:{get(){return this.vh.id},configurable:!0},startTime:{get(){return n.M.Ja(this.vh.va)},configurable:!0},endTime:{get(){return n.M.Ja(this.vh.wa)},configurable:!0},TV:{get(){return this.vh.TV},configurable:!0},xfa:{get(){return this.vh.xfa},configurable:!0},KJ:{get(){return this.vh.KJ},configurable:!0},LDa:{get(){return this.vh.LDa},configurable:!0}}),e.NFa=r},function(t){function e(){}function i(t){this.JXa=t,this.cr=[],this.Yg=null}e.prototype.clear=function(){this.yf=null,this.size=0},e.prototype.find=function(t){for(var e,i=this.yf;null!==i;){if(0===(e=this.oo(t,i.data)))return i.data;i=i.Wh(0<e)}return null},e.prototype.lowerBound=function(t){for(var e,i=this.yf,n=this.iterator(),r=this.oo;null!==i;){if(0===(e=r(t,i.data)))return n.Yg=i,n;n.cr.push(i),i=i.Wh(0<e)}for(e=n.cr.length-1;0<=e;--e)if(r(t,(i=n.cr[e]).data)<0)return n.Yg=i,n.cr.length=e,n;return n.cr.length=0,n},e.prototype.upperBound=function(t){for(var e=this.lowerBound(t),i=this.oo;null!==e.data()&&0===i(e.data(),t);)e.next();return e},e.prototype.min=function(){var t=this.yf;if(null===t)return null;for(;null!==t.left;)t=t.left;return t.data},e.prototype.max=function(){var t=this.yf;if(null===t)return null;for(;null!==t.right;)t=t.right;return t.data},e.prototype.iterator=function(){return new i(this)},e.prototype.Nf=function(t){for(var e,i=this.iterator();null!==(e=i.next());)t(e)},i.prototype.data=function(){return null!==this.Yg?this.Yg.data:null},i.prototype.next=function(){var t;if(null===this.Yg)null!==(t=this.JXa.yf)&&this.tWa(t);else if(null===this.Yg.right){do{if(t=this.Yg,!this.cr.length){this.Yg=null;break}}while(this.Yg=this.cr.pop(),this.Yg.right===t)}else this.cr.push(this.Yg),this.tWa(this.Yg.right);return null!==this.Yg?this.Yg.data:null},i.prototype.IK=function(){var t;if(null===this.Yg)null!==(t=this.JXa.yf)&&this.oWa(t);else if(null===this.Yg.left){do{if(t=this.Yg,!this.cr.length){this.Yg=null;break}}while(this.Yg=this.cr.pop(),this.Yg.left===t)}else this.cr.push(this.Yg),this.oWa(this.Yg.left);return null!==this.Yg?this.Yg.data:null},i.prototype.tWa=function(t){for(;null!==t.left;)this.cr.push(t),t=t.left;this.Yg=t},i.prototype.oWa=function(t){for(;null!==t.right;)this.cr.push(t),t=t.right;this.Yg=t},t.exports=e},function(t,e,i){var n;function r(t){this.RR=new Uint16Array(t.length);for(var e=0;e<t.length;++e)this.RR[e]=t.charCodeAt(e)}_esm(e),e.$ka=void 0,n=i(0).__importDefault(i(3)),r.prototype.encrypt=function(t){for(var e=this.RR.length,i="",n=0;n<t.length;++n)i+=String.fromCharCode(this.RR[n%e]^t.charCodeAt(n));return encodeURIComponent(i)},r.prototype.decrypt=function(t,e){var i;if(f=this.RR.length,i="",e=void 0===e?!1:e)for(e=new Uint8Array(n.default.H8(t)),t=0;t<e.length;t++)i+=String.fromCharCode(this.RR[t%f]^e[t]);else for(e=decodeURIComponent(t),t=0;t<e.length;t++)i+=String.fromCharCode(this.RR[t%f]^e.charCodeAt(t));return i},e.$ka=r},function(t,e){function a(t){var e=1/(1+(i=Math.abs(t))/2),i=e*Math.exp(-i*i-1.26551223+e*(1.00002368+e*(.37409196+e*(.09678418+e*(e*(.27886807+e*(e*(1.48851587+e*(.17087277*e-.82215223))-1.13520398))-.18628806)))));return 0<=t?i:2-i}_esm(e),e.BPb=e.R8a=e.nP=void 0,e.nP=a,e.R8a=function(t){var e;if(2<=t)return-100;if(t<=0)return 100;for(var i=t<1?t:2-t,n=-.70711*((2.30753+.27061*(n=Math.sqrt(-2*Math.log(i/2))))/(1+n*(.99229+.04481*n))-n),r=0;r<2;r++)n+=(e=a(n)-i)/(1.1283791670955126*Math.exp(-n*n)-n*e);return t<1?n:-n},e.BPb=function(t){return 1-a(t)}},function(t){function e(t){this.wma=t,this.Hg=[],this.Ws=!1,this.eI=void 0,this.Mk={}}e.prototype.m7=function(t){this.Hg.length===this.wma&&this.Hg.shift(),Array.isArray(t)?this.Hg=this.Hg.concat(t):this.Hg.push(t),this.Ws=!0},e.prototype.KP=function(){return this.Hg.length},e.prototype.jpa=function(){var t=this.Hg;return 0<t.length?t.reduce(function(t,e){return t+e},0)/this.Hg.length:void 0},e.prototype.g8=function(){var t,e=this.Hg;if(0<e.length)return t=this.jpa(),e=e.reduce(function(t,e){return t+e*e},0)/e.length,Math.sqrt(e-t*t)},e.prototype.jv=function(t){var e,i,n;return!this.Ws&&void 0!==this.eI||(this.eI=this.Hg.slice(0).sort(function(t,e){return t-e}),this.Mk={},this.Ws=!1),void 0===this.Mk[t]&&(e=this.eI,i=Math.floor(t/100*(e.length-1)+1)-1,n=(t/100*(e.length-1)+1)%1,this.Mk[t]=i==e.length-1?e[i]:e[i]+n*(e[1+i]-e[i])),this.Mk[t]},t.exports=e},function(t,e,i){var a;function n(t){this.reset(),this.ibc(t)}function r(t){this.setInterval(t),this.reset()}function o(t){this.ND=new r(t),this.Pb=0,this.Vc=null}a=i(11),n.prototype.ibc=function(t){this.NM=Math.pow(.5,1/t),this.XU=t},n.prototype.reset=function(t){t&&t.ta&&a.Oa(t.ta)?t.ye&&a.Oa(t.ye)?(this.ux=this.Jyb,this.dr=t.ta,this.JD=t.ye+t.ta*t.ta):(this.ux=this.Jyb,this.dr=t.ta,this.JD=t.ta*t.ta):this.JD=this.dr=this.ux=0},n.prototype.add=function(t){var e;a.Oa(t)&&(this.ux++,e=this.NM,this.dr=e*this.dr+(1-e)*t,this.JD=e*this.JD+(1-e)*t*t)},n.prototype.bua=function(){var t,e,i;return 0===this.ux?{ta:0,ye:0}:(t=this.dr,e=this.JD,e/=i=1-Math.pow(this.NM,this.ux),{ta:t/=i,ye:(i=t*t)<e?e-i:0})},n.prototype.get=function(){var t=this.bua();return{ta:Math.floor(t.ta),ye:Math.floor(t.ye)}},n.prototype.getState=function(){return 0===this.ux?null:{a:Number(this.dr.toPrecision(6)),s:Number(this.JD.toPrecision(6)),n:this.ux}},n.prototype.Jd=function(t){return!a.xb(t)&&a.has(t,"a")&&a.has(t,"s")&&a.isFinite(t.a)&&a.isFinite(t.s)?(this.dr=t.a,this.JD=t.s,a.has(t,"n")&&a.Oa(t.n)?this.ux=t.n:this.ux=16*this.XU,!0):(this.JD=this.dr=this.ux=0,!1)},r.prototype.setInterval=function(t){this.XU=t,this.NM=-Math.log(.5)/t},r.prototype.reset=function(t){this.Ab=this.$g=null,t&&a.isFinite(t.ta)?this.dr=t.ta:this.dr=0},r.prototype.start=function(t){a.xb(this.$g)&&(this.Ab=this.$g=t)},r.prototype.add=function(t,e,i){var n,r;a.xb(this.$g)&&(this.Ab=this.$g=e),this.$g=Math.min(this.$g,e),e=Math.max(i-e,1),g=this.NM,r=(n=Math.max(i,this.Ab))-this.Ab,i=n-i,this.dr=this.dr*(0<r?Math.exp(-g*r):1)+8*t/e*(1-Math.exp(-g*e))*(0<i?Math.exp(-g*i):1),this.Ab=n},r.prototype.get=function(t){var e;return t=Math.max(t,this.Ab),e=this.dr*Math.exp(-this.NM*(t-this.Ab)),0<(t=1-Math.exp(-this.NM*(t-this.$g)))&&(e/=t),{ta:Math.floor(e)}},r.prototype.toString=function(){return"ewmav("+this.XU+")"},o.prototype.setInterval=function(t){this.ND.setInterval(t)},o.prototype.reset=function(t){this.ND.reset(t),this.Pb=0,this.Vc=null},o.prototype.start=function(t){!a.xb(this.Vc)&&t>this.Vc&&(this.Pb+=t-this.Vc,this.Vc=null),this.ND.start(t-this.Pb)},o.prototype.add=function(t,e,i){!a.xb(this.Vc)&&i>this.Vc&&(this.Pb+=e>this.Vc?e-this.Vc:0,this.Vc=null),this.ND.add(t,e-this.Pb,i-this.Pb)},o.prototype.stop=function(t){this.Vc=Math.max(a.xb(this.ND.Ab)?0:this.ND.Ab+this.Pb,a.xb(this.Vc)?t:Math.min(this.Vc,t))},o.prototype.get=function(t){return this.ND.get((a.xb(this.Vc)?t:this.Vc)-this.Pb)},o.prototype.toString=function(){return this.ND.toString()},t.exports={Xqb:n,ajc:r,Vqb:o}},function(t,e,i){var r,a;function n(t,e,i,n){r.call(this,i,n),this.Bx=new a(t),this.szb=e}r=i(154),a=i(412),(n.prototype=Object.create(r.prototype)).shift=function(){var t=this.My(0);return r.prototype.shift.call(this),null!==t&&this.Bx.m7(t),t},n.prototype.flush=function(){var t=this.get();return this.Bx.m7(t),r.prototype.reset.call(this),t},n.prototype.get=function(){var t=this.uJ();return{sampleSize:this.KP(),kda:t,sya:t.nk?(t.Pl-t.Ol)/t.nk:void 0}},n.prototype.KP=function(){return this.Bx.KP()},n.prototype.uJ=function(){return this.Bx.KP()<this.szb?{Ol:void 0,nk:void 0,Pl:void 0,sampleSize:void 0,Hj:void 0}:{Ol:this.Bx.jv(25),nk:this.Bx.jv(50),Pl:this.Bx.jv(75),sampleSize:this.Bx.KP(),Hj:this.Bx.jv.bind(this.Bx)}},n.prototype.toString=function(){return"biqr("+this.MN+","+this.Ud+","+this.Pk+")"},t.exports=n},function(t,e,i){var n,r;function a(t){this.K={NZ:t.maxc||25,gqa:t.c||.5,ohc:t.w||15e3,SA:t.b||5e3},n.call(this,this.K.ohc,this.K.SA),this.CV()}n=i(154),r=i(183).TDigest,(a.prototype=Object.create(n.prototype)).shift=function(){var t=this.My(0);return n.prototype.shift.call(this),null!==t&&(this.zf.push(t,1),this.Ws=!0),t},a.prototype.flush=function(){var t=this.get();return this.zf.push(t,1),this.Ws=!0,n.prototype.reset.call(this),t},a.prototype.get=function(){return this.N7a()},a.prototype.CB=function(){var t=this.N7a();return{min:t.min,p10:t.ada,p25:t.Ol,p50:t.nk,p75:t.Pl,p90:t.bda,max:t.max,centroidSize:t.WGb,sampleSize:t.sampleSize,centroids:t.xj}},a.prototype.N7a=function(){var t;return 0===this.zf.size()||(t=this.zf.Hj([0,.1,.25,.5,.75,.9,1]))[2]===t[4]?null:(!this.Ws&&this.md||(this.Ws=!1,this.md={min:t[0],ada:t[1],Ol:t[2],nk:t[3],Pl:t[4],bda:t[5],max:t[6],Hj:this.zf.Hj.bind(this.zf),WGb:this.zf.size(),sampleSize:this.zf.n,xj:this.FSb(),CB:this.CB.bind(this)}),this.md)},a.prototype.FSb=function(){var t;return 0===this.zf.size()?null:!this.Ws&&this.md?this.md.centroids:(t=this.zf.Hj([.25,.75]))[0]===t[1]?null:(this.zf.size()>this.K.NZ&&this.zf.eB(),t=this.zf.co(!1).map(function(t){return{mean:t.ag,n:t.n}}),JSON.stringify(t))},a.prototype.J7a=function(){return this.zf.summary()},a.prototype.size=function(){return this.zf.size()},a.prototype.toString=function(){return"btdtput("+this.MN+","+this.Ud+","+this.Pk+"): "+this.zf.summary()},a.prototype.CV=function(){this.zf=new r(this.K.gqa,this.K.NZ)},t.exports=a},function(t,e,i){var o,s,u,c,h,f,l,d,p,b,g,m,v,y,w,A;function n(t){this.config=t,this.Jxb=t.Cla}o=i(417).Aja,s=i(933).CHa,e=i(413),u=e.Xqb,c=e.Vqb,h=i(257).Wqb,f=i(258).Fha,l=i(258).mIa,d=i(257).uwb,p=i(414),b=i(415),g=i(418).bTa,m=i(934),v=i(935),y=i(259),w=i(936).EQa,A=i(937).GFa,(n.prototype.constructor=n).prototype.create=function(t,e){var i,n=this.Jxb[t],r=e[t],a={};switch(n&&Object.keys(n).forEach(function(t){a[t]=n[t]}),r&&Object.keys(r).forEach(function(t){a[t]=r[t]}),a.type){case"slidingwindow":i=new o(this.config,new h(a.mw));break;case"discontiguous-ewma":i=new o(this.config,new c(a.mw));break;case"initial-discontiguous-ewma":i=new w(new c(a.mw),a.playerStates);break;case"wssl":i=new d(a.mw,a.max_n);break;case"iqr":i=new p(a.mx,a.mn,a.bw,a.iv);break;case"tdigest":i=new b(a);break;case"ci":i=new o(this.config,new A(a,new s(a)));break;case"discrete-ewma":i=new u(a.hl);break;case"tdigest-history":i=new g(a);break;case"iqr-history":i=new m(a);break;case"avtp":i=new y;break;case"entropy":i=new v(a);break;case"deliverytime":i=new o(this.config,new A(a,new f(a)));break;case"deliverytime-ci":i=new o(this.config,new A(a,new l(a)))}return i&&(i.type=a.type),i},t.exports=n},function(t,e,i){function n(t,e){this.config=t,this.filter=e}_esm(e),e.Aja=void 0,new(i(3).default.Console)("ASEJS_PACING_FILTER","media|asejs"),n.prototype.si=function(){return new n(this.config,this.filter)},n.prototype.Ubc=function(t,e,i,n){var r,a=n.A0;if(!a||!a.Xaa())return!0;switch(this.config.uXb){case"requested":return!1;case"requested-low":return(a=a.KBa(this.config.Ara)).rcb()>((null==(r=n.HC)?void 0:r.U_)||0);case"inferred":if(t=(a=a.KBa(this.config.Ara)).Bxa(t,e,i,this.config.C_))return a.rcb()>((null==(r=n.HC)?void 0:r.U_)||0);break;case"inferred-strict":if((a=a.KBa(this.config.Ara)).Bxa(t,e,i,this.config.C_))return!1}return!0},n.prototype.add=function(t,e,i,n){this.Ubc(t,e,i,n)&&this.filter.add(t,e,i,n)},n.prototype.get=function(t){if(this.filter.get)return this.filter.get(t)},n.prototype.start=function(t){this.filter.start&&this.filter.start(t)},n.prototype.stop=function(t){this.filter.stop&&this.filter.stop(t)},n.prototype.flush=function(){this.filter.flush&&this.filter.flush()},n.prototype.reset=function(){this.filter.reset&&this.filter.reset()},e.Aja=n},function(t,e,i){var n,r;function a(t){this.K={NZ:t.maxc||25,gqa:t.c||.5,D8b:t.rc||"none",AJ:t.hl||7200},this.CV(),this.ZAb=this.K.D8b,this.XU=this.K.AJ,this.ila=Math.exp(Math.log(2)/this.XU),this.ila=Math.max(this.ila,1),this.M5=1}n=i(11),r=i(183).TDigest,new(i(3).default.Console)("ASEJS_NETWORK_HISTORY","media|asejs"),a.prototype.getState=function(){var t;return 0===this.zf.size()||(t=this.zf.Hj([.25,.75]))[0]===t[1]?null:(this.zf.size()>this.K.NZ&&this.zf.eB(),t=this.zf.co(!1).reduce(function(t,e){return n.Oa(e.ag)&&n.Oa(e.n)&&t.push({mean:e.ag,n:e.n/this.M5}),t}.bind(this),[]),{tdigest:JSON.stringify(t)})},a.prototype.Jd=function(t){var e;if(n.xb(t)||!n.has(t,"tdigest")||!n.vg(t.tdigest))return!1;try{e=JSON.parse(t.tdigest)}catch(t){return!1}e.forEach(function(t){n.isFinite(t.n)||(t.n=1)}),t=e.map(function(t){return{ag:t.mean,n:t.n}}),this.M5=1,this.zf.zAa(t),void 0===this.zf.Hj(0)&&this.CV()},a.prototype.get=function(){var t=this.zf,e=t.Hj([0,.1,.25,.5,.75,.9,1]);return{min:e[0],ada:e[1],Ol:e[2],nk:e[3],Pl:e[4],bda:e[5],max:e[6],xj:t.co(!1)}},a.vUb=function(t){var e=new a({});return n.xb(t)||n.sa(t)||!n.isArray(t.xj)||(e.zf.zAa(t.xj),void 0===e.zf.Hj(0)&&e.CV()),(t=e.zf.Hj([.25,.75]))[0]===t[1]?null:function(t){return e.zf.Hj(t)}},a.prototype.add=function(t){var e=1;"ewma"===this.ZAb&&(this.M5=e=this.M5*this.ila),this.zf.push(t,e)},a.prototype.toString=function(){return"TDigestHist("+this.zf.summary()+")"},a.prototype.CV=function(){this.zf=new r(this.K.gqa,this.K.NZ)},t.exports={bTa:a}},function(t,e,n){var i,r;function a(t,e,i){i.ZI&&(r=new(n(944).JSa)(t,e))}_esm(e),e.d5=void 0,i=n(2),e.d5=(a.instance=function(){return i.assert(r,"expected StaticMediaProvider to exist"),r},a)},function(t,e){_esm(e),e.e5a=e.cnb=e.d5a=void 0,e.d5a={23976:{fb:24e3,aa:1001},24:{fb:24e3,aa:1e3},25:{fb:25e3,aa:1e3},2997:{fb:3e4,aa:1001},30:{fb:3e4,aa:1e3}},e.cnb=["23976","24","25","2997","30"],e.e5a=function(t,e){return t.fb/t.aa==e.fb/e.aa}},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),e.assert=void 0,i=i(260),r=Error,i.__extends(a,r),n=a,e.assert=function(t,e){if(!t)throw new n(e||"Assertion failed")}},function(t,e,i){var n,d,r,a,o,s,u;function c(t,e,i){var n,r;this.K=e,this.H=i,this.J6=t,q=this.DN=this.SM=this.QM=0,r=n=0,this.J6.length>=this.K.kca&&(this.J6.forEach(function(t){!(t=t.get().hRb)||d.sa(t.avtp)||d.sa(t.neuhd)||(q+=t.avtp,n+=+t.neuhd,r++)}),this.DN=r,this.QM=q/r,this.SM=n/r)}function h(t,e,i){return(t=u.call(this,t,e,i)||this).Zka=[],t.kQb={},t.Mkb=[],t.jB=new s,t.J6.length>=t.K.kca&&(t.PXa("avtp",t.jB.T7),t.PXa("neuhd",t.jB.yca)),t}_esm(e),e.JKa=e.kia=void 0,n=i(0),d=n.__importStar(i(11)),r=n.__importDefault(i(3)),a=i(963),o=i(964),s=function(){this.T7=new o.kU(100),this.yca=new o.kU(100)},Object.defineProperties(c.prototype,{cFb:{get(){return this.QM},configurable:!0},eFb:{get(){return this.SM},configurable:!0}}),c.prototype.Uaa=function(){return this.DN>=this.K.kca&&this.QM>=this.K.baselineHighAndStableThreshold.bwThreshold&&this.SM<this.K.baselineHighAndStableThreshold.nethreshold},e.kia=t=c,u=t,n.__extends(h,u),h.prototype.Uaa=function(){var t;return this.uUb(),(t=new a.GMa(this.H,this.Mkb,this.rFb)).Xza(this.Zka),t=t.IHb(this.K.jaa.Mrc),this.pgc&&1===t&&this.DN>=this.K.kca},h.prototype.eY=function(){var t={},e=r.default.time.now(),i=new Date(e),n=i.getHours();return t.currentMonoTime=e,t.currentTime=i.getTime(),t.currentHour=n,t},h.prototype.Y5a=function(t,e,i){t="avtp"===t?this.QM:this.SM;for(var n=e.g8(),r=0,a="skew"===i?3:4,o=0;o<e.Hg.length;o++)d.sa(t)||d.sa(n)||(r+=Math.pow(e.Hg[o]-t,a));return r/=e.Hg.length,!d.sa(n)&&0<n?r/Math.pow(n,a)-3*("skew"===i?0:1):NaN},h.prototype.o6a=function(t,i,e){var n=0;return"lte"===e?n=t.reduce(function(t,e){return e<=i?t+1:t},0)/+t.length:"gte"===e&&(n=t.reduce(function(t,e){return i<=e?t+1:t},0)/+t.length),n},h.prototype.dUb=function(t){var e=t.jv(25),i=t.jv(50);return t=t.jv(75),!(d.sa(e)||d.sa(i)||d.sa(t))&&0<i?(t-e)/i:NaN},h.prototype.xSb=function(t,e){return t="avtp"===t?this.QM:this.SM,e=e.g8(),!d.sa(e)&&!d.sa(t)&&(0<e||0<t)&&0<t?(t-e)/(t+e):NaN},h.prototype.uJ=function(t,e){return t=t.jv(e),d.sa(t)?NaN:t},h.prototype.normalize=function(t,e,i){return!isNaN(t)&&0<i?(t-e)/i:NaN},h.prototype.uUb=function(){var i,n,r,a,o,s,u=this,c=this.K.jaa.Sab.Aqc,h=this.K.jaa.Sab.yqc,f=this.K.jaa.Sab.zqc,l=0;this.pgc=!Object.keys(c).some(function(t){var e;if(o=NaN,!(c.hasOwnProperty(t)&&h.hasOwnProperty(t)&&f.hasOwnProperty(t)&&!d.sa(u.jB)&&u.jB.T7&&u.jB.yca)||u.DN<1||"number"!=typeof c[t]||"number"!=typeof h[t]||"number"!=typeof f[t])return!0;switch(i=c[t],n=h[t],r=f[t],s=t.split("_",2),a=s[0],s=s[1],a){case"avtp":e=u.jB.T7;break;case"neuhd":e=u.jB.yca;break;default:e=void 0}if("avtp"===a||"neuhd"===a){if(e)switch(s){case"last":o=e.Hg[u.DN-1];break;case"mean":o="avtp"===a?u.QM:u.SM;break;case"niqr":o=u.dUb(e);break;case"skew":o=u.Y5a(a,e,"skew");break;case"kurtosis":o=u.Y5a(a,e,"kurtosis");break;case"std":o=e.g8();break;case"b":o=u.xSb(a,e);break;default:-1!==t.search("[p][1-9]?[1-9]")&&(o=u.uJ(e,Number(t.split("_p",2)[1])))}}else switch(t){case"fracAbove20Mbps":e=u.jB.T7,o=d.sa(e)?NaN:u.o6a(e.Hg,2e4,"gte");break;case"fracBelow20p":e=u.jB.yca,o=d.sa(e)?NaN:u.o6a(e.Hg,.15,"lte");break;case"hour_current":o=u.eY().currentHour;break;case"session_ct":o=u.DN;break;case"intercept":o=i,u.rFb=o}if(o=u.normalize(o,n,r),isNaN(o))return!0;"intercept"!==t&&(u.Zka.push(o),u.Mkb.push(i),u.kQb[t]=l,l+=1)})},h.prototype.PXa=function(e,i){this.J6.forEach(function(t){!(t=t.get().hRb)||"avtp"!==e&&"neuhd"!==e||d.sa(t[e])||i.m7(Number(t[e]))})},e.JKa=t=h},function(t,e,i){var n,r,o,a,s,u,c,h,f,d;function l(t,e,i){this.K=e,this.H=i,this.nA=new u.uSa,this.w6=0,this.wm=t.wm,this.T=t.T,this.mediaType=t.mediaType,this.UC=t.UC,this.IA=t.IA,this.mediaType===r.u.J?(e=this.wm,i=n.__read(e.streams,1)[0],this.pBb=new f.Uka({w:e.maxWidth,Qr:e.maxHeight},{w:e.Fza,Qr:e.Gza}),void 0!==i.framerate_value&&void 0!==i.framerate_scale&&(this.Yla=h.IM.from({lw:i.framerate_value,rv:i.framerate_scale}),this.vma=this.Yla.oa()),void 0!==e.Nxa&&void 0!==e.Mxa&&(this.izb=h.IM.from({lw:e.Nxa,rv:e.Mxa}))):this.mediaType===r.u.P&&(this.kxb=this.wm.streams[0].channels,this.rBb=48e3),this.wb=(this.kN=this.vma)&&this.kN.aa,this.bma=this.RWa=!1,this.Wua=-1/0,this.Qab=1/0,e=(t=l.zxb(this,t.Pe)).maxBitrate,i=t.Pc,this.Wo=t.Wo,this.maxBitrate=e,this.Pc=i,this.LBb=i.reduce(function(t,e){return t[e.Pa]=e,t},{})}_esm(e),e.UL=void 0,n=i(0),r=i(77),o=i(424),a=i(19),s=i(2),u=i(8),c=i(425),h=i(263),f=i(427),d=i(428),l.zxb=function(a,o){var t,s,u=a.K,c=a.mediaType===r.u.J,h=!1,f=0,l=[];return a.mediaType===r.u.P||a.mediaType===r.u.J?(t=a.wm,s=t.streams.some(function(t){return t.Aj}),t.streams.forEach(function(t,e){var i,n=t.bitrate,r=!0;c&&(i=t.Aj,r=u.gP&&u.Q1?!!o||i===s:o&&!i||!o&&(i||!s),h=h||i),r&&f<n&&(f=n),t=new d.Sga({Ay:t,cg:e,track:a,Ur:r},u,a.H),l.push(t)})):a.mediaType===r.u.Ob&&(t=a.wm,t=new d.Sga({Ay:t.ttDownloadables["imsc1.1"],cg:0,track:a,Ur:!0,Ydc:t.downloadableIds["imsc1.1"]},u,a.H),l.push(t)),{Wo:h,maxBitrate:f,Pc:l}},Object.defineProperties(l.prototype,{uca:{get(){return!this.Yd&&0===this.w6},configurable:!0},Yd:{get(){var t;return this.mediaType===r.u.Ob||(this.ub?!(null==(t=this.nA.value)||!t.Yd):!!this.Lq&&!!this.nA.value)},configurable:!0},gAa:{get(){return this.RWa},configurable:!0},L:{get(){return String(this.T.L)},configurable:!0},trackId:{get(){return this.mediaType===r.u.Ob?this.wm.id:this.wm.track_id},configurable:!0},St:{get(){return this.zzb},configurable:!0},oa:{get(){return this.kN},configurable:!0},frameRate:{get(){return this.Yla},configurable:!0},Lba:{get(){return this.izb},configurable:!0},Vl:{get(){return this.pBb},configurable:!0},channels:{get(){return this.kxb},configurable:!0},sampleRate:{get(){return this.rBb},configurable:!0},profile:{get(){return this.mediaType===r.u.Ob?this.wm.rawTrackType:this.wm.profile},configurable:!0},c1:{get(){return this.mediaType===r.u.Ob?this.wm.rawTrackType:this.wm.c1},configurable:!0},aa:{get(){return this.wb},configurable:!0},iK:{get(){return this.yzb},configurable:!0},Lq:{get(){return this.Wc},configurable:!0},HJ:{get(){return this.nA.value},configurable:!0},a$:{get(){return this.oa.aa},configurable:!0},Z9:{get(){return this.oa.fb},configurable:!0},ea:{get(){return 0},configurable:!0}}),Object.defineProperties(l.prototype,{Dsa:{get(){return this.nA},configurable:!0},PZ:{get(){return this.Pc.some(function(t){return 1<((null==(t=t.Mg)?void 0:t.length)||0)})},configurable:!0},ub:{get(){return this.T.ub},configurable:!0}}),l.prototype.ly=function(t){return this.EB()[t]},l.prototype.EB=function(){return this.LBb},l.prototype.equals=function(t){return!!t&&this.L===t.L&&this.mediaType===t.mediaType&&this.trackId===t.trackId},l.prototype.Rca=function(){this.w6++},l.prototype.Qca=function(){0<this.w6&&this.w6--},l.prototype.Pca=function(t,e,i,n,r,a){this.ub||n&&void 0!==n.Yn&&(this.Yd||void 0!==n.te&&n.te.length)?(!t.Aj&&t.track.Wo||(this.RWa=!0),this.Yd?!this.bma&&!this.ub&&n.te&&n.te.length>this.Lq.length&&(this.Wc=new o.Nka(this.mediaType,this.oa,n,r),this.nA.whb(),this.Wua=-1/0,this.bma=!0):(this.tXa(e),this.zzb=a,(i=i||this.vma)&&(this.sXa(i||this.vma),void 0===this.aa&&this.uXa(i.aa)),this.ub||(this.Wc=new o.Nka(this.mediaType,this.oa,n,r)),!t.Aj&&t.track.Wo||(this.bma=!0))):this.ub||this.H&&this.H.error("AseTrack.onHeaderReceived with missing fragments data")},l.prototype.e4b=function(t){void 0===this.nA.value&&this.nA.set(t)},l.prototype.PIb=function(t){this.Yd||(this.uXa(t.aa),this.tXa(t.iK),this.sXa(t.oa),this.Wc=t.Lq,t.Dsa.value?this.nA.set(t.Dsa.value):this.nA.whb())},l.prototype.vn=function(t,e,i,n){return s.assert(this.HJ),this.ub&&(e=Math.min(e,this.bF().W)),c.vn(this.mediaType,t,this.HJ,e,i,n)},l.prototype.wB=function(t,e,i){return s.assert(this.HJ),c.wB(this.mediaType,t,this.HJ,e,i)},l.prototype.Ro=function(){var t=this.mediaType===r.u.P?(s.assert(this.mediaType===r.u.P),s.assert(void 0!==this.channels),s.assert(void 0!==this.sampleRate),{channels:this.channels,profile:this.profile,c1:this.c1,bitrate:this.Pc[this.Pc.length-1].bitrate,sampleRate:this.sampleRate,St:this.St}):(s.assert(this.mediaType===r.u.J),s.assert(void 0!==this.Lba),s.assert(void 0!==this.Vl),{N:this.T.N,Wo:this.Wo,profile:this.profile,a$:this.Lba.lw,Z9:this.Lba.rv,c1:this.c1,Vl:this.Vl,maxWidth:this.Vl.Vl.w,maxHeight:this.Vl.Vl.Qr,Fza:this.Vl.oeb.w,Gza:this.Vl.oeb.Qr,St:this.St});return t},l.prototype.toJSON=function(){return{movieId:this.L,mediaType:this.mediaType,trackId:this.trackId}},l.prototype.toString=function(){return(0===this.mediaType?"a":"v")+":"+this.trackId},l.prototype.bF=function(){var t;return s.assert(this.ub,"Unexpected call to getLiveEdgeTimestamp. Not a live track."),t=(null!=(t=this.HJ)?t:this.Pc[0]).cF().nDa,a.M.Ja(Math.max(0,t-this.K.O_b))},l.prototype.uXa=function(t){this.wb=t},l.prototype.tXa=function(t){this.yzb=t},l.prototype.sXa=function(t){this.kN=t,this.mediaType===r.u.J&&(this.Yla=h.IM.DRb(t))},e.UL=l},function(t,e,i){var n,r,a,o;function s(i){return function(){for(var t=Array(this.length),e=0;e<this.length;++e)t[e]=i.call(this,e);return t}}function u(t,e){this.Wc=t,this.ze=e}function c(t,e,i,n){if(this.mediaType=t,this.length=i.te.length,this.wb=i.aa,this.Rs=i.te,this.o7=n&&n.oR,this.zYa=n&&n.OR,this.kN=e,this.kEa=this.lEa=this.kWa=void 0,this.N6=i.Yn,this.cE=new Uint32Array(this.length+1),this.length){for(e=t=0;e<this.length;++e)this.cE[e]=t,t+=this.Rs[e];this.cE[e]=t,this.hla=Math.floor((this.Qa-this.ea)/this.length)}}_esm(e),e.iEb=e.yy=e.Nka=e.qTa=void 0,t=i(0),n=i(2),t=t.__importDefault(i(3)),r=i(19),a=new t.default.Console("FRAGMENTS","media|asejs"),Object.defineProperties(u.prototype,{index:{get(){return this.ze},configurable:!0},ec:{get(){return new r.M(this.Za,this.aa)},configurable:!0},Ed:{get(){return new r.M(this.mb,this.aa)},configurable:!0},Za:{get(){return this.Wc.N6+this.Wc.cE[this.ze]},configurable:!0},mb:{get(){return this.Za+this.Wc.Rs[this.ze]},configurable:!0},tv:{get(){return this.Wc.Rs[this.ze]},configurable:!0},oa:{get(){return this.Wc.oa},configurable:!0},aa:{get(){return this.Wc.aa},configurable:!0},ea:{get(){return Math.floor(1e3*this.Za/this.aa)},configurable:!0},Qa:{get(){return Math.floor(1e3*(this.Za+this.tv)/this.aa)},configurable:!0},duration:{get(){return this.Qa-this.ea},configurable:!0}}),u.prototype.toJSON=function(){return{startPts:1e3*this.Za/this.oa.aa,endPts:1e3*this.mb/this.oa.aa,duration:1e3*this.tv/this.oa.aa,index:this.index}},o=u,e.qTa=o,Object.defineProperties(c.prototype,{Yn:{get(){return this.Qjb(0)},configurable:!0},Ira:{get(){return this.Qjb(this.length)},configurable:!0},ea:{get(){return this.vk(0)},configurable:!0},Qa:{get(){return this.vk(this.length)},configurable:!0},Lg:{get(){return new r.M(this.Ira,this.aa)},configurable:!0},Fxa:{get(){return this.kWa||this.gxb()},configurable:!0},oa:{get(){return this.kN},configurable:!0},aa:{get(){return this.wb},configurable:!0}}),c.prototype.Qjb=function(t){return this.N6+this.cE[t]},c.prototype.vk=function(t){return Math.floor(1e3*(this.N6+this.cE[t])/this.aa)},c.prototype.AX=function(t){return this.vk(t+1)},c.prototype.te=function(t){return this.AX(t)-this.vk(t)},c.prototype.get=function(t){return new o(this,t)},c.prototype.No=function(t,e,i){if(0===this.length||t<this.vk(0))return-1;t=Math.max(t,e||0);for(var n,r,a=0,o=this.length-1;a<=o;)if(t<(r=this.vk(n=a+(o-a>>1))))o=n-1;else{if(!(t>=r+this.te(n))){for(;e&&n<this.length&&this.vk(n)<e;)++n;return n<this.length?n:i?this.length-1:-1}a=n+1}return i?this.length-1:-1},c.prototype.I9=function(t,e,i){return 0<=(t=this.No(t,e,i))?this.get(t):void 0},c.prototype.v8=function(t,e){var i,n=Math.floor(e*this.aa/1e3);if(e=Math.min(t+Math.ceil(e/this.hla),this.length),n<(i=this.cE[e]-this.cE[t])){for(;n<=i;)i-=this.Rs[--e];return e-t+1}for(;i<n&&e<=this.length;)i+=this.Rs[e],++e;return e-t},c.prototype.subarray=function(t,e){return n.assert(void 0===t||0<=t&&t<this.length),n.assert(void 0===e||t<e&&e<=this.length),new c(this.mediaType,this.oa,{aa:this.aa,Yn:this.N6+this.cE[t],te:this.Rs.subarray(t,e)},this.o7&&{oR:this.o7.subarray(t,e+1),OR:this.zYa})},c.prototype.forEach=function(t){for(var e=0;e<this.length;++e)t(this.get(e),e,this)},c.prototype.map=function(t){for(var e=[],i=0;i<this.length;++i)e.push(t(this.get(i),i,this));return e},c.prototype.reduce=function(t,e){for(var i=0;i<this.length;++i)e=t(e,this.get(i),i,this);return e},c.prototype.toJSON=function(){return{length:this.length,averageFragmentDuration:this.hla}},c.prototype.dump=function(){var t;a.trace("TrackFragments: "+this.length+", averageFragmentDuration: "+this.hla+"ms");for(var e=0;e<this.length;++e)t=this.get(e),a.trace("TrackFragments: ".concat(e,": [").concat(t.ea,"-").concat(t.Qa,"]"))},c.prototype.gxb=function(){for(var t=0,e=0;e<this.length;e++)t=Math.max(this.Rs[e],t);return this.kWa=t},e.Nka=i=c,e.yy=s,i.prototype.Pjb=s(i.prototype.vk),s(i.prototype.AX),s(i.prototype.te),e.iEb=function(i){return"[".concat(Array(i.length).map(function(t,e){return i[e].toString()}).join(","),"]")}},function(t,h,e){var f,l,d,p;_esm(h),h.J3a=h.wB=h.vn=h.u$=void 0,f=e(74),l=e(6),d=e(2),p=e(129),h.u$=function(t,e){return t.No(e,void 0,!0)},h.vn=function(t,e,i,n,r,a){var o,s,u,c;return p.Mm.nq(t),i.ub?(e=(o=i.cF()).bfa,r=o.uv,o=e+Math.floor(n/r.W),t===l.u.P&&(o=Math.max(e,o-1)),n=(t=r.jC(o-e)).add(r),new f.yk(i,{index:o,Za:t.fb,mb:n.fb,aa:i.aa,offset:0,fa:0})):(d.assert(i.da,"findFirstFragment called without stream fragments"),s=i.da,n=Math.max(i.da.vk(0),n),t===l.u.P&&!a&&e.xo&&!e.tI&&i.sf&&(n=Math.max(i.da.vk(0),n+i.sf.W)),o=h.u$(s,n),(u=i.Gl(o)).Qa<n||((c=u.tsa(n))?(0<c.jj&&u.kj({start:c.jj}),t!==l.u.P||e.TZ||(c.Qd<0&&u.kj({start:c.jj}),c.Qd<(e.xo&&!e.tI&&i.sf?Math.floor(i.sf.W):0)&&u.tra())):n>=u.Qa&&o<s.length-1&&(u=i.Gl(o+1)),t===l.u.J&&r&&u.Qa===r&&o<s.length-1&&(u=i.Gl(o+1)),t===l.u.P&&!u.Ha&&(e.z9a||e.iOb)&&a&&u.kj({}),u.aS(n)),u)},h.wB=function(t,e,i,n,r,a){var o,s;return i.ub?(d.assert(1/0===n),new f.yk(i,{index:1/0,Za:1/0,mb:1/0,aa:i.aa,offset:0,fa:0})):(p.Mm.nq(t),o=i.da,void 0===n&&(n=o.Qa),(r=r&&r.HQb(i,n,t,e,a))||(r=o.oa,a=n?n+h.J3a(t,r,e.RK,e.QR):o.AX(o.length-1),o=o.No(a,void 0,!0),r=i.Gl(o),0===o||r.ea!==n||t!==l.u.J&&e.RK||(r=i.Gl(--o)),(a=t===l.u.J?a:n)<r.Qa&&((s=r.ssa(a))&&0!==s.jj?r.kj({end:s.jj}):(t===l.u.P&&(s||a<r.ea)&&0!==o||t===l.u.J&&(!i.DYb&&!e.FEa||s)&&0!==o)&&(r=i.Gl(o-1))),t===l.u.P&&!r.Ha&&e.z9a&&r.kj(),r.aS(n)),r)},h.J3a=function(t,e,i,n){return t===l.u.J||n?0:i?null!=(t=null==e?void 0:e.W)?t:0:e?-e.W:0}},function(t,e,i){var r,a;function o(t,e,i,n){this.te=t,this.aa=i,this.length=Math.min(t.length,e.length),this.uo=e,this.kd=n}_esm(e),e.yka=void 0,r=i(0),a=i(72),i(2),r.__importDefault(i(32)),Object.defineProperties(o.prototype,{fa:{get(){return void 0!==this.kd?this.kd:this.kd=this.ola()},configurable:!0},sizes:{get(){return this.uo},configurable:!0}}),o.prototype.subarray=function(t,e){return new o(this.te.subarray(t,e),this.sizes.subarray(t,e),this.aa)},o.prototype.concat=function(){for(var i,n,t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return e=(t=(e=[this]).concat.apply(e,r.__spreadArray([],r.__read(t),!1))).reduce(function(t,e){return t+e.length},0),i=new Uint32Array(e),n=new Uint32Array(e),e=t[0].aa,t.reduce(function(t,e){return a.ETa.set(i,e.te,t),a.ETa.set(n,e.sizes,t),t+e.length},0),new o(i,n,e)},o.prototype.ola=function(){for(var t=this.sizes,e=this.length,i=0,n=0;n<e;++n)i+=t[n];return i},o.prototype.U9a=function(t){return void 0!==this.eCb&&0<this.eCb[t]},e.yka=o},function(t,e,i){var n;_esm(e),e.Uka=void 0,n=i(401),e.Uka=function(t,e){var i;void 0===e&&(e={w:1,Qr:1}),this.Vl=t,this.oeb=e,i=t.w*e.w,t=t.Qr*e.Qr,e=n.$E(i,t),this.Qx={w:i/e,Qr:t/e}}},function(t,e,i){var n,o,u,s,r,a,c;function h(t,e,i){var n,r,a;if(this.K=e,this.H=i,this.Ok=t.track,this.Q6=t.cg,this.Ay=t.Ay,this.Pyb=this.mediaType!==o.u.Ob&&this.FF.Aj,this.QBb=t.Ydc,this.PH=this.Ya=void 0,e=t.Ur,this.Ur=void 0===e||e,this.Z8=t.Z8,this.jN=void 0,this.mWa=this.Fg=0,this.url=this.dL=this.kc=this.ju=this.Xwa=this.location=this.Xa=this.Lb=void 0,this.HB=!1,this.pwa=this.Ff=void 0,this.FUa=new Set,"object"==typeof(e=(t=this.K)&&"object"==typeof t.Lfb&&t.Lfb[this.profile])&&(e=e[this.bitrate])&&(this.UAb=new s.M(e.ticks,e.timescale)),this.Fzb=0<=(null==(n=t.REb)?void 0:n.indexOf(this.profile)),null!=(r=t.jR)&&r.Woc&&this.mediaType===o.u.J&&0<(null==(a=(n=this.Ay).rs)?void 0:a.length)){for(a=n.rs.splice(0,n.rs.length),n=new Uint8Array(a.length),r=0;r<a.length;r++)n[r]=a[r].eb;this.rs=n}}_esm(e),e.Sga=void 0,n=i(0),o=i(77),u=i(968),s=i(19),r=i(2),a=i(410),n.__importDefault(i(3)),c=i(74),Object.defineProperties(h.prototype,{Yd:{get(){return this.ub?!!this.PH:!!this.Ya},configurable:!0},H9a:{get(){return!0},configurable:!0},T:{get(){return this.Ok.T},configurable:!0},N:{get(){return this.T.N},configurable:!0},L:{get(){return this.Ok.L},configurable:!0},mediaType:{get(){return this.Ok.mediaType},configurable:!0},oa:{get(){return this.Ok.oa},configurable:!0},aa:{get(){return this.Ok.aa},configurable:!0},iK:{get(){return this.Ok.iK},configurable:!0},trackId:{get(){return this.Ok.trackId},configurable:!0},track:{get(){return this.Ok},configurable:!0},FF:{get(){if(this.mediaType!==o.u.Ob)return this.Ay},configurable:!0},cg:{get(){return this.Q6},configurable:!0},Pa:{get(){var t;return this.mediaType===o.u.Ob?null!=(t=this.QBb)?t:"":this.FF.downloadable_id},configurable:!0},id:{get(){return this.Pa},configurable:!0},Aj:{get(){return this.Pyb},configurable:!0},ub:{get(){return this.track.ub},configurable:!0},bitrate:{get(){return this.mediaType===o.u.Ob?0:this.FF.bitrate},configurable:!0},eb:{get(){var t;return this.t9||(this.mediaType===o.u.J&&null!=(t=this.Ay.vmaf)?t:void 0)},configurable:!0},l$b:{get(){if(this.mediaType===o.u.J)return this.Ay.res_w||void 0},configurable:!0},nea:{get(){if(this.mediaType===o.u.J)return this.Ay.res_h||void 0},configurable:!0},profile:{get(){return this.mediaType===o.u.Ob?"timedtext":this.FF.content_profile},configurable:!0},mf:{get(){return this.profile},configurable:!0},iz:{get(){if(this.mediaType===o.u.J)return this.Ay.sidx},configurable:!0},sf:{get(){return this.UAb},configurable:!0},yWb:{get(){return this.Fzb},configurable:!0},da:{get(){return this.Ya},configurable:!0},Dy:{get(){return this.Ya&&this.Ya.Dy},configurable:!0},a$:{get(){return this.Ok.a$},configurable:!0},Z9:{get(){return this.Ok.Z9},configurable:!0},ea:{get(){return 0},configurable:!0}}),Object.defineProperties(h.prototype,{Ev:{get(){return void 0!==this.jN?this.jN:this.sZb()},set(t){this.jN=t},configurable:!0},Yv:{get(){return this.Ur&&!this.HB},configurable:!0},Mg:{get(){return this.PH},configurable:!0},DYb:{get(){return r.assert(!!this.da,"Initial header should have been received already"),this.T.ty()&&-1<this.mf.indexOf("h264mpl")&&void 0===this.da.Xna},configurable:!0}}),h.prototype.mq=function(){return this.T.mq(this.mediaType,this.Pa)},h.prototype.w$=function(){var t=this.mq();return t&&t.stream.da},h.prototype.BG=function(t){return this.T.BG(this,t)},h.prototype.Rca=function(){this.track.Rca()},h.prototype.Qca=function(){this.track.Qca()},h.prototype.Pca=function(t,e,i,n,r,a,o,s){this.ub||n&&void 0!==n.Yn&&(this.track.Yd||void 0!==n.te&&n.te.length)&&void 0!==n.offset&&void 0!==n.sizes&&n.sizes.length?(!this.ub&&this.K.xo&&this.sf&&0===n.Yn&&(n.Yn+=this.sf.Rg(n.aa).fb),this.Yd||(this.PH=t,this.track.Pca(this,e,i,n,a,s),this.ub||(this.Ya=new u.PSa(this.Q6,this.track.Lq,n,r,a,o,this.L)),this.track.e4b(this))):this.ub||(n?this.H.error("AseStream.onHeaderReceived: fragmentsData was missing data:"+(void 0!==n.Yn)+","+this.track.Yd+","+this.track.gAa+","+(void 0!==n.te)+","+!(!n.te||!n.te.length)+","+(void 0!==n.offset)+","+(void 0!==n.sizes)+","+!(!n.sizes||!n.sizes.length)):this.H.error("AseStream.onHeaderReceived: fragmentsData was undefined."))},h.prototype.u8=function(t){this.Yd||(this.track.PIb(t.track),this.Ya=t.da,this.PH=t.Mg)},h.prototype.Gl=function(t){return new c.yk(this,this.da.get(t))},h.prototype.i6a=function(t){var e=this.Gl(t.index);return t.Ha&&(e.kj(t.Ha),e.aS(t.RC)),e},h.prototype.Zlb=function(t,e){this.Fg=t,this.mWa=e},h.prototype.SHb=function(){this.Xa=this.Lb=this.kc=this.location=this.url=void 0},h.prototype.Ro=function(){return this.mediaType===o.u.P?this.gSb():this.KVb()},h.prototype.v7a=function(t,e){return this.ub?(t=t?this.I6a():(r.assert(void 0!==e,"liveSegmentId is required for live media requests"),this.J6a(e)))+(-1===t.indexOf("?")?"?":"&")+"p=LIVE":this.url},h.prototype.cF=function(){var t;return r.assert(this.ub&&this.T.ja.vQ,"liveMetadata missing from manifest"),t=(t=this.T.ja.vQ).lac[t.SNb[this.Pa]],n.__assign(n.__assign({},t),{nDa:this.T.kib-new Date(t.bFb).getTime(),bfa:Number(t.bfa),n7b:new s.M(Number(t.m7b),t.aa).Rg(this.aa),uv:new s.M(t.duration,t.aa).Rg(this.aa)})},h.prototype.ueb=function(t){var e;return!!t&&(t.split(";").some(function(t){if(0===t.indexOf("sc="))return e=t.slice(3),!0}),!!e&&(t=(t=(t=new a.$ka("LIVE").decrypt(e,!0)).slice(2,t.length-2)).slice(t.indexOf("=")+1),t=1e3*parseFloat(t),void 0!==(this.T.kib=t)))},h.prototype.Rfb=function(t){return!this.FUa.has(t)},h.prototype.OCb=function(t){this.H.trace("addBlockedLiveSegment: "+t),this.FUa.add(t)},h.prototype.toJSON=function(){return{movieId:this.L,mediaType:this.mediaType,streamId:this.Pa,bitrate:this.bitrate,streamIndex:this.cg,isAvailable:this.Ur,fittable:this.Ev,vmaf:this.eb,resolutionWidth:this.l$b,resolutionHeight:this.nea}},h.prototype.toString=function(){return(0===this.mediaType?"a":"v")+":"+this.Pa+":"+this.bitrate},h.prototype.I6a=function(t){return r.assert(this.ub,"Unexpected call to getLiveHeaderRequestUrl for non-live stream"),(t||this.url)+this.cF().dYb.replace("$RepresentationID$",null!=(t=null==(t=this.FF)?void 0:t.gBa)?t:"")},h.prototype.J6a=function(t,e){var i,n;for(r.assert(this.ub,"Unexpected call to getLiveMediaRequestUrl for non-live stream"),n=null!=(i=null===(q=this.FF)||void 0===q?void 0:q.gBa)?i:"",i=(q=this.cF().media.replace("$Number$",t.toString())).replace,t=t.toString();t.length<5;)t="0"+t;return n=i.call(q,"$Number%05d$",t).replace("$RepresentationID$",n),(e||this.url)+n},h.prototype.sZb=function(){var t;return!this.Yd||(this.track.Wua>=this.bitrate?this.jN=!0:this.track.Qab<=this.bitrate?this.jN=!1:((t=this.ub?this.K.Yba*this.bitrate*8*(this.K.KF+(null!=(t=null==(t=this.T)?void 0:t.qG.W)?t:0))<this.Fg:this.Ya.lGb(this.K.KF,this.Fg,null!=(t=null==(t=this.T)?void 0:t.qG.W)?t:0,null!=(t=null==(t=this.T)?void 0:t.qG.fa)?t:0,this.mWa))?this.track.gAa&&!this.Aj&&this.track.Wo||(this.track.Wua=this.bitrate):this.track.Qab=this.bitrate,this.jN=t))},h.prototype.KVb=function(){return n.__assign(n.__assign({},this.track.Ro()),{profile:this.mf})},h.prototype.gSb=function(){return n.__assign(n.__assign({},this.track.Ro()),{profile:this.mf,bitrate:this.bitrate})},e.Sga=h},function(t,e,i){var b,a,g;function n(t,e,i){this.jV=t,this.Et=e,this.config=i,this.Bv={},this.bG={},this.Hx=!0,this.groupId=1}_esm(e),e.eka=void 0,b=i(2),a=i(430),new(g=i(3).default).Console("ASEJS_PROBE_MANAGER","asejs"),n.prototype.Jda=function(r,t){var a,e,o,s,i,u=this,n=this.config,c=r.oc,h=r.stream,f=r.kc.location;if(b.assert(h,"Failing url should have an associated stream"),b.assert(f,"Failing url should have an associated location"),a=[],e=h.Dj[0],o=!1,s=this.Bv[c],i=g.time.ia(),s){if(s.In>=i-n.ufa)return}else s=this.fjb(c,i,t,r);s.DC||(e&&f.id===e.id&&(r.isPrimary=!0),s.In=i,s.DC=!1,s.error=t,++s.count,h&&h.urls&&0!==h.urls.length&&(h.urls.forEach(function(t){var e=t.kc.id,i=e+"-"+c,n=u.bG[i];void 0!==n&&void 0!==n.Ida||(n&&n.Kq&&clearTimeout(n.Kq),t=u.yqa(t.url,r,e),u.bG[i]={ha:!1,count:0,Ida:t.Vh()},a.push(t.Vh()),o=!0),-1===s.lCa.indexOf(e)&&s.lCa.push(e)}),0<a.length&&(n={ts:g.time.ia(),es:t.r7,fc:t.qg,fn:t.B9,nc:t.zi,pb:a,gid:this.groupId},t.qy&&(n.hc=t.qy),this.wy(n,"errpb")),o&&this.groupId++))},n.prototype.yqa=function(t,e,i){var n=new a.D2(this),r="random="+parseInt("".concat(1e7*Math.random()));return n.dza(t+(-1!==t.indexOf("?")?"&":"?")+r,e,i),n},n.prototype.fjb=function(t,e,i,n){var r=this.Bv[t];return n=n.kc.location,r=r||(this.Bv[t]={count:0,In:e,DC:!1,error:i,lCa:[],lAa:{},location:n,X:i.X,CPb:i})},n.prototype.getState=function(t){return this.Bv[t]},n.prototype.Tpa=function(t){this.Bv[t]=void 0},n.prototype.wy=function(t,e){var i;this.Hx&&((i={type:"logdata",target:"endplay",fields:{}}).fields[e]={type:"array",value:t,adjust:["ts"]},this.jV.mC(i))},n.prototype.kAa=function(e,i){var t,n,r,a,o,s=this,u=this.jV,c=this.config,h=i.oc,f=this.Bv[h];f&&(t=e.url,(n=this.bG[e.oc+"-"+h])&&(r=f.error,n&&n.Kq&&clearTimeout(n.Kq),n.ha=!0,n.count=0,n.Ida=void 0,f.lAa[e.oc]=!0,null!=(n=this.Bv[e.oc])&&n.DC&&c.MA&&(u.uhb(e.oc,n.error.GS[1]),this.Hx&&(a={ts:g.time.ia(),id:e.requestId,servid:i.oc,gid:e.groupId||-1},this.wy(a,"errst")),this.Bv[e.oc]=void 0,this.Et()),t===i.url||(o=this.bG[h+"-"+h])&&o.ha||(h=null==n?void 0:n.location,c=Math.min((null==(n=null==(t=null==h?void 0:h.Lb)?void 0:t.XP)?void 0:n.ta)||Math.random()*c.Jba,c.Jba),setTimeout(function(){var t;!1!==f.DC||o&&o.ha||(f.DC=!0,u.cu(r.GS[0],r.GS[1],i.url,r),!s.Hx)||(t={ts:g.time.ia(),id:e.requestId,servid:i.oc,gid:e.groupId||-1},s.wy(t,"erep"))},c)),this.Hx&&(a={ts:g.time.ia(),id:e.requestId,result:1,servid:e.oc,gid:e.groupId||-1},this.wy(a,"pbres"))))},n.prototype.iAa=function(e,i){var t,n,r,a,o,s,u=this,c=this.jV,h=this.config,f=i.oc,l=this.Bv[f],d=e.oc,p=this.bG[d+"-"+f];p&&l&&(r=0,p.ha=!1,p.Ida=void 0,l.lAa[d]=!1,a=l.lCa,h.MA&&d===f&&i.isPrimary&&(o=(null==(n=null==(t=null==(o=l.location)?void 0:o.Lb)?void 0:t.XP)?void 0:n.ta)||300*Math.random(),t=Math.min(o*Math.pow(2,p.count),12e4),t+=Math.random()*(t<1e4?100:1e4),p.Kq=setTimeout(function(){var t;p.Kq=void 0,(t=u.yqa(e.url,i,d)).Zac(e.groupId),p.Ida=t.Vh()},t)),++p.count,d===f&&(r=0,a.forEach(function(t){!1===l.lAa[t]&&r++}),a.length===r&&l.count>=h.Pba)&&(s=l.error,l.DC=!0,h=i.stream,b.assert(h,"Probe failed url should have an associated stream"),h.urls.forEach(function(t){c.cu(s.GS[0],s.GS[1],t.url,s),u.Hx&&(t={ts:g.time.ia(),id:-1,servid:t.kc.id},u.wy(t,"erep"))})),this.Hx&&(h={ts:g.time.ia(),id:e.requestId,result:0,servid:e.oc,gid:e.groupId||-1},this.wy(h,"pbres")))},n.prototype.Pfa=function(t){var e,i,n;t.url&&(n=(n=(i=this.jV).Cac(t.url))||(null==(e=this.jV.D7a(t)[0])?void 0:e.id),b.assert(void 0!==n,"Success url reported to probe manager should have an associated server"),(t=this.Bv[n])&&t.DC&&this.config.MA&&(i.uhb(t.error.r7,!1),this.Hx&&(i={ts:g.time.ia(),id:-1,servid:n},this.wy(i,"errst")),this.Tpa(n),(n=this.bG[n+"-"+n])&&n.Kq&&clearTimeout(n.Kq)))},n.prototype.reset=function(){var t,e,i=this.bG;for(e in i)i.hasOwnProperty(e)&&(t=i[e+"-"+e])&&t.Kq&&clearTimeout(t.Kq);this.bG={},this.Bv={}},e.eka=n},function(t,e,i){var n,r,a,o;function s(t){var e=o.call(this)||this;return e.TWa=t,e.e6=t.groupId,e.Oi=new r.Kf,e.Oi.on(e,a.We.fU,e.Ema),e.Oi.on(e,a.We.jH,e.nV),e}_esm(e),e.D2=void 0,n=i(0),r=i(12),a=n.__importDefault(i(3)).default.kx,o=a,n.__extends(s,o),s.prototype.dza=function(t,e,i){a.prototype.open.call(this,t,e,i)},s.prototype.Zac=function(t){this.e6=t},Object.defineProperties(s.prototype,{groupId:{get(){return this.e6},configurable:!0}}),s.prototype.cd=function(){this.Oi&&this.Oi.clear(),a.prototype.cd.call(this)},s.prototype.Ema=function(t){this.TWa.kAa(t.probed,t.affected),this.cd()},s.prototype.nV=function(t){this.TWa.iAa(t.probed,t.affected),this.cd()},e.D2=s},function(t,e,i){var n,o,r,s,a,u,c,h,f,l,d;function p(t,e,i,n,r,a,o){return e=d.call(this,t,n,r,e,o)||this,f.A2.j9a(e,t,n,o),e.au=i,e.track=i.track,e.ey=!!n.ey,e.TQ=!!n.TQ,e.OE=!!n.OE,e.Q4b=n.fa,e.hS=!!n.hS,e.dV=(a?"(cache)":"")+e.Pa+" header",t=n.offset,n=n.fa,e.Wm&&(t+=e.Wm.byteLength,n-=e.Wm.byteLength),e.CA(t,n),e}_esm(e),e.Lga=void 0,n=i(0),o=i(72),t=i(12),r=n.__importDefault(i(3)),s=i(8),a=i(36),u=i(2),c=i(6),h=i(185),f=i(432),i=i(433),l=r.default.MediaSource,d=i.Iga,n.__extends(p,d),Object.defineProperties(p.prototype,{Cc:{get(){return!0},configurable:!0}}),Object.defineProperties(p.prototype,{gda:{get(){return this.BAb},configurable:!0}}),p.prototype.cd=function(){var t;this.complete||this.emit((t={type:"headerRequestCancelled",request:this}).type,t),d.prototype.cd.call(this)},p.prototype.RX=function(t){this.stream.Rca(),d.prototype.RX.call(this,t)},p.prototype.wP=function(t,e,i){this.stream.Qca(),d.prototype.wP.call(this,t,e,i)},p.prototype.gl=function(t){t.response&&this.sUa(t.response),u.assert(this.Wm),t.CR(),this.stream.Qca(),this.yAb()?d.prototype.gl.call(this,t):this.wUa?(this.CA(t.offset+t.fa,this.wUa),this.stream.Rca(),d.prototype.gl.call(this,t)):this.U9(this)},p.prototype.Yca=function(t){t.response&&this.sUa(t.response),d.prototype.Yca.call(this,t)},p.prototype.CA=function(t,e){t=new h.TL(this.stream,this.track,this.dV+" ("+this.Ma.length+")",{Cc:!0,offset:t,fa:e,HC:{hf:c.za.Dg},location:this.location,oc:this.oc,responseType:0},this,this.Ce,this.H),this.push(t),this.kd=this.Ma.reduce(function(t,e){return t+e.fa},0)},p.prototype.yAb=function(){var t,e,i,n=this.Ce,r=new o.ex(p.w2b,this.stream,this.Wm,this.stream.ub?["moov"]:["sidx"],n.r5b,{vsc:this.stream.track.gAa,nza:void 0===this.oa,ylb:!l.Rc||!l.Rc.m0a,aEa:n.aEa,xo:n.xo,KS:this.Ce.KS,Dhb:!0,Yea:!l.Rc||!l.Rc.Jcb,aBa:this.Ce.aBa}),a=r.parse({oa:this.oa});if(this.xgc=n.KS&&r.vWb,a.Ly){if(u.assert(a.Mg),this.PH=a.Mg,this.BAb=a.gda,this.dVa=!!a.mPb,void 0===this.oa&&void 0===a.oa&&this.H.error("No frame duration available for "+this.Pa),r=a.oa?new s.M(a.oa):this.oa,i=void 0,this.bz.mediaType===c.u.J&&null!=(t=n.jR)&&t.enabled)if(null!=(n=this.bz.rs)&&n.length)i=this.bz.rs;else if(0<(null==(t=this.bz.Ay.rs)?void 0:t.length))for(i=new Uint8Array(t.length),e=0;e<t.length;e++)i[e]=t[e].eb;else if(null!=(e=a.yz)&&e.length)for(i=new Uint8Array(a.yz.length),e=0;e<a.yz.length;e++)i[e]=a.yz[e];this.stream.Pca(a.Mg,a.aa,r,a.da,a.RQ,a.Qk,i,a.trackId),this.Wm=void 0}else this.wUa=a.zDb||0;return!!a.Ly},p.prototype.sUa=function(t){this.Wm=this.Wm?s.st(this.Wm,t):t},p.w2b=new r.default.Console("MP4","media|asejs"),e.Lga=i=p,a.Ve(f.A2,i,!1,!1),a.Ve(t.EventEmitter,i)},function(t,e,i){var n,r,a,o;function s(t,e,i){var n=o.call(this,t,e)||this;return n.hS=!1,n.ey=!1,n.TQ=!1,n.OE=!1,n.au=void 0,s.j9a(n,t,e,i),n}_esm(e),e.A2=void 0,n=i(0),r=i(2),a=i(184),o=a.Vw,n.__extends(s,o),s.j9a=function(t,e,i,n){a.Vw.xa(t,e,i),t.PH=i.Mg,t.Wm=i.qza,t.dVa=i.pm,t.H=n},Object.defineProperties(s.prototype,{Cc:{get(){return!0},configurable:!0}}),Object.defineProperties(s.prototype,{Mg:{get(){return this.PH},configurable:!0},qza:{get(){return this.Wm},configurable:!0},pm:{get(){return this.dVa},configurable:!0}}),s.prototype.cd=function(){},s.prototype.zEa=function(){},s.prototype.HDb=function(t){r.assert(this.od.Pa===t.Pa),!t.Yd&&this.od.Yd&&t.u8(this.od),!t.location&&this.od.location&&(t.location=this.od.location,t.kc=this.od.kc,t.dL=this.od.dL,t.url=this.od.url,t.Lb=this.od.Lb),this.od=t},s.prototype.toJSON=function(){return n.__assign(n.__assign({},o.prototype.toJSON.call(this)),{isHeader:!0,fragments:this.stream.da})},e.A2=s},function(t,e,i){var n,a;function r(t,e,i,n,r){return(t=a.call(this,t,e,i,n,r)||this).sVa=!1,t.rVa=!1,t.VU=!1,t.Ma=[],t.Pp=!1,t.HWa=!1,t.SVa=!1,t.$e=!1,t.Zm=!1,t.Mi=!1,t.JM=!1,t.qN=void 0,t.xx=void 0,t}_esm(e),e.Iga=void 0,(n=i(0)).__importDefault(i(3)),i(2),a=i(186).IG,n.__extends(r,a),Object.defineProperties(r.prototype,{awa:{get(){return this.Pp&&!this.VU},configurable:!0},active:{get(){return this.$e},configurable:!0},KAa:{get(){return this.Zm},configurable:!0},complete:{get(){return this.Mi||(this.Mi=this.Ma.every(function(t){return t.complete}))},configurable:!0},aborted:{get(){return this.JM},configurable:!0},Ag:{get(){return this.Ma.reduce(function(t,e){return t+e.Ag},0)},configurable:!0},bytesReceived:{get(){return this.Ma.reduce(function(t,e){return t+e.bytesReceived},0)},configurable:!0},Zf:{get(){return this.qN||0},configurable:!0},url:{get(){return this.Ma[0]&&this.Ma[0].url},configurable:!0},readyState:{get(){return this.oi||this.Ma.reduce(function(t,e){return Math.min(t,e.readyState)},1/0)},configurable:!0},status:{get(){return this.xx&&this.xx.status||0},configurable:!0},qg:{get(){return this.xx&&this.xx.qg},configurable:!0},tP:{get(){return this.xx&&this.xx.tP},configurable:!0},zi:{get(){return this.xx&&this.xx.zi},configurable:!0},Xv:{get(){return!!this.Ma.length&&this.Ma[0].Xv},configurable:!0}}),r.prototype.push=function(t){this.SVa&&t.xa(this.Va),this.Ma.push(t),this.Pp&&t.tK()},r.prototype.xa=function(e){a.prototype.xa.call(this,e),this.Ma.forEach(function(t){return t.xa(e)}),this.SVa=!0},r.prototype.tK=function(){return this.HWa=!0,(this.Pp=this.Ma.every(function(t){return t.tK()}))&&this.RX(this),this.HWa=!1,this.Pp},r.prototype.cd=function(){7!==this.readyState&&5!==this.readyState&&this.abort(),this.Ma.forEach(function(t){return t.cd()})},r.prototype.rfa=function(e){return this.oi=this.xx=void 0,this.Ma.every(function(t){return 5===t.readyState||7===t.readyState||t.rfa(e)})},r.prototype.abort=function(){var t,e=this.active,i=this.aborted;return this.oi=7,this.JM=!0,this.Zm=this.$e=!1,t=this.Ma.map(function(t){return t.abort()}).every(function(t){return t}),i||this.wP(this,e,this.awa),t},r.prototype.getResponseHeader=function(e,i){var n=null;return this.Ma.some(function(t){return!!(n=t.getResponseHeader(e,i))}),n},r.prototype.getAllResponseHeaders=function(e){var i;return void 0===e&&(e=!1),i=null,this.Ma.some(function(t){return!!(i=t.getAllResponseHeaders(e))}),i},r.prototype.Zca=function(){},r.prototype.oC=function(t){this.$e||(this.$e=!0),this.sVa||(this.sVa=!0,this.Yt=0,this.qN=this.vw=t.Zf,this.xP(this))},r.prototype.pK=function(t){this.Zm||(this.Zm=!0),this.rVa||(this.rVa=!0,this.qN=t.Zf,this.ZE(this))},r.prototype.qK=function(t){this.qN=t.Zf,this.hJ(this),this.Yt=this.bytesReceived,this.vw=t.Zf},r.prototype.gl=function(t){this.qN=t.Zf,this.complete?(this.Mi=!0,this.oi=5,this.Zm=this.$e=!1,this.VU=!0,this.Gv(this)):this.hJ(this),this.Yt=this.bytesReceived,this.vw=t.Zf},r.prototype.y_=function(t){this.qN=t.Zf,this.xx=t,this.oi=6,this.U9(this)},r.prototype.x_=function(){},r.prototype.Vh=function(){return this.Ma[0].Vh()+"-"+this.Ma[this.Ma.length-1].Vh()},r.prototype.toString=function(){return"Compound[".concat(this.Ma.map(function(t){return t.toString()}).join(","),"]")},r.prototype.toJSON=function(){return{requests:this.Ma}},e.Iga=r},function(t,e){_esm(e),e.psa=void 0,e.psa=function(t,e){for(var i,n,r=t.length-1;0<=r;--r)if((n=t[r]).Yv){if(n.bitrate<=e)return r;i=r}return i}},function(t,e,i){_esm(e),i(0).__exportStar(i(974),e)},function(t,e){_esm(e),e.Pta=e.PDb=void 0,e.PDb=function(t){return t.QR},e.Pta=function(t,e){return void 0!==t.NQ?t.NQ:e&&void 0!==e.NQ?e.NQ:100}},function(t,e,i){var o;function n(t,e){this.DAb=t.jR&&t.jR.enabled,this.R6=void 0,this.pzb=e,this.$ma=[],this.sna=[],this.Ima=[],(e=(t=t.hXa||[]).map(function(t){return t.Joc})).unshift(0),this.KAb=t,this.LAb=e,this.Mma=[],this.md=[]}function r(t,e){for(var i,n,r,a,o=[],s=[],u=0;u<t.length;u++){for(var c=t[u],h=[],f=0;f<c.length;f++)i=c[f]-(s[f]||0),n=e&&e[f],a=(r=h).push,1<=n&&(n=Math.pow(10,n||0),i=Math.round(i*n)/n),a.call(r,i);o.push(h),s=c}return o}o=i(32).OJ,n.prototype.reset=function(t){this.R6=void 0,this.$ma=[],this.sna=[],this.Ima=[],this.Mma=[],t&&(this.md=[])},n.prototype.add=function(i,t){var e,n,r=t.filter(function(t,e){return o(t)||e===i.Ke}),a=r.map(function(t){return t.bitrate});t=t[i.Ke],r=r.indexOf(t),(e=this.R6)&&(e.length!==a.length||e.some(function(t,e){return t!==a[e]}))&&(n=this.S5a())&&(this.md.push(n),this.reset(!1)),void 0===e&&(this.R6=a),this.$ma.push([r,i.tu,i.Fc,i.Zoa,i.h_a,i.U_,i.B3b,i.hf,i.tj,i.Uk,i.vG-i.tu,i.w6b]),void 0!==i.Ky&&this.Ima.push([i.tu,i.Ky.LC,i.Ky.fB,i.Ky.AC]),r=t&&t.da,this.DAb&&void 0!==r&&-1!=(e=r.No(i.Uk))&&(e=(r=r.get(e)).duration,void 0!==(t=r.eb||t.eb)&&this.sna.push({ea:r.ea,duration:e,eb:t})),(t=i.R6b)&&t.length&&((t=t.slice(0)).unshift(i.tu),this.Mma.push(t))},n.prototype.S5a=function(){var t,e=r(this.$ma);if(0!==e.length)return e={dltype:this.pzb,bitrates:this.R6,seltrace:e,vmaftrace:this.sna,paceratetrace:r(this.Ima)},(t=r(this.Mma,this.LAb))&&t.length&&(e.predtrace={config:this.KAb,data:t}),e},n.prototype.get=function(){var t=this.S5a(),e=this.md;if(t&&e.push(t),0!==e.length)return e},t.exports=n},function(t,e,i){var r;_esm(e),e.LHa=void 0,r=i(993),t=function(){function t(t){for(var e=2;5!==e;)2===e&&(this.H=t,e=5)}for(0;;){1;return t.prototype.Qwb=function(t,e){for(var i,n=2;14!==n;)switch(n){case 2:e=r.U0a(e,t),i=t.steeringAdditionalInfo,n=5;break;case 4:return t=i.streamingClientConfig,this.H.trace("applying manifest based streamingClientConfig"+JSON.stringify(t)),this.IWa(e,t);case 5:n=i&&i.streamingClientConfig&&Object.keys(i.streamingClientConfig).length?4:3;break;case 3:t=t.cdnResponseData,n=9;break;case 9:n=t?7:8;break;case 7:return(t=t.sessionABTestCell)&&(t=t.split("."))&&1<t.length&&(400<=(t=parseInt(t[1].replace(/cell/i,""),10))?(e.set?(e.set({probeServerWhenError:!0}),e.set({probeDetailDenominator:1}),e.set({allowSwitchback:!0})):(e.ww=!0,e.uR=1,e.MA=!0),this.H.trace("using sab cell >= 400, probeServerWhenError: "+e.ww+", probeDetailDenominator: "+e.uR+", allowSwitchback"+e.MA)):300<=t?(e.set?(e.set({probeServerWhenError:!0}),e.set({probeDetailDenominator:1}),e.set({allowSwitchback:!1})):(e.ww=!0,e.uR=1,e.MA=!1),this.H.trace("using sab cell >= 300, probeServerWhenError: "+e.ww+", probeDetailDenominator: "+e.uR+", allowSwitchback"+e.MA)):200<=t?(e.set?e.set({pipelineEnabled:!1}):e.Ij=!1,this.H.trace("using sab cell >= 200, pipelineEnabled: "+e.Ij)):100<=t&&(e.set?(e.set({pipelineEnabled:!0}),e.set({maxParallelConnections:1}),e.set({maxActiveRequestsPerSession:e.Gba}),e.set({maxPendingBufferLen:e.Ebb})):(e.Ij=!0,e.DQ=1,e.Cy=e.Gba,e.Oba=e.Ebb),this.H.trace("using sab cell >= 100, pipelineEnabled: "+e.Ij))),e;case 8:return e}},t.prototype.Rwb=function(t,e){for(var i=2;9!==i;)switch(i){case 1:return e;case 2:i=e.rqa&&t!==this.Wyb?5:1;break;case 6:return e;case 5:for(var n in this.Wyb=t,e.rqa)new RegExp(n).test(t)&&(e=this.IWa(e,e.rqa[n]));return e}},t.prototype.IWa=function(t,e){for(var i,n,r;;){for(n in 2,e)e.hasOwnProperty(n)&&(r=e[n],t.set?0===t.set(((i={})[n]=r,i))&&this.H.trace("Invalid key"+n):t[n]=r);return t}},t}}(),e.LHa=t},function(t,e,i){var n,v,u,r,d,p,y,b,a,w,o,s,A;function c(i,n,t,e,r,a,o,s,u,c,h,f,l,d,p,b){var g,m=this;return(m=A.call(this,void 0,n,e,u.T,i,u,void 0,c,l,y.M.Ja(h),o.Qe.bind(o),f,b,void 0,new v.EventEmitter,void 0)||this).Bb=i,m.Qi=t,m.Hc=r,m.Y5=a,m.U=o,m.EN=s,m.Pg=f,m.ZX=d,m.rh=p,m.qj=b,m.active=!1,m.GVa=[],m.Oma=0,null!=(e=m.T)&&e.PAa(m),m.children=Object.create(null),m.mz=[],(m.Ge=void 0)===l&&(l=y.M.Ja(u.ea)),g=[m.K.tZa,m.K.oDa],c.forEach(function(t){var e=t.mediaType;t=new w.m4(i,m.Qi,m.H,m,t,l.W,g[e],n,m.Y5,m.rh,null==f?void 0:f.ab(e)),m.Ae.Nac(e,t)}),m.Xu=m.Ae.$_,m}_esm(e),e.ULa=e.qU=void 0,n=i(0),v=i(12),u=n.__importStar(i(11)),r=n.__importDefault(i(90)),d=i(6),p=i(266),y=i(19),t=i(36),b=n.__importDefault(i(3)),a=i(998),w=i(440),(s=o=e.qU||(e.qU={}))[s.U4a=0]="forwards",s[s.Doa=1]="backwards",s[s.YQ=2]="none",A=a.ZLa,n.__extends(c,A),Object.defineProperties(c.prototype,{L:{get(){return this.T.L},configurable:!0},Tn:{get(){var t;return[null!=(t=null==(t=this.ab(0))?void 0:t.Tn)?t:0,null!=(t=null==(t=this.ab(1))?void 0:t.Tn)?t:0]},configurable:!0},Fo:{get(){var t;return[null!=(t=null==(t=this.ab(0))?void 0:t.Fo)?t:{W:0,fa:0},null!=(t=null==(t=this.ab(1))?void 0:t.Fo)?t:{W:0,fa:0}]},configurable:!0},Fea:{get(){return this.G.ea},configurable:!0},Qza:{get(){return this.Fea+this.bf},configurable:!0},Ic:{get(){return this.G.Qa},configurable:!0},gf:{get(){return this.Ic+this.bf},configurable:!0},uc:{get(){return this.T.uc},configurable:!0},weight:{get(){return this.G.weight},configurable:!0},G:{get(){return this.Tp},configurable:!0},Rl:{get(){return this.Ae},configurable:!0}}),c.prototype.xd=function(){var t;this.Mf||(this.active=!1,this.Pg&&(delete this.Pg.children[this.G.id],this.Pg=void 0),u.Nf(this.children,function(t){t&&t.Pg&&(t.Pg=void 0)}),this.children=Object.create(null),this.XM=void 0,A.prototype.xd.call(this),null!=(t=this.T)&&t.oEa(this),this.Ae.clear())},c.prototype.pBa=function(e,i){switch(void 0===i&&(i=o.Doa),this.Rl.forEach(function(t){!u.sa(e)&&t.mediaType!==e||t.reset()}),i){case o.Doa:this.Pg&&this.Pg.pBa(e,i);break;case o.U4a:this.children&&u.Nf(this.children,function(t){t&&t.pBa(e,i)})}},c.prototype.eQ=function(t){var e,i;return!!this.active&&(!(e=this.Pg)||0===(i=e.ab(t)).Va.Geb||(e.fO(t),0===i.Va.Geb))},c.prototype.fe=function(t){return this.Rl.get(t)},c.prototype.xWb=function(){return this.Rl.every(function(t){return 0===t.EC})},c.prototype.toJSON=function(){return n.__assign(n.__assign({},A.prototype.toJSON.call(this)),{active:this.active,playerStartPts:this.ud,playerEndPts:this.gf,pipelines:this.Rl,previousBranch:this.Pg})},c.prototype.Yib=function(t,i){this.T.oEa(this),this.T=this.G.T=t,this.wCa(this.T),this.T.PAa(this),this.Rl.forEach(function(t){var e=i[t.mediaType];e&&t.V0(e)})},c.prototype.BUb=function(t){return this.qj[t]},c.prototype.ab=function(t){return this.Rl.get(t)},c.prototype.TUb=function(t){return this.ab(t).EC},c.prototype.tCa=function(t,e,n){var r=this,a=this.G,i=(t=this.f8(a.ea,this.T,t,this.L===(t||this.Hc.Yc).L)).wR,o=t.xB;return void 0===e&&(e=[d.u.P,d.u.J]),0!==o.length&&e.forEach(function(t){var e,i=r.ab(t);n&&(i.pd=o[t]),e=r.JX(a.Qa),i.Pea(e[t])}),i},c.prototype.Egb=function(e,t){var i,n=this.Bb,r=d.u.P,a=this.ab(r);void 0===t&&(t=a.cYb),this.Pg&&(i=this.Pg.fe(r)),n=new w.m4(n,this.Qi,this.H,this,e,t,a.VR,this.K,this.Y5,this.rh,i),this.Ae.replace(a,n),this.Xu=this.Ae.$_,this.tCa(this.Pg,[d.u.P],!0),n.hL(t,!!this.Pg),a.xd(),u.Nf(this.children,function(t){t&&t.Egb(e)})},c.prototype.Cv=function(t,e){if(e=this.ab(e))return e.Va.Cv(t)},c.prototype.fO=function(t){void 0===t?this.Rl.forEach(function(t){t.fO()}):this.ab(t).fO()},c.prototype.f0=function(t,e,i){(t=this.ab(t))&&t.Va.f0(e,i)},c.prototype.K$=function(t,e){(e=this.ab(e))&&e.Va.K$(t)},c.prototype.O0b=function(t){this.GVa[t]=!0},c.prototype.hHb=function(){var e=this;return[d.u.P,d.u.J].every(function(t){return!e.uc(t)||e.GVa[t]})},c.prototype.cHb=function(t,e,i,n){var r,a,o,s,u,c=this.K,h=this.Bb,f=this.U.getState(),l=f===d.za.ed||f===d.za.eg;if(!l&&void 0===i)return{cf:!0};if(f===d.za.eg&&b.default.time.ia()<this.Oma+c.eya)return{cf:!1};if(r=this.ab(d.u.P),a=this.ab(d.u.J),o=this.Hc.Tx(this,d.u.P),s=this.Hc.Tx(this,d.u.J),u=p.xda(f),o=!r||r.O_a(u,this.U.Qe(),e,o,this.U.pq(),n),s=!a||a.O_a(u,this.U.Qe(),t,s,this.U.pq(),n),void 0!==i&&o&&(i=i.trackId,t=this.T.getTrackById(i),this.Xwb(i,t.UC),h.QA=void 0),o&&s)return this.EN(),this.xW=b.default.time.ia(),f===d.za.eg&&(this.Oma=b.default.time.ia()),{cf:!0,hv:(a||r).yI};if(o=this.xh(d.u.P),s=this.xh(d.u.J),l){if(h=!a||s>c.Fj,(!r||o>c.Fj)&&h&&(r=this.ZX())>=c.uC)return this.Qb("buffering longer than limit: "+r+" >= "+c.uC+", audio buffer: "+o+" ms, video buffer: "+s+" ms"),this.EN(),this.xW=b.default.time.ia(),f===d.za.eg&&(this.Oma=b.default.time.ia()),{cf:!0,hv:"prebufferTimeLimit"};this.Qi.Kzb()}return{cf:!1}},c.prototype.Cpa=function(t,e){var i,n,r=this.K,a=this.ab(d.u.P),o=this.ab(d.u.J);if(t=e?(e=this.xh(d.u.P,t),this.xh(d.u.J,t)):(e=this.Hc.Tx(this,d.u.P,t),this.Hc.Tx(this,d.u.J,t)),i=r.Fj,n=!this.uc(d.u.P)||a.Ki&&0===a.Va.TF&&0===a.Va.uu,a=!this.uc(d.u.J)||o.Ki&&0===o.Va.TF&&0===o.Va.uu,r=!n&&e<r.Fj,!(n=n&&a)&&(r||!a&&t<i))return!1;if(o&&o.cf||!this.uc(d.u.J))return!0;if(n){if(!this.Bb.y6||0!==e||0!==t)return!0;this.Qb("playlist mode with nothing buffered, waiting for next manifest")}return!1},c.prototype.Lea=function(t,i){var n=this,e=this.K;this.Rl.forEach(function(t){t.seeking=void 0}),t&&e.Zi&&this.Rl.forEach(function(t){var e;t&&(e=n.Hc.CI(n,t.mediaType),t="bufferingComplete: , mediaType: "+t.mediaType+", bufferLevelBytes: "+t.Fo.fa+", completedMs: "+t.CO+", completedBytes: "+e+", partials: "+t.Va.TF+", streamingPts: "+t.Fc+", completeStreamingPts: "+t.Er+", fragments: "+JSON.stringify(t.Va.da)+", toAppend: "+i(t.mediaType),n.Qi.Kn(t))})},c.prototype.kz=function(t,e,i){var a=this,o=b.default.time.ia(),s={};return u.Nf(this.children,function(t){var e,i,n,r;t&&(e=t.Ge?(t.Ge.UNb=o-t.Ge.Aaa,t.Ge.Aaa=void 0,t.Ge.weight):a.Hc.B7a(a.G.id,t.G.id),i=t.yB(),n=a.ab(d.u.P)&&0===i.Xs,r=a.ab(d.u.J)&&0===i.wp,s[t.G.id]={weight:e,ot:i,KY:!n&&!r})}),i={ps:o,Je:t,Yqa:i,$ea:this.G.id,Ge:s},t||(t=e.Qe(),i.iS=t-(this.G.ea+this.bf),i.iS=Math.max(0,i.iS),i.U8=0,i.startTime=o),this.mz.unshift(i),i},c.prototype.pIb=function(t){var e,i=this.mz[0];return i.Je&&(i.iS=this.Ic-this.G.ea,i.iS=Math.max(0,i.iS)),i.wlb={},e=t.yB(),r.default(e,i.wlb),i.KY=t.Fo.every(function(t){return 0<t.W}),this.mz=[],i},c.prototype.$l=function(t){var e=this.G;t-=this.bf,e.ea<t&&t<e.Qa?this.mz.shift():(e=this.mz[0])&&(e.$l=!0)},c.prototype.f8=function(t,e,i,n){var r,a,o,s=this;if(void 0===e&&(e=this.T),r=!1,i){if(r=!0,a=i.ab(d.u.J).ue,i=i.ab(d.u.P).ue,!a||!i)return{wR:[],xB:[]};a=a.Qa,n||(a=void 0)}return o=this.t4a(t,a,r,e),e.Ub===this.Hc.NLb&&[d.u.J,d.u.P].forEach(function(t){var e=s.ab(t);e&&(e.pd=o[t])}),{wR:o.map(function(t){return t.ea}),xB:o}},c.prototype.t4a=function(i,n,r,a){var o=this;return void 0===a&&(a=this.T),this.RXa(a)?[d.u.J,d.u.P].map(function(t){var e;return o.uc(t)?(e=a.Zh[t],t=o.ab(t).vn(e.stream,i,n,r),i=t.ea,t):{}}).reverse():[]},c.prototype.JX=function(i,n){var r=this;return void 0===n&&(n=this.T),this.RXa(n)?[d.u.J,d.u.P].map(function(t){var e;return r.uc(t)?(e=n.Zh[t].stream,t=r.ab(t).wB(e,i),i=r.K.Hh?new y.M(t.mb,e.oa.aa).W:t.Qa,t):{}}).reverse():[]},c.prototype.Jfc=function(t,e){var i=this.G.Qa;i&&i<e&&(t=this.JX(i)),e=this.fe(d.u.J),i=this.fe(d.u.P),e&&e.Pea(t[d.u.J]),i&&i.Pea(t[d.u.P])},c.prototype.RXa=function(t){var e=t.Zh;return!!e&&(t=e[d.u.J],t=!this.uc(d.u.J)||t&&t.stream.Yd,e=e[d.u.P],e=!this.uc(d.u.P)||e&&e.stream.Yd,!(!t||!e))},c.prototype.Xwb=function(t,e){this.Qi.Izb(t,e)},e.ULa=i=c,t.Ve(v.EventEmitter,i)},function(t,e,i){var n,r,a,f,l,d,o,p,b,g;function s(t,e,i,n,r,a,o,s,u,c,h){return(i=g.call(this,n,s,i,n,n,r,p.M.Ja(a),o,!1,function(){return null==h?void 0:h.ve})||this).Bb=t,i.Qi=e,i.Kg=u,i.rh=c,i.Woa=0,i.YE=[],i.hA=!1,i.Sp.xmb=!1,i.UU=new b.VLa(n,i.rh,s,i.H,i.mediaType,i.Qi,i.Va,i.Bb),i.i_b=l.default.time.ia(),i.$Zb=void 0,i.aK=s.Ava,i.yfb=l.default.time.ia(),t=(e=d.IP(s)).T_,e=e.EK,i.Q6b=i.mediaType===f.u.P?t:e,i.V0(r),i}_esm(e),e.m4=void 0,n=i(0),t=i(441),r=n.__importDefault(i(28)).default.Sd,a=i(425),f=i(6),l=n.__importDefault(i(3)),d=i(192),o=i(2),p=i(19),b=i(1031),g=t.Hja,n.__extends(s,g),Object.defineProperties(s.prototype,{Zs:{get(){return this.Va.Zs},configurable:!0},CO:{get(){return this.Va.CO},configurable:!0},AE:{get(){return this.Va.AE},configurable:!0},EC:{get(){return this.Va.EC},configurable:!0},Ki:{get(){return this.UU.Ki},set(t){this.UU.Ki=t},configurable:!0},Hs:{get(){return this.UU.Hs},set(t){this.UU.Hs=t},configurable:!0},tba:{get(){return this.Kd},configurable:!0},cYb:{get(){return this.QVa.W},configurable:!0},VR:{get(){return this.Pj.VR},configurable:!0},dVb:{get(){return this.Bb.Uma},configurable:!0},cf:{get(){return this.hA},configurable:!0},yI:{get(){return this.IUa},configurable:!0}}),s.prototype.reset=function(){this.seeking=void 0,this.connected=this.Ki=!1,this.Sp.reset()},s.prototype.xd=function(){this.reset(),g.prototype.xd.call(this)},s.prototype.wB=function(t,e){return a.wB(this.Ok.mediaType,this.K,t,e,this.Hh,this.Bb.C1b)},s.prototype.vn=function(t,e,i,n){return a.vn(this.Ok.mediaType,this.K,t,e,i,n)},s.prototype.$l=function(){this.aK=this.K.Ava},s.prototype.fO=function(){this.Va.Lfa()},s.prototype.V0=function(t){var e=this.Bb,i=this.mediaType;o.assert(t.mediaType===i),o.assert(t.T===this.$a.T),this.Ok=t,this.$a.T.yEa(i,t.Pc),e.Ayb(this,t.wm),this.mGb(t.Pc),this.ve.V0(t),this.$a.T.Ppa(),this.Ki=!1},s.prototype.nsa=function(t){var e=this.$a.T.Zh[this.mediaType];if(e&&e.stream.Yd&&-1!==(t=e.stream.da.No(t)))return t},s.prototype.hL=function(t,e){var i,n,r;if(this.pd&&this.pd.ea===t)e=this.pd.index,i=t;else{if(!(r=(n=this.$a.T).Zh[this.mediaType])||!r.stream.Yd)return this.xK=t,void(this.Q5b=e);if(i=r.stream.da,this.pd=this.vn(r.stream,t,void 0,e),void 0===this.pd){if(e=i.length-1,i=i.vk(e),this.Qb("setStreamingPts out of range of fragments, pts:",t,"last startPts:",i,"fragment index:",e,"fastplay:",n.Hf.Pe),n.Hf.Pe)return void(this.xK=t)}else e=this.pd.index,i=this.pd.ea}this.zm=e,this.IV=i,this.xK=void 0},s.prototype.Kgc=function(t){var e=this.Ok.ly(t),i="verifying streamId: "+t+" stream's track: "+(e?e.Pa:"unknown")+" currentTrack: "+this.Ok.trackId;return!!e||(this.Qi.Kn(i),this.Qi.Kn("unknown streamId: "+t),!1)},s.prototype.mGb=function(t){this.SWb=t.reduce(function(t,e){return e.Yv&&e.bitrate>t.bitrate?e:t},t[0])},s.prototype.Pea=function(t){this.ue=t},s.prototype.D0b=function(t,e,i,n,r){this.Flb(t,e,n,r),i&&++this.Woa,this.Bb.Nk()},s.prototype.oC=function(t){t.Qa&&t.ea&&(this.aK-=t.Qa-t.ea),g.prototype.oC.call(this,t)},s.prototype.gl=function(t){this.d8a(t),this.Gv(t)},s.prototype.Mfc=function(t){var e=l.default.time.ia();this.aK+=t*(e-this.yfb),this.yfb=e},s.prototype.j$b=function(){this.aK=this.K.Ava},s.prototype.yO=function(t){this.Va.xpa(),this.Hh||this.UU.yO(t,this.Ic)},s.prototype.d8a=function(t){var e,i=this.tba,n=this.Bb;this.Kg.CXa()||(this.Qi.gAb(t.mediaType,t.T.Ub,t.stream.track.IA,this.Er,this.X),null!=(e=this.Hh)&&e.JXb(t),e=i.U.Qe()||0,n.Hb.jA()||(i=i.ab(r.J))&&!i.cf&&i.daa&&n.Hb.oua(i),this.yO(e),this.Bb.c8a(t),this.Kg.H5(this)&&this.Kg.Nk())},s.prototype.cza=function(t){this.Bb.X$(t)},s.prototype.O_a=function(t,e,i,n,r,a){var o=this.K,s=o.Fj;return!(i>=o.Fj&&(o.iea&&(s=i+1e3),o.jea&&!this.connected))&&(this.Hh?this.Hh.ZA():!(!(i=this.Ki&&0===this.Va.pza&&0===this.Va.uu)&&n<s)&&(i?!a||0!==n||(this.Qb("playlist mode with nothing buffered, waiting for next manifest"),!1):this.rHb(t,e,r)))},s.prototype.fbc=function(t){this.IV=t},s.prototype.Lea=function(t){this.hA=!0,this.IUa=t},s.prototype.Npa=function(){this.hA=!1,this.IUa=void 0},s.prototype.rHb=function(t,e,i){return!(!this.cf&&this.mediaType!==f.u.P)||void 0!==this.um&&(e=this.lyb(e,t),this.track.T.Jl.N1(this.track.T.N,this.track.Pc),this.Pj.Yza([this.um],!1,f.wda(t),e,this.Q6b),(t=this.Pj.ZA(e,t,i,this.um,this.$a.T.Kr)).complete?this.Lea(t.reason):(this.Npa(),this.EF=t.EF,this.progress=t.progress),this.cf)},s.prototype.lyb=function(t,e){var i=l.default.oq()[this.mediaType],n=this.Va.K$();return"number"!=typeof(t={pt:i,ea:null!=(i=n.ud)?i:0,tc:t,Fc:null!=(i=n.nR||t)?i:0,Tk:null!=(i=n.LW||t)?i:0,Ag:n.Ag,Gj:n.Gj,lp:n.lp,Z4a:n.da.length,da:n.da}).ea?(t.ea=0,t.Fc=0):e===f.Nc.ed&&t.tc!==t.ea&&(t.tc=t.ea),t},e.m4=i=s},function(t,e,i){var n,p,b,r,g,m,v,y,w,A,_,a,o,E,s,k,u,c,S;function h(t,e,i,n,r,a,o,s,u,c,h,f,l){var d=S.call(this,t)||this;return d.K=e,d.Kd=r,d.Ok=a,d.QVa=o,d.Fx=f,d.Jp=l,d.events=new p.EventEmitter,d.connected=!1,d.Kua=!1,d.Um=!1,d.Kyb=0,d.HXa=0,d.hV="LIVE",d.X9=new g.iOa(d.mediaType,e,i,d),t="["+d.mediaType+"]",d.H=_.ai(E.default,i,t),d.Ik=d.H.error.bind(d.H),d.Qb=d.H.warn.bind(d.H),d.Xj=d.H.trace.bind(d.H),d.IV=o.W,"string"==typeof s||void 0===s?(i=d.mediaType===m.u.P&&e.j9||d.mediaType===m.u.J&&e.k9,d.ina=new A.Fka(s,e,new w.e5(c),i)):d.ina=s,d.gm=new b.RPa(d,n,d.K,d.H,d.mediaType),d.Sp=new v.JRa(d,e,d.H,d.gm,d.Kd,d.mediaType,d.Fx,function(){return d.Lj}),e.Hh&&(d.Hh=new y.ESa(e.Hh,d.H)),u&&(d.Te=null!=h?h:k.vt(d.mediaType,d.track.T,d.K,d.H,d.gm.tRb.bind(d.gm),d.gm.sRb.bind(d.gm),function(){}),d.Te.on("created",function(){return d.events.emit("requestQueueCreated")})),d}_esm(e),e.Hja=void 0,n=i(0),p=i(12),b=i(999),r=i(89),g=i(1e3),m=i(6),v=i(1002),y=i(1009),w=i(190),A=i(269),_=i(8),a=i(2),o=i(19),E=n.__importDefault(i(3)),t=i(78),s=i(36),k=i(444),u=i(118),c=i(130),S=r.Uw,n.__extends(h,S),Object.defineProperties(h.prototype,{mediaType:{get(){return this.Ok.mediaType},configurable:!0},track:{get(){return this.Ok},configurable:!0},$a:{get(){return this.Kd},configurable:!0},X:{get(){return this.Kd.G.id},configurable:!0},Va:{get(){return this.Sp},configurable:!0},Pc:{get(){return this.Ok.Pc},configurable:!0},Fo:{get(){return this.Sp.Fo},configurable:!0},Tn:{get(){return this.Sp.Tn},configurable:!0},Fc:{get(){return this.IV},configurable:!0},dfa:{get(){var t;return null!=(t=this.vd)?t:this.Ht},configurable:!0},KW:{get(){var t;return null!=(t=this.Va.KW)?t:this.dfa},configurable:!0},Ana:{get(){return this.Va.KW},configurable:!0},Er:{get(){return this.Va.Er},configurable:!0},eqa:{get(){return this.Va.eqa},configurable:!0},YZb:{get(){var t=this.Va.S$a;return null==t?void 0:t.Ed},configurable:!0},Zv:{get(){return!!this.ue&&(this.zm>this.ue.index||this.IV>=this.ue.Ic)},configurable:!0},vj:{get(){return this.Zv&&0===this.Sp.TF},configurable:!0},UDb:{get(){return!!this.Va.S$a},configurable:!0},Zs:{get(){return this.Va.Zs},configurable:!0},Oq:{get(){return this.Mc?o.M.max(this.Mc.Ea(this.PC),o.M.Ka):void 0},configurable:!0},eJ:{get(){return this.$a.eJ},configurable:!0},N1a:{get(){return this.Va.da.uv},configurable:!0},Pj:{get(){return this.ina},configurable:!0},ve:{get(){return this.Pj.ve},configurable:!0},um:{get(){return this.Pj.ve.um},configurable:!0},aa:{get(){var t;return null!=(t=null==(t=this.pd)?void 0:t.aa)?t:1},configurable:!0},Za:{get(){var t;return null==(t=this.pd)?void 0:t.Za},configurable:!0},mb:{get(){var t;return null==(t=this.ue)?void 0:t.mb},configurable:!0},Lj:{get(){return this.$a.Dd.Rg(this.aa).fb},configurable:!0},daa:{get(){return this.Va.daa},configurable:!0},lz:{get(){return this.Va.lz},configurable:!0},dDa:{get(){return this.Va.dDa},configurable:!0},Ht:{get(){return this.QVa.add(this.$a.Dd)},configurable:!0}}),h.prototype.QV=function(){var i=this;this.Sp.QV(void 0,function(t){var e=t[0];t=e.dd,(e=e.index)<i.zm&&i.gL(t,e)})},h.prototype.reset=function(){this.Va.reset(),this.pd&&this.gL(this.pd.dd,this.pd.index),this.Te&&this.$a.T.ON(this.mediaType,this.Te)},h.prototype.xd=function(){var t;this.Um=!0,this.Sp.xd(),null!=(t=this.ina)&&t.ve.tb(),this.Te&&(this.$a.T.ON(this.mediaType,this.Te),u.zp.instance.SO(this.Te),this.Te.removeAllListeners(),this.Te=void 0)},h.prototype.toJSON=function(){return{started:this.lz,startOfSequence:this.dDa,segmentId:this.X,requestedBufferLevel:this.Tn,viewableId:this.Kd.T.N,hasFragments:this.daa}},h.prototype.bm=function(){return this.Va.bm()},h.prototype.gL=function(t,e){this.IV=t,this.zm=e},h.prototype.ky=function(){return this.Va.ky()},h.prototype.RE=function(){this.Va.close()},h.prototype.BE=function(t){return!!(t=this.Va.Cv(t.W))&&t.complete},Object.defineProperties(h.prototype,{bi:{get(){return this.Kd.bi},configurable:!0},PC:{get(){var t;return null!=(t=null!=(t=this.Va.PC)?t:null==(t=null==(t=this.pd)?void 0:t.ec)?void 0:t.add(this.$a.Dd))?t:this.Ht},configurable:!0}}),h.prototype.Glb=function(t,e,i){var n;return a.assert(this.Te),a.assert(!this.Um,"pipeline.tryIssueRequest on disabled pipeline"),t.Yd?t.ub?(a.assert(this.track.ub,"Unexpected live stream."),this.efc(t,this.Te,i)):(n=t.w$(),a.assert(n,"initialHeaderReceived and headerFragments mismatch - initialHeaderReceived:".concat(t.Yd,", headerFragments:").concat(n)),this.Flb(t,n,this.Te,e,i)):(t=t.BG(this.Te))?{Bj:t,reason:"success"}:{Bj:t,reason:"pipelineTryIssueHeaderRequest"}},h.prototype.Faa=function(t,e){t&&(this.pd=t),e&&(this.ue=e),a.assert(this.pd),a.assert(this.ue),a.assert(void 0===this.zm),this.gL(this.pd.dd,this.pd.index)},h.prototype.truncate=function(t){var e=this;a.assert(this.pd,"expected first fragment to exist on updateStreaming"),this.ue=t,this.Zv&&(t=n.__read(this.Sp.sCb(t),2),this.gL(t[0],t[1]),this.Jt()&&(this.Va.sib(),this.Va.xpa(),Promise.resolve(function(){e.events.emit("lastRequestIssued",{type:"lastRequestIssued",mediaType:e.mediaType})})))},h.prototype.wF=function(){return!this.Jt()&&(!!this.yh()||this.track.uca)},h.prototype.yh=function(){return void 0!==this.pd&&void 0!==this.ue},h.prototype.Jt=function(){return this.Um||this.Zv},h.prototype.f$a=function(){var t,e=this.K.Ij;return e=null!=(t=this.Te)&&t.track?null==(t=this.Te)?void 0:t.track.Ij:e},Object.defineProperties(h.prototype,{wfb:{get(){var t=!0;return this.K.jea&&(t=this.connected),t=this.K.iea?t&&this.Kua:t},configurable:!0},e5b:{get(){return void 0!==this.Hh},configurable:!0},deb:{get(){var t;return null!=(t=this.Hh)&&t.ZA()?{complete:!0,reason:"stall"}:{complete:!1,reason:"stall"}},configurable:!0}}),h.prototype.gl=function(t){this.gm.i3b(t),"oncomplete"===this.K.g9a&&(this.Kua=!0),this.Gv(t)},h.prototype.oC=function(t){t.Cc||this.gm.sdb(t.stream,t.ea,t.dd),this.gm.e3b(this.X,t.stream,t.Cc),this.xP(t)},h.prototype.pK=function(t){t.q7||(this.connected=!0),"onfirstbyte"===this.K.g9a&&(this.Kua=!0),this.ZE(t)},h.prototype.q6a=function(t){var e,i=this.Va.da;return 0===i.length?{da:[],hda:0,Gj:0,lp:0}:((e=i.uP(t.W))<0&&(e=void 0===i.ea||t.W<=i.ea?0:i.length),{da:i.oac(e),hda:Math.max(0,i.D0a-e),Gj:i.Gj,lp:i.lp})},h.prototype.bF=function(){return this.track.bF()},h.prototype.K6a=function(){var t,e,i,n,r;if(this.track.ub)return t=this.PC,i=(this.um||this.Pc[0]).cF().nDa,n=1e3*this.Kd.T.Jl.P_b,this.ZVa?(r=E.default.time.ia()-this.ZVa,t=i-t.W,r>this.K.M_b&&(n<t&&"LIVE"===this.hV?this.hV=e="DVR":t<=n&&"DVR"===this.hV&&(this.hV=e="LIVE"))):i-t.W>n&&(this.hV=e="DVR",this.ZVa=E.default.time.ia()),e},h.prototype.n8b=function(t){var e=this.Pc.indexOf(t.bz);-1===e?this.Ik("reissueLiveRequest: stream not found in stream list, falling back to first stream"):(t.bz=this.Pc[Math.max(e-1,0)],this.bm())},h.prototype.Flb=function(t,e,i,n,r){var a,o,s,u=this.Kd,c=u.T,h=this.mediaType,f=this.zm;return f>=e.length?(this.Qb("makeRequest nextFragmentIndex:",f,"past fragments length:",e.length),{Bj:!1,reason:"insufficientFragments"}):this.pd&&this.ue?(e=h===m.u.P&&!!this.K.Ew&&(null==(s=this.$a.G.G)?void 0:s.yv)&&this.pd.sn<this.K.Ew&&void 0!==this.pd.Ha,s=h===m.u.P&&!!this.K.Ew&&(null==(a=this.$a.G.G)?void 0:a.zv)&&this.ue.sn<this.K.Ew&&void 0!==this.ue.Ha,a=this.X9.p6a(t,f,e,s),h===m.u.P&&this.K.Ew&&(null!=(o=this.$a.G.G)&&o.yv&&(a.Dv?a.Aib():a.index===this.pd.index+1&&this.pd.sn<this.K.Ew&&void 0!==this.pd.Ha&&a.Aib(this.pd.Ha.end-this.pd.Ha.start)),null!=(f=this.$a.G.G)&&f.zv&&(a.$o?a.Bib():a.index===this.ue.index-1&&this.ue.sn<this.K.Ew&&void 0!==this.ue.Ha&&a.Bib(this.ue.Ha.end-this.ue.Ha.start))),this.Jp&&!this.Jp.kHb(this.mediaType,a.fa)?{Bj:!1,reason:this.mediaType===m.u.J?"globalVideoMemoryLimit":"globalAudioMemoryLimit"}:(this.zwa=a.region,a.HC=r,null!=(e=this.Hh)&&e.LXb(a,t),a.$o&&h===m.u.J&&this.gm.Bma(u.G,a.Qa),this.K.EQ&&(a.EQ=this.K.EQ),void 0!==t&&(a.location=t.location,a.oc=t.kc,a.kCa=t.ju),(r=u.T.Tea)&&"OPEN_CONNECT_APPLIANCE"===t.ku&&(h=h===m.u.P&&this.K.j9||h===m.u.J&&this.K.k9,o=this.K.XOb&&this.mediaType===m.u.J&&this.K.Ij,a.A0=h?n:void 0,a.Uea=r.nv({qE:u.xh(this.mediaType),Dca:this.K.SOb?this.K.Dca:void 0,glb:String(E.default.time.ia()),RW:h?n:void 0,Moa:o?{start:a.offset,size:a.fa}:void 0})),E.default.time.ia(),(i=this.Va.x1a(a,i,t)).tK()?(null!=(s=this.Hh)&&s.qPb(i,a,t),this.gm.j3b(i),this.gL(i.Ic,a.UQ),this.Jt()&&(this.Va.sib(),this.events.emit("lastRequestIssued",{type:"lastRequestIssued",mediaType:this.mediaType})),{Bj:!0,reason:"success"}):(this.Qb("MediaRequest.open error: "+i.qg+" native: "+i.zi),7===i.readyState?{Bj:!1,reason:"requestAborted"}:(this.Qb("makeRequest caught:",i.qg),c.Sf("MediaRequest open failed (1)","NFErr_MC_StreamingFailure"),{Bj:!1,reason:"openAseMediaRequest"})))):(this.Qb("makeRequest delayed, first or last fragment not set","first:",!!this.pd,"last:",!!this.ue),{Bj:!1,reason:"noFirstOrLastFragment"})},h.prototype.efc=function(t,e,i){var n=this.Kd.T,r=this.zm,a=(u=t.cF()).nDa,o=u.uv,s=o.jC(r-u.bfa),u=s.add(o);return 0===this.HXa&&(this.HXa=E.default.time.ia(),this.Kyb=u.W),u.add(o).W>a?{Bj:!1,reason:"exceedsLiveEdge"}:(t=this.Va.x1a({xq:r,index:r,Za:s.fb,mb:u.fb,aa:t.aa,offset:0,fa:0,HC:i},e,t)).tK()?(this.gL(u.W,this.zm+1),{Bj:!0,reason:"success"}):(this.Qb("MediaRequest.open error: "+t.qg+" native: "+t.zi),7===t.readyState?{Bj:!1,reason:"requestAborted"}:(this.Qb("makeRequest caught:",t.qg),n.Sf("MediaRequest open failed (1)","NFErr_MC_StreamingFailure"),{Bj:!1,reason:"openAseMediaRequest"}))},i=n.__decorate([c.kJ],h),e.Hja=i,s.Ve(t.Dz,i),s.Ve(t.Au,i)},function(t,e,i){var c,R,P,C,n,E,j,N,M;_esm(e),e.xra=e.Kt=e.Vn=void 0,t=i(0),c=t.__importStar(i(11)),R=i(22),P=i(74),C=t.__importDefault(i(28)),n=t.__importDefault(i(32)),E=t.__importDefault(i(1017)),j=i(6),N=n.default.assert,M=n.default.Hp,e.Vn=(t=function(){return{Kt:x,Vn:function(h,f,l,i,t,d,p){for(var b,g,m,v,y,w,A,e,n,_,E,k,r,S,T,I,O,a,o=2;16!==o;)switch(o){case 3:N("number"==typeof f.oX),b=new M,g=t=l[i],m=f.buffer.ea,v=f.buffer.tc,y=f.buffer.Fc,w=f.buffer.Tk,A=f.ee,e=w-v,n=this.ve.V$a||C.default.L3.Dg,_=f.state===j.za.Gc||f.state===j.za.Ug?f.buffer.Gj:0,E=h.Qba,k=h.xy||1e3,r=t.T.duration,k<e&&r<=h.$0b&&(k+=(1-Math.min(r/(h.kaa+h.Dba),1))*(e-k)),o=6;break;case 14:return u.call(this,f,h,l,t);case 2:N(!c.sa(i),"Must have at least one selected stream"),void 0===f.ee&&(f.ee=0),N(c.Oa(f.ee),"invalid player fragmentIndex"),N("number"==typeof f.buffer.pt),o=3;break;case 6:o=n!==C.default.L3.lwb&&t.Xa?13:14;break;case 13:t.da&&t.da.length||(t.pDa=!0),T=P.yk.A1a(f.buffer.da),I=f.buffer.pt-T.fa,n=(h.VCa||p)&&e>=h.XEa?l.length:i+2,o=10;break;case 18:b.Gh=t||g,o=17;break;case 10:O=function(t){for(var e=2;4!==e;)switch(e){case 2:e="variable"===h.TCa?1:3;break;case 1:return l.slice(0,t).map(function(t){return[s(h,f.buffer.pt,t),0]});case 5:return l.slice(0,t).map(function(t,e){return e<i?[h.Uua,h.kxa]:e===i?[h.kaa,h.Dba]:[h.Vua,h.lxa]});case 3:e=5}}(n),a=l.slice(0,n).map(function(s,u){{var c;return a000.h9M(4),c=a000.K9M(u,i),function(){for(var t,e,i,n,r,a,o;;){t:if(t=l[Math.max(a000.K9M(1,u,a000.O9M(0)),0)],e=O[u][1],i=f.playbackRate,n=s.da?s.da.v8(A,O[u][0]):0,r=t.da?t.da.v8(A+n,e):0,e=s.Xa||0,a=s.da&&s.da.length,o=p?h.eQb:a?h.C9:h.fQb,o=c?h.hsa:o,S&&!S.D9&&S.Xa>=e&&S.bitrate<=s.bitrate)t=!1;else{if(c||a||(s.pDa=!0),!c||!a)if(a&&!h.j1){if(e>=Math.max(s.Dy*i,s.bitrate*i*o)&&s.Ev){t=!0;break t}}else if(e>=s.bitrate*i*o){t=!0;break t}i=h.oqa&&s!==g&&(s.kc!==g.kc||!d)&&(i=s.Lb)&&i.ll&&i.ll.ta?i.ll.ta+h.lqa*(i.ll.ye?Math.sqrt(i.ll.ye):0):0,(t=x(h,l,s,t,T,v+i-m,E,w-m,y-m,A,T.length,_,I,n,r,k,f.oX,f.playbackRate,!!f.Lab))&&t.result&&(b.xqc=t.FZ),S={D9:t&&t.result,Xa:e,bitrate:s.bitrate},t=t&&t.result}return t}}}}),N(a.length===O.length),a[i]()?i+1<l.length&&e>h.XB&&(void 0===this.nba||this.Kwa&&this.Kwa>this.nba||y-this.nba>h.yba&&e>h.nxa)&&(t=R.moa(l.slice(i+1,n),function(t,e){return a[i+1+e]()})):t.da&&t.da.length&&(t=R.moa(l.slice(0,i),function(t,e){return a[e]()}),e=l[0],t&&t.cg<e.cg||!t)&&(t=e),o=18;break;case 17:return b}},xra:s};function s(t,e,i){for(var n,r=2;3!==r;)switch(r){case 2:r=i.Xa?5:1;break;case 8:r=+i.Xa?9:7;break;case 1:return t.scb;case 5:return(n=(i.iec||i.Xa)/i.Xa)<=1?t.Lbb:Math.min(Math.max((t.jcc*Math.min(8*e/i.bitrate,t.cw)-t.xy)/(n-1),t.scb),t.Lbb)}}function u(t,e,i){return(t=new M).Gh=i[0],t}function x(t,e,i,n,r,a,o,s,u,c,h,f,l,d,p,b,g,m,v){for(var y,w,A,_=2;15!==_;)switch(_){case 17:return 0<d||0<p?E.default({da:r.concat(y),blocks:h+d+p,tc:a,Tk:s,occ:o,Gj:f,Fc:u,ee:h,ZQb:h+d,oX:g,h5a:l,Xa:e/m,fca:b,KF:t.KF,AZb:t.j1,BOb:!1}):e>i.Dy?{result:!0,FZ:0,Ev:!0}:{result:!1,FZ:0,Ev:!0};case 2:N(i,"First stream undefined"),N(n,"Second stream undefined"),e=i.Xa,_=4;break;case 18:w=Math.min(v,n.da.length-c),y.push(n.da.kL.subarray(c,c+w)),v-=w,(c+=w)>=n.da.length&&(c=0),_=19;break;case 12:v=d,_=11;break;case 7:return!1;case 13:_=v?12:16;break;case 8:_=!e||e<i.bitrate*m*t.Tua||!w?7:6;break;case 20:v=p,_=19;break;case 16:d=Math.max(0,Math.min(d,i.da.length-c)),p=Math.max(0,Math.min(p,n.da.length-c-d)),0<d&&y.push(i.da.kL.subarray(c,c+d)),0<p&&y.push(n.da.kL.subarray(c+d,c+d+p)),_=17;break;case 11:_=0<v?10:20;break;case 10:w=Math.min(v,i.da.length-c),y.push(i.da.kL.subarray(c,c+w)),v-=w,(c+=w)>=i.da.length&&(c=0),_=11;break;case 6:A||(n=i),y=[],_=13;break;case 19:_=0<v?18:17;break;case 4:y=s-a,w=i.da&&i.da.length,A=n.da&&n.da.length,N(r.length===h),t.oxa&&(b=Math.min(b,y)),_=8}}}()).Vn,e.Kt=t.Kt,e.xra=t.xra},function(t,e,i){var r,d,p,a,b,g;function n(t,e,i,n){return a(!r.sa(n),"Must have at least one selected stream"),new g(n)}function o(t,e,i,n){return a(!r.sa(n),"Must have at least one selected stream"),new g(n)}r=i(11),e=i(32),d=e.console,p=e.debug,a=e.assert,b=e.OJ,g=e.Hp,t.exports={STARTING:function(t,e,i){var n,r,a,o,s,u,c,h,f,l;for(n=new g,r=t.Cnc||1,a=i.length-1;0<=a;--a){if(o=i[a],u=a,l=f=h=c=void 0,c=(s=o).id,h=s.bitrate,f=s.Xa||0,l=!!f,p&&d.log("Checking feasibility of ["+u+"] "+c+" ("+h+" Kbps)"),s.Yv?h>t.LZ?(p&&d.log("  Above maxInitAudioBitrate ("+t.LZ+" Kbps)"),0):h*t.lca/8<e.buffer.pt?l?(p&&d.log("  Have throughput history = "+l+" : available throughput = "+f+" Kbps"),h*e.playbackRate<f/r?(p&&d.log(" +FEASIBLE: bitrate less than available throughput"),1):void(p&&d.log(" bitrate requires more than available throughput"))):(s=t.$Z,h<=(s=e.Tva?Math.max(s,t.YZ):s)?(p&&d.log("  Bitrate is less than max of minInitAudioBitrate ("+t.$Z+" Kbps) "+(e.Tva?" and also minHCInitAudioBitrate ("+t.YZ+" Kbps)":"")),p&&d.log("  +FEASIBLE: no throughput history and has minimum bitrate configured"),1):void(p&&d.log("  No throughput history"))):(p&&d.log("  audio buffer too small to handle this stream"),0):(p&&!s.Ur&&d.log("  Not available"),p&&s.HB&&d.log("  Failed"),0)){n.Ke=a;break}b(o)&&(n.Ke=a)}return n},BUFFERING:n,REBUFFERING:n,PLAYING:o,PAUSED:o}},function(t,e,i){var u,c,h;_esm(e),e.vt=void 0,u=i(10),c=i(118),h=i(2),e.vt=function(t,e,i,n,r,a,o){var s;return u.S&&n.trace("AsePlaygraph.createRequestQueue()"),(s=c.zp.instance.vt(t,e.L,!0,!1,{vv:i.vv},i)).Ah.on(s,"networkfailing",function(){var t;u.S&&n.trace("requestQueue OnNetworkFailing: ",s),s.A9&&(h.assert(s.GX),null!=(t=e.Kr)&&t.cu(void 0,s.GX,void 0,s.qg,s.zi)),e.bm()}),s.Ah.on(s,"error",function(){o(s.qg,s.zi)}),s.on("transportreport",r),s.on("mediaRequestComplete",a),s.xa(),s}},function(t,e,i){var r,n,a,o,c,h,f;_esm(e),e.Yia=void 0,t=(r=i(0)).__importDefault(i(105)),n=r.__importDefault(i(3)),i=i(161),a=t.default.j8,o=t.default.GHb,c=t.default.Sra,h=t.default.EPb,f=t.default.V$b,new n.default.Console("ASEJS_PREDICTOR","media|asejs"),i=function(n){return r.__extends(t,n),t;function t(t,e){for(var u,i=2;13!==i;)switch(i){case 3:u.iFb=a(t.fv.gamma||1,.1,10),u.filter=t.fv.filter,u.icc=!!t.fv.simpleScaling,t.fv.niqrfilter&&t.fv.niqrcurve&&(u.Zcb=t.fv.niqrfilter,u.T2b=o(t.fv.niqrcurve,1,0,4)),i=14;break;case 2:(u=n.call(this,t,e)||this).EK=function(t,e,i,n){for(var r,a,o,s=2;12!==s;)switch(s){case 3:r=Math.pow(Math.max(1-i/u.lFb,0),u.iFb),i=e.Tk-e.tc,e=u.icc?(e=c(u.Q1a,i,1))*r+(i=c(u.P1a,i,1))*(1-r):c(f(u.Q1a,u.P1a,r),i,1),s=7;break;case 2:n=null!=n?n:u.CQ,o=u.So(t,i),i=!u.ICa(i)&&(null==(r=t[u.filter])?void 0:r.ta)||o,s=3;break;case 7:void 0!==(t=u.Zcb&&(null==(a=t[u.Zcb])?void 0:a.sya))&&(a=h(u.T2b,t),e=Math.min(e*a,1)),s=14;break;case 14:return a000.O9M(5),{lower:a=u.G2a(a000.K9M(e,o,1),n),upper:a*u.config.CEa}}},Array.isArray(t.fv.curves)&&(u.Q1a=o(t.fv.curves[0],0,0,1),u.P1a=o(t.fv.curves[1],0,0,1)),u.lFb=a(t.fv.threshold||6e3,1,1e5),i=3;break;case 14:return u}}}(i.jD),e.Yia=i},function(t,e,i){var r;_esm(e),e.ioa=e.T_=e.W3a=void 0,r=i(0).__importDefault(i(105)).default.Sra,e.W3a=function(t,i,e){var n,r,a=0;return e?t.some(function(t){var e=t.b;return t=t.m,i<=e?(a=r&&e!==n?r+(t-r)/(e-n)*(i-n):t,!0):(n=e,a=r=t,!1)}):t.some(function(t){return a=t.m,i<=t.b}),a},e.T_=function(t,e,i){var n;return e=(null==(n=e.Xa)?void 0:n.ta)||0,t.JZa?e*(1-(t=r(t.IZa,i.Tk-i.tc,1))):e*t.w1/100},e.ioa=function(t,e){return t<2*e?t/2:t-e}},function(t,e,i){var n,r,l,d,p,a,o,b,g,m,v,s,u,y;function c(){var t=null!==u&&u.apply(this,arguments)||this;return t.iXa=0,t.Xma=0,t.I5=0,t.vla=0,t}function h(t,e,i,n,r,a,o,s,u,c,h){var f=y.call(this)||this;return f.gg=t,f.Zg=e,f.K=n,f.H=r,f.U=a,f.O_=o,f.Di=s,f.rp=u,f.QD=new d.Ls(!1),f.PD=new d.Ls(b.M.Ja(-1/0)),f.H=d.ai(l.default,f.H,"AsePlayerBuffer [".concat(e,"]:")),f.Yu=new p.JGa(f.H,i,e),f.resume(),a&&o&&s&&(h?(f.qR=h).dt(a,s,f.gg):f.o1a(),t=new g.CJa(null==a?void 0:a.Di,b.M.Ja(f.K.a_),r),f.Yu.Rna(t),f.K.WYa&&(r=new m.UOa(null==a?void 0:a.Di,f.K.WYa,b.M.Ja(f.K.$Db),r),f.Yu.Rna(r)),c&&(f.qXa=new v.cSa(c),f.Yu.Rna(f.qXa))),f.gg.on("requestAppended",function(t){f.QD.set(!0),t.request.Mc&&f.PD.set(t.request.Mc),f.emit("requestAppended")}),f}_esm(e),e.Qga=void 0,n=i(0),t=i(12),r=i(10),l=n.__importDefault(i(3)),d=i(8),p=i(1033),a=i(131),o=i(1034),b=i(19),g=i(1037),m=i(1038),v=i(1039),s=i(2),y=t.EventEmitter,n.__extends(h,y),Object.defineProperties(h.prototype,{ew:{get(){return this.QD},configurable:!0},nZ:{get(){return this.PD},configurable:!0},AYb:{get(){return this.Yu.gk},configurable:!0},OCa:{get(){return this.gg.endOfStream},configurable:!0}}),h.prototype.o1a=function(){s.assert(this.U&&this.O_&&this.Di,"Player should be defined"),this.qR=new o.kRa(this.Zg,this.H,this.U,this.gg,this.U.events,this.O_,this.Di,this.rp)},Object.defineProperties(h.prototype,{mediaType:{get(){return this.Zg},configurable:!0}}),h.prototype.z6a=function(){},h.prototype.resume=function(){r.S&&this.H.trace("resume"),this.aDa()},h.prototype.O9a=function(t){return this.gg.Jta()>t},Object.defineProperties(h.prototype,{GEb:{get(){return this.PM},configurable:!0}}),h.prototype.fcc=function(){this.gg.i_(!0)},h.prototype.reset=function(t){void 0===t&&(t=!1),r.S&&this.H.trace("reset"),this.stop(),this.gg.reset(t),this.QD.set(!1),this.PD.set(b.M.Ja(-1/0)),t||(this.PM=void 0,null!=(t=this.qR)&&t.reset(),null!=(t=this.qXa)&&t.j4b())},h.prototype.ij=function(t){void 0===t&&(t=!1),r.S&&this.H.trace("restart"),this.reset(t),this.aDa(!0)},h.prototype.stop=function(){r.S&&this.H.trace("stop"),this.Yu.Vjb()},h.prototype.close=function(){var t;r.S&&this.H.trace("start"),null!=(t=this.qR)&&t.close()},h.prototype.tb=function(){this.stop(),this.close()},h.prototype.p_=function(){this.K.Q9&&this.gg.O4a(),this.gg.rB()},h.prototype.nG=function(t){this.gg.nG(t)},h.prototype.$Qb=function(t){this.gg.ndb(t,!0)},h.prototype.dh=function(t){var e;return!(null==(e=this.qR)||!e.dh(t))},h.prototype.aDa=function(t){this.Yu.gk&&!t||(this.Yu.t$b(),a.AsyncIterator.HZb(this.Yu,this.gba.bind(this)))},h.prototype.gba=function(t){t.done||this.iBa(t.value)},h.prototype.iBa=function(t){var e;r.S&&this.H.trace("requestReceived: ".concat(null==(e=this.Yu.VW)?void 0:e.G.id)+" ".concat(t.toString(),", edit: ").concat(JSON.stringify(t.Ha))),this.gg.endOfStream?r.S&&this.H.error("Buffer manager has declared EOS, ignoring request",t.toString()):(this.PM?(this.PM.a_b=t.Ic,this.PM.c_b=t.gf,this.PM.Z$a=t.Mc):this.PM={jpc:t.dd,kpc:t.ud,a_b:t.Ic,c_b:t.gf,Z$a:t.Mc},!t.Dv||!t.stream.track.Wo||null!=(e=this.U)&&e.Yo(t.T.N)||this.emit("drmNeeded",{N:t.T.N,Py:t.vd}),this.gg.FEb(t))},u=h,n.__extends(c,u),c.prototype.iBa=function(t){var e,i;u.prototype.iBa.call(this,t),this.iXa++,this.Xma++,this.IXa=l.default.time.ia(),this.iN||(this.iN={Ic:t.Ic,dd:t.dd,index:t.index},this.b6||(this.b6=this.iN)),i=!1,(e=this.o6)&&Math.abs(e.gf-t.ud)<100&&(this.I5+=t.gf-e.gf,this.vla++,i=!0),i||(this.I5=t.sn,this.vla=1),this.o6=t},c.prototype.stop=function(){u.prototype.stop.call(this),this.Xma=0,this.iN=void 0},c.prototype.z6a=function(){var t,e,i=this.Yu,n=i.VW;if(n)return{RM:t=(e=n.ab(this.Zg))&&e.Va?e.Va.aua():t,currentBranch:{sId:n.G&&n.G.id,cancelled:n.Mf},currentReceivedCount:i&&i.LLb,totalReceivedCount:this.iXa,currentState:i&&i.O1a||"Uninitialized",lastRequestPushed:this.o6&&{contentEndPts:this.o6.Ic,fragmentIndex:this.o6.index},tslp:this.IXa&&l.default.time.ia()-this.IXa,cpts:this.I5,crq:this.vla,rslp:this.Xma,firstRequestSSPushed:this.iN&&{contentStartPts:this.iN.dd,fragmentIndex:this.iN.index},firstRequestPushed:this.b6&&{contentStartPts:this.b6.dd,fragmentIndex:this.b6.index}}},e.Qga=i=c},function(t,e,i){var l,r,h,c,s,f,d,p,u,a,b;function o(t,e,i,n,r,a,o,s,u,c){this.Bb=t,this.Qi=e,this.H=i,this.EN=n,this.K=o,this.Y5=s,this.NWa=u,this.ZX=c,this.Qb=this.H.warn.bind(this.H),this.Xj=this.H.trace.bind(this.H),this.hg=this.H.log.bind(this.H),this.mi=[],this.Ph={},r.Co?(p.assert(!r.Dq),this.lla=!0,this.zAb(r,r.Co,a)):(this.Lp=this.kA(r.Dq||"",r,0,void 0,void 0,{},!0),this.Lp.Ml=!0,this.Lp.Qa=1/0,this.W6=[this.Lp]),this.Kd=this.K5(this.Lp,void 0,a),this.Kd.active=!0,t=d.ai(h.default,this.H,"BranchQueue::"),this.rj=new f.VL(t),this.rj.enqueue(this.Kd),this.Pma=this.eV=void 0}_esm(e),e.fha=void 0,t=i(0),l=t.__importStar(i(11)),r=t.__importDefault(i(90)),h=t.__importDefault(i(3)),c=i(1040),s=i(6),f=i(189),d=i(8),p=i(2),u=i(19),a=i(397),b=i(439),o.Usa=function(t){return"m"+t},Object.defineProperties(o.prototype,{ty:{get(){return!!this.lla},configurable:!0},el:{get(){return this.Kd.Mf},configurable:!0},yd:{get(){return this.Lp},configurable:!0},Sh:{get(){return this.Kd.G.id},configurable:!0},NLb:{get(){return this.Kd.T.Ub},configurable:!0},Yc:{get(){return this.Kd},configurable:!0},bb:{get(){return this.mi},configurable:!0},bf:{get(){return this.Kd.bf},configurable:!0},rh:{get(){return this.Bb.rh},configurable:!0},Ei:{get(){return this.eV||this.bb[0]},configurable:!0}}),o.prototype.tb=function(){this.mi.forEach(function(t){t.xd()}),this.mi=[],this.rj.clear()},o.prototype.Ee=function(t){return this.Ph[t]},o.prototype.C7a=function(){return this.rj.getIterator()},o.prototype.B7a=function(t,e){var i=this.Ph[t];if(i)return(t=i.mm[e])&&t.weight;this.Qb("getSegmentWeight, unknown segment:",t)},o.prototype.$Ub=function(t){var e=this.Ph[t];if(e)return e.ea;this.Qb("getSegmentStartPts, unknown segment:",t)},o.prototype.ZUb=function(t){var e=this.Ph[t];if(e){if(l.Oa(e.Qa)&&isFinite(e.Qa)&&l.Oa(e.ea)&&isFinite(e.ea))return e.Qa-e.ea}else this.Qb("getSegmentDuration, unknown segment:",t)},o.prototype.bea=function(i){var n=-1;this.mi.some(function(t,e){return t===i&&(n=e,!0)}),-1!==n?this.mi.splice(n,1):this.Qb("Unable to find branch:",i,"in branches array")},o.prototype.CI=function(t,e){var i=0;return this.jyb(t).forEach(function(t){(t=t.fe(e))&&(i+=t.AE)}),i},o.prototype.Tx=function(t,e,i){var n;if(!t.uc(e))return 0;for(n=t.ab(e),n=i?n.Fc:n.Er;void 0===n;){if(!t.Pg)return 0;n=(t=t.Pg).ab(e),n=i?n.Fc:n.Er}return t=this.NWa.Qe(),Math.max(n-t,0)},o.prototype.msa=function(e){return this.mi.filter(function(t){if(t.T.Ub===e)return!0})},o.prototype.DQb=function(t,e){return this.kVa(t,!1,e)},o.prototype.CQb=function(t,e){return this.kVa(t,!0,e)},o.prototype.G9b=function(e,i,n){l.Nf(this.mi,function(t){t.T===e&&t.Yib(i,n)}),l.Nf(this.Ph,function(t){t.T===e&&(t.T=i)})},o.prototype.thb=function(){var i=this;l.Nf(this.mi,function(t){var e=i.Bb.Uh(t.T.Ub);t.Qq(u.M.Ja(e.zy))})},o.prototype.ws=function(i){var n=this;l.Nf(this.mi,function(t){t.ab(s.u.J).track.Pc.forEach(function(t){var e=a.joa(t.mf,t.bitrate,i,n.H);r.default(e,t)})})},o.prototype.Cv=function(t,e,i,n){for(var r;e;){if(r=e.Cv(t,i))return r;if(n)break;e=e.Pg}},o.prototype.V1a=function(t){var e=this,i=this.mi;return(i=(t=void 0===t?!1:t)?i.filter(function(t){return t!==e.Kd}):i).forEach(function(t){t.active=!1,e.rj.remove(t)}),t||this.rj.clear(),i},o.prototype.$7b=function(){for(var t;0<this.mi.length&&((t=this.mi[0]).ab(s.u.P),t.ab(s.u.J),t.active)&&t!==this.Kd&&t.xWb();)t.xd(),this.mi.shift()},o.prototype.f0=function(t,e,i,n,r){if(n<i){for(i-=n;t;)t.f0(e,i,r),t=t.Pg;return i}},o.prototype.Xab=function(t,e){for(var i={LW:null,nR:null,ud:null,Gj:0,lp:0,Ag:0,da:[]};t;)t.K$(i,e),t=t.Pg;return i},o.prototype.$Hb=function(t){var i,e,n=this.Kd;n.Mab?i=n.Mab:(e=this.Kd.bf,i=this.K5(n.G,n),s.Uf.forEach(function(t){var e=i.fe(t);e&&(e.hL(0),t=n.fe(t),e.Pea(t.ue))}),i.Qq(u.M.Ja(e+t)),n.Mab=i),this.KM(i,n)},o.prototype.lDb=function(t,e,i){var n,r;p.assert(!t.ty()),this.lla||(this.lla=!0,this.eV=this.Ei,n=this.Lp.id||o.Usa(0),this.Lp.id=n,this.Ph[n]=this.Lp,this.Lp.Qa=this.Bb.BTb().C6a(),this.Lp.$F=!0),r=void 0!==t.Dq?t.Dq:o.Usa(t.Ub),(t=this.kA(r,t,e,i,void 0,{},!0)).$F=!0,this.W6.forEach(function(t){t.mm={},t.mm[r]={weight:100},t.cX=r,t.Hw=!1}),this.W6=[t]},o.prototype.qt=function(t,e){var i=this.Ei,n=i.kz(e,this.Bb.U),r=i.G,a=i.children[t];return e?r.mm[t]?i.Cl?i.Cl===t:(i.Cl=t,a&&i.T9&&this.KM(a,i),!0):(this.Kd.Qb("chooseNextSegment, invalid destination:",t,"for current segment:",r.id),!1):void 0===i.Cl&&(a?(n.Qcb=!a.Cpa(),this.Bb.Yma(void 0,b.qU.YQ),i.T9=void 0,i.Cl=t,this.KM(a,i),i.RE(),this.Bb.DV(),!0):!(n.Qcb=!0))},o.prototype.WWb=function(i,t){var n,r=this,e=i.G;t&&!i.Cl&&(i.Cl=e.cX,i.kz(!0,this.Bb.U,!0)),i.children=Object.create(null),l.Nf(e.mm,function(t,e){i.Cl&&e!==i.Cl||(n=r.Ph[e],n=r.Axb(n,i),i.children[e]=n)}),i.Cl&&(t=i.children[i.Cl])&&this.KM(t,i),i.T9=!0},o.prototype.Eec=function(){var i=0;return l.Nf(this.mi,function(e){s.Uf.forEach(function(t){e.uc(t)&&(t=e.fe(t),i+=t.Va.tj)})}),i},o.prototype.Jdc=function(t,e){var i,n=this,r=this.hyb(t,e);r?(r!==this.Kd.G?(this.V1a(),(i=this.K5(r,this.Kd,t)).Pg=void 0,i.tCa(void 0,void 0,!0),this.Ewb(this.Kd),this.KM(i,this.Kd)):this.V1a(!0).forEach(function(t){t.xd(),n.bea(t),n.rj.remove(t)}),r===this.Ei.G&&(this.Ei.mz.shift(),i&&(i.mz=this.Ei.mz,i.Cl=this.Ei.Cl)),this.Qi.v6(r,this.Kd.bf),this.Kd.T9=void 0):this.Qb("findSegment no segment for manifestIndex:",e)},o.prototype.Wab=function(t,e){var i=t.G;e=e||i.cX,t.Cl||(t.Cl=e,t.kz(!0,this.Bb.U,!0)),(e=t.children[t.Cl])&&this.KM(e,t)},o.prototype.xib=function(t,e){if(this.Kd!==t){if(e)for(e=this.Kd;e&&e!==t;)e.active=!1,this.rj.remove(e),e=e.Pg;this.Kd=t}},o.prototype.Ow=function(t,e){var i,n,r,a,o=this;this.ty&&(i=this.K,r=(n=this.Ei).G,a=d.jac(r.id),!n.Cl&&!r.Hw&&n.Ic-e<=i.LF&&(this.Qb(a+"updatePts making fork decision at playerPts:",t,"contentPts:",e),this.Wab(n))),s.Uf.forEach(function(t){o.Kd.uc(t)&&o.rh[t].Ow()})},o.prototype.k3b=function(t,e){var i,n;this.ty&&(i=this.eV,this.K.vXb&&t&&this.Pma&&t.ea===this.Pma||(t=t.Va.$a,i&&t.G.id===i.G.id)||(n=null==(n=null==i?void 0:i.fe(s.u.J))?void 0:n.ue,this.Pma=null==n?void 0:n.ea,this.eV=t,this.axb(i),i=i&&i.pIb(t),this.Qi.cAb(t.G,e,i)))},o.prototype.Eca=function(t,e,i){e.Ml||(e.ea=this.b7a(t,e.ea,!0),i||(e.Qa=this.b7a(t,e.Qa,!1)),e.Ml=!0)},o.prototype.IS=function(t,i){var e=this.Ph[t];e?l.Nf(e.mm,function(t,e){t.weight=i[e]||0}):this.Qb("updateChoiceMapEntry, unknown segment:",t)},o.prototype.b7a=function(t,e,i){return(t=i?t.t4a(e):t.JX(e)).length?(e=t[s.u.J],i?e.ea:e.Qa):e},o.prototype.VVa=function(t,e,i){var n=e?i.Ic:i.gf;return(e?i.Fea:i.Qza)<=t&&t<n},o.prototype.kVa=function(t,e,i){for(var n,r=this.Bb,a=this.Kd;a;){if((!l.Oa(i)||r.Qva(i,a.T.Ub))&&this.VVa(t,e,a))return a;a=a.Pg}if(e)for(var a=Object.keys(this.Kd.children),o=0;o<a.length;o++)if(n=this.Kd.children[a[o]],(!l.Oa(i)||r.Qva(i,n.T.Ub))&&this.VVa(t,e,n))return n},o.prototype.Axb=function(t,r){var a=this.K5(t,r),o=a.tCa(r,void 0,this.K.LAa);return s.Uf.forEach(function(t){var e,i,n;a.uc(t)&&(e=a.fe(t),i=r.fe(t),n=o[t],t===s.u.J&&a.Qq(u.M.Ja(i.Fc+r.bf-n)),e.hL(n))}),this.Qi.v6(t,a.bf),a},o.prototype.Ewb=function(t){for(var e=[t.G.id];t.Pg;)t=t.Pg,e.unshift(t.G.id);this.cla(t)},o.prototype.cla=function(t){var e=this,i=t.G;l.Nf(t.children,function(t){t&&e.cla(t)}),this.rj.remove(t),t.xd(),this.bea(t),this.Qi.Cma(i)},o.prototype.KM=function(n,t){var r,a,o=this,e=t.G;t.T!==n.T&&this.Bb.iWa(n.T.Ub),n.active=!0,this.rj.enqueue(n),n.fO(),r=h.default.time.ia(),a={},l.Nf(t.children,function(t){var e,i;t&&(t.Ge&&(e=t.fe(s.u.P),i=t.fe(s.u.J),t.Ge.qE=[e?e.Fo.W:0,i?i.Fo.W:0],t.Ge.UNb=r-t.Ge.Aaa,t.Ge.Aaa=void 0,a[t.G.id]=t.Ge),t.G.id!==n.G.id&&o.cla(t))}),t.children=Object.create(null),t.children[n.G.id]=n,t.XM=void 0,this.xib(n),this.Qi.aAb(n.G,a),1<Object.keys(e.mm).length&&n.Cpa()},o.prototype.axb=function(t){var e,i;t&&(e=h.default.time.ia(),(i=t.mz[0])&&void 0===i.U8?i.U8=e-i.ps:i||(this.Qb("missing metrics for branch:",t.G.id),i={$ea:t.G.id,Je:!0,U8:0,Ge:{}},t.mz.unshift(i)),void 0===i.startTime&&(i.startTime=e))},o.prototype.hyb=function(t,e){var i,n,r,a,o;for(o in p.assert(0<=t),this.Ph)if(i=this.Ph[o],this.Bb.Qva(i.T.Ub,e)){if(i.ea<=t&&(1/0===i.Qa||void 0===i.Qa||t<i.Qa))return i;n=Math.min(Math.abs(t-i.ea),Math.abs(t-i.Qa)),(l.sa(r)||n<r)&&(r=n,a=i)}return a},o.prototype.kA=function(t,e,i,n,r,a,o,s,u){return e=new c.gSa(t,e,i,n,r,a,o,s,void 0,u),this.Ph[t]=e},o.prototype.zAb=function(s,t,u){var c,h,f=this;this.Lp=void 0,this.W6=[],h=c=null,l.Nf(t.segments,function(i,t){var e,n,r=i.startTimeMs,a=i.endTimeMs,o={};l.Nf(i.next,function(t,e){o[e]={weight:t.weight||0,Pec:t.transitionHint||i.transitionHint,Voc:("number"==typeof t.earliestSkipRequestOffset?t:i).earliestSkipRequestOffset}}),e=i.defaultNext,l.sa(e)&&(e=Object.keys(o)[0]),n=l.sa(e),e=f.kA(t,s,r,a,e,o,n,i.exitZones,i.transitionHint),r<=u&&(u<a||l.sa(a))?f.Lp=e:u<r&&(!c||r<h)&&(c=t,h=r),n&&f.W6.push(e)}),this.Lp||(this.Lp=c?this.Ph[c]:this.Ph[t.initialSegment])},o.prototype.K5=function(t,e,i){var n=t.T,r=this.Bb.Uh(n.Ub),a=r.zy,o=[];return[s.u.P,s.u.J].forEach(function(t){n.uc(t)&&o.push(r.Or(t))}),t=new b.ULa(this.Bb,this.K,this.Qi,this.H,this,this.Y5,this.NWa,this.EN,t,o,a,e,i?u.M.Ja(i):void 0,this.ZX,this.Bb.rh,this.Bb.Ex),this.Gwb(t),this.mi.push(t),t},o.prototype.Gwb=function(t){var e;function i(t){e.Bb.emit(t.type,t)}e=this,t.addListener("locationSelected",i),t.addListener("logdata",i),t.addListener("serverSwitch",i),t.addListener("streamSelected",i),t.addListener("lastSegmentPts",i),t.addListener("managerdebugevent",i),t.addListener("requestCreated",function(t){t=t.request,e.Bb.bna(t.mediaType,t.ea)})},o.prototype.jyb=function(t){for(var e=[t];t.Pg;)t=t.Pg,e.push(t);return e},e.fha=i=o},function(t,e,i){var E,k,S,T;function u(t,e,i){this.ZF=e,this.km=i,this.NC=this.VY=this.vza=this.Deb=this.Ceb=this.$Q=this.Pc=this.p6b=this.km=this.Zn=this.Fc=this.ea=this.xu=this.wp=this.da=this.v9a=this.qW=void 0}function I(t,e,i){this.Qa=e,this.k$a=i,this.cZa=this.pnb=this.Xs=this.wp=this.ZJ=this.by=void 0}function n(t,n,e,i,r,a,o){var s=new u(0,n,t.km);t.forEach(function(t){var e=t.buffer,i=e.da;t.mediaType===k.Sd.P?s.qW=i.length?i[0].bitrate:void 0:t.mediaType===k.Sd.J&&(s.v9a=i.length?i[0].bitrate:void 0,s.da=i,s.wp=e.Tk-e.tc,s.xu=e.Ag,s.ea=e.tc,s.Fc=e.Fc,s.Zn=t.ee,s.km=t.km,s.p6b=n-t.km,s.Pc=t.Pc,s.$Q=i.filter(function(t){return s.ea<=t.Wy}).length)}),this.wk=s,this.wv=void 0,this.a2a=i,this.cz=r,this.ZZa=a,this.IAa=this.Wda=this.Udb=this.TC=this.YN=this.p4a=this.uz=this.Pc=this.wv=void 0,this.MDb=o,this.Vza={}}E=i(0),k=i(28).default,S=i(32).assert,T=i(6).za,u.prototype.constructor=u,I.prototype.constructor=I,(n.prototype.constructor=n).prototype.dJ=function(t,e){var i,n,r,a,o,s,u,c,h,f,l,d,p,b,g,m=this.wk,v=[],y=t[k.Sd.J],w=t[k.Sd.P];if(void 0===y||void 0===w)return!1;if(i=y.buffer,n=w.buffer,r=m.Pc.filter(function(t){return t.w$()}),void 0===i||void 0===n||void 0===r||0===r.length)return!1;a=new I(e&&T[e],y.tc,e===T.eg),h=m.ea,t=t[k.Sd.J].tc;for(var A=m.da,_=m.$Q,E=c=u=s=o=0;E<_;E++)l=(f=A[E]).offset,d=f.offset+f.fa-1,p=f.sn,g=(b=f.xC)+p,f&&b<=t&&h<g&&(p=f.sn,c+=b=Math.min(p,Math.min(t,g)-Math.max(b,h)+1),o+=b/p*(d-l+1),s+=f.bitrate*b,u+=f.eb*b);return m.Ceb=o,m.Deb=c,m.vza=0<c?s/c:0,m.M5b=0<c?u/c:0,m.VY||(m.VY=0,r.some(function(t,e){if(t.bitrate===m.v9a)return m.VY=e,!0})),r.forEach(function(t){var e,i;t=t.w$(),e=[],m.NC||(m.NC=t.No(m.ea,void 0,!0)),a.by||(a.by=t.No(a.Qa,void 0,!0),a.ZJ=t.length-1),m.Zn!==m.NC+m.$Q&&(m.Zn=m.NC+m.$Q),_=Math.min(a.ZJ,a.by+1);for(var n=m.NC;n<=_;n++)i=t.get(n),e[n]=i;v.push(e)}),e===T.eg&&(a.wp=i.Tk-i.tc,a.Xs=n.Tk-n.tc,a.pnb=y.tgb,a.cZa=w.tgb),this.wv=a,this.Pc=r,this.uz=v,this.p4a=!0},n.prototype.CB=function(){var e,t,i,n,r,a,o,s,u,c,h,f,l,d,p,b,g,m;if(this.ik)return this.ik;if(i=this.TC,n=this.wk,r=this.wv,a=this.Pc,o=this.Udb,s=this.MDb,S(void 0!==i,"throughput object must be defined before retrieving the logdata from PlaySegment"),(i.trace&&0===i.trace.length||void 0===i.timestamp)&&(c=r.k$a?!(u=!1):r.by-n.NC+1<=n.$Q?u=!0:!(u=!0),h=!0),o)for(var v=o.Haa,y=o.qP,w=0;w<s.length;w++)(i=o[f=s[w]])&&i.tya&&(c=!0);if(r={bst:n.km,pst:n.ZF,s:n.NC,e:r.by,prebuf:n.$Q,brsi:n.Zn,pbdlbytes:n.Ceb,pbdur:n.Deb,pbtwbr:n.vza,pbvmaf:n.M5b},this.cz&&(r.fragmentsPrebuffered=n.da),h&&(r.nt=h),c&&(r.nd=c),v&&(r.invalid=v),y&&(r.exception=y),this.IAa&&(r.rr=this.IAa),this.Wda&&(r.ra=this.Wda),c||v||y||!this.a2a&&!this.cz||(r.bitrate=a.map(function(t){return t.bitrate}),f=(i=this.TC).trace,l=[],p=0,f.forEach(function(t){t=Number(t).toFixed(0),l.push(t-p),p=t}),r.tput={ts:i.timestamp,trace:l,bkms:i.SA}),c||h||v||y)r.feasible=u;else for(r.sols={},r.elapsed=o.oOb,w=0;w<s.length;w++){if(c={},(i=o[f=s[w]])&&i.ys&&(c.algelapsed=i.LDb,c.maxHeapTotal=i.aC,c.f=i&&i.Kt||!1,c.dltwbr=i.K2a,c.dlvmaf=i.N2a,c.dlvdur=i.M2a,c.dlvbytes=i.L2a,c.dlabytes=i.I2a,(this.a2a||this.cz)&&(d=i.ys.filter(function(t){return t}).map(function(t){return t.Ke}),p=0,b=[],d.forEach(function(t){b.push(t-p),p=t}),c.strmsel=b),this.cz)){h=[],u=this.wk.Zn;try{e=void 0;for(var A=E.__values(d),_=A.next();!_.done;_=A.next())g=_.value,(m=this.uz[g][u]).cg=g,h.push(m),u++}catch(t){e={error:t}}finally{try{_&&!_.done&&(t=A.return)&&t.call(A)}finally{if(e)throw e.error}}c.fragsel=h,c.streamList=this.Pc,c.pause_dlnd_sec=i.ys.filter(function(t){return t}).map(function(t){return t.sza}),c.buffer_sec=i.ys.filter(function(t){return t}).map(function(t){return t.Uoa}),c.buffer_kb=i.ys.filter(function(t){return t}).map(function(t){return t.Toa}),c.buffer_frags=i.ys.filter(function(t){return t}).map(function(t){return t.d_a}),c.elapsed_secs=i.ys.filter(function(t){return t}).map(function(t){return t.j3a}),c.throughput=i.ys.filter(function(t){return t}).map(function(t){return t.Xa})}r.sols[f]=c}return this.ik=r},n.prototype.OQb=function(t){var e;if(void 0!==this.Vza[t])return this.Vza[t];for(var i=this.uz[this.wk.VY],n=0;n<i.length;n++)if((e=i[n])&&e.ea<=t&&e.ea+e.duration>t)return this.Vza[t]=e;throw Error("findPlayingFragment: missing")},t.exports=n},function(t,e,i){var o,s;function n(t,e,i){this.fa=t,this.Un=e,this.quality=i}function c(t,e){void 0===(this.sxa=e)&&(this.sxa=!0),this.ln=t,this.Swb()}o=i(0),s=i(2).assert,(n.prototype.constructor=n).prototype.FB=function(){return 8*this.fa/1e3/this.Un},(c.prototype.constructor=c).prototype.si=function(t,e,i,n,r){void 0===e&&(e=0),void 0===i&&(i=t.TP()),void 0===r&&(r=t.ln.length);for(var a,o=[],s=n=void 0===n?0:n;s<r;s++){n=[];for(var u=e;u<i;u++)a=t.ln[s][u],n.push(a);o.push(n)}return new c(o,t.sxa)},c.prototype.Swb=function(){var t,e,i=this.ln[0].length;try{for(var n=o.__values(this.ln.slice(1)),r=n.next();!r.done;r=n.next())e=r.value,s(e.length===i,"expect chunk.length === n but got "+e.length+" and "+i)}catch(t){var a={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}this.sxa&&this.Twb(),this.Uwb()},c.prototype.TP=function(){return this.ln[0].length},c.prototype.Twb=function(){for(var t=0;t<this.ln.length-1;t++)for(var e=0;e<this.TP();e++)s(this.ln[t][e].fa<=this.ln[t+1][e].fa,"Chunk size for epoch "+e+" is not monotonic")},c.prototype.Uwb=function(){for(var t=0;t<this.ln.length-1;t++)for(var e=0;e<this.TP();e++)s(Math.abs(this.ln[t][e].Un-this.ln[t+1][e].Un)<1e-8,"Chunk duration for epoch "+e+" is not consistent")},c.prototype.QVb=function(){var e=[];return this.ln[0].forEach(function(t){e.push(t.Un)}),e},t.exports={Lpb:n,Mpb:c}},function(t,e,i){var n;function r(){}function a(t,e,i){void 0===i&&(i=!1),n(t.length===e.length,"bitrates_kbps and durations_sec must be of the same length."),n(1e-8<t.reduce(function(t,e){return t+e},0),"bitrate zero, won't be able to send anything."),this.oE=t,this.d3a=e,this.repeat=i,this.qn=this.cq=0}n=i(2).assert,r.prototype=Error(),(a.prototype.constructor=a).prototype.si=function(){var t=new a(this.oE,this.d3a,this.repeat);return t.cq=this.cq,t.qn=this.qn,t},a.prototype.Cua=function(){return this.oE[this.cq%this.oE.length]},a.prototype.iF=function(){return this.d3a[this.cq%this.oE.length]},a.prototype.QNb=function(t){if(n(0<t,"expect x_sec > 0.0"),!(this.repeat||0<=this.cq&&this.cq<this.oE.length))throw new r;n(this.qn<this.iF(),"expect this.cur_pos_sec_in_bin < this.get_curr_duration_sec()");for(var e;t-=e=t<(e=this.iF()-this.qn)?t:e,this.qn+=e,!(this.qn<this.iF());)if(this.qn-=this.iF(),this.cq+=1,!this.repeat&&this.cq>=this.oE.length){if(0<t)throw new r;break}},a.prototype.Aeb=function(t){this.QNb(t)},a.prototype.RNb=function(t){if(n(0<t,"expect y_kb > 0.0"),!(this.repeat||0<=this.cq&&this.cq<this.oE.length))throw new r;n(this.qn<this.iF(),"expect this.cur_pos_sec_in_bin < this.get_curr_duration_sec()");for(var e,i=0;;){if(e=t<(e=this.iF()-this.qn)*this.Cua()?t/this.Cua():e,t-=this.Cua()*e,i+=e,this.qn+=e,this.qn<this.iF())return i;if(this.qn-=this.iF(),this.cq+=1,!this.repeat&&this.cq>=this.oE.length){if(0<t)throw new r;return i}}},t.exports={hwb:a,iwb:r}},function(t,e,i){var y,s,c,n,u,w,A,_,E,k,l,S,d,p,b;function r(t,e,i,n,r,a,o,s,u,c,h){var f=this;this.H=t,this.qh=e,this.K=i,this.uc=n,this.U=r,this.XR=a,this.bc=o,this.Jb=s,this.Kg=u,this.X7=c,this.$H=h,this.P6=[],this.gna=[],this.sWa=[],this.BUa=void 0,[A.u.P,A.u.J].forEach(function(t){f.uc(t)&&(f.P6[t]=new b(f.H,t),f.gna[t]=new d(t),f.sWa[t]=new p(t))}),this.$mb=new l.xH(this.H),this.aD=l.EE(this.K,this.$mb),this.voa=l.DE(),this.JH=void 0}function a(t){this.mediaType=t,this.zW=this.fy=this.NB=this.hv=this.OB=void 0}_esm(e),e.Xvb=e.aja=e.Zvb=e.ISa=void 0,t=i(0),y=t.__importStar(i(11)),s=t.__importDefault(i(3)),c=t.__importDefault(i(32)).default.OJ,n=t.__importStar(i(8)).ai,u=t.__importDefault(i(449)),w=i(434),A=i(77),_=i(6),E=i(22),k=i(2),l=i(104),S=i(266),Object.defineProperties(r.prototype,{bg:{get(){return this.P6},configurable:!0},OC:{get(){return this.gna},configurable:!0},Fy:{get(){return this.sWa},configurable:!0},QA:{get(){return this.BUa},set(t){this.BUa=t},configurable:!0}}),r.prototype.ws=function(t,e){this.$mb.ws(t,e)},r.prototype.rxa=function(t){var e=this.K,i=t.mediaType,n=s.default.oq()[i],r=e.mgc?i===A.u.P?e.fW:e.V1:i===A.u.J?e.fW:e.V1,a=this.U.getState(),o=this.U.Qe(),e=t.Va.$a,n={pt:n,ea:(i=this.X7.Xab(e,i)).ud,tc:o,Fc:i.nR||o,Tk:i.LW||o,Ag:i.Ag,Gj:i.Gj,lp:i.lp,Z4a:i.da.length,da:[]};return void 0===(r={state:a,Wr:this.U.Wr(),ee:t.zm,buffer:n,oX:r,Lab:!!this.XR.Cba,bP:!!this.XR.du,tj:this.bc&&this.bc.tj,Xda:t.dVb,playbackRate:this.U.pq()}).ee&&(r.ee=t.nsa(n.Fc)),r.xW=e.xW,n.da=i.da,y.Oa(n.ea)?t.seeking&&n.tc!=n.ea&&(n.tc=n.ea):(n.ea=0,n.Fc=0),this.qh.lHb(r),this.qh.kDb(r),r},r.prototype.Bpa=function(t,e,i){for(var n,r,a=(t=this.P6[t]).maxBitrate,o="manifest",s=0,u=e.length-1;0<=u;u--){if(r=(n=e[u]).bitrate,c(n)){s=Math.max(s,r);break}this.K.j1&&!n.Ev?o="bc":n.Ur?n.HB&&(o="hf"):o="av"}void 0!==a&&s===a||(t.maxBitrate=s,this.Jb.f3b(a,s,o,i))},r.prototype.bVb=function(t){return this.oua(t).cg},r.prototype.oua=function(t){var e,i,n,r,a,o,s,u,c,h,f,l,d=this.K,p=t.mediaType,b=p==A.u.J,g=0,m=this.P6[p],v=this.gna[p];if(!m.Te)return{cg:void 0};if(e=this.rxa(t),n=(i=t.ve).um,r=t.tba.T,a=t.track.Pc,!r.Jl.N1(r.N,a))return t.Ik("location selector did not find any urls"),{cg:void 0};o=S.xda(e.state),s=b?this.aD:this.voa;try{u=s.un(a,o)}catch(t){this.H.error("StreamFilters: filterStreams: "+t),u=[a[0]]}if(0===u.length&&(this.H.error("StreamFilters: empty list"),u=[a[0]]),this.$H.zt&&(t.YE.length!==u.length||0<E.cv(t.YE,u).length||0<E.cv(u,t.YE).length)){try{this.JH&&this.AQb()}catch(t){this.Jb.fp("Hindsight: Error when handling maxbitrate chagned: "+t)}t.YE=u}o=n?n.cg:m.Gsa;try{n&&(g=n.bitrate,n&&i.track&&!n.track.equals(i.track))&&(c=u[w.psa(u,g)||0],n.bitrate===c.bitrate&&p!==A.u.J||(e.state=_.za.Dg),n=c,o=a.indexOf(c))}catch(t){this.H.error("StreamFilters: track change: "+t)}if(!b&&(!((g=d.sS)&&0<g.length)&&o&&a[o]&&n&&n.location===a[o].location))return{cg:o};n=this.qh;try{if(h=n.IP(p),f=b?n.XX():n.EY(),!(l=t.Pj.bCa(e,u,f,h,m.Te.config.Tt,r.Kr)))return t.Ik("stream selector did not find a stream"),{cg:void 0}}catch(t){this.H.error("StreamFilters: stream selector: "+t),l={Ke:0}}if(l.Ke=a.indexOf(u[l.Ke]),this.XR.du&&this.XR.du.pDb(t.mediaType,l,a),b&&this.Bpa(p,u,t.Fc),h=(u=a[e=l.Ke]).bitrate,e!=o&&(b&&d.dP&&this.Kg.rUa(t,h),b?n.iL(h):n.gz(h)),y.Oa(m.Gsa)||(m.Gsa=e),t.cf||(l.cf?(k.assert(void 0!==l.Y7),t.Lea(l.Y7),v.hv=l.Y7):(t.EF=l.EF,t.SK=l.SK,t.progress=l.progress)),this.jA(),b)if(l.nB)r.YR(l.nB);else if(!r.caa()&&!d.xjb)for(t=0;t<a.length;++t)if((d=a[t]).Yv&&!r.mq(p,d.Pa)){r.YR([d.Pa]);break}return l.wZa&&this.Jb.m3b(l.wZa),{Pa:u.Pa,cg:e,Ky:l.Ky}},r.prototype.jA=function(){var t=this.bg[A.u.P],e=this.bg[A.u.J],i=this.OC[A.u.J],n=this.OC[A.u.P];return(t=this.X7.Yc.cHb(null!=(e=null==e?void 0:e.rw)?e:0,null!=(e=null==t?void 0:t.rw)?e:0,this.QA,this.XR.Q_)).hv&&(this.XR.fo&&i?i.hv=t.hv:n&&(n.hv=t.hv)),t.cf},r.prototype.ksa=function(n,t){var e,r,a,o=this;if(this.JH)return e=this.JH,r=this.U.Qe(),a=[],t&&(r=t.Qa),A.Uf.forEach(function(t){var e,i=o.X7.Yc.fe(t);i&&((e=o.rxa(i)).mediaType=t,e.tc=r,n===_.za.eg&&(e.tgb=i.Va.doa(r)),a[t]=e)}),e.p4a||e.dJ(a,n)||this.nBa(),e},r.prototype.AQb=function(){var t=this.JH,e=this.K;t&&(this.ksa(void 0),t&&!t.YN&&this.qh.AAa.Rra(t)),this.r1a(e)},r.prototype.nBa=function(){this.JH=void 0},r.prototype.Qfc=function(t){var e,i,n=t.oldValue;t=t.newValue,e=this.JH,i=this.K,t===_.za.Gc&&n!==_.za.Gc?(e&&this.H.warn("override an existing play segment!"),this.r1a(i,n,!0)):t!==_.za.Gc&&n===_.za.Gc&&e&&(this.ksa(t),e&&!e.YN&&this.qh.AAa.Rra(e),this.nBa())},r.prototype.r1a=function(t,e,r){var i,a=this,o=[];A.Uf.forEach(function(t){var e,i,n=a.X7.Yc.fe(t);n&&(e=a.rxa(n),r?(i=a.bg[t]).XCa?(e.km=i.XCa,i.XCa=void 0):e.km=i.km:e.km=s.default.time.ia(),e.Pc=n.YE,e.mediaType=t,o[t]=e)}),i={rnc:(i=s.default.oq())[A.u.P],Ymb:i[A.u.J],Kqc:t.Hbb,cw:t.cw},this.JH=new u.default(o,s.default.time.ia(),e,this.$H.vX,t.cz,i,t.laa)},e.ISa=i=r,a.prototype.Ufc=function(t,e,i){this.OB=t||this.OB,this.hv=this.hv,this.NB=e||this.NB,this.fy=i||this.fy},d=a,e.Zvb=d,p=function(t){this.mediaType=t,this.Ewa=this.Lwa=this.Gwa=this.UJ=void 0},e.aja=p,b=function(t,e){this.mediaType=e,this.H=n(s.default,t,"["+e+"]"),this.Ik=this.H.error.bind(this.H),this.Qb=this.H.warn.bind(this.H),this.Xj=this.H.trace.bind(this.H),this.hg=this.H.log.bind(this.H),this.H.debug.bind(this.H),this.Gsa=this.km=this.Wp=this.Te=void 0,this.R_=this.rw=0,this.TS=!1,this.maxBitrate=void 0},e.Xvb=b},function(t,e,i){var S,f,l,d,p,T,n,s,u,I,b,g,m;function O(){}function r(r,t){var a,o,s,e,i,n,u,c,h=S.gd(t)?t:O;this.K=r||{},function(t,e,i){this.Kk[t].af[e]=i}.bind(this),function(t,e){return this.Kk[t].af?this.Kk[t].af[e]:void 0}.bind(this),this.on=this.addEventListener=g.addEventListener,this.removeEventListener=g.removeEventListener,this.emit=this.gb=r.Zoc?g.gb:O,a=d.KKb(r),o=this.K.dailyDiskCacheWriteLimit,a?(this.wx=a,e=r.Sqc||m,i=d.YSb(),n={},u=e.partitions.reduce(function(t,e){return t+e.capacity},0),c=i/u,e.partitions.map(function(t){var e=t.key;n[e]={},n[e].pt=Math.floor(c*t.capacity),n[e].QLb=t.dailyWriteFactor||1,n[e].wrc=t.owner,n[e].GPb=t.evictionPolicy}),s=n,this.GA=function(t){return!S.sa(s)&&null!==s&&void 0!==this.Kk[t]&&!S.sa(s[t])},s?(this.Kk={},t=f.Promise.all(Object.keys(s).map(function(e){return new f.Promise(function(i,n){var t=s[e];t.Gmb=r.Gmb,new p(e,a,t,function(t,e){t?n(t):i(e)},o)})})).then(function(t){return t.map(function(t){var e=t.Dx;this.Kk[e]=t,s[e].zRb=s[e].pt-t.FA,this.Kk[e].on(p.We.REPLACE,function(t){(t=t||{}).partition=e,t.type="save",this.gb("mediacache",t)}.bind(this)),this.Kk[e].on(p.We.fUa,function(t){(t=t||{}).partition=e,t.type="save",this.gb("mediacache",t)}.bind(this)),this.Kk[e].on(p.We.Jf,function(t){(t=t||{}).partition=e,t.type=p.We.Jf,this.gb("mediacache-error",t)}.bind(this))}.bind(this)),this}.bind(this)).then(function(t){var i,n,r;return i=a,n=f.storage.dU,r=Object.keys(s),i.query(n,"",function(t,e){t||Object.keys(e).filter(function(t){return r.indexOf(t.slice(0,t.indexOf(".")))<0}).map(function(t){i.remove(n,t,O)})}),t}.bind(this)).then(function(i){Object.keys(i.Kk).map(function(e){i.Kk[e].vta().map(function(t){i.delete(e,t)})}),i.Vv=!0,h(null,i)}.bind(this)).catch(function(t){l.error("Failed to initialize media cache ",t),this.IJ=I.VHa,h(this.IJ,this)}.bind(this)),b.Vy(t)):(this.IJ=I.Esb,h(this.IJ,this))):(this.IJ=I.VHa,h(this.IJ,this))}function c(t,e,i,n,r,a){var o=a?"mediacache-error":"mediacache";e={partition:i,type:e,resource:n,time:f.time.now()},a&&(e.error=a),r&&(S.Oa(r.duration)&&(e.duration=r.duration),S.Oa(r.VA)&&(e.bytesRead=r.VA));try{t.gb(o,e)}catch(t){l.warn("caught exception while emitting basic event",t)}}function h(t,e,i,n,r){var a=r?"mediacache-error":"mediacache";e={partition:i,type:e,resources:n,time:f.time.now()},r&&(e.error=r);try{t.gb(a,e)}catch(t){l.warn("caught exception while emitting basic event",t)}}function a(t){return!T.jQ(t)&&!s.VYb(t)}function o(r,t,i){var n,a;function o(e){r.delete(n,function(t){t?i(t):(delete r.af[a],t=Object.keys(e.resourceIndex),t=f.Promise.all(t.map(function(n){return new f.Promise(function(e,i){r.delete(n,function(t){t?i(t):e(n)})})})).then(function(){i()},function(t){i(t)}),b.Vy(t))})}a=T.jQ(t)?(n=t,T.z9(t)):(n=T.wqa(t),t),(t=r.af[a])?o(t):r.read(n,function(t,e){t?i(t):o(e)})}function x(t,e,i){return i?s.wNb(t,e).reduce(function(e,i){return Object.keys(i).map(function(t){e[t]=i[t]}),e},{}):((i={})[t]=e,i)}S=i(11),f=i(133),l=new f.Console("MEDIACACHE","media|asejs"),d=i(1054),p=i(1055),T=i(454),n=i(134),s=i(1062),u=i(1063),I=i(272),b=i(273),g=i(455).EventEmitter,m={Brc:[]},r.prototype.h0=function(t,e,i){var n=S.gd(i)?i:O;this.GA(t)?this.Kk[t].query(e,function(t,e){t?(l.error("Failed to query resources",t),n([])):n(e.filter(a))}):n([])},r.prototype.read=function(n,r,t){var e,a,i,o=S.gd(t)?t:O;this.GA(n)?(e=this.Kk[n],a=e.af[r],!T.jQ(r)&&this.K.z1b?(i=function(t){e.Tda(Object.keys(t),function(t,e,i){t?o(I.AM.Ds("Failed to read "+r,t)):(c(this,"read",n,r,i),o(null,s.pYb(e)))}.bind(this),t)}.bind(this),a?i(a.resourceIndex):this.s8b(n,r,function(t,e){t?o(I.AM.Ds("Failed to read "+r,t)):i(e.resourceIndex)})):e.read(r,function(t,e,i){t?o(I.AM.Ds("Failed to read "+r,t)):(a&&a.convertToBinaryData&&(e=u.LIb(e)),c(this,"read",n,r,i),o(null,e))}.bind(this))):o(I.tD)},r.prototype.Tda=function(t,e,i){var a,n=S.gd(i)?i:O;this.GA(t)?(a={},e=f.Promise.all(e.map(function(r){return new f.Promise(function(i,n){this.read(t,r,function(t,e){t?((e={})[r]=t,n(e)):(a[r]=e,i())})}.bind(this))}.bind(this))).then(function(){n(null,a)},function(t){n(t)}),b.Vy(e)):n(I.tD)},r.prototype.Phb=function(a,o,t){var r=S.gd(t)?t:O;this.GA(a)?"[object Object]"!==Object.prototype.toString.call(o)?r(I.r5.Ds("items must be a map of keys to objects")):(t=new f.Promise(function(t){var e=this.Kk[a].vta(),i=Object.keys(o);(e=e.filter(function(t){return-1===i.indexOf(t)}))&&0<e.length?this.t2a(a,e,function(){t()}):t()}.bind(this)).then(function(){return f.Promise.all(Object.keys(o).map(function(r){return new f.Promise(function(i,n){this.save(a,r,o[r].qs,o[r].Ec,function(t,e){t?(l.error("Received an error saving",r,t),n(t)):i(e)},!0)}.bind(this))}.bind(this)))}.bind(this)).then(function(t){var i,n,e;try{i=Number.MAX_VALUE,n=Number.MAX_VALUE,e=t.reduce(function(t,e){return e.Oo&&e.Oo<i&&(i=e.Oo),e.LO&&e.LO<n&&(n=e.LO),i<Number.MAX_VALUE&&(t.freeSize=i),n<Number.MAX_VALUE&&(t.dailyBytesRemaining=n),S.Oa(e.zl)&&(t.bytesWritten+=e.zl),S.Oa(e.duration)&&(t.duration+=e.duration),t},{partition:a,type:"saveMultiple",keys:Object.keys(o),time:f.time.now(),bytesWritten:0,duration:0}),this.gb("mediacache",e),r(null,e)}catch(t){r(err)}}.bind(this),function(t){S.isArray(t.EYa)?t.EYa.forEach(function(t){this.gb("mediacache-error",{partition:a,type:"saveMultiple",error:t.error,resources:t.resources})}.bind(this)):this.gb("mediacache-error",{partition:a,type:"saveMultiple",error:t}),r(t)}.bind(this)),b.Vy(t)):(S.gd(t)?t:O)(I.tD)},r.prototype.save=function(d,p,b,g,t,m){var v,y,w,e,i,A,_,E,k=S.gd(t)?t:O;this.GA(d)?(v=this.Kk[d],y=T.wqa(p),t=(t=v.vta()).filter(function(t){return t!==p}),S.sa(g)||S.xb(g)||!S.Oa(g.lifespan)?k(I.ftb):(w=x(p,b,this.K.z1b),(i=(e=v.af[p]||{}).resourceIndex)&&Object.keys(i).map(function(t){S.sa(w[t])&&v.delete(t)}),g.convertToBinaryData&&(b=u.MIb(w),w=x(p,b,!1)),i=f.time.now(),(A={}).partition=d,A.resourceIndex=Object.keys(w).reduce(function(t,e){return t[e]=n.zua(w[e]),t},{}),A.creationTime=e.creationTime||i,A.lastRefresh=i,A.lifespan=g.lifespan,A.lastMetadataUpdate=i,A.size=e.size,A.convertToBinaryData=g.convertToBinaryData,_=function(i,n,r){i.OMb(function(t,e){t&&l.error("Evicting","Failed to delete some orphaned records",t),e.NAa?r():(t=i.iTb())?this.delete(i.Dx,t,function(t){t?(m||(S.isArray(n)?n.forEach(function(t){h(this,"save",i.eUb,t.resources,t.error)}.bind(this)):c(this,"save",i.Dx,p,void 0,n)),k(n)):r()}.bind(this)):k(I.WL)}.bind(this))}.bind(this),E=function(){var t=this.Kk,e=0,i=f.time.now();if(!S.sa(t))for(var n in t)e+=t[n].ySb(i);return e}.bind(this),this.t2a(d,t,function(){v.replace(y,A,function(t,e){var i,n,r,a,o,s,u,c,h,f,l;e?(v.af[p]=T.Rsa(A),v.I9b(w,(i=w,n=d,r=p,a=b,o=g,s=k,c=y,h=this,f=v,l=_,function(t,e){t?S.isArray(t)?(e=t.map(function(t){return t.error})).some(function(t){return t.code===I.WL.code})&&!e.some(function(t){return t.code===I.s5.code})?l(f,t,function(){h.save(n,r,a,o,s,u)}):(f.delete(c),delete f.af[r],s({error:t[0].error,nw:t[0].nw,type:t[0].type,EYa:t})):s({error:t,nw:n,type:"save"}):(t=e.items.filter(function(t){return 0<=Object.keys(i).indexOf(t.key)}).reduce(function(t,e){return t+e.eba},0),f.af[r].Tib(t),t={zRb:e.Oo,uoc:e.LO,zl:0,items:e},0<e.zl&&(t.zl=e.zl),0<e.duration&&(t.duration=e.duration),s(null,t))}),u=m,E)):t.code===I.WL.code?_(v,t,function(){this.save(d,p,b,g,k,m)}.bind(this)):k(t)}.bind(this),m,E)}.bind(this)))):k(I.tD)},r.prototype.delete=function(e,i,t){var n=S.gd(t)?t:O;this.GA(e)?o(this.Kk[e],i,function(t){c(this,"delete",e,i,void 0,t),n(t)}.bind(this)):n(I.tD)},r.prototype.t2a=function(s,e,t){var n,u=S.gd(t)?t:O;this.GA(s)?(n=this.Kk[s],t=f.Promise.all(e.map(function(i){return new f.Promise(function(e){o(n,i,function(t){e({ha:S.sa(t),error:t,qs:i})}.bind(this))}.bind(this))}.bind(this))).then(function(t){for(var e,i,n=[],r=[],a=[],o=0;o<t.length;o++)(e=t[o]).ha?n.push(e.qs):e.error&&r.push(e);0<n.length&&h(this,"delete",s,n),0<r.length&&(a=r.map(function(t){return t.qs}),i=(t=b.Z7a(r))[0],t.forEach(function(t){l.error("Failed to delete resources ",t.error,t.resources),h(this,"delete",s,t.resources,t.error)}.bind(this))),(t={}).Xrc=n,0<a.length&&(t.Yrc=a),u(i||void 0,t)}.bind(this),function(t){h(this,"delete",s,e,t),u(t)}.bind(this)),b.Vy(t)):u(I.tD)},r.prototype.clear=function(t,e){var i=S.gd(e)?e:O;this.GA(t)?this.Kk[t].clear(function(t){i(t.filter(a))}):i(I.tD)},r.prototype.s8b=function(t,n,e){var r,a=S.gd(e)?e:O;this.GA(t)?(r=this.Kk[t]).read(T.wqa(n),function(t,e){var i;t?a(I.gtb):(i=T.Rsa(e)||{},r.g7a(Object.keys(i.sBa),function(t){i.size=t,(t=r.af[n])&&(i.lastMetadataUpdate&&t.lastMetadataUpdate&&t.lastMetadataUpdate<=i.lastMetadataUpdate?r.af[n]=i:t.lastMetadataUpdate&&(t.lastMetadataUpdate>i.lastMetadataUpdate||S.sa(i.lastMetadataUpdate))&&(i=t)),a(null,i)}))}):a(I.tD)},t.exports=r.prototype.constructor=r},function(t,e,i){var n,r;function a(t,e,i,n,r,a){return new s(t,e,i,n,r,a)}function o(t){return t&&0<=t.indexOf(".__metadata__")}function s(t,e,i,n,r,a){return this.partition=t,this.lifespan=i,this.resourceIndex=e,this.size=n,this.creationTime=r,this.lastRefresh=a,this.olb()}n=i(11),r=i(133),i(134),new r.Console("MEDIACACHE","media|asejs"),s.prototype.refresh=function(){return this.lastRefresh=r.time.now(),this.olb()},s.prototype.Tib=function(t){this.size=t},s.prototype.H0a=function(){var t=r.time.now();return(this.lastRefresh+1e3*this.lifespan-t)/1e3},s.prototype.olb=function(){return this.lastMetadataUpdate=r.time.now(),this},s.prototype.constructor=s,t.exports={create:a,Rsa:function(t){var e=t;if((e="string"==typeof t?JSON.parse(t):e)&&e.partition&&!n.sa(e.lifespan)&&e.resourceIndex&&e.creationTime&&e.lastRefresh)return t=a(e.partition,e.resourceIndex,e.lifespan,-1,e.creationTime,e.lastRefresh),e.lastMetadataUpdate&&(t.lastMetadataUpdate=e.lastMetadataUpdate),!n.sa(e.size)&&0<=e.size&&t.Tib(e.size),t.H0a(),t.convertToBinaryData=e.convertToBinaryData,t},wqa:function(t){return t+".__metadata__"},z9:function(t){return o(t)?t.slice(0,t.length-13):t},jQ:o}},function(t,e,i){t.exports={EventEmitter:i(1058),Kf:i(1059)}},function(t){t.exports="4.1.2178"},function(t,e,i){var b,g,m;function v(t){return t.qu-t.xt}function y(t,e){return Math.exp(-Math.log(2)/t*e)}function w(t,e){return t=Math.log(2)*e/t,(1-Math.exp(-t))/t}function A(t,e){return t=Math.log(2)/t.ugb,n(e)*Math.exp(-t*v(e))}function n(t){var e;return(null!=(e=t.yJ)?e:1)*t.bi.reduce(function(t,e){var i=e.oF;return t*(e.Je+(void 0===i?0:i))},1)}function _(t){return t.bi.filter(function(t){return!t.oF}).reduce(function(t,e){return t*e.Je},1)}_esm(e),e.mpa=e.z_a=e.vGb=e.y_a=e.zGb=void 0,b=i(6),g=i(2),m=i(10),e.zGb=v,e.y_a=function(t,e,i){var r,n,a,o,s,u,c,h,f,l,d,p;return!t.l9||b.tq(e.Cf)?A(t,e):(r=t.ugb,t=v(e),a=0===(d=e).bi.length?0:(s=0,d.Y_<1&&(s=d.eAa,a=d.dAa,o=null!=(o=d.bi[0].duration)?o:0,s=Math.max(0,Math.min(o,s-(a-o)))),d.bi.reduce(function(t,e){return t+(void 0===(e=e.duration)?0:e)},0)-s),o=_(e),d=r,u=(s=e).eAa,h=s.dAa,c=s.Y_,u=0===s.bi.length?{p7:!1}:(s=(l=s.bi[0]).Je,f=l.oF,l=l.duration,f&&1!==c?(g.assert(l,"duration should be defined when immediate probability is included in probabilities array"),g.assert(0<c,"presenting segment seamless probability cannot be zero"),u<(h-=l)?{p7:!1}:(f=f*(1-(u=c+(h=u-h)/l*(1-c)))/(1-c),d=s*u/c*y(d,l-=h)+f*w(d,l),g.assert(d<=1),{p7:!0,FDb:d})):{p7:!1}),n=u.p7,u=void 0===(u=u.FDb)?1:u,p=e.GC<1?(h=(c=e).sn,f=c.ekb,l=c.GC,d=c.qu,p=c.xt,c=c.G4a,g.assert(void 0!==f),g.assert(void 0!==h),l=1-l,d-=p,c?(h-=c,(p=f-c-d)<=0?c=Math.max(0,(f-c)/h):(c=0<(f=h-p)?d/f:0,l*=0<f?f/h:1)):(p=f-d)<=0?c=f/h:(c=0<(f=h-p)?d/f:0,l*=0<f?f/h:1),g.assert(0<=c),g.assert(c<=1),g.assert(0<=l),g.assert(l<=1),1-c*l):1,h=(null!=(d=e.yJ)?d:1)*o*y(r,t-a)*u*p*e.bi.filter(function(t,e){return t.oF&&(0<e||!n)}).reduce(function(t,e){var i=e.oF,n=void 0===(n=e.duration)?0:n,i=void 0===i?0:i;return t*(e=e.Je*y(r,n)+i*w(r,n))},1),m.S&&null!=i&&i.log("{".concat(e.groupId,"} [").concat(e.mediaType,"] calculateStreamablePriority: ")+"sp: ".concat(e.GC,", ")+"pssp: ".concat(e.Y_,", ")+"streamingDuration: ".concat(e.ekb,", ")+"duration: ".concat(e.sn,", ")+"seamlessProbability: ".concat(o,", ")+"distance: ".concat(t,", immediateDistance: ").concat(a,", ")+"risk:".concat(y(r,t-a),", ")+"adjustedFirstTerm: ".concat(u,", streamingAdjustment: ").concat(p,", ")+"probabilities: ".concat(JSON.stringify(e.bi)," => ").concat(h)),h)},e.vGb=A,e.z_a=n,e.mpa=_},function(t,e,i){var n;function r(){this[n.u.P]=0,this[n.u.J]=0,this[n.u.Ob]=0}_esm(e),e.aU=void 0,n=i(6),Object.defineProperties(r.prototype,{total:{get(){return this[n.u.P]+this[n.u.J]+this[n.u.Ob]},configurable:!0}}),r.prototype.add=function(t){this[n.u.P]+=Math.max(t[n.u.P]||0,0),this[n.u.J]+=Math.max(t[n.u.J]||0,0),this[n.u.Ob]+=Math.max(t[n.u.Ob]||0,0)},r.prototype.Kna=function(t,e){this[t]+=Math.max(e||0,0)},e.aU=r,n.u.P,n.u.J,n.u.Ob},function(t,e,i){var n,r,a,o;_esm(e),e.tY=void 0,n=i(0),r=i(1080),a=n.__importDefault(i(3)),e.tY=function(t){var e=new a.default.Console("ASEJS","media|asejs");return o=o||new r.dRa(function(){return function(){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(t){switch(t.label){case 0:return[4,Promise.resolve().then(function(){return n.__importStar(i(274))})];case 1:return[2,(0,t.ib().tJ)()]}})})}()},t,e)}},function(t,e,i){var n,a,r,o,s,u,c,h;function f(t){return t===o.u.J?0:t===o.u.P?1:t===o.u.Ob?2:3}function l(t,e,i,n,r){this.Tp=t,this.yVa=e,this.er=i,this.Gn=n,this.Qc=h.qT,this.JN=[],this.events=new a.EventEmitter,t=t.id&&t.id.length?"{"+t.id+"}":"",this.console=u.ai(s.default,r,t)}_esm(e),e.eha=e.kD=e.Btb=e.CG=void 0,n=i(0),a=i(12),r=i(10),o=i(6),s=n.__importDefault(i(3)),u=i(8),c=i(2),e.CG=function(t,e){return(t=f(t.mediaType))-(e=f(e.mediaType))},e.Btb={CG:e.CG},(i=h=e.kD||(e.kD={}))[i.qT=0]="CREATED",i[i.iT=1]="CANCELLED",Object.defineProperties(l.prototype,{state:{get(){return this.Qc},configurable:!0},Mf:{get(){return this.Qc===h.iT},configurable:!0},G:{get(){return this.Tp},configurable:!0},we:{get(){return this.JN},configurable:!0},parent:{get(){var t;return null==(t=this.yVa)?void 0:t.call(this,this)},configurable:!0}}),l.prototype.xa=function(){return n.__awaiter(this,void 0,void 0,function(){var t,e,i=this;return n.__generator(this,function(){return(t=this.parent)&&(t.Mc&&(e=t.Mc.Ea(this.Gn),this.Qq(e,"init from parent")),t.SS.then(function(){var t;i.Mf||(t=i.parent,c.assert(t,"Parent is undefined after parent normalization"),t.Mc&&(t=t.Mc.Ea(i.Gn),i.Qq(t,"parent normalization")))})),[2]})})},l.prototype.Qq=function(t,e){void 0===e&&(e="unknown"),r.S&&this.console.log("AseBranch adjusting branchOffset to ".concat(t.W)+" from ".concat(this.er.W,".  ").concat(e)),this.er=t},l.prototype.xd=function(){this.yVa=void 0},l.prototype.gaa=function(e){return this.we.some(function(t){return t.mediaType===e})},e.eha=l},function(t,e,i){var c,h,g,m;function f(t,e,i,n,r){var a;return i=null!=(a=e.pd)?a:e.track.vn(t,i.W,void 0,r),t=null!=(a=e.ue)?a:e.track.wB(t,null==n?void 0:n.W,e.Hh),[!e.yh(),i,t]}function r(t,e){for(var i,n,r=[],a=0,o=t[a],s=null==o?void 0:o[0],u=null==o?void 0:o[1],c=e.ue.index,h=e.track.Lq,f=0,l=e.pd.ec,d=e.pd.Ed.W>o[0],p=d,b=e.pd.index;b<=c;++b)i=!1,o&&(n=h.get(b),d&&(n.ec.W>=u?(d=!1,u=++a>=t.length?s=o=void 0:(s=null==(o=t[a])?void 0:o[0],null==o?void 0:o[1])):p?p=!1:(r.push(new g.W4(f,l,n.ec)),l=n.ec,i=!0)),!d&&o&&n.Ed.W>s&&(d=!0,i=n.ec,(n=e.track.HJ.Gl(b).A4a(s))&&0!==n.jj&&(i=m.M.Ja(n.Qd)),r.push(new g.W4(f,l,i)),l=i,i=!0)),i&&++f;return r.push(new g.W4(f,l,e.ue.Ed)),r}_esm(e),e.S0b=e.mbb=e.hdb=e.fdb=e.$Aa=void 0,c=i(0),h=i(6),g=i(462),m=i(8),e.$Aa=function(t,e,i){var n=e.get(h.u.P);return e=null==(e=e.get(h.u.J))?void 0:e.track.wB(t,null==i?void 0:i.W,e.Hh),[null==n?void 0:n.track.wB(t,null!=(t=null==(t=null==e?void 0:e.Ed)?void 0:t.W)?t:null==i?void 0:i.W,n.Hh),e]},e.fdb=function(t,e,i,n,r){var a,o,s,u=e.get(h.u.P);return e=e.get(h.u.J),o=(a=c.__read(e?f(t,e,i,n,r):[!1],3))[0],s=a[1],a=a[2],t=(n=c.__read(u?f(t,u,o&&void 0!==(null==s?void 0:s.ea)?m.M.Ja(s.ea):i,void 0!==(null==a?void 0:a.Qa)?m.M.Ja(null==a?void 0:a.Qa):n,r):[!1],3))[0],i=n[1],n=n[2],t&&null!=u&&u.Faa(i,n),o&&null!=e&&e.Faa(s,a),[t,o]},e.hdb=function(t,e,i){return e.track.vn(t,i.W,void 0,!0).ec},e.mbb=function(t,e,i){var n=e.G;return n.lq&&0!==n.lq.length?r(n.lq.map(function(t){return[n.va+t[0],n.va+t[1]]}),i.$_):[]},e.S0b=r},function(t,e,i){var n,r,a;function o(t){return"immediate"===t}function s(t,e,i){this.region=t,this.ec=e,this.Ed=i}function u(t,e,i){var n=this;this.id=t,this.G=e,this.yWa=!1,this.QP=function(t){var e;return null!=(e=n.$y)&&e.length?"immediate":null!=(t=null==(e=null==(e=n.G.next)?void 0:e[t])?void 0:e.xe)?t:n.xe},this.HV=new r.M(e.va,1e3),this.SU=void 0!==e.wa&&null!==e.wa?new r.M(e.wa,1e3):r.M.Uv,this.VBb=null!=(e=null!=(t=e.xe)?t:i)?e:"lazy",this.t9a(),a.assert(this.HV.lessThan(this.SU),"PlaygraphSegment: Invalid timestamps (endTimestamp <= startTimestamp)")}_esm(e),e.VQa=e.W4=e.W9a=void 0,n=i(0),r=i(8),a=i(2),e.W9a=o,s.prototype.toJSON=function(){return{region:this.region,ea:this.ec.DK,Qa:this.Ed.DK}},e.W4=s,Object.defineProperties(u.prototype,{N:{get(){return this.G.N},configurable:!0},Ml:{get(){return this.yWa},configurable:!0},kf:{get(){return this.HV},configurable:!0},Lg:{get(){return this.SU},configurable:!0},duration:{get(){return this.SU.Ea(this.HV)},configurable:!0},ea:{get(){return this.HV.W},configurable:!0},Qa:{get(){return this.SU.W},configurable:!0},$F:{get(){return!1},configurable:!0}}),Object.defineProperties(u.prototype,{Hw:{get(){return!this.lC.length||!this.G.Rb&&0===this.XQ.length},configurable:!0},aZb:{get(){return!this.G.type||"content"===this.G.type},configurable:!0},R2b:{get(){return this.RD},configurable:!0},lC:{get(){var t;return Object.keys(null!=(t=null==(t=this.G)?void 0:t.next)?t:{})},configurable:!0},XQ:{get(){var e=this;return this.lC.filter(function(t){return!!e.RD[t]})},configurable:!0},zDa:{get(){var t;return null!=(t=this.DXa)?t:this.DXa=this.AGb()},configurable:!0},ofa:{get(){var t;return null!=(t=this.EXa)?t:this.EXa=this.BGb()},configurable:!0},GC:{get(){return this.G.weight?this.G.weight/(this.G.weight+this.ofa):1},configurable:!0},xe:{get(){var t;return null!=(t=this.$y)&&t.length?"immediate":this.VBb},configurable:!0}}),u.prototype.normalize=function(t,e,i){this.HV=t,this.SU=e,this.$y=i,this.yWa=!0,this.wnb()},u.prototype.V5a=function(){var t;return this.XQ.length&&null!=(t=this.XQ.map(this.QP).reduce(function(t,e){return t===e?e:void 0}))?t:this.xe},u.prototype.Rj=function(t){this.t9a(t)},u.prototype.qGb=function(t){var e,i;return this.zDa?(e=(this.RD[t]||0)/this.zDa,void 0===this.G.weight||0===this.ofa?{Je:e}:1!==(i=this.GC)&&o(this.QP(t))&&this.RD[t]?{Je:i*e,oF:this.RD[t]/this.ofa*(1-i)}:{Je:i*e}):{Je:null!=(e=this.G.next)&&e[t]?1/this.lC.length:0}},u.prototype.wWb=function(t){return-1<this.lC.indexOf(t)},u.prototype.jEb=function(){return this.Ml?n.__assign(n.__assign({},this.G),{va:this.kf.W,wa:this.Lg.W}):this.G},u.prototype.t9a=function(n){var r;void 0===this.G.next?this.RD={}:(r=this.G.next,this.RD=Object.keys(r).reduce(function(t,e){var i=n?n[e]||0:r[e].weight;return null!=i&&0<=i&&(t[e]=i),t},{})),this.wnb()},u.prototype.AGb=function(){var i=this;return this.XQ.reduce(function(t,e){return t+i.RD[e]},0)},u.prototype.BGb=function(){var i=this;return this.XQ.filter(function(t){return o(i.QP(t))}).reduce(function(t,e){return t+i.RD[e]},0)},u.prototype.wnb=function(){this.EXa=this.DXa=void 0},e.VQa=u},function(e,i,n){var f,r,a,o,s,u,c;function h(){this.hR=[],this.QD=new a.Ls(!1),this.PD=new a.Ls(a.M.Ja(-1/0)),this.events=new r.EventEmitter,this.H=new u.default.Console("ASEJS","media|asejs")}_esm(i),i.Wja=void 0,f=n(0),r=n(12),a=n(8),o=n(2),s=n(6),e=n(135),u=f.__importDefault(n(3)),c=n(10),e=e.Qy.Vqa,Object.defineProperties(h.prototype,{console:{get(){return this.H},configurable:!0},Di:{get(){return this.Fx},configurable:!0},rp:{get(){},configurable:!0}}),Object.defineProperties(h.prototype,{vC:{get(){return{}},configurable:!0}}),Object.defineProperties(h.prototype,{playbackRate:{get(){return this.pq()},configurable:!0},XYa:{get(){return!1},configurable:!0},ew:{get(){return this.QD},configurable:!0},nZ:{get(){return this.PD},configurable:!0},Fe:{get(){return this.Pv},configurable:!0},se:{get(){return this.nJ()},configurable:!0},og:{get(){var t=this.se,e=this.On(t,!1);return c.S&&o.assert(e,"Could not find current branch for ".concat(t.W)),e},configurable:!0},aYb:{get(){return this.bb[0]},configurable:!0},Mt:{get(){return this.Pv?this.bb[this.bb.length-1]:void 0},configurable:!0},Ei:{get(){var t=this.se,e=this.YX(t);return o.assert(e,"Could not find presenting branch for ".concat(t.W)),e},configurable:!0},Pv:{get(){return 0<this.bb.length},configurable:!0}}),h.prototype.ZR=function(){},h.prototype.Oea=function(){},h.prototype.dh=function(){return!1},h.prototype.UP=function(){return 0<this.bb.length},h.prototype.cl=function(){return o.assert(0<this.bb.length,"Could not find presenting branch. Player has no branches."),this.Ei},h.prototype.g8a=function(t){return-1!==this.bb.indexOf(t)},h.prototype.K7=function(){return void 0===this.qa},h.prototype.eR=function(){},h.prototype.tb=function(){},h.prototype.ny=function(e){var i,n,t=this.bb.filter(function(t){return t.G.id===e.X});if(0!==t.length)return i=this.nJ(),n=new a.M(1/0,1),t.forEach(function(t){t=t.Cq.add(e.offset),i.UO(t).lessThan(i.UO(n))&&(n=t)}),n},h.prototype.IY=function(e){var i,n,r,a,o,s,u,c;return f.__generator(this,function(t){switch(t.label){case 0:if(0===(i=this.bb.filter(function(t){return t.G.id===e.X})).length)return[2,void 0];n=this.nJ(),t.label=1;case 1:t.Ih.push([1,6,7,8]),r=f.__values(i),a=r.next(),t.label=2;case 2:return a.done?[3,5]:(s=a.value,s=s.Cq.add(e.offset),o=n.UO(s),[4,{Py:s,UO:o}]);case 3:t.ib(),t.label=4;case 4:return a=r.next(),[3,2];case 5:return[3,8];case 6:return s=t.ib(),u={error:s},[3,8];case 7:try{a&&!a.done&&(c=r.return)&&c.call(r)}finally{if(u)throw u.error}return[7];case 8:return[2]}})},h.prototype.On=function(e,i){var n,r;if(t=this.YX(e,i=void 0===i?!1:i))return i=(n=t.G).id,r=n.duration,{X:i,offset:e=a.M.min(e.Ea(n.kf.add(t.Dd)),r||a.M.Uv)}},h.prototype.I$=function(){},h.prototype.reset=function(){this.xE()},h.prototype.C0=function(){},h.prototype.pause=function(t){void 0===t&&(t=s.Uf),this.hR=null==t?void 0:t.reduce(function(t,e){return-1===t.indexOf(e)&&t.push(e),t},this.hR)},h.prototype.resume=function(t){var e=this;(t=void 0===t?s.Uf:t).forEach(function(t){-1!==(t=e.hR.indexOf(t))&&e.hR.splice(t,1)})},h.prototype.ZDa=function(t){var e;return o.assert(this.qa),o.assert(t!==this),this.qL(),(e=t.K7(this.qa,this))&&(this.Mda(),t.pause(this.hR),t.Kra.apply(t,f.__spreadArray([],f.__read(this.bb),!1)),this.cra(this.qa)),e},h.prototype.nJ=function(){return this.y6a()},h.prototype.y6a=function(){var t,e;return c.S&&o.assert(this.Pv,"Attempted to get initial time before any branches were queued"),e=f.__read(this.bb,1)[0],c.S&&o.assert(e),null!=(t=e.vd)?t:e.Ht},h.prototype.pq=function(){return 1},h.prototype.mY=function(){},h.prototype.YX=function(t,e){var i;if(void 0===e&&(e=!1),this.Pv)return i=this.y6a(),t.lessThan(i)?this.bb[0]:a.usa(this.bb,t)||(e?this.Mt:void 0)},h.prototype.LSb=function(){var t,e,i,n,r,a,o,s={};try{for(var u=f.__values(this.bb),c=u.next();!c.done;c=u.next()){for(i in e=c.value,i=void 0,r=e.yB())(o=r[a=i])&&(s[a]=(null!=(n=s[a])?n:0)+o);if(!e.vj)break}}catch(t){var h={error:t}}finally{try{c&&!c.done&&(t=u.return)&&t.call(u)}finally{if(h)throw h.error}}return s},f.__decorate([e.return.wi()],h.prototype,"og",null),f.__decorate([e.return.Ooa(),e.return.$n],h.prototype,"cl",null),f.__decorate([f.__param(0,e.wi())],h.prototype,"ny",null),f.__decorate([f.__param(0,e.wi())],h.prototype,"IY",null),f.__decorate([e.return.wi()],h.prototype,"On",null),i.Wja=n=h},function(t,e,i){var u,c,h;_esm(e),e.tea=void 0,u=i(0),c=i(2),h=i(196),e.tea=function(t,e,i,n,r,a){var o,s;return void 0===r&&(r=h.cx.lX),o=t(),n&&o&&(s=n.boa,t=n.$n,n=n.rules.map(function(t){return["function"==typeof t.Wl?t.Wl(i):i[t.Wl],t.config]}),s||c.assert(e,"Param is null"),a&&n.push([{map:a,vE:function(){return!0}},void 0]),a=n.filter(function(t){return(t=u.__read(t,2))[0].vE(e,o,t[1])}),t&&c.assert(a.length,"No rules matched for ".concat(e)),a.length)?a.reduce(function(t,e){return(e=u.__read(e,2))[0].map(t,r,o,e[1])},e):e}},function(t,s,e){var u,i,c;function n(t){this.Ia=t}_esm(s),s.z5a=s.h7a=s.hta=s.IRa=void 0,u=e(0),i=e(10),c=e(54),Object.defineProperties(n.prototype,{re:{get(){return"queue-audit"},configurable:!0},kw:{get(){return"qaudit"},configurable:!0},enabled:{get(){return i.S},configurable:!0}}),n.prototype.al=function(t){var e,i,n;if(((t=t.cj)===c.ke.iq||t===c.ke.up)&&(t=this.Ia.ata())){i={};try{for(var r=u.__values(t.q6b),a=r.next();!a.done;a=r.next())i[(n=a.value).mediaType]=this.L0b(n)}catch(t){var o={error:t}}finally{try{a&&!a.done&&(e=r.return)&&e.call(r)}finally{if(o)throw o.error}}return{branchQueue:s.z5a(t.k8b),playerIterator:i,driftStats:this.Ia.WEa}}},n.prototype.L0b=function(t){return null==t?void 0:t.z6a()},s.IRa=n,s.hta=function(t){var e,i;return t&&(e=t.G,i={},t.sm().forEach(function(t){i[t.mediaType]=s.h7a(t)}),{sId:null==e?void 0:e.id,cancelled:t.Mf,RM:i})},s.h7a=function(t){var e;if(t&&t.Va)return u.__assign(u.__assign({},t.Va.aua()),{unsentRequests:t.Va.uu,lastFragmentContentEndPts:null==(e=t.ue)?void 0:e.Ic,trackAttributes:null==(e=t.track)?void 0:e.Ro(),bitrate:null==(e=t.ue)?void 0:e.bitrate})},s.z5a=function(t){return t.map(function(t){return s.hta(t)})}},function(t,e,i){var s,u,c,n;_esm(e),e.HBa=e.Kpa=e.On=e.X7a=e.Wmb=void 0,s=i(8),u=i(2),c=i(10),e.Wmb=function(t,e){return void 0===(t=t.O[e.X])?{nQ:!1,reason:"Segment ".concat(e.X," was not found")}:e.offset.W<0?{nQ:!1,reason:"Offset ".concat(e.offset.W," was negative")}:void 0===t.wa||null===t.wa||1/0===t.wa?{nQ:!0}:(t=t.wa-t.va,e.offset.W>=t?{nQ:!1,reason:"Offset ".concat(e.offset.W," was greater than segment duration ").concat(t)}:{nQ:!0})},n=s.M.Ja(100),e.X7a=function(t,e){if(t===e)return!0;if(t&&e&&t.X===e.X){if(t.offset===e.offset)return!0;if(t=s.M.abs(t.offset.Ea(e.offset)),n.greaterThan(t))return!0}return!1},e.On=function(t,e,i){var n,r,a,o=e.qa;if(e=e.bYb,void 0===i&&(i={}),a=o.ba,a=(o=o.navigator).Ee(null!=(n=null==e?void 0:e.id)?n:a.yd),(n=null!=(r=null==e?void 0:e.kac)?r:a.kf).greaterThan(t))return i.yjb?{offset:t.Ea(n),X:a.id}:void 0;for(o=(e=o.J$a(a)).next();!o.done;){if(o=(r=o.value).Lg.Ea(r.kf),(n=(a=n).add(o)).greaterThan(t))return t=t.Ea(a),c.S&&u.assert(t.zj(s.M.Ka)&&t.lessThan(o)),{X:r.id,offset:t};if((o=e.next()).done&&i.zjb)return{X:r.id,offset:t.Ea(a)}}},e.Kpa=function(t,e){return e=e.O[t.X],t.offset.lessThan(s.M.Ka)?{k8:s.M.Ka,gq:t.offset}:e.wa&&((e=s.M.Ja(e.wa-e.va)).isFinite()&&t.offset.greaterThan(e))?{k8:e,gq:t.offset.Ea(e)}:{k8:t.offset,gq:s.M.Ka}},e.HBa=function(t,e){if(void 0!==(t=t.O[e.X]))return null===t.wa||void 0===t.wa?{X:e.X,offset:s.M.max(s.M.Ka,e.offset)}:{X:e.X,offset:s.M.max(s.M.Ka,s.M.min(e.offset,s.M.Ja(t.wa-t.va)))}}},function(t,e,i){var a,n,o,s;function r(){this.V=new n.hka}_esm(e),e.zfb=e.Pka=void 0,i(0),a=i(10),n=i(468),o=i(2),s=i(22),Object.defineProperties(r.prototype,{empty:{get(){return!this.FC},configurable:!0},root:{get(){var t;return null==(t=this.FC)?void 0:t.value},configurable:!0},values:{get(){var e=[];return this.gJ(function(t){return!!e.push(t)}),e},configurable:!0}}),r.prototype.has=function(t){return!!this.V.get(t)},r.prototype.parent=function(t){return t=this.V.get(t),a.S&&o.assert(t,"Attempted to find the parent of a node not in the tree"),null==(t=null==t?void 0:t.parent)?void 0:t.value},r.prototype.children=function(t){return t=this.V.get(t),a.S&&o.assert(t,"Attempted to find the children of a node not in the tree"),null!=t&&t.children?t.children.map(function(t){return t.value}):[]},r.prototype.Jua=function(t){return t=this.V.get(t),a.S&&o.assert(t,"Attempted to find the children of a node not in the tree"),void 0!==(null==t?void 0:t.children)&&0<t.children.length},r.prototype.add=function(t,e){var i;return a.S&&o.assert(!this.V.get(t),"Attempted to add a value to tree that is already present"),i={value:t},void 0===this.FC?(a.S&&o.assert(void 0===e,"a parent cannot be specified when the tree is empty"),this.FC=i):(a.S&&o.assert(void 0!==e,"a parent must be specified when the tree is non-empty"),e=this.V.get(e),a.S&&o.assert(e,"Parent value does not exist in tree"),this.qZa(i,e)),this.V.set(t,i),this},r.prototype.remove=function(t){return t=this.V.get(t),a.S&&o.assert(t,"Attempted to remove a node not in the tree"),this.removeNode(t),this},r.prototype.removeNode=function(t){var e=this;this.Isa(function(t){return e.V.delete(t)},t.value),void 0===t.parent?this.FC=void 0:this.detach(t)},r.prototype.move=function(t,e){return t=this.V.get(t),e=this.V.get(e),a.S&&o.assert(t,"cannot move a value that is not in the tree"),a.S&&o.assert(e,"cannot move a value to a parent value not in the tree"),a.S&&o.assert(null==t?void 0:t.parent,"cannot move the root node"),a.S&&o.assert(!this.zYb(t,e),"cannot move a node below itself or one of its decendants"),t.parent!==e&&(this.detach(t),this.qZa(t,e)),this},r.prototype.J9b=function(t){var e,i=this;t=this.V.get(t),a.S&&o.assert(t,"cannot replant at a value that is not in the tree"),e=[],this.detach(t),this.Isa(function(t){return i.V.delete(t),e.unshift(t),!0}),this.FC=t},r.prototype.clear=function(){return this.FC&&this.remove(this.FC.value),this},r.prototype.N4a=function(t,e){var i=this;t=this.V.get(t),a.S&&o.assert(t,"cannot iterate children of a value not in the tree"),null!=(t=t.children)&&t.forEach(function(t){return e(t.value,i)})},r.prototype.gJ=function(e,t,i){var n=this;void 0===i&&(i=0),a.S&&o.assert(!this.empty||void 0===t,"cannot iterate from a value on an empty tree"),this.empty||(t=null!=t?t:this.FC.value,e(t,this,i)&&this.N4a(t,function(t){return n.gJ(e,t,i+1)}))},r.prototype.Isa=function(e,t){var i=this;a.S&&o.assert(!this.empty||void 0===t,"cannot iterate from a value on an empty tree"),this.empty||(t=null!=t?t:this.FC.value,this.N4a(t,function(t){return i.Isa(e,t)}),e(t,this))},r.prototype.z8b=function(t){var e,i,n,r=this;return a.S&&o.assert(0===(n=t).length||void 0===n[0].parent&&n.every(function(e,t){return 0===t||s.Yp(n,function(t){return t.value===e.parent})<t}),"entries must be in topological order"),0===t.length?(e=this.values,i=[],this.clear()):(i=t.filter(function(t){return r.has(t.value)&&t.parent!==r.parent(t.value)}),e=this.values.filter(function(e){return-1===s.Yp(t,function(t){return t.value===e})}),this.clear(),t.forEach(function(t){return r.add(t.value,t.parent)})),{ER:e,$gb:i}},r.prototype.qZa=function(t,e){var i;(null!=(i=(t.parent=e).children)?i:e.children=[]).push(t)},r.prototype.detach=function(t){var e;a.S&&o.assert(t.parent,"cannot detach the root"),a.S&&o.assert(void 0!==t.parent.children,"logic error: parent node does not have children"),e=t.parent.children.indexOf(t),o.assert(0<=e,"logic error: node does not appear in the children of its parent"),t.parent.children.splice(e,1),t.parent=void 0},r.prototype.zYb=function(t,e){for(;void 0!==e;){if(e===t)return!0;e=e.parent}return!1},e.Pka=r,e.zfb=function(t,n){var r="";return t.gJ(function(t,e,i){return r+="".concat(Array(i+1).join("-")).concat(n(t),"\n"),!0}),r}},function(t,e){var i,n,r;function a(t){return void 0!==(null==t?void 0:t.oUa)}function o(t){return(a(t)?t:Object.defineProperties(t,{oUa:{value:{}}})).oUa}function s(){this.id=r=(r+1)%n}_esm(e),e.hka=void 0,n=null!=(i=Number.MAX_SAFE_INTEGER)?i:1e9,r=Date.now()%n,s.prototype.get=function(t){return a(t)?o(t)[this.id]:void 0},s.prototype.set=function(t,e){return o(t)[this.id]=e,this},s.prototype.has=function(t){return a(t)&&void 0!==o(t)[this.id]},s.prototype.delete=function(t){return!!this.has(t)&&!(o(t)[this.id]=void 0)},e.hka=s},function(t,e,i){var o,n,r,a;function s(){this.events=new n.EventEmitter}_esm(e),e.kja=void 0,o=i(0),n=i(12),r=i(10),a=i(2),s.prototype.xa=function(t){var e=this;this.qa=t,this.qa.events.on("segmentNormalized",function(){e.Zda()}),this.Zda()},Object.defineProperties(s.prototype,{h_:{get(){return this.Gzb},configurable:!0},nEa:{get(){return a.assert(this.qa,"Must be initialized"),this.qa.ba},configurable:!0}}),s.prototype.Zda=function(){var n,r,a=this;this.qa&&(n={},r=this.qa.ba,this.Gzb=o.__assign(o.__assign({},r),{O:new Proxy(r.O,{get:function(t,e){var i;return n[e]||((t=r.O[e])?((i=a.DUb(e))?(i=i.jEb(),n[e]=o.__assign(o.__assign(o.__assign({},i),t),{va:i.va,wa:i.wa})):n[e]=r.O[e],n[e]):t)}})}),this.events.emit("updated"))},s.prototype.DUb=function(t){var e;return r.S&&a.assert(this.qa,"Must be initialized"),(e=this.qa.navigator).q8a(t)?e.Ee(t):void 0},e.kja=s},function(t,e,i){var n,r,a,o,s,u,c,h,f,l;function d(t,e,i,n){var r;function a(t,e){return t.X===e.X&&t.offset.equal(e.offset)}(r=this).uA=t,this.E5=e,this.config=i,this.console=new o.default.Console("GRAPHLOCATIONSERVICE"),this.gi=new s.Lu({Mn:this,source:(n||"")+"GraphLocation",console:this.console}),l.QAa(this,"d",new l.Nia(i,a)),l.QAa(this,"u",new l.Nia(i,a)),"temp"!==n&&null!=(t=this.E5.events)&&t.on("updated",function(){l.H5a(r).forEach(function(t){return t.clear()})})}_esm(e),e.Wha=void 0,n=i(0),r=i(35),a=i(19),o=n.__importDefault(i(3)),s=i(65),u=i(466),c=i(2),h=i(1132),f=i(10),l=i(471),Object.defineProperties(d.prototype,{parent:{get(){return this.uA()},configurable:!0}}),d.prototype.Smb=function(t,e){return new d(function(){return t},{h_:e,nEa:e},this.config,"temp")},d.prototype.oB=function(t){var e,i;return f.S&&this.console.trace("downConverting",t),v=this.parent,i=(e=this.E5).h_,v===e.nEa||(i.O[t.X]?v.O[t.X]||f.S&&this.console.warn("Received a down converted position unexpectedly",t,Error().stack):(e=u.Kpa(t,v),t=r.Tmb(v,i,{offset:e.k8.W,G:t.X}),t={offset:e.gq.add(a.M.Ja(t.offset)),X:t.G},f.S&&this.console.trace("downConverting ret:",t))),t},d.prototype.Pq=function(t){var e,i;return f.S&&this.console.trace("upConverting",t),v=this.parent,i=(e=this.E5).h_,v===e.nEa||(v.O[t.X]?i.O[t.X]||f.S&&this.console.warn("Received a up converted position unexpectedly",t,Error().stack):(e=u.Kpa(t,i),t=r.u0a(v,i,{offset:e.k8.W,G:t.X}),t={offset:e.gq.add(a.M.Ja(t.offset)),X:t.G},f.S&&this.console.trace("upConverting ret:",t))),t},d.prototype.LTb=function(t){var e=r.O5a(this.parent,this.E5.h_,{G:t.X,offset:t.offset.W}),e=h.X$a(e);return c.assert(e,"Could not find any segments in the path of ".concat(t)),e},n.__decorate([s.nb({methodName:"downConvertPosition",Dl:!0,yo:!0,return:!0}),l.hpa("d")],d.prototype,"oB",null),n.__decorate([s.nb({methodName:"upConvertPosition",Dl:!0,yo:!0,return:!0}),l.hpa("u")],d.prototype,"Pq",null),e.Wha=d},function(t,e,i){var n,a,o,r,s;function u(t,e,i){void 0===i&&(i={}),this.config=t,this.zPb=e,this.md=[],this.gpa=new r.sH,this.o_a=new r.sH,this.options=n.__assign({cp:10},i)}_esm(e),e.E5a=e.H5a=e.QAa=e.hpa=e.Nia=void 0,n=i(0),a=n.__importDefault(i(3)),o=i(2),r=i(8),Object.defineProperties(u.prototype,{isEnabled:{get(){return this.config.yOb},configurable:!0}}),u.prototype.D$=function(t,e){var i;return this.isEnabled?(i=this.eSb(t))?i.value:(e=e(),this.Xo(t,e),e):e()},u.prototype.findIndex=function(t){var e,i,n=1/0,r=1/0;for((this.options.SV||this.options.BR)&&(e=a.default.time.ia(),this.options.BR&&(n=e-this.options.BR),this.options.SV&&(r=e-this.options.SV)),e=0;e<this.md.length;e++){if(i=this.md[e],this.options.BR&&i.eab<n){this.md.splice(e,this.md.length-e);break}if(this.options.SV&&i.Al<r)this.md.splice(e,1),e--;else if(this.zPb(i.key,t))return e}return-1},u.prototype.eSb=function(t){var e;if(-1!==(t=this.findIndex(t)))return e=this.md[t],this.md.splice(t,1),this.md.unshift(e),this.options.BR&&(e.eab=a.default.time.ia()),this.o_a.push(t),this.gpa.push(1),e;this.gpa.push(0)},u.prototype.Xo=function(t,e){this.md.unshift({key:t,value:e}),(this.options.BR||this.options.SV)&&(t=a.default.time.ia(),this.options.BR&&(this.md[0].eab=t),this.options.SV&&(this.md[0].Al=t)),this.gHb()},u.prototype.gHb=function(){this.md.length>this.options.cp&&this.md.pop()},u.prototype.clear=function(){this.md=[]},e.Nia=u,s=new WeakMap,e.hpa=function(r){return void 0===r&&(r="default"),function(t,e,i){var n=i.value;i.value=function(t){var e=this,i=null==(i=s.get(this))?void 0:i[r];return o.assert(i,"lruCache not defined"),i.D$(t,function(){return n.call(e,t)})}}},e.QAa=function(t,e,i){s.has(t)||s.set(t,{}),s.get(t)[e]=i},e.H5a=function(t){var e;return s.has(t)?(e=s.get(t),Object.keys(e).map(function(t){return e[t]})):[]},e.E5a=function(t){return s.has(t)?s.get(t):{}}},function(t,e,i){var f,n,r,a,l,o;function s(t,e,i,n){return(n=o.call(this,t,e,i,n=void 0===n?"CphAsePlaygraph":n,!0)||this).Rn=t,n.Tdb=e,n.Jhb=i,t.yc.mg(new r.JHa(n)),n}_esm(e),e.Wya=e.IHa=void 0,f=i(0),n=i(35),r=i(1133),a=i(65),l=i(2),o=i(473).Yja,f.__extends(s,o),s.prototype.cG=function(t){var e,i=o.prototype.cG.call(this,t);return i&&(e=t.ja.Go)&&!this.G5&&(this.xla.av({applyingContentPlaygraph:!0}),this.G5=e,this.Dyb=this.GIb(t.ja),this.n0()),i},Object.defineProperties(s.prototype,{n8a:{get(){return this.Dyb},configurable:!0}}),s.prototype.GE=function(t){if(this.G5)return t=f.__assign(f.__assign({},t),{O:f.__assign({},t.O)}),n.Uxa(t,this.G5.ba)},s.prototype.GIb=function(t){var e=t.ev,i=t.lF;return!(!e||!e.some(function(t){return t.lF!==i}))},Object.defineProperties(s.prototype,{Go:{get(){var t;return null==(t=this.G5)?void 0:t.ba},configurable:!0}}),f.__decorate([a.nb({methodName:"processViewableResponse"})],s.prototype,"cG",null),e.IHa=s,e.Wya=function(c){var h=[];return{eu:function(t,e){var i,n,r,a,o=t.N,s=t.w0,u=c();return u.zoa&&u.zoa!==o&&(r=null==(i=null==s?void 0:s.yl)?void 0:i.Oe,i=null==(n=null==s?void 0:s.yl)?void 0:n.Ch,n=u.Oe,s=u.zoa,l.assert(s,"did not receive parent viewable id"),s={yl:{Oe:null!=r?r:n,Ch:null!=i?i:s}}),u.yc.console.trace("In wrapped request viewable",o,s),a=e(f.__assign(f.__assign({},t),{w0:s})),h.forEach(function(t){return t({N:o,FG:a.FG})}),a},nkb:function(t){h.push(t)}}}},function(t,e,i){var o,n,r,a,f,l,s,d,u,c,h;function p(t,e,i,n,r){var a;void 0===n&&(n="CphAsePlaygraph"),void 0===r&&(r=!0),(a=this).Rn=t,this.Tdb=e,this.Jhb=i,this.Hec=n,this.Gyb=new s.hka,r&&this.xa(),this.Tdb(function(t){var i=t.FG;return o.__awaiter(a,void 0,void 0,function(){var e;return o.__generator(this,function(t){switch(t.label){case 0:return[4,i];case 1:return e=t.ib(),this.cG(e),[2]}})})})}_esm(e),e.Yja=void 0,o=i(0),n=i(193),r=i(65),a=i(22),f=i(2),l=i(10),s=i(468),d=i(19),u=i(1134),c=i(474),h=i(1135),Object.defineProperties(p.prototype,{yc:{get(){return this.Rn.yc},configurable:!0},ak:{get(){return this.yc},configurable:!0},ba:{get(){return this.qo},configurable:!0},Xh:{get(){return this.Rn.Xh},configurable:!0},H:{get(){return this.yc.console},configurable:!0},K:{get(){return this.yc.config},configurable:!0},n8a:{get(){return!1},configurable:!0}}),p.prototype.xa=function(){var t,e=this,i=this.Rn;this.xla=new r.Lu({cp:10,Mn:this,source:this.Hec,console:this.H}),this.events=c.vqa(function(){return i},i.yc.events,this.Jhb,h.cfb),this.qo=i.yc.ba,t=i.Xh,i.yc.mg(new n.px(this.xla)),i.yc.mg(new n.px(i.Xh.gi)),i.yc.mg(new u.iHa("".concat(i.iab,"::gls"),t)),i.yc.events.on("playgraphUpdating",function(){e.Rn.Hva.Zda()})},p.prototype.dt=function(t){var e,i,n=null!=(e=this.U)?e:this.yc.U;return(this.U=t).vCa&&t.vCa(this.Rn),(e=this.Rn.yc.dt(null!=(i=t.YY)?i:t))?n!==(this.U=t)&&n.Spa&&n.Spa():this.U=n,e},p.prototype.n0=function(t,e,i,n){if(t=this.GE(null!=t?t:this.qo))return this.m4b(t,this.n8a,e,i,n)},p.prototype.m4b=function(t,e,i,n,r){var a,o,s,u=this.Rn.yg,c=u.U,h=u.ba;(i=i||(u.qq&&c.Fe?c.og:u.Ft?u.Nj:void 0))&&(a=this.yc.ba.O[i.X])&&a.pc&&(i=this.Xh.Pq(i)),u.config.chc&&e&&c.nG(!0),e=u.E6a(),l.S&&this.H.log("onNewInnerPlaygraph: outer: ".concat(JSON.stringify(h))),l.S&&this.H.log("onNewInnerPlaygraph: combined: ".concat(JSON.stringify(t))),this.Gyb.set(t,!0),h=this.yc.Nw(t);try{return h.ha&&(!i||c.Fe||u.Ft)||(f.assert(!c.Da.gk,"Player is not paused"),u.xd(!0),h=this.yc.Nw(t),i&&(o=this.Xh.oB(i),"padding"===(null==(s=t.O[o.X])?void 0:s.type)&&(o={X:s.Rb,offset:d.M.Ka}),this.yc.Dea(o,n,r),c.resume())),h}finally{e.release()}},p.prototype.Nw=function(t){var e,i;function n(){e.qo=t}i=null!=(i=(e=this).GE(t))?i:t;try{return this.yc.events.$za("playgraphUpdating",n),this.yc.Nw(i)}finally{this.yc.events.removeListener("playgraphUpdating",n)}},Object.defineProperties(p.prototype,{Oe:{get(){return this.CUa},configurable:!0},zoa:{get(){var t,e=this,i=Object.keys(this.yc.ba.O);if(i=a.Xc(i,function(t){return!!e.yc.ba.O[t].pc}))return i=this.yc.ba.O[i].pc,null!=(t=null==(t=this.ba.O[i])?void 0:t.N)?t:Number(i.split(":")[0])},configurable:!0}}),p.prototype.cG=function(e){var t,i,n=e.ja,r=n.Oe;return n=n.Go,i=null!=(t=this.K.Zra)?t:[],n&&i.some(function(t){return t==e.L})?(t="".concat(e.L," was excluded from content playgraph"),this.xla.av(t),l.S&&this.H.trace(t),!1):(r&&!this.CUa&&(this.CUa=r),!0)},p.prototype.xd=function(t){this.yc.xd(t)},o.__decorate([r.nb({methodName:"attachPlayer"})],p.prototype,"dt",null),o.__decorate([r.nb({methodName:"reevaluateInnerPlaygraph"})],p.prototype,"n0",null),o.__decorate([r.nb({methodName:"processViewableResponse"})],p.prototype,"cG",null),o.__decorate([r.nb({methodName:"cancelStreaming"})],p.prototype,"xd",null),e.Yja=p},function(t,e,i){var s,u,c,n,r;function a(t,e){var i=r.call(this)||this;return i.J0b=t,i.w9a=e,i.Rla={},i}_esm(e),e.vqa=void 0,s=i(0),t=i(12),u=i(196),c=i(464),r=t.EventEmitter,s.__extends(a,r),a.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return r.prototype.emit.call(this,t,this.J0b(t,e[0]))},a.prototype.subscribe=function(i){var t,n=this;this.listeners(i).length||(this.Rla[i]=t=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.emit.apply(n,s.__spreadArray([i],s.__read(t),!1))},this.w9a.addListener(i,t))},a.prototype.addListener=function(t,e){return this.subscribe(t),r.prototype.addListener.call(this,t,e),this},a.prototype.removeListener=function(t,e){return r.prototype.removeListener.call(this,t,e),e=this.Rla[t],!this.listeners(t).length&&e&&(this.w9a.removeListener(t,e),this.Rla[t]=void 0),this},a.prototype.on=function(t,e){return this.addListener(t,e),this},a.prototype.Hy=function(t,e){return this.removeListener(t,e),this},a.prototype.once=function(n,r){var a;return(a=this).addListener(n,function t(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];a.removeListener(n,t),r.apply(void 0,s.__spreadArray([],s.__read(e),!1))}),this},a.prototype.V_=function(t,e){return this.subscribe(t),r.prototype.V_.call(this,t,e),this},a.prototype.$za=function(n,r){var a;return(a=this).V_(n,function t(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];a.removeListener(n,t),r.apply(void 0,s.__spreadArray([],s.__read(e),!1))}),this},n=a,e.vqa=function(r,t,a,o){return new n(function(t,e){var i,n;return i=t,i=(n=o["*"])&&!Array.isArray(n)&&-1===n.Y3a.indexOf(i)?n.rules:[],t=null!=(n=o[t])?n:[],n=i.concat(t).filter(function(t){return"object"==typeof t}),i=s.__read(t.filter(function(t){return"function"==typeof t}),1)[0],n.length?c.tea(r,e,a,{rules:n,$n:!1,boa:!0},u.cx.pEa,i):e},t)}},function(t,e,i){var c,h;function f(t){var e=/^.+:ad\-(\d+)\-(\d+)$/.exec(t);return e?{Cna:parseInt(e[2]),jm:parseInt(e[1]),gZ:!1}:(t=/^.+:pad((end)|(start))-(\d+)$/.exec(t))?{jm:parseInt(t[4]),gZ:!0,neb:t[1]}:void 0}function n(t,e,i){this.Si=t,this.Qw=e,this.ah=i}_esm(e),e.R5a=e.VX=e.yFa=void 0,c=i(8),h=i(254),n.prototype.bSb=function(t){var e,i,n,r=f(null==t?void 0:t.X),a=this.Si.ba,o=this.Qw().ba,s=a.O[t.X],u=s,c=[t.X];for(o=o.O[u.pc].N;u&&u.pc===s.pc&&u.N!==o;)c.push(u.Rb),u=a.O[u.Rb];return c.pop(),n=f(a=null!=(n=c.pop())?n:t.X),t=this.Si.ba.O[t.X],a=this.Si.ba.O[a],t=(null!=(e=t.wa)?e:1/0)-t.va,e=(null!=(i=a.wa)?i:1/0)-a.va,{start:null!=r&&r.gZ?new h.Nga(h.C2.start,t):void 0,end:null!=n&&n.gZ?new h.Nga(h.C2.end,e):void 0}},Object.defineProperties(n.prototype,{gs:{get(){var t,e,i,n,r,a,o,s,u;if(this.Si.U.Fe&&(i=f((e=this.Si.U.og).X))){for(n=null==(t=this.Qw().Xh)?void 0:t.Pq(e),t=this.Qw().ba.O[n.X],t=this.ah.jg[t.N][i.jm],n=this.bSb(e),n=new h.OFa(t,n.start,n.end),r=this.Si.ba,a=this.Qw().ba,s=o=r.O[e.X],u=-e.offset.W,a=a.O[s.pc].N;s&&s.pc===o.pc&&s.N!==a;)u+=s.wa-s.va,s=r.O[s.Rb];return o=(r=c.M.Ja(u)).Ea(n.zX.duration),i.gZ&&(o="end"===i.neb?c.M.Ka:(s=n.cfa.duration.Ea(e.offset),o.Ea(s))),n={vr:n,progress:{DCb:t.duration.Ea(o),ECb:1-Math.max(0,o.W)/t.duration.W,FCb:n.duration.Ea(r),GCb:1-Math.max(0,r.W)/n.duration.W},position:e,index:i.jm},r=(r=this.Si.ba.O[e.X]).wa-r.va,e=e.offset.W/r,i.gZ?n.dda={n5b:e,eda:i.neb,cda:c.M.Ja(r)}:n.Ys={vh:t.Ti[i.Cna],aYa:e,index:i.Cna},n}},configurable:!0}}),n.prototype.VX=f,e.yFa=n,e.VX=f,e.R5a=function(t){if(t=/^.+-(\d+)$/.exec(t))return{T0a:parseInt(t[1])}}},function(t,e,i){var n,r;_esm(e),e.qqa=void 0,n=i(135),r=i(1155),e.qqa=function(t,e){var i;return t=e(t),i=new r.BQa(t,n.Qy.yBa.NR),n.Qy.sAa(t,i,function(){return i.Rn})}},function(t,e){_esm(e),e.zkc="LogblobBuilderSymbol",e.RT="HLSLogblobBuilderFactorySymbol"},function(t,e){_esm(e),e.gTa="ThroughputTrackerConfigSymbol"},function(t,e){_esm(e),e.jTa="ThroughputTrackerSymbol",e.hTa="ThroughputTrackerFactorySymbol"},function(t,e){_esm(e),e.EJa="ExtraPlatformInfoProviderSymbol"},function(t,e){_esm(e),e.nHa="CapabilityDetectorFactorySymbol"},function(t,e){_esm(e),e.pGa={"playready-oggvorbis-2-piff":"OGG_VORBIS","playready-oggvorbis-2-dash":"OGG_VORBIS","heaac-2-piff":"AAC","heaac-2-dash":"AAC","heaac-2hq-dash":"AAC","heaac-5.1-dash":"AAC","playready-heaac-2-dash":"AAC","heaac-2-elem":"AAC","heaac-2-m2ts":"AAC","xheaac-dash":"XHEAAC","ddplus-5.1-piff":"DDPLUS","ddplus-2.0-dash":"DDPLUS","ddplus-5.1-dash":"DDPLUS","ddplus-atmos-dash":"DDPLUS","dd-5.1-elem":"DD","dd-5.1-m2ts":"DD"}},function(t,e,i){var n,r,a,o,s,u;function c(t,e,i){return(i=r.NG.call(this,t,e,n.u.Audio,i)||this).config=t,i.lk=e,i.type=n.Ww.Iz,i}_esm(e),e.c3=void 0,n=i(26),r=i(484),a=i(123),t=i(125),o=i(394),s=i(281),u=(new t.tH).format,S(c,r.NG),c.prototype.k1=function(){var t=u(c.Nfa,a.Rd.Rpb);return Promise.resolve(this.config().eP&&this.lk.isTypeSupported(t))},c.prototype.ut=function(){return o.Eha.ut()},c.prototype.r7a=function(){return this.config().uI},c.prototype.IX=function(t){return this.config().f5b?Promise.resolve(new s.M4(t,t.map(function(){return{supported:!0}}))):r.NG.prototype.IX.call(this,t)},(e.c3=c).Nfa="audio/mp4; codecs={0};"},function(t,e,i){var r,n,a,o,s;function u(t,e,i,n){this.config=t,this.lk=e,this.mediaType=i,this.eC=n,this.Sxa={},this.Sxa[r.u.Audio]="audio",this.Sxa[r.u.STa]="video"}_esm(e),e.NG=void 0,r=i(26),t=i(125),n=i(172),a=i(14),o=i(281),s=(new t.tH).format,u.prototype.L7a=function(t){return this.gNb(this.IUb(this.r7a(),t))},u.prototype.DI=function(t){return this.lk.isTypeSupported(t)},u.prototype.QSb=function(){return[n.If.uga,n.If.Prb,n.If.QG,n.If.SG]},u.prototype.hYb=function(){this.hs=[],this.Uy=[],this.config().h5b&&this.Uy.push(n.If.eA),this.config().ieb&&this.Uy.push(n.If.qKa),this.config().heb&&this.Uy.push(n.If.pKa),this.config().geb&&this.Uy.push(n.If.Zw),this.config().feb&&this.Uy.push(n.If.gD),this.config().jeb&&this.Uy.push(n.If.HD),this.config().eeb&&this.Uy.push(n.If.sl),this.Uy=this.Uy.concat(this.QSb()),this.config().gPb||this.hs.push(n.If.eA),this.config().s3a||this.hs.push(n.If.Spb),this.config().r3a||this.hs.push(n.If.Tpb),this.config().eP||this.hs.push(n.If.Upb),this.config().TOb||this.hs.push(/prk$/),this.config().geb||this.config().FOb||this.hs.push(n.If.Zw),this.config().ieb||this.config().IOb||this.hs.push(n.If.qKa),this.config().heb||this.config().Dra||this.hs.push(n.If.pKa),this.config().feb||this.config().cP||this.hs.push(n.If.gD),this.config().jeb||this.config().cPb||this.hs.push(n.If.HD),this.config().eeb||this.config().wOb||this.hs.push(n.If.sl),this.config().aPb||this.hs.push(n.If.HM)},u.prototype.IUb=function(t,e){var i=a.Ye.hardwareConcurrency&&a.Ye.hardwareConcurrency;return t.filter(function(t){return!(void 0!==t.minimumCores&&i<t.minimumCores||!(void 0===t.restrictToUILabels||void 0!==(null==e?void 0:e.he)&&t.restrictToUILabels.includes(e.he)))}).map(function(t){return t.name})},u.prototype.IX=function(e){var n=this,t=e.map(function(t){for(var e=rt(n.Uy),i=e.next();!i.done;i=e.next())if(i.value.test(t))return Promise.resolve({supported:!0});for(i=(e=rt(n.hs)).next();!i.done;i=e.next())if(i.value.test(t))return Promise.resolve({supported:!1,reason:"excluded"});return n.HX(t).catch(function(){return{supported:!1,reason:"exception"}})});return Promise.all(t).then(function(t){return new o.M4(e,t)})},u.prototype.HX=function(e){var i=this;return this.gwa(e).then(function(t){return t.supported?i.config().QOb?i.eC.HX(e):i.jsa(e):t})},u.prototype.jsa=function(t){var e="";return(t=this.c0[t])?(Array.isArray(t)&&(e=1<t.length?" "+t[1]:"",t=t[0]),t=s("{0}/mp4; codecs={1};{2}",this.Sxa[this.mediaType],t,e),this.DI(t)?Promise.resolve({supported:!0}):Promise.resolve({supported:!1,reason:"can-present-type"})):Promise.resolve({supported:!1,reason:"no-codec-info"})},u.prototype.gNb=function(t){return this.hYb(),this.IX(t)},u.prototype.gwa=function(){return Promise.resolve({supported:!0})},nt.Object.defineProperties(u.prototype,{c0:{configurable:!0,enumerable:!0,get(){return this.UWa||(this.UWa=this.ut()),this.UWa}}}),e.NG=u},function(t,e){_esm(e),e.iNa="MediaCapabilitiesDetectorSymbol"},function(t,e){_esm(e),e.mNa="MediaCapabilitiesSymbol"},function(t,e){_esm(e),e.lNa="MediaCapabilitiesLogHelperSymbol"},function(t,e){_esm(e),e.jRa="PresentationAPISymbol"},function(t,e){_esm(e),e.k4="IndexedDBConfigSymbol"},function(t,e){_esm(e),e.kMa="LocalStorageSymbol"},function(t,e){_esm(e),e.JNa="MemoryStorageSymbol"},function(t,e){_esm(e),e.EGa="BookmarkSymbol"},function(t,e){_esm(e),e.CGa="BookmarkConfigSymbol"},function(t,e){_esm(e),e.BGa="BookmarkConfigParserSymbol"},function(t,e){_esm(e),e.WGa="CDMAttestedDescriptorProvider"},function(t,e){_esm(e),e.ZMa="ManifestProviderConfigSymbol"},function(t,e,i){var n;function r(){}_esm(e),e.Hka=void 0,n=i(14),r.q7a=function(){var t=n.hx&&n.hx.height;return t&&1080<=t?1080:720},e.Hka=r},function(t,e,i){var a;function n(t){this.log=t}_esm(e),e.$T=void 0,a=i(499),n.prototype.vlb=function(t,n){var i,r=this;return t?((i=t.map(function(t){var e,i=new a.MediaStream(n,n.type,t.hq,t.bitrate,t.eb,t.size,r.aTb(t.urls),t.CE,t.g5a/t.f5a,t.Aj,t.Qj);return i.Abc(t.ohb,t.mBa,t.Neb,t.Meb),i.Pac(null!=(e=t.JLb)?e:void 0,null!=(e=t.KLb)?e:void 0,null!=(e=t.ILb)?e:void 0,null!=(e=t.HLb)?e:void 0,null!=(e=t.Neb)?e:void 0,null!=(e=t.Meb)?e:void 0),n.om&&(i.om=n.om),t.WI&&(i.WI=null!=(e=t.WI)?e:void 0),t.CE&&(i.mf=t.CE),i})).sort(function(t,e){return t.bitrate-e.bitrate}),i.forEach(function(t,e){t.lower=i[e-1],t.Spc=i[e+1]}),i):(this.log.warn("There are no media streams for "+n.type+" track - "+n.trackId),[])},n.prototype.aTb=function(t){return t.reduce(function(t,e){return t[e.Bo]=e.url,t},{})},e.$T=n},function(t,e,i){var a,o,s;function n(t,e,i,n,r,a,o,s,u,c,h){this.track=t,this.type=e,this.Wb=i,this.bitrate=n,this.eb=r,this.size=a,this.sv=o,this.mf=s,this.framerate=u,this.Aj=c,this.Qj=h,this.Bh={Type:e,Bitrate:n,DownloadableId:i}}_esm(e),e.Kpb=e.MediaStream=void 0,a=i(17),o=i(15),s=i(91),n.prototype.toJSON=function(){return this.Bh},n.prototype.Abc=function(t,e,i,n){o.rd(t)&&o.rd(e)&&(this.width=t,this.height=e,o.Oa(i)&&o.Oa(n)&&(this.width=Math.round(i/n*t)),this.Bh.Resolution=(this.width||"")+":"+(this.height||""))},n.prototype.Pac=function(t,e,i,n,r,a){o.rd(t)&&o.rd(e)&&o.rd(i)&&o.rd(n)&&(this.Eqa=t,this.L1a=e,this.K1a=i,this.J1a=n),o.rd(r)&&o.rd(a)&&(this.Oeb=r,this.Peb=a)},e.MediaStream=n,e.Kpb=function(t,e,i,n,r){return t==a.o4||t===s.pj.audio?e:t==a.WT||t===s.pj.video?i:t==s.pj.zfa?n:t==s.pj.dEa?r:void 0}},function(t,e){_esm(e),e.FQa="PlayerTextTrackFactorySymbol"},function(t,e){_esm(e),e.vTa="TrickPlayFactorySymbol"},function(t,e){_esm(e),e.cNa="ManifestVerifyErrorFactorySymbol"},function(t,e){_esm(e),e.sPa="PboLinksManagerSymbol",e.qPa="PboLinksManagerFactorySymbol"},function(t,e){_esm(e),e.VMa="ManifestEnricherSymbol"},function(t){t.exports=function(){for(var t=0;t<arguments.length;t++)if(null!=arguments[t])return arguments[t];return null}},function(t,e){_esm(e),e.fja="MslReadyNotifierSymbol"},function(t,e){_esm(e),e.pIa="DeviceIdGeneratorSymbol"},function(t,e){function n(t,e,i){if(null!=i){if(0<i(t,e))throw n.w1a(t,e)}else if(t.lm&&0<t.lm(e))throw n.w1a(t,e);this.start=t,this.end=e}_esm(e),e.kka=void 0,n.w1a=function(t,e){return new RangeError("end ["+e+"] must be >= start ["+t+"]")},e.kka=n},function(t,e){_esm(e),e.sIa="DeviceProviderSymbol"},function(t,e){_esm(e),e.cPa="PboBindDeviceCommandSymbol"},function(t,e){_esm(e),e.DMa="LogblobSenderSymbol"},function(t,e){_esm(e),e.LNa="MessageQueueSymbol"},function(t,e){_esm(e),e.uPa="PboLogblobCommandSymbol"},function(t,e){_esm(e),e.PTa="UuidProviderSymbol"},function(t,e){_esm(e),e.KFa="AppLogSinkSymbol"},function(t,e,i){var A,_,E,k,S,d,T,I,O,x,R,P,s,C,j,N,M,D,y,L,B,U;function n(t,e,i,n,r,a,o,s,u,c,h,f,l,d,p,b,g,m,v,y){var w=this;this.j=t,this.Ca=e,this.Tkb=i,this.xg=n,this.Pxa=r,this.esa=a,this.Le=o,this.d9=s,this.pf=u,this.config=c,this.zd=h,this.Da=f,this.Ga=l,this.$r=d,this.WB=p,this.Kj=b,this.Hv=g,this.dK=m,this.Dc=v,this.HQ=y,this.y1=[],this.Yxa=this.tF=this.u0=0,this.WO=[],this.Qna=!1,this.rG=function(t){var e,i,n,r,a={};try{a={playdelaysdk:T.rg(w.j.AW()),applicationPlaydelay:T.rg(w.j.ipa()),playdelay:T.rg(w.j.kpa()),trackid:w.j.ql,bookmark:T.rg(w.j.mt||0),pbnum:w.j.index,endianness:E.g6a()},w.config().dPb&&(a.transitiontime=w.j.eo,a.uiplaystarttime=w.j.kb.HS,a.playbackrequestedat=w.j.Jj.ka(I.pa),a.clockgettime=w.getTime(),a.clockgetpreciseepoch=w.Da.Ef.ka(I.pa),a.clockgetpreciseappepoch=w.Ga.UB.ka(I.pa),a.absolutestarttime=w.j.lJ(),a.relativetime=w.j.t7a()),w.d$(a,"startplay")}catch(t){w.log.error("error in startplay log fields",t)}if(w.j.Ui&&(a.blocked=w.j.Ui),w.Dc.Z8a(a),j.Oa(w.j.VZa)&&(a.bookmarkact=T.rg(w.j.VZa)),(e=w.j.sd.at&&w.j.sd.ats?w.j.sd.at-w.j.sd.ats:void 0)&&(a.nccpat=e),(e=w.j.sd.lr&&w.j.sd.lc?w.j.sd.lr-w.j.sd.lc:void 0)&&(a.nccplt=e),(e=w.j.sd.lc&&w.j.sd.lg?w.j.sd.lc-w.j.sd.lg:void 0)&&(a.lct=e),(e=w.pB())&&(a.downloadables=e),bt._cad_global.device&&j.rd(bt._cad_global.device.s9)&&(a.esnSource=bt._cad_global.device.s9),T.He(a,w.$r,{prefix:"pi_"}),w.j.$p&&w.j.$p.initBitrate&&(a.initvbitrate=w.j.$p.initBitrate),w.j.$p&&w.j.$p.selector&&(a.selector=w.j.$p.selector),a.fullDlreports=w.Bmb,w.j.state.value>=C.dc.Me)try{(i=w.j.mv())&&(w.maxBitrate=E.bT(i.map(function(t){return t.bitrate})),w.Ibb=E.bT(i.map(function(t){return t.height})),n=0<i.length?L.$7a(function(t,e){return t.height===e.height},i).map(function(t){return N.Dxa(t,function(t){return t.bitrate})}):void 0,a.maxbitrate=w.maxBitrate,a.maxresheight=w.Ibb)}catch(t){w.log.error("Exception computing max bitrate",t)}try{(r=E.wJ())&&(a.pdltime=r)}catch(t){}try{T.He(a,w.j.sd,{prefix:"sm_"}),T.He(a,w.j.R$(),{prefix:"vd_"})}catch(t){}if(t&&w.j.xw&&(a.pssh=w.j.xw),w.c9a(w.j,a),a.avtp=w.zL.So().PDa,null!=(e=w.j.La)&&e.OD&&w.taa(a),w.j.Vb.value)try{a.ttTrackFields=w.j.Vb.value.Bh}catch(t){}w.Dc.W8a(a,w.j.Bc.value,w.Ca),w.Dc.aQ(a,!0,w.j.Jh.value,w.Ca),w.j.ja&&(a.packageId=w.j.ja.hb.ip),w.j.ja&&w.j.ja.hb.Co&&(a.hasChoiceMap=!0),w.UZb(n),w.TZb(),t&&(w.qva(a),w.sva(a)),w.Y8a(w.j,a),w.FJ(w.j,a),w.GJ(w.j,a),w.pF(w.j,a,w.Qna),w.UY(w.j,a),w.BXb(w.j,a),w.rva(a),w.uva(a),w.Dc.$P(a),w.X8a(a),w.Dc.vaa(a,w.Ca),w.tva(a),w.Jc(M.bd.rG,t,U.Xe|U.Iu|U.oj|U.Ju|U.MG|U.H2|U.PG|U.Tq,a)},this.MR=function(t,e,i){e={playdelay:T.rg(t),reason:i,intrplayseq:w.tF-1,skipped:e},"repos"===i&&(e.prstate=!0===w.j.paused.value?"paused":"playing"),w.GJ(w.j,e),w.Jc(M.bd.MR,!1,U.Xe|U.Iu|U.oj,e),"rebuffer"!==i&&"force_rebuffer"!==i||w.j.Am.YCb(Number(T.rg(t)))},this.zO=function(t,e,i,n){t={moff:T.wn(i),moffms:T.rg(i),vbitrate:e.bitrate,vbitrateold:t.bitrate,vdlid:e.Wb,vdlidold:t.Wb,vheight:e.height,vheightold:t.height,vwidth:e.width,vwidthold:t.width,bw:n},w.GJ(w.j,t),w.pF(w.j,t),w.Jc(M.bd.zO,!1,U.oj,t)},this.ZAa=function(t,e,i){t={moff:T.wn(i),moffms:T.rg(i),vdlidold:t.Wb,vbitrateold:t.bitrate},w.GJ(w.j,t),w.pF(w.j,t),w.Dc.Sr(t,e,w.j.Rf.value&&w.j.Rf.value.stream),w.Jc(M.bd.Xgb,!1,U.oj,t)},this.Iza=function(){var t,e={waittime:T.rg(w.j.t7a()),abortedevent:"startplay",trackid:w.j.ql,prstate:w.DB(),paustate:w.j.paused.value};w.d$(e,"endplay"),w.Hv.xX&&(e.eventlist_version=1,e.eventlist=w.dK.j7a(w.j)),w.j.$p&&w.j.$p.initBitrate&&(e.initvbitrate=w.j.$p.initBitrate);try{(t=E.wJ())&&(e.pdltime=t),T.He(e,w.j.sd,{prefix:"sm_"})}catch(t){}w.nva(e,!0),w.Dc.vaa(e,w.Ca),w.Dc.aQ(e,!1,w.j.Jh.value,w.Ca),w.qva(e),w.Dc.Sr(e,w.j.tf.value,w.j.Qh.value),w.c9a(w.j,e),w.FJ(w.j,e),w.UY(w.j,e),w.tva(e),w.sva(e),w.Jc(M.bd.sda,!1,U.Xe|U.oj|U.MG|U.Ju|U.Tq,e)},this.Hza=function(t,e){t={waittime:T.rg(t),abortedevent:"resumeplay",resumeplayreason:e},w.j.$p&&w.j.$p.initBitrate&&(t.initvbitrate=w.j.$p.initBitrate),w.Dc.Sr(t,w.j.tf.value,w.j.Qh.value),w.UY(w.j,t),w.Jc(M.bd.sda,!1,U.Xe|U.oj|U.Tq,t)},this.gDa=function(t,e,i){w.GJ(w.j,t={newstate:e?"Paused":"Playing",oldstate:t?"Paused":"Playing",reason:i}),w.pF(w.j,t),w.Dc.Sr(t,w.j.Ie.value&&w.j.Ie.value.stream,w.j.Rf.value&&w.j.Rf.value.stream),w.Jc(M.bd.Tjb,!1,U.Xe|U.oj,t)},this.Jva=function(t,e,i){t=T.He({vdlid:w.j.tf.value.Wb,playingms:t,pausedms:e,intrplayseq:w.tF++,prstate:w.DB(),paustate:w.j.paused.value},i),w.d$(t,"intrplay"),e=w.j.xc[B.u.J].value,i=w.j.xc[B.u.P].value,t.cdnid=t.vcdnid=e&&e.id,t.acdnid=i&&i.id,t.locid=w.oZ&&w.oZ.Ywa,t.loclv=w.oZ&&w.oZ.Eab,t.avtp=w.zL.So().PDa,t.mediabuffered=null==(e=w.j.qf)?void 0:e.i$(),null!=(i=w.j.La)&&i.OD&&(w.nva(t,!0),w.taa(t),w.a9a(t));try{T.He(t,w.j.R$(),{prefix:"vd_"})}catch(t){}w.GJ(w.j,t),w.pF(w.j,t),w.Dc.Sr(t,w.j.Ie.value&&w.j.Ie.value.stream,w.j.Rf.value&&w.j.Rf.value.stream),w.Jc(M.bd.Jva,!1,U.Xe|U.oj,t)},this.HR=function(t,e,i){t={moffold:T.wn(t),reposseq:w.u0++,prstate:w.DB(),paustate:w.j.paused.value},w.pF(w.j,t),w.Dc.Sr(t,i&&i.stream,e&&e.stream),w.Jc(M.bd.HR,!1,U.Xe|U.oj,t)},this.woa=function(){var t,e,i=w.j.Bc.value,n=w.j.Qh.value.Wb;i=i?{trackId:i.trackId,bcp47:i.Bf,downloadableId:n,rank:i.cc,chan:i.channels}:{},n=w.SB,e=null==(t=w.wwa)?void 0:t.Wb,t=n?{trackId:n.trackId,bcp47:n.Bf,downloadableId:e,rank:n.cc,chan:n.channels}:{},w.Jc(M.bd.vZa,!1,U.Xe|U.oj,{switchdelay:T.rg(w.getTime()-w.xwa),track:i,oldtrack:t})},this.b1=function(t){w.Jc(M.bd.Gjb,!1,U.Xe|U.oj,{speedold:Math.floor(1e3*t.oldValue),speed:Math.floor(1e3*t.newValue)})},this.vS=function(){w.Jc(M.bd.rec,!1,U.Xe|U.oj,{track:w.j.Vb.value.Bh})},this.SC=function(t){var e,i=w.j.Vb.value;(t.newValue||i&&i.Vr()&&!i.uq())&&(e=(t=null!=(e=t.newValue)?e:i)?{trackId:t.trackId,bcp47:t.Bf,downloadableId:t.Wb,rank:t.cc,isImageBased:t.Il}:{},t=(t=w.Jwa)?{trackId:t.trackId,bcp47:t.Bf,downloadableId:t.Wb,rank:t.cc,isImageBased:t.Il}:{},e={switchdelay:T.rg(w.getTime()-w.Iwa),track:e,oldtrack:t},w.Dc.Sr(e,w.j.Ie.value&&w.j.Ie.value.stream,w.j.Rf.value&&w.j.Rf.value.stream),w.Jc(M.bd.elb,!1,U.Xe|U.oj,e))},this.Br=function(t){w.Jc(M.bd.xFb,!1,U.Xe|U.oj,t.newValue)},this.TGb=function(t,e){var i=e.serverid,n={locid:e.location,loclv:e.locationlv,selocaid:i,selcdnid:i,selocaname:e.servername};n.mediatype=e.mediatype,n.selreason=e.selreason||"unknown",n.seldetail=e.seldetail,n.cdnbwdata=JSON.stringify([{id:i}]),t&&(n.oldlocid=t.Ywa,n.oldloclv=t.Eab,n.oldocaid=t.Eac,n.oldocaname=t.dL),w.Jc(M.bd.G_a,!1,U.H2,n)},this.H2a=function(){var t,e,i;if(w.j.Jg)try{t=!1,w.Bmb||(t=!0,w.WO=w.WO.filter(function(t){return!t.ha})),0<w.WO.length&&(e=w.d9.construct(w.WO,w.j.Jj.ka(I.pa)),w.WO=[],e.erroronly=t,i={},T.ih(e,function(t,e){i[t]=JSON.stringify(e)}),w.Jc(M.bd.BNb,!1,U.oj,i))}catch(t){w.log.error("Exception in dlreport.",t)}},this.DB=function(){var t=w.j.Gb.value;return t===C.rb.Gc?"playing":t===C.rb.Ug?"paused":t===C.rb.Gs?"ended":"waiting"},this.IF=function(){var t,e;w.j.state.value==C.dc.Me&&(e=w.L_(),w.config().fBa&&(e.avtp=w.zL.So().PDa,null!=(t=w.j.La)&&t.OD&&w.taa(e)),e.mediabuffered=null==(t=w.j.qf)?void 0:t.i$(),e.midplayseq=w.Yxa++,e.prstate=w.DB(),e.paustate=w.j.paused.value,w.config().Aac&&w.pkb("midplay"),w.config().Xt&&w.vva(e),w.rva(e),w.uva(e),w.Dc.$P(e),w.Jc(M.bd.IF,!1,U.Xe|U.oj|U.MG|U.Ju,e))},this.pkb=function(t){var e,i={};i.trigger=t;try{e=w.j.Xta(),i.subtitleqoescore=w.j.qp.rVb(e),i.metrics=JSON.stringify(w.j.qp.rua(e))}catch(t){w.log.error("error getting subtitle qoe data",t)}w.Jc(M.bd.vdc,!1,U.Xe|U.MG|U.Iu,i)},this.transition=function(t){w.pF(w.j,t),w.UY(w.j,t),w.Jc(M.bd.transition,!1,0,t)},this.WBa=function(t,e){w.Jc(M.bd.WBa,e,0,t)},this.$I=function(t){var e=w.L_();w.d$(e,"endplay"),e.prstate=w.DB(),e.paustate=w.j.paused.value,e.muted=w.j.muted.value,w.j.VC&&"downloaded"===w.j.VC.MP()&&(e.trickplay_ms=w.j.I1.offset,e.trickplay_res=w.j.I1.nhb),w.config().Kmb&&(e.rtinfo=w.j.VUb()),w.config().fBa&&null!=(n=w.j.La)&&n.OD&&w.taa(e),e.endreason=t?"error":w.j.Gb.value===C.rb.Gs?"ended":"stopped",(n=w.$r)&&T.He(e,n,{prefix:"pi_"});try{T.He(e,w.j.sd,{prefix:"sm_"})}catch(t){}if(w.j.mva&&(e.inactivityTime=w.j.mva),w.nva(e,t),w.a9a(e),w.j.a8){for(var i,n=w.j.a8,r=w.config().lO,a=w.j.loadTime,o={iv:r,seg:[]},s=n.hW.map(u=function(t,e,i){return 0===e||void 0===i[e-1]?t:t-i[e-1]}),u=n.X1.map(u),c=0;c<s.length;c++)(s[c]||u[c])&&(i?(i.ams.push(s[c]),i.vms.push(u[c])):i={ams:[n.hW[c]],vms:[n.X1[c]],soffms:n.startTime+c*r-a}),c!==s.length-1&&s[c]&&u[c]||!i||(o.seg.push(i),i=void 0);e.bt=JSON.stringify(o)}t&&(w.qva(e),w.sva(e)),w.pkb("endplay"),w.config().Xt&&w.vva(e),w.Dc.aQ(e,!1,w.j.Jh.value,w.Ca),w.Y8a(w.j,e),w.FJ(w.j,e),w.GJ(w.j,e),w.pF(w.j,e,w.Qna),w.UY(w.j,e),w.rva(e),w.uva(e),w.Dc.$P(e),w.CXb(e),w.X8a(e),w.EXb(e),w.DXb(e),w.GXb(e),w.tva(e),w.HXb(e),w.Jc(M.bd.$I,t,U.Xe|U.Iu|U.oj|U.MG|U.Ju|U.PG|U.Tq,e)},this.INb=function(t){w.WO.push(w.d9.NIb(t.response))},this.mra=function(t){var e,i,n,r,a=(t=t.response).request,o=t.request.fC;if((e=a.track)&&(i=!t.ha&&t.Ba!=O.Y.qD,n=e.type,r=t.xm,i||w.Ca.cxa)){switch(o={dltype:n,url1:a.url,url2:t.url||"",cdnid:a.xc&&a.xc.id,tresp:T.rg(r.hj-r.ps),brecv:T.R4a(r.PW),trecv:T.rg(r.Fq-r.hj),sbr:o&&o.bitrate},t.bu&&(o.range=t.bu),n){case k.pj.audio:o.adlid=a.stream.Wb;break;case k.pj.video:o.vdlid=a.stream.Wb;break;case k.pj.zfa:o.ttdlid=e.Wb}(a=D.Sta(t.Ba))&&(o.nwerr=a),t.El&&(o.httperr=t.El),w.Jc(M.bd.mra,i,U.oj,o)}},this.Ui=function(){w.Jc(M.bd.SZa,!1,U.Xe|U.MG|U.Tq,{})},this.gIb=function(t){var e,i=t.response.xm;t=I.vc(i.hj),e=I.vc(i.Fq),(i=x.fa(i.PW||0)).y$a()||i.$va()||(t=new R.kka(t,e),w.zL.RCb(new P.xIa(t,i)))},this.ida=function(t){var e,i=t.newValue;t.Vk&&t.Vk.Gca&&i&&(null==(e=t.Vk)||!e.reason)||i==w.SJ||(w.gDa(w.SJ,i,null==(e=t.Vk)?void 0:e.reason),w.SJ=i)},this.TA=function(t){function e(e){var t;if(w.j.Yb&&w.j.Yb.sourceBuffers&&(t=w.j.Yb.sourceBuffers.filter(function(t){return t.type===e}).pop()))return{busy:t.vi(),updating:t.updating(),ranges:t.j$()}}(t={cause:t.cause}).cause&&t.cause===_.Mja&&(t.mediaTime=w.j.mediaTime.value,t.buf_audio=e(A.o4),t.buf_video=e(A.WT)),w.Jva(w.y1[C.rb.Gc]||0,w.y1[C.rb.Ug]||0,t)},this.rlb=function(t){var e;t=t.oldValue,e=w.getTime(),t===C.rb.fg?w.y1=[]:w.y1[t]=(w.y1[t]||0)+(e-w.e_b),w.e_b=e},this.gn=function(t){w.xwa=w.getTime(),w.SB=t.oldValue},this.Im=function(t){w.Iwa=w.getTime(),w.Jwa=t.oldValue},this.lW=function(t){w.wwa=t.oldValue},this.CZ=function(t){function e(t,e){var i;if(!t||t.Ywa!==e.location)return i={Ywa:e.location,Eab:e.locationlv,Eac:e.serverid,dL:e.servername},w.TGb(t,e),i}"audio"===t.mediatype?(t=e(w.ZZb,t))&&(w.ZZb=t):(t=e(w.oZ,t))&&(w.oZ=t)},this.P0=function(t){var e=t.mediatype,i=t.reason;"video"===e?"serverswitchaway"===i?(w.xk.summary.qnb++,w.xk.qba=w.Da.Ef.ka(I.pa)):"serverswitchback"===i&&(w.xk.summary.rnb++,w.xk.qba&&(w.xk.summary.snb.push(w.Da.Ef.ka(I.pa)-w.xk.qba),w.xk.qba=void 0)):"audio"===e&&("serverswitchaway"===i?(w.xk.summary.hZa++,w.xk.lba=w.Da.Ef.ka(I.pa)):"serverswitchback"===i&&(w.xk.summary.iZa++,w.xk.lba&&(w.xk.summary.jZa.push(w.Da.Ef.ka(I.pa)-w.xk.lba),w.xk.lba=void 0))),w.Jc(M.bd.Gac,!1,U.Xe|U.oj,{mediatype:t.mediatype,server:t.server,selreason:t.reason,location:t.location,bitrate:t.bitrate,confidence:t.confidence,throughput:t.throughput,oldserver:t.oldserver})},this.aO=function(t){w.Jc(M.bd.pEb,!1,U.oj,{strmsel:t.strmsel})},this.qS=function(t){(t=Object.assign({},t)).details&&(t.details=JSON.stringify(t.details)),w.Jc(M.bd.udc,!0,U.Xe|U.Iu|U.H2,t)},this.Qna=b.JEa||b.Yfa||b.P4a,this.zL=i(),this.log=S.aj(t,"LogblobBuilder"),this.SJ=t.paused.value,this.ga=this.Ca.ga,this.xk={summary:{qnb:0,rnb:0,snb:[],hZa:0,iZa:0,jZa:[]},qba:void 0,lba:void 0}}_esm(e),e.ST=void 0,A=i(17),_=i(61),E=i(40),k=i(91),S=i(9),d=i(23),T=i(25),I=i(5),O=i(4),x=i(52),R=i(508),P=i(1244),s=i(14),C=i(16),j=i(15),N=i(1245),M=i(278),D=i(199),y=i(138),L=i(101),B=i(49),n.prototype.c9a=function(t,e){var i,n,r,a,o,s,u,c,h,f,l,d,p,b,g,m,v;if(this.config().Xt)try{i={},n=this.zd.getStats(void 0,void 0,t.L),r=t.lJ(),a=n.yL.qIb||[],i.attempts=n.Dda||0,i.num_completed_tasks=a.length,o=this.Le.tQb,s={},u=y.tl.rS,c=y.tl.Av,h=y.tl.qpa,n.qm&&(s.scheduled=n.qm-r),(f=t.ja)&&j.Oa(f.QK)&&(s.preauthsent=f.QK-t.loadTime,s.preauthreceived=f.JR-t.loadTime),l=a.filter(function(t){return"manifest"===t.type}),i.mf_succ=l.filter(o("status",u)).length,i.mf_fail=l.filter(o("status",c)).length,d=t.sd,j.rd(d.lg)&&d.lg<0&&t.loadTime&&(s.ldlsent=d.lc,s.ldlreceived=d.lr),p=a.filter(function(t){return"ldl"===t.type}),i.ldl_succ=p.filter(o("status",u)).length,i.ldl_fail=p.filter(o("status",c)).length,n=!0,r=[],"notcached"===t.BI&&(n=!1,r.push("Missing cached manifest")),this.config().wX||(n=!1,r.push("LDL prefetch disabled")),b=p.filter(o("status",h)).length,this.config().wX&&0===b&&(!s.ldlreceived||0<=s.ldlreceived)&&(n=!1,r.push("LDL received after start")),this.config().A3a&&(e.isPrefetchItem?(g=e.prefetchedAudioMs/e.bcABufferLevelMs,(e.prefetchedVideoMs/e.bcVBufferLevelMs<1||g<1)&&(n=!1,r.push("Insufficient media fetched"))):(n=!1,r.push("aseStats not initialized"))),m=a.filter(function(t){return"getHeaders"===t.type}),i.header_succ=m.filter(o("status",u)).length,i.header_fail=m.filter(o("status",c)).length,v=a.filter(function(t){return"getMedia"===t.type}),i.media_succ=v.filter(o("status",u)).length,i.media_fail=v.filter(o("status",c)).length,i.hm_succ=i.header_succ+i.media_succ,i.hm_fail=i.header_fail+i.media_fail,T.He(e,i,{prefix:"pr_"}),this.Hv.xX&&(e.eventlist_version=1,e.eventlist=this.dK.j7a(t)),(e.prefetchCompleted=n)||(e.prefetchFailed=r,T.He(e,s,{prefix:"pe_"})),this.vva(e)}catch(t){this.log.warn("error in collecting video prepare data",t)}},n.prototype.aVb=function(t,e){if((t=t.$X())&&(e=t[e]))return e.va},n.prototype.Y8a=function(t,e){t.kb.$h&&(e.isBranching=!0)},n.prototype.FJ=function(t,e){var i=(null==(i=t.ja)?void 0:i.Xva)||"videopreparer"===t.AI;e.cachedManifest=t.BI,e.cachedLicense=t.AI,e.usedldl=this.config().wX?i.toString():"not_capable"},n.prototype.GJ=function(t,e){var i,n;this.config().FXb&&(i=t.Yta(),n=t.na.ja,i&&n&&(e.segment=i,n=t.eF(),e.segmenttime=n,t=this.aVb(t,i),null!==n&&void 0!==t&&(e.segmentoffset=n-t)))},n.prototype.pF=function(t,e,i){e.pxid=t.zda,void 0!==i&&i&&(e.playgraph_trace=t.gfb)},n.prototype.UY=function(t,e){e.hasContentPlaygraph=t.aaa()},n.prototype.BXb=function(t,e){var n,i;t.aaa()&&(n=t.HE,i=t.ja.hb.Go.ba,e.auxViewables=Object.keys(i.O).map(function(t){return i.O[t].N}).filter(function(t,e,i){return t!==n&&i.indexOf(t)===e}))},n.prototype.a9a=function(t){var e=this.j.Tpc,i=e&&e.Urc;e&&e.iXb&&(t.htwbr=e.iXb,t.pbtwbr=e.vza,t.hptwbr=e.Wpc),e&&e.E$b&&(t.rr=e.E$b,t.ra=e.Qrc),e&&i&&0<(i.length||0)&&(t.qe=JSON.stringify(i))},n.prototype.qva=function(t){var e,i,n;try{(i=(e=this.Le.createElement("canvas")).getContext("webgl")||e.getContext("experimental-webgl"))&&(n=i.getExtension("WEBGL_debug_renderer_info"))&&(t.WebGLRenderer=i.getParameter(n.UNMASKED_RENDERER_WEBGL),t.WebGLVendor=i.getParameter(n.UNMASKED_VENDOR_WEBGL))}catch(t){}},n.prototype.GXb=function(t){t.switchAwaySummary={vsa:this.xk.summary.qnb,vsb:this.xk.summary.rnb,vsbt:this.xk.summary.snb,asa:this.xk.summary.hZa,asb:this.xk.summary.iZa,asbt:this.xk.summary.jZa}},n.prototype.cyb=function(t){return t?Object.keys(t).map(function(t){return+t}):[]},n.prototype.pB=function(){var e,i=this;if(this.j.wz&&this.j.wj)return e=[],this.j.wz.concat(this.j.wj).forEach(function(t){t.streams.forEach(function(t){e.push({dlid:t.Wb,type:t.type,bitrate:t.bitrate,vmaf:t.eb,cdn_ids:i.cyb(t.sv)})})}),JSON.stringify(e)},n.prototype.SGb=function(){var t,a,o;function e(t,e){var i,n=t.cdnId+"$"+t.correlationId,r=o[n];r||(r={cdnid:t.cdnId,pbcid:t.correlationId,dls:[]},o[n]=r,a.push(r)),d.NO(t.bitrate),d.NO(t.duration),n={bitrate:t.bitrate,tm:s.Dp(t.duration)},(i=t.vmaf)&&(d.NO(t.vmaf),n.vf=i),n[e]=T.qk(t.downloadableId),r.dls.push(n)}return t=this.j.Am.kSb(),a=[],o={},t.audio.forEach(function(t){e(t,"adlid")}),t.video.forEach(function(t){e(t,"dlid")}),JSON.stringify(a)},n.prototype.L_=function(){var t,e,i,n,r,a,o,s,u,c,h,f=this.j.Am,l={totaltime:T.wn(f.Ct("content")),totalcontenttime:T.wn(f.CY("content")),totaladtime:T.wn(f.Ct("ads")),totalothertime:T.wn(f.Ct("other")),cdndldist:this.SGb(),reposcount:this.u0,intrplaycount:this.tF};try{for(t={numskip:0,numlowqual:0},i=(e=this.j.qf).AB(),j.Oa(i)&&(l.totfr=i,t.numren=i),i=e.oJ(),j.Oa(i)&&(l.totdfr=i,t.numrendrop=i),i=e.cY(),j.Oa(i)&&(l.totcfr=i,t.numrenerr=i),l.playqualvideo=JSON.stringify(t),(n=this.j.tf.value)&&(l.videofr=n.framerate.toFixed(3)),(r=f.cta())&&(l.abrdel=r),(a=f.haa()&&f.w5a())&&(l.tw_vmaf=a),(o=f.u5a())&&T.He(l,o),l.rbfrs=this.tF,l.maxbitrate=this.maxBitrate,l.maxresheight=this.Ibb,s=this.j.gF(),f=0;f<s.length;f++){if(u=s[f],c=this.Ca.KQ.JC(u)){d.Ua(h),l.maxbitrate=h?h.bitrate:0,l.maxresheight=h?h.height:0,l.bitratefilters=c.join("|");break}h=u}this.j.VC&&(l.trickplay=this.j.VC.MP()),null!==this.j.qp.GZa&&(l.avg_subt_delay=this.j.qp.GZa)}catch(t){this.log.error("Exception reading some of the endplay fields",t)}return T.He(l,this.j.R$(),{prefix:"vd_"}),l},n.prototype.getTime=function(){return this.Ga.Tb().ka(I.pa)},n.prototype.kua=function(){return this.getTime()-this.Ca.Jj.ka(I.pa)},n.prototype.vva=function(t){var e;try{e=this.zd.getStats(),t.pr_cache_size=JSON.stringify(e.cache),t.pr_stats=JSON.stringify(e.NRb)}catch(t){}},n.prototype.rva=function(t){this.log.debug("httpstats",this.pf.Zb),T.He(t,this.pf.Zb,{prefix:"http_"})},n.prototype.nva=function(t,e){var i=this.config().Y1a&&!(this.ga%this.config().Y1a),n=this.j.La,r=null==n?void 0:n.Ni;i&&r&&(t.ASEstats=JSON.stringify(n.Gaa(e)))},n.prototype.taa=function(t){Object.assign(t,this.j.La.bc.xVb())},n.prototype.uva=function(t){var e;try{e=s.gx.memory,j.w$a(e)&&(t.totalJSHeapSize=e.totalJSHeapSize,t.usedJSHeapSize=e.usedJSHeapSize,t.jsHeapSizeLimit=e.jsHeapSizeLimit)}catch(t){}},n.prototype.X8a=function(t){var e;try{this.config().DW&&(e=this.j.sSb(),t.battery=e,this.log.trace("batterystatuses",e))}catch(t){}},n.prototype.CXb=function(t){this.j.K8&&(t.dqec=this.j.K8)},n.prototype.tva=function(t){var e;null!=(e=this.j.ef)&&e.lY?t.keysys=this.j.ef.lY():null!=(e=null==(e=this.j.ef)?void 0:e.mediaKeys)&&e.keySystem?t.keysys=this.j.ef.mediaKeys.keySystem:this.HQ.P$a&&(t.keysys=this.HQ.P$a)},n.prototype.sva=function(t){var e;null!=(e=this.j.ef)&&e.A6a&&(t.keystatus=this.j.ef.vwa)},n.prototype.DXb=function(t){this.dsa&&(t.externaldisplay=this.dsa.rP)},n.prototype.EXb=function(t){var e,i;this.NEa&&(e=this.NEa.map(function(t){return t.Rc}).filter(function(t){return void 0!==t}),(i=N.Dxa(e,function(t){return t.height}))&&(t.media_capabilities_smooth=i.smooth,t.media_capabilities_efficient=i.powerEfficient,t.media_capabilities_bitrate=i.bitrate,t.media_capabilities_height=i.height,t.media_capabilities_width=i.width),t.media_capabilities=e.map(function(t){return{smooth:t.smooth,efficient:t.powerEfficient,bitrate:t.bitrate,height:t.height,width:t.width}}))},n.prototype.HXb=function(t){t.didHydrateTracks=this.j.Y8},n.prototype.TZb=function(){void 0===this.dsa&&(this.dsa=this.esa.lQb())},n.prototype.UZb=function(t){var e=this;void 0===this.NEa&&void 0!==t&&(this.NEa=t.map(function(t){return e.Pxa.isa(t)}))},n.prototype.d$=function(i,t){(t=this.j.CB(t))&&Object.entries(t).forEach(function(t){var e=rt(t);t=e.next().value,e=e.next().value,i[t]=e})},n.prototype.Jc=function(t,e,i,n){var r,a=e?"error":"info";e&&this.j.$i&&O.Pha(this.j.$i.errorCode,this.j.$i.Ba,this.kua(),null==(r=this.j.qf)?void 0:r.AB())&&(a="info"),this.Ena(n,this.j,e,i),t=this.WB.nv(t,a,n,this.Ca),this.xg.Jc(t)},n.prototype.uaa=function(t,e){var i,n=null==(i=e.La)?void 0:i.MLb;(i=n&&(null==n?void 0:n.N)!==e.HE)&&!t.auxMid&&(t.auxMid=n.N),i&&!t.auxPlaybackcontextid&&(t.auxPlaybackcontextid=e.Bn(n.N).Og)},n.prototype.Ena=function(i,t,e,n){var r,a,o;if(this.Dc.uaa(i,t),this.uaa(i,t),n&U.Xe&&(d.Ua(!i||void 0===i.moff),this.Dc.b9a(i,t,t.aaa())),n&U.Iu&&this.Dc.d9a(i,t),n&U.oj&&null!=(r=t.La)&&r.Ni&&(i.abuflbytes=null!=(a=i.abuflbytes)?a:t.roa(),i.abuflmsec=null!=(o=i.abuflmsec)?o:t.eW(),i.vbuflbytes=null!=(o=i.vbuflbytes)?o:t.MEa(),i.vbuflmsec=null!=(o=i.vbuflmsec)?o:t.U1()),n&U.Ju&&this.Dc.e9a(i,t.mp),n&U.MG&&(0<=(r=s.Ye.hardwareConcurrency)&&(i.numcores=r),r=this.Ca.vra)&&(a=r.fta(),i.droppedFrames=JSON.stringify(a),r=r.uJ(this.config().dOb),T.ih(r,function(t,e){i["droppedFramesP"+t]=JSON.stringify(e)})),n&U.H2)try{t.Jg&&(i.cdninfo=JSON.stringify(t.Jg.map(function(t){return{id:t.id,nm:t.name,rk:t.cc,wt:t.location.weight,lv:t.location.level}})))}catch(t){}e&&n&U.PG&&(d.Ua(t.$i),this.Dc.$8a(i,t,t.$i)),n&U.Tq&&this.Dc.pva(i)},nt.Object.defineProperties(n.prototype,{Bmb:{configurable:!0,enumerable:!0,get(){return this.j.vv||this.j.bP}}}),e.ST=n,(i=U=U||{})[i.Xe=1]="MOFF",i[i.Iu=2]="PRESENTEDSTREAMS",i[i.oj=4]="BUFFER",i[i.Ju=8]="SCREEN",i[i.MG=16]="CPU",i[i.H2=32]="CDN",i[i.PG=64]="FATALERROR",i[i.Tq=128]="BROWSERINFO"},function(t,e){_esm(e),e.zIa="DownloadReportBuilderSymbol"},function(t,e,i){var a,s,o,n,r,u,c,h,f;function l(t){this.config=t}_esm(e),e.yIa=void 0,t=i(0),a=i(199),s=i(91),o=i(25),n=i(4),r=i(23),u=i(14),c=i(15),h=i(1),i=i(13),l.prototype.construct=function(t,i){var n,r=this,a={};return t.forEach(function(t){var e=t.url;a[e]||(a[e]=[]),a[e].push(t)}),n=[],o.ih(a,function(t,e){n.push(r.HVb(e,i))}),{urls:n}},l.prototype.HVb=function(t,i){var n=this,e=t[0],r={url:e.url,bitrate:e.bitrate,cdnid:c.fk(e.xc)?e.xc.id:e.xc,dltype:e.DNb,id:e.Wb},a={};return t.forEach(function(t){var e=n.NYb(t)?"fail":"success";a[e]||(a[e]=[]),a[e].push(t)}),o.ih(a,function(t,e){"fail"===t?r.failures=n.kTb(e,i):"success"===t&&(r.downloads=n.cTb(e,i))}),r},l.prototype.cTb=function(t,n){var r,a=this,i={};return t.forEach(function(t){var e=t.VHb;i[e]||(i[e]=[]),i[e].push(t)}),r=[],o.ih(i,function(e,t){var i=[];t.forEach(function(t){i.push(t),a.xYb(t)&&(r.push(a.Z5a(i,n,e)),i=[])}),0<i.length&&r.push(a.Z5a(i,n,e))}),r},l.prototype.Z5a=function(t,e,i){for(var n,r=t.sort(function(t,e){return t.xm.hj<e.xm.hj?-1:t.xm.hj>e.xm.hj?1:0}),a=(s=r[0].xm).ps,o=s.hj,s=s.Fq,u=1;u<t.length;u++)(n=t[u].xm).ps<a&&(a=n.ps),n.hj<o&&(o=n.hj),n.Fq>s&&(s=n.Fq);return u=this.MUb(r),n=r[r.length-1],{time:a-e,tcpid:i?parseInt(i):-1,tresp:o-a,first:u,ranges:this.NUb(r,u),dur:s-o,trace:this.fF(t),status:this.MP(n)}},l.prototype.MUb=function(t){var e=0;return t.forEach(function(t){t.bu&&(e=u.Uz(e,t.bu[0]))}),e},l.prototype.NUb=function(t,e){var i=[];return t.forEach(function(t){t.bu?i.push([t.bu[0]-e,t.bu[1]-e]):i.push([0,-1])}),i},l.prototype.fF=function(t){var i,n=[];return t.forEach(function(t){var e;t=t.xm,i&&(0<(e=t.ps-i.Fq)&&n.push([e,-2]),e=u.Gu(i.Fq,t.ps),0<(e=t.hj-e)&&n.push([e,-3])),n.push([t.Fq-t.hj,t.PW||0]),i=t}),n},l.prototype.xYb=function(t){if(t.Ba===n.Y.qD||t.Ba===n.Y.VG)return!0},l.prototype.MP=function(t){return t.ha?"complete":t.Ba===n.Y.qD?"abort":t.Ba===n.Y.VG?"stall":(r.Ua(!1,"download status should never be: other"),"other")},l.prototype.kTb=function(t,i){var n=this,r=[];return t.forEach(function(t){var e=t.xm;t={time:e.hj-i,tresp:e.hj-e.ps,dur:e.Fq-e.hj,range:t.bu,reason:n.PUb(t),httpcode:t.El,nwerr:a.Sta(t.Ba)},r.push(t)}),r},l.prototype.PUb=function(t){return t.El||t.Ba===n.Y.HT?"http":t.Ba===n.Y.JT?"timeout":"network"},l.prototype.NYb=function(t){return!t.ha&&void 0!==t.ha&&t.Ba!==n.Y.qD&&t.Ba!==n.Y.VG},l.prototype.NIb=function(t){var e,i=t.request,n=i.stream,r=i.track,a=i.url,o=this.$Sb(r,a);switch(o){case s.pj.audio:case s.pj.video:e=i.stream.Wb;break;case s.pj.zfa:case s.pj.dEa:e=r.Wb}return t={bitrate:n&&n.bitrate,DNb:o,Wb:e,xm:t.xm,xc:i.xc,url:a,Of:t.Of,El:t.El,Ba:t.Ba,ha:t.ha,VHb:this.VPb(t)},void 0!==i.offset&&null!=i.length&&(t.bu=[i.offset,i.offset+i.length-1]),t},l.prototype.$Sb=function(t,e){if(t)return t.type;if(0<=e.indexOf("netflix.com")){if(0<=e.indexOf("nccp"))return"nccp";if(0<=e.indexOf("api"))return"api"}return"other"},l.prototype.VPb=function(t){if(t.headers&&(t=t.headers["x-tcp-info"]))return(t=t.split(";").filter(function(t){return 0==t.indexOf("port=")}).map(function(t){return t.split("=")[1]})[0])?o.qk(t):t},f=l,f=t.__decorate([h.$(),t.__param(0,h.l(i.Oc))],f),e.yIa=f},function(t,e){_esm(e),e.UT="LogblobMonitorFactorySymbol"},function(t,e){_esm(e),e.nUa="XhrFactorySymbol"},function(t,e){_esm(e),e.fOa="NetworkMonitorSymbol"},function(t,e){_esm(e),e.eOa="NetworkMonitorFactorySymbol"},function(t,e){_esm(e),e.NJa="FtlDataParserSymbol"},function(t,e){_esm(e),e.RKa="HttpRequesterSymbol"},function(t,e){_esm(e),e.ZOa="PboAcquireLicenseCommandSymbol"},function(t,e,i){var n,r,a,o,s,u;function c(t){var e;if(1481462272!=(t=new a.xT(t)).ls())throw Error("Invalid header");return e={XMR:{Version:t.ls(),RightsID:t.Yy(16)}},h(t,e.XMR,t.buffer.length),e}function h(t,e,i){for(var n,r,a,o,s;t.position<i;){switch(n=t.ci(),r=t.ls(),r-=8,n){case 1:a="OuterContainer";break;case 2:a="GlobalPolicy";break;case 3:a="MinimumEnvironment";break;case 4:a="PlaybackPolicy";break;case 5:a="OutputProtection";break;case 6:a="UplinkKID";break;case 7:a="ExplicitAnalogVideoOutputProtectionContainer";break;case 8:a="AnalogVideoOutputConfiguration";break;case 9:a="KeyMaterial";break;case 10:a="ContentKey";break;case 11:a="Signature";break;case 12:a="DeviceIdentification";break;case 13:a="Settings";break;case 18:a="ExpirationRestriction";break;case 42:a="ECCKey";break;case 48:a="ExpirationAfterFirstPlayRestriction";break;case 50:a="PlayReadyRevocationInformationVersion";break;case 51:a="EmbeddedLicenseSettings";break;case 52:a="SecurityLevel";break;case 54:a="PlayEnabler";break;case 57:a="PlayEnablerType";break;case 85:a="RealTimeExpirationRestriction";break;default:a="Other"}switch(o={Type:f(n)},(s=e[a])?u.isArray(s)?s.push(o):(e[a]=[],e[a].push(s),e[a].push(o)):e[a]=o,n){case 1:case 2:case 4:case 7:case 9:case 54:h(t,o,t.position+r);break;case 5:o.Reserved1=t.ci(),o.MinimumUncompressedDigitalVideoOutputProtectionLevel=t.ci(),o.MinimumAnalogVideoOutputProtectionLevel=t.ci(),o.Reserved2=t.ci(),o.MinimumUncompressedDigitalAudioOutputProtectionLevel=t.ci();break;case 10:o.Reserved=t.Yy(16),o.SymmetricCipherType=t.ci(),o.AsymmetricCipherType=t.ci(),r=t.ci(),o.EncryptedKeyLength=r,n=t.Yy(r),o.EncryptedKeyData=r<=10?n:n.substring(0,4)+"..."+n.substring(n.length-4,n.length);break;case 11:o.SignatureType=t.Yy(2),r=t.ci(),n=t.Yy(r),o.SignatureData=r<=10?n:n.substring(0,4)+"..."+n.substring(n.length-4,n.length);break;case 13:o.Reserved=t.ci();break;case 18:o.BeginDate=t.ls(),o.EndDate=t.ls();break;case 42:o.CurveType=t.Yy(2),r=t.ci(),n=t.Yy(r),o.Key=r<=10?n:n.substring(0,4)+"..."+n.substring(n.length-4,n.length);break;case 48:o.ExpireAfterFirstPlay=t.ls();break;case 50:o.Sequence=t.ls();break;case 51:o.LicenseProcessingIndicator=t.ci();break;case 52:o.MinimumSecurityLevel=t.ci();break;case 57:o.PlayEnablerType=l(t.Yy(16));break;default:o.OtherData=t.Yy(r)}}}function f(t){return"0x"+t.toString(16)}function l(t){return t.substring(6,8)+t.substring(4,6)+t.substring(2,4)+t.substring(0,2)+"-"+t.substring(10,12)+t.substring(8,10)+"-"+t.substring(14,16)+t.substring(12,14)+"-"+t.substring(16,20)+"-"+t.substring(20,32)}_esm(e),e.fMb=e.gMb=e.eMb=e.dMb=e.cMb=void 0,n=i(17),r=i(9),a=i(171),o=i(201),s=i(527),u=i(15),e.cMb=function(t,e,i){e===n.g3&&t&&(t=r.KZa(t),s.Hnb(t,function(t){t.ha&&(t=t.object)&&(t=o.W5a(t,"Body","AcquireLicenseResponse","AcquireLicenseResult","Response","LicenseResponse","Licenses","License"))&&(t=o.web(t))&&(t=r.ht(t))&&(t=c(t))&&i(t)}))},e.dMb=c,e.eMb=h,e.gMb=f,e.fMb=l},function(t,e,i){var r,a,o,s,u;_esm(e),e.Hnb=void 0,r=i(9),a=i(4),o=i(528),s=i(529),u=i(58),e.Hnb=function(t,e){var i,n;try{n=o.Inb(t)}catch(t){r.log.error("xml2xmlDoc exception",t)}u.pg(function(){if(n&&n.documentElement)try{i=s.Jnb(n)}catch(t){r.log.error("xmlDoc2js exception",t)}u.pg(function(){e(i?{ha:!0,object:i}:{ha:!1,Ba:a.Y.Brb})})})}},function(t,e,i){var n,r;_esm(e),e.Inb=void 0,n=i(9),r=i(15),e.Inb=function(t){var e,i;if(r.oQ(t)){if((i=(e=(new DOMParser).parseFromString(t,"text/xml")).getElementsByTagName("parsererror"))&&i[0]){try{n.log.error("parser error details",{errornode:(new XMLSerializer).serializeToString(i[0]),xmlData:t.slice(0,300),fileSize:t.length})}catch(t){}throw Error("xml parser error")}return e}throw Error("bad xml text")}},function(t,u,e){var c;function h(t){var e,i,n,r,a,o,s={};for(s[c.cFa]=t.localName,s[c.i2]=i={},s[c.Enb]=n=[],a=(r=t.attributes).length,e=0;e<a;e++)i[(o=r[e]).localName]=o.value;for(a=(t=t.childNodes).length,i={},e=0;e<a;e++)switch((r=t[e]).nodeType){case u.Mnb:o=(r=h(r))[c.cFa],r[c.Fnb]=s,n.push(r),s[o]?i[o][c.Gnb]=r:s[o]=r,i[o]=r;break;case u.Nnb:case u.Knb:r=r.text||r.nodeValue,n.push(r),s[c.Az]||(s[c.Az]=r)}return s}_esm(u),u.Lnb=u.Knb=u.Nnb=u.Chc=u.Mnb=u.Dhc=u.Jnb=void 0,c=e(201),u.Jnb=function(t){return h(t.nodeType==u.Lnb?t.documentElement:t)},u.Dhc=h,u.Mnb=1,u.Chc=2,u.Nnb=3,u.Knb=4,u.Lnb=9},function(t,e){_esm(e),e.MPa="PboReleaseLicenseCommandSymbol"},function(t,e){_esm(e),e.oPa="PboLicenseRequestTransformerSymbol"},function(t,e){_esm(e),e.ePa="PboCachedPlaydataSymbol"},function(t,e){_esm(e),e.uQa="PlaydataConfigSymbol"},function(t,e){_esm(e),e.Bja={mZ:"keepAlive",splice:"splice"},e.kPa="PboEventSenderSymbol"},function(t,e){_esm(e),e.FPa="PboPlaydataPlaybackMonitorSymbol"},function(t,e){_esm(e),e.NIa="DxDisplaySymbol"},function(t,e){_esm(e),e.QIa="DxManagerSymbol",e.PIa="DxManagerProviderSymbol"},function(t,e){_esm(e),e.rMa="LogDisplayConfigSymbol"},function(t,e){_esm(e),e.kUa="WindowUtilsSymbol"},function(t,e){_esm(e),e.YPa="PlayPredictionDeserializerSymbol"},function(t,e){_esm(e),e.gRa="PreparerManifestFetcherSymbol",e.fRa="PreparerLicenseFetcherSymbol",e.eRa="PreparerLegacyLicenseFetcherSymbol"},function(t,e,i){var n,r,a,o;function s(t){this.Pn=t}_esm(e),e.$ja=e.UQa=void 0,t=i(0),n=i(20),r=i(1),a=i(120),o=i(35),s.prototype.hbb=function(t){var e,i=this;return t.ie.key.ba?Promise.resolve(t.ie.key.ba):(e=t.ie.key.N,t.ie.ph.rm(e).xp.then(function(t){return(t=t.ja).Co?o.$A(t.Co,{config:n.config}):o.oG(e,i.Pn.Bt(e))}))},i=s,i=t.__decorate([r.$(),t.__param(0,r.l(a.xM))],i),e.UQa=i,e.$ja="PlaygraphResolverSymbol"},function(t,e){function i(t){this.Yx=void 0===t?function(){}:t,this.xz=new Map}_esm(e),e.Vka=void 0,i.prototype.store=function(t,e){var i,n=this.generateKey(t);if(this.xz.has(n)&&this.Aya(this.xz.get(n),!0),!t.Ch)for(var r=rt(this.xz),a=r.next();!a.done;a=r.next())a=(i=rt(a.value)).next().value,i=i.next().value,a.includes(":"+t.N+":")&&(this.Aya(i,!0),this.xz.delete(a));this.xz.set(n,e)},i.prototype.rm=function(t,e){var i=null==(n=null==e?void 0:e.yl)?void 0:n.Oe,n=null==(r=null==e?void 0:e.yl)?void 0:r.Ch,r={N:t,Ch:n,Oe:i};return this.has(r)||this.Yx(t,e),this.get(r)},i.prototype.has=function(t){return t=this.generateKey(t),this.xz.has(t)&&!this.xz.get(t).Mr},i.prototype.clear=function(){var e=this;this.xz.forEach(function(t){e.Aya(t,!1)}),this.xz.clear()},i.prototype.get=function(t){return this.xz.get(this.generateKey(t))},i.prototype.generateKey=function(t){var e=t.Oe,i=t.Ch;return t.N.toString()+(i?":"+i:"")+(e?":"+e:"")},i.prototype.Aya=function(t,e){var i;null!=(i=t.events)&&i.emit("viewableEvicted",{type:"viewableEvicted"}),t.BDa=e},e.Vka=i},function(t,e){_esm(e),e.sNa="MediaHttpSymbol"},function(t,e){_esm(e),e.yOa="OpenConnectSideChannelSymbol",e.CNa="MediaRequestDownloaderSymbol"},function(t,e){_esm(e),e.ANa="MediaRequestConstructorFactorySymbol"},function(t,e){_esm(e),e.iPa="PboDispatcherSymbol"},function(t,e){_esm(e),e.uTa="TransportFactorySymbol",e.UNa="MslTransportSymbol",e.DSa="SslTransportSymbol"},function(t,e,i){var n,r;function a(t){return!(!t||!t.UF&&!t.pboc||!t.code&&!t.code)}function o(t){return!(!t||!t.Kc)}function s(t){return!!(t instanceof Error)}function u(t){switch(t){case"ACCOUNT_ON_HOLD":return r.Y.bub;case"STREAM_QUOTA_EXCEEDED":return r.Y.kub;case"INSUFFICICENT_MATURITY":return r.Y.pub;case"TITLE_OUT_OF_WINDOW":return r.Y.xub;case"CHOICE_MAP_ERROR":return r.Y.jub;case"BadRequest":return r.Y.rub;case"Invalid_SemVer_Format":return r.Y.qub;case"RESTRICTED_TO_TESTERS":return r.Y.vub;case"AGE_VERIFICATION_REQUIRED":return r.Y.hub;case"BLACKLISTED_IP":return r.Y.iub;case"DEVICE_EOL_WARNING":return r.Y.qja;case"DEVICE_EOL_FINAL":return r.Y.AOa;case"INCORRECT_PIN":return r.Y.EOa;case"MOBILE_ONLY":return r.Y.uub;case"MDX_CONTROLLER_CTICKET_INVALID":return r.Y.tub;case"VIEWABLE_RESTRICTED_BY_PROFILE":return r.Y.yub;case"RESET_DEVICE":return r.Y.DOa;case"RELOAD_DEVICE":return r.Y.COa;case"EXIT_DEVICE":return r.Y.BOa;case"FREE_PREVIEW_ENDED":return r.Y.oub;case"STREAMING_LOCATION_DISALLOWED":return r.Y.wub;case"EXTRA_MEMBER_STREAM_HOLD":return r.Y.nub;case"EXTRA_MEMBER_REMOVED_STREAM_HOLD":return r.Y.mub;case"ADS_UNAVAILABLE_VIEWABLE":return r.Y.cub;case"ADS_UNSUPPORTED_DEVICE":return r.Y.fub;case"ADS_UNSUPPORTED_CLIENT_APP_VERSION":return r.Y.dub;case"ADS_UNSUPPORTED_COUNTRY":return r.Y.eub;case"ADS_VPN_USE_DETECTED":return r.Y.gub;default:return r.Y.TJa}}function c(t,e){var i=e.bladeRunnerCode?Number(e.bladeRunnerCode):void 0;return new n.jd(t,u(e.code),"BadRequest"===e.code?r.g4.Sob:void 0,e.code,void 0,e.display,void 0,e.detail,e.display,i,e.alert,e.alertTag)}function h(t,e){return new n.jd(t,e.Kc,e.Xd,void 0,e.iC,e.message,e.details,e.data)}_esm(e),e.l_a=e.m_a=e.CRb=e.HRb=e.An=e.GRb=e.dZ=e.GYb=e.e$a=void 0,n=i(37),r=i(4),e.e$a=a,e.GYb=o,e.dZ=s,e.GRb=u,e.An=function(t,e){return o(e)?h(t,e):a(e)?c(t,e):s(e)?n.jd.Qsa(t,e):new n.jd(t,void 0,void 0,void 0,void 0,"Recieved an unexpected error type",void 0,e)},e.HRb=c,e.CRb=h,e.m_a=function(t,e,i,n,r){var a,o,s,u=e.nib[i];if(void 0===u)throw{UF:!0,code:"FAIL",display:"Unable to build the URL for "+i+" because there was no configuration information",detail:e};if(void 0===(a=u.version))throw{UF:!0,code:"FAIL",display:"Unable to build the URL for "+i+" because there was no version information",detail:e};if(void 0===(o=u.service))throw{UF:!0,code:"FAIL",display:"Unable to build the URL for "+i+" because there was no service information",detail:e};if(void 0===(s=u.orgOverride)&&void 0===(s=e.organization))throw{UF:!0,code:"FAIL",display:"Unable to build the URL for "+i+" because there was no organization information",detail:e};return u.isPlayApiDirect?t.xUb(n)+"/"+s+"/"+o+"/"+a:t.mUb(n)+"/"+s+"/"+o+"/"+a+"/"+(void 0===r?"router":r)},e.l_a=function(t,e){var i={"Content-Type":"text/plain"};return e=e(),t.yYa&&e&&(i["X-Esn"]=e.Fl),i}},function(t,e){_esm(e),e.OPa="PboRequestFactorySymbol"},function(t,e){_esm(e),e.zTa="TrickPlayManagerSymbol"},function(t,e){_esm(e),e.ar=void 0,(t=e.ar||(e.ar={}))[t.z4=0]="NOT_LOADED",t[t.LOADING=1]="LOADING",t[t.ZG=2]="LOADED",t[t.OT=3]="LOAD_FAILED",t[t.zOa=4]="PARSE_FAILED"},function(t,e){_esm(e),e.wGa="BandwidthMeterFactorySymbol"},function(t,e){_esm(e),e.mQa="PlaybackInfoPanelFactorySymbol"},function(t,e){_esm(e),e.GRa="RepositionTraceSymbol",e.ERa="RepositionTraceFactorySymbol"},function(t,e){_esm(e),e.tFa="AdManagerFactorySymbol"},function(v,t,e){var n,i,D,r,a,o,s,L,B,U,F,q,u,H,K,c,G,h,V,Y,J,z,W,X,f,y,Z,w,l,A,et,d,$,tt,_,E,k,p,it,b,S,g;function m(t,e,i,n,r,a,o,s,u,c,h,f,l,d,p,b,g,m,v,y,w,A,_,E,k,S,T,I,O,x,R,P,C,j){var N,M;(N=this).yb=r,this.rl=a,this.KB=o,this.Ga=u,this.kE=c,this.Da=h,this.JZ=f,this.uxa=p,this.zQ=b,this.zd=g,this.Ci=m,this.Kj=v,this.iO=y,this.N_=w,this.kk=A,this.cEa=_,this.xg=E,this.Le=k,this.Jza=S,this.Nn=T,this.chb=I,this.noa=O,this.dK=x,this.tza=R,this.Dna=P,this.$N=C,this.gfb=[],this.ds=new Map,this.Bc=new U.$b(null),this.Jh=new U.$b(null),this.Vb=new U.$b(null),this.uj=new U.$b(null),this.Iw=new U.$b(void 0),this.tf=new U.$b(null),this.Qh=new U.$b(null),this.mediaTime=new U.$b(void 0),this.playbackRate=new it.qQa(1,F.config.Ixa),this.rEa=function(t){return N.Bc.set(t.newValue)},this.cgc=function(t){return N.Jh.set(t.newValue)},this.agc=function(t){return N.Vb.set(t.newValue)},this.wfc=function(t){return N.uj.set(t.newValue)},this.$fc=function(t){return N.Iw.set(t.newValue)},this.bgc=function(t){return N.tf.set(t.newValue)},this.yfc=function(t){return N.Qh.set(t.newValue)},this.Sfc=function(t){return N.Ie.set(t.newValue)},this.Rfc=function(t){return N.Rf.set(t.newValue)},this.Ofc=function(t){return N.mediaTime.set(t.newValue)},this.Sfa=function(t){return N.playbackRate.set(t.newValue)},this.ik={},this.tBa=this.VDa=0,this.Mb=new q.Bk,this.dga={},this.f1=this.Xeb=this.Bm=!1,this.EG=new U.$b(void 0),this.state=new U.$b($.dc.sM),this.tk=new U.$b(!1),this.paused=new U.$b(!1),this.muted=new U.$b(!1),this.volume=new U.$b(F.config.yMb/100),this.Gb=new U.$b($.rb.fg),this.Cf=new U.$b($.Tf.ed),this.ft=new U.$b($.Tf.ed),this.bo=new U.$b($.Tf.ed),this.Rf=new U.$b(null),this.Ie=new U.$b(null),this.bpa=new U.$b(null),this.oaa=L.PKa(this),this.xc=[new U.$b(null),new U.$b(null)],this.Ioa={},this.bP=!1,this.Xa=this.ll=-1,this.hua=function(t,e){return Z.Oa(t=void 0===t?null:t)?(!e||N.ek(e).ja)&&null!=(e=N.La)&&e.Ni?N.La.kv(t):t:null},this.Hdb=function(){N.$Ca()},this.HE=t,this.addEventListener=this.Mb.addListener,this.removeEventListener=this.Mb.removeListener,this.fireEvent=this.Mb.Tc,this.Nna({N:t,X:n,kb:i||{}},F.config.Xt?this.zd.Nv(t):void 0,e),this.log=Y.aj(this),this.C2a=s(this),this.jFb=l(this),this.mp=et.createElement("DIV",B.jka,void 0,{id:this.L}),this.UXb(),this.fd=this.log.z8("Playback"),D.VPa(this),K.BD.Dcb=this,K.BD.Esa||(K.BD.Esa=this),this.fd.info("Playback created",this.Bh),this.cxa?this.fd.info("Playback selected for trace playback info logging"):this.fd.trace("Playback not selected for trace playback info logging"),F.config.Xt&&(this.zd.fWb(this.L),this.addEventListener($.ma.ow,function(){N.zd.hWb(N.L),N.Vb.addListener(function(){N.zd.e8a()}),N.Bc.addListener(function(){N.zd.e8a()})}),this.addEventListener($.ma.eh,function(){N.zd.eWb(N.L)})),this.state.addListener(function(t){N.fd.info("Playback state changed",{From:t.oldValue,To:t.newValue}),W.Ua(t.newValue>t.oldValue)}),H.nf.addListener(H.Vo,this.Hdb,B.E4),M=d(J.Fh(1)),this.mediaTime.addListener(function(){N.VQb(),M.Xl(function(){return N.C4a()})}),this.Gb.addListener(function(t){N.fd.info("PresentingState changed",{From:t.oldValue,To:t.newValue,MediaTime:X.Tj(N.mediaTime.value)},N.fw())}),this.Gb.addListener(function(){N.tk.set(N.Gb.value===$.rb.Gc)}),this.Cf.addListener(function(t){N.fd.info("BufferingState changed",{From:t.oldValue,To:t.newValue,MediaTime:X.Tj(N.mediaTime.value)},N.fw())}),this.ft.addListener(function(t){N.fd.info("AV BufferingState changed",{From:t.oldValue,To:t.newValue,MediaTime:X.Tj(N.mediaTime.value)},N.fw())}),this.bo.addListener(function(t){N.fd.info("Text BufferingState changed",{From:t.oldValue,To:t.newValue,MediaTime:X.Tj(N.mediaTime.value)},N.fw())}),this.Bc.addListener(function(t){W.Ua(t.newValue&&t.newValue.bj),N.fd.info("AudioTrack changed",t.newValue&&{ToBcp47:t.newValue.Bf,To:t.newValue.trackId},t.oldValue&&{FromBcp47:t.oldValue.Bf,From:t.oldValue.trackId},{MediaTime:X.Tj(N.mediaTime.value)})}),this.Vb.addListener(function(t){W.Ua(!t.newValue||t.newValue.bj),N.fd.info("TimedTextTrack changed",t.newValue?{ToBcp47:t.newValue.Bf,To:t.newValue.trackId}:{To:"none"},t.oldValue?{FromBcp47:t.oldValue.Bf,From:t.oldValue.trackId}:{From:"none"},{MediaTime:X.Tj(N.mediaTime.value)})}),this.Gb.addListener(function t(e){e.newValue!==$.rb.fg&&(N.Gb.removeListener(t),N.Bm=!0,N.M_=N.Da.Ef.ka(J.pa),N.Mb.Tc($.ma.Bm))},B.uM),this.Gb.addListener(function t(e){e.newValue!==$.rb.fg&&e.newValue!==$.rb.Ug&&(N.Gb.removeListener(t),N.QB=N.Da.cL,N.Mb.Tc($.ma.ow))}),this.addEventListener($.ma.ow,function(){N.f1=!0,N.Mjb=N.AW(),N.Se("start")}),this.Ie.addListener(function t(e){e.newValue&&e.newValue.stream&&(N.Ie.removeListener(t),N.Eaa=e.newValue.stream.bitrate)}),V.gQa(this),K.Fp.push(this),F.config.r0&&(this.oda=this.Jza(this),this.rda=new G.sQa(this)),K.Qja.forEach(function(t){t(N)}),this.hDb=function(){N.addEventListener($.ma.OK,function(t){(t=t.cause)!==$.Ze.Qz&&t!==$.Ze.CM&&null!=(t=N.La)&&t.stop()}),N.addEventListener($.ma.kl,function(e){var t,i,n,r,a,o,s,u,c;if(N.chb.kl(e),i=e.cause,n=e.skip,r=e.Aca,a=e.Lya,o=e.L,s=e.Uk,N.na.Am.Dya(a,r),i!==$.Ze.CM&&i!==$.Ze.Qz)if(n)if(null!=(i=N.La)&&i.dh(r)){N.fd.trace("Repositioned. Skipping from "+a+" to "+r),e=function(t){N.log.error("streamingSession.skipped threw an exception",t),t=tt.jd.Qsa(z.Z.Znb,t),N.Zt(t.code,t)};try{N.La.$l(r).then(function(t){t.fQ||null!=(t=N.La)&&t.play()}).catch(e)}catch(t){e(t)}}else N.log.error("can skip returned false");else{N.fd.trace("Repositioned. Seeking from "+a+" to "+r);try{u=N.yb.H$(N.na),c=Object.keys(u.O).find(function(t){return(t=u.O[t]).N===o&&t.va<=s&&(null!=(t=t.wa)?t:1/0)>s}),null!=(t=N.La)&&t.iu(s,c)}catch(t){N.log.error("streamingSession.seekByContentPts threw an exception",t),r=tt.jd.Qsa(z.Z.Xnb,t),N.Zt(r.code,r)}}})},this.playbackRate.addListener(function(){var t;null!=(t=N.La)&&t.Ni&&null!=(t=N.La)&&t.Lza()}),this.addEventListener($.ma.TA,function(t){t.cause==K.Nja&&(N.Cf.set($.Tf.ed),null!=(t=N.La)&&t.up(N.qf.d6a()))}),j&&(this.na.ja=j,this.kk.i1(t,j))}_esm(t),t.lQa=void 0,n=e(0),i=e(300),D=e(302),r=e(167),a=e(562),o=e(1319),s=e(1320),L=e(565),B=e(17),U=e(70),F=e(20),q=e(73),u=e(566),H=e(62),K=e(61),c=e(139),G=e(568),h=e(1323),V=e(572),Y=e(9),J=e(5),z=e(4),W=e(23),X=e(93),f=e(25),y=e(58),Z=e(15),w=e(573),l=e(101),A=e(306),et=e(40),d=e(100),$=e(16),tt=e(37),_=e(303),E=e(575),k=e(127),p=e(1328),it=e(1329),b=e(35),S=e(59),g=e(49),m.prototype.Se=function(t,e){e=void 0===e?this.HE:e,null!=(e=this.ds.get(e))&&e.Se(t)},m.prototype.LB=function(t){this.na.LB(t)},m.prototype.aaa=function(){var t;return!(null==(t=this.ja)||!t.hb.Go)},m.prototype.Y$=function(){var t;return!(null==(t=null==(t=null==(t=this.ja)?void 0:t.hb.VN)?void 0:t.jg.length)||!t)},m.prototype.UXb=function(){var e=this;this.Bc.addListener(function(t){return e.na.Bc.set(t.newValue)}),this.Jh.addListener(function(t){return e.na.Jh.set(t.newValue)}),this.Vb.addListener(function(t){return e.na.Vb.set(t.newValue)}),this.uj.addListener(function(t){return e.na.uj.set(t.newValue)}),this.Iw.addListener(function(t){return e.na.Iw.set(t.newValue)}),this.tf.addListener(function(t){return e.na.tf.set(t.newValue)}),this.Qh.addListener(function(t){return e.na.Qh.set(t.newValue)}),this.Ie.addListener(function(t){return e.na.Ie.set(t.newValue)}),this.Rf.addListener(function(t){return e.na.Rf.set(t.newValue)}),this.xc[g.u.P].addListener(function(t){return e.na.xc[g.u.P].set(t.newValue)}),this.xc[g.u.J].addListener(function(t){return e.na.xc[g.u.J].set(t.newValue)}),this.mediaTime.addListener(function(t){return e.na.mediaTime.set(t.newValue)}),this.playbackRate.addListener(function(t){return e.na.playbackRate.set(t.newValue)}),this.Fhb()},m.prototype.Fhb=function(){var e=this;this.na!==this.ZBa&&(this.na.mediaTime.set(this.mediaTime.value),this.na.playbackRate.set(this.playbackRate.value),this.Cs(function(t){return t.Bc},this.rEa),this.Cs(function(t){return t.Jh},this.cgc),this.Cs(function(t){return t.Iw},this.$fc),this.Cs(function(t){return t.Vb},this.agc),this.Cs(function(t){return t.uj},this.wfc),this.Cs(function(t){return t.tf},this.bgc),this.Cs(function(t){return t.Qh},this.yfc),this.Cs(function(t){return t.Rf},this.Rfc),this.Cs(function(t){return t.Ie},this.Sfc),this.Cs(function(t){return t.xc[g.u.P]},function(t){return e.xc[g.u.P].set(t.newValue)}),this.Cs(function(t){return t.xc[g.u.J]},function(t){return e.xc[g.u.J].set(t.newValue)}),this.Cs(function(t){return t.mediaTime},this.Ofc),this.Cs(function(t){return t.playbackRate},this.Sfa),this.Vb.set(this.na.Vb.value),this.Bc.set(this.na.Bc.value,{KYa:!0}),this.Jh.set(this.na.Jh.value),this.uj.set(this.na.uj.value),this.Iw.set(this.na.Iw.value),this.tf.set(this.na.tf.value),this.Qh.set(this.na.Qh.value),this.ZBa=this.na)},m.prototype.Cs=function(t,e){this.ZBa&&t(this.ZBa).removeListener(e),t(this.na).addListener(e)},m.prototype.JGb=function(){var t;return!(null!=(t=this.kg)&&t.dn.value)},m.prototype.load=function(t){var e,i=this;this.load=function(){},this.kfb=t,this.state.value==$.dc.sM&&(this.fd.info("Playback loading",this),this.c3b(),this.Se("asl_load_start"),t=(e=this.kE).startTime,e=e.endTime,Z.rd(t)?Z.rd(e)?this.Se("asl_ended"):this.Se("asl_in_progress"):this.Se("asl_not_started"),this.kE.AZ(function(t){i.Se("asl_load_complete"),t.ha?i.FKb():i.Zt(t.errorCode||z.Z.mia,t)}))},m.prototype.J6b=function(){try{this.state.value===$.dc.LOADING&&(this.pmb(),this.mt=this.iO.EDb({JL:J.vc(this.ea),L:this.L,nda:this.Wx,kb:this.kb,SF:this.kb.$h?F.config.eza:F.config.SF}).ka(J.pa),this.wq.ub&&this.wq.BYa(this.mt),this.loa(),this.FLb())}catch(t){this.Zt(z.Z.tsb,{Ba:z.Y.Om,Sb:f.ff(t)})}},m.prototype.pmb=function(){var t,e={width:1,height:1};this.gF({zmb:!0}).forEach(function(t){e.width*e.height<t.width*t.height&&(e={width:t.width,height:t.height})}),e.height===(null==(t=this.EG.value)?void 0:t.height)&&e.width===(null==(t=this.EG.value)?void 0:t.width)||this.EG.set(e)},m.prototype.Jy=function(){var t,e=this.yb.H$(this);this.t1a(e),null!=(t=this.La)&&t.Nw(e)},m.prototype.oK=function(t){var e,i;W.Ua(this.La,"ASE should be initialized"),(i=this.yb.sY(t))?t===this.yb.Sh?this.La.qt(i,!0,!0)||this.HY(i,{}):null!=(e=this.La)&&e.lj(t,i,!1,!0):this.log.warn("onNextSegmentChanged: Next segment not found")},m.prototype.HY=function(t,e,i){var n,r,a=this;if(i=void 0===i||i,n=this.yb.Ee(t),this.Kj.Yfa&&this.yb.na.N===n.N)return Promise.resolve(this.qf.seek(n.va,$.Ze.DD,void 0));if(n=this.rl.SP(n.N),e=l.bca(n.Fb,e),null!=(n=this.La)&&n.Ni)return this.pI("Transition "+this.yb.Sh+"->"+t),(r=this.ek(t)).eo=this.Ga.Tb().ka(J.pa),r.kb=e,"seamless"!==(null!=(n=this.yb.Ee(t).xe)?n:"seamless")||i?(this.La.HP(t).mO?this.SVb(t,r.L):this.I0(t,r.L)).then(function(){a.pRb(r.L)}):Promise.resolve();throw Error("No streaming session")},m.prototype.I0=function(t,e){var i=this.yb.Sl.O[t].va;return this.pI("NO DATA "+t+", SEEKING "+i+", viewableId: "+e),Promise.resolve(this.qf.seek(i,$.Ze.DD,t,!0))},m.prototype.SVb=function(e,i){var t,n,r,a=this,o=this.La;if(null!=o&&o.Ni)return t=new Promise(function(e){o.addEventListener("stop",function t(){o.removeEventListener("stop",t),e()})}),n=!1,r=new Promise(function(i){a.addEventListener($.ma.OK,function t(){a.removeEventListener($.ma.OK,t),o.stop()}),a.addEventListener($.ma.kl,function t(e){a.removeEventListener($.ma.kl,t),n=e.skip,i()})}),t=Promise.all([t,r]).then(function(){var t=!1;if(!(t=n?o.qt(e,!1,!0):t))return a.pI("Seek forced - ASE chooseNextSegment failed. Likely ASE entered panic mode and chose a default segment."),a.I0(e,i)}),r=o.DO(e,this.yb.Sl.O[e].va),this.qf.seek(r,$.Ze.CM,e,!0),t;throw Error("No streaming session")},m.prototype.Nna=function(t,e,i){var n,r,a,o,s;e=void 0===e?this.KB.hB():e,i=void 0===i?this.Ga.Tb():i,n=!(!F.config.Zmb||e%F.config.Zmb),r=t.N,a=t.X,o=t.kb,t=t.Vi,this.ds.has(r)?this.ds.get(r):(e=this.N_(K.BD.index++,r,a,o,e,i,n,this.na,this.hua,t,this),this.ds.set(r,e),1<this.ds.size&&(e.yQ=this.zQ.create(this,e,!1)),e.KQ=new c.FNa(this,e),s=null==t?void 0:t.Oe,(i=null==(o=null==(a=this.na.ja)?void 0:a.ev)?void 0:o.find(function(t){return t.hb.L===r&&(void 0===s||t.hb.Oe===s)}))&&this.Lda(i,e),1<this.ds.size&&this.kk.Z$(e.L)&&this.Pda(e))},m.prototype.s1a=function(i,t,e){var n,r,a,o=this,s={Zaa:!0,$h:!1,HS:Date.now()};W.Ua(t.yl,"Auxiliary viewable config request options must have auxiliary options"),t=(r=t.yl).Oe,r=r.Ch,a=null==(n=this.Bn(r).ja)?void 0:n.hb,n={Oe:t,gza:this.Og,Ch:r,D_:a},W.Ua(null==(t=this.La)?void 0:t.ak,"If we have auxiliary viewables combined playgraph must exist"),t=Object.keys(null==(a=null==(r=this.La)?void 0:r.ak)?void 0:a.O).find(function(t){var e;return(null==(e=null==(e=o.La)?void 0:e.ak)?void 0:e.O[t].N)===i}),W.Ua(!!t,"Segment for the auxiliary viewable should exist in the combined playgraph"),this.Nna({Vi:n,kb:s,X:t,N:i},e)},m.prototype.Nua=function(t){return!!this.ds.has(t)},m.prototype.DWb=function(t){try{return this.ek(t),!0}catch(t){return!1}},m.prototype.Bn=function(t){if(t===b.Xq)return this.na;if(this.ds.has(t))return this.ds.get(t);throw Error("Playback segment not found: "+t)},m.prototype.ek=function(t){var n,e,i,r;function a(t){for(var e=rt(n.AK),i=e.next();!i.done;i=e.next())if((i=i.value).X===t)return i}return n=this,(r=a(t))||(null!=(i=null==(e=this.La)?void 0:e.ak)&&i.O[t]&&(e=null==(i=this.La)?void 0:i.ak.O[t].pc)&&this.yb.fz(e)?null!=(r=(i=this.yb.Ee(e).N)===(t=null==(i=this.La)?void 0:i.ak.O[t].N)?a(e):r)?r:this.Bn(t):this.na)},m.prototype.AUb=function(t){for(var e,i=rt(this.AK),n=i.next();!n.done;n=i.next())if((null==(e=null==(e=(n=n.value).ef)?void 0:e.Kb)?void 0:e.sessionId)===t)return n;return this.na},m.prototype.Pda=function(e){var i=this,n=e.L;return this.rl.Yac(n),this.O0(e).then(function(t){return i.Lda(t,e),t=e.PJ?i.Yb.vm.dhb(e):Promise.resolve(),i.V6b(e),t.then(function(){return i.rl.yib(n)})}).catch(function(t){throw i.log.error("queueManifest failed",t),i.rl.Xac(n,t),i.Ci(t.code,t)})},m.prototype.mSb=function(){if(Z.Oa(this.sd.ats)&&Z.Oa(this.sd.at))return this.sd.at-this.sd.ats},m.prototype.B5a=function(){var t=this.U1(),e=this.eW();return Math.min(t,e)},m.prototype.kS=function(){this.background||(this.fd.info("Starting inactivity monitor for movie "+this.L),new u.wLa(this))},m.prototype.close=function(t){t&&(this.state.value==$.dc.CLOSED?t():this.addEventListener($.ma.closed,function(){t()})),this.$Ca()},m.prototype.Md=function(t,e,i){t=this.Ci(t,e,i),this.HI(t,void 0)},m.prototype.HI=function(t,e){var i,n,r,a=this;t.Mib(this.Bm),this.state.value==$.dc.sM?this.$i||(this.$i=t,this.load()):(e&&(this.state.value==$.dc.CLOSED?e():this.addEventListener($.ma.closed,function(){e()})),i=function(){a.$Ca(t)},n=F.config.q2a&&t&&F.config.q2a[t.errorCode],r=-1,Z.oQ(n)&&(r=f.qk(n)),this.fd.error("Fatal playback error",{Error:""+t,HandleDelay:""+n}),0<=r?setTimeout(i,r):i())},m.prototype.pI=function(t){var e=void 0===e?this.X:e;t=this.Ga.Tb().ka(J.pa)+"-"+e+"-"+t,this.gfb.push(t)},m.prototype.gRb=function(){this.C4a()},m.prototype.Yta=function(){var t;return null!=(t=this.La)&&t.Ni&&void 0!==(t=this.La.cl().id)?t:null},m.prototype.eF=function(){var t=null==(t=this.La)?void 0:t.Ni;return void 0===this.na.QW||t?this.hua(this.mediaTime.value):this.na.QW},m.prototype.Xta=function(){var t=this.hua(this.qf.d6a());return null===t?null:Math.min(this.Wx.ka(J.pa),Math.max(0,t))},m.prototype.$X=function(){var t;return null==(t=null==(t=this.ja)?void 0:t.hb.Co)?void 0:t.O},m.prototype.Rfa=function(t){this.kb=l.bca(this.kb,t),this.loa()},m.prototype.Bua=function(t){return null!=t&&t.N?t.N:null!=t&&t.zmb&&this.II?this.II.N===b.Xq?(t=this.II.Rb)&&this.La&&this.La.ak?this.La.ak.O[t].N:this.L:this.II.N:this.L},m.prototype.hSb=function(){var t=this.Bn(this.Bua(void 0)).Bc;return t.value?t.value.streams:[]},m.prototype.gF=function(t){return(t=this.Bn(this.Bua(t)).Jh)&&t.value?t.value.streams:[]},m.prototype.i8a=function(e){for(var t=rt(this.AK),i=t.next();!i.done;i=t.next())if(i=(i=i.value.Jg)&&i.find(function(t){return t.id===e}))return i},m.prototype.V6b=function(t){(t=void 0===t?this.na:t).Vb.value?this.qp.S6b(t.Vb.value):Promise.resolve()},m.prototype.f8a=function(e){for(var t=rt(this.AK),i=t.next();!i.done;i=t.next())for(var n=(i=rt(i.value.wj)).next();!n.done;n=i.next())if(n=n.value.streams.find(function(t){return t.Wb===e}))return n},m.prototype.t8a=function(e){for(var t=rt(this.AK),i=t.next();!i.done;i=t.next())for(var n=(i=rt(i.value.wz)).next();!n.done;n=i.next())if(n=(n=n.value)&&n.streams.find(function(t){return t.Wb===e}))return n},m.prototype.BWb=function(t){for(var e=rt(this.AK),i=e.next();!i.done;i=e.next())if(i.value.Og===t)return!0;return!1},m.prototype.mv=function(){var t,e;return null!=(e=null==(e=null==(t=this.rda)?void 0:t.TW)?void 0:e.call(t))?e:this.PKb().YE},m.prototype.Xib=function(t){var e,i;null!=(e=this.La)&&e.Ni&&this.ds.has(t)&&(null!=(i=this.rda)&&i.TW?this.rda.Wlb():(e=this.Dqa(t),this.La.ws(e,t)))},m.prototype.vZb=function(){return"trailer"===this.he},m.prototype.CYb=function(){return!!this.he&&0<=this.he.indexOf("billboard")},m.prototype.CZb=function(){return!!this.he&&0<=this.he.indexOf("video-merch")},m.prototype.bZb=function(){return!!this.he&&0<=this.he.indexOf("mini-modal")},m.prototype.lQ=function(){return this.vZb()||this.CYb()||this.CZb()||this.bZb()},m.prototype.o$=function(){var t,n,e={zmb:!0};if((null==(t=this.Bn(this.Bua(e)).ja)||!t.hb.Lva)&&this.wz)return this.gF(e).forEach(function(t){var e,i;Z.Oa(t.Eqa)&&Z.Oa(t.L1a)&&Z.Oa(t.K1a)&&Z.Oa(t.J1a)&&(0<t.Eqa||0<t.L1a)&&(i=e=1,Z.Oa(t.Oeb)&&Z.Oa(t.Peb)&&(e=t.Oeb,i=t.Peb),e=t.J1a*i/(t.K1a*e),n=Z.Oa(n)?0<t.Eqa?Math.max(n,e):Math.min(n,e):e)}),n},m.prototype.VUb=function(){return{tr:this.VDa,rt:this.tBa}},m.prototype.CB=function(t){return this.ik[t]},m.prototype.ipa=function(){return this.eo?this.Ga.Tb().ka(J.pa)-this.eo:this.Da.Ef.ka(J.pa)-this.lJ()},m.prototype.AW=function(){var t;return this.eo?this.Ga.Tb().ka(J.pa)-this.eo:(t=this.Ga.UB,this.M_-(this.Jj.ka(J.pa)+t.ka(J.pa)))},m.prototype.kpa=function(){return this.eo?this.Ga.Tb().ka(J.pa)-this.eo:this.M_-this.lJ()},m.prototype.sSb=function(){var i=this.loadTime,n={};return f.ih(this.Ioa,function(t,e){n[t]=e.map(function(t){return t-i})}),a.Sx?{level:a.Sx.F6a(),charging:a.Sx.jta(),statuses:n}:null},m.prototype.R$=function(){return this.B4a(),this.dga},m.prototype.lJ=function(){var t=this.kb.HS,t=Z.Oa(t)?t:this.Jj.ka(J.pa)+this.Ga.UB.ka(J.pa);return W.Ua(Z.xF(t)),t},m.prototype.t7a=function(){return this.Ga.Tb().ka(J.pa)-this.Jj.ka(J.pa)},m.prototype.dhc=function(){this.acc=!0},m.prototype.Ica=function(){this.Igb()},m.prototype.U1=function(){var t=this.G7();return t&&t.vbuflmsec||0},m.prototype.eW=function(){var t=this.G7();return t&&t.abuflmsec||0},m.prototype.MEa=function(){var t=this.G7();return t&&t.vbuflbytes||0},m.prototype.roa=function(){var t=this.G7();return t&&t.abuflbytes||0},m.prototype.O0=function(e,t,i){var n,r,a,o=this;return e=void 0===e?this.na:e,i=void 0===i||i,r=!(n=!!t)&&e!==this.na,a=F.config.Nda.enabled?d.ko.kvb:r?d.ko.kH:this.lQ()?d.ko.a5:d.ko.Zq,n=this.lQ()||n||r?void 0:this.Yb.vm.y$(r),this.kk.rJ({ga:e.ga,kb:e.kb,N:e.L,Fv:a,wg:n,Ffa:t,Vi:e.Vi},!e.Vi&&i).then(function(t){return t.Wva&&o.fireEvent($.ma.zZ,{L:e.L}),t})},m.prototype.Lda=function(t,e,i){var n,r,a;i=void 0!==i&&i,(e=void 0===e?this.na:e).kb.$h&&!t.hb.Co?this.Md(z.Z.Lob):(n=this.JZ.create(this),r=!!(e.Vi&&e.Vi.Oe&&e.Vi.D_),a=i?(t=(a=n.lXb(e.ja,e.Sc,t)).ja,a.Sc):(t=r?n.P$b(t,null==(a=e.Vi)?void 0:a.D_):t,n.veb(t)),e.ja=t,e.Sc=a,i||(e.Jh.set(a.S8),e.Bc.set(a.bX),e.Vb.set(a.dX)))},m.prototype.pRb=function(t){var e=void 0!==e&&e;this.$K({N:t,MJ:e})},m.prototype.j8a=function(t,e){return!this.Kj.JEa||((t=this.Wt.ka(J.pa)-t)<0||e<t)},m.prototype.u$b=function(){this.qf.seek(this.eF()||0,$.Ze.k3)},m.prototype.N8a=function(i,n){var r=this,a=this.na;return a.Y8=!0,this.O0(a,{gza:a.Og,d$b:i,g$b:n},!1).then(function(t){return r.Lda(t,a,!0),r.kk.i1(a.L,a.ja),null==(t=r.La)?void 0:t.qz(r.ffb)}).then(function(){var t=a.wj.find(function(t){return t.trackId===i}),e=a.Gi.find(function(t){return t.trackId===n});if(t&&t.bj&&e&&e.bj)return r.fireEvent($.ma.tlb),{Bc:t,v1:e};throw Error("Track hydration failed: requiredAudioTrackId="+i+" requiredTextTrackId="+n)})},m.prototype.Po=function(){return this.kg},m.prototype.$K=function(t){var e,i=t.N,n=t.MJ;if((t=t.II)!==this.II&&(this.II=t,this.pmb()),this.rR){if(i===this.HE)return void(this.rR=i);(e=(t=this.Bn(i)).ja)&&Z.rd(e.QK)&&Z.rd(e.JR)&&t.LB({pr_ats:e.QK,pr_at:e.JR}),this.fireEvent($.ma.txa,{L:this.HE}),this.HE=i,this.loa(),n||this.Fhb(),this.QB=this.Da.cL,this.na.eo||(this.na.eo=this.Ga.Tb().ka(J.pa))}("boolean"==typeof this.kb.hP?this.kb:F.config).hP&&!n&&this.cEa.hP(this),n={L:i,MJ:n,rR:this.rR},this.rR=i,this.fireEvent($.ma.WJ,n)},m.prototype.FKb=function(){try{this.Yb=new o.pNa(this),this.s8=new _.MHa(this),this.yQ=this.zQ.create(this,this.na,!0),F.config.NGb&&new E.BJa(this,this.xg,this.log),F.config.DW&&this.DW(this),this.Fgc()}catch(t){this.Zt(z.Z.ssb,{Ba:z.Y.Om,Sb:f.ff(t)})}},m.prototype.Fgc=function(){this.$i?this.HI(this.$i):Z.ewa(this.L)?this.qHb():this.Zt(z.Z.psb,{Sb:""+this.L})},m.prototype.qHb=function(){var t=i.rL.qib;t?t.ha?this.Xpa():this.Zt(z.Z.pLa,t):(W.Ua(!F.config.o9),this.wna())},m.prototype.Xpa=function(){var t=this;!this.background&&F.config.Xpa?K.Pja(function(){t.wna()},this):this.wna()},m.prototype.wna=function(){var e=this;this.state.value==$.dc.LOADING&&(F.config.Jra&&!this.lQ()?i.rL.Kx(K.fQa,function(t){t.ha?(e.zba=t.zba,e.zZa()):e.Zt(z.Z.oLa)},!0):this.zZa())},m.prototype.zZa=function(){var t,e,n=this;this.state.value==$.dc.LOADING&&(this.log.info("Authorizing",this),t=this.Ga.Tb().ka(J.pa),this.Se("ats"),W.NO(this.L),W.NO(this.ql),e=this.M7b.bind(this,t),Promise.all([this.ja,F.config.Xt&&this.kk.Z$(this.L)?this.kk.k$(this.L).catch(function(){}):void 0]).then(function(t){var e,i=rt(t);return t=i.next().value,i=i.next().value,t&&i?e=i.hb.expiration>t.hb.expiration?i:t:t?e=t:i&&(e=i),(e=e&&e.hb.expiration-(0,S.m8)()<18e5?void 0:e)?(n.BI=e===t?"ui":"videopreparer",e):n.O0()}).then(function(t){try{n.Lda(t),e(B.Vg),n.Xeb||(n.Xeb=!0,n.tza.Hq(n))}catch(t){n.log.error("Exception processing authorization response",t),e({ha:!1,Ba:z.Y.Wub})}}).catch(e))},m.prototype.M7b=function(t,e){var i,n=this;this.state.value==$.dc.LOADING&&(this.Se("at"),i=this.ja,this.LB({pr_ats:i&&Z.rd(i.QK)?i.QK:t,pr_at:i&&Z.rd(i.JR)?i.JR:this.Ga.Tb().ka(J.pa)}),e.ha?0<this.Sc.Jg.length&&this.Sc.bX&&this.Sc.S8&&this.Sc.dX?this.kfb?(this.log.info("Processing post-authorize",this),this.kfb(this,function(t){t.ha?n.$lb():n.Zt(z.Z.xsb,t)})):this.$lb():this.Zt(z.Z.IMa,this.uxa(this.Sc)):this.Zt(z.Z.mM,e))},m.prototype.$lb=function(){var i;n.__awaiter(this,void 0,void 0,function t(){var e=this;return at(t,function(t){if(e.state.value!=$.dc.LOADING)return t.return();null!=(i=e.na.ja)&&i.hb.Co&&e.yb.reset((0,b.$A)(null==(i=e.na.ja)?void 0:i.hb.Co,{config:F.config})),e.La=e.noa(e.yb,e),e.La.Dbc({yr:r.yr,config:F.config,Le:e.Le,fd:e.fd,fw:e.fw.bind(e),dk:Y.dk,R0:e.R0.bind(e),$K:e.$K.bind(e)}),e.J6b(),t.PF=0})})},m.prototype.FLb=function(){var t,e,i,n,r,a,o=this;try{if(this.state.value===$.dc.LOADING){this.Yb.open(),t=new Promise(function(t){o.Yb.addEventListener(A.Dk.Fjb,t)}),this.qf=new w.yNa(this),e=this.Sc.bX.Hi===k.$q.NONE,i={DG:this.Sc.bX.Vr||e},n={ga:this.ga,jp:this.Xf,vv:this.vv};try{if(this.state.value!==$.dc.LOADING)return;(r=this.La).Faa({flags:i,Zx:n,X:this.ffb,Dqa:this.Dqa.bind(this)}),a=this.yb.H$(this),this.t1a(a),r.Nw(a),this.hDb(),r.vFb({ik:this.ik,loadTime:this.loadTime}),this.kg=this.Dna(r,this),this.kg.dn.addListener(function(t){t.newValue?(o.qp.PWb(),F.config.Xt&&o.zd.b8a()):o.qp.ccc()}),this.kg.addEventListener($.u2.j7,function(){o.zd.b8a()})}catch(t){throw this.log.error("Failed to initialize ASE streaming",{error:t,startPts:this.ea,flags:i}),t}t.then(function(){var t;o.state.value!==$.dc.CLOSING&&o.state.value!==$.dc.CLOSED&&null!=(t=o.La)&&t.open()}),this.mediaTime.set(this.ea),this.qp=new s.mTa(this),("boolean"==typeof this.kb.eea?this.kb:F.config).eea&&(this.z1=new h.nTa(this)),this.kS(),K.Rja.forEach(function(t){t(o)}),this.b3b()}}catch(t){this.Zt(z.Z.usb,{Ba:z.Y.Om,Sb:f.ff(t)})}},m.prototype.c3b=function(){W.Ua(this.state.value==$.dc.sM),this.loadTime=this.Ga.Tb().ka(J.pa),this.state.set($.dc.LOADING)},m.prototype.Zt=function(t,e){this.done||(this.done=!0,e instanceof tt.jd?this.Md(e.code,e):this.Md(t,e))},m.prototype.DW=function(e){var i,t;function n(){var t=a.Sx.jta()+"";(e.Ioa[t]||(e.Ioa[t]=[])).push(i.Ga.Tb().ka(J.pa)),i.log.trace("charging change event",{level:a.Sx.F6a(),charging:a.Sx.jta()})}i=this,t=a.Sx.spb,a.Sx.addEventListener(t,n),e.addEventListener($.ma.eh,function(){a.Sx.removeEventListener(t,n)})},m.prototype.$Ca=function(t){var e=this;if(this.state.value==$.dc.sM||this.state.value==$.dc.LOADING||this.state.value==$.dc.Me){this.fd.info("Playback closing",this,t?{ErrorCode:t.a9}:void 0),this.pI("Closing"),H.nf.removeListener(H.Vo,this.Hdb),this.$i=t,this.na.QW=this.eF(),this.B4a(),null!=(t=this.La)&&t.Ni&&this.La.flush();try{this.Mb.Tc($.ma.eh,{movieId:this.HE})}catch(t){this.fd.error("Unable to fire playback closing event",t)}this.state.set($.dc.CLOSING),this.Wnb(),this.acc||y.pg(function(){return e.Igb()})}},m.prototype.VQb=function(){this.Mb.Tc($.ma.Ulb)},m.prototype.C4a=function(){var t=this.mediaTime.value;this.j_b!=t&&(this.j_b=t,this.Mb.Tc($.ma.NDa))},m.prototype.Igb=function(){var t,e=this;W.Ua(this.state.value==$.dc.CLOSING),t=this.zba,this.zba=void 0,t?i.rL.release(t,function(t){W.Ua(t.ha),e.dqa()}):this.dqa()},m.prototype.Wnb=function(){var t;null!=(t=this.La)&&t.cd(),delete this.La},m.prototype.dqa=function(){var t;this.dqa=B.ix,W.Ua(this.state.value==$.dc.CLOSING),t=K.Fp.indexOf(this),W.Ua(0<=t),K.Fp.splice(t,1),this.state.set($.dc.CLOSED),this.Mb.Tc($.ma.closed,void 0,!0),this.Mb.ti(),delete this.ef,this.na.Ica()},m.prototype.loa=function(){this.kb.playbackState&&("number"==typeof this.kb.playbackState.volume&&this.volume.set(X.AD(this.kb.playbackState.volume,0,1)),"boolean"==typeof this.kb.playbackState.muted&&this.muted.set(this.kb.playbackState.muted),"number"==typeof this.kb.playbackState.playbackRate&&this.playbackRate.set(this.kb.playbackState.playbackRate))},m.prototype.B4a=function(){this.Mb.Tc($.ma.ljb,{dga:this.dga})},m.prototype.R0=function(t,e,i){e=this.i8a(e),t=this.ek(t),e&&t.xc[i].set(e)},m.prototype.fw=function(){return{AudioBufferLength:this.eW(),VideoBufferLength:this.U1()}},m.prototype.G7=function(){var t;if(null!=(t=this.La)&&t.Ni)return this.La.Gaa(!1)},m.prototype.b3b=function(){this.state.value==$.dc.LOADING&&this.state.set($.dc.Me)},m.prototype.PKb=function(){var t=void 0===t?this.L:t,e=this.gF({N:t}),i=this.Bn(t);return(0,p.mv)(e,function(t){return i.KQ.JC(t)})},m.prototype.Dqa=function(t){var e;return t=void 0===t?this.L:t,Q=this.gF({N:t}),e=this.Bn(t),(0,p.U7a)(Q,function(t){return e.KQ.JC(t)})},m.prototype.t1a=function(r){var a=this;Object.keys(r.O).filter(function(t){return!a.ds.has(r.O[t].N)}).forEach(function(t){var e,i=r.O[t],n=i.N;i=Object.assign(null!=(e=a.rl.SP(n).Fb)?e:{},{ea:i.va,Qa:i.wa,$h:!1,HS:Date.now(),Zaa:!0}),a.Nna({N:n,X:t,kb:i})})},nt.Object.defineProperties(m.prototype,{AK:{configurable:!0,enumerable:!0,get(){return this.ds.values()}},na:{configurable:!0,enumerable:!0,get(){return this.ds.get(this.HE)}},ea:{configurable:!0,enumerable:!0,get(){var t;return void 0!==this.mt?this.mt:null!=(t=null==(t=this.AK.next())?void 0:t.value.kb.ea)?t:0}},Sc:{configurable:!0,enumerable:!0,get(){return this.na.Sc},set(t){this.na.Sc=t}},R9:{configurable:!0,enumerable:!0,get(){return this.na.kb.R9}},S9:{configurable:!0,enumerable:!0,get(){return this.na.kb.S9}},index:{configurable:!0,enumerable:!0,get(){return this.na.index}},X:{configurable:!0,enumerable:!0,get(){return this.na.X}},ffb:{configurable:!0,enumerable:!0,get(){return this.yb.KEa?this.yb.Sh:this.na.X}},ef:{configurable:!0,enumerable:!0,get(){return this.na.ef},set(t){this.na.ef=t}},eo:{configurable:!0,enumerable:!0,get(){return this.na.eo},set(t){this.na.eo=t}},BI:{configurable:!0,enumerable:!0,get(){return this.na.BI},set(t){this.na.BI=t}},AI:{configurable:!0,enumerable:!0,get(){return this.na.AI},set(t){this.na.AI=t}},Eaa:{configurable:!0,enumerable:!0,get(){return this.na.Eaa},set(t){this.na.Eaa=t}},ja:{configurable:!0,enumerable:!0,get(){return this.na.ja},set(t){this.na.ja=t}},mt:{configurable:!0,enumerable:!0,get(){return this.na.mt},set(t){this.na.mt=t}},q1:{configurable:!0,enumerable:!0,get(){return this.na.q1},set(t){this.na.q1=t}},kb:{configurable:!0,enumerable:!0,get(){return this.na.kb},set(t){this.na.kb=t}},yQ:{configurable:!0,enumerable:!0,get(){return this.na.yQ},set(t){this.na.yQ=t}},Am:{configurable:!0,enumerable:!0,get(){return this.na.Am}},L:{configurable:!0,enumerable:!0,get(){return this.na.L}},he:{configurable:!0,enumerable:!0,get(){return this.na.he}},wj:{configurable:!0,enumerable:!0,get(){return this.na.wj}},wz:{configurable:!0,enumerable:!0,get(){return this.na.wz}},WC:{configurable:!0,enumerable:!0,get(){return this.na.WC}},Gi:{configurable:!0,enumerable:!0,get(){return this.na.Gi}},Og:{configurable:!0,enumerable:!0,get(){return this.na.Og}},PJ:{configurable:!0,enumerable:!0,get(){return this.na.PJ}},xw:{configurable:!0,enumerable:!0,get(){return this.na.xw}},om:{configurable:!0,enumerable:!0,get(){return this.na.om}},Jg:{configurable:!0,enumerable:!0,get(){return this.na.Jg}},Wx:{configurable:!0,enumerable:!0,get(){return this.na.Wx},set(t){this.na.Wx=t}},ga:{configurable:!0,enumerable:!0,get(){return this.na.ga}},ql:{configurable:!0,enumerable:!0,get(){return this.na.ql}},Jj:{configurable:!0,enumerable:!0,get(){return this.na.Jj}},QB:{configurable:!0,enumerable:!0,get(){return this.na.QB},set(t){this.na.QB=t}},Xf:{configurable:!0,enumerable:!0,get(){return this.na.Xf}},eL:{configurable:!0,enumerable:!0,get(){return this.na.eL}},background:{configurable:!0,enumerable:!0,get(){return this.na.background},set(t){this.na.background=t}},E8:{configurable:!0,enumerable:!0,get(){return this.na.E8}},sd:{configurable:!0,enumerable:!0,get(){return this.na.sd}},Br:{configurable:!0,enumerable:!0,get(){return this.na.Br}},vra:{configurable:!0,enumerable:!0,get(){return this.na.vra}},KQ:{configurable:!0,enumerable:!0,get(){return this.na.KQ}},vv:{configurable:!0,enumerable:!0,get(){return 0!==F.config.e9&&0==this.na.ga%F.config.e9}},Y8:{configurable:!0,enumerable:!0,get(){return this.na.Y8}},wq:{configurable:!0,enumerable:!0,get(){return this.na.wq}},PLb:{configurable:!0,enumerable:!0,get(){return this.muted.value?0:Math.round(100*this.volume.value)/100}},Bh:{configurable:!0,enumerable:!0,get(){return{MovieId:this.L,TrackingId:this.ql,Xid:this.ga}}},zda:{configurable:!0,enumerable:!0,get(){return this.yb.zda}}}),t.lQa=m},function(t,e,i){var n,a,o;_esm(e),e.Zjb=void 0,n=i(17),a=i(9),o=i(4),i(25),e.Zjb=function(t){var r;a.dk("Storage"),r={},t({ha:!0,storage:{load:function(t,e){r.hasOwnProperty(t)?e({ha:!0,data:r[t],gfa:t}):e({Ba:o.Y.FD})},save:function(t,e,i,n){i&&r.hasOwnProperty(t)?n({ha:!1}):(r[t]=e,n&&n({ha:!0,gfa:t}))},remove:function(t,e){delete r[t],e&&e(n.Vg)}}})}},function(t,e,i){var n,r,a,o;_esm(e),e.Xjb=void 0,n=i(9),r=i(96),a=i(30),o=i(560),e.Xjb=function(e){n.Fa.get(r.hD).create().then(function(t){e({ha:!0,storage:new o.Dia(t,n.Fa.get(a.ki))})}).catch(function(t){e(t)})}},function(t,e){function a(t,e){this.Px=t,this.Le=e}_esm(e),e.Dia=void 0,a.prototype.load=function(e,i){var n=this;this.Px.load(e).then(function(t){i&&i(a.rkb(t))}).catch(function(t){i&&i(n.Pra(e,t))})},a.prototype.save=function(e,t,i,n){var r=this;this.Px.save(e,t,i).then(function(){n&&n(a.rkb({key:e,value:t}))}).catch(function(t){n&&n(r.Pra(e,t))})},a.prototype.remove=function(e,i){var n=this;this.Px.remove(e).then(function(){i&&i({ha:!0,gfa:e})}).catch(function(t){i&&i(n.Pra(e,t))})},a.rkb=function(t){return{ha:!0,data:t.value,gfa:t.key}},a.prototype.Pra=function(t,e){return{ha:!1,gfa:t,Ba:e.Ba,Sb:e.cause?this.Le.ff(e.cause):void 0}},e.Dia=a},function(t,e,i){var n,r,a,o;_esm(e),e.Yjb=void 0,n=i(560),r=i(9),a=i(490),o=i(30),e.Yjb=function(t){t({ha:!0,storage:new n.Dia(r.Fa.get(a.kMa),r.Fa.get(o.ki))})}},function(t,r,e){var a,o,s,u,i,c,n,h,f;_esm(r),r.Sx=void 0,a=e(17),o=e(20),t=e(4),s=e(9),u=e(14),i=e(34),c=e(15),n=e(69),h=e(5),e=s.Fa.get(i.nj),f=s.Fa.get(n.qH),e.register(t.Z.aLa,function(t){var e,i;function n(){t(a.Vg),n=a.ix}e=s.dk("BatteryManager"),r.Sx={spb:"chargingchange",F6a:function(){return i?i.level:null},jta:function(){return i?i.charging:null},addEventListener:function(t,e){i&&i.addEventListener(t,e)},removeEventListener:function(t,e){i&&i.removeEventListener(t,e)}},o.config.DW&&c.gd(u.Ye.getBattery)?f.fu(h.vc(o.config.rSb),Promise.resolve().then(function(){var t=u.Ye.getBattery();if(c.gd(t.then))return t;throw"getBattery did not return a promise"})).then(function(t){var e=t;if(!(e instanceof EventTarget))throw"batteryManager is not an instaceof EventTarget";["addEventListener","removeEventListener"].forEach(function(t){if(!c.gd(e[t]))throw t+" is not a function"}),i=t}).catch(function(t){e.error("getBattery failed",t)}).then(n):n()})},function(t,e){_esm(e),e.cMa="LicenseBrokerFactorySymbol"},function(t,e){function i(t,e){var i=this;this.W6a=t,this.Fdb=e,this.TDa=!1,this.dR=function(){i.Kq=void 0,i.update()}}_esm(e),e.oTa=void 0,i.prototype.update=function(t){var e,i,n=this.W6a();this.smb!==n&&((e=null==(e=null==(e=this.zq)?void 0:e.CP(n))?void 0:e[0])&&"startTime"in e&&(e.startTime<=n&&n<=e.endTime?this.fmb((i=e).endTime-n):this.fmb(e.startTime-n)),this.smb=n,this.zna!==i&&(this.zna=i,!t&&this.Fdb&&this.Fdb()))},i.prototype.start=function(){this.TDa=!0,this.update()},i.prototype.Hib=function(t){this.zq=t,this.zna=this.smb=void 0,t||this.stop()},i.prototype.stop=function(){this.TDa=!1,this.pu()},i.prototype.YRb=function(){return this.update(!0),this.zna},i.prototype.fmb=function(t){this.pu(),this.TDa&&0<t&&(this.Kq=setTimeout(this.dR,t+i.Ftb))},i.prototype.pu=function(){this.Kq&&(clearTimeout(this.Kq),this.Kq=void 0)},(e.oTa=i).Ftb=10},function(t,e,i){var r,a;_esm(e),e.PKa=void 0,r=i(16),a=i(107),e.PKa=function(i){function n(t){i.fireEvent(r.ma.NE,{response:t,L:i.na.L})}return{download:function(t,e){return t.j=i,(t=a.pf.download(t,e)).k7(n),t}}}},function(t,e,i){var o,s,u,c,h,f,l,d,p;_esm(e),e.wLa=void 0,o=i(20),s=i(59),u=i(4),c=i(567),h=i(14),f=i(15),l=i(16),d=i(9),p=i(225),e.wLa=function(i){var n,t,r,a;function e(){i.state.value!==l.dc.Me||i.Gb.value!==l.rb.Ug&&i.Gb.value!==l.rb.Gs?t.pu():t.aJ()}n=o.config.H5b,!i.lQ()&&n&&(t=d.Fa.get(p.i5)(n,function(){i.fireEvent(l.ma.ZP,u.Z.F4)}),i.Gb.addListener(e),i.state.addListener(e),o.config.lva&&(r=s.Do(),(a=new c.xRa(o.config.lva,function(){var t=s.Do(),e=t-r;n<e&&(i.fireEvent(l.ma.ZP,u.Z.i4),a.f0a()),e>2*o.config.lva&&(i.mva=h.Gu(e,i.mva||0)),r=t})).wbc()),i.addEventListener(l.ma.eh,function(){t.pu(),f.rd(a)&&a.f0a()}))}},function(t,e){function i(t,e){this.SDa=t,this.oy=e}_esm(e),e.xRa=void 0,i.prototype.wbc=function(){this.a7||(this.a7=setInterval(this.oy,this.SDa))},i.prototype.f0a=function(){this.a7&&(clearInterval(this.a7),this.a7=void 0)},e.xRa=i},function(t,e,i){var a,o,s,u,c,r;function n(t){var e,i,n,r=this;this.j=t,this.TW=void 0,this.out=document.querySelector(".watch-video"),this.Jla=o.createElement("DIV",0,0,{class:"player-streams"}),this.nla=o.createElement("DIV"),this.Vwb=this.yla("Audio Bitrate"),this.qna=this.yla("Video Bitrate"),this.qla=this.yla("CDN"),this.pV={},this.FY=s.Fa.get(u.Bp),this.Jla.appendChild(this.nla),(e=o.createElement("BUTTON",void 0,"Override")).addEventListener("click",this.Pwb.bind(this),!1),this.nla.appendChild(e),(e=o.createElement("BUTTON",void 0,"Reset")).addEventListener("click",this.mBb.bind(this),!1),this.nla.appendChild(e),i=this.wAb.bind(this),a.nf.addListener(a.jF,i),t.addEventListener(c.ma.WJ,function(){r.pV={}}),t.addEventListener(c.ma.eh,function(){a.nf.removeListener(a.jF,i)}),n=this.aBb.bind(this),t.xc.forEach(function(t){t.addListener(n)}),t.Bc.addListener(n),t.Jh.addListener(n)}_esm(e),e.sQa=void 0,a=i(62),o=i(40),s=i(9),u=i(39),i(202),c=i(16),r=i(49),n.prototype.show=function(){this.OV||(this.gXa(),this.out.appendChild(this.Jla),this.OV=!0)},n.prototype.py=function(){this.OV&&(this.out.removeChild(this.Jla),this.OV=!1)},n.prototype.toggle=function(){this.OV?this.py():this.show()},n.prototype.Wlb=function(){var t,c,h,e;c=this.j.mv(),e=(h=this.j.gF().sort(function(t,e){return t.bitrate-e.bitrate})).reduce(function(t,e){return t.indexOf(e.mf)<0&&t.push(e.mf),t},[]).map(function(t){return{profile:t,ranges:(r=t,a=c,u=[],h.filter(function(t){return t.mf===r}).forEach(function(t){0<=a.indexOf(t)?(void 0===s?s=t.bitrate:o=t.bitrate,void 0===o&&(o=t.bitrate)):void 0!==s&&void 0!==o&&(u.push({min:s,max:o}),s=o=void 0)}),void 0!==s&&void 0!==o&&(u.push({min:s,max:o}),s=o=void 0),u),disallowed:(e=t,i=c,n=[],h.filter(function(t){return t.mf===e}).forEach(function(t){-1===i.indexOf(t)&&n.push({stream:{bitrate:t.bitrate},disallowedBy:["manual"]})}),n)};var e,i,n,r,a,o,s,u}),null!=(t=this.j.La)&&t.ws(e,this.j.L)},n.prototype.Pwb=function(){var t,e;this.pV={};for(var i=this.qna.options,n=i.length;n--;)(t=i[n]).selected&&(this.pV[t.value]=1);this.TW=this.txb.bind(this),this.Wlb(),(i=this.j.Jg)&&(e=this.qla.value,i=i.filter(function(t){return t.id==e})[0],n=this.j.xc[r.u.J].value,i&&i!=n&&(i.G_a={testreason:"streammanager",selreason:"userselection"},this.j.xc[r.u.J].set(i))),this.py()},n.prototype.mBb=function(){this.TW=void 0,this.j.Xib(this.j.L),this.py()},n.prototype.txb=function(){var e=this;return this.j.gF().filter(function(t){return e.pV[t.bitrate]})},n.prototype.gXa=function(){var e=this.j,t=e.Bc.value,i=e.Jh.value,n=e.Jg;t&&((n=n.slice()).sort(function(t,e){return t.cc-e.cc}),this.cna(this.Vwb,t.streams.map(function(t){return{value:t.bitrate,caption:t.bitrate,selected:t==e.Qh.value}}))),i&&this.cna(this.qna,i.streams.map(function(t){return{value:t.bitrate,caption:t.bitrate,selected:t.bitrate==e.tf.value.bitrate}})),n&&this.cna(this.qla,n.map(function(t){return{value:t.id,caption:"["+t.id+"] "+t.name,selected:t==e.xc[r.u.J].value}}))},n.prototype.aBb=function(){this.OV&&this.gXa()},n.prototype.yla=function(t){var e,i=o.createElement("DIV","display:inline-block");return t=o.createElement("DIV",0,t),e=o.createElement("select",0,0,{multiple:1}),i.appendChild(t),i.appendChild(e),this.Jla.appendChild(i),e},n.prototype.cna=function(i,t){i.innerHTML="",t.forEach(function(t){var e={title:t.caption};t.selected&&(e.selected="selected"),(e=o.createElement("option",0,t.caption,e)).value=t.value,i.appendChild(e)})},n.prototype.wAb=function(t){"INPUT"!=t.target.tagName&&"x"==t.key&&this.toggle()},e.sQa=n},function(t,e,i){var b,g,m,n,r;function v(t,e){this.O9=t,this.YI={position:"absolute",left:"0",top:"0",right:"0",bottom:"0",display:"block"},this.element=b.createElement("DIV",void 0,void 0,{class:"player-timedtext"}),this.element.onselectstart=function(){return!1},this.zib(e),this.Hsa=this.n6a(this.O9)}_esm(e),e.lTa=void 0,b=i(40),g=i(570),m=i(571),n=i(14),r=i(25),v.prototype.Qo=function(){return this.element},v.prototype.Jac=function(t){this.Qx=t},v.prototype.Uac=function(t){this.entry=t,this.GR()},v.prototype.abc=function(t){this.zib(t),this.GR()},v.prototype.GR=function(){var t,e,i,n,r,a,o,s=this,u=this.Qo(),c=u.parentElement,h=c&&c.clientWidth||0,f=c&&c.clientHeight||0,l=c=0,d={width:h,height:f};if(0<h&&0<f&&this.entry&&(this.Qx&&(d=b.N9(h,f,this.Qx),c=Math.round((h-d.width)/2),l=Math.round((f-d.height)/2)),e=this.xGb(d),i=b.N9(e.width,e.height,this.Qx),e=(t=this.entry.blocks)&&t.map(function(t){var e=m.Lra(t,i,s.O9,s.Hsa);return t=m.O3a(t)+";position:absolute",b.createElement("div",t,e,v.rha)})),Object.assign(this.YI,{left:c+"px",right:c+"px",top:l+"px",bottom:l+"px"}),u.style.display="none",u.style.direction=this.YI.direction,u.innerHTML="",e&&e.length){h=d.width,c=d.height,n=d,this.vW&&(n=this.vCb(d,this.vW,f,l)),this.YI.margin=this.Qt?this.e8(d,"top")+"px "+this.e8(d,"right")+"px "+this.e8(d,"bottom")+"px "+this.e8(d,"left")+"px ":void 0,e.forEach(function(t){return u.appendChild(t)}),f=b.SW(this.YI),u.style.cssText=f+";visibility:hidden;z-index:-1";for(var l=[],p=e.length-1;0<=p;p--)r=e[p],a=t[p],(o=this.ddb(r,a,h,c)).width>h&&(r.innerHTML=m.Lra(a,d,this.O9,this.Hsa,h/o.width),o=this.ddb(r,a,h,c)),l[p]=o;for(l=g.Olb(l,n),(p=t&&t[0]&&t[0].textNodes&&t[0].textNodes[0]&&t[0].textNodes[0].style)&&(n=p.windowColor,p=p.windowOpacity,n&&0<p&&(r=Math.round(c/50),d=m.Q3a(t,l,r,n,d),d=b.createElement("div","position:absolute;left:0;top:0;right:0;bottom:0;opacity:"+p,d,v.rha),u.insertBefore(d,u.firstChild))),u.style.display="none",d=l.length-1;0<=d;d--)p=l[d],n=e[d].style,r=t[d].region,p=m.P3a(r,p,h,c,0),Object.assign(n,p);u.style.cssText=f}},v.prototype.ACa=function(t){this.vW=t,this.GR()},v.prototype.vua=function(){return this.vW},v.prototype.BCa=function(t){this.Qt=t,this.GR()},v.prototype.wua=function(){return this.Qt},v.prototype.xua=function(){return"block"===this.YI.display},v.prototype.CCa=function(t){var e=t?"block":"none";this.element.style.display=e,this.YI.display=e,t&&this.GR()},v.prototype.Efc=function(t){this.O9=t,this.Hsa=this.n6a(t)},v.prototype.n6a=function(t){var i=this,n={};return r.ih(t,function(t,e){n[t]=i.x1b(e)}),n},v.prototype.zib=function(t){this.YI.direction="boolean"==typeof t?t?"ltr":"rtl":"inherit"},v.prototype.e8=function(t,e){if(this.Qt){if("left"===e||"right"===e)return t.width*(this.Qt[e]||0);if("top"===e||"bottom"===e)return t.height*(this.Qt[e]||0)}return 0},v.prototype.xGb=function(t){return this.Qt?{height:t.height*(1-(this.Qt.top||0)-(this.Qt.bottom||0)),width:t.width*(1-(this.Qt.left||0)-(this.Qt.right||0))}:t},v.prototype.x1b=function(t){var e;return t=b.createElement("DIV",t="display:block;position:fixed;z-index:-1;visibility:hidden;font-size:1000px;"+t+";","ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",v.rha),n.Nh.body.appendChild(t),e={fontSize:1e3,height:t.clientHeight,width:t.clientWidth/52,lineHeight:t.clientHeight/1e3},n.Nh.body.removeChild(t),e},v.prototype.ddb=function(t,e,i,n){var r=e.region,a=(r.marginTop||0)*n,o=(r.marginBottom||0)*n,s=(r.marginLeft||0)*i,u=(r.marginRight||0)*i;switch(e=t.clientWidth||1,t=t.clientHeight||1,r.verticalAlignment){case"top":n=a;break;case"center":n=(a+n-o-t)/2;break;default:n=n-o-t}switch(r.horizontalAlignment){case"left":i=s;break;case"right":i=i-u-e;break;default:i=(s+i-u-e)/2}return{top:n,left:i,width:e,height:t}},v.prototype.vCb=function(t,e,i,n){return{height:i-Math.max(n,e.bottom||0)-Math.max(n,e.top||0),width:t.width}},(e.lTa=v).rha={class:"player-timedtext-text-container"}},function(t,e,i){var d;_esm(e),e.Olb=void 0,d=i(14),e.Olb=function(t,e){function i(t,e,i){var n,r,a,o,s;if(t&&1<t.length){for(var u=[],c=[],h=0;h<t.length;h++)u[h]=0,c[h]=0;for(n=!1,h=0;h<t.length;h++)for(var f=h+1;f<t.length;f++)r=t[h],a=t[f],(o=!(r.width<0||a.width<0||a.left>r.left+r.width||a.left+a.width<r.left||a.top>r.top+r.height)&&a.top+a.height>=r.top?(o=d.Gu(r.left,a.left),s=d.Gu(r.top,a.top),{width:d.Gu(d.Uz(r.left+r.width,a.left+a.width)-o,0),height:d.Gu(d.Uz(r.top+r.height,a.top+a.height)-s,0),x:o,y:s}):void 0)&&1<o.width&&1<o.height&&(s=o.width<=o.height,r=l(t[h]),a=l(t[f]),s&&e||!s&&!e?(o=d.Gu(o.width/2,.25),r.x<=a.x?(c[h]-=o,c[f]+=o):(c[f]-=o,c[h]+=o)):(s&&!e||!s&&e)&&(r=d.Gu(o.height/2,.25),u[h]-=r,u[f]+=r));for(h=0;h<t.length;h++)(c[h]<-.25&&0<=t[h].left+c[h]||.25<c[h]&&t[h].left+t[h].width+c[h]<=i.width)&&(t[h].left+=c[h],n=!0),(u[h]<-.25&&0<=t[h].top+u[h]||.25<u[h]&&t[h].top+t[h].height+u[h]<=i.height)&&(t[h].top+=u[h],n=!0);return n}}function l(t){return{x:t.left+t.width/2,y:t.top+t.height/2}}var n;t=t.map(function(t){return{top:t.top,left:t.left,width:t.width,height:t.height}}),n=e,t.forEach(function(t){t.left<0&&t.left+t.width<n.width?t.left+=d.Uz(-t.left,n.width-(t.left+t.width)):t.left+t.width>n.width&&0<t.left&&(t.left-=d.Uz(t.left+t.width-n.width,t.left)),t.top<0&&t.top+t.height<n.height?t.top+=d.Uz(-t.top,n.height-(t.top+t.height)):t.top+t.height>n.height&&0<t.top&&(t.top-=d.Uz(t.top+t.height-n.height,t.top))});for(var r=0;r<50&&i(t,!0,e);r++);for(r=0;r<50&&i(t,!1,e);r++);return t}},function(t,e,i){var s,f,l;function d(t,e,i,n,r){var a={};return"right"==t.horizontalAlignment?a.right=100*(i-e.left-e.width-r)/i+"%":a.left=100*(e.left-r)/i+"%","bottom"==t.verticalAlignment?a.bottom=100*(n-e.top-e.height-r)/n+"%":a.top=100*(e.top-r)/n+"%",a}function u(t,e){var i;if(t&&e&&(40===e.x&&19===e.y?i=4/3/(40/19):52===e.x&&19===e.y&&(i=16/9/(52/19)),i))return t.width/t.fontSize/i}function o(t,e,i,n,r){var a=t.style,o=f.ava(t.text);for(t=t.lineBreaks;t--;)o="<br />"+o;return c(o,a,e,i,n,r)}function c(t,e,i,n,r,a){var o=e.characterStyle;switch(r=r[o],o=0<=o.indexOf("MONOSPACE")&&u(r,e.cellResolution)||r.lineHeight,n=e.characterSize*n.height/(o||1),a={"font-size":(n=0<a?l.oM(n*a):l.Dp(n))+"px","line-height":"normal","font-weight":"normal"},e.characterItalic&&(a["font-style"]="italic"),e.characterUnderline&&(a["text-decoration"]="underline"),e.characterColor&&(a.color=e.characterColor),e.backgroundColor&&0!==e.backgroundOpacity&&(a["background-color"]=h(e.backgroundColor,e.backgroundOpacity)),n=e.characterEdgeColor||"#000000",e.characterEdgeAttributes){case"DROP_SHADOW":a["text-shadow"]=n+" 0px 0px 7px";break;case"UNIFORM":a["text-shadow"]="-1px 0px "+n+",0px 1px "+n+",1px 0px "+n+",0px -1px "+n;break;case"RAISED":a["text-shadow"]="-1px -1px white, 0px -1px white, -1px 0px white, 1px 1px black, 0px 1px black, 1px 0px black";break;case"DEPRESED":a["text-shadow"]="1px 1px white, 0px 1px white, 1px 0px white, -1px -1px black, 0px -1px black, -1px 0px black"}return a=s.SW(a),(i=i[e.characterStyle||"PROPORTIONAL_SANS_SERIF"])&&(a+=";"+i),'<span style="'+a+'">'+(t=0<(e=e.characterOpacity)&&e<1?'<span style="opacity:'+e+'">'+t+"</span>":t)+"</span>"}function h(t,e){return t=t.substring(1),"rgba("+((t=parseInt(t,16))>>16&255)+","+(t>>8&255)+","+(255&t)+","+(void 0!==e?e:1)+")"}_esm(e),e.O3a=e.uPb=e.sPb=e.vPb=e.tPb=e.P3a=e.Q3a=e.Lra=void 0,s=i(40),f=i(25),l=i(14),e.Lra=function(t,e,i,n,r){var a="";return t.textNodes.forEach(function(t){a+=o(t,i,e,n,r)}),a=t.region&&t.region.multiRowAlignment?'<span style="display:inline-block;text-align:'+t.region.multiRowAlignment+'">'+a+"</span>":a},e.Q3a=function(t,e,i,n,r){var a,o,s,u="",c=r.width;r=r.height;for(var h=e.length;h--;)a=e[h],o=(o=t[h])&&o.region,s="position:absolute;background:"+n+";width:"+l.Dp(a.width+2*i)+"px;height:"+l.Dp(a.height+2*i)+"px;",a=d(o,a,c,r,i),f.ih(a,function(t,e){s+=t+":"+e+";"}),u+='<div style="'+s+'"></div>';return u},e.P3a=d,e.tPb=u,e.vPb=o,e.sPb=c,e.uPb=h,e.O3a=function(t){var e={display:"block","white-space":"nowrap"};switch(t.region.horizontalAlignment){case"left":e["text-align"]="left";break;case"right":e["text-align"]="right";break;default:e["text-align"]="center"}return s.SW(e)}},function(t,e,i){var n,b,g,m,v,r,y,w;_esm(e),e.gQa=void 0,n=i(17),b=i(20),g=i(59),m=i(93),v=i(14),r=i(58),y=i(15),w=i(16),e.gQa=function(u){var c,h,f,l,d,t;function p(){return u.state.value===w.dc.LOADING||u.state.value===w.dc.Me&&u.Gb.value===w.rb.fg}function e(){p()?t=t||setInterval(i,100):t&&(clearInterval(t),t=void 0,r.pg(i))}function i(){var t,e,i,n,r=g.Do(),a=c.value,o=a?a.progress:0,s=u.state.value==w.dc.LOADING||p()&&r-h>b.config.WFb;s&&u.state.value==w.dc.Me?(u.Cf.value===w.Tf.TRa?(t=o,e=!0):(i=r,f=f||r,l=l||f+b.config.Z1b+1,y.Oa(i)&&(i=v.Gu(i,l),t=v.Dp(1e3*m.AD((r-f)/(i-f),0,.99))/1e3)),t<o&&(o-t<b.config.W7b/100?(t=o,d=void 0):d?r-d>b.config.V7b?(n=!0,d=void 0):t=o:(d=r,t=o))):d=l=f=void 0,(!(r=s?{ou:e,progress:t,X7b:n}:null)||!c||!a||y.Oa(r.progress)&&!y.Oa(a.progress)||y.Oa(r.progress)&&y.Oa(a.progress)&&.01<v.r4(r.progress-a.progress)||r.ou!==a.ou)&&c.set(r)}c=u.bpa,h=0,u.state.addListener(function(){e(),i()},n.E4),u.Gb.addListener(function(t){t.oldValue===w.rb.fg&&t.newValue===w.rb.fg||(h=g.Do()),e()}),u.Cf.addListener(function(){e()}),u.ft.addListener(function(){e()}),u.bo.addListener(function(){e()}),t=t||setInterval(i,100)}},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,d,p,b,g,m,v,y,w,A,_,E,k,S,T,I,O,x,R;function P(t){var n=this;this.j=t,this.Yb=this.j.Yb,this.log=c.aj(this.j,"MediaPresenterASE"),this.xca=this.J8=0,this.ca=this.Yb.ca,this.rC=new R.TTa(this.ca,this.j),this.Ejb=this.Reb=this.Ieb=this.aba=this.Kza=!1,this.vba=new Set,this.Mdc=c.Fa.get(A.EM)(w.vc(v.Y4)),this.$N=void 0,this.Fm=c.Fa.get(E.dSa)(this.j),this.vz={},this.Ybb={},this.GY={},this.jh=new S.gNa(this.j,this.Fm),this.Kdc=function(){var t,e,i;n.j.q1=u.Do(),!n.el()&&n.Vv&&((t=n.Yb.A7a())||(n.S5b(),n.jh.Elb(n.mediaTime)),n.j.paused.value||!n.jh.Tqa(n.mediaTime)||!n.Yoa()||t||n.Fm.Yaa?n.zBa():n.Kza||n.ABa(),n.R5b(),n.Yb.A7a()||n.aba||(t=n.Yb.eY(!0),e=n.j.Gb.value,(i=n.rIb())===g.rb.Gs?(n.mediaTime=n.j.Wt.ka(w.pa),n.zBa()):i!==g.rb.fg&&n.Pfc(t),n.jmb(),n.jh.zpa(n.mediaTime),n.j.Gb.set(i),i!==g.rb.fg||e!==g.rb.Gc&&e!==g.rb.Ug||n.x4b()))},this.Hm=k.Ofb(this.Kdc),this.mediaTime=t.ea,this.j.Ui=!1,this.Yb.addEventListener(y.Dk.Djb,function(){n.log.trace("sourceBuffers have been created. Initialize MediaPresenter."),n.Ejb=!0;try{n.xa()}catch(t){n.log.error("Exception while initializing",t),n.Md(h.Z.Dub)}}),this.Yb.addEventListener(y.Dk.mab,function(t){t=t.N,n.Ejb?n.Kdb(t):n.vba.add(t)})}_esm(e),e.yNa=void 0,n=i(17),r=i(20),a=i(61),o=i(62),s=i(40),u=i(59),c=i(9),i(99),h=i(4),f=i(353),l=i(23),d=i(93),p=i(25),b=i(58),g=i(16),m=i(15),v=i(177),y=i(306),w=i(5),A=i(114),_=i(225),E=i(574),k=i(1324),S=i(1325),T=i(72),I=i(223),O=i(14),x=i(49),R=i(1327),P.prototype.ebc=function(t){this.rC.paused?(this.log.trace("setMediaTime",t),this.mediaTime=t):this.log.error("Unexpected setMediaTime while not paused, ignoring")},P.prototype.d6a=function(){return this.Yb.eY(!1)},P.prototype.q$=function(){return this.Yb.q$()},P.prototype.AB=function(){return this.Yb.AB()},P.prototype.oJ=function(){return this.Yb.oJ()},P.prototype.cY=function(){return this.Yb.cY()},P.prototype.xa=function(){var e=this;this.log.trace("Video element initializing"),this.Yb.sourceBuffers.forEach(function(t){return e.jh.rbc(t)}),this.WXb(this.j.PJ)},P.prototype.WXb=function(t){var e=this;t?this.log.trace("Waiting for needkey"):(this.log.warn("Movie is not DRM protected",{MovieId:this.j.L}),null!=(t=this.j.La)&&t.rB(this.j.L)),0<this.vba.size&&setTimeout(function(){e.log.trace("Notifying about licenses that were added before source buffers created"),Array.from(e.vba).forEach(function(t){e.vba.delete(t),e.Kdb(t)})},0),this.log.trace("Waiting for loadedmetadata"),s.uYa(this.ca,"loadedmetadata",function(){e.log.trace("Video element event: loadedmetadata"),e.j.Se("md")}),o.nf.addListener(o.Vo,this.GY[o.Vo]=function(){return e.close()},n.uM),this.j.addEventListener(g.ma.eh,function(){return e.close()},n.uM),this.j.addEventListener(g.ma.Nhb,function(){return e.ABa()}),this.j.addEventListener(g.ma.WJ,function(){return e.h4b()}),this.j.paused.addListener(function(){return e.Hm()}),this.j.muted.addListener(function(){return e.AEa()}),this.j.volume.addListener(function(){return e.AEa()}),this.j.playbackRate.addListener(function(){return e.Sfa()}),this.j.ft.addListener(function(){return e.Hm()}),this.j.bo.addListener(function(){return e.Hm()}),this.AEa(),this.Sfa(),this.jh.Mea(function(){return e.Vba()}),this.Vba(),this.afc()},P.prototype.Kdb=function(t){var e;this.j.Se("ld",t),null!=(e=this.j.La)&&e.rB(t),this.j.fireEvent(g.ma.jab)},P.prototype.z7=function(t){var e=this;this.jh.ZDb(t),this.YGb(t).then(function(){e.Vba(),e.j.fireEvent(g.ma.Uba)}).catch(function(t){e.Md(h.Z.Hub,{Sb:p.ff(t)})})},P.prototype.goa=function(t,e,i){i=void 0===i?{}:i,e=this.kOb(t,e),this.jh.YDb(t,e,i),this.Vba(),this.Ieb||t.type!==x.u.J||(this.Fm.Yaa||this.seek(this.j.ea,g.Ze.Qz),this.Ieb=!0)},P.prototype.afc=function(){var t=this;this.Yb.addEventListener(y.Dk.J0,this.vz[y.Dk.J0]=function(){return t.B4b()}),this.Yb.addEventListener(y.Dk.Gr,this.vz[y.Dk.Gr]=function(){return t.Nca()}),this.ca.addEventListener("ended",this.vz.ended=function(){return t.b4b()}),this.ca.addEventListener("play",this.vz.play=function(){return t.Uya()}),this.ca.addEventListener("pause",this.vz.pause=function(){return t.Tya()}),this.ca.addEventListener("playing",this.vz.playing=function(){return t.u4b()}),this.Vv=!0,this.jh.Elb(this.mediaTime),this.log.trace("Video element initialization complete"),this.j.Se("vi"),r.config.r2a?setTimeout(function(){t.Kya=!0,t.Hm()},r.config.r2a):this.Kya=!0,this.Dcc(),b.pg(function(){return t.Hm()})},P.prototype.Dcc=function(){var n;function e(){var t=n.j.Gb.value!==g.rb.Gc||0!==(null==(t=n.j.qf)?void 0:t.q$())||O.Nh.hidden?(n.cdb.pu(),"stopTimer"):(n.cdb.aJ(),"ensureTimer");n.log.trace("No render timer update: "+t,{presentingState:g.rb[n.j.Gb.value],hidden:O.Nh.hidden})}function t(t){var e,i;t=void 0===t||t,i=(null==(e=n.j.La)?void 0:e.Ni)&&e.faa(),e=n.j.Gb.value==g.rb.fg&&n.j.state.value==g.dc.Me&&n.j.ft.value==g.Tf.Me&&n.j.bo.value==g.Tf.Me&&!n.j.Ui&&i?(t&&n.L8.pu(),n.L8.aJ(),"ensureTimer"):(n.L8.pu(),"stopTimer"),n.log.trace("Timer update: "+e,{presentingState:g.rb[n.j.Gb.value],playbackState:g.dc[n.j.state.value],avBufferingState:g.Tf[n.j.ft.value],textBufferingState:g.Tf[n.j.bo.value],autoplayWasBlocked:n.j.Ui,hasLicense:i,restartTimer:t})}n=this,r.config.d2a&&(l.Ua(!this.L8),this.L8=c.Fa.get(_.i5)(r.config.d2a,function(){var t=c.Fa.get(f.Dha).B2a(n.j);n.Md(t.code,t)}),this.j.Gb.addListener(function(){return t()}),this.j.ft.addListener(function(){return t()}),this.j.bo.addListener(function(){return t()}),this.j.state.addListener(function(){return t()}),this.j.addEventListener(g.ma.jab,function(){return t()}),this.j.addEventListener(g.ma.Ui,function(){return t()}),this.j.addEventListener(g.ma.yoa,function(){return t()}),this.j.addEventListener(g.ma.OK,function(){return t(!0)}),t()),r.config.bdb&&(this.cdb=c.Fa.get(_.i5)(r.config.bdb,function(){var t;0===(null==(t=n.j.qf)?void 0:t.AB())&&(t=c.Fa.get(f.Dha).B2a(n.j),n.Md(t.code,t)),n.j.Gb.removeListener(e),o.nf.removeListener(o.Dt,n.GY[o.Dt])}),this.j.Gb.addListener(e),o.nf.addListener(o.Dt,this.GY[o.Dt]=e),e())},P.prototype.kOb=function(t,e){var i=this.j.ef;return e=(i=I.Ova(i)?i.EP():void 0)&&t.type===x.u.J&&(t=new T.yia(this.log,{mediaType:x.u.J,url:"http://some-url"},e).Ha(i))?t:e},P.prototype.Vba=function(){this.Vv&&this.Hm(),this.jh.P_a()},P.prototype.Mcc=function(){this.j.Gb.set(g.rb.fg),this.aba=!0,this.Hm()},P.prototype.oIb=function(){var t=this;this.aba&&(this.aba=!1,b.pg(function(){return t.n3b()}))},P.prototype.i$=function(){return this.jh.i$()},P.prototype.n3b=function(){var t,e=this.j.eF()||0;this.j.kb.$h?r.config.HFb&&(e=e-(this.Yb.VBa+1)-r.config.UBa,t=this.j.La.cl().dd,e=Math.max(e,t)):(e-=r.config.dac,e=Math.max(e,this.Fm.Dwa)),this.seek(e,g.Ze.g5)},P.prototype.i_=function(t){var e=this;this.jh.tbc(t),b.pg(function(){return e.Hm()})},P.prototype.DTb=function(){return{J8:this.J8,xca:this.xca}},P.prototype.YGb=function(t){var e=this.Yb&&this.Yb.V6a();return l.Ua(this.j.Wt,"Player duration should be defined before appends start (ase did not fire segmentNormalized event)"),this.j.Wt&&e&&1/0!==t.Zhb&&((t=t.Zhb+t.yw)>this.j.Wt.pfb(w.pa)&&(this.j.Wt=w.vc(t))),Promise.resolve()},P.prototype.R5b=function(){var t=this;this.Fm.jda&&this.Yoa()&&this.jh.Tqa(this.mediaTime)&&(this.Yb.seek(this.mediaTime),this.Fm.jda=!1,b.pg(function(){return t.Hm()}))},P.prototype.Pfc=function(t){var e;t<this.mediaTime?(e=this.mediaTime-t,r.config.T5b&&t&&e>v.Y4&&(t={ElementTime:d.Tj(t),MediaTime:d.Tj(this.mediaTime)},e>v.tRa?this.Md(h.Z.Rub,{Sb:Object.assign({Trace:this.Yb.fF()},t)}):this.log.warn("VIDEO.currentTime became smaller",t))):this.mediaTime=d.AD(t,0,this.j.Wt.ka(w.pa))},P.prototype.Yoa=function(){return this.j.ft.value===g.Tf.Me&&this.j.bo.value===g.Tf.Me},P.prototype.rIb=function(){var t=this,e=this.j.Gb.value,i=e;return this.Fm.Yaa?i=g.rb.fg:this.ca&&this.ca.ended?e===g.rb.Gc&&(i=g.rb.Gs):this.Yoa()&&this.jh.Tqa(this.mediaTime)?this.Yb.iNb()?i=this.rC.paused?g.rb.Ug:g.rb.Gc:this.Mdc.Xl(function(){return t.Ldc()}):i=!this.j.Wt||this.j.j8a(this.mediaTime,this.jh.I8())?g.rb.fg:g.rb.Gs,i},P.prototype.x4b=function(){var t;this.j.Gb.value===g.rb.fg&&(t=this.jh.uec()>this.jh.I8(),this.j.bo.value!==g.Tf.Me?this.j.uj.value?(this.j.fireEvent(g.ma.TA,{cause:a.dQa}),this.log.warn("rebuffer due to timed text",this.j.uj.value.Bh)):this.j.fireEvent(g.ma.vS):t?(this.J8++,this.j.fireEvent(g.ma.TA,{cause:a.Mja})):(this.xca++,this.j.fireEvent(g.ma.TA,{cause:a.Nja})))},P.prototype.Ldc=function(){this.el()||(r.config.r3b&&this.jh.q3b(),this.Hm())},P.prototype.B4b=function(){this.Hm()},P.prototype.Nca=function(){this.Hm(),this.j.fireEvent(g.ma.Gr)},P.prototype.b4b=function(){this.log.trace("Video element event: ended"),this.Hm()},P.prototype.Uya=function(){this.log.trace("Video element event: play"),this.Hm()},P.prototype.Tya=function(){this.log.trace("Video element event: pause"),this.rC.Tya(),this.Hm()},P.prototype.u4b=function(){this.log.trace("Video element event: playing"),this.rC.Uya(),this.Hm()},P.prototype.AEa=function(){this.el()||(this.ca&&this.ca.volume!==this.j.volume.value&&(this.ca.volume=this.j.volume.value),this.ca&&this.ca.muted!==this.j.muted.value&&(this.ca.muted=this.j.muted.value))},P.prototype.Sfa=function(){!this.el()&&this.ca&&(this.ca.playbackRate=this.j.playbackRate.value)},P.prototype.ABa=function(){var e=this;!this.el()&&m.rd(this.ca)&&!this.ca.ended&&this.Kya&&this.rC.paused&&(this.log.trace("Calling play on element"),Promise.resolve(this.rC.play()).then(function(){e.closed||(e.Kza=!1,e.ca.style.display=null,e.j.Ui=!1,e.j.fireEvent(g.ma.yoa))}).catch(function(t){"NotAllowedError"===t.name?(e.log.warn("Playback is blocked by the browser settings",t),e.j.Ui=!0,e.closed||(e.Kza=!0,e.ca.style.display="none",e.j.fireEvent(g.ma.Ui,{player:{play:function(){return e.ABa()}}}))):e.closed||e.Reb||(e.Reb=!0,e.log.error("Play promise rejected",t))}))},P.prototype.h4b=function(){this.Fm.Dwa=this.j.eF()||0},P.prototype.zBa=function(){this.el()||!m.rd(this.ca)||this.ca.ended||!this.Kya||this.rC.paused||(this.log.trace("Calling pause on element"),this.rC.pause())},P.prototype.jmb=function(t){this.j.mediaTime.set(this.mediaTime),t&&this.j.gRb()},P.prototype.seek=function(t,e,i,n){var r;i=void 0===i?this.j.X:i,n=void 0!==n&&n,r=null==(r=this.j.La)?void 0:r.Ni,!this.el()&&r&&(this.j.fireEvent(g.ma.OK,{cause:e}),this.Fm.I_={time:t,cause:e,X:i,nRb:n},this.j.Gb.set(g.rb.fg),this.Hm())},P.prototype.S5b=function(){var t,e,i,n,r,a,o,s;this.Fm.I_&&(e=(t=this.Fm.I_).time,i=t.cause,n=t.X,r=t.nRb,this.jh.vi()&&i!==g.Ze.Qz||(t=this.j.ek(n).L,a=this.jh.vi()?void 0:this.jh.wSb(),n=(a=this.Fm.gUb(e,i,n,r,a)).Aca,r=a.Uk,o=a.u6b,a=a.dh,this.jh.zpa(this.mediaTime),s=this.mediaTime,e=d.Tj(e),this.j.pI("SEEKING: Requested: ("+t+":"+i+":"+e+") - Actual: (contentPts: "+r+",playerPts: "+o+", newMediaTime: "+n+")"),this.log.info("Seeking",{Requested:e,Actual:d.Tj(n),Cause:i,Skip:a}),i===g.Ze.Qz||a||(this.jh.qhb(),this.jh.nbc()),this.mediaTime=n,this.Fm.Dwa=r,e=this.j.Rf.value,o=this.j.Ie.value,this.j.Rf.set(null),this.j.Ie.set(null),this.jmb(!0),this.Fm.I_=void 0,this.Fm.jda=!0,this.j.fireEvent(g.ma.kl,{Lya:s,Aca:n,Uk:r,cause:i,skip:a,Rf:e,Ie:o,L:t}),a&&this.jh.skip(n)))},P.prototype.Md=function(t,e,i){this.closed||this.j.Md(t,e,i)},P.prototype.close=function(){if(!this.closed){this.log.info("Closing."),this.jh.close(),this.Yb.removeEventListener(y.Dk.J0,this.Ybb[y.Dk.J0]),this.Yb.removeEventListener(y.Dk.Gr,this.Ybb[y.Dk.Gr]),this.ca.removeEventListener("ended",this.vz.ended),this.ca.removeEventListener("play",this.vz.play),this.ca.removeEventListener("pause",this.vz.pause),this.ca.removeEventListener("playing",this.vz.playing),this.rC.close(),o.nf.removeListener(o.Vo,this.GY[o.Vo]),o.nf.removeListener(o.Dt,this.GY[o.Dt]),this.closed=!0;try{this.ca.volume=0,this.ca.muted=!0,this.zBa(),this.Yb.close()}catch(t){}this.ca=void 0,this.jh.qhb()}},P.prototype.el=function(){return!!this.closed||!m.rd(this.ca)&&(this.log.error("MediaPresenter not closed and videoElement is not defined"),!0)},e.yNa=P},function(t,e){_esm(e),e.dSa="SeekManagerFactorySymbol"},function(t,e,i){var a,o,s,u,c;_esm(e),e.BJa=void 0,a=i(20),o=i(62),s=i(25),u=i(4),c=i(16),e.BJa=function(n,t,r){function e(t){var e=t.error||t,i=s.ff(e);r.error("uncaught exception",e,i),(e=(e=e&&e.stack)&&a.config.Qlb&&a.config.ofc?0<=e.indexOf(a.config.Qlb):void 0)&&(t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),n.Md(u.Z.GTa))}function i(){o.nf.removeListener(o.U$,e),n.removeEventListener(c.ma.eh,i),n.removeEventListener(c.ma.ow,i)}try{o.nf.addListener(o.U$,e),n.addEventListener(c.ma.eh,i),a.config.wXb&&n.addEventListener(c.ma.ow,i)}catch(t){r.error("exception in exception handler ",t)}}},function(t,e){_esm(e),e.Vja="PlayedSegmentsTrackerFactorySymbol"},function(t,s,e){var u,c,h,f,l,i;_esm(s),s.Uab=void 0,u=e(20),c=e(17),h=e(59),t=e(4),f=e(14),l=e(15),i=e(9),e=e(34),i.Fa.get(e.nj).register(t.Z.eLa,function(t){var n,r,e,a,i;function o(){return f.oM(h.Do()/e)}n=u.config.u0b,r=-6/(n-2-2),e=c.Fu,a=[],i=o(),l.ewa(n)&&(setInterval(function(){var t=o();if(t!=i){for(var e=f.Uz(t-i,30);e--;)a.push(0);(e=f.Gu(a.length-31,0))&&a.splice(0,e),i=t}a[a.length-1]++},1e3/n),s.Uab={wTb:function(){for(var t,e=[],i=a.length-1;i--;)t=a[i],e.unshift(t<=0?9:t<=1?8:n-1<=t?0:f.Dp((t-2)*r+7));return e}}),t(c.Vg)})},function(t,e){_esm(e),e.Sja="PlaybackMilestoneStoreSymbol"},function(t,e){_esm(e),e.Eia={Kvb:"START_SLATE",Tsb:"LIVE_EVENT",srb:"END_SLATE"},e.hMa="LivePlaybackManagerFactorySymbol"},function(t,e){_esm(e),e.wPa="PboManifestRequestTransformerSymbol"},function(t,e){_esm(e),e.aPa="PboBindCommandSymbol"},function(t,e){_esm(e),e.sba=void 0,e.sba=function(i,n,r){var a;if(r.set)throw Error("Property "+n+" has a setter and cannot be made into a lazy property.");a=r.get,r.get=function(){var t=a.apply(this,arguments),e={enumerable:r.enumerable,value:t};return Object.getPrototypeOf(i)===Function.prototype?Object.defineProperty(i,n,e):Object.defineProperty(this,n,e),t}}},function(t,e,i){var n,r,a,o,s;function u(t,e){this.Yb=t,this.j=e,this.vZ=[]}_esm(e),e.hT=void 0,t=i(0),n=i(4),r=i(1),a=i(15),o=i(25),s=i(9),u.prototype.K9=function(e){this.vZ.forEach(function(t){return t(e)})},u.prototype.Md=function(t,e,i){this.j.Md(t,e,i)},u.prototype.$Cb=function(t){-1===this.vZ.indexOf(t)&&this.vZ.push(t)},u.prototype.v9b=function(t){0<=(t=this.vZ.indexOf(t))&&this.vZ.splice(t,1)},u.prototype.T7a=function(t){var e,i={};a.rd(t.code)?i.Ba=n.yJa(t.code):i.Ba=n.Y.Om;try{e=t.message.match(/\((\d*)\)/)[1],i.Of=s.Hoa(e,4)}catch(t){}return i.Sb=o.ff(t),i},i=u,i=t.__decorate([r.$()],i),e.hT=i},function(t,e){_esm(e),e.SQa="PlaygraphPlaybackStrategyFactorySymbol"},function(t,e){_esm(e),e.WQa="PlaygraphStateFactorySymbol"},function(t,e){_esm(e),e.$La="LegacyPostPlayShimFactorySymbol"},function(t,e,i){var o;function n(t,e,i,n,r){var a=this;this.yb=t,this.rl=e,this.Fw=i,this.Mb=n,this.Pn=r,this.Eda=new Map,this.Fbc(),this.Mb.addListener(o.Na.loaded,function(){return a.vfb()})}_esm(e),e.gH=void 0,o=i(16),n.prototype.xYa=function(e){var i=this,t=Object.keys(this.yb.Sl.O).find(function(t){return i.yb.Sl.O[t].N===e.L});return e.id||(e.id=null!=t?t:this.Pn.Bt(e.L)),t||(this.yb.Sl=this.Pn.aEb(this.yb.Sl,e)),t=this.GK(e.id),e.jk&&this.yb.Vfc(e.id,e.jk),t},n.prototype.Ilb=function(){return Promise.reject(Error("Error isn't recoverable"))},n.prototype.Eua=function(t,e){var i=this;return this.Fw.transition(t,e=void 0===e?{}:e).then(function(){i.yb.Sh=t})},n.prototype.close=function(t){return this.Fw.close(t)},n.prototype.isReady=function(){return this.Fw.OUb()},n.prototype.Qo=function(){return this.Fw.Qo()},n.prototype.vJ=function(){return this.Fw.vJ()},n.prototype.GK=function(t){return this.Eda.has(t)||this.Eda.set(t,this.Fw.ng(this.VFb(t))),this.Eda.get(t)},n.prototype.Fbc=function(){var i=this;this.Fw.addListener(o.oH.L0,function(){return i.Mb.Tc(o.oH.L0)}),Object.values(o.Na).forEach(function(e){i.Fw.addListener(e,function(t){return i.Mb.Tc(e,t)})})},n.prototype.Jy=function(){this.vfb()},n.prototype.Xya=function(t){this.Fw.Tfc({id:t,L:this.yb.Ee(t).N,jk:this.yb.gVb(t)})},n.prototype.oK=function(){},n.prototype.vfb=function(){var t,e;this.isReady()&&(t=this.yb.Sh,(e=this.yb.sY(t))&&!this.Eda.has(e)&&(this.Xya(t),this.GK(e)))},n.prototype.VFb=function(t){var e=this.yb.Ee(t),i=this.rl.SP(e.N),n=null==i?void 0:i.Fb;return i=null==i?void 0:i.ja,{id:t,L:e.N,ea:e.va,jk:null!=(t=null==n?void 0:n.jk)?t:e.wa,Fb:n,ja:i}},e.gH=n},function(t,e){function i(){}_esm(e),e.Tja=void 0,i.prototype.vxa=function(t){return{ql:(t=void 0===t?{}:t).trackingId,Q7:t.authParams,Wn:t.sessionParams,he:t.uiLabel,$fa:t.uxLabels,kra:t.disableTrackStickiness,HS:t.uiPlayStartTime,R9:t.forceAudioTrackId,S9:t.forceTimedTextTrackId,$h:t.isBranching,playbackState:t.playbackState?{currentTime:t.playbackState.currentTime,volume:t.playbackState.volume,muted:t.playbackState.muted,playbackRate:t.playbackState.playbackRate}:void 0,hP:t.enableTrickPlay,Sua:t.heartbeatCooldown,Zaa:t.isPlaygraph,xba:t.loadImmediately||!1,Keb:t.pin,S_:t.preciseSeeking,ea:t.startPts,Qa:t.endPts,jk:t.logicalEnd,eea:t.renderTimedText,b4a:t.extraManifestParams,qoa:t.assetId,OEb:t.audioLanguages,Zdc:t.textLanguages,bnb:t.videoLanguage,ip:t.packageId,x2a:t.desiredDownloadables,jBa:t.requestReference,xDb:t.additionalAudioAssets,BDb:t.additionalTextAssets}},e.Tja=i},function(t,e){_esm(e),e.SJa=void 0,e.SJa=function(e){var i,n,r,a;function o(){if(r)for(var t;t=i.pop();)t(a)}function s(t){r=!0,a=t,o()}return i=[],function(t){i.push(t),n||(n=!0,e(s)),o()}}},function(t,e,i){var n,r,a,o;function s(t){var e;n.dk("MediaSourceASE").trace("Inside MediaSourceASE"),e=t.pY(),this.readyState=o.Uc.CLOSED,this.sourceBuffers=e.sourceBuffers,this.addSourceBuffer=function(t){return e.addSourceBuffer(t)},this.n7=function(t){return e.n7(t)},this.removeSourceBuffer=function(t){return e.removeSourceBuffer(t)},this.Hr=function(t){return e.Hr(t)},this.duration=void 0,this.readyState=o.Uc.OPEN,this.Rc=r.Fa.get(a.ki).gK(o.Rc,{})}_esm(e),e.DNa=void 0,n=i(9),r=i(9),a=i(30),Object.defineProperty(s.prototype,"duration",{get(){return this.Gk},set(t){var e;this.Gk=t||1/0,e=Math.floor(1e3*t)||1/0,this.sourceBuffers.forEach(function(t){t.Gk=e})}}),o={Uc:{CLOSED:0,OPEN:1,Gs:2,name:["CLOSED","OPEN","ENDED"]},Rc:{m0a:!0,Jcb:!0}},e.DNa=Object.assign(s,o)},function(t,e,i){var h,f,l,d,p,u,b,c;function g(t){return t&&"object"==typeof t?JSON.stringify(t):"string"==typeof t?'"'+t+'"':""+t}function m(r,a,o){var s;return"string"==typeof r?m.call(this,r.split(",").reduce(function(t,e){var i=e.split("=");return e=i[0],i=i.slice(1).join("="),e&&e.length&&(t[e]=i||!0),t},{}),a,o):(s=0,Object.keys(r).forEach(function(e){var t,i=p[e],n=r[e];if(i){if(t=u[e]||c[typeof h[i]])try{n=t(n)}catch(t){return void(o&&o.error("Failed to convert value '"+n+"' for config '"+e+"' : "+t.toString()))}t=d[i],this[i]=n,d[i]!==t&&(o&&o.debug("Config changed for '"+e+"' from "+g(t)+" ("+typeof t+") to "+g(n)+" ("+typeof n+")"),++s)}else a?((i=(i=b[e])?i.filter(function(t){return t[0]!==this},this):[]).push([this,n]),b[e]=i):o&&o.error("Attempt to change undeclared config option '"+e+"'")},this),s&&d.emit("changed"),s)}function n(){return Object.keys(p).reduce(function(t,e){var i=p[e],n=t[i];return n?(n.push(e),t[i]=n.sort(function(t,e){return e.length-t.length})):t[i]=[e],t},{})}function v(t,e){return t.hasOwnProperty(e)?g(t[e]):void 0}function y(t,e){return void 0===t?e:t}e=i(90),i=i(1423).EventEmitter,h={},f=Object.create(h),l=Object.create(f),d=Object.create(l),p={},u={},b={},d.declare=function(n){return Object.keys(n).forEach(function(e){var t=n[e],i=t[0],r=t[1],a=t[2];if(h.hasOwnProperty(e))throw Error("The local configuraion key '"+e+"' is already in use");(i="string"==typeof i?[i]:i).forEach(function(n){var t;if(p.hasOwnProperty(n))throw Error("The configuration value '"+n+"' has been declared more than once");h.hasOwnProperty(e)||("function"==typeof r&&(r=r()),h[e]=r),p[n]=e,"function"==typeof a&&(u[n]=a),(t=b[n])&&(t.forEach(function(t){var e=t[0],i={};i[n]=t[1],m.call(e,i,!1)}),delete b[n])})}),d},c={object:function(t){return"object"==typeof t?t:JSON.parse(""+t)},boolean:function(t){return"boolean"==typeof t?t:!("0"==""+t||"false"===(""+t).toLowerCase())},number:function(t){if("number"==typeof t)return t;if(t=parseFloat(""+t),isNaN(t))throw Error("parseFloat returned NaN");return t}},d.set=m.bind(f),d.A_=m.bind(l),d.dump=function(r,a){var t,o,s,u;function c(){u&&r&&r.log("===========================================")}t=Object.keys(b).sort(),o={},s=n(),a=y(a,!0),Object.keys(p).sort().forEach(function(t){var e,i,n;t=p[t],o[t]||(o[t]=!0,e=v(f,t),i=v(l,t),!a&&void 0===e&&void 0===i||(n=s[t].join(","),n=(n=(n=(n+=" = "+g(d[t])+" ("+typeof d[t]+") [")+y(i,"<unset>")+",")+y(e,"<unset>")+",")+v(h,t)+"]",u||(u=!0,r&&r.log("Current config values"),c()),r&&r.log(n)))}),(a||t.length)&&r&&r.log("<undeclared> :",t),c()},d.si=function(t){var e={},i={};return Object.keys(p).forEach(function(t){t=p[t],i[t]||(i[t]=!0,e[t]=d[t])}),t&&m.call(e,t),e},d.Jeb=function(){var i=n();return Object.getOwnPropertyNames(f).reduce(function(t,e){return t[i[e][0]]=f[e],t},{})},d.reset=function(){Object.keys(f).forEach(function(t){delete f[t]})},d.Ld={},e(i,d),t.exports=Object.freeze(d)},function(t,e,i){var o;function c(t){for(var e="",i=0;i<t.length;i++)e+=t[i].N+"|";return e}o=i(314),t.exports={assert:function(t,e){if(!t)throw Error("PlayPredictionModel assertion failed"+(e?" : "+e:""))},eqc:function(t,e,i){Array.prototype.splice.apply(t,[e,0].concat(i))},MSb:function(t){for(var e=[],i=0;i<t.length;i++)if(t[i].context===o.NT.Jpb){e=t[i].list;break}return e},tSb:function(t){for(var e=[],i=0;i<t.length;i++)if(t[i].context===o.NT.Cob){e=t[i].list;break}return e},eNb:function(t,e){for(var i=0,n=0,r=t.length-1;n<r;n++){for(var a=c(t[n].list||[]),o=!1,s=0,u=e.length;s<u;s++)if(c(e[s].list||[])==a){o=!0;break}if(!1===o){i=n;break}}return i},G3b:function(t,e,i){for(var n,r=[],a=0;a<Math.min(e,t.length);a++)n=t[a].list||[],r=r.concat(n.slice(0,i));return r},F3b:function(t,e){for(var i,n=[],r=0;r<t.length&&(e-=(i=(i=t[r].list||[]).slice(0,Math.min(i.length,e))).length,n=n.concat(i),0!==e);r++);return n},E3b:function(t,e,i){var n;return e<t.length&&0<=e&&(i<(t=t[e].list||[]).length&&(n=t[i])),n},x4a:function(t){for(var e={},i=t.length,n=0;n<i;n++)for(var r=t[n].list||[],a=0;a<r.length;a++)if(r[a].property===o.iM.gU||r[a].property===o.iM.THa){e.ml=n,e.nn=a;break}return void 0===e.ml&&void 0===e.nn&&(e.ml=0,e.nn=0),e}}},function(t,e,i){var n;function r(t,e,i,n,r,a,o){this.T1=n,this.Onb=t,this.$cb=e,this.hya=i,this.EZb=a,this.jG=o,this.split=r}function a(){this.V={},this.V[0]=new r("1","2","1","14","-0.0000100136",0,0),this.V[1]=new r("3","4","3","20","-0.0000100136",0,0),this.V[3]=new r("7","8","7","10","1.5",0,0),this.V[7]=new r("15","16","15","9","4.5",0,0),this.V[15]=new r("31","32","31","2","5.5",0,0),this.V[31]=new r("63","64","63","29","-0.0000100136",0,0),this.V[63]=new r("123","124","123","24","-0.0000100136",0,0),this.V[123]=new r("123","124","123","0","0",1,.207298),this.V[124]=new r("123","124","123","0","0",1,.49076),this.V[64]=new r("125","126","125","4","40.5",0,0),this.V[125]=new r("125","126","125","0","0",1,-.00157835),this.V[126]=new r("125","126","125","0","0",1,.934205),this.V[32]=new r("65","66","65","135","5.5",0,0),this.V[65]=new r("127","128","128","4","1272.5",0,0),this.V[127]=new r("127","128","128","0","0",1,-.510333),this.V[128]=new r("127","128","128","0","0",1,.18363),this.V[66]=new r("129","130","129","24","-0.0000100136",0,0),this.V[129]=new r("129","130","129","0","0",1,-.0464542),this.V[130]=new r("129","130","129","0","0",1,.458833),this.V[16]=new r("33","34","34","10","2.00001",0,0),this.V[33]=new r("67","68","67","0","29.5",0,0),this.V[67]=new r("131","132","131","2","39.5",0,0),this.V[131]=new r("131","132","131","0","0",1,-.37577),this.V[132]=new r("131","132","131","0","0",1,.512087),this.V[68]=new r("133","134","134","140","1.5",0,0),this.V[133]=new r("133","134","134","0","0",1,.321272),this.V[134]=new r("133","134","134","0","0",1,-.675396),this.V[34]=new r("69","70","70","2","24.5",0,0),this.V[69]=new r("135","136","136","9","28.5",0,0),this.V[135]=new r("135","136","136","0","0",1,-.0573845),this.V[136]=new r("135","136","136","0","0",1,-.507455),this.V[70]=new r("137","138","137","45","-0.0000100136",0,0),this.V[137]=new r("137","138","137","0","0",1,-.503909),this.V[138]=new r("137","138","137","0","0",1,.450886),this.V[8]=new r("17","18","17","4","44189.5",0,0),this.V[17]=new r("35","36","35","2","21.5",0,0),this.V[35]=new r("71","72","72","0","19.5",0,0),this.V[71]=new r("139","140","140","9","2.5",0,0),this.V[139]=new r("139","140","140","0","0",1,.00403497),this.V[140]=new r("139","140","140","0","0",1,-.312656),this.V[72]=new r("141","142","141","135","96",0,0),this.V[141]=new r("141","142","141","0","0",1,-.465786),this.V[142]=new r("141","142","141","0","0",1,.159633),this.V[36]=new r("73","74","73","130","89.5",0,0),this.V[73]=new r("143","144","144","10","4.5",0,0),this.V[143]=new r("143","144","144","0","0",1,-.76265),this.V[144]=new r("143","144","144","0","0",1,-.580804),this.V[74]=new r("145","146","146","10","16.5",0,0),this.V[145]=new r("145","146","146","0","0",1,.296357),this.V[146]=new r("145","146","146","0","0",1,-.691659),this.V[18]=new r("37","38","38","9","1.5",0,0),this.V[37]=new r("37","38","38","0","0",1,.993951),this.V[38]=new r("75","76","75","0","19",0,0),this.V[75]=new r("147","148","147","39","-0.0000100136",0,0),this.V[147]=new r("147","148","147","0","0",1,-.346535),this.V[148]=new r("147","148","147","0","0",1,-.995745),this.V[76]=new r("147","148","147","0","0",1,-.99978),this.V[4]=new r("9","10","9","5","4.5",0,0),this.V[9]=new r("19","20","19","2","4.5",0,0),this.V[19]=new r("39","40","39","140","7.5",0,0),this.V[39]=new r("77","78","78","134","6.5",0,0),this.V[77]=new r("149","150","150","7","11.5",0,0),this.V[149]=new r("149","150","150","0","0",1,.729843),this.V[150]=new r("149","150","150","0","0",1,.383857),this.V[78]=new r("151","152","151","133","4.5",0,0),this.V[151]=new r("151","152","151","0","0",1,.39017),this.V[152]=new r("151","152","151","0","0",1,.0434342),this.V[40]=new r("79","80","79","133","3.5",0,0),this.V[79]=new r("153","154","154","8","4.5",0,0),this.V[153]=new r("153","154","154","0","0",1,-.99536),this.V[154]=new r("153","154","154","0","0",1,-.00943396),this.V[80]=new r("155","156","155","125","-0.0000100136",0,0),this.V[155]=new r("155","156","155","0","0",1,.266272),this.V[156]=new r("155","156","155","0","0",1,.959904),this.V[20]=new r("41","42","42","10","65.5",0,0),this.V[41]=new r("81","82","82","7","10.5",0,0),this.V[81]=new r("157","158","158","2","37.5",0,0),this.V[157]=new r("157","158","158","0","0",1,-.701873),this.V[158]=new r("157","158","158","0","0",1,.224649),this.V[82]=new r("159","160","159","133","9.5",0,0),this.V[159]=new r("159","160","159","0","0",1,.0955181),this.V[160]=new r("159","160","159","0","0",1,-.58962),this.V[42]=new r("83","84","83","39","-0.0000100136",0,0),this.V[83]=new r("161","162","161","135","31",0,0),this.V[161]=new r("161","162","161","0","0",1,-.229692),this.V[162]=new r("161","162","161","0","0",1,.88595),this.V[84]=new r("163","164","164","1","13.5",0,0),this.V[163]=new r("163","164","164","0","0",1,-.992157),this.V[164]=new r("163","164","164","0","0",1,.922159),this.V[10]=new r("21","22","22","4","486",0,0),this.V[21]=new r("43","44","44","133","4.5",0,0),this.V[43]=new r("85","86","86","10","4.5",0,0),this.V[85]=new r("165","166","166","4","158.5",0,0),this.V[165]=new r("165","166","166","0","0",1,-.127778),this.V[166]=new r("165","166","166","0","0",1,.955189),this.V[86]=new r("165","166","166","0","0",1,-.994012),this.V[44]=new r("87","88","88","1","3.5",0,0),this.V[87]=new r("167","168","168","135","7",0,0),this.V[167]=new r("167","168","168","0","0",1,-.997015),this.V[168]=new r("167","168","168","0","0",1,.400821),this.V[88]=new r("169","170","169","130","36",0,0),this.V[169]=new r("169","170","169","0","0",1,-.898638),this.V[170]=new r("169","170","169","0","0",1,.56129),this.V[22]=new r("45","46","45","9","2.5",0,0),this.V[45]=new r("89","90","90","9","1.5",0,0),this.V[89]=new r("171","172","171","10","10.5",0,0),this.V[171]=new r("171","172","171","0","0",1,.573986),this.V[172]=new r("171","172","171","0","0",1,-.627266),this.V[90]=new r("173","174","173","31","-0.0000100136",0,0),this.V[173]=new r("173","174","173","0","0",1,.925273),this.V[174]=new r("173","174","173","0","0",1,-.994805),this.V[46]=new r("91","92","91","136","5.5",0,0),this.V[91]=new r("175","176","175","10","10.5",0,0),this.V[175]=new r("175","176","175","0","0",1,.548352),this.V[176]=new r("175","176","175","0","0",1,-.879195),this.V[92]=new r("177","178","178","8","14.5",0,0),this.V[177]=new r("177","178","178","0","0",1,.457305),this.V[178]=new r("177","178","178","0","0",1,-.998992),this.V[2]=new r("5","6","5","10","2.5",0,0),this.V[5]=new r("11","12","11","9","4.5",0,0),this.V[11]=new r("23","24","24","10","4.00001",0,0),this.V[23]=new r("47","48","48","133","5.5",0,0),this.V[47]=new r("93","94","93","3","13.5",0,0),this.V[93]=new r("179","180","179","138","15.5",0,0),this.V[179]=new r("179","180","179","0","0",1,.658398),this.V[180]=new r("179","180","179","0","0",1,-.927007),this.V[94]=new r("181","182","182","3","15.5",0,0),this.V[181]=new r("181","182","182","0","0",1,-.111351),this.V[182]=new r("181","182","182","0","0",1,-.99827),this.V[48]=new r("95","96","95","7","167",0,0),this.V[95]=new r("183","184","183","132","36.5",0,0),this.V[183]=new r("183","184","183","0","0",1,.895161),this.V[184]=new r("183","184","183","0","0",1,-.765217),this.V[96]=new r("185","186","186","137","6.00001",0,0),this.V[185]=new r("185","186","186","0","0",1,-.851095),this.V[186]=new r("185","186","186","0","0",1,.674286),this.V[24]=new r("49","50","49","137","5.5",0,0),this.V[49]=new r("97","98","97","5","23.5",0,0),this.V[97]=new r("187","188","187","3","28.5",0,0),this.V[187]=new r("187","188","187","0","0",1,.951654),this.V[188]=new r("187","188","187","0","0",1,-.993808),this.V[98]=new r("187","188","187","0","0",1,-.99705),this.V[50]=new r("187","188","187","0","0",1,-.997525),this.V[12]=new r("25","26","25","8","8.5",0,0),this.V[25]=new r("51","52","52","10","4.00001",0,0),this.V[51]=new r("99","100","100","133","5.5",0,0),this.V[99]=new r("189","190","190","7","40.5",0,0),this.V[189]=new r("189","190","190","0","0",1,.151839),this.V[190]=new r("189","190","190","0","0",1,-.855517),this.V[100]=new r("191","192","192","133","14.5",0,0),this.V[191]=new r("191","192","192","0","0",1,.86223),this.V[192]=new r("191","192","192","0","0",1,.544394),this.V[52]=new r("101","102","101","135","47.5",0,0),this.V[101]=new r("193","194","194","4","24.5",0,0),this.V[193]=new r("193","194","194","0","0",1,.946185),this.V[194]=new r("193","194","194","0","0",1,.811859),this.V[102]=new r("193","194","194","0","0",1,-.991561),this.V[26]=new r("53","54","54","132","6.5",0,0),this.V[53]=new r("103","104","103","131","85",0,0),this.V[103]=new r("195","196","196","134","16.5",0,0),this.V[195]=new r("195","196","196","0","0",1,.0473538),this.V[196]=new r("195","196","196","0","0",1,-.999401),this.V[104]=new r("197","198","198","8","15.5",0,0),this.V[197]=new r("197","198","198","0","0",1,.816129),this.V[198]=new r("197","198","198","0","0",1,-.99322),this.V[54]=new r("105","106","105","133","3.5",0,0),this.V[105]=new r("105","106","105","0","0",1,-.998783),this.V[106]=new r("199","200","199","39","-0.0000100136",0,0),this.V[199]=new r("199","200","199","0","0",1,.528588),this.V[200]=new r("199","200","199","0","0",1,-.998599),this.V[6]=new r("13","14","14","10","7.5",0,0),this.V[13]=new r("27","28","28","133","7.5",0,0),this.V[27]=new r("55","56","56","10","4.5",0,0),this.V[55]=new r("107","108","107","3","3.5",0,0),this.V[107]=new r("201","202","201","4","17.5",0,0),this.V[201]=new r("201","202","201","0","0",1,-.379512),this.V[202]=new r("201","202","201","0","0",1,.15165),this.V[108]=new r("203","204","203","57","-0.0000100136",0,0),this.V[203]=new r("203","204","203","0","0",1,-.884606),this.V[204]=new r("203","204","203","0","0",1,.265406),this.V[56]=new r("109","110","109","136","6.5",0,0),this.V[109]=new r("205","206","205","4","157.5",0,0),this.V[205]=new r("205","206","205","0","0",1,-.0142737),this.V[206]=new r("205","206","205","0","0",1,.691279),this.V[110]=new r("205","206","205","0","0",1,-.998086),this.V[28]=new r("57","58","58","138","11.5",0,0),this.V[57]=new r("111","112","112","2","6.5",0,0),this.V[111]=new r("207","208","208","7","67.5",0,0),this.V[207]=new r("207","208","208","0","0",1,.763925),this.V[208]=new r("207","208","208","0","0",1,-.309645),this.V[112]=new r("209","210","209","40","-0.0000100136",0,0),this.V[209]=new r("209","210","209","0","0",1,-.306635),this.V[210]=new r("209","210","209","0","0",1,.556696),this.V[58]=new r("113","114","113","138","50.5",0,0),this.V[113]=new r("211","212","212","8","25.5",0,0),this.V[211]=new r("211","212","212","0","0",1,.508234),this.V[212]=new r("211","212","212","0","0",1,.793551),this.V[114]=new r("211","212","212","0","0",1,-.998438),this.V[14]=new r("29","30","29","134","27.5",0,0),this.V[29]=new r("59","60","60","7","17.5",0,0),this.V[59]=new r("115","116","115","135","5.5",0,0),this.V[115]=new r("213","214","214","137","5.5",0,0),this.V[213]=new r("213","214","214","0","0",1,.401747),this.V[214]=new r("213","214","214","0","0",1,.0367503),this.V[116]=new r("215","216","216","8","5.5",0,0),this.V[215]=new r("215","216","216","0","0",1,-.0241984),this.V[216]=new r("215","216","216","0","0",1,-.999046),this.V[60]=new r("117","118","117","0","12.5",0,0),this.V[117]=new r("217","218","218","132","5.5",0,0),this.V[217]=new r("217","218","218","0","0",1,-.997294),this.V[218]=new r("217","218","218","0","0",1,.210398),this.V[118]=new r("219","220","219","137","1.5",0,0),this.V[219]=new r("219","220","219","0","0",1,-.55763),this.V[220]=new r("219","220","219","0","0",1,.074493),this.V[30]=new r("61","62","62","133","42.5",0,0),this.V[61]=new r("119","120","119","135","5.5",0,0),this.V[119]=new r("221","222","222","4","473.5",0,0),this.V[221]=new r("221","222","222","0","0",1,-.920213),this.V[222]=new r("221","222","222","0","0",1,-.17615),this.V[120]=new r("223","224","224","5","144",0,0),this.V[223]=new r("223","224","224","0","0",1,-.954295),this.V[224]=new r("223","224","224","0","0",1,-.382538),this.V[62]=new r("121","122","121","133","50",0,0),this.V[121]=new r("225","226","226","10","18.5",0,0),this.V[225]=new r("225","226","226","0","0",1,-.0731343),this.V[226]=new r("225","226","226","0","0",1,.755454),this.V[122]=new r("227","228","228","0","30",0,0),this.V[227]=new r("227","228","228","0","0",1,.25),this.V[228]=new r("227","228","228","0","0",1,-.997101)}function o(t,e,i,n,r,a){this.sea=r,this.n8=a}e=i(591),n=i(313),(i={}).IEb=new function(){this.iyb=n(),this.Sa=0,this.update=function(){this.Sa=n()-this.iyb},this.type="num"},i.u_b=new function(){this.type="cat"},i.v_b=new function(){this.type="cat"},i.x_b=new function(){this.type="cat"},i.y_b=new function(){this.type="cat"},i.w_b=new function(){this.type="cat"},i.z_b=new function(){this.type="cat"},i.A_b=new function(){this.type="cat"},i.B_b=new function(){this.type="cat"},i.C_b=new function(){this.type="cat"},i.D_b=new function(){this.type="cat"},i.E_b=new function(){this.type="cat"},i.F_b=new function(){this.type="cat"},i.H_b=new function(){this.type="cat"},i.I_b=new function(){this.type="cat"},i.J_b=new function(){this.type="cat"},i.G_b=new function(){this.type="cat"},i.pFb=new function(){this.update=function(t){for(var e in t.Nb)if("becauseYouAdded"===t.Nb[e].context){this.Sa=Math.max(t.Nb[e].list.length,this.Sa);break}},this.type="num",this.Sa=0},i.qFb=new function(){this.update=function(t){for(var e in t.Nb)if("becauseYouLiked"===t.Nb[e].context){this.Sa=Math.max(t.Nb[e].list.length,this.Sa);break}},this.type="num",this.Sa=0},i.tFb=new function(){this.update=function(t){for(var e in t.Nb)if("billboard"===t.Nb[e].context){this.Sa=Math.max(t.Nb[e].list.length,this.Sa);break}},this.type="num",this.Sa=0},i.KIb=new function(){this.update=function(t){for(var e in t.Nb)if("continueWatching"===t.Nb[e].context){this.Sa=Math.max(t.Nb[e].list.length,this.Sa);break}},this.type="num",this.Sa=0},i.sFb=new function(){this.update=function(t){for(var e in t.Nb)if("bigRow"===t.Nb[e].context){this.Sa=Math.max(t.Nb[e].list.length,this.Sa);break}},this.type="num",this.Sa=0},i.VRb=new function(){this.update=function(t){for(var e in t.Nb)if("genre"===t.Nb[e].context){this.Sa=Math.max(t.Nb[e].list.length,this.Sa);break}},this.type="num",this.Sa=0},i.J2b=new function(){this.update=function(t){for(var e in t.Nb)if("netflixOriginals"===t.Nb[e].context){this.Sa=Math.max(t.Nb[e].list.length,this.Sa);break}},this.type="num",this.Sa=0},i.M2b=new function(){this.update=function(t){for(var e in t.Nb)if("newRelease"===t.Nb[e].context){this.Sa=Math.max(t.Nb[e].list.length,this.Sa);break}},this.type="num",this.Sa=0},i.H6b=new function(){this.update=function(t){for(var e in t.Nb)if("popularTitles"===t.Nb[e].context){this.Sa=Math.max(t.Nb[e].list.length,this.Sa);break}},this.type="num",this.Sa=0},i.au=new function(){this.update=function(t){for(var e in t.Nb)if("queue"===t.Nb[e].context){this.Sa=Math.max(t.Nb[e].list.length,this.Sa);break}},this.type="num",this.Sa=0},i.E8b=new function(){this.update=function(t){for(var e in t.Nb)if("recentlyAdded"===t.Nb[e].context){this.Sa=Math.max(t.Nb[e].list.length,this.Sa);break}},this.type="num",this.Sa=0},i.hcc=new function(){this.update=function(t){for(var e in t.Nb)if("similars"===t.Nb[e].context){this.Sa=Math.max(t.Nb[e].list.length,this.Sa);break}},this.type="num",this.Sa=0},i.Sec=new function(){this.update=function(t){for(var e in t.Nb)if("trendingNow"===t.Nb[e].context){this.Sa=Math.max(t.Nb[e].list.length,this.Sa);break}},this.type="num",this.Sa=0},i.mfc=new function(){this.update=function(t){for(var e in t.Nb)if("ultraHD"===t.Nb[e].context){this.Sa=Math.max(t.Nb[e].list.length,this.Sa);break}},this.type="num",this.Sa=0},i.jhc=new function(){this.update=function(t){for(var e in t.Nb)if("watchAgain"===t.Nb[e].context){this.Sa=Math.max(t.Nb[e].list.length,this.Sa);break}},this.type="num",this.Sa=0},i.Dec=new function(){this.update=function(t){for(var e in t.Nb)if("topTen"===t.Nb[e].context){this.Sa=Math.max(t.Nb[e].list.length,this.Sa);break}},this.type="num",this.Sa=0},i.UIb=new function(){this.type="cat"},i.VIb=new function(){this.type="cat"},i.WIb=new function(){this.type="cat"},i.XIb=new function(){this.type="cat"},i.YIb=new function(){this.type="cat"},i.ZIb=new function(){this.type="cat"},i.$Ib=new function(){this.type="cat"},i.aJb=new function(){this.type="cat"},i.bJb=new function(){this.type="cat"},i.cJb=new function(){this.type="cat"},i.dJb=new function(){this.type="cat"},i.eJb=new function(){this.type="cat"},i.fJb=new function(){this.type="cat"},i.gJb=new function(){this.type="cat"},i.hJb=new function(){this.type="cat"},i.iJb=new function(){this.type="cat"},i.jJb=new function(){this.type="cat"},i.kJb=new function(){this.type="cat"},i.lJb=new function(){this.type="cat"},i.mJb=new function(){this.type="cat"},i.nJb=new function(){this.type="cat"},i.oJb=new function(){this.type="cat"},i.pJb=new function(){this.type="cat"},i.qJb=new function(){this.type="cat"},i.rJb=new function(){this.type="cat"},i.sJb=new function(){this.type="cat"},i.tJb=new function(){this.type="cat"},i.uJb=new function(){this.type="cat"},i.vJb=new function(){this.type="cat"},i.wJb=new function(){this.type="cat"},i.xJb=new function(){this.type="cat"},i.yJb=new function(){this.type="cat"},i.zJb=new function(){this.type="cat"},i.AJb=new function(){this.type="cat"},i.BJb=new function(){this.type="cat"},i.CJb=new function(){this.type="cat"},i.DJb=new function(){this.type="cat"},i.EJb=new function(){this.type="cat"},i.FJb=new function(){this.type="cat"},i.GJb=new function(){this.type="cat"},i.HJb=new function(){this.type="cat"},i.IJb=new function(){this.type="cat"},i.JJb=new function(){this.type="cat"},i.KJb=new function(){this.type="cat"},i.LJb=new function(){this.type="cat"},i.MJb=new function(){this.type="cat"},i.NJb=new function(){this.type="cat"},i.OJb=new function(){this.type="cat"},i.PJb=new function(){this.type="cat"},i.QJb=new function(){this.type="cat"},i.RJb=new function(){this.type="cat"},i.SJb=new function(){this.type="cat"},i.TJb=new function(){this.type="cat"},i.UJb=new function(){this.type="cat"},i.VJb=new function(){this.type="cat"},i.WJb=new function(){this.type="cat"},i.XJb=new function(){this.type="cat"},i.YJb=new function(){this.type="cat"},i.ZJb=new function(){this.type="cat"},i.$Jb=new function(){this.type="cat"},i.aKb=new function(){this.type="cat"},i.bKb=new function(){this.type="cat"},i.cKb=new function(){this.type="cat"},i.dKb=new function(){this.type="cat"},i.eKb=new function(){this.type="cat"},i.fKb=new function(){this.type="cat"},i.gKb=new function(){this.type="cat"},i.hKb=new function(){this.type="cat"},i.iKb=new function(){this.type="cat"},i.jKb=new function(){this.type="cat"},i.kKb=new function(){this.type="cat"},i.lKb=new function(){this.type="cat"},i.mKb=new function(){this.type="cat"},i.nKb=new function(){this.type="cat"},i.oKb=new function(){this.type="cat"},i.pKb=new function(){this.type="cat"},i.qKb=new function(){this.type="cat"},i.rKb=new function(){this.type="cat"},i.sKb=new function(){this.type="cat"},i.H8b=new function(){this.type="cat"},i.I8b=new function(){this.type="cat"},i.J8b=new function(){this.type="cat"},i.K8b=new function(){this.type="cat"},i.L8b=new function(){this.type="cat"},i.M8b=new function(){this.type="cat"},i.N8b=new function(){this.type="cat"},i.O8b=new function(){this.type="cat"},i.P8b=new function(){this.type="cat"},i.Q8b=new function(){this.type="cat"},i.R8b=new function(){this.type="cat"},i.S8b=new function(){this.type="cat"},i.T8b=new function(){this.type="cat"},i.U8b=new function(){this.type="cat"},i.V8b=new function(){this.type="cat"},i.W8b=new function(){this.type="cat"},i.X8b=new function(){this.type="cat"},i.Y8b=new function(){this.type="cat"},i.Z8b=new function(){this.type="cat"},i.$8b=new function(){this.type="cat"},i.a9b=new function(){this.type="cat"},i.b9b=new function(){this.type="cat"},i.c9b=new function(){this.type="cat"},i.wdc=new function(){this.update=function(t){"down"===t.direction&&this.Sa++},this.type="num",this.Sa=0},i.ydc=new function(){this.update=function(t){"right"===t.direction&&this.Sa++},this.type="num",this.Sa=0},i.xdc=new function(){this.update=function(t){"left"===t.direction&&this.Sa++},this.type="num",this.Sa=0},i.zdc=new function(){this.update=function(t){"up"===t.direction&&this.Sa++},this.type="num",this.Sa=0},i.r1b=new function(){this.Sa=0,this.update=function(t){this.Sa=Math.max(this.Sa,t.rowIndex)},this.type="num"},i.s1b=new function(){this.Sa=0,this.update=function(t){this.Sa=Math.max(this.Sa,t.p0a)},this.type="num"},i.v1b=new function(){this.HH=this.Sa=0,this.update=function(t){this.HH++,this.Sa=+(this.Sa+t.rowIndex)/this.HH},this.type="num"},i.w1b=new function(){this.HH=this.Sa=0,this.update=function(t){return this.HH++,this.Sa=+(this.Sa+t.p0a)/this.HH},this.type="num"},i.o7b=new function(){this.type="num"},i.p7b=new function(){this.type="num"},a.prototype.jG=function(t){return this.pXa(this.V[0].Thb(t),t)},a.prototype.pXa=function(t,e){return"string"==typeof t?this.pXa(this.V[t].Thb(e),e):t},r.prototype.Thb=function(t){if(0===this.EZb)switch(t.features[this.T1].type){case"cat":return null===t.features[this.T1].value?this.$cb:"missing"==t.features[this.T1].value?this.hya:this.Onb;case"num":return null===t.features[this.T1].value?this.hya:t.features[this.T1].value<this.split?this.Onb:this.$cb;default:return this.hya}return this.jG},e.declare({b_:["modelSelector","modelone"],fIb:["colEpisodeList",5],XWb:["holdDuration",15e3],Ghb:["rowFirst",2],o0a:["colFirst",5],Hhb:["rowScroll",2],q0a:["colScroll",6],D$b:["rowScrollHorizontal",6],bac:["searchTop",3],S1a:["cwFirst",2],OY:["horizontalItemsFocusedMode",3],GZb:["itemsPerRank",1],h1b:["maxNumberPayloadsStored",10],Dbb:["maxNumberTitlesScheduled",5],Yoc:["enableDetailedLogging",!0],bsc:["rowStep",20],koc:["colStep",15],yrc:["pageRows",100],xrc:["pageColumns",75],zxa:["maskParamsList",(new function(){var t,e;for(this.zxa=[],this.Cm={},this.sea=20,this.n8=15,t=0;t<100;t++)for(e=0;e<75;e++)Math.floor(t/this.sea)+"_"+Math.floor(e/this.n8)in this.Cm||(this.Cm[Math.floor(t/this.sea)+"_"+Math.floor(e/this.n8)]=1,this.zxa.push(new o(0,0,0,0,Math.floor(t/this.sea),Math.floor(e/this.n8))))}).zxa],V:["nodes",(new a).V],mapping:["mapping",{s1b:"0",w1b:"1",r1b:"2",v1b:"3",IEb:"4",zdc:"5",xdc:"6",ydc:"7",wdc:"8",p7b:"9",o7b:"10",u_b:"11",v_b:"12",x_b:"13",y_b:"14",w_b:"15",z_b:"16",A_b:"17",B_b:"18",C_b:"19",D_b:"20",E_b:"21",F_b:"22",G_b:"23",H_b:"24",I_b:"25",J_b:"26",H8b:"27",I8b:"28",J8b:"29",K8b:"30",L8b:"31",M8b:"32",N8b:"33",O8b:"34",P8b:"35",Q8b:"36",R8b:"37",S8b:"38",T8b:"39",U8b:"40",V8b:"41",W8b:"42",X8b:"43",Y8b:"44",Z8b:"45",$8b:"46",a9b:"47",b9b:"48",c9b:"49",UIb:"50",VIb:"51",WIb:"52",XIb:"53",YIb:"54",ZIb:"55",$Ib:"56",aJb:"57",bJb:"58",cJb:"59",dJb:"60",eJb:"61",fJb:"62",gJb:"63",hJb:"64",iJb:"65",jJb:"66",kJb:"67",lJb:"68",mJb:"69",nJb:"70",oJb:"71",pJb:"72",qJb:"73",rJb:"74",sJb:"75",tJb:"76",uJb:"77",vJb:"78",wJb:"79",xJb:"80",yJb:"81",zJb:"82",AJb:"83",BJb:"84",CJb:"85",DJb:"86",EJb:"87",FJb:"88",GJb:"89",HJb:"90",IJb:"91",JJb:"92",KJb:"93",LJb:"94",MJb:"95",NJb:"96",OJb:"97",PJb:"98",QJb:"99",RJb:"100",SJb:"101",TJb:"102",UJb:"103",VJb:"104",WJb:"105",XJb:"106",YJb:"107",ZJb:"108",$Jb:"109",aKb:"110",bKb:"111",cKb:"112",dKb:"113",eKb:"114",fKb:"115",gKb:"116",hKb:"117",iKb:"118",jKb:"119",kKb:"120",lKb:"121",mKb:"122",nKb:"123",oKb:"124",pKb:"125",qKb:"126",rKb:"127",sKb:"128",jhc:"129",E8b:"130",hcc:"131",au:"132",KIb:"133",VRb:"134",Sec:"135",Dec:"136",tFb:"137",M2b:"138",mfc:"139",H6b:"140",pFb:"141",sFb:"142",qFb:"143",J2b:"144"}],features:["features",i],hnc:["_modelName","tree"],cnc:["_format","xgboost"],gnc:["_itemsToKeep",5],fnc:["_itemsThreshold",null],Tnc:["cacheLimit",20]}),t.exports={config:e,Eqc:o,toc:r}},function(t,e,i){t.exports=i(595)},function(t,e,i){_esm(e),i(596),i(597)(),i(622)(),bt._cad_global={},bt.DEBUG=!1,i(17),i(14),i(15),i(25),i(40),i(93),i(1409),i(589),i(58),i(59),i(23),i(73),i(62),i(1410),i(305),i(357),i(1411),i(567),i(1412),i(564),i(571),i(569),i(570),i(558),i(559),i(561),i(301),i(300),i(1413),i(20),i(577),i(1414),i(206),i(107),i(565),i(201),i(528),i(529),i(527),i(1415),i(1416),i(526),i(1417),i(518),i(303),i(516),i(302),i(557),i(1418),i(304),i(573),i(204),i(590),i(167),i(1419),i(139),i(1426),i(1427),i(1429),i(1431),i(572),i(61),i(568),i(499),i(566),i(575),i(1432),i(312),i(140),i(1433),i(1434),i(1435),i(1437),i(1438),i(562)},function(t,e,i){!function(t){var i,n,r,a,o,s,u,e,c,h,f,l,d,p={};function b(t,e,i){var n=u.get(t);if(!n){if(!i)return;n=new o,u.set(t,n)}if(!(t=n.get(e))){if(!i)return;t=new o,n.set(e,t)}return t}function g(t,e,i){return void 0!==(e=b(e,i,!1))&&!!e.has(t)}function m(t,e,i){return void 0===(e=b(e,i,!1))?void 0:e.get(t)}function v(t,e){var i,n=y(t,e);if(null===(t=k(t)))return n;if((e=v(t,e)).length<=0)return n;if(n.length<=0)return e;t=new s;for(var r,a=0;a<n.length;a++)i=n[a],t.add(i);for(n=0;n<e.length;n++)i=e[n],t.add(i);return r=[],S(t,function(t,e){r.push(e)}),r}function y(t,e){var i;return t=b(t,e,!1),i=[],t&&S(t,function(t,e){return i.push(e)}),i}function w(t){return void 0===t}function A(t){return Array.isArray?Array.isArray(t):t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function _(t){return"object"==typeof t?null!==t:"function"==typeof t}function E(t){return"symbol"==typeof t?t:String(t)}function k(t){var e,i=Object.getPrototypeOf(t);return"function"!=typeof t||t===a||i!==a||null==(e=(e=t.prototype)&&Object.getPrototypeOf(e))||e===Object.prototype||"function"!=typeof(e=e.constructor)||e===t?i:e}function S(t,e,i){var n,r,a,o=t.entries;if("function"==typeof o){o=o.call(t);try{for(;n=(a=(a=o).next()).done?void 0:a;)r=n.value,e.call(i,r[1],r[0],t)}finally{n&&(t=o.return)&&t.call(o)}}else"function"==typeof(o=t.forEach)&&o.call(t,e,i)}function T(e,i,n){var r=0;return{next:function(){var t;if((e||i)&&r<(e||i).length)switch(t=r++,n){case"key":return{value:e[t],done:!1};case"value":return{value:i[t],done:!1};case"key+value":return{value:[e[t],i[t]],done:!1}}return{value:i=e=void 0,done:!0}},throw:function(t){throw(e||i)&&(i=e=void 0),t},return:function(t){return(e||i)&&(i=e=void 0),{value:t,done:!0}}}}function I(t){return t.Zmc=1,delete t.$mc,t}function O(){}function x(){this.xf=[],this.Vf=[],this.sx=f,this.Qu=-2}function R(){this.th=new o}function D(t,e){for(var i=0;i<e;++i)t[i]=255*Math.random()|0;return t}function P(){var t,e;do{(t="function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(16)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(16)):D(new Uint8Array(16),16):D(Array(16),16))[6]=79&t[6]|64,t[8]=191&t[8]|128;for(var i="",n=0;n<16;++n)4!==n&&6!==n&&8!==n||(i+="-"),(e=t[n])<16&&(i+="0"),i+=e.toString(16).toLowerCase()}while(r.has(l,t="@@WeakMap@@"+i));return l[t]=!0,t}function C(t,e){if(!i.call(t,d)){if(!e)return;Object.defineProperty(t,d,{value:n()})}return t[d]}function j(){this.Wu=P()}i=Object.prototype.hasOwnProperty,h="function"==typeof Object.create,O.prototype=e={},e=(new O).__proto__===e,n=h?function(){return I(Object.create(null))}:e?function(){return I({__proto__:null})}:function(){return I({})},c=r=r||{},h=!h&&!e,c.has=h?function(t,e){return i.call(t,e)}:function(t,e){return e in t},c.get=h?function(t,e){return i.call(t,e)?t[e]:void 0}:function(t,e){return t[e]},a=Object.getPrototypeOf(Function),o="function"==typeof Map?Map:(f={},Object.defineProperty(x.prototype,"size",{get(){return this.xf.length},enumerable:!0,configurable:!0}),x.prototype.has=function(t){return 0<=this.mA(t,!1)},x.prototype.get=function(t){return 0<=(t=this.mA(t,!1))?this.Vf[t]:void 0},x.prototype.set=function(t,e){return t=this.mA(t,!0),this.Vf[t]=e,this},x.prototype.delete=function(t){var e=this.mA(t,!1);if(0<=e){for(t=this.xf.length,e+=1;e<t;e++)this.xf[e-1]=this.xf[e],this.Vf[e-1]=this.Vf[e];return this.xf.length--,this.Vf.length--,this.sx=f,this.Qu=-2,!0}return!1},x.prototype.clear=function(){this.xf.length=0,this.Vf.length=0,this.sx=f,this.Qu=-2},x.prototype.keys=function(){return T(this.xf,void 0,"key")},x.prototype.values=function(){return T(void 0,this.Vf,"value")},x.prototype.entries=function(){return T(this.xf,this.Vf,"key+value")},x.prototype.mA=function(t,e){var i;return this.sx===t?this.Qu:((i=this.xf.indexOf(t))<0&&e&&(i=this.xf.length,this.xf.push(t),this.Vf.push(void 0)),this.sx=t,this.Qu=i)},x),s="function"==typeof Set?Set:(Object.defineProperty(R.prototype,"size",{get(){return this.th.size},enumerable:!0,configurable:!0}),R.prototype.has=function(t){return this.th.has(t)},R.prototype.add=function(t){return this.th.set(t,t),this},R.prototype.delete=function(t){return this.th.delete(t)},R.prototype.clear=function(){this.th.clear()},R.prototype.keys=function(){return this.th.keys()},R.prototype.values=function(){return this.th.values()},R.prototype.entries=function(){return this.th.entries()},R),u=new("function"==typeof WeakMap?WeakMap:(l=n(),d=P(),j.prototype.has=function(t){return void 0!==(t=C(t,!1))&&r.has(t,this.Wu)},j.prototype.get=function(t){return void 0!==(t=C(t,!1))?r.get(t,this.Wu):void 0},j.prototype.set=function(t,e){return C(t,!0)[this.Wu]=e,this},j.prototype.delete=function(t){return void 0!==(t=C(t,!1))&&delete t[this.Wu]},j.prototype.clear=function(){this.Wu=P()},j)),p.fq=function(t,e,i,n){var r;if(!w(n)){if(!A(t))throw new TypeError;if(!_(e))throw new TypeError;if(w(i))throw new TypeError;if(!_(n))throw new TypeError;i=E(i);for(var a=t.length-1;0<=a;--a)if(!w(r=(0,t[a])(e,i,n))){if(!_(r))throw new TypeError;n=r}return n}if(w(i)){if(!A(t))throw new TypeError;if("function"!=typeof e)throw new TypeError;for(i=t.length-1;0<=i;--i)if(!w(n=(0,t[i])(e))){if("function"!=typeof n)throw new TypeError;e=n}return e}if(!A(t))throw new TypeError;if(!_(e))throw new TypeError;for(i=E(i),n=t.length-1;0<=n;--n)(0,t[n])(e,i)},p.Ec=function(i,n){return function(t,e){if(w(e)){if("function"!=typeof t)throw new TypeError;b(t,void 0,!0).set(i,n)}else{if(!_(t))throw new TypeError;b(t,e=E(e),!0).set(i,n)}}},p.T8=function(t,e,i,n){if(!_(i))throw new TypeError;b(i,n=w(n)?n:E(n),!0).set(t,e)},p.uWb=function(t,e){var i;if(_(e))return function t(e,i,n){return!!g(e,i,n)||null!==(i=k(i))&&t(e,i,n)}(t,e,i=w(i)?i:E(i));throw new TypeError},p.Mua=function(t,e){var i;if(_(e))return g(t,e,i=w(i)?i:E(i));throw new TypeError},p.getMetadata=function(t,e,i){if(_(e))return function t(e,i,n){return g(e,i,n)?m(e,i,n):null!==(i=k(i))?t(e,i,n):void 0}(t,e,i=w(i)?i:E(i));throw new TypeError},p.f7a=function(t,e,i){if(_(e))return m(t,e,i=w(i)?i:E(i));throw new TypeError},p.Bpc=function(t,e){if(_(t))return v(t,e=w(e)?e:E(e));throw new TypeError},p.Dpc=function(t,e){if(_(t))return y(t,e=w(e)?e:E(e));throw new TypeError},p.Goc=function(t,e,i){var n;if(_(e))return w(i)||(i=E(i)),!(w(n=b(e,i,!1))||!n.delete(t))&&(0<n.size||((t=u.get(e)).delete(i),0<t.size||u.delete(e),!0));throw new TypeError};var N=void 0!==bt?bt:"undefined"!=typeof WorkerGlobalScope?self:void 0!==t?t:Function("return this;")();if(void 0!==N.Reflect){if(N.Reflect!==p)for(var M in p)i.call(p,M)&&(N.Reflect[M]=p[M])}else N.Reflect=p}.call(this,i(207))},function(t,e,i){var n=i(315),r=i(601);t.exports=function(){var t=r();return n(Array.prototype,{includes:t},{includes:function(){return Array.prototype.includes!==t}}),t}},function(t,e,i){var n=Array.prototype.slice,r=i(316),a=Object.keys,o=a?function(t){return a(t)}:i(599),s=Object.keys;o.Gm=function(){return Object.keys?function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2)||(Object.keys=function(t){return r(t)?s(n.call(t)):s(t)}):Object.keys=o,Object.keys||o},t.exports=o},function(t,e,i){var u,c,h,f,l,d,p,n,b,r;Object.keys||(u=Object.prototype.hasOwnProperty,c=Object.prototype.toString,h=i(316),e=Object.prototype.propertyIsEnumerable,f=!e.call({toString:null},"toString"),l=e.call(function(){},"prototype"),d="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),p=function(t){var e=t.constructor;return e&&e.prototype===t},n={Ehc:!0,Fhc:!0,Ghc:!0,Hhc:!0,Ihc:!0,Jhc:!0,Khc:!0,Lhc:!0,Mhc:!0,Nhc:!0,Ohc:!0,Phc:!0,Qhc:!0,Rhc:!0,Shc:!0,Thc:!0,Uhc:!0,Vhc:!0,Whc:!0,Xhc:!0,Yhc:!0,Zhc:!0,$hc:!0},b=function(){if(void 0===bt)return!1;for(var t in bt)try{if(!n["$"+t]&&u.call(bt,t)&&null!==bt[t]&&"object"==typeof bt[t])try{p(bt[t])}catch(t){return!0}}catch(t){return!0}return!1}(),r=function(t){var e,i=null!==t&&"object"==typeof t,n="[object Function]"===c.call(t),r=h(t),a=i&&"[object String]"===c.call(t),o=[];if(!i&&!n&&!r)throw new TypeError("Object.keys called on a non-object");if(i=l&&n,a&&0<t.length&&!u.call(t,0))for(a=0;a<t.length;++a)o.push(String(a));if(r&&0<t.length)for(r=0;r<t.length;++r)o.push(String(r));else for(var s in t)i&&"prototype"===s||!u.call(t,s)||o.push(String(s));if(f){if(void 0!==bt&&b)try{e=p(t)}catch(t){e=!1}else e=p(t);for(r=0;r<d.length;++r)e&&"constructor"===d[r]||!u.call(t,d[r])||o.push(d[r])}return o}),t.exports=r},function(t){var s=Array.prototype.slice,u=Object.prototype.toString;t.exports=function(e){var i=this;if("function"!=typeof i||"[object Function]"!==u.call(i))throw new TypeError("Function.prototype.bind called on incompatible "+i);for(var n,r=s.call(arguments,1),t=Math.max(0,i.length-r.length),a=[],o=0;o<t;o++)a.push("$"+o);return n=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(function(){var t;return this instanceof n?(t=i.apply(this,r.concat(s.call(arguments))),Object(t)===t?t:this):i.apply(e,r.concat(s.call(arguments)))}),i.prototype&&((t=function(){}).prototype=i.prototype,n.prototype=new t,t.prototype=null),n}},function(t,e,i){var n=i(602);t.exports=function(){return Array.prototype.includes&&Array(1).includes(void 0)?Array.prototype.includes:n}},function(t,e,i){var n,r,a,o,s,u=i(320),c=i(615),h=i(617),f=i(620),l=i(169),d=i(323);e=i(43),n=i(141),r=i(621),a=n("String.prototype.charAt"),o=e("%Array.prototype.indexOf%"),s=e("%Math.max%"),t.exports=function(t){var e,i,n=1<arguments.length?u(arguments[1]):0;if(o&&!l(t)&&d(n)&&void 0!==t)return-1<o.apply(this,arguments);if(e=h(this),0===(i=c(e.length)))return!1;for(n=0<=n?n:s(0,i+n);n<i;){if(f(t,r(e)?a(e,n):e[n]))return!0;n+=1}return!1}},function(t,e,i){var n=i(43)("%Math.abs%");t.exports=function(t){return n(t)}},function(t){var e=Math.floor;t.exports=function(t){return e(t)}},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,d,p=i(43),b=p("%TypeError%"),g=p("%Number%");e=p("%RegExp%"),n=p("%parseInt%"),p=i(141),r=i(607),a=i(608),o=p("String.prototype.slice"),s=r(/^0b[01]+$/i),u=r(/^0o[0-7]+$/i),c=r(/^[-+]0x[0-9a-f]+$/i),e=new e("[]","g"),h=r(e),f=/(^[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]+)|([\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]+$)/g,l=p("String.prototype.replace"),d=i(609),t.exports=function t(e){var i;if("symbol"==typeof(e=a(e)?e:d(e,g)))throw new b("Cannot convert a Symbol value to a number");if("bigint"==typeof e)throw new b("Conversion from 'BigInt' to 'number' is not allowed.");if("string"==typeof e){if(s(e))return t(n(o(e,2),2));if(u(e))return t(n(o(e,2),8));if(h(e)||c(e))return NaN;if((i=l(e,f,""))!==e)return t(i)}return g(e)}},function(t,e,i){var n,r,a,o,s,u,c;function h(){return o(n,r,arguments)}if(n=i(208),e=i(43),r=e("%Function.prototype.apply%"),a=e("%Function.prototype.call%"),o=e("%Reflect.apply%",!0)||n.call(a,r),s=e("%Object.getOwnPropertyDescriptor%",!0),u=e("%Object.defineProperty%",!0),c=e("%Math.max%"),u)try{u({},"a",{value:1})}catch(t){u=null}t.exports=function(t){var e=o(n,a,arguments);return s&&u&&s(e,"length").configurable&&u(e,"length",{value:1+c(0,t.length-(arguments.length-1))}),e},u?u(t.exports,"apply",{value:h}):t.exports.apply=h},function(t,e,i){var n=i(141)("RegExp.prototype.exec");t.exports=function(e){return function(t){return null!==n(e,t)}}},function(t){t.exports=function(t){return null===t||"function"!=typeof t&&"object"!=typeof t}},function(t,e,i){var n=i(610);t.exports=function(t){return 1<arguments.length?n(t,arguments[1]):n(t)}},function(t,e,i){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,a=i(611),o=i(321),s=i(612),u=i(613);t.exports=function(t){var e,i,n;if(a(t))return t;if(e="default",1<arguments.length&&(arguments[1]===String?e="string":arguments[1]===Number&&(e="number")),r)if(Symbol.toPrimitive)if(null!=(n=t[i=Symbol.toPrimitive])){if(!o(n))throw new TypeError(n+" returned for property "+i+" of object "+t+" is not a function");i=n}else i=void 0;else u(t)&&(i=Symbol.prototype.valueOf);if(void 0!==i){if(e=i.call(t,e),a(e))return e;throw new TypeError("unable to convert exotic object to primitive")}t:{if(e="default"===(e="default"===e&&(s(t)||u(t))?"string":e)?"number":e,null==t)throw new TypeError("Cannot call method on "+t);if("string"!=typeof e||"number"!==e&&"string"!==e)throw new TypeError('hint must be "string" or "number"');for(e="string"===e?["toString","valueOf"]:["valueOf","toString"],i=0;i<e.length;++i)if(n=t[e[i]],o(n)&&(n=n.call(t),a(n)))break t;throw new TypeError("No default value")}return n}},function(t){t.exports=function(t){return null===t||"function"!=typeof t&&"object"!=typeof t}},function(t,e,i){var n=Date.prototype.getDay,r=Object.prototype.toString,a=i(322)();t.exports=function(e){if("object"!=typeof e||null===e)e=!1;else if(a)try{n.call(e),e=!0}catch(t){e=!1}else e="[object Date]"===r.call(e);return e}},function(t,e,i){var n,r,a=Object.prototype.toString;i(318)()?(n=Symbol.prototype.toString,r=/^Symbol\(.*\)$/,t.exports=function(t){if("symbol"==typeof t)return!0;if("[object Symbol]"!==a.call(t))return!1;try{return"symbol"==typeof t.valueOf()&&r.test(n.call(t))}catch(t){return!1}}):t.exports=function(){return!1}},function(t){t.exports=function(t){return 0<=t?1:-1}},function(t,e,i){var n=i(616),r=i(320);t.exports=function(t){return(t=r(t))<=0?0:n<t?n:t}},function(t,e,i){e=(i=i(43))("%Math%"),i=i("%Number%"),t.exports=i.MAX_SAFE_INTEGER||e.pow(2,53)-1},function(t,e,i){var n=i(43)("%Object%"),r=i(618);t.exports=function(t){return r(t),n(t)}},function(t,e,i){t.exports=i(619)},function(t,e,i){var n=i(43)("%TypeError%");t.exports=function(t,e){if(null==t)throw new n(e||"Cannot call method on "+t);return t}},function(t,e,i){var n=i(169);t.exports=function(t,e){return t===e||n(t)&&n(e)}},function(t,e,i){var n=String.prototype.valueOf,r=Object.prototype.toString,a=i(322)();t.exports=function(e){if("string"==typeof e)e=!0;else if("object"!=typeof e)e=!1;else if(a)try{n.call(e),e=!0}catch(t){e=!1}else e="[object String]"===r.call(e);return e}},function(t,e,i){var n=i(209),r=i(623),a=i(315);t.exports=function(){var t;return n(),t=r(),a(Promise.prototype,{finally:t},{finally:function(){return Promise.prototype.finally!==t}}),t}},function(t,e,i){var n=i(209),r=i(624);t.exports=function(){return n(),"function"==typeof Promise.prototype.finally?Promise.prototype.finally:r}},function(t,e,i){var u,c,h,f;function n(t){var e,i,n,r,a,o,s;if("Object"!==h(this))throw new TypeError("receiver is not an Object");return e=c(this,f),u(n=i=t)&&(i=function(t){var e=s();return l(o,e).then(function(){return t})},r=o=e,a=s=t,n=function(t){var e=a();return l(r,e).then(function(){throw t})}),this.then(i,n)}function l(t,e){return new t(function(t){t(e)})}i(209)(),u=i(324),c=i(625),h=i(109),f=Promise,Object.getOwnPropertyDescriptor&&(e=Object.getOwnPropertyDescriptor(n,"name"))&&e.configurable&&Object.defineProperty(n,"name",{configurable:!0,value:"finally"}),t.exports=n},function(t,e,i){var n,r,a,o;e=i(43),n=e("%Symbol.species%",!0),r=e("%TypeError%"),a=i(626),o=i(109),t.exports=function(t,e){if("Object"!==o(t))throw new r("Assertion failed: Type(O) is not Object");if(void 0===(t=t.constructor))return e;if("Object"!==o(t))throw new r("O.constructor is not an Object");if(null==(t=n?t[n]:void 0))return e;if(a(t))return t;throw new r("no constructor found")}},function(t,e,i){var n,r,a=i(627)("%Reflect.construct%",!0);e=i(628);try{e({},"",{"[[Get]]":function(){}})}catch(t){e=null}e&&a?(n={},e(r={},"length",{"[[Get]]":function(){throw n},"[[Enumerable]]":!0}),t.exports=function(t){try{a(t,r)}catch(t){return t===n}}):t.exports=function(t){return"function"==typeof t&&!!t.prototype}},function(t,e,i){t.exports=i(43)},function(t,e,i){var n=i(43)("%TypeError%"),r=i(629),a=i(630),o=i(632),s=i(636),u=i(637),c=i(638),h=i(639),f=i(640),l=i(109);t.exports=function(t,e,i){if("Object"!==l(t))throw new n("Assertion failed: Type(O) is not Object");if(!c(e))throw new n("Assertion failed: IsPropertyKey(P) is not true");if(i=r({DTa:l,KLa:u,JLa:s},i)?i:f(i),r({DTa:l,KLa:u,JLa:s},i))return a(u,h,o,t,e,i);throw new n("Assertion failed: Desc is not a valid Property Descriptor")}},function(t,e,i){var r,a;e=i(43),r=i(108),a=e("%TypeError%"),t.exports=function(t,e){var i,n;if("Object"!==t.DTa(e))return!1;for(n in i={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0},e)if(r(e,n)&&!i[n])return!1;if(t.KLa(e)&&t.JLa(e))throw new a("Property Descriptors may not be both accessor and data descriptors");return!0}},function(t,e,i){var n,o,s,u,c;e=i(317),n=i(43),o=e()&&n("%Object.defineProperty%",!0),s=e.mWb(),u=s&&i(631),c=i(141)("Object.prototype.propertyIsEnumerable"),t.exports=function(t,e,i,n,r,a){return o?s&&"length"===r&&"[[Value]]"in a&&u(n)&&n.length!==a["[[Value]]"]?(n.length=a["[[Value]]"],n.length===a["[[Value]]"]):(o(n,r,i(a)),!0):!(!(t(a)&&a["[[Configurable]]"]&&a["[[Writable]]"])||r in n&&c(n,r)!==!!a["[[Enumerable]]"])&&(t=a["[[Value]]"],n[r]=t,e(n[r],t))}},function(t,e,i){var n;e=i(43)("%Array%"),n=!e.isArray&&i(141)("Object.prototype.toString"),t.exports=e.isArray||function(t){return"[object Array]"===n(t)}},function(t,e,i){var n=i(210),r=i(634),a=i(109);t.exports=function(t){return void 0!==t&&n(a,"Property Descriptor","Desc",t),r(t)}},function(t,e,i){var n=i(108);t.exports=function(t){return n(t,"[[StartIndex]]")&&n(t,"[[EndIndex]]")&&0<=t["[[StartIndex]]"]&&t["[[EndIndex]]"]>=t["[[StartIndex]]"]&&String(parseInt(t["[[StartIndex]]"],10))===String(t["[[StartIndex]]"])&&String(parseInt(t["[[EndIndex]]"],10))===String(t["[[EndIndex]]"])}},function(t){t.exports=function(t){var e;return void 0===t?t:(e={},"[[Value]]"in t&&(e.value=t["[[Value]]"]),"[[Writable]]"in t&&(e.writable=!!t["[[Writable]]"]),"[[Get]]"in t&&(e.get=t["[[Get]]"]),"[[Set]]"in t&&(e.set=t["[[Set]]"]),"[[Enumerable]]"in t&&(e.enumerable=!!t["[[Enumerable]]"]),"[[Configurable]]"in t&&(e.configurable=!!t["[[Configurable]]"]),e)}},function(t){t.exports=function(t){return null===t?"Null":void 0===t?"Undefined":"function"==typeof t||"object"==typeof t?"Object":"number"==typeof t?"Number":"boolean"==typeof t?"Boolean":"string"==typeof t?"String":void 0}},function(t,e,i){var n=i(108),r=i(210),a=i(109);t.exports=function(t){return void 0!==t&&(r(a,"Property Descriptor","Desc",t),!(!n(t,"[[Get]]")&&!n(t,"[[Set]]")))}},function(t,e,i){var n=i(108),r=i(210),a=i(109);t.exports=function(t){return void 0!==t&&(r(a,"Property Descriptor","Desc",t),!(!n(t,"[[Value]]")&&!n(t,"[[Writable]]")))}},function(t){t.exports=function(t){return"string"==typeof t||"symbol"==typeof t}},function(t,e,i){var n=i(169);t.exports=function(t,e){return t===e?0!==t||1/t==1/e:n(t)&&n(e)}},function(t,e,i){var n=i(108),r=i(43)("%TypeError%"),a=i(109),o=i(641),s=i(324);t.exports=function(t){var e,i;if("Object"!==a(t))throw new r("ToPropertyDescriptor requires an object");if(e={},n(t,"enumerable")&&(e["[[Enumerable]]"]=o(t.enumerable)),n(t,"configurable")&&(e["[[Configurable]]"]=o(t.configurable)),n(t,"value")&&(e["[[Value]]"]=t.value),n(t,"writable")&&(e["[[Writable]]"]=o(t.writable)),n(t,"get")){if(void 0!==(i=t.get)&&!s(i))throw new r("getter must be a function");e["[[Get]]"]=i}if(n(t,"set")){if(void 0!==(t=t.set)&&!s(t))throw new r("setter must be a function");e["[[Set]]"]=t}if((n(e,"[[Get]]")||n(e,"[[Set]]"))&&(n(e,"[[Value]]")||n(e,"[[Writable]]")))throw new r("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return e}},function(t){t.exports=function(t){return!!t}},function(t,e,i){var s,n,a,r,o,u,c,h,f,l,d,p,b=this&&this.__awaiter||function(a,o,s,u){return new(s=s||Promise)(function(t,e){function i(t){try{r(u.next(t))}catch(t){e(t)}}function n(t){try{r(u.throw(t))}catch(t){e(t)}}function r(e){e.done?t(e.value):new s(function(t){t(e.value)}).then(i,n)}r((u=u.apply(a,o||[])).next())})};function g(t){if("object"!=typeof(t=t||{}))throw Error(""+a.Ipb);if(void 0===t.RI)t.RI=r.Bu.k5;else if(t.RI!==r.Bu.zka&&t.RI!==r.Bu.k5&&t.RI!==r.Bu.Request)throw Error(""+a.Gpb);if(void 0===t.rW)t.rW=!1;else if("boolean"!=typeof t.rW)throw Error(""+a.Fpb);if(void 0===t.lL)t.lL=!1;else if("boolean"!=typeof t.lL)throw Error(""+a.Hpb);this.options={rW:t.rW,RI:t.RI,lL:t.lL},this.id=f.id(),this.DH=new p.Ysb,this.xXa=[],this.parent=this.t6=null,this.qzb=new o.bja}s=this&&this.__generator||function(n,r){var a,o,s,u,t;function e(i){return function(t){var e=[i,t];if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,s&&(u=s[2&e[0]?"return":e[0]?"throw":"next"])&&!(u=u.call(s,e[1])).done)return u;switch(s=0,(e=u?[0,u.value]:e)[0]){case 0:case 1:u=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,s=e[1],e=[0];continue;case 7:e=a.il.pop(),a.Ih.pop();continue;default:if(!(u=0<(u=a.Ih).length&&u[u.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!u||e[1]>u[0]&&e[1]<u[3]))a.label=e[1];else if(6===e[0]&&a.label<u[1])a.label=u[1],u=e;else{if(!(u&&a.label<u[2])){u[2]&&a.il.pop(),a.Ih.pop();continue}a.label=u[2],a.il.push(e)}}e=r.call(n,a)}catch(t){e=[6,t],s=0}finally{o=u=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}return a={label:0,ib:function(){if(1&u[0])throw u[1];return u[1]},Ih:[],il:[]},t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t},_esm(e),n=i(643),a=i(56),r=i(79),i(41),o=i(325),u=i(644),c=i(651),h=i(653),f=i(110),l=i(142),d=i(656),p=i(657),g.prototype.load=function(){for(var t,e,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];for(var n=this.uVa(),r=0;r<i.length;r++)e=n((t=i[r]).id),t.RAa(e.NZa,e.Nlb,e.z$a,e.rgb)},g.prototype.AZ=function(){for(var o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];b(this,void 0,void 0,function(){var e,i,n,r,a;return s(this,function(t){switch(t.label){case 0:e=this.uVa(),i=0,n=o,t.label=1;case 1:return i<n.length?(r=n[i],a=e(r.id),[4,r.RAa(a.NZa,a.Nlb,a.z$a,a.rgb)]):[3,4];case 2:t.ib(),t.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},g.prototype.bind=function(t){var e=new n.Uob(t,this.options.RI||r.Bu.k5);return this.DH.add(t,e),new h.Wob(e)},g.prototype.A8b=function(t){return this.Mlb(t),this.bind(t)},g.prototype.Mlb=function(e){try{this.DH.remove(e)}catch(t){throw Error(a.ppb+" "+l.LP(e))}},g.prototype.M9a=function(t){var e=this.DH.k8a(t);return e=!e&&this.parent?this.parent.M9a(t):e},g.prototype.YCa=function(){this.xXa.push(d.Ppb.of(this.DH.clone(),this.t6))},g.prototype.restore=function(){var t=this.xXa.pop();if(void 0===t)throw Error(a.Mtb);this.DH=t.uW,this.t6=t.U1b},g.prototype.BKb=function(){var t=new g(this.options);return t.parent=this,t},g.prototype.get=function(t){return this.tVa(!1,!1,r.cA.Tka,t)},g.prototype.getAll=function(t){return this.tVa(!0,!0,r.cA.Tka,t)},g.prototype.resolve=function(t){var e=this.BKb();return e.bind(t).klb(),e.get(t)},g.prototype.uVa=function(){var n;return n=this,function(t){return{NZa:function(t){return(t=n.bind.bind(n)(t)).Lc.t2b=i,t},z$a:function(t){return n.M9a.bind(n)(t)},rgb:(e=i=t,function(t){return(t=n.A8b.bind(n)(t)).Lc.t2b=e,t}),Nlb:function(t){n.Mlb.bind(n)(t)}};var e,i}},g.prototype.tVa=function(t,e,i,n){var r=null;if(t={fFb:t,JIb:function(t){return t},cZb:e,key:void 0,oh:n,Tdc:i,value:void 0},this.t6){if(null==(r=this.t6(t)))throw Error(a.Dsb)}else r=this.HAb()(t);return r},g.prototype.HAb=function(){var i=this;return function(t){var e=u.lR(i.qzb,i,t.cZb,t.Tdc,t.oh,t.key,t.value,t.fFb),e=t.JIb(e);return c.resolve(e)}},e.M2=g},function(t,e,i){var n,r;function a(t,e){this.id=r.id(),this.yna=!1,this.oh=t,this.scope=e,this.type=n.Ak.Psb,this.LI=function(){return!0},this.ZO=this.Iy=this.wC=this.sP=this.cache=this.Cn=null}_esm(e),n=i(79),r=i(110),a.prototype.clone=function(){var t=new a(this.oh,this.scope);return t.yna=!1,t.Cn=this.Cn,t.ZO=this.ZO,t.scope=this.scope,t.type=this.type,t.sP=this.sP,t.wC=this.wC,t.LI=this.LI,t.Iy=this.Iy,t.cache=this.cache,t},e.Uob=a},function(t,e,i){var o,c,h,u,f,l,d,p,b,g,m,v;function y(t,e,i,n,r){var a=s(i.zb,r.oh);return a.length===o.bha.gOa&&i.zb.options.rW&&"function"==typeof r.oh&&t.Q5a(r.oh).z0a&&(i.zb.bind(r.oh).klb(),a=s(i.zb,r.oh)),t=e?a:a.filter(function(t){var e=new m.Request(t.oh,i,n,t,r);return t.LI(e)}),function(t,e,i,n){switch(e.length){case o.bha.gOa:if(i.d$a())return;throw t=l.LP(t),e=c.Ktb,e=(e+=l.t_b(t,i))+l.rab(n,t,s),Error(e);case o.bha.$tb:if(!i.isArray())return;default:if(i.isArray())return;throw t=l.LP(t),e=c.Snb+" "+t,e+=l.rab(n,t,s),Error(e)}}(r.oh,t,r,i.zb),t}function s(t,e){var i=[],n=t.DH;return n.k8a(e)?i=n.get(e):null!==t.parent&&(i=s(t.parent,e)),i}_esm(e),o=i(645),c=i(56),h=i(79),u=i(41),f=i(326),l=i(142),d=i(646),p=i(67),b=i(647),g=i(648),m=i(650),v=i(328),e.upc=function(t){return t.DH},e.lR=function(t,e,i,n,r,a,o,s){void 0===s&&(s=!1),e=new d.KHa(e),i=new p.Metadata(i?u.cH:u.LT,r),n=new v.h5(n,"",r,i),void 0!==a&&(a=new p.Metadata(a,o),n.Ec.push(a));try{return function r(a,t,e,o,i,s){var u;null===i?(t=y(a,t,o,null,s),u=new m.Request(e,o,null,t,s),e=new b.avb(o,u),o.gDb(e)):(t=y(a,t,o,i,s),u=i.cYa(s.oh,t,s)),t.forEach(function(t){var e,i,n=null;if(s.isArray())n=u.cYa(t.oh,t,s);else{if(t.cache)return;n=u}if(t.type===h.Ak.Instance&&null!==t.Cn){if(e=g.SSb(a,t.Cn),!o.zb.options.lL&&(i=g.pSb(a,t.Cn),e.length<i))throw t=c.Unb(g.getFunctionName(t.Cn)),Error(t);e.forEach(function(t){r(a,!1,t.oh,o,n,t)})}})}(t,s,r,e,null,n),e}catch(t){throw f.o$a(t)&&e.lR&&l.CHb(e.lR.xBa),t}},e.poc=function(t,e,i,n){return i=new v.h5(h.cA.Tka,"",e,new p.Metadata(i,n)),t=new d.KHa(t),new m.Request(e,t,null,[],i)}},function(t,e){_esm(e),e.bha={Nkc:2,gOa:0,$tb:1}},function(t,e,i){var n;function r(t){this.id=n.id(),this.zb=t}_esm(e),n=i(110),r.prototype.gDb=function(t){this.lR=t},e.KHa=r},function(t,e){_esm(e),e.avb=function(t,e){this.fR=t,this.xBa=e}},function(t,e,i){var g,m,v,a,o,y;function s(t,e,i,n){var r,a,o,s,u,c,h,f=t.Q5a(i),l=f.z0a;if(void 0===l)throw Error(m.itb+" "+e+".");f=f.ygc,p=Object.keys(f);for(var d=(0===i.length&&0<p.length?p:i).length,p=[],b=0;b<d;b++){if(a=n,o=e,s=l,h=!0!==(c=w(u=f[(r=b).toString()]||[])).vp,s=s[r],(s=c.l||c.jK||s)instanceof g.Bia&&(s=s.vfc()),h){if(h=s===Function,h=s===Object||h||void 0===s,!a&&h)throw Error(m.jtb+" argument "+r+" in class "+o+".");(r=new y.h5(v.cA.HHa,c.t1,s)).Ec=u,u=r}else u=null;null!==u&&p.push(u)}return t=function t(e,i){var n,r,a;for(var o=e.JUb(i),s=[],u=0,c=Object.keys(o);u<c.length;u++)n=c[u],r=o[n],a=w(o[n]),(n=new y.h5(v.cA.vHa,a.t1||n,a.l||a.jK)).Ec=r,s.push(n);i=Object.getPrototypeOf(i.prototype).constructor;i!==Object&&(e=t(e,i),s=s.concat(e));return s}(t,i),p.concat(t)}function w(t){var e={};return t.forEach(function(t){e[t.key.toString()]=t.value}),{l:e[a.LT],jK:e[a.cH],t1:e[a.u4],vp:e[a.wU]}}_esm(e),g=i(327),m=i(56),v=i(79),a=i(41),o=i(142),e.getFunctionName=o.getFunctionName,y=i(328),e.SSb=function(t,e){return s(t,o.getFunctionName(e),e,!1)},e.pSb=function t(e,i){var n,r;return(i=Object.getPrototypeOf(i.prototype).constructor)!==Object?(r=(n=s(e,n=o.getFunctionName(i),i,!0)).map(function(t){return t.Ec.filter(function(t){return t.key===a.wU})}),r=[].concat.apply([],r).length,0<(n=n.length-r)?n:t(e,i)):0}},function(t,e){function i(t){this.oS=t}_esm(e),i.prototype.startsWith=function(t){return 0===this.oS.indexOf(t)},i.prototype.endsWith=function(t){var e=t.split("").reverse().join("");return t=this.oS.split("").reverse().join(""),this.startsWith.call({oS:t},e)},i.prototype.contains=function(t){return-1!==this.oS.indexOf(t)},i.prototype.equals=function(t){return this.oS===t},i.prototype.value=function(){return this.oS},e.lvb=i},function(t,e,i){var a;function n(t,e,i,n,r){this.id=a.id(),this.oh=t,this.fR=e,this.pC=i,this.target=r,this.Gpa=[],this.uW=Array.isArray(n)?n:[n],this.Z9b=null===i?new Map:null}_esm(e),a=i(110),n.prototype.cYa=function(t,e,i){return t=new n(t,this.fR,this,e,i),this.Gpa.push(t),t},e.Request=n},function(t,e,i){var u,c,n,h,f;function l(e,i,t){try{return t()}catch(t){if(n.o$a(t))throw Error(u.upb(e,i.toString()));throw t}}_esm(e),u=i(56),c=i(79),n=i(326),h=i(142),f=i(652),e.resolve=function(t){return function o(s){return function(t){var e,i=t.uW,n=t.Gpa,r=t.target&&t.target.isArray(),a=!(t.pC&&t.pC.target&&t.target&&t.pC.target.V0b(t.target.oh));if(r&&a)return n.map(function(t){return o(s)(t)});if(r=null,!t.target.d$a()||0!==i.length){if(i=(e=i[0]).scope===c.Bu.zka,a=e.scope===c.Bu.Request,i&&e.yna)return e.cache;if(a&&null!==s&&s.has(e.id))return s.get(e.id);if(e.type===c.Ak.FHa)r=e.cache;else if(e.type===c.Ak.Function)r=e.cache;else if(e.type===c.Ak.GHa)r=e.Cn;else if(e.type===c.Ak.RIa&&null!==e.ZO)r=l("toDynamicValue",e.oh,function(){return e.ZO(t.fR)});else if(e.type===c.Ak.Uha&&null!==e.sP)r=l("toFactory",e.oh,function(){return e.sP(t.fR)});else if(e.type===c.Ak.oRa&&null!==e.wC)r=l("toProvider",e.oh,function(){return e.wC(t.fR)});else{if(e.type!==c.Ak.Instance||null===e.Cn)throw n=h.LP(t.oh),Error(u.zsb+" "+n);r=f.m$b(e.Cn,n,o(s))}return"function"==typeof e.Iy&&(r=e.Iy(t.fR,r)),i&&(e.cache=r,e.yna=!0),a&&null!==s&&!s.has(e.id)&&s.set(e.id,r),r}}}(t.lR.xBa.Z9b)(t.lR.xBa)}},function(t,e,i){var o,s,u;_esm(e),o=i(56),s=i(79),u=i(41),e.m$b=function(t,e,i){var n,r,a=null,a=0<e.length?(a=e.filter(function(t){return null!==t.target&&t.target.type===s.cA.HHa}).map(i),a=new(t.bind.apply(t,[void 0].concat(a))),n=a,i=i,e=(e=e).filter(function(t){return null!==t.target&&t.target.type===s.cA.vHa}),r=e.map(i),e.forEach(function(t,e){t=t.target.name.value(),n[t]=r[e]}),n):new t,i=t,e=a;if(Reflect.uWb(u.iU,i)){t=Reflect.getMetadata(u.iU,i);try{e[t.value]()}catch(t){throw Error(o.Uub(i.name,t.message))}}return a}},function(t,e,i){var n,r,a,o;function s(t){this.Lc=t}_esm(e),n=i(56),r=i(79),a=i(654),o=i(329),s.prototype.to=function(t){return this.Lc.type=r.Ak.Instance,this.Lc.Cn=t,new a.yGa(this.Lc)},s.prototype.klb=function(){if("function"!=typeof this.Lc.oh)throw Error(""+n.Fsb);this.to(this.Lc.oh)},s.prototype.Jm=function(t){this.Lc.type=r.Ak.FHa,this.Lc.cache=t,this.Lc.ZO=null,this.Lc.Cn=null,new o.JG(this.Lc)},s.prototype.yG=function(t){return this.Lc.type=r.Ak.RIa,this.Lc.cache=null,this.Lc.ZO=t,this.Lc.Cn=null,new a.yGa(this.Lc)},s.prototype.yec=function(t){this.Lc.type=r.Ak.GHa,this.Lc.Cn=t,new o.JG(this.Lc)},s.prototype.Ue=function(t){this.Lc.type=r.Ak.Uha,this.Lc.sP=t,new o.JG(this.Lc)},s.prototype.zec=function(t){if("function"!=typeof t)throw Error(n.Csb);this.Jm(t),this.Lc.type=r.Ak.Function},s.prototype.ilb=function(e){this.Lc.type=r.Ak.Uha,this.Lc.sP=function(t){return function(){return t.zb.get(e)}},new o.JG(this.Lc)},s.prototype.E1=function(t){this.Lc.type=r.Ak.oRa,this.Lc.wC=t,new o.JG(this.Lc)},s.prototype.Aec=function(e){this.yG(function(t){return t.zb.get(e)})},e.Wob=s},function(t,e,i){var n,r,a;function o(t){this.Lc=t,this.FU=new a.cha(this.Lc),this.jla=new r.E2(this.Lc),this.DUa=new n.Vob(t)}_esm(e),n=i(655),r=i(213),a=i(214),o.prototype.la=function(){return this.DUa.la()},o.prototype.kva=function(){return this.DUa.kva()},o.prototype.when=function(t){return this.FU.when(t)},o.prototype.d2=function(){return this.FU.d2()},o.prototype.Iy=function(t){return this.jla.Iy(t)},e.yGa=o},function(t,e,i){var n,r;function a(t){this.Lc=t}_esm(e),n=i(79),r=i(329),a.prototype.la=function(){return this.Lc.scope=n.Bu.zka,new r.JG(this.Lc)},a.prototype.kva=function(){return this.Lc.scope=n.Bu.k5,new r.JG(this.Lc)},e.Vob=a},function(t,e){function n(){}_esm(e),e.Ppb=(n.of=function(t,e){var i=new n;return i.uW=t,i.U1b=e,i},n)},function(t,e,i){var n;function r(){this.th=new Map}_esm(e),n=i(56),r.prototype.add=function(t,e){var i;if(null==t)throw Error(n.eU);if(null==e)throw Error(n.eU);void 0!==(i=this.th.get(t))?(i.push(e),this.th.set(t,i)):this.th.set(t,[e])},r.prototype.get=function(t){if(null==t)throw Error(n.eU);if(void 0!==(t=this.th.get(t)))return t;throw Error(n.OLa)},r.prototype.remove=function(t){if(null==t)throw Error(n.eU);if(!this.th.delete(t))throw Error(n.OLa)},r.prototype.k8a=function(t){if(null==t)throw Error(n.eU);return this.th.has(t)},r.prototype.clone=function(){var i=new r;return this.th.forEach(function(t,e){t.forEach(function(t){return i.add(e,t.clone())})}),i},e.Ysb=r},function(t,e,i){var n;_esm(e),n=i(110),e.Ad=function(t){this.id=n.id(),this.RAa=t},e.kGa=function(t){this.id=n.id(),this.RAa=t}},function(t,e,i){var n,r;_esm(e),n=i(56),r=i(41),e.$=function(){return function(t){var e;if(Reflect.Mua(r.pja,t))throw Error(n.Oqb);return e=Reflect.getMetadata(r.lqb,t)||[],Reflect.T8(r.pja,e,t),t}}},function(t,e,i){var o,s;_esm(e),o=i(67),s=i(94),e.Ekb=function(r,a){return function(t,e,i){var n=new o.Metadata(r,a);"number"==typeof i?s.wL(t,e,i,n):s.s1(t,e,n)}}},function(t,e,i){var a,o,s;_esm(e),a=i(41),o=i(67),s=i(94),e.Mcb=function(r){return function(t,e,i){var n=new o.Metadata(a.wD,r);"number"==typeof i?s.wL(t,e,i,n):s.s1(t,e,n)}}},function(t,e,i){var r,a,o;_esm(e),r=i(41),a=i(67),o=i(94),e.optional=function(){return function(t,e,i){var n=new a.Metadata(r.rOa,!0);"number"==typeof i?o.wL(t,e,i,n):o.s1(t,e,n)}}},function(t,e,i){var r,a,o;_esm(e),r=i(41),a=i(67),o=i(94),e.vp=function(){return function(t,e,i){var n=new a.Metadata(r.wU,!0);o.wL(t,e,i,n)}}},function(t,e,i){var a,o,s;_esm(e),a=i(41),o=i(67),s=i(94),e.jK=function(r){return function(t,e,i){var n=new o.Metadata(a.cH,r);"number"==typeof i?s.wL(t,e,i,n):s.s1(t,e,n)}}},function(t,e,i){var a,o,s;_esm(e),a=i(41),o=i(67),s=i(94),e.t1=function(r){return function(t,e,i){var n=new o.Metadata(a.u4,r);s.wL(t,e,i,n)}}},function(t,e,i){var n,r,a;_esm(e),n=i(56),r=i(41),a=i(67),e.mfb=function(){return function(t,e){if(e=new a.Metadata(r.iU,e),Reflect.Mua(r.iU,t.constructor))throw Error(n.wtb);Reflect.T8(r.iU,e,t.constructor)}}},function(t,e){_esm(e),e.Icb=function(n){return function(i){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.forEach(function(t){return n.bind(t).Aec(i)})}}}},function(t,e,n){var i,r,a,o,s,u,c,h,f,l,d,p,b,g,m,v,y;function w(){}function A(t){this.pe=t}function _(t){var e=o.Kja.call(this)||this;return t.hQ?Object.assign(e,p.x6a(t)):t.Saa?Object.assign(e,d.j6a(t)):t.bwa?Object.assign(e,l.c7a()):t.RB||t.cZ?Object.assign(e,f.a6a()):t.jZ?Object.assign(e,p.w7a(t)):Object.assign(e,h.L5a(t)),e}function E(t){this.data=t.Saa?d.l6a(t):t.bwa?l.e7a(t):t.RB||t.cZ?f.c6a(t):t.jZ?p.y7a(t):h.N5a(t)}_esm(e),e.platform=e.mpb=e.lpb=e.kpb=e.jpb=void 0,t=n(0),i=n(1),r=n(47),a=n(111),o=n(669),s=n(170),u=n(332),c=n(215),h=n(670),f=n(671),l=n(672),d=n(673),p=n(674),b=n(675),g=n(676),nt.Object.defineProperties(E.prototype,{version:{configurable:!0,enumerable:!0,get(){return this.data.version}},sca:{configurable:!0,enumerable:!0,get(){return this.data.sca}},At:{configurable:!0,enumerable:!0,get(){return this.data.At}},jq:{configurable:!0,enumerable:!0,get(){return this.data.jq}},yP:{configurable:!0,enumerable:!0,get(){return this.data.yP}},JE:{configurable:!0,enumerable:!0,get(){return this.data.JE}},fra:{configurable:!0,enumerable:!0,get(){return this.data.fra}},k2a:{configurable:!0,enumerable:!0,get(){return this.data.k2a}},dxa:{configurable:!0,enumerable:!0,get(){return this.data.dxa}},gX:{configurable:!0,enumerable:!0,get(){return this.data.gX}},Rmb:{configurable:!0,enumerable:!0,get(){return this.data.Rmb}},t7:{configurable:!0,enumerable:!0,get(){return this.data.t7}}}),m=E,m=t.__decorate([i.$(),t.__param(0,i.l(s.LG))],m),e.jpb=m,S(_,o.Kja),v=_,v=t.__decorate([i.$(),t.__param(0,i.l(s.LG))],v),e.kpb=v,A.prototype.apply=function(){return this.pe.Saa?Object.assign(this,d.k6a(this.pe)):this.pe.bwa?Object.assign(this,l.d7a(this.pe)):this.pe.RB||this.pe.cZ?Object.assign(this,f.b6a(this.pe)):this.pe.jZ?Object.assign(this,p.x7a(this.pe)):Object.assign(this,h.M5a(this.pe)),this},y=A,y=t.__decorate([i.$(),t.__param(0,i.l(s.LG))],y),e.lpb=y,w=t.__decorate([i.$()],w),e.mpb=w,e.platform=new i.Ad(function(t){t(r.Yq).to(m).la(),t(a.lH).to(v).la(),t(u.TPa).to(y).la(),t(r.K4).to(w).la(),t(c.Lja).Ue(function(e){return function(){var t=e.zb.get(s.LG);return t.RB||t.cZ?{jc:function(t,e,i){return new g.Yka(t,e,i)},request:b.lUa}:t.jZ?{jc:function(t,e,i){return new(n(677))(t,e,i)},request:n(678)}:{}}})})},function(t,e,i){var n,r,a,o;_esm(e),e.Kja=void 0,n=i(5),r=i(52),a=i(42),o={MONOSPACED_SERIF:"font-family:Courier New,Arial,Helvetica",MONOSPACED_SANS_SERIF:"font-family:Consolas,Lucida Console,Menlo,Monaco,Arial,Helvetica",PROPORTIONAL_SERIF:"font-family:Georgia,Times New Roman,Arial,Helvetica",PROPORTIONAL_SANS_SERIF:"font-family:Arial,Helvetica",CASUAL:"font-family:Gabriola,Segoe Print,Comic Sans MS,Chalkboard,Arial,Helvetica",CURSIVE:"font-family:Lucida Handwriting,Brush Script MT,Segoe Script,Arial,Helvetica",SMALL_CAPITALS:"font-family:Copperplate Gothic,Copperplate Gothic Bold,Copperplate,Arial,Helvetica;font-variant:small-caps"},e.Kja=function(){this.hCa=!0,this.uI=[],this.ho=[],this.cP=!1,this.Jw=[a.Rm.sha,a.Rm.Evb,a.Rm.rM,a.Rm.XKa],this.Hn=void 0,this.Jra=!0,this.o9=!1,this.E7=r.fa(288e4),this.H7=r.fa(335544320),this.$B=n.vc(15e3),this.d1b=r.fa(6291456),this.xQ=1e3,this.opa=!0,this.yfa=o,this.wS=r.fa(0),this.YP="ro zh-Hans zh-Hant ko vi ar he hi th en es".split(" "),this.uba=["th"],this.Cfa=n.vc(0),this.RY=!0,this.Xfa=!1,this.fP=this.Rxa=this.b$=!0,this.ML=this.QE=this.Vx=!1,this.MI=["start"]}},function(t,e,i){var n,r,a,o;_esm(e),e.M5a=e.L5a=e.N5a=void 0,n=i(26),r=i(42),a=i(121),o=i(143),e.N5a=function(t){return Object.assign(Object.assign({},o.BP()),{At:t.s$a?"T":t.bZ?"C":"M",jq:t.s$a?"NFCDTS-01-":t.yF?"NFCDCH-02-":t.iQ?"NFCDCH-MC-":t.bZ?"NFCDCH-01-":t.Jaa?"NFCDCH-AP-":t.aZ?"NFCDCH-AT-":t.hQ?"NFCDCH-PH-":"NFCDCH-LX-",JE:t.bZ?"chromeos-cadmium":"chrome-cadmium"})},e.L5a=function(t){var e=o.AP(),i=Object.assign(Object.assign({},e),{cP:!0,Vx:!0,QE:!0,ML:!0});return t.yF&&(i.ho=[].concat(J(e.ho),J(a.kp([r.I.eD,r.I.fD],{minimumCores:5})))),t.iQ&&(i.ho=[].concat(J(e.ho),J(a.kp([r.I.eD,r.I.fD],{minimumCores:3,restrictToUILabels:["mini-modal-horizontal"]})))),t.bZ&&(i.ho=a.kp([].concat(J(r.Td.I2),J(r.Td.m2),J(r.Td.l2),J(r.Td.vga),J(r.Td.lha),J(r.Td.mha),J(r.Td.kha),J(r.Td.iha),J(r.Td.jha),J(r.Td.hha)))),i},e.M5a=function(t){var e={droppedFrameRateFilterEnabled:!0,promiseBasedEme:!0,workaroundValueForSeekIssue:500,logMediaPipelineStatus:!0,prepareCadmium:!0,enableLdlPrefetch:!0,captureBatteryStatus:!0,enableMediaPrefetch:!0,defaultHeaderCacheSize:15,enableSeamless:!0,videoCapabilityDetectorType:n.Tm.XL,preciseSeeking:!0,useTypescriptEme:!0,webkitDecodedFrameCountIncorrectlyReported:!0,enableCDMAttestedDescriptors:!0,enablePRK:!0,enableVP9:!0,useEncryptedEvent:!1};return 80<=t.Cr&&(e=Object.assign(Object.assign({},e),{enableMediaCapabilities:!0,enableMediaCapabilitiesSourceBufferCheck:!0})),t.aZ&&(e=Object.assign(Object.assign({},e),{enableFullHdForWidevineL1:!0})),t.bZ&&(e=Object.assign(Object.assign({},e),{enableHWDRM:!0,prepareLdlCacheMaxCount:15,enableFullHdForWidevineL1:!0}),89<=t.Cr&&(e=Object.assign(Object.assign({},e),{enableHEVC:!0,enableHDR:!0,enableMediaCapabilities:!0,enableHdcp:!0}))),102<=t.Cr&&t.yF&&(e=Object.assign(Object.assign({},e),{enableHWDRM:!0,prepareLdlCacheMaxCount:15,microsoftClearLeadRequiresSwdrm:!0})),e=t.yF&&99<=t.Cr?Object.assign(Object.assign({},e),{enableAV1:!0}):e}},function(t,e,i){var u,c,h,n,r,f;function l(){var t,e=null==(i=bt.MSMediaKeys)?void 0:i.isTypeSupported(c.Db.je,r.Rd.$xa),i=e||(null==(t=bt.MSMediaKeys)?void 0:t.isTypeSupported(c.Db.mH,r.Rd.$xa));return{h$a:e,g$a:i}}_esm(e),e.b6a=e.dTb=e.a6a=e.c6a=void 0,u=i(26),c=i(95),h=i(42),n=i(143),r=i(123),f=i(121),e.c6a=function(t){return Object.assign(Object.assign({},n.BP()),{At:t.RB?"D":"H",jq:t.RB?t.iQ?"NFCDIE-04-":t.YYb?"NFCDIE-LX-":t.Jaa?"NFCDIE-AP-":t.aZ?"NFCDIE-AT-":t.hQ?"NFCDIE-PH-":"NFCDIE-03-":"NFCDIE-02-",JE:"edge-cadmium",t7:!1})},e.a6a=function(){var t=Object.assign(Object.assign({},n.AP()),{uI:f.kp([h.ae.TG,h.ae.UG,h.ae.uT,h.ae.vT]),ho:f.kp([].concat(J(h.Td.I2),J(h.Td.m2),J(h.Td.l2),J(h.Td.vga),J(h.Td.lha),J(h.Td.mha),J(h.Td.kha),J(h.Td.iha),J(h.Td.jha),J(h.Td.hha),J(h.Td.XGa),J(h.Td.YGa),J(h.Td.rpb))),Hn:void 0,RY:!1}),e=l(),i=e.h$a;return e.g$a||(t.Vx=!0,t.QE=!0,t.ML=!0),t.MI=i?[]:["start"],t},e.dTb=l,e.b6a=function(t){var e=t.cZ,i=t.RB,n=t.yF,r=(o=l()).g$a,a=o.h$a,o={nudgeSourceBuffer:!0,audioCapabilityDetectorType:u.Ww.Wz,videoCapabilityDetectorType:u.Tm.Wz,microsoftHwdrmRequiresHevc:!0,microsoftScreenSizeFilterEnabled:!0,addFailedLogBlobsToQueue:!1,bookmarkIgnoreBeginning:"2000",enableCombinedPlaygraphs:!a,enableAdPlaygraphs:!a,forceAppendEncryptedStreamHeaderFirst:!0,retainSbrOnFade:!0},a={prepareCadmium:!0,enableLdlPrefetch:!r||a,licenseRenewalRequestDelay:5e3,enableMediaPrefetch:!0,defaultHeaderCacheSize:15,prepareLdlCacheMaxCount:15},s={audioCapabilityDetectorType:u.Ww.Iz,videoCapabilityDetectorType:u.Tm.XL,microsoftScreenSizeFilterEnabled:!1,keySystemList:[c.Db.gUa],useTypescriptEme:!0,licenseRenewalRequestDelay:0,audioProfiles:f.kp([h.ae.TG,h.ae.UG]),videoProfiles:f.kp([h.I.QG,h.I.SG,h.I.o3,h.I.q3,h.I.p3,h.I.r3]),enableAVCHigh:!0,droppedFrameRateFilterEnabled:!0,enableCDMAttestedDescriptors:!0};return e&&(14<=t.Cr&&(o=Object.assign(Object.assign(Object.assign({},o),a),{microsoftEnableDeviceInfo:!0,microsoftClearLeadRequiresSwdrm:!0,enableHWDRM:!0,enableHEVC:!0,useHevcCodecForDolbyVision:!0})),15<=t.Cr&&(o=Object.assign(Object.assign({},o),{enablePRK:!0,enableDV:!0,enableHDR:!0,usePlayReadyHeaderObject:!0})),16<=t.Cr&&(o=Object.assign(Object.assign({},o),{microsoftHwdrmRequiresHevc:!1})),17<=t.Cr&&(o=Object.assign(Object.assign({},o),{enableDDPlusAtmos:!0}))),i&&(o=Object.assign(Object.assign(Object.assign({},o),a),{useEncryptedEvent:!1}),n&&(o=Object.assign(Object.assign({},o),{webkitDecodedFrameCountIncorrectlyReported:!0,noRenderTimeoutMilliseconds:1e4})),r?(o=Object.assign(Object.assign({},o),{microsoftEnableDeviceInfo:!1,microsoftClearLeadRequiresSwdrm:!0,enableHWDRM:!0,enableHEVC:!0,enablePRK:!0,enableDV:!0,enableHDR:!0,usePlayReadyHeaderObject:!0,microsoftHwdrmRequiresHevc:!1,enableDDPlusAtmos:!0,keySystemList:[c.Db.$Pa,c.Db.aQa]}),94===t.Cr&&(o=Object.assign(Object.assign({},o),{enableHWDRM:!1})),102<=t.Cr&&(o=Object.assign(Object.assign({},o),{useTypescriptEme:!0,validateKeySystemAccess:!0,enableCDMAttestedDescriptors:!0}))):o=Object.assign(Object.assign({},o),s)),o}},function(t,e,i){var n,r;_esm(e),e.d7a=e.c7a=e.e7a=void 0,n=i(26),r=i(143),e.e7a=function(t){return Object.assign(Object.assign({},r.BP()),{At:"O",jq:t.Jaa?"NFCDOP-AP-":t.aZ?"NFCDOP-AT-":t.hQ?"NFCDOP-PH-":"NFCDOP-01-",JE:"opera-cadmium"})},e.c7a=function(){return Object.assign(Object.assign({},r.AP()),{cP:!0,Vx:!0,QE:!0,ML:!0})},e.d7a=function(t){var e={droppedFrameRateFilterEnabled:!0,promiseBasedEme:!0,workaroundValueForSeekIssue:500,logMediaPipelineStatus:!0,prepareCadmium:!0,enableLdlPrefetch:!0,captureBatteryStatus:!0,enableMediaPrefetch:!0,defaultHeaderCacheSize:15,enableSeamless:!0,videoCapabilityDetectorType:n.Tm.XL,preciseSeeking:!0,useTypescriptEme:!0,webkitDecodedFrameCountIncorrectlyReported:!0,enableCDMAttestedDescriptors:!0,useEncryptedEvent:!1,retainSbrOnFade:!0};return e=67<=t.Cr?Object.assign(Object.assign({},e),{enableVP9:!0}):e}},function(t,e,i){var n,r,a,o;_esm(e),e.k6a=e.j6a=e.l6a=void 0,n=i(26),r=i(42),a=i(121),o=i(143),e.l6a=function(t){return Object.assign(Object.assign({},o.BP()),{At:"F",jq:t.iQ?"NFCDFF-MC-":t.yF?"NFCDFF-02-":t.Jaa?"NFCDFF-AP-":t.aZ?"NFCDFF-AT-":t.hQ?"NFCDFF-PH-":"NFCDFF-LX-",JE:"firefox-cadmium"})},e.j6a=function(t){var e=o.AP(),i=Object.assign(Object.assign({},e),{cP:!0,Vx:!0,QE:!0,ML:!0});return t.yF&&(i.ho=[].concat(J(e.ho),J(a.kp([r.I.eD,r.I.fD],{minimumCores:5,restrictToUILabels:["mini-modal-horizontal"]})))),t.iQ&&(i.ho=[].concat(J(e.ho),J(a.kp([r.I.eD,r.I.fD],{minimumCores:3,restrictToUILabels:["mini-modal-horizontal"]})))),i},e.k6a=function(t){var e={droppedFrameRateFilterEnabled:!0,promiseBasedEme:!0,defaultHeaderCacheSize:15,enableMediaPrefetch:!0,enableLdlPrefetch:!0,prepareCadmium:!0,enableSeamless:!0,videoCapabilityDetectorType:n.Tm.XL,useTypescriptEme:!0,enableCDMAttestedDescriptors:!0,enablePRK:!0,enableVP9:!0,preciseSeeking:!0,useEncryptedEvent:!1,forceAppendEncryptedStreamHeaderFirst:!1,retainSbrOnFade:!0};return e=(t.yF||t.iQ)&&95<=t.Cr?Object.assign(Object.assign({},e),{enableAV1:!0}):e}},function(t,e,i){var n,r,a,o,s,u;function c(t){var e=Object.assign(Object.assign({},u.AP()),{uI:s.kp([o.ae.TG,o.ae.UG,o.ae.eA]),ho:s.kp([].concat(J(o.Td.I2),J(o.Td.m2),J(o.Td.l2),J(o.Td.lha),J(o.Td.mha),J(o.Td.kha),J(o.Td.iha),J(o.Td.jha),J(o.Td.hha),J(o.Td.XGa),J(o.Td.YGa))),Hn:a.Db.Erb,$B:n.vc(7e3),MI:[]});return u.Maa(t,14)&&(e.MI=["start"]),e}_esm(e),e.x7a=e.w7a=e.x6a=e.y7a=void 0,n=i(5),r=i(26),a=i(95),o=i(42),s=i(121),u=i(143),e.y7a=function(t){return Object.assign(Object.assign({},u.BP()),{At:"S",jq:t.hQ?"NFCDSF-PH-":"NFCDSF-01-",JE:"safari-cadmium"})},e.x6a=function(t){return Object.assign(Object.assign({},c(t)),{Xfa:!0,fP:!1,Jw:[o.Rm.q5]})},e.w7a=c,e.x7a=function(t){var e={delayErrorHandling:{7361:"100",7371:"100",7373:"100"},licenseRenewalRequestDelay:5e3,addFailedLogBlobsToQueue:!1,performRewindCheck:!1,fatalOnUnexpectedSeeking:!1,fatalOnUnexpectedSeeked:!1,waitForDrmToAppendMedia:!0,forceAppendHeadersAfterDrm:!0,videoCapabilityDetectorType:r.Tm.Iz,enableSeamless:!0,enableCombinedPlaygraphs:!1,enableAdPlaygraphs:!1,forceAppendEncryptedStreamHeaderFirst:!1,retainSbrOnFade:!0};return u.Maa(t,14)&&(e=Object.assign(Object.assign({},e),{enableCombinedPlaygraphs:!0,enableAdPlaygraphs:!0,forceAppendEncryptedStreamHeaderFirst:!1})),u.fZ(t,10,12,2)&&(e=Object.assign(Object.assign({},e),{keySystemId:"com.apple.fps.3_0",enableMediaPrefetch:!0,defaultHeaderCacheSize:15,prepareCadmium:!0})),u.fZ(t,10,13,6)&&(e=Object.assign(Object.assign({},e),{enableLdlPrefetch:!0})),u.fZ(t,10,15,5)&&(e=Object.assign(Object.assign({},e),{useTypescriptEme:!0,useEncryptedEvent:!1,enablePRK:!0,enableDV:!0,enableAVCHigh:!0,enableHEVC:!0,enableHDR:!0,enableCDMAttestedDescriptors:!0,waitForDrmToAppendMedia:!1,forceAppendHeadersAfterDrm:!1,enableMediaCapabilities:!0,powerEfficientForVideo:!0,preciseSeeking:!0})),u.fZ(t,10,15,6)&&(e=Object.assign(Object.assign({},e),{keyStatusFilterEnabled:!0,hdcpEngagementWaitTime:8e3,enableUHD:!0})),e=u.Maa(t,9)?Object.assign(Object.assign({},e),{maxDecoderBufferMilliseconds:31e3}):e}},function(t,e,i){var n;function r(t,e,i,n){this.log=t,this.qJ=e,this.BC=i,this.context=n}_esm(e),e.lUa=void 0,n=i(4),r.prototype.zh=function(t){var e=this;return(this.context.Qf||this.context.Hl)&&this.log.trace("Requesting license",{drmType:t.Ko}),this.qJ(t).catch(function(t){if(e.log.error("Unable to get the Playready license",t),e.context.ktc)throw t;throw{ha:!1,code:n.Z.jM,Kc:t.Kc,Xd:t.Xd,Lo:t.Lo,$k:t.message||t.$k,TE:t.data,message:"Unable to send the Playready license request. "+(t.message||t.$k)}})},r.prototype.release=function(t){var e=this;return this.log.trace("Requesting stop data"),this.BC(t).catch(function(t){throw e.log.error("Unable to release the PlayReady license ",{code:t.code,subCode:t.Kc,extCode:t.Xd,edgeCode:t.Lo,message:t.message||t.$k}),{ha:!1,code:n.Z.ika,Kc:t.Kc,Xd:t.Xd,Lo:t.Lo,$k:t.message||t.$k,message:"Unable to release the PlayReady license. "+(t.message||t.$k)}})},e.lUa=r,bt._cad_global.WindowsDrmRequests=r},function(t,e,i){var n,d,p,r,b,a,o,s,g;function u(t,e,i){var n=this;if(this.log=t,this.gp=e||function(t){this.context.Da&&(this.sd[t]=this.context.Da.getTime(),this.log.trace("Milestone: "+t+", "+this.sd[t]))}.bind(this),this.context=i,this.G_=this.challenge=this.keySystem=this.keySessionId=this.Kb=this.mediaKeys=void 0,this.sd={},this.Rwa=this.lDa=!1,this.q_=function(t){var e=t.target.error?t.target.error.msExtendedCode:void 0;this.log.error("Received "+t.type+" event",{sessionId:this.Kb.sessionId,systemCode:e}),this.context.onerror&&this.context.onerror(g.Cg.Ms,g.GD.Du,e);this.Kb=void 0}.bind(this),this.G_=void 0,this.TEa=new Promise(function(t,e){n.qBa=t,n.SAa=e}),this.TEa.catch(function(t){n.log.error("wait for license rejected",t)}),d.mc.get(o.Jz).r$().then(function(t){(n.context.Qf||n.context.Hl)&&n.log.debug("DRIVERINFO: ",t)}).catch(function(t){n.log.error("DRIVERINFO",t)}),this.Ln=function(t,e){n.SAa(t,e),n.context.onerror(t,e)},this.Rya=function(){n.qBa()},!(this instanceof u))throw new TypeError("EmeSession constructor not called correctly.")}function m(){return d.mc.get(a.Ji)}function v(){return d.mc.get(r.ki)}function y(t,e,i){for(var n,r,a,o=2;o<arguments.length;++o);for(o="",r=t.length,n=0;n<r;n++)0<(a=t[n])&&(o+=String.fromCharCode(a));for(r="\\s*(.*)\\s*",n=arguments.length-1;0<n;n--){if(o.search(a=arguments[n])<0)return;r="[\\s\\S]*<"+(a="(?:[^:].*:|)"+a)+"[^>]*>"+r+"</"+a+">[\\s\\S]*"}if(o=o.match(new RegExp(r)))return o[1]}function w(i,n,r){return i.Paa()&&i.log.trace("LICENSE: Got the response, calling update",{sessionId:r.sessionId,license:m().encode(n)}),new Promise(function(t,e){try{i.Kb.update(n),t(void 0),i.Paa()&&i.log.trace("LICENSE: Update succeeded",{sessionId:r.sessionId})}catch(t){e({ha:!1,code:g.Cg.G4,message:"Unable to update the EME.",Sb:v().ff(t)})}})}_esm(e),e.Yka=void 0,n=i(4),d=i(212),p=i(216),r=i(30),b=i(81),a=i(31),o=i(26),s=i(60),g={Cg:n.Z,GD:n.Y},u.prototype.lY=function(){return this.keySystem},u.prototype.kmb=function(t,e){t.log&&(this.log=t.log),t.gp&&(this.gp=t.gp),e.Em&&(this.context.Em=e.Em),e.onerror&&(this.context.onerror=e.onerror)},u.prototype.create=function(t){var i=this;return(t?Promise.resolve(t):d.mc.get(o.Jz).pJ()).then(function(e){if(i.gp("lg"),i.log.trace("Creating the media keys",{keySystem:e}),i.keySystem=e,i.context.d0)e=Promise.reject({ha:!1,code:g.Cg.zT,message:"Promise based EME is currently not supported for Internet Explorer"});else t:{try{i.mediaKeys=new bt.MSMediaKeys(e)}catch(t){e=Promise.reject({ha:!1,code:g.Cg.IOa,message:"create MSMediaKeys("+e+") failed",Sb:v().ff(t)});break t}try{i.context.ca&&i.context.ca.msSetMediaKeys(i.mediaKeys)}catch(t){e=Promise.reject({ha:!1,code:g.Cg.vM,message:"set MSMediaKeys failed",Sb:v().ff(t)});break t}e=Promise.resolve({ha:!0,mediaKeys:i.mediaKeys})}return e})},u.prototype.close=function(){if(this.mediaKeys=void 0,this.context.ca=void 0,this.Kb){this.log.info("Closing the session",{sessionId:this.Kb.sessionId}),this.Kb.removeEventListener("mskeyerror",this.q_);try{this.Kb.close()}catch(t){this.log.error("Failed to close the key sessions",t)}this.Kb=void 0}},u.prototype.zh=function(c,h,f){var l;return 1<h.length?Promise.reject({code:g.Cg.MOa}):0===h.length?Promise.reject({code:g.Cg.LOa}):(h=h[0],(l=this).context.Qf&&l.log.trace("LICENSE: Setting license"),l.context.d0?Promise.reject({ha:!1,code:g.Cg.YIa,message:"Promise based EME is currently not supported for Internet Explorer"}):new Promise(function(e,i){var o,s,t,n,r,a,u;try{s=function(t){l.Kb&&(l.Kb.removeEventListener("mskeymessage",n),l.Kb.removeEventListener("mskeyadded",r),l.Kb.removeEventListener("mskeyerror",a),l.Kb.addEventListener("mskeyerror",l.q_)),t.state=11,t.ha?e(t):(l.close(),i(t))},t=function(t){var e=[];if(i=Array.prototype.map.call(t,function(t){return t?String.fromCharCode(t):""}).join("").match(/<KID>(.+?)<\/KID>/))e.push(i[1]);else{t=y(t,"KIDS");for(var i,n=(i=/VALUE="(.+?)">/g).exec(t);null!=n;)e.push(n[1]),n=i.exec(t)}return e},n=function(t){var e,i,n,r,a;o&&clearTimeout(o),e=c,i=l,n=s,r=(t=t).target&&t.target.sessionId,a=m().decode(y(t.message,"PlayReadyKeyMessage","Challenge")),i.state=12,i.log.trace("LICENSE: Received "+t.type+" event",{keySystem:t.target&&t.target.keySystem,sessionId:r}),(i.context.Qf||i.context.Hl||i.context.$C)&&i.log.debug("LICENSE: License challenge",m().encode(a)),i.keySessionId=r,t={wg:e,messageType:"license-request",Ko:/clearkey/i.test(i.keySystem)?"clearkey":"playready",Rk:[{data:a,sessionId:r}]},12===i.state&&(i.gp("lc"),a={data:a,Ko:/clearkey/i.test(i.keySystem)?"clearkey":"playready"},i.context.zK||(i.G_=a)),i.context.Em.zh(t).then(function(t){if(12!==i.state||(i.gp("lr"),i.Rya(),i.context.zK)){if(i.Kb)return w(i,t.hk[0].data,i.Kb).then(function(){i.state=30,n({ha:!0,state:i.state})})}else i.H_=t.hk[0].data,i.state=13,n({ha:!0,state:i.state})}).catch(function(t){n(v().gK(t,{state:i.state}))})},r=function(t){(l.context.Qf||l.context.Hl)&&l.log.trace("LICENSE: Received "+t.type+" event",{keySystem:t.target.keySystem,sessionId:t.target.sessionId}),s({ha:!0})},a=function(t){var e,i;o&&clearTimeout(o),t.target&&t.target.error&&(e=t.target.error.systemCode,i=t.target.error.code),e={code:g.Cg.Ms,Kc:g.GD.Du,Xd:e?d.mc.get(b.Ez).jJ(e,4):i,details:v().ff(t),cause:t.target&&t.target.error,tfa:e,v9:i},l.log.error("LICENSE: Received "+t.type+" event",{sessionId:l.Kb&&l.Kb.sessionId,keySystem:t.target.keySystem,systemCode:e.tfa,code:e.v9}),l.gp("le"),l.Ln&&l.Ln(g.Cg.Ms,e),s({ha:!1,code:g.Cg.Ms,Kc:g.GD.Du,Xd:e.Xd,message:"Received a key error.",Sb:e.details,cause:e.cause})},l.log.trace("LICENSE: Executing prefix based EME"),(l.context.Qf||l.context.Hl)&&l.log.debug("LICENSE: PSSH",m().encode(h)),l.uy||(l.uy=t(h)),f?(u=function(t){var e=d.mc.get(p.Gka),i="";return t.forEach(function(t){i+="<KeyID>"+t+"</KeyID>"}),t='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="true"><KeyIDs>'+i+"</KeyIDs><CustomData></CustomData></LicenseAcquisition></PlayReadyCDMData>",e=new Uint8Array(e.hkb(t)),(this.context.Qf||this.context.Hl)&&this.log.trace("LICENSE: proactive license cdm data",{xml:t,b64:m().encode(e)}),e}.call(l,l.uy),l.Kb=l.mediaKeys.createSession("video/mp4",new Uint8Array(0),u)):l.Kb=l.mediaKeys.createSession("video/mp4",h,null),(l.context.Qf||l.context.Hl)&&l.log.debug("LICENSE: Created the media keys sessions",{keySystem:l.Kb.keySystem,sessionId:l.Kb.sessionId}),l.Kb.addEventListener("mskeymessage",n),l.Kb.addEventListener("mskeyadded",r),l.Kb.addEventListener("mskeyerror",a),l.context.Owa&&(o=setTimeout(function(){s({ha:!1,code:g.Cg.hU,Kc:g.GD.rrb})},l.context.Owa))}catch(t){i({code:g.Cg.hU,Kc:g.GD.Om})}}))},u.prototype.KK=function(){var t;return(this.context.Qf||this.context.Hl)&&this.log.trace("LICENSE: Renewing license"),t=[new Uint8Array(0)],this.zh(s.Ap.Aia.Zq,t,!0)},u.prototype.A7=function(t){this.H_||this.log.error("pending license must exist at this point"),this.context.zK=!0;try{t&&(this.context.ca=t,this.context.ca.msSetMediaKeys(this.mediaKeys))}catch(t){return Promise.reject({ha:!1,code:g.Cg.vM,message:"setMediaKeys failed",Sb:v().ff(t)})}return w(this,this.H_,this.Kb)},u.prototype.a4a=function(n){var t,r=this;return r.log.trace("Releasing the license of current session",JSON.stringify(n)),t={ga:n.ga,Re:n.Re},new Promise(function(e,i){r.context.Em.release.call(r.context.Em,t).then(function(){var t;r.log.trace("successfully released the license",JSON.stringify(n)),t={ha:!0},r.close(),(t.ha?e:i)(t)}).catch(function(t){r.log.error("Unable to release the license",{sessionId:r.keySessionId,code:t.code,subCode:t.Kc,extCode:t.Xd,edgeCode:t.Lo,message:t.$k}),r.close(),(t.ha?e:i)(t)})})},u.prototype.Paa=function(){return this.context.Qf||this.context.Hl},e.Yka=u,bt._cad_global.WindowsEmeSession=e.Yka},function(t,e,i){var r,n,a,o,s,u,c,h,f,p,b,g;function l(t,e,i){var n=this;if(this.log=t,this.gp=e||function(t){this.sd[t]=r.Fa.get(u.$c).Tb().ka(c.pa),this.log.trace("Milestone: "+t+", "+this.sd[t])}.bind(this),this.context=i,this.G_=this.challenge=this.keySystem=this.keySessionId=this.mediaKeys=void 0,this.sd={},this.lk=void 0,this.url="",this.Rwa=this.lDa=!1,this.q_=function(t){var e=w(t);this.log.error("LICENSE Error: Received event: "+t.type,{sessionId:this.Kb?this.Kb.sessionId:void 0,keySystem:t.target.keySystem,systemCode:e.tfa,code:e.v9}),this.Ln&&this.Ln(g.Cg.Ms,e),this.Kb=void 0}.bind(this),this.mp=this.G_=void 0,this.TEa=new Promise(function(t,e){n.qBa=t,n.SAa=e}),this.Ln=function(t,e){n.SAa(t,e),n.context.onerror(t,e)},this.Rya=function(){n.qBa()},!(this instanceof l))throw new TypeError("EmeSession constructor not called correctly.")}function m(){return r.Fa.get(s.Pu)}function v(){return r.Fa.get(o.Ji)}function d(){return r.Fa.get(n.ki)}function y(t){return/com.apple.fps/.test(t)&&!/com.apple.fps.2_0/.test(t)}function w(t){var e,i;return t.target.error&&(e=t.target.error.systemCode,i=t.target.error.code),{code:g.Cg.Ms,Kc:g.GD.Du,Xd:e?r.Fa.get(a.Ez).jJ(e,4):i,details:d().ff(t),cause:t.target.error,tfa:e,v9:i}}function A(t,e,i,n){var r=t.target.sessionId,a=t.message,o=d().zE(a,m().decode("certificate"));i.Rwa=e===f.Ap.Aia.Cp,i.state=o?2:12,i.log.trace("LICENSE: Received event: "+t.type,{keySystem:t.target.keySystem,sessionId:r}),(i.context.Qf||i.context.Hl||i.context.$C)&&i.log.debug("LICENSE: License challenge",v().encode(a)),i.keySessionId=r,t={vq:i.vq,wg:e,messageType:"license-request",Ko:/clearkey/i.test(i.keySystem)?"clearkey":"fps",Rk:[{data:a,sessionId:r}]},12===i.state&&(i.gp("lc"),a={data:a,Ko:/clearkey/i.test(i.keySystem)?"clearkey":"fps"},i.context.zK||(i.G_=a)),i.context.Em.zh(t).then(function(t){if(12!==i.state||(i.gp("lr"),i.Rya(),i.context.zK)){if(i.Kb)return t=k(i,o,t.hk[0].data,i.Kb),2===i.state?t:t.then(function(){i.state=30,n({ha:!0,state:i.state})})}else i.H_=t.hk[0].data,i.state=13,n({ha:!0,state:i.state})}).catch(function(t){n(d().gK(t,{state:i.state}))})}function _(t,e,i){e.log.trace("LICENSE: Received event: "+t.type,{keySystem:t.target.keySystem,sessionId:t.target.sessionId}),i({ha:!0})}function E(t,e,i){var n=w(t);e.Ln&&e.Ln(g.Cg.Ms,n),e.log.error("LICENSE Error: Received event: "+t.type,{sessionId:e.Kb?e.Kb.sessionId:void 0,keySystem:t.target.keySystem,systemCode:n.tfa,code:n.v9}),i({ha:!1,code:g.Cg.Ms,Kc:g.GD.Du,Xd:n.Xd,message:"Received a key error.",Sb:n.details,cause:n.cause})}function k(n,t,r,e){return e={sessionId:e.sessionId},n.Paa()&&(e.license=v().encode(r)),n.log.trace("calling keysession update",e),new Promise(function(e,i){try{t||n.Kb.addEventListener("webkitkeyadded",function t(){n.Kb.removeEventListener("webkitkeyadded",t),e(void 0)}),n.Kb.update(r),t&&e(void 0)}catch(t){i({ha:!1,code:g.Cg.G4,message:"Unable to update the EME.",e:t})}})}_esm(e),r=i(9),e=i(4),n=i(30),a=i(81),o=i(31),s=i(76),u=i(18),c=i(5),h=i(14),f=i(60),p=i(171),b=i(48),g={Cg:e.Z,GD:e.Y},l.prototype.lY=function(){return this.keySystem},l.prototype.kmb=function(t,e){t.log&&(this.log=t.log),t.gp&&(this.gp=t.gp),e.Em&&(this.context.Em=e.Em),e.onerror&&(this.context.onerror=e.onerror)},l.prototype.create=function(r){var a=this;return a.gp("lg"),a.log.trace("CREATE: Creating the media keys",{keySystem:r}),a.keySystem=r,a.context.d0?Promise.reject({ha:!1,code:g.Cg.zT,message:"CREATE: Promise based EME is currently not supported for Internet Explorer"}):new Promise(function(e,i){if(y(a.keySystem))try{a.mediaKeys=new bt.WebKitMediaKeys(r),a.context.ca&&(a.log.trace("LICENSE: calling setmediakeys on video element"),a.context.ca.webkitSetMediaKeys(a.mediaKeys)),e({ha:!0,mediaKeys:a.mediaKeys})}catch(t){i({ha:!1,code:g.Cg.hU,Sb:d().ff(t)})}else a.mediaKeys=new bt.WebKitMediaKeys(r),a.context.ca?(a.log.trace("LICENSE: calling setmediakeys on video element"),a.context.ca.webkitSetMediaKeys(a.mediaKeys)):(t=d().createElement("div","position:relative;width:100%;height:100%;overflow:hidden"),n=t.lastChild,a.mp=t,a.context.ca=h.Nh.createElement("VIDEO"),n?a.mp.insertBefore(a.context.ca,n):a.mp.appendChild(a.context.ca),a.lk=new h.xD,a.lk.addEventListener("sourceopen",function(t){(a.context.Qf||a.context.Hl||a.context.$C)&&a.log.trace("CREATE: Received event: "+t.type,{readyState:t.target.readyState,duration:t.target.duration});try{a.mediaKeys=new bt.WebKitMediaKeys(r),a.context.ca.webkitSetMediaKeys(a.mediaKeys),e({ha:!0,mediaKeys:a.mediaKeys})}catch(t){a.log.error("CREATE: Exception on webkitSetMediaKeys",t),i({ha:!1,code:g.Cg.hU,Sb:d().ff(t)})}}),a.url=URL.createObjectURL(a.lk),a.context.ca.src=a.url),e({ha:!0,mediaKeys:a.mediaKeys});var t,n})},l.prototype.close=function(){this.Kb&&(this.log.info("Closing the session",{sessionId:this.Kb.sessionId}),this.Kb.removeEventListener("webkitkeyerror",this.q_),this.Kb.close(),this.Kb=void 0)},l.prototype.zh=function(f,l){var d;return 1<l.length?Promise.reject({code:g.Cg.MOa}):0===l.length?Promise.reject({code:g.Cg.LOa}):(l=l[0],(d=this).context.Qf&&d.log.trace("LICENSE: Setting license",{initData:v().encode(l)}),d.context.d0?Promise.reject({ha:!1,code:g.Cg.YIa,message:"Promise based EME is currently not supported in Safari"}):new Promise(function(e,i){var n,r,a,t,o,s,u;function c(t){d.Kb&&(d.Kb.removeEventListener("webkitkeymessage",n),d.Kb.removeEventListener("webkitkeyadded",r),d.Kb.removeEventListener("webkitkeyerror",a),d.Kb.addEventListener("webkitkeyerror",d.q_)),t.ha?e(t):(d.close(),i(t))}function h(t,e,i,n){var r=new Uint8Array("piff"==e?88:72),a=new p.xT(r);return a.dD(12),a.cD("frma"),a.cD(t),a.dD(20),a.cD("schm"),a.g2(0),a.g2(0),a.cD(e),a.dD(i),"piff"==e?(a.dD(56),a.cD("schi"),a.dD(48),a.cD("uuid"),a.f2([137,116,219,206,123,231,76,81,132,249,113,72,249,136,37,84])):(a.dD(40),a.cD("schi"),a.dD(32),a.cD("tenc")),a.g2(0),a.g2(0),a.dD(264),a.f2(n),r}n=function(t){A(t,f,d,c)},r=function(t){_(t,d,c)},a=function(t){E(t,d,c)},y(d.keySystem)&&(d.vq=(s=(s=l).subarray(14,30),s=String.fromCharCode.apply(null,s),s=(s=v().decode(s)).subarray(4),(u=new Uint8Array(16)).set(s),u),s=d.vq,t=h("avc1","piff",65537,u=s),t=m().decode(v().encode(t)),u=h("avc1",b.Yw,65536,u),u=m().decode(v().encode(u)),(o=new Uint8Array(7+t.length+8+u.length+5)).set([91,10,32,32,32,32,34],0),o.set(t,7),o.set([34,44,10,32,32,32,32,34],7+t.length),o.set(u,7+t.length+8),o.set([34,10,32,32,93],7+t.length+8+u.length),s=o,(t=new Uint8Array(13+s.length+2)).set([123,10,32,32,34,115,105,110,102,34,32,58,32]),t.set(s,13),t.set([10,125],13+s.length),l=t),d.log.trace("LICENSE: Executing prefix based EME"),d.context.Qf|d.context.Hl&&d.log.debug("LICENSE: PSSH",v().encode(l)),d.Kb=d.mediaKeys.createSession("video/mp4",l,null),(d.context.Qf||d.context.Hl)&&d.log.debug("LICENSE: Created the media keys sessions",{keySystem:d.Kb.keySystem,sessionId:d.Kb.sessionId}),d.Kb.addEventListener("webkitkeymessage",n),d.Kb.addEventListener("webkitkeyadded",r),d.Kb.addEventListener("webkitkeyerror",a)}))},l.prototype.KK=function(){var s=this;return s.lDa?Promise.resolve({ha:!0}):new Promise(function(e,i){var n,r,a;function o(t){s.Kb&&(s.Kb.removeEventListener("webkitkeymessage",n),s.Kb.removeEventListener("webkitkeyadded",r),s.Kb.removeEventListener("webkitkeyerror",a)),t.ha?e(t):(i(t),s.close())}n=function(t){A(t,f.Ap.Aia.Zq,s,o)},r=function(t){_(t,s,o),e({ha:!0})},a=function(t){E(t,s,o)},s.Rwa=!1,s.Kb.addEventListener("webkitkeymessage",n),s.Kb.addEventListener("webkitkeyadded",r),s.Kb.addEventListener("webkitkeyerror",a),s.Kb.update(m().decode("renew"))})},l.prototype.A7=function(t){this.H_||this.log.error("pending license must exist at this point"),this.context.zK=!0;try{t&&(this.context.ca=t,this.log.trace("calling setmediakeys on video element"),this.context.ca.webkitSetMediaKeys(this.mediaKeys))}catch(i){return new Promise(function(t,e){e({ha:!1,code:g.Cg.vM,message:"setMediaKeys failed",Sb:d().ff(i)})})}return k(this,!1,this.H_,this.Kb)},l.prototype.a4a=function(n){var t,r=this;return r.log.trace("Releasing the license of the current session",JSON.stringify(n)),r.lDa=!0,t={ga:n.ga,Re:n.Re},new Promise(function(e,i){r.context.Em.release.call(r.context.Em,t).then(function(){var t;r.log.trace("successfully released the license",JSON.stringify(n)),(t={ha:!0}).ha?e(t):(r.close(),i(t))}).catch(function(t){r.log.error("RELEASE: Unable to get the release the license",{sessionId:r.Kb?r.Kb.sessionId:void 0,code:t.code,subCode:t.Kc,extCode:t.Xd,edgeCode:t.Lo,message:t.$k}),t.ha?e(t):(r.close(),i(t))})})},l.prototype.Paa=function(){return this.context.Qf||this.context.Hl},t.exports=l},function(t,e,i){var n,r,a,o,s,u;function c(t,e,i,n){this.log=t,this.qJ=e,this.BC=i,this.context=n}_esm(e),n=i(4),r=i(9),a=i(30),o=i(76),s=i(31),u=i(48),c.prototype.zh=function(t){var e=this;return(this.context.Qf||this.context.Hl)&&this.log.debug("Requesting a license",t),r.Fa.get(a.ki).zE(r.Fa.get(o.Pu).decode("certificate"),t.Rk[0].data)?(e.log.trace("Requesting Fairplay cert data."),Promise.resolve({hk:[{sessionId:t.Rk[0].sessionId,data:r.Fa.get(s.Ji).decode(u.j3)}]})):r.Fa.get(a.ki).zE(r.Fa.get(o.Pu).decode("content"),t.Rk[0].data)?Promise.resolve({hk:[{sessionId:t.Rk[0].sessionId,data:t.vq}]}):(e.log.trace("Requesting license",{drmType:t.Ko}),e.qJ(t).catch(function(t){throw e.log.error("Unable to get the Fairplay license",t),{code:n.Z.jM,Kc:t.Kc,Xd:t.Xd,Lo:t.Lo,$k:t.message||t.$k,TE:t.data,message:"Unable to send the Fairplay license request. "+(t.message||t.$k),cause:t}}))},c.prototype.release=function(t){var e=this;return this.log.trace("Requesting stop data"),this.BC(t).catch(function(t){throw e.log.error("Unable to release the FairPlay license",{code:t.code,subCode:t.Kc,extCode:t.Xd,edgeCode:t.Lo,message:t.message||t.$k}),{ha:!1,code:n.Z.ika,Kc:t.Kc,Xd:t.Xd,Lo:t.Lo,$k:t.message||t.$k,message:"Unable to release the FairPlay license. "+(t.message||t.$k),cause:t}})},t.exports=c},function(t,e,i){var n,r,a,o,s,u,c,h;function f(t,e,i){var n=this;this.is=t,this.Iq=e,this.config=i,this.Lw=function(){return{version:n.version,drmData:n.g9.map(function(t){return t.Lw()})}},this.Ssa=function(t){var e={version:2,data:[]};if(2===(t=1===(t=n.is.wo(t)?function(t){if((t={xid:(t=JSON.parse(t)).xid,movieId:t.movieId,keySessionIds:t.keySessionIds,licenseContextId:t.licenseContextId}).licenseContextId&&t.xid&&t.movieId)return{version:1,drmData:[t]};throw new s.jd(a.Z.hM,a.Y.lD)}(t):t).version?function(t,e){if(t.iE(e.drmData))return{version:2,drmData:e.drmData.map(function(e){var t=e.keySessionIds;return new h.e3({keySessionData:(t&&0<t.length?t:[void 0]).map(function(t){return{id:t,licenseContextId:e.licenseContextId,licenseId:void 0}}),xid:e.xid,movieId:e.movieId}).Lw()})};throw new s.jd(a.Z.hM,a.Y.lD)}(n.is,t):t).version){e.version=t.version;try{e.data=t.drmData.map(function(t){return new h.e3(t)})}catch(t){throw new s.jd(a.Z.hM,a.Y.lD,void 0,void 0,void 0,"The format of the DRM data is inconsistent with what is expected.",t)}}else{if(!t.version||!n.is.vo(t.version))throw new s.jd(a.Z.hM,a.Y.lD,void 0,void 0,void 0,"The format of the DRM data is inconsistent with what is expected.");if(1!==t.version)throw new s.jd(a.Z.hM,a.Y.SGa,void 0,void 0,void 0,"Version number is not supported. Version: "+t.version)}return e},this.Yl=new u.qia(2,this.config.pX,this.is.wo(this.config.pX),this.Iq,this.Lw)}_esm(e),e.kHa=void 0,t=i(0),n=i(1),r=i(68),a=i(4),o=i(27),s=i(37),u=i(334),c=i(96),h=i(218),f.prototype.jgb=function(){return this.Jcc()},f.prototype.fYa=function(t){return this.Yl.add(t)},f.prototype.q0=function(t){return this.Yl.remove(t,function(t,e){return t.ga===e.ga})},f.prototype.toString=function(){return JSON.stringify(this.Lw(),null,"  ")},f.prototype.Jcc=function(){var i=this;return this.ngb||(this.ngb=new Promise(function(t,e){i.Yl.load(i.Ssa).then(function(){t()}).catch(function(t){t.Ba&&t.cause?e(new s.jd(a.Z.hM,t.Ba,void 0,void 0,void 0,"Unable to load persisted playdata.",void 0,t)):e(t)})})),this.ngb},nt.Object.defineProperties(f.prototype,{version:{configurable:!0,enumerable:!0,get(){return this.Yl.version}},g9:{configurable:!0,enumerable:!0,get(){return this.Yl.hn}}}),i=f,i=t.__decorate([n.$(),t.__param(0,n.l(o.Tg)),t.__param(1,n.l(c.hD)),t.__param(2,n.l(r.Eu))],i),e.kHa=i},function(t,e,i){var s,n;function r(t,e,i,n,r){this.version=t,this.yK=e,this.mDa=i,this.Iq=n,this.Lw=r}_esm(e),e.uLa=void 0,s=i(4),n=i(37),r.prototype.load=function(t){return this.Q_b(t)},r.prototype.set=function(t){return this.hn=t,this.W5b()},r.prototype.Q_b=function(a){var o=this;return this.vab||(this.vab=new Promise(function(n,r){o.nua().then(function(t){return o.storage=t,o.storage.load(o.yK)}).then(function(t){var e,i;t=t.value;try{e=a(t),o.version=e.version,o.hn=e.data,n()}catch(t){i=t,o.LMb().then(function(){r(i)}).catch(function(){r(i)})}}).catch(function(t){t.Ba!==s.Y.FD?r(t):n()})})),this.vab},r.prototype.W5b=function(){var i,n,t,e,r=this;return this.mDa?this.hfa?(t=new Promise(function(t,e){i=t,n=e}),this.hfa.then(e=function(){r.hfa=t,r.akb().then(function(){i()}).catch(function(t){n(t)})}).catch(e),t):this.hfa=this.akb():Promise.resolve()},r.prototype.akb=function(){var i=this,n=this.Lw();return new Promise(function(t,e){i.nua().then(function(t){return t.save(i.yK,n,!1)}).then(function(){t()}).catch(function(t){e(r.xec(s.Z.Aub,t))})})},r.prototype.LMb=function(){var i=this;return this.mDa?new Promise(function(t,e){i.nua().then(function(t){return t.remove(i.yK)}).then(function(){t()}).catch(function(t){e(t)})}):Promise.resolve()},r.prototype.nua=function(){return this.storage?Promise.resolve(this.storage):this.Iq.create()},r.xec=function(t,e){var i;return e.Ba&&e.cause?new n.jd(t,e.Ba,void 0,void 0,void 0,void 0,void 0,e.cause):void 0!==e.Kc?(i=e.message?e.message+" ":"",e.code=t,e.message=i||void 0,e):e instanceof Error?new n.jd(t,s.Y.Om,void 0,void 0,void 0,void 0,e.stack,e):new n.jd(t,s.Y.mo,void 0,void 0,void 0,void 0,void 0,e)},e.uLa=r},function(t,e,i){var n,r,a,o,s;_esm(e),e.Pfb=void 0,n=i(4),r=i(97),a=i(124),o=i(217),e.Pfb=function(t){return o.$O.parent=t.zb,function(){return s=s||new Promise(function(t,e){try{t(o.$O.get(a.JIa))}catch(t){e(new r.Mh(n.Z.qsb,n.Y.Bsb,void 0,"Unable to extract the DRM services from the dependency injector",t))}})}}},function(t,e){function i(){}_esm(e),e.xNa=void 0,i.prototype.m8a=function(){return void 0!==this.mediaKeys},i.prototype.mYa=function(t){this.mediaKeys=t},i.prototype.w9b=function(){this.m8a()&&(this.mediaKeys=void 0)},e.xNa=i},function(t,e,i){var n,r,a,o,s,u,c,h;function f(t,e,i,n,r){this.XI=t,this.qc=e,this.IQ=n,this.Aq=r,this.log=i.jb("CannedChallengeProviderImpl")}_esm(e),e.lHa=void 0,t=i(0),n=i(1),r=i(124),a=i(31),o=i(7),s=i(144),u=i(98),c=i(122),h=i(335),f.prototype.jua=function(i){var n=this;return Promise.all([this.XI(),this.Bta()]).then(function(t){var e=rt(t);return t=e.next().value,e=e.next().value,t.PRb({type:i,initData:e,Naa:!1},n.IQ())}).then(function(t){var e=rt(t);return t=e.next().value,e=e.next().value,e=n.qc.encode(e.data[0]),n.log.trace("Challenge generated",e),{jc:t,upa:e}})},f.prototype.Bta=function(){var e=this;return this.Aq.aF().then(function(t){return t.Iv()}).then(function(t){switch(t){case c.Nm.XE:return h.JJa;case c.Nm.tC:return h.ZPa;default:return h.hUa}}).then(function(t){return t.map(e.qc.decode)})},i=f,i=t.__decorate([n.$(),t.__param(0,n.l(r.f3)),t.__param(1,n.l(a.Ji)),t.__param(2,n.l(o.ob)),t.__param(3,n.l(s.YT)),t.__param(4,n.l(u.Vz))],i),e.lHa=i},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,d;function p(t,e,i,n,r,a){this.Le=t,this.hi=e,this.qc=i,this.is=n,this.d_=r,this.Yk=a}_esm(e),e.iJa=void 0,t=i(0),n=i(1),r=i(31),a=i(27),o=i(38),s=i(76),u=i(30),c=i(122),h=i(68),f=i(685),l=i(687),d=i(221),p.prototype.create=function(t){switch(t){case c.Nm.tC:return new l.$Qa(this.d_,this.is,this.qc,this.Le,this.Yk,this.hi);case c.Nm.XE:return new f.IJa(this.d_,this.is,this.qc,this.Le,this.Yk,this.hi);default:return new d.lx(this.d_,this.is,this.qc,this.Le,this.Yk,this.hi)}},i=p,i=t.__decorate([n.$(),t.__param(0,n.l(u.ki)),t.__param(1,n.l(s.Pu)),t.__param(2,n.l(r.Ji)),t.__param(3,n.l(a.Tg)),t.__param(4,n.l(o.tM)),t.__param(5,n.l(h.Eu))],i),e.iJa=i},function(t,e,i){var n,u,o,r,a,s,c,h,f,l,d;function p(t,e,i,n,r,a){return(t=u.lx.call(this,t,e,i,n,r,a)||this).qc=i,t.Ii=n,t.Yk=r,t.hi=a,t.E8a=new o.HJa(t.qc,t.Ii,t.hi),t}_esm(e),e.IJa=void 0,t=i(0),n=i(1),u=i(221),o=i(686),r=i(38),a=i(27),s=i(31),c=i(30),h=i(68),f=i(76),l=i(336),d=i(337),S(p,u.lx),p.prototype.generateRequest=function(t,e,i){var n,r,a=this;try{return n=e.map(function(t){return a.E8a.ITb(t)}),this.i9a=n.map(function(t){return a.qc.encode(t)}),r=this.E8a.DIb(n,i),u.lx.prototype.generateRequest.call(this,t,[r],!1)}catch(t){return Promise.reject(t)}},p.prototype.update=function(t,i,n){var e,r,a,o,s=this;if(n)try{e=this.hi.encode(t[0]),r=JSON.parse(e).RESPONSES.map(function(t){var e=d.b5.ikb(t.ID);return{keyID:i===l.wH.yRa?s.i9a[s.i9a.length-1]:n[e],payload:t.PAYLOAD}}),i===l.wH.Request&&(a=r.map(function(t){return t.keyID}),n.forEach(function(t){-1===a.indexOf(t)&&r.push({keyID:t,error:1})})),o=JSON.stringify(r),t=[this.hi.decode(o)]}catch(t){return Promise.reject(t)}return u.lx.prototype.update.call(this,t,i)},p.prototype.KK=function(){return u.lx.prototype.update.call(this,[this.hi.decode("renew")],l.wH.Request)},i=p,i=t.__decorate([n.$(),t.__param(0,n.l(r.tM)),t.__param(1,n.l(a.Tg)),t.__param(2,n.l(s.Ji)),t.__param(3,n.l(c.ki)),t.__param(4,n.l(h.Eu)),t.__param(5,n.l(f.Pu))],i),e.IJa=i},function(t,e){function i(t,e,i){var n=this;this.qc=t,this.Ii=e,this.hi=i,this.ITb=function(t){var e;return t=t.subarray(14,30),t=String.fromCharCode.apply(null,t),t=(t=n.qc.decode(t)).subarray(4),(e=new Uint8Array(16)).set(t),e},this.LJa={Yw:1667591779,qpb:1667392371}}_esm(e),e.HJa=void 0,i.prototype.DIb=function(t,e){return e=e?this.LJa.qpb:this.LJa.Yw,t=t.map(function(t){return{oqc:"",SZb:t,qoa:t,zcc:t,Lgc:[1]}}),this.y0b(e,t)},i.prototype.x0b=function(t){var e=new Uint8Array(4);return new DataView(e.buffer).setUint32(0,t),this.qxa("fpsi",[e])},i.prototype.w0b=function(t,e,i,n){return t=[this.qxa("fkri",[t])],e.byteLength&&t.push(this.GZ("fkai",[e])),i.byteLength&&t.push(this.GZ("fkcx",[i])),n.length&&t.push(this.GZ("fkvl",[new Uint8Array(new Uint32Array(n).buffer)])),this.GZ("fpsk",t)},i.prototype.y0b=function(t,e){var i,n,r=new Uint8Array([148,206,134,251,7,255,79,67,173,184,147,210,250,150,140,162]);for(n in t=[this.x0b(t)],e)i=e[n],t.push(this.w0b(i.SZb,i.qoa,i.zcc,i.Lgc));return e=this.GZ("fpsd",t),n=new Uint8Array(4),new DataView(n.buffer).setUint32(0,e.byteLength),this.qxa("pssh",[r,n,e])},i.prototype.qxa=function(t,e){var i,n,r,a=0;for(n in e)a+=e[n].byteLength;for(r in a=new Uint8Array(12+a),(i=new DataView(a.buffer)).setUint32(n=0,a.byteLength),n+=4,a.set(this.hi.decode(t),n),i.setUint32(n+=4,0),n+=4,e)t=e[r],a.set(t,n),n+=t.byteLength;return a},i.prototype.GZ=function(t,e){var i,n,r=0;for(i in e)r+=e[i].byteLength;for(n in r=new Uint8Array(8+r),i=0,new DataView(r.buffer).setUint32(i,r.byteLength),i+=4,r.set(this.hi.decode(t),i),i+=4,e)t=e[n],r.set(t,i),i+=t.byteLength;return r},e.HJa=i},function(t,e,i){var n,r,a,o;function s(){return r.lx.apply(this,arguments)||this}_esm(e),e.$Qa=void 0,t=i(0),n=i(1),r=i(221),a=i(97),o=i(4),S(s,r.lx),s.prototype.B8=function(t,e,i,n,r){return this.Qgb(i),this.Ngb(n),this.Lgb(r),this.dWa=this.Bb,this.Bb=t.createSession(e),this.nYa(i),this.jYa(n),this.gYa(r),this.generateRequest(this.initDataType,this.initData,!1)},s.prototype.close=function(){var t;function e(t){return t&&t.sessionId?t.close():Promise.resolve()}return(t=this).Ypa=void 0,this.Bb?Promise.all([e(this.Bb),e(this.dWa)]).then(function(){}).finally(function(){t.Bb=void 0,t.dWa=void 0}):Promise.reject(new a.Mh(o.Z.SIa,o.Y.cM,void 0,"Unable to close a key session, key session is not valid"))},s.prototype.generateRequest=function(t,e,i){return this.initDataType=t,this.initData=e,r.lx.prototype.generateRequest.call(this,t,e,i)},i=s,i=t.__decorate([n.$()],i),e.$Qa=i},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,d;function p(t,e,i,n,r,a){this.hi=t,this.$j=e,this.qc=i,this.config=n,this.Yk=r,this.Bi=a}_esm(e),e.KIa=void 0,t=i(0),n=i(1),r=i(81),a=i(31),o=i(76),s=i(13),u=i(82),c=i(122),h=i(68),f=i(689),l=i(690),d=i(691),p.prototype.create=function(t){switch(t){case c.Nm.tC:return new l.hJa(this.$j,this.qc);case c.Nm.XE:return new d.ZRa(this.$j,this.qc,this.hi,this.Bi);default:return new f.tHa(this.$j,this.qc,this.Yk,this.config)}},i=p,i=t.__decorate([n.$(),t.__param(0,n.l(o.Pu)),t.__param(1,n.l(r.Ez)),t.__param(2,n.l(a.Ji)),t.__param(3,n.l(s.Oc)),t.__param(4,n.l(h.Eu)),t.__param(5,n.l(u.Zz))],i),e.KIa=i},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,d;function p(t,e,i,n){this.$j=t,this.qc=e,this.Yk=i,this.config=n}_esm(e),e.tHa=void 0,t=i(0),n=i(1),r=i(4),a=i(81),o=i(31),s=i(338),u=i(97),c=i(69),h=i(68),f=i(13),l=i(37),d=i(48),p.prototype.o8=function(){return!1},p.prototype.xoa=function(){return!0},p.prototype.ppa=function(){return!0},p.prototype.kY=function(){return d.Yw},p.prototype.l$=function(){return this.Yk.iCa?this.qc.decode(this.Yk.iCa):this.qc.decode(d.eUa)},p.prototype.dua=function(){var e=this;return[d.rD,d.tka,d.ska].map(function(t){return{initDataTypes:[e.kY()],persistentState:"required",videoCapabilities:[{contentType:s.q4,robustness:t}]}})},p.prototype.Gva=function(){Promise.reject(new l.jd(r.Z.Lha))},p.prototype.tqa=function(t){var e;return{type:t.type,sessionId:null==(e=t.target)?void 0:e.sessionId,bK:[new Uint8Array(t.message)],messageType:t.messageType}},p.prototype.gB=function(t){var e,i=new u.Mh(r.Z.Ms),n=null==t?void 0:t.code;null!=n&&void 0!==n?(n=parseInt(n,10),i.Kc=1<=n&&n<=9?r.Y.Du+n:r.Y.Du):i.Kc=t instanceof c.Os?r.Y.AT:r.Y.Om;try{e=t.message.match(/\((\d*)\)/)[1],i.Xd=this.$j.jJ(e,4)}catch(t){}return i.fX(t),i},p.prototype.EP=function(){},i=p,i=t.__decorate([n.$(),t.__param(0,n.l(a.Ez)),t.__param(1,n.l(o.Ji)),t.__param(2,n.l(h.Eu)),t.__param(3,n.l(f.Oc))],i),e.tHa=i},function(t,e,i){var n,r,a,o,s,u,c,h,f;function l(t,e){this.$j=t,this.qc=e}_esm(e),e.hJa=void 0,t=i(0),n=i(1),r=i(4),a=i(81),o=i(31),s=i(338),u=i(97),c=i(69),h=i(37),f=i(48),l.prototype.o8=function(){return!0},l.prototype.xoa=function(){return!1},l.prototype.ppa=function(){return!1},l.prototype.kY=function(){return f.Yw},l.prototype.l$=function(){},l.prototype.dua=function(){return[{initDataTypes:[this.kY()],audioCapabilities:[{contentType:s.p4}],videoCapabilities:[{contentType:s.q4}],sessionTypes:[f.TEMPORARY]}]},l.prototype.Gva=function(){Promise.reject(new h.jd(r.Z.Lha))},l.prototype.tqa=function(t){var e=new Uint8Array(t.message),e=this.fsa(e,"PlayReadyKeyMessage","Challenge");return e=this.qc.decode(e),{type:t.type,sessionId:t.target.sessionId,bK:[e],messageType:t.messageType}},l.prototype.gB=function(t){var e,i=new u.Mh(r.Z.Ms),n=t.code;null!=n&&void 0!==n?(n=parseInt(n,10),i.Kc=1<=n&&n<=9?r.Y.Du+n:r.Y.Du):i.Kc=t instanceof c.Os?r.Y.AT:r.Y.Om;try{e=/\((\d+)\)/.exec(t.message),i.Xd=this.$j.jJ(Number(e&&e[1]),4)}catch(t){}return i.fX(t),i},l.prototype.fsa=function(t,e){for(var i,n,r,a=1;a<arguments.length;++a);for(a=1;a<arguments.length;a++);for(a="",n=t.length,i=0;i<n;i++)0<(r=t[i])&&(a+=String.fromCharCode(r));for(n="\\s*(.*)\\s*",i=arguments.length-1;0<i;i--){if(a.search(r=arguments[i])<0)return"";n="[\\s\\S]*<"+(r="(?:[^:].*:|)"+r)+"[^>]*>"+n+"</"+r+">[\\s\\S]*"}return(a=a.match(new RegExp(n)))?a[1]:""},l.prototype.EP=function(){},i=l,i=t.__decorate([n.$(),t.__param(0,n.l(a.Ez)),t.__param(1,n.l(o.Ji))],i),e.hJa=i},function(t,e,i){var n,a,r,o,s,u,c,h,f,l,d,p;function b(t,e,i,n){this.$j=t,this.qc=e,this.hi=i,this.Bi=n}_esm(e),e.ZRa=void 0,t=i(0),n=i(1),a=i(4),r=i(81),o=i(76),s=i(97),u=i(69),c=i(31),h=i(48),f=i(339),l=i(37),d=i(82),p=i(337),b.prototype.o8=function(){return!1},b.prototype.xoa=function(){return!1},b.prototype.ppa=function(){return!0},b.prototype.kY=function(){return h.Yw},b.prototype.l$=function(){return this.qc.decode(h.j3)},b.prototype.dua=function(){return[{initDataTypes:[h.Yw],videoCapabilities:[{contentType:"video/mp4; codecs=avc1.42E01E"}],audioCapabilities:[{contentType:"audio/mp4; codecs=mp4a.40.2"}],distinctiveIdentifier:"not-allowed",persistentState:"optional",sessionTypes:[h.TEMPORARY]}]},b.prototype.Gva=function(t){t.KK()},b.prototype.tqa=function(t){var e,i=[];if(t.messageType===f.Sia||t.messageType===f.Ria){if(0===(i=t.messageType===f.Sia?(e=this.hi.encode(new Uint8Array(t.message)),e=(i=JSON.parse(e)).map(function(t){return t.keyID}),i.map(function(t){return t.payload})):[this.qc.encode(new Uint8Array(t.message))]).length||!i.every(function(t){return t&&t.length}))throw new l.jd(a.Z.XIa);i=this.wec(i),i=this.hi.decode(JSON.stringify(i))}else i=new Uint8Array(t.message);return{type:t.type,sessionId:t.target.sessionId,bK:[i],messageType:t.messageType,uy:e}},b.prototype.gB=function(t){var e,i,n,r=null==(e=t.target)?void 0:e.error;return r&&(i=r.systemCode,n=r.code),(e=new s.Mh(a.Z.Ms,t instanceof u.Os?a.Y.AT:a.Y.Du,i?this.$j.jJ(i,4):n,"",r)).fX(t),e},b.prototype.wec=function(t){return t=t.map(function(t,e){return{ID:p.b5.MXb(e),PAYLOAD:t}}),{VERSION:this.Bi.Vx?3:1,CHALLENGES:t}},b.prototype.EP=function(i,t){var e,n=this;if(t&&this.Bi.Vx)try{return e=this.hi.encode(t[0]),JSON.parse(e).RESPONSES.sort(function(t,e){return t.ID>e.ID?1:-1}).map(function(t){var e=p.b5.ikb(t.ID);return{from:t=n.qc.decode(t.DHB).subarray(4,12),to:n.qc.decode(i[e]).subarray(0,8)}})}catch(t){throw new s.Mh(a.Z.Iub,void 0,void 0,void 0,t)}},i=b,i=t.__decorate([n.$(),t.__param(0,n.l(r.Ez)),t.__param(1,n.l(c.Ji)),t.__param(2,n.l(o.Pu)),t.__param(3,n.l(d.Zz))],i),e.ZRa=i},function(t,e,i){var n,r,a,o;function s(t,e){this.rX=t,this.tX=e}_esm(e),e.tNa=void 0,t=i(0),n=i(1),r=i(222),a=i(220),o=i(693),s.prototype.create=function(t,e){return new o.vNa(this.rX,this.tX,t,e)},i=s,i=t.__decorate([n.$(),t.__param(0,n.l(r.Iha)),t.__param(1,n.l(a.Nha))],i),e.tNa=i},function(t,e,i){var n,r;function a(t,e,i,n){this.rX=t,this.tX=e,this.hC=i,this.Ko=n}_esm(e),e.vNa=void 0,n=i(95),r=i(48),a.prototype.createMediaKeys=function(){return this.hC.createMediaKeys()},a.prototype.getConfiguration=function(){return this.hC.getConfiguration()},a.prototype.Iv=function(){return n.Db.gY(this.hC.keySystem)},a.prototype.l1a=function(){return this.tX.create(this.Ko)},a.prototype.k1a=function(){return this.rX.create(this.Ko)},nt.Object.defineProperties(a.prototype,{keySystem:{configurable:!0,enumerable:!0,get(){return this.hC.keySystem}},kba:{configurable:!0,enumerable:!0,get(){var t=this.keySystem,e=r.A$(this.hC);return e&&(t+="."+e),t}}}),e.vNa=a},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,d;_esm(e),e.config=void 0,t=i(1),n=i(13),r=i(695),a=i(33),o=i(39),s=i(696),u=i(344),c=i(698),h=i(174),f=i(699),l=i(68),d=i(700),e.config=new t.Ad(function(t){t(n.Oc).Ue(function(){return function(){return bt._cad_global.config}}),t(a.qha).to(r.EHa).la(),t(a.Sm).to(r.QTa).la(),t(a.MT).to(r.DLa).la(),t(o.Bp).to(s.VJa).la(),t(u.cOa).to(c.bOa).la(),t(h.PJa).to(f.OJa).la(),t(l.Eu).to(d.jJa).la()})},function(t,e,i){var n,r,a,o,s;function u(){this.kB={},this.Ehb=0}function c(t,e,i,n,r){this.debug=t,this.MB=e,this.k_=i,this.$f=n,this.Oda=r}function h(t,e,i){this.MB=t,this.k_=e,this.Oda=i}_esm(e),e.DLa=e.QTa=e.EHa=void 0,t=i(0),n=i(1),r=i(112),a=i(7),o=i(145),s=i(343),i=i(33),h=t.__decorate([n.$(),t.__param(0,n.l(i.MT)),t.__param(1,n.l(o.f5)),t.__param(2,n.l(s.gka))],h),e.EHa=h,c=t.__decorate([n.$(),t.__param(0,n.l(r.Hz)),t.__param(1,n.l(i.MT)),t.__param(2,n.l(o.f5)),t.__param(3,n.l(a.ob)),t.__param(4,n.l(s.gka))],c),e.QTa=c,u.prototype.J1b=function(t){this.kB=Object.assign({},this.kB,t),this.Ehb++},nt.Object.defineProperties(u.prototype,{data:{configurable:!0,enumerable:!0,get(){return this.kB}},rea:{configurable:!0,enumerable:!0,get(){return this.Ehb}}}),i=u,i=t.__decorate([n.$()],i),e.DLa=i},function(t,e,i){var n,r,a,o,s,u,c,h;function f(t,e,i){return(t=o.uf.call(this,t,void 0===i?"GeneralConfigImpl":i)||this).wh=e,t}_esm(e),e.VJa=e.mP=void 0,t=i(0),n=i(5),r=i(1),a=i(44),o=i(45),s=i(39),u=i(33),i=i(111),c={test:"Test",stg:"Staging",int:"Int",prod:"Prod"},e.mP=function(t,e){return t.kgb(c[e]||e,s.Nz)},S(f,o.uf),nt.Object.defineProperties(f.prototype,{mP:{configurable:!0,enumerable:!0,get(){return s.Nz.jvb}},$jb:{configurable:!0,enumerable:!0,get(){return n.Fh(8)}},zJ:{configurable:!0,enumerable:!0,get(){return""}},uO:{configurable:!0,enumerable:!0,get(){return""}},K1:{configurable:!0,enumerable:!0,get(){return""}},B7:{configurable:!0,enumerable:!0,get(){return!0}},RY:{configurable:!0,enumerable:!0,get(){return this.wh.RY}},JPb:{configurable:!0,enumerable:!0,get(){return!1}},pe:{configurable:!0,enumerable:!0,get(){return{}}},lwa:{configurable:!0,enumerable:!0,get(){return!1}},vu:{configurable:!0,enumerable:!0,get(){return!1}},xX:{configurable:!0,enumerable:!0,get(){return!0}},tG:{configurable:!0,enumerable:!0,get(){return{__default_rule_key__:["idb","mem"]}}},uB:{configurable:!0,enumerable:!0,get(){return 0<=[s.Nz.cTa,s.Nz.HLa].indexOf(this.mP)}}}),h=f,t.__decorate([a.config(e.mP,"environment")],h.prototype,"mP",null),t.__decorate([a.config(a.Ll,"storageTimeout")],h.prototype,"$jb",null),t.__decorate([a.config(a.string,"groupName")],h.prototype,"zJ",null),t.__decorate([a.config(a.string,"canaryGroupName",!0)],h.prototype,"uO",null),t.__decorate([a.config(a.string,"uiGroupName")],h.prototype,"K1",null),t.__decorate([a.config(a.Cd,"applyIndexedDbOpenWorkaround")],h.prototype,"B7",null),t.__decorate([a.config(a.Cd,"ignoreIdbOpenError")],h.prototype,"RY",null),t.__decorate([a.config(a.Cd,"executeStorageMigration")],h.prototype,"JPb",null),t.__decorate([a.config(a.object(),"browserInfo")],h.prototype,"pe",null),t.__decorate([a.config(a.Cd,"isTestAccount")],h.prototype,"lwa",null),t.__decorate([a.config(a.Cd,"useRangeHeader")],h.prototype,"vu",null),t.__decorate([a.config(a.Cd,"enableMilestoneEventList")],h.prototype,"xX",null),t.__decorate([a.config(a.object,"storageRules")],h.prototype,"tG",null),h=t.__decorate([r.$(),t.__param(0,r.l(u.Sm)),t.__param(1,r.l(i.lH)),t.__param(2,r.l(u.L2)),t.__param(2,r.optional())],h),e.VJa=h},function(t,e){function i(t){this.value=t}_esm(e),e.oja=void 0,i.empty=function(){return i.of(void 0)},i.of=function(t){return new i(t)},i.prototype.or=function(t){return void 0===this.value?t instanceof Function?t():t:this.value},i.prototype.map=function(t){return void 0===this.value?i.empty():i.of(t(this.value))},e.oja=i},function(t,e,i){var n,r,a,o;function s(t,e){return a.uf.call(this,t,void 0===e?"NetworkMonitorConfigImpl":e)||this}_esm(e),e.bOa=void 0,t=i(0),n=i(1),r=i(44),a=i(45),i=i(33),S(s,a.uf),nt.Object.defineProperties(s.prototype,{Fmb:{configurable:!0,enumerable:!0,get(){return!0}}}),o=s,t.__decorate([r.config(r.Cd,"useNetworkMonitor")],o.prototype,"Fmb",null),o=t.__decorate([n.$(),t.__param(0,n.l(i.Sm)),t.__param(1,n.l(i.L2)),t.__param(1,n.optional())],o),e.bOa=o},function(t,e,i){var n,r,a,o,s,u,c,h;function f(t,e,i,n){return(t=o.uf.call(this,t,"FtlProbeConfigImpl")||this).ri=e,t.Da=i,t.wh=n,t}_esm(e),e.OJa=void 0,t=i(0),n=i(29),r=i(1),a=i(5),o=i(45),s=i(175),u=i(44),c=i(33),i=i(111),S(f,o.uf),nt.Object.defineProperties(f.prototype,{enabled:{configurable:!0,enumerable:!0,get(){return this.wh.b$}},endpoint:{configurable:!0,enumerable:!0,get(){return""+this.Tsa+(-1===this.Tsa.indexOf("?")?"?":"&")+"monotonic="+this.Da.Ccb+"&device=web"}},Jjb:{configurable:!0,enumerable:!0,get(){return a.Ka}},Msa:{configurable:!0,enumerable:!0,get(){return""}},Tsa:{configurable:!0,enumerable:!0,get(){return this.ri.endpoint+"/ftl/probe"+(this.Msa?"?force="+this.Msa:"")}}}),h=f,t.__decorate([u.config(u.Cd,"ftlEnabled")],h.prototype,"enabled",null),t.__decorate([u.config(u.Ll,"ftlStartDelay")],h.prototype,"Jjb",null),t.__decorate([u.config(u.string,"ftlEndpointForceParam")],h.prototype,"Msa",null),t.__decorate([u.config(u.url,"ftlEndpoint")],h.prototype,"Tsa",null),h=t.__decorate([r.$(),t.__param(0,r.l(c.Sm)),t.__param(1,r.l(s.w2)),t.__param(2,r.l(n.Lh)),t.__param(3,r.l(i.lH))],h),e.OJa=h},function(t,e,i){var n,r,a,o,s,u;function c(t,e,i){return(t=r.uf.call(this,t,void 0===i?"EmeConfigImpl":i)||this).pe=e,t}_esm(e),e.jJa=void 0,t=i(0),n=i(1),r=i(45),a=i(33),o=i(5),s=i(44),i=i(170),S(c,r.uf),nt.Object.defineProperties(c.prototype,{s9a:{configurable:!0,enumerable:!0,get(){return!!(this.pe.P9a||this.pe.Saa||this.pe.jZ)}},CF:{configurable:!0,enumerable:!0,get(){return o.Fh(5)}},Cza:{configurable:!0,enumerable:!0,get(){return o.Fh(10)}},pX:{configurable:!0,enumerable:!0,get(){return"unsentDrmData"}},QX:{configurable:!0,enumerable:!0,get(){return!1}},jra:{configurable:!0,enumerable:!0,get(){return!1}},Xt:{configurable:!0,enumerable:!0,get(){return!0}},PYa:{configurable:!0,enumerable:!0,get(){return o.Fh(30)}},QYa:{configurable:!0,enumerable:!0,get(){return o.Fh(30)}},SYa:{configurable:!0,enumerable:!0,get(){return o.Fh(30)}},y7:{configurable:!0,enumerable:!0,get(){return o.Fh(30)}},TYa:{configurable:!0,enumerable:!0,get(){return o.Fh(30)}},iCa:{configurable:!0,enumerable:!0,get(){return""}},beb:{configurable:!0,enumerable:!0,get(){return!this.pe.RB}},ceb:{configurable:!0,enumerable:!0,get(){return!1}}}),u=c,t.__decorate([s.config(s.Cd,"initializeKeySystemAtStartup")],u.prototype,"s9a",null),t.__decorate([s.config(s.Ll,"licenseRenewalRequestDelay")],u.prototype,"CF",null),t.__decorate([s.config(s.Ll,"persistedReleaseDelay")],u.prototype,"Cza",null),t.__decorate([s.config(s.string,"drmPersistKey")],u.prototype,"pX",null),t.__decorate([s.config(s.Cd,"forceLimitedDurationLicense")],u.prototype,"QX",null),t.__decorate([s.config(s.Cd,"disableLicenseRenewal")],u.prototype,"jra",null),t.__decorate([s.config(s.Cd,"prepareCadmium")],u.prototype,"Xt",null),t.__decorate([s.config(s.Ll,"apiCloseTimeout")],u.prototype,"PYa",null),t.__decorate([s.config(s.Ll,"apiCreateMediaKeysTimeout")],u.prototype,"QYa",null),t.__decorate([s.config(s.Ll,"apiSetServerCertificateTimeout")],u.prototype,"SYa",null),t.__decorate([s.config(s.Ll,"apiGenerateRequestTimeout")],u.prototype,"y7",null),t.__decorate([s.config(s.Ll,"apiUpdateTimeout")],u.prototype,"TYa",null),t.__decorate([s.config(s.string,"serverCertificate")],u.prototype,"iCa",null),t.__decorate([s.config(s.Cd,"outputRestrictedIsFatal")],u.prototype,"beb",null),t.__decorate([s.config(s.Cd,"outputRestrictedIsFatalForUhd")],u.prototype,"ceb",null),u=t.__decorate([n.$(),t.__param(0,n.l(a.Sm)),t.__param(1,n.l(i.LG)),t.__param(2,n.l(a.L2)),t.__param(2,n.optional())],u),e.jJa=u},function(t,e,i){var n,r,a,o,s,u;_esm(e),e.l3a=void 0,t=i(1),n=i(124),r=i(702),a=i(98),o=i(703),s=i(346),u=i(704),e.l3a=new t.Ad(function(t){t(n.JIa).to(r.IIa).la(),t(a.Vz).to(o.wNa).la(),t(s.lJa).to(u.kJa)})},function(t,e,i){var n,r,a,o,s,h,u,c,f,l,d,p,b;function g(t,e,i,n,r,a,o,s,u){var c=this;this.zc=e,this.wC=i,this.config=n,this.Hv=r,this.pOb=a,this.sO=o,this.IQ=s,this.Nn=u,this.ndc=function(e,i){var n;c.Nn.mark(b.Ra.m3,e.sk.ga,"generate-challenge"),n=!1,i.bbc(function(t){n||(n=!0,c.Nn.mark(b.Ra.l3,e.sk.ga,"generate-challenge")),c.qJ(e,i,t).then(function(t){i.kYa(t),c.cGb(i)}).catch(function(t){return i.aDb(t)})})},this.log=t.jb("DrmServices"),this.Hv().wu&&this.sO.jgb().then(function(){c.k9b()}).catch(function(t){c.log.error("Unable to load the persisted DRM data",t)}),this.config.s9a&&this.FE(s(),h.Li.Zq).then(function(t){return t.close()})}_esm(e),e.IIa=void 0,t=i(0),n=i(1),r=i(7),a=i(46),o=i(345),s=i(83),h=i(57),u=i(68),c=i(219),f=i(218),l=i(346),d=i(13),p=i(144),b=i(60),g.prototype.PRb=function(t,e){return this.FE(e,t.type,t.context).then(function(e){return e.SRb(t.initData,t.Naa).then(function(t){return[e,{Ko:e.Iv(),data:t.Rk}]})})},g.prototype.zh=function(e,t){var i=this;return this.log.info("Requesting challenges",this.G6a(e,e.type)),this.FE(t,e.type,e.context).then(function(t){return i.zcb(e,t),t.TRb(e.initData,e.Naa).then(function(){return t})})},g.prototype.zcb=function(t,e){e.jbc(t.sk),this.ndc(t,e)},g.prototype.release=function(e,i){var n=this;return this.log.info("Releasing server license",this.E7a(e)),this.QUb(e).then(function(){var t=Object.assign({active:!1,Re:[]},e.sk);return n.sO.q0(t),i.w9b(),e})},g.prototype.G6a=function(t,e){return{movieId:t.sk.L,xid:t.sk.ga,type:h.Pwa(e)}},g.prototype.E7a=function(t){return{movieId:t.sk?t.sk.L:void 0,xid:t.sk?t.sk.ga:void 0,keySessionId:t.BB()}},g.prototype.qJ=function(t,e,i){return this.log.info("Sending license request",this.G6a(t,i.wg)),this.wC.zh({ga:t.sk.ga,Og:t.sk.Og,f9:[t.sk.om],Rk:[{sessionId:e.BB()||"session",data:i.Rk}],wg:i.wg,Ko:e.Iv(),I_a:i.I_a,Cj:t.sk.Cj})},g.prototype.QUb=function(t){return this.log.info("Sending release request",this.E7a(t)),this.wC.release({ga:t.sk.ga,Re:t.Re})},g.prototype.FE=function(e,i,n){return this.pOb.create().then(function(t){return t.createSession(e,i,n).then(function(){return t})})},g.prototype.j9b=function(t){var e=this;return this.wC.release({ga:t.ga,Re:t.Re}).catch(function(t){e.log.error("Unable to send release data to the server",t)})},g.prototype.k9b=function(){var i=this;this.zc.Mj(this.config.Cza,function(){i.log.trace("Removing cached sessions",{"count:":i.sO.g9.length}),i.sO.g9.filter(function(t){return!t.active}).reduce(function(t,e){return t.then(function(){return i.j9b(e)}).then(function(){return i.sO.q0(e)})},Promise.resolve(void 0))})},g.prototype.cGb=function(t){var e;t.BB()&&t.sk&&((e=new f.e3).Re=t.Re,e.ga=t.sk.ga,e.L=t.sk.L,this.sO.fYa(e))},i=g,i=t.__decorate([n.$(),t.__param(0,n.l(r.ob)),t.__param(1,n.l(a.Wj)),t.__param(2,n.l(o.HIa)),t.__param(3,n.l(u.Eu)),t.__param(4,n.l(d.Oc)),t.__param(5,n.l(l.lJa)),t.__param(6,n.l(c.pha)),t.__param(7,n.l(p.YT)),t.__param(8,n.l(s.bU))],i),e.IIa=i},function(t,e,i){var n,o,r,s,a,u,c,h,f,l,d,p,b,g;function m(t,e,i,n,r,a){this.Pt=t,this.qc=e,this.config=i,this.p2b=n,this.rX=r,this.tX=a,this.log=this.Pt.jb("MediaKeySystemAccessServices")}_esm(e),e.wNa=void 0,t=i(0),n=i(1),o=i(4),r=i(7),s=i(97),a=i(122),u=i(31),c=i(13),h=i(95),f=i(48),l=i(335),d=i(55),p=i(342),b=i(222),i=i(220),m.prototype.aF=function(){return this.promise||(this.promise=this.G$b()),this.promise},m.prototype.XKb=function(r,t){var a=this;return new Promise(function(e,i){var n=h.Db.gY(r);a.tX.create(n).T9b(r,[t]).then(function(t){a.log.trace("Created the media keys system access",{keySystem:r,supportedconfig:t.getConfiguration?JSON.stringify(t.getConfiguration()):void 0}),t=a.p2b.create(t,n),a.kba=t.kba,e(t)}).catch(function(t){a.log.warn("Unable to create the media key system access object",{keySystem:r,error:t.message}),i(new s.Mh(o.Z.TIa,o.Y.Om,void 0,"Unable to create media keys system access. "+t.message,t))})})},m.prototype.eTb=function(){var t=this.config().Q$a||[this.config().Hn];return 1<t.length?(t=t.map(function(t){return h.Db.sta(h.Db.gY(t))}),1===new Set(t).size?Promise.resolve(t[0]):this.aF().then(function(t){return t.Iv()}).then(function(t){return h.Db.sta(t)})):(t=h.Db.gY(t[0]),Promise.resolve(h.Db.sta(t)))},m.prototype.LEa=function(t){var e=this,i=t.Iv(),n=t.l1a(),r=t.k1a();return t.createMediaKeys().then(function(t){return n.createSession(t,f.TEMPORARY),n.setServerCertificate(t,r.l$())}).then(function(){return n.generateRequest(f.Yw,e.Bta(i),!1)}).then(function(){return n.close()}).then(function(){return t}).catch(function(t){return e.log.error("validateKeySystemAccess failed",t),Promise.reject(t)})},m.prototype.Bta=function(t){switch(t){case a.Nm.XE:t=l.JJa;break;case a.Nm.tC:t=l.ZPa;break;default:t=l.hUa}return t.map(this.qc.decode)},m.prototype.G$b=function(){var a,t,o,e;a=this;try{return t=(this.config().Q$a||[this.config().Hn]).map(function(e){var t=h.Db.gY(e);return a.rX.create(t).dua().map(function(t){return{keySystem:e,config:t}})}),e=(o=d.flatten(t).filter(function(t){var e=t.config;return t=h.Db.Xrb.includes(t.keySystem)||f.TKa.includes(null!=(e=null==(e=null==(e=e.videoCapabilities)?void 0:e[0])?void 0:e.robustness)?e:""),a.config().w3a||!t})).map(function(t,i){var n=t.keySystem,r=t.config;return function(){var t=i===o.length-1,e=a.config().LEa&&!t;return a.XKb(n,r).then(function(t){return e?a.LEa(t):Promise.resolve(t)})}}),this.H$b(e)}catch(t){return Promise.reject(t)}},m.prototype.H$b=function(t){return t.reduce(function(t,e){return t.then(function(t){return Promise.resolve(t)}).catch(function(){return e()})},Promise.reject(Error("keySystem missing")))},nt.Object.defineProperties(m.prototype,{P$a:{configurable:!0,enumerable:!0,get(){return this.kba}}}),g=m,g=t.__decorate([n.$(),t.__param(0,n.l(r.ob)),t.__param(1,n.l(u.Ji)),t.__param(2,n.l(c.Oc)),t.__param(3,n.l(p.uNa)),t.__param(4,n.l(b.Iha)),t.__param(5,n.l(i.Nha))],g),e.wNa=g},function(t,e,i){var n,r,a,o,s,u,c,h;function f(t,e,i,n,r,a){this.Pt=t,this.Ga=e,this.qc=i,this.config=n,this.$t=r,this.Aq=a}_esm(e),e.kJa=void 0,t=i(0),n=i(1),r=i(7),a=i(18),o=i(31),s=i(68),u=i(69),c=i(339),i=i(98),f.prototype.create=function(){var e=this;return this.Aq.aF().then(function(t){return new c.mJa(e.Pt,e.Ga,e.qc,e.config,e.$t,t)})},h=f,h=t.__decorate([n.$(),t.__param(0,n.l(r.ob)),t.__param(1,n.l(a.$c)),t.__param(2,n.l(o.Ji)),t.__param(3,n.l(s.Eu)),t.__param(4,n.l(u.qH)),t.__param(5,n.l(i.Vz))],h),e.kJa=h},function(M,t,e){var i,n,r,a,o,s,u,c,h,f,l,d,p,b,g,m,v,y,w,A,_,E,k,S,T,I,O,x,R,P,C,j,N;_esm(t),t.tab=void 0,i=e(706),n=e(731),r=e(740),a=e(743),o=e(749),s=e(782),u=e(1169),c=e(1172),h=e(1184),f=e(1193),l=e(1197),d=e(1199),p=e(1228),b=e(1230),g=e(1234),m=e(1249),v=e(1257),y=e(1263),w=e(1266),A=e(1273),_=e(217),E=e(1279),k=e(1286),S=e(1300),T=e(1306),I=e(1308),O=e(1315),x=e(1358),R=e(1380),P=e(1384),C=e(1388),j=e(1402),N=e(1405),t.tab=function(t){t.load(i.dB,u.zL,n.Jab,c.Jo,r.ycb,a.O,o.enb,s.J8a,h.storage,f.iO,l.q_a,d.dbb,p.NF,b.Wk,g.Iab,m.Rcb,v.i5a,y.Qfb,w.CK,A.e3a,_.k3a,E.Le,k.zd,S.La,T.Hcb,I.Eeb,O.j,x.v0a,R.transports,P.vm,C.Dh,j.pZa,N.ja)}},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,d,p,b,g,m,v,y,w,A,_,E,k,S,T,I,O,D,L,x,B,U,F,R,q,H,K,G,P,C,V,Y,J,z,j,N,W,Q,X,Z,$,tt,et,M,it,nt,rt,at,ot,st,ut,ct,ht,ft,lt,dt,pt;_esm(e),e.dB=void 0,t=i(1),n=i(38),r=i(29),a=i(46),o=i(84),s=i(146),u=i(707),c=i(708),h=i(709),f=i(710),l=i(76),d=i(81),p=i(31),b=i(30),g=i(27),m=i(113),v=i(69),y=i(348),w=i(711),A=i(349),_=i(350),E=i(712),k=i(713),S=i(211),T=i(351),I=i(714),O=i(216),D=i(125),L=i(715),x=i(18),B=i(352),U=i(716),F=i(717),R=i(112),q=i(718),H=i(7),K=i(347),G=i(719),P=i(83),C=i(720),V=i(353),Y=i(721),J=i(722),z=i(114),j=i(14),N=i(723),W=i(355),Q=i(356),X=i(724),Z=i(357),$=i(13),tt=i(47),et=i(147),M=i(358),it=i(170),nt=i(725),rt=i(359),at=i(360),ot=i(225),st=i(726),ut=i(176),ct=i(727),ht=i(226),ft=i(728),lt=i(729),dt=i(224),pt=i(730),e.dB=new t.Ad(function(t){t(n.J4).yG(function(){return{}}).la(),t(n.YG).Jm(JSON),t(n.iUa).Jm(bt),t(s.WSa).Jm(Math),t(n.mMa).Jm(j.x4),t(n.Gja).Jm(j.gx),t(n.LTa).Jm(j.hH),t(n.bIa).Jm(Date),t(n.tM).Jm(j.Ye),t(n.ztb).Jm(j.xD),t(K.zHa).to(G.yHa).la(),t(x.$c).to(L.MFa).la(),t(r.Lh).to(f.AHa).la(),t(a.Wj).to(u.$Ra).la(),t(o.Rz).to(c.tLa).la(),t(v.qH).to(k.nRa).la(),t(s.U4).to(h.vRa).la(),t(M.Zia).to(lt.oNa).la(),t(R.Hz).to(F.gIa).la(),t(R.eIa).to(q.dIa).la(),t(l.Pu).to(w.MTa).la(),t(d.Ez).to(A.$ga).la(),t(p.Ji).to(_.aha).la(),t(b.ki).to(E.NTa).la(),t(g.Tg).Jm(S.XG),t(rt.BT).to(at.AJa).la(),t(m.Sha).to(T.Bk).kva(),t(m.b3).to(T.Bk).la(),t(m.tIa).to(T.Bk).la(),t(m.Vha).to(T.Bk).la(),t(O.Gka).to(D.tH).la(),t(B.PHa).to(U.OHa).la(),t(P.GM).to(C.Mka).la(),t(P.bU).to(C.Mka).la(),t("Factory<LoggerFactory>").ilb(H.ob),t(V.Dha).to(Y.iIa).la(),t(z.EM).Ue(function(e){return function(t){return new J.eTa(e.zb.get(x.$c),e.zb.get(a.Wj),t)}}),t(ut.a3).Ue(function(e){return function(t){return new ct.cIa(e.zb.get(a.Wj),t)}}),t(N.dka).yec(W.cka),t(N.hvb).Ue(function(t){var e=t.zb.get(N.dka);return function(){return new e(!1)}}),t(N.ivb).Ue(function(t){var e=t.zb.get(N.dka);return function(){return new e(!0)}}),t(Q.ITa).Ue(function(){return function(t){return new X.JTa(t)}}),t(et.lU).Ue(function(n){return function(t,e,i){return new Z.AQa(n.zb.get(R.Hz),n.zb.get($.Oc),n.zb.get(tt.Yq),n.zb.get(M.Zia),t,e,i)}}),t(y.vOa).Ue(function(){return function(t){return new I.wOa(t)}}),t(it.LG).to(nt.MGa),t(dt.Rka).to(pt.KTa).la(),t(ot.i5).Ue(function(i){return function(t,e){return new st.pTa(i.zb.get(a.Wj),t,e)}}),t(ht.tJa).to(ft.sJa).la()})},function(t,e,i){var n,r,a,o;function s(t){this.yS=t,r.yq(this,"timers")}function u(t,e){this.yS=t,this.LGb=e}_esm(e),e.$Ra=void 0,t=i(0),n=i(1),r=i(55),a=i(38),o=i(5),u.prototype.cancel=function(){this.LGb(this.yS)},s.prototype.Xl=function(t){return this.Mj(o.Ka,t)},s.prototype.Mj=function(t,e){var i=this.yS.setTimeout(e,t.ka(o.pa));return new u(this.yS,function(t){t.clearTimeout(i)})},s.prototype.H0=function(t,e){var i=this.yS.setInterval(e,t.ka(o.pa));return new u(this.yS,function(t){t.clearInterval(i)})},i=s,i=t.__decorate([n.$(),t.__param(0,n.l(a.iUa))],i),e.$Ra=i},function(t,e,i){var n,r,a,o,s;function u(t,e){this.Da=t,this.random=e}_esm(e),e.tLa=void 0,t=i(0),r=i(1),a=i(5),o=i(29),i=i(146),u.prototype.hB=function(){return this.Da.Ef.ka(a.Gp)*n.fHa+Math.floor(this.random.random()*n.fHa)},(s=n=u).fHa=1e8,s=n=t.__decorate([r.$(),t.__param(0,r.l(o.Lh)),t.__param(1,r.l(i.U4))],s),e.tLa=s},function(t,e,i){var n,r;function a(t){this.Odc=t}_esm(e),e.vRa=void 0,t=i(0),n=i(1),i=i(146),a.prototype.random=function(){return this.Odc.random()},a.prototype.bgb=function(t,e){if("number"!=typeof t)e=t.end,t=t.start;else if(void 0===e)throw Error("max must be provided for randomInteger API");return Math.round(t+this.random()*(e-t))},r=a,r=t.__decorate([n.$(),t.__param(0,n.l(i.WSa))],r),e.vRa=r},function(t,e,i){var a,o,n,r,s,u,c;function h(t,e,i,n){var r=this;this.config=t,this.SLb=e,this.Mb=i,this.performance=n,this.D4b=function(t){r.jCa=t.Ea(r.Ef)},a.yq(this,"date"),a.yq(this,"performance"),this.VDb=void 0!==this.performance&&void 0!==this.performance.timing&&void 0!==this.performance.now,this.jCa=o.Ka,this.Mb.addListener(c.sia.lib,this.D4b)}_esm(e),e.AHa=void 0,t=i(0),a=i(55),o=i(5),n=i(1),r=i(38),s=i(347),u=i(113),c=i(16),h.prototype.DDb=function(t){return t.add(this.jCa)},nt.Object.defineProperties(h.prototype,{Ef:{configurable:!0,enumerable:!0,get(){return this.Ccb?o.timestamp(this.performance.timing.navigationStart+this.performance.now()):o.vc(this.SLb.now())}},cL:{configurable:!0,enumerable:!0,get(){return this.Ef.add(this.jCa)}},Ccb:{configurable:!0,enumerable:!0,get(){return this.config.Imb&&this.VDb}}}),i=h,i=t.__decorate([n.$(),t.__param(0,n.l(s.zHa)),t.__param(1,n.l(r.bIa)),t.__param(2,n.l(u.Vha)),t.__param(3,n.l(r.Gja)),t.__param(3,n.optional())],i),e.AHa=i},function(t,e,i){var n,r;function a(){}_esm(e),e.MTa=void 0,t=i(0),i=i(1),a.prototype.encode=function(t){return n.Fra(t)},a.prototype.decode=function(t){return n.Sqa(t)},a.Fra=function(t){if(!t)throw new TypeError("Invalid byte array");for(var e,i=0,n=t.length,r="";i<n;){if(!(0<=(e=t[i++])&&e<=255))throw Error("bad utf8");if(128&e)if(192==(224&e))e=((31&e)<<6)+(63&t[i++]);else{if(224!=(240&e))throw Error("unsupported utf8 character");e=((15&e)<<12)+((63&t[i++])<<6)+(63&t[i++])}r+=String.fromCharCode(e)}return r},a.Sqa=function(t){var e,i,n=t.length,r=0,a=0;if(!(0<=n))throw Error("bad string");for(e=n;e--;)(i=t.charCodeAt(e))<128?r++:r=i<2048?r+2:r+3;for(r=new Uint8Array(r),e=0;e<n;e++)(i=t.charCodeAt(e))<128?r[a++]=i:(i<2048?r[a++]=192|i>>>6:(r[a++]=224|i>>>12,r[a++]=128|i>>>6&63),r[a++]=128|63&i);return r},r=n=a,r=n=t.__decorate([i.$()],r),e.MTa=r},function(t,e,i){var n,r,a,o;function s(t,e){this.is=t,this.$j=e}_esm(e),e.NTa=void 0,t=i(0),n=i(1),i(4),r=i(27),a=i(81),o=i(14),s.prototype.gK=function(i,t,e){var n,r,a,o=this;return t&&(e?(n=e.HZ,r=e.prefix,a=e.Xca,this.SE(t,function(t,e){a&&!o.is.hh(e)||(i[(r||"")+(n?t.toLowerCase():t)]=e)})):this.SE(t,function(t,e){i[t]=e})),i},s.prototype.SE=function(t,e){for(var i in t)t.hasOwnProperty(i)&&e(i,t[i])},s.prototype.zE=function(t,e){if(t.length!=e.length)return!1;for(var i=t.length;i--;)if(t[i]!=e[i])return!1;return!0},s.prototype.Q0a=function(t,e){if(t.length!=e.length)return!1;t.sort(),e.sort();for(var i=t.length;i--;)if(t[i]!==e[i])return!1;return!0},s.prototype.ff=function(t){var e,i,n;if(t)return e=t.stack,i=t.number,n=(n=t.message)||""+t,e?0!==(t=""+e).indexOf(n)&&(t=n+"\n"+t):t=n,i&&(t+="\nnumber:"+i),t},s.prototype.getFunctionName=function(t){return(t=/function (.{1,})\(/.exec(t.toString()))&&1<t.length?t[1]:""},s.prototype.kta=function(t){return this.getFunctionName(t.constructor)},s.prototype.Jya=function(t){var i=this,n="";return this.is.iE(t)||this.is.MYa(t)?n=Array.prototype.reduce.call(t,function(t,e){return t+(32<=e&&e<128?String.fromCharCode(e):".")},""):this.is.$u(t)?n=t:this.SE(t,function(t,e){n+=(n?", ":"")+"{"+t+": "+(i.is.i7(e)?i.getFunctionName(e)||"function":e)+"}"}),"["+this.kta(t)+" "+n+"]"},s.prototype.createElement=function(t,e,i,n){var r=o.Nh.createElement(t);return e&&(r.style.cssText=e),i&&(r.innerHTML=i),n&&this.SE(n,function(t,e){r.setAttribute(t,e)}),r},s.prototype.tQb=function(e,i){return function(t){return t[e]===i}},s.prototype.E_=function(t){var n={};return(t||"").split("&").forEach(function(t){var e,i;0<=(e=(t=t.trim()).indexOf("="))?(i=decodeURIComponent(t.substr(0,e)).toLowerCase(),n[i]=decodeURIComponent(t.substr(e+1))):n[t.toLowerCase()]=void 0}),n},i=s,i=t.__decorate([n.$(),t.__param(0,n.l(r.Tg)),t.__param(1,n.l(a.Ez))],i),e.NTa=i},function(t,e,i){var n,r,o;function a(t){this.zc=t}_esm(e),e.nRa=void 0,t=i(0),n=i(1),r=i(46),o=i(69),a.prototype.fu=function(t,r){var a=this;return new Promise(function(e,i){var n=a.zc.Mj(t,function(){i(new o.Os(t))});r.then(function(t){e(t),n.cancel()}).catch(function(t){i(t),n.cancel()})})},i=a,i=t.__decorate([n.$(),t.__param(0,n.l(r.Wj))],i),e.nRa=i},function(t,e,i){var n;function r(t){this.ZRb=t,this.baa=!1,this.qaa=this.Bg=this.tS=0,this.SY=!1,this.raa=0}_esm(e),e.wOa=void 0,n=i(15),r.prototype.Ona=function(t){t<this.tS&&(this.Bg+=this.tS),this.tS=t,this.baa=!0},r.prototype.NSb=function(){if(this.baa)return this.SY?this.raa-this.qaa:this.Bg+this.tS-this.qaa},r.prototype.refresh=function(){var t=this.ZRb();n.Oa(t)&&this.Ona(t)},r.prototype.Bcc=function(){this.SY||(this.baa&&(this.raa=this.Bg+this.tS),this.SY=!0)},r.prototype.Rcc=function(){this.SY&&(this.baa&&(this.qaa+=this.Bg+this.tS-this.raa),this.raa=0,this.SY=!1)},e.wOa=r},function(t,e,i){var n,r,a,o;function s(t,e){this.Da=t,this.c$=this.Da.Ef.ka(a.pa)-1,this.i0b=this.oba=0,this.id=""+e.hB()}_esm(e),e.MFa=void 0,t=i(0),n=i(1),r=i(29),a=i(5),i=i(84),s.prototype.Tb=function(){var t,e=this.Da.Ef.ka(a.pa)-this.c$;return e<this.oba&&(t=this.oba+1,this.c$-=t-e,e=t),this.oba=e,a.vc(this.oba)},s.prototype.TTb=function(){return this.i0b++},nt.Object.defineProperties(s.prototype,{UB:{configurable:!0,enumerable:!0,get(){return a.vc(this.c$)}}}),o=s,o=t.__decorate([n.$(),t.__param(0,n.l(r.Lh)),t.__param(1,n.l(i.Rz))],o),e.MFa=o},function(t,e,i){var n,r,a,o;function s(t,e){this.is=t,this.Le=e}_esm(e),e.OHa=void 0,t=i(0),r=i(1),a=i(27),i=i(30),s.prototype.encode=function(t){var i=this,n="";return this.Le.SE(t,function(t,e){t=i.H3a(t)+"="+i.H3a(e),n=n?n+","+t:t}),n},s.prototype.H3a=function(t){return this.is.SI(t)?this.is.vo(t)?""+t:this.is.$u(t)?(t=t.replace(n.OAa,this.wxa.bind(this)),t=!n.l8b.test(t)&&n.F2b.test(t)?'"'+t+'"':t):this.is.g7(t)?""+t:this.is.tna(t)?"NaN":"":""},s.prototype.wxa=function(t){return n.map[t]},(o=n=s).map={'"':'""',"\r":"","\n":" "},o.OAa=/(?!^.+)["\r\n](?=.+$)/g,o.l8b=/["].*["]/g,o.F2b=/[", ]/,o=n=t.__decorate([r.$(),t.__param(0,r.l(a.Tg)),t.__param(1,r.l(i.ki))],o),e.OHa=o},function(t,e,i){var n,r,a,o;function s(t,e,i){this.config=t,this.Eb=e,this.Aa=i.jb("General")}_esm(e),e.gIa=void 0,t=i(0),n=i(1),r=i(27),a=i(112),i=i(7),s.prototype.assert=function(){},s.prototype.sEb=function(t,e){this.assert(this.Eb.SI(t),e)},s.prototype.tEb=function(t,e){this.assert(this.Eb.hh(t),e)},s.prototype.I7=function(t,e){this.assert(this.Eb.$u(t),e)},s.prototype.zEb=function(t,e){this.assert(this.Eb.wo(t),e)},s.prototype.xEb=function(t,e){this.assert(this.Eb.$u(t)||null==t,e)},s.prototype.poa=function(t,e){this.assert(this.Eb.vo(t),e)},s.prototype.vEb=function(t,e){this.assert(this.Eb.coa(t),e)},s.prototype.yEb=function(t,e){this.assert(this.Eb.aW(t),e)},s.prototype.wEb=function(t,e){this.assert(this.Eb.PV(t),e)},s.prototype.rEb=function(t,e){this.assert(this.Eb.g7(t),e)},s.prototype.uEb=function(t,e){this.assert(this.Eb.i7(t),e)},s.prototype.uYb=function(){this.assert(!1,"invalid operation, this method should not be called")},o=s,o=t.__decorate([n.$(),t.__param(0,n.l(a.eIa)),t.__param(1,n.l(r.Tg)),t.__param(2,n.l(i.ob))],o),e.gIa=o},function(t,e,i){var n,r,a,o;function s(t){return(t=r.gT.call(this,t,"DebugConfigImpl")||this).voc=function(){},t}_esm(e),e.dIa=void 0,t=i(0),n=i(44),r=i(45),a=i(1),i=i(33),S(s,r.gT),nt.Object.defineProperties(s.prototype,{IFb:{configurable:!0,enumerable:!0,get(){return!1}}}),o=s,t.__decorate([n.config(n.Cd,"breakOnError")],o.prototype,"IFb",null),o=t.__decorate([a.$(),t.__param(0,a.l(i.qha))],o),e.dIa=o},function(t,e,i){var n,r,a,o;function s(t){return r.gT.call(this,t,"ClockConfigImpl")||this}_esm(e),e.yHa=void 0,t=i(0),n=i(44),r=i(45),a=i(1),i=i(33),S(s,r.gT),nt.Object.defineProperties(s.prototype,{Imb:{configurable:!0,enumerable:!0,get(){return!1}}}),o=s,t.__decorate([n.config(n.Cd,"usePerformanceApi")],o.prototype,"Imb",null),o=t.__decorate([a.$(),t.__param(0,a.l(i.qha))],o),e.yHa=o},function(t,e,i){var n,r,a,o;function s(t,e){this.Ga=t,this.entries=new Set,this.Aa=e.jb("TimingApi")}_esm(e),e.Mka=void 0,t=i(0),n=i(1),r=i(18),a=i(5),i=i(7),s.prototype.mark=function(t,e,i){return t={name:t,ru:this.Ga.Tb()},e&&(t.ga=e),i&&(t.Xf=i),this.entries.add(t),t},s.prototype.Kta=function(){var e=[];return this.entries.forEach(function(t){return e.push(t)}),e},s.prototype.Q6a=function(e){return this.Kta().filter(function(t){return t.ga===e})},s.prototype.WTb=function(){var t={};try{t=this.Kta().filter(function(t){return!t.ga}).reduce(function(t,e){return t[e.name]=e.ru.ka(a.pa),t},{})}catch(t){this.Aa.error(" getMapOfCommonMarks exception",t)}return t},s.prototype.Pgb=function(e){var i=this;this.Kta().forEach(function(t){t.ga===e&&i.entries.delete(t)})},o=s,o=t.__decorate([n.$(),t.__param(0,n.l(r.$c)),t.__param(1,n.l(i.ob))],o),e.Mka=o},function(t,e,i){var h,n,r,f,l,d,p,a,o;function s(t,e){this.Ga=t,this.config=e}_esm(e),e.iIa=void 0,t=i(0),n=i(1),r=i(18),f=i(37),l=i(4),d=i(16),p=i(5),a=i(14),i=i(354),s.prototype.B2a=function(e){var t,n,r=this,a=e.mediaTime.value,i=e.ft.value,o=e.Gb.value,s=e.state.value,u={segmentId:e.Yta(),mediaTime:a,segmentTime:e.eF(),bufferingState:h.RFb[i],presentingState:h.q7b[o],playbackState:h.n6b[s],mseBuffersBusy:this.hVb(e),intBuffersBusy:this.CTb(e),tabVisible:this.Pdc(),decodedFrameCount:this.mMb(e),videoElementInDom:this.Ugc(e),lastVideoSync:this.Ga.Tb().Ea(p.vc(e.q1)).ka(p.pa)},c=o===d.rb.fg?e.kb.$h?this.config.Wdb:this.config.Vdb:this.config.vcb;i!==d.Tf.Me?(i=l.Y.Vpb,this.XZa(u.mseBuffersBusy,u.intBuffersBusy)&&(n=h.vGa)):(o!==d.rb.Gc?i=l.Y.Xpb:(i=l.Y.Wpb,(o=e.qf)&&0===o.q$()&&(n=h.zwb)),(o=e.qf)&&o.Yb.sourceBuffers.forEach(function(t){var e,i=h.Fd[t.mediaType];u[i+"Ranges"]=t.j$();try{e=t.buffered()}catch(t){e=void 0}e&&0!==e.length?(t=1e3*e.end(0)-a,u[i+"Undecoded"]=t,1<e.length&&(n=h.Nob),a<1e3*e.start(0)||a>1e3*e.end(0)?n=h.Oob:t<c.ka(p.pa)?n=h.Pob:r.XZa(u.mseBuffersBusy,u.intBuffersBusy)&&(n=h.vGa)):(u[i+"Undecoded"]=0,n=h.Mob)})),o=e.chb.J7a(),s=a===(null==(t=o.repositionTrace)?void 0:t[0].newMediaTime),u.lastRepositionCausedTimeout=s,u.trackChangeInProgress=null==(t=e.La)?void 0:t.GL,Object.assign(u,o),e="";try{e=JSON.stringify(u)}catch(t){e="Cannot stringify details: "+t}return new f.jd(l.Z.JOa,i,n,void 0,void 0,void 0,e,void 0)},s.prototype.hVb=function(t){var e;if(t.Yb)return e={},t.Yb.sourceBuffers.forEach(function(t){e[0===t.type?"audio":"video"]={updating:t.updating()}}),e},s.prototype.CTb=function(t){var e;if(t.Yb)return e={},t.Yb.sourceBuffers.forEach(function(t){e[0===t.type?"audio":"video"]={updating:t.vi()}}),e},s.prototype.Pdc=function(){return!a.Nh.hidden},s.prototype.mMb=function(t){return(t=t.qf)&&(t=t.Yb.ca)&&void 0!==t.webkitDecodedFrameCount?t.webkitDecodedFrameCount:NaN},s.prototype.Ugc=function(t){return!(!(t=t.qf)||!(t=t.Yb.ca))&&a.Nh.body.contains(t)},s.prototype.XZa=function(t,e){var i;return!((null==(i=t.audio)?void 0:i.updating)===(null==(i=e.audio)?void 0:i.updating)&&(null==(i=t.video)?void 0:i.updating)===(null==(t=e.video)?void 0:t.updating))},(o=h=s).Mob="1",o.Nob="2",o.Oob="3",o.vGa="4",o.Pob="5",o.zwb="6",o.Fd=["Audio","Video"],o.RFb=["","NORMAL","BUFFERING","STALLED"],o.q7b=["","WAITING","PLAYING ","PAUSED","ENDED"],o.n6b=["STATE_NOTLOADED","STATE_LOADING","STATE_NORMAL","STATE_CLOSING","STATE_CLOSED"],o=h=t.__decorate([n.$(),t.__param(0,n.l(r.$c)),t.__param(1,n.l(i.eja))],o),e.iIa=o},function(t,e,i){var n,r,a,o;function s(t,e,i){var n=this;this.Ig=t,this.zc=e,this.t8=i,this.dR=function(t){n.uk=void 0,n.cfc(t||n.t8)},this.T$a=a.vc(-this.t8.ka(a.pa))}_esm(e),e.eTa=void 0,t=i(0),n=i(1),r=i(18),a=i(5),i=i(46),s.prototype.Xl=function(t){this.OBa=t,this.uk=this.uk||this.pg(this.dR)},s.prototype.ti=function(){this.uk&&this.uk.cancel(),this.uk=void 0},s.prototype.cfc=function(t){var e,i=this.Ig.Tb();this.OBa&&((e=t.Ea(i.Ea(this.T$a))).lm(a.Ka)<=0?(t=this.OBa,this.OBa=void 0,this.T$a=i,t()):this.uk=this.uk||this.zc.Mj(e,this.dR.bind(this,t)))},s.prototype.pg=function(t){return this.zc.Mj(a.Ka,t)},o=s,o=t.__decorate([n.$(),t.__param(0,n.l(r.$c)),t.__param(1,n.l(i.Wj))],o),e.eTa=o},function(t,e){_esm(e),e.dka="PrioritizedSetOfListsSymbol",e.hvb="PrioritizedSetOfListsFactorySymbol",e.ivb="PrioritizedSetOfSetsFactorySymbol"},function(t,e){function i(){this.searchParams={}}function n(t){this.Ar=t,this.searchParams=new i}_esm(e),e.JTa=void 0,n.prototype.toString=function(){return this.href},nt.Object.defineProperties(n.prototype,{href:{configurable:!0,enumerable:!0,get(){return""+this.Ar+this.searchParams.toString()}}}),e.JTa=n,i.prototype.get=function(t){return this.searchParams[t]},i.prototype.set=function(t,e){this.searchParams[t]=e},i.prototype.toString=function(){return Object.entries(this.searchParams).reduce(function(t,e,i){var n=rt(e);return t+(0==i?"?":"&")+(e=n.next().value)+"="+(n=n.next().value)},"")}},function(t,e,i){var n,r,a,o,s,u;function c(t,e,i){this.userAgentData=i,this.pe=this.UPb(t,e.data.browserInfo)}_esm(e),e.RTa=e.MGa=void 0,t=i(0),n=i(1),r=i(13),a=i(33),u=i(38),i=i(224),c.prototype.Q$=function(t,e){var i;if(e=this.JVb(e))switch(t){case s.ZB:i=0<e.length?Number(e[0]):0;break;case s.OQ:i=1<e.length?Number(e[1]):0;break;case s.gR:i=2<e.length?Number(e[2]):0;break;case s.rea:i=3<e.length?Number(e[3]):0}return void 0===i||isNaN(i)?0:i},c.prototype.JVb=function(t){return null==t?void 0:t.split(".")},c.prototype.LJ=function(t){return this.pe.name===t},c.prototype.NJ=function(t){return this.pe.$ca.name===t},c.prototype.SYb=function(t){return this.pe.lWb===t},c.prototype.UPb=function(t,e){return Object.assign(Object.assign({lWb:this.WPb(t,e)},this.TPb(t,e)),{$ca:this.XPb(t,e)})},c.prototype.WPb=function(t,e){return e&&e.hardware?e.hardware:/Mobile|iPhone/.test(t)?r.f4.phone:/Android/.test(t)?r.f4.Qdc:r.f4.tIb},c.prototype.TPb=function(t,e){return e&&e.name&&e.version?{name:e.name,version:e.version}:/OPR/.test(t)?{name:r.io.opera,version:""}:/Tesla/.test(t)?{name:r.io.Jkb,version:""}:(e=t.match(/Edge\/(\d*)\./))?{name:r.io.Ir,version:e[1]}:(e=t.match(/Edg\/(\d*)\./))?{name:r.io.g3a,version:e[1]}:(e=t.match(/Chrome\/(\d*)\./))?{name:r.io.Ipa,version:e[1]}:(e=t.match(/Firefox\/(\d*)\./))?{name:r.io.F4a,version:e[1]}:(t=t.match(/(\d*)\.(\d*)\.?(\d*)? Safari/))?{name:r.io.Lhb,version:t[1]}:{name:r.io.Ipa,version:""}},c.prototype.XPb=function(t,e){return e&&e.os&&e.os.name&&e.os.version?{name:e.os.name,version:e.os.version}:/CrOS/.test(t)?{name:r.Ep.Y_a,version:""}:(e=t.match(/Mac OS X (\d*)_?(\d*)?_?(\d*)?/))?{name:r.Ep.Tab,version:e[1]+"."+e[2]+"."+e[3]}:/Windows NT/.test(t)?{name:r.Ep.ZEa,version:""}:/Android.*Chrome\/[.0-9]* Mobile/.test(t)||/Android.*Chrome\/[.0-9]* /.test(t)?{name:r.Ep.w7,version:""}:/Linux/.test(t)?{name:r.Ep.qab,version:""}:/iPhone/.test(t)?{name:r.Ep.G9a,version:""}:{name:r.Ep.ZEa,version:""}},nt.Object.defineProperties(c.prototype,{P9a:{configurable:!0,enumerable:!0,get(){return this.LJ(r.io.Ipa)}},cZ:{configurable:!0,enumerable:!0,get(){return this.LJ(r.io.Ir)}},RB:{configurable:!0,enumerable:!0,get(){return this.LJ(r.io.g3a)}},Saa:{configurable:!0,enumerable:!0,get(){return this.LJ(r.io.F4a)}},bwa:{configurable:!0,enumerable:!0,get(){return this.LJ(r.io.opera)}},jZ:{configurable:!0,enumerable:!0,get(){return this.LJ(r.io.Lhb)}},s$a:{configurable:!0,enumerable:!0,get(){return this.LJ(r.io.Jkb)}},aZ:{configurable:!0,enumerable:!0,get(){return this.NJ(r.Ep.w7)}},hQ:{configurable:!0,enumerable:!0,get(){return this.NJ(r.Ep.G9a)}},Jaa:{configurable:!0,enumerable:!0,get(){return this.NJ(r.Ep.w7)&&this.SYb(r.f4.phone)}},bZ:{configurable:!0,enumerable:!0,get(){return this.NJ(r.Ep.Y_a)}},YYb:{configurable:!0,enumerable:!0,get(){return this.NJ(r.Ep.qab)}},iQ:{configurable:!0,enumerable:!0,get(){return this.NJ(r.Ep.Tab)}},yF:{configurable:!0,enumerable:!0,get(){return this.NJ(r.Ep.ZEa)}},Cr:{configurable:!0,enumerable:!0,get(){return this.Q$(s.ZB,this.pe.version)}},Y4b:{configurable:!0,enumerable:!0,get(){return this.Q$(s.ZB,this.pe.$ca.version)}},Z4b:{configurable:!0,enumerable:!0,get(){return this.Q$(s.OQ,this.pe.$ca.version)}},$4b:{configurable:!0,enumerable:!0,get(){return this.Q$(s.gR,this.pe.$ca.version)}}}),o=c,o=t.__decorate([n.$(),t.__param(0,n.l(u.LTa)),t.__param(1,n.l(a.MT)),t.__param(2,n.l(i.Rka))],o),e.MGa=o,(u=s=e.RTa||(e.RTa={}))[u.ZB=0]="major",u[u.OQ=1]="minor",u[u.gR=2]="patch",u[u.rea=3]="revision"},function(t,e,i){var n,r,a;function o(t,e,i){this.zc=t,this.SDa=e,this.oy=i}_esm(e),e.pTa=void 0,t=i(0),n=i(46),r=i(1),a=i(5),o.prototype.aJ=function(){this.uk||(this.uk=this.zc.Mj(a.vc(this.SDa),this.oy))},o.prototype.pu=function(){this.uk&&this.uk.cancel(),this.uk=void 0},i=o,i=t.__decorate([r.$(),t.__param(0,r.l(n.Wj))],i),e.pTa=i},function(t,e,i){var n,r;function a(t,e){this.zc=t,this.t8=e}_esm(e),e.cIa=void 0,t=i(0),n=i(1),i=i(46),a.prototype.Xl=function(t){this.ti(),this.uk=this.zc.Mj(this.t8,t)},a.prototype.ti=function(){this.uk&&this.uk.cancel(),this.uk=void 0},r=a,r=t.__decorate([n.$(),t.__param(0,n.l(i.Wj))],r),e.cIa=r},function(t,e,i){var n,o;function r(){}_esm(e),e.sJa=void 0,t=i(0),n=i(1),o=i(226),r.prototype.kP=function(r,t){var a=this;r&&Object.entries(t).forEach(function(t){var e,i,n=rt(t);t=n.next().value,n=n.next().value,a.IYb(n)?(n=(e=rt(n)).next().value,i=e.next().value,e=r[n],Array.isArray(e)?(a.Zqa(r,t,n),e.forEach(function(t){a.kP(t,i)})):n===o.Fk?Object.values(r).forEach(function(t){a.kP(t,i)}):(a.Zqa(r,t,n),"object"==typeof e&&a.kP(e,i))):a.Zqa(r,t,n)})},r.prototype.IYb=function(t){return Array.isArray(t)},r.prototype.Zqa=function(e,t,i){e.hasOwnProperty(t)||t===i||Object.defineProperty(e,t,{get(){return e[i]},set(t){return e[i]=t},enumerable:!0})},i=r,i=t.__decorate([n.$()],i),e.sJa=i},function(t,e,i){var n,r,a;function o(t){this.config=t}_esm(e),e.oNa=void 0,t=i(0),n=i(13),r=i(17),i=i(1),o.prototype.Iv=function(){return this.HYb()?r.LIa:/widevine/i.test(this.config().Hn)?r.Jha:/fps/i.test(this.config().Hn)?"fairplay":r.g3},o.prototype.HYb=function(){return/clearkey/i.test(this.config().Hn)},a=o,a=t.__decorate([i.$(),t.__param(0,i.l(n.Oc))],a),e.oNa=a},function(t,e,i){var n,r,a;function o(){}_esm(e),e.KTa=void 0,t=i(0),r=i(1),null!=(n=null==(i=null===(i=i(14)).Ye||void 0===i.Ye?void 0:i.Ye.userAgentData)?void 0:i.getHighEntropyValues)&&n.call(i,["platformVersion"]).then(function(t){a=(t=t.platformVersion)?t:"undefined"}).catch(function(){a="exception"}),nt.Object.defineProperties(o.prototype,{platformVersion:{configurable:!0,enumerable:!0,get(){return a}}}),i=o,i=t.__decorate([r.$()],i),e.KTa=i},function(t,e,i){var n,r,a,o,s;_esm(e),e.Jab=void 0,n=i(732),r=i(733),t=i(1),a=i(115),o=i(7),s=i(738),e.Jab=new t.Ad(function(t){t(o.ob).to(r.EMa).la(),t(a.lM).to(n.FMa).la(),t(o.Iia).to(s.tMa).la()})},function(t,e,i){var n;function r(){this.rjb={},this.pp=[]}_esm(e),e.FMa=void 0,t=i(0),i=i(1),r.prototype.aea=function(t,e){e&&(this.rjb[t]=e,this.pp=Object.values(this.rjb))},n=r,n=t.__decorate([i.$()],n),e.FMa=n},function(t,e,i){var a,n,o,r,s,u,c;function h(t,e,i){this.Ga=t,this.pp=e,this.$wa=i}_esm(e),e.EMa=void 0,t=i(0),a=i(227),n=i(1),o=i(735),r=i(18),s=i(115),u=i(7),c=i(736),h.prototype.jb=function(t,e,i,n,r){return i=void 0===i?this.pp:i,e?new o.oQa(this.Ga,this.$wa,i,e,t):r?new c.ZFa(this.Ga,this.$wa,i,t,n||"",r):new a.kM(this.Ga,this.$wa,i,t)},i=h,i=t.__decorate([n.$(),t.__param(0,n.l(r.$c)),t.__param(1,n.l(s.lM)),t.__param(2,n.l(u.Iia))],i),e.EMa=i},function(t,e){_esm(e),e.j_a=void 0,e.j_a=function(t,e){var i;t=t.QTb();for(var n=0;n<e.length;++n)null!=(i=e[n])&&((i=i.Bh?i.Bh:i).constructor===Uint8Array?t.sDb(i):"MediaRequest"===i.constructor.name?t.cDb(i):"string"==typeof i?t.qDb(i):"function"==typeof i?t.XCb(i):i instanceof Error?t.UCb(i):i instanceof Object?t.dDb(i):t.tDb(i));return t.Wi()}},function(t,e,i){var a,n,o;function r(t,e,i,n,r){return(t=o.kM.call(this,t,e,i,r)||this).j=n,a.yq(t,"playback"),t}_esm(e),e.oQa=void 0,a=i(55),n=i(361),S(r,(o=i(227)).kM),r.prototype.z8=function(t){return new r(this.Ga,this.b8,this.pp,this.j,t)},r.prototype.fE=function(t,e,i){for(t=new n.Hia(t,this.aq,this.Ga.Tb(),e,i,this.j.index),i=(e=rt(this.pp.pp)).next();!i.done;i=e.next())(i=i.value)(t,this.j)},e.oQa=r},function(t,e,i){var o,n;function r(t,e,i,n,r,a){return(t=o.kM.call(this,t,e,i,n)||this).groups=r,Array.isArray(a)?t.prefix=a:a&&"string"==typeof a&&(t.prefix=[],t.prefix.push(a)),t}_esm(e),e.ZFa=void 0,o=i(227),n=i(737),S(r,o.kM),r.prototype.fE=function(t,e,i){for(t=new n.YFa(t,this.aq,this.Ga.Tb(),e,i,this.prefix),i=(e=rt(this.pp.pp)).next();!i.done;i=e.next())(i=i.value)(t)},r.prototype.z8=function(t){return new r(this.Ga,this.b8,this.pp,t,this.groups,this.prefix)},e.ZFa=r},function(t,e,i){var n,r;function a(t,e,i,n,r,a,o){this.level=t,this.aq=e,this.timestamp=i,this.message=n,this.Zc=r,this.prefix=a,this.index=void 0===o?0:o}_esm(e),e.YFa=void 0,n=i(5),r={0:"F",1:"E",2:"W",3:"I",4:"T",5:"D"},a.prototype.Afa=function(t,e){return t=(this.prefix.length?this.prefix.join(" ")+" ":"")+this.message+(e?"":" "+this.jdc(!!t)),(this.timestamp.ka(n.pa)/1e3).toFixed(3)+"|"+this.index+"|"+(r[this.level]||this.level)+"|"+this.aq+"| "+t},a.prototype.jdc=function(t){for(var e,i=this.Zc.length,n="",r=0;r<i;++r)if(e=this.Zc[r].zw,r&&n.length&&(n+=" "),"object"==typeof e)if(null===e)n+="null";else if(e instanceof Error)n+=this.idc(e,t);else try{n+=JSON.stringify(e)}catch(t){n+=this.hdc(e)}else n+=e;return n},a.prototype.idc=function(t,e){return t.toString()+(t.stack&&!e?"\n"+t.stack:"")+"\n"},a.prototype.hdc=function(t){var i=[];return JSON.stringify(t,function(t,e){if("object"==typeof e&&null!==e){if(-1!==i.indexOf(e))return"<cycle>";i.push(e)}return e})},e.YFa=a},function(t,e,i){var n,r,a,o;function s(t,e){this.qc=t,this.Le=e}_esm(e),e.tMa=void 0,t=i(0),n=i(1),r=i(739),a=i(31),i=i(30),s.prototype.QTb=function(){return new r.uMa(this.qc,this.Le)},o=s,o=t.__decorate([n.$(),t.__param(0,n.l(a.Ji)),t.__param(1,n.l(i.ki))],o),e.tMa=o},function(t,e,i){var n,r,a;function o(t,e){this.qc=t,this.Le=e,this.Zc=[]}function s(t){return p.call(this,t,function(t){return{Details:t}})||this}function u(t){return p.call(this,t,function(t){return JSON.parse(t.toJSON())})||this}function c(e,t){return(t=p.call(this,t,function(t){return{Base64:e.encode(t)}})||this).qc=e,t}function h(t,e){return(e=p.call(this,e,function(t){return t()})||this).Le=t,e}function f(t){return p.call(this,t,function(t){return{Exception:t.message||""+t,StackTrace:t.stack||"nostack"}})||this}function l(t,e,i){return(e=p.call(this,e,i)||this).Le=t,e}function d(t){return p.call(this,t,function(t){return{Details:t}})||this}function p(t,e){this.zw=t,this.value=e?e(t):t}_esm(e),e.uMa=void 0,t=i(0),n=i(1),r=i(30),i=i(31),p.prototype.CX=function(t){return this.zw===t},S(d,p),d.prototype.DL=function(t,e){return e?"":"\r\n"+this.zw},S(l,p),l.prototype.DL=function(){var n="";return this.Le.SE(this.value,function(e,i){try{n+=", "+e+": "+i}catch(t){try{n+=", "+e+": "+JSON.stringify(i)}catch(t){n+=", error stringifying "+e}}}),n.replace(/[\r\n]+ */g," ")},S(f,p),f.prototype.DL=function(t){var e="\r\n"+this.zw.message;return t||(e+="\r\n"+this.zw.stack),e},S(h,p),h.prototype.DL=function(){var i="";return this.Le.SE(this.value,function(t,e){i+=", "+t+": "+e}),i.replace(/[\r\n]+ */g," ")},S(c,p),c.prototype.DL=function(t,e){return this.zw&&!e?"\r\n"+this.qc.encode(this.zw):""},S(u,p),u.prototype.DL=function(){return this.zw?this.zw.toJSON():""},S(s,p),s.prototype.DL=function(){return", "+(this.zw.toString?""+this.zw.toString():"")},o.prototype.qDb=function(t){this.Zc.push(new d(t))},o.prototype.dDb=function(t){this.Zc.push(new l(this.Le,t))},o.prototype.UCb=function(t){this.Zc.push(new f(t))},o.prototype.XCb=function(t){this.Zc.push(new h(this.Le,t))},o.prototype.sDb=function(t){this.Zc.push(new c(this.qc,t))},o.prototype.cDb=function(t){this.Zc.push(new u(t))},o.prototype.tDb=function(t){this.Zc.push(new s(t))},o.prototype.Wi=function(){return this.Zc},a=o,a=t.__decorate([n.$(),t.__param(0,n.l(i.Ji)),t.__param(1,n.l(r.ki))],a),e.uMa=a},function(t,e,i){var n,r;_esm(e),e.ycb=void 0,t=i(1),n=i(362),r=i(741),e.ycb=new t.Ad(function(t){t(n.PNa).to(r.ONa).la()})},function(t,e,i){var n,r,a;function o(t){this.zc=t}_esm(e),e.ONa=void 0,t=i(0),n=i(1),r=i(742),i=i(46),o.prototype.p1a=function(t,e){return new r.QNa(this.zc,t,e)},a=o,a=t.__decorate([n.$(),t.__param(0,n.l(i.Wj))],a),e.ONa=a},function(t,e){function i(t,e,i){this.zc=t,this.config=e,this.getTime=i}_esm(e),e.QNa=void 0,i.prototype.observe=function(t,e){var i=this;this.cancel(),this.uk=this.zc.H0(this.config.p7a(),function(){i.getTime()>=t&&(i.cancel(),e())})},i.prototype.cancel=function(){this.uk&&(this.uk.cancel(),this.uk=void 0)},e.QNa=i},function(t,e,i){var n,r,a,o,s,u;_esm(e),e.O=void 0,t=i(1),n=i(228),r=i(363),a=i(744),o=i(747),s=i(366),u=i(748),e.O=new t.Ad(function(t){t(n.wka).to(a.mSa).la(),t(r.iSa).to(o.hSa).la(),t(s.sTa).to(u.rTa).la()})},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,d,p,b;function g(t,e,i,n,r,a,o,s,u,c){this.Ga=t,this.$f=e,this.PQ=i,this.PEa=n,this.K_=r,this.zc=a,this.$N=o,this.Ci=s,this.Wra=u,this.Ii=c}_esm(e),e.mSa=void 0,t=i(0),n=i(1),r=i(18),a=i(7),o=i(362),s=i(147),u=i(364),c=i(365),h=i(745),f=i(746),l=i(99),d=i(46),p=i(360),i=i(30),g.prototype.aLb=function(t,e,i){return new h.nSa(this.Ga,this.$f,this.PQ,this.PEa,e,t,this.Ci,this.K_,this.Ii,this.Wra,i)},g.prototype.wKb=function(t,e){return new f.LGa(this.$f,t,e,this.PQ,this.zc,this.$N)},b=g,b=t.__decorate([n.$(),t.__param(0,n.l(r.$c)),t.__param(1,n.l(a.ob)),t.__param(2,n.l(o.PNa)),t.__param(3,n.l(c.WTa)),t.__param(4,n.l(u.kQa)),t.__param(5,n.l(d.Wj)),t.__param(6,n.l(l.cT)),t.__param(7,n.l(s.lU)),t.__param(8,n.l(p.BT)),t.__param(9,n.l(i.ki))],b),e.mSa=b},function(t,e,i){var l,r,d;function n(t,e,i,n,r,a,o,s,u,c,h){var f=this;this.Ga=t,this.PQ=i,this.Nza=n,this.config=r,this.yb=a,this.Ci=o,this.K_=s,this.Ii=u,this.rl=h,this.FPb=Object.values(l.Na).map(function(e){return{event:e,oy:function(t){return f.Mb.Tc(e,t)}}}),this.Mb=c.create(),this.eG=[],this.log=e.jb("SegmentManager"),this.fJ=!0,this.mp=this.Ii.createElement("div",d.jka)}function a(t,e,i,n,r,a,o,s,u,c,h){var f=this;this.log=t,this.config=e,this.D3b=i,this.Nza=n,this.Ci=r,this.K_=a,this.Fw=o,this.G=s,this.mp=u,this.yb=c,this.rl=h,this.vO=function(){f.QF&&(f.QF.cancel(),f.QF=void 0)},this.Gua=function(t){f.log.trace("Received the transition event",{movieId:t.L}),f.x8b()},this.Twa=function(){},this.log.debug("Constructing session data",p(s)),this.tec=new Promise(function(t){f.x8b=t})}function p(t){return{movieId:t.L}}function o(t){return JSON.stringify({movieId:t.L,startPts:t.ea,logicalEnd:t.jk,params:t.Fb?{trackingId:t.Fb.ql,authParams:t.Fb.Q7,sessionParams:t.Fb.Wn,disableTrackStickiness:t.Fb.kra,uiPlayStartTime:t.Fb.HS,loadImmediately:t.Fb.xba,playbackState:t.Fb.playbackState?{currentTime:t.Fb.playbackState.currentTime,volume:t.Fb.playbackState.volume,muted:t.Fb.playbackState.muted,playbackRate:t.Fb.playbackState.playbackRate}:void 0,pin:t.Fb.Keb,heartbeatCooldown:t.Fb.Sua,uiLabel:t.Fb.he,uxLabels:t.Fb.$fa}:void 0})}_esm(e),e.nSa=void 0,l=i(16),r=i(5),d=i(17),a.prototype.load=function(t){var e,i=this;this.log.trace("Loading new segment",p(this.G)),this.U=this.Nza.FO(this.config,this.K_,this.Ci,this.G,this.yb,this.rl),this.U.addEventListener(l.Na.ZP,function(t){i.log.trace("Segment is inactive",p(i.G)),i.Fw.close(i.Ci(t.errorCode))}),this.U.addEventListener(l.Na.closed,this.vO),t?(this.log.debug("Pausing background segment",p(this.G)),this.U.addEventListener(l.Na.iwa,this.Gua),this.U.pause()):(this.mp.appendChild(this.U.Qo()),e=function(t){i.Gua(t),i.U.removeEventListener(l.Na.loaded,e)},this.U.addEventListener(l.Na.loaded,e))},a.prototype.observe=function(){var t,e,i=this;this.log.trace("Observing segment",o(this.G)),this.QF?this.log.trace("Segment is currently observing",p(this.G)):this.G.Fb&&this.G.Fb.xba?this.Twa(this):(t=this.D3b.p1a(this.config,function(){var t;return i.U&&(t=i.U.Kv())?t:0}),e=this.nGb(this.G),this.log.trace("Adding a moment to watch",{time:e}),t.observe(e,function(){i.log.trace("Segment has reached its loading point",p(i.G)),i.Twa(i),i.vO()}))},a.prototype.close=function(t){return this.log.info("Closing segment",{segment:o(this.G),error:t}),this.U?(this.U.removeEventListener(l.Na.iwa,this.Gua),this.U.close(t)):Promise.resolve()},a.prototype.G4b=function(t){this.Twa=t},a.prototype.nGb=function(t){var e,i=t.jk;return t=!!t.Fb&&t.Fb.xba,e=0,i&&!t&&((e=i-this.config.N6a())<this.config.P6a()&&(e=i-(t=i-this.config.P6a())/2)),e},n.prototype.OUb=function(){return!(!this.Rh||!this.Rh.U)&&this.Rh.U.isReady()},n.prototype.Qo=function(){return this.mp},n.prototype.vJ=function(){if(this.Rh&&this.Rh.U)return this.Rh.U;throw Error("Player not ready")},n.prototype.Tfc=function(t){var e=this.rsa(t);e?this.lmb(e,t):this.yb.Ee(t.id)||this.log.error("Tried to update a non-existent segment",{segment:o(t),currentMovieId:this.Rh.G.L,queuedMovieIds:this.eG.map(function(t){return t.G.L}),xid:null==(e=this.Rh.U)?void 0:e.Nv()})},n.prototype.ng=function(t){var e;return this.log.info("Adding segment",o(t)),this.fJ?(this.log.trace("First segment, loading",p(t)),e=this.wab(t),this.fJ=!1):(this.log.trace("Subsequent segment, caching",p(t)),(e=this.rsa(t))?this.lmb(e,t):(e=this.createSession(t),this.eG.push(e),this.Rh.observe())),e?e.tec:null},n.prototype.transition=function(t,e){var i=this.mK,n=null==i?void 0:i.U;return i&&n?(this.mK=void 0,this.log.info("Transitioning segment",o(i.G)),n.DCa(this.Ga.Tb().ka(r.pa)),this.xlb(i,e)):(e=null==i?void 0:i.G,this.log.error("Transitioning to next segment failed. Session or player not available.",{mid:this.Rh.G.L,xid:null==(n=this.Rh.U)?void 0:n.Nv(),nextSegmentId:t,currentSegment:o(this.Rh.G),nextSegment:e?o(e):void 0,queuedMovieIds:this.eG.map(function(t){return t.G.L})}),Promise.reject())},n.prototype.close=function(t){var e=this;return this.log.trace("Closing all segments",{currSession:JSON.stringify(p(this.Rh.G)),nextSession:this.mK?JSON.stringify(p(this.mK.G)):void 0}),t=[this.Rh.close(t)],this.mK&&t.push(this.mK.close()),Promise.all(t).then(function(){e.mK=void 0,e.eG=[],e.fJ=!0})},n.prototype.addListener=function(t,e,i){this.Mb.addListener(t,e,i)},n.prototype.removeListener=function(t,e){this.Mb.removeListener(t,e)},n.prototype.lmb=function(t,e){this.i5b(t.G,e),this.log.trace("Overwrote existing segment data",o(t.G))},n.prototype.wab=function(t){var e,i=this;if(this.log.info("Loading the next episode",p(t)),e=this.Rh?(this.config.gta()[t.L]=t.ea,this.rsa(t)):this.createSession(t))return this.log.trace("Found the next session",p(t)),e.G4b(function(t){i.Xkb(t)}),this.Rh?(this.log.trace("Subsequent playback, caching player and pausing",p(t)),(this.mK=e).load(!0)):(this.log.trace("First playback transitioning immediately",p(t)),e.load(!1),this.xlb(e)),e;this.log.warn("Unable to find the session, make sure to add it before loading",p(t))},n.prototype.xlb=function(t,e){var i,n,r,a;return e=void 0===e?{}:e,(r=t.U?null==(i=t.U)?void 0:i.getError():"missing player")?(null!=(n=t.U)&&n.close(),this.log.error("Transitioning to next segment failed. Session is in the error state.",{srcmid:this.Rh.G.L,mid:t.G.L,error:r,xid:null==(r=t.U)?void 0:r.Nv()}),Promise.reject()):(this.log.trace("Playing episode",p(t.G)),i=this.Rh,this.Rh=t,(t=this.Rh.U).nCa(!1),this.PL(t,i?i.U:void 0),i&&i.U&&(a=i.U.Qo(),n=t.Qo(),a.style.display="none",i=i.close(),this.mp.appendChild(n),i.then(function(){a.parentElement&&a.parentElement.removeChild(a)}),n.style.display="block",t.Rfa(e),t.kS(),t.play()),Promise.resolve())},n.prototype.Xkb=function(t){var e,i,n,r,a;this.eG.length&&t.U&&(e=t.U.Kv(),i=this.eG[0],n=this.Rh.G.jk,r=!!this.Rh.G.Fb&&this.Rh.G.Fb.xba,(n||r)&&(r?a=0:n&&(a=n-this.config.N6a()),null!==e&&a<=e&&(this.log.info("Got a time change, loading the next player",p(i.G)),this.wab(i.G),this.eG.splice(0,1),this.Xkb(t))))},n.prototype.rsa=function(e){return this.Rh.G.L===e.L?this.Rh:this.eG.find(function(t){return t.G.L===e.L})},n.prototype.i5b=function(t,e){t.ea=e.ea||t.ea,t.jk=e.jk||t.jk,t.Fb=e.Fb||t.Fb,t.ja=e.ja||t.ja},n.prototype.createSession=function(t){return new a(this.log,this.config,this.PQ,this.Nza,this.Ci,this.K_,this,t,this.mp,this.yb,this.rl)},n.prototype.PL=function(e,i){this.FPb.forEach(function(t){i&&i.removeEventListener(t.event,t.oy),e.addEventListener(t.event,t.oy)}),this.Mb.Tc(l.oH.L0)},e.nSa=n},function(t,e,i){var l,r,d,p,o;function n(t,e,i,n,r,a){var o=this;this.U=e,this.j=i,this.PQ=n,this.zc=r,this.$N=a,this.vO=function(){o.QF&&(o.QF.cancel(),o.QF=void 0)},this.log=t.jb("SegmentManager",this.j),this.O=new Map,this.j.kb.$h&&(this.j.addEventListener(d.ma.ZK,function(t){return o.RF(t)}),this.j.addEventListener(d.ma.closed,this.vO))}function a(t,e){this.id=t,this.Hpa=e}function s(t,e,i,n){return r.jd.call(this,t,i,void 0,void 0,void 0,e,void 0,n)||this}_esm(e),e.LGa=void 0,l=i(4),r=i(37),d=i(16),p=i(5),o=i(20),S(s,r.jd),s.prototype.toString=function(){return this.code+"-"+this.Kc+" : "+this.message+"\n"+JSON.stringify(this.data)},a.prototype.toJSON=function(){return{id:this.id,contentStartPts:this.va,contentEndPts:this.wa}},nt.Object.defineProperties(a.prototype,{va:{configurable:!0,enumerable:!0,get(){return this.Hpa.startTimeMs}},wa:{configurable:!0,enumerable:!0,get(){return this.Hpa.endTimeMs}},lC:{configurable:!0,enumerable:!0,get(){return Object.keys(this.Hpa.next)}}}),n.prototype.RF=function(t){var i=this;t=t.position.segmentId,0===this.O.size&&Object.entries(this.j.$X()).forEach(function(t){var e=rt(t);t=e.next().value,e=e.next().value,i.O.set(t,new a(t,e))}),this.na=this.O.get(t)},n.prototype.play=function(t){return this.xR&&(this.xR=void 0),this.vO(),this.log.trace("Playing segment",t),this.b$a(t)?this.j6b(t):this.J_(t)},n.prototype.au=function(t){return this.log.trace("Queueing segment",t),this.b$a(t)?this.i8b(t):this.j8b(t)},n.prototype.Rj=function(i,n){var r=this,a=this.j.La;return null!=a&&a.Ni?(this.log.trace("Updating next segment weights",i,n),new Promise(function(t,e){try{a.IS(i,n),r.j.fireEvent(d.ma.vEa,{X:i,egc:n}),t()}catch(t){e(r.getError(l.Z.uGa,"updateNextSegmentWeights threw an exception",l.Y.Kob,{segmentId:i,updates:n,error:t}))}})):Promise.reject(this.getError(l.Z.uGa,"ASE session manager is not yet initialized",l.Y.Zga,{segmentId:i,updates:n}))},n.prototype.b$a=function(t){return!!this.na&&void 0!==this.j.$X()[this.na.id].next[t]},n.prototype.$ta=function(){var t=this.j.La;if(null!=t&&t.Ni)return t.cl().gf},n.prototype.GUb=function(){var t=this.j.La;if(null!=t&&t.Ni)return t.cl().id},n.prototype.GSb=function(t){var e=this.j.La;if(null!=e&&e.Ni)return(t=e.m$(t))&&t.bf},n.prototype.j6b=function(c){var h=this,f=this.j.La;return null!=f&&f.Ni?this.na&&1===this.na.lC.length?this.J_(c):this.j.qf?void 0===this.GSb(c)?(this.log.error("playNextSegment: branchOffset missing",{segment:c}),this.J_(c)):new Promise(function(t,e){var i,n,r,a,o,s;function u(){!r&&n&&i&&(s.cancel(),r=!0,h.log.trace("Telling ASE to choose the next segment",{id:c,stopped:n,repositioned:i,completed:r}),f.qt(c,!1,!0)?(t(),r=!0):(r=!0,h.log.error("playNextSegment: ASE chooseNextSegment failed. Falling back to full seek.",{segment:c}),h.J_(c).then(t).catch(e)))}if(r=n=i=!1,a=h.O.get(c),void 0===(o=h.$ta()))return h.log.debug("playNextSegment: getPresentingBranchPlayerEndPts undefined, fallback to full seek.",{segment:c}),h.J_(c);h.log.trace("Seeking to next segment",JSON.stringify({segmentId:c,seekTo:o,currentSegment:h.na,nextSegment:a},null,"  ")),h.j.fireEvent(d.ma.Bca,{Sh:h.na&&h.na.id,WQ:c}),f.addEventListener("stop",function t(){n=!0,h.log.trace("ASE is stopped",{id:c,stopped:n,repositioned:i,completed:r}),f.removeEventListener("stop",t),u()}),h.j.addEventListener(d.ma.OK,function t(){h.j.removeEventListener(d.ma.OK,t),f.stop()}),h.j.addEventListener(d.ma.kl,function t(){i=!0,h.log.trace("Player is repositioned",{id:c,stopped:n,repositioned:i,completed:r}),h.j.removeEventListener(d.ma.kl,t),u()}),s=h.zc.Mj(p.Fh(10),function(){r=!0,s.cancel(),e(h.getError(l.Z.eT,"Timed out waiting for the player to be repositioned and ASE to be stopped",l.Y.Gob,{id:c,stopped:n,repositioned:i,completed:r}))}),h.U.seek(o,d.Ze.CM)}):(this.log.warn("MediaPresenter is not initialized",c),Promise.reject(this.getError(l.Z.eT,"MediaPresenter is not initialized",l.Y.Hob,{id:c}))):Promise.reject(this.getError(l.Z.eT,"ASE session manager is not yet initialized",l.Y.Zga,{id:c}))},n.prototype.J_=function(t){var e=this.O.get(t);return e?this.I0(e,l.Z.eT):Promise.reject(this.getError(l.Z.eT,"Unable to find the separated segment",l.Y.tGa,{id:t}))},n.prototype.i8b=function(t){var e=this.j.La;return null!=e&&e.Ni?(this.j.fireEvent(d.ma.Bca,{Sh:this.na&&this.na.id,WQ:t}),e.qt(t,!0,!0)?Promise.resolve():(this.log.error("queueNextSegment: ASE chooseNextSegment failed - falling back to a delayed seek at the end of current segment",{segment:t}),this.s2a(t))):Promise.reject(this.getError(l.Z.fT,"ASE session manager is not yet initialized",l.Y.Zga,{id:t}))},n.prototype.j8b=function(t){return this.log.error("calls to queueSeparatedSegment are deprecated",{segment:t,mid:this.j.L,srcsegment:this.GUb()}),this.s2a(t)},n.prototype.s2a=function(n){var r,a=this;return this.xR?Promise.reject(this.getError(l.Z.fT,"Unable to queue segment for delayed seek because there is currently already a segment queued for delayed seek",l.Y.Job,{currentSegment:this.na?this.na.id:void 0,queuedSegment:this.xR.id,failedSegment:n})):this.na?(r=this.O.get(n))?(this.xR={id:n,promise:new Promise(function(t,e){var i;a.QF=a.PQ.p1a({p7a:function(){return p.vc(100)}},function(){return a.U.Kv()||0}),i=a.$ta()-o.config.wcb,a.log.trace("Adding moment for queued segment for delayed seek",{segment:n,pts:i}),a.QF.observe(i,function(){a.log.trace("Moment has arrived, seek to segment",{segment:n,currentSegment:a.na.id,playerEndPts:a.$ta(),pts:i}),a.xR=void 0,a.vO(),a.I0(r,l.Z.fT).then(t).catch(e)})})},this.xR.promise.catch(function(t){a.j.Md(t.code,t)}),Promise.resolve()):Promise.reject(this.getError(l.Z.fT,"Unable to find the separated segment",l.Y.tGa,{nextSegmentid:n,currentSegmentId:this.na.id})):Promise.reject(this.getError(l.Z.fT,"Unable to queue segment for delayed seek because there is no currently playing segment",l.Y.Fob,{nextSegmentid:n}))},n.prototype.I0=function(n,r){var a=this;return new Promise(function(t,e){var i;try{i=n.va,a.U.seek(i,d.Ze.DD),t()}catch(t){e(a.getError(r,"Seek threw an exception",l.Y.Iob,{id:n.id,error:t}))}})},n.prototype.getError=function(t,e,i,n){return this.log.warn(e,n),new s(t,e,i,n)},e.LGa=n},function(t,e,i){var n,r;function a(){}function o(t,e,i,n,r){this.debug=t,this.version=e,this.NZb=i,this.g6b=n,this.config=r}_esm(e),e.hSa=void 0,t=i(0),n=i(1),r=i(5),o.prototype.rTb=function(){return this.config().zJ},o.prototype.gta=function(){return this.config().TZa},o.prototype.p7a=function(){return r.vc(this.config().F6b)},o.prototype.N6a=function(){return this.config().W_b},o.prototype.P6a=function(){return this.config().N0b},a.prototype.mJ=function(t,e,i,n,r){return new o(t,e,i,n,r)},i=a,i=t.__decorate([n.$()],i),e.hSa=i},function(t,e,i){var n,r;function a(t){this.config=t}_esm(e),e.rTa=void 0,t=i(0),n=i(1),i=i(13),a.prototype.R7b=function(t,e,i,n){this.config().Bac&&(void 0!==(t=t.metrics)&&t.segment!==t.srcsegment&&e.yQ.sb.transition({isBranching:n||void 0,isPlaygraph:!n||void 0,mid:e.L,xid:e.ga,srcxid:i.ga,srcmid:i.L,segment:t.segment,srcsegment:t.srcsegment,srcsegmentduration:t.srcsegmentduration,srcoffset:t.srcoffset,srcvbitrate:t.srcvbitrate,srcvmaf:t.srcvmaf,destvbitrate:t.destvbitrate,destvmaf:t.destvmaf,auxMid:t.auxMid,auxMidType:t.auxMidType,auxSrcmid:t.auxSrcmid,auxSrcmidType:t.auxSrcmidType,seamlessRequested:t.seamlessRequested,transitionType:t.transitionType,transitionTypeAtRequest:t.transitionTypeAtRequest,nextExitPositionAtRequest:t.nextExitPositionAtRequest,delayToTransition:t.delayToTransition,durationOfTransition:t.durationOfTransition,atRequest:t.atRequest,atTransition:t.atTransition,discard:t.discard}))},r=a,r=t.__decorate([n.$(),t.__param(0,n.l(i.Oc))],r),e.rTa=r},function(t,e,i){var n,r;_esm(e),e.enb=void 0,t=i(1),n=i(365),r=i(750),e.enb=new t.Ad(function(t){t(n.WTa).to(r.VTa).la()})},function(t,e,i){var n,r,o,s,u,c,h,f,l,d,p,b,g,m,v,y,w,A,_,E,k,S,T,I,O,x;function a(t){this.mc=t}_esm(e),e.VTa=void 0,t=i(0),n=i(1),r=i(80),o=i(30),s=i(27),u=i(7),c=i(113),h=i(228),f=i(367),l=i(751),d=i(229),p=i(86),b=i(368),g=i(752),m=i(233),v=i(84),y=i(18),w=i(116),A=i(234),_=i(377),E=i(13),k=i(378),S=i(379),T=i(29),I=i(235),O=i(380),x=i(34),a.prototype.FO=function(t,e,i,n,r,a){return this.mc.get(E.Oc)().Xfa?new g.XTa(this.mc.get(u.ob),this.mc.get(m.Uja),this.mc.get(v.Rz),this.mc.get(y.$c),this.mc.get(w.dH),this.mc.get(c.Sha),this.mc.get(A.Xia),this.mc.get(_.sKa),this.mc.get(k.DQa),this.mc.get(S.Eka),this.mc.get(S.Eka),this.mc.get(T.Lh),this.mc.get(O.UT),this.mc.get(I.fia),this.mc.get(x.nj),n,i):new l.ILa(this.mc.get(o.ki),this.mc.get(s.Tg),this.mc.get(u.ob),this.mc.get(c.Sha),this.mc.get(h.wka),this.mc.get(d.Eja),this.mc.get(p.Rha),this.mc.get(b.mPa),this.mc.get(f.uIa),t,e,i,n,r,a)},i=a,i=t.__decorate([n.$(),t.__param(0,n.l(r.FLa))],i),e.VTa=i},function(t,e,i){var o,g,n,r,a,u;function s(t,e,i,n,r,a,o,s,u,c,h,f,l,d,p){var b=this;this.Le=t,this.Eb=e,this.Mb=n,this.qw=a,this.JW=o,this.m5a=s,this.config=c,this.Ci=f,this.G=l,this.j=h.create(l.L,l.Jj,u,d,p,l.Fb,l.id,l.ja),this.j.background=!0,this.log=i.jb("VideoPlayer",this.j),this.Heb=[],this.ended=!1,this.PL(),this.j.state.addListener(function(t){t.newValue===g.dc.Me&&b.Cb(g.Na.iwa,{movieId:l.L})}),this.j.kb.$h&&(this.jO=r.wKb(this,this.j),this.j.addEventListener(g.ma.ZK,function(t){t=t.position.segmentId,b.h_b!==t&&(b.h_b=t,b.Cb(g.Na.nac,{segmentId:t}))}))}_esm(e),e.ILa=void 0,o=i(4),g=i(16),n=i(5),r=i(14),a=i(86),u=i(25),s.prototype.isReady=function(){return this.j.state.value===g.dc.Me},s.prototype.Z6a=function(){return this.j.L},s.prototype.Nv=function(){return this.j.ga},s.prototype.Qo=function(){return this.j.mp},s.prototype.Wr=function(){return this.j.tk.value},s.prototype.hZ=function(){return this.j.paused.value},s.prototype.Pva=function(){return this.ended},s.prototype.vi=function(){var t=this.j.bpa.value;return t?{networkStalled:!!t.ou,stalled:!!t.ou,progress:t.progress,progressRollback:!!t.X7b}:null},s.prototype.getError=function(){var t=this.j.$i;return t?t.F1():null},s.prototype.Po=function(){return this.j.Po()},s.prototype.L6a=function(){return this.j.wq},s.prototype.Kv=function(){return this.j.mediaTime.value},s.prototype.C5a=function(){var t=(this.n$()||0)+this.j.B5a();return Math.min(t,this.lta())},s.prototype.n$=function(){return this.j.eF()},s.prototype.lta=function(){return this.j.Wx.ka(n.pa)},s.prototype.V7a=function(){var t=this.j.EG.value;return t?{width:t.width,height:t.height}:null},s.prototype.o$=function(){return this.j.o$()},s.prototype.l5a=function(t){var e,i;return null!=(e=this.j.ja)&&e.Cj.FP("generateScreenshots")?this.m5a.kq(this.log,this.j.ja.Cj,t):(e=null==(i=this.j.kb)?void 0:i.ip)?this.m5a.Pf(this.log,Object.assign({packageId:e},t)):Promise.reject("Unknown packageId")},s.prototype.X5a=function(){return this.VSb(this.j.C2a)},s.prototype.t5a=function(){var e=this;return this.j.wj.map(function(t){return e.Pr(t)})},s.prototype.T6a=function(){var t;return this.oY(this.j.wj,null==(t=this.j.ja)?void 0:t.hb.Fbb)},s.prototype.uua=function(t){var e=this;return this.xY(t).map(function(t){return e.Pr(t)})},s.prototype.Lta=function(t){return this.oY(this.xY(t),null==(t=this.j.ja)?void 0:t.hb.Gbb)},s.prototype.Yva=function(){return this.j.muted.value},s.prototype.W7a=function(){return this.j.volume.value},s.prototype.s5a=function(){var t=(null==(t=this.Ny)?void 0:t.Bc)||this.j.Bc.value;return t&&this.Pr(t)},s.prototype.tua=function(){var t=(null==(t=this.Ny)?void 0:t.v1)||this.j.Vb.value;return t&&this.Pr(t)},s.prototype.K9a=function(){return!!this.j.background},s.prototype.Jib=function(t){this.j.muted.set(!!t)},s.prototype.Zib=function(t){this.j.volume.set(this.w3b(t))},s.prototype.Kib=function(t){this.j.playbackRate.set(t)},s.prototype.pq=function(){return this.j.playbackRate.value},s.prototype.tib=function(t){var e,i,n,r=this,a=this.KX(t);return a?a.bj?(this.j.Bc.set(a),Promise.resolve()):(i=(t=(null==(e=this.Ny)?void 0:e.v1)||this.j.Vb.value)&&this.t$a(a,t)?t:a.Gi[0],e=a.trackId,n=i.trackId,this.Ny={Bc:a,v1:i},this.Cb(g.Na.gn),this.Cb(g.Na.Kw),i!==t&&this.Cb(g.Na.Im),this.j.N8a(e,n).then(function(t){t=t.Bc,r.Ny=void 0,r.j.Bc.set(t)}).catch(function(t){r.Ny=void 0,t=r.Le.ff(t),r.log.error(t),r.close(r.Ci(o.Z.mM,{Ba:o.Y.Pia,Sb:t,CJ:{mXb:a.trackId,O8a:a.Bf,nXb:i.trackId,P8a:i.Bf}}))})):(this.log.error("Invalid setAudioTrack call"),Promise.reject(Error("Invalid setAudioTrack call")))},s.prototype.zCa=function(t){var i=this,n=(null==(r=this.Ny)?void 0:r.Bc)||this.j.Bc.value;if(null!==n)for(var e=n.Gi,r={},a=0;a<e.length;r={zu:r.zu},a++){if(r.zu=e[a],!t&&null===r.zu)return this.j.Vb.set(null),Promise.resolve();if(this.Pr(r.zu)===t)return r.zu.bj?(this.log.info("Setting Timed Text, profile: "+r.zu.profile),this.j.Vb.set(r.zu),Promise.resolve()):(t=n.trackId,e=r.zu.trackId,this.Ny={Bc:n,v1:r.zu},this.Cb(g.Na.Im),this.j.N8a(t,e).then(function(t){t=t.v1,i.Ny=void 0,i.j.Vb.set(t)}).catch(function(e){return function(t){i.Ny=void 0,t=i.Le.ff(t),i.log.error(t),i.close(i.Ci(o.Z.mM,{Ba:o.Y.Pia,Sb:t,CJ:{mXb:n.trackId,O8a:n.Bf,nXb:e.zu.trackId,P8a:e.zu.Bf}}))}}(r)))}return this.log.error("Invalid setTextTrack call"),Promise.reject(Error("Invalid setTextTrack call"))},s.prototype.nCa=function(t){this.j.background=t},s.prototype.kS=function(){this.j.kS()},s.prototype.Rfa=function(t){this.j.Rfa(t)},s.prototype.ek=function(t){return this.j.ek(t)},s.prototype.k7a=function(){return this.j.kb},s.prototype.Jy=function(){this.j.Jy()},s.prototype.oK=function(t){this.j.oK(t)},s.prototype.HY=function(t,e,i){return this.j.HY(t,e,i)},s.prototype.Pna=function(t,e){this.j.addEventListener(t,e,void 0)},s.prototype.addEventListener=function(t,e,i){this.Mb.addListener(t,e,i)},s.prototype.removeEventListener=function(t,e){this.Mb.removeListener(t,e)},s.prototype.FK=function(){},s.prototype.load=function(){var i=this;this.loaded||(this.loaded=!0,this.j.load(function(t,e){try{i.Cb(g.Na.yab,void 0,!0),t.ja&&(t.ja.hb.vnb&&i.Cb(g.Na.lhc,t.ja.hb.vnb,!0),t.ja.hb.Co&&i.Cb(g.Na.mac,{segmentMap:t.ja.hb.Co},!0)),e({ha:!0})}catch(t){e({Ba:o.Y.Om,Sb:i.Le.ff(t)})}}))},s.prototype.close=function(e){var i=this;return this.k0a||(this.k0a=new Promise(function(t){e?i.j.HI(e,t):i.j.close(t)})),this.k0a},s.prototype.play=function(){this.j.Ui?this.j.fireEvent(g.ma.Nhb):(this.load(),this.j.paused.value&&(this.j.paused.set(!1),this.j.fireEvent(g.ma.Qmb)))},s.prototype.pause=function(){this.load(),this.j.paused.value||(this.j.paused.set(!0),this.j.fireEvent(g.ma.zgc))},s.prototype.seek=function(t,e,i,n){e=void 0===e?g.Ze.DD:e,this.j.JGb()&&(this.j.qf?this.j.qf.seek(t,e,i,n):this.j.mt=t)},s.prototype.Seb=function(t){return this.jO?(this.log.trace("Playing a segment",t),this.jO.play(t)):Promise.resolve()},s.prototype.Zfb=function(t){return this.jO?(this.log.trace("Queueing a segment",t),this.jO.au(t)):Promise.resolve()},s.prototype.Rj=function(t,e){return this.jO?(this.log.trace("Updating next segment weights",t,e),this.jO.Rj(t,e)):Promise.resolve()},s.prototype.BY=function(){var t=this.j.qp.BY();return{bounds:t.vW,margins:t.Qt,size:t.size,visibility:t.visibility}},s.prototype.bS=function(t){var e=t.bounds,i=t.margins,n=t.size;t=t.visibility,this.j.z1&&(e&&this.j.z1.ACa(e),i&&this.j.z1.BCa(i),"boolean"==typeof t&&this.j.z1.CCa(t)),this.j.qp&&n&&this.j.qp.vbc(n)},s.prototype.DCa=function(t){this.j.eo=t},s.prototype.S7a=function(t){return this.j.VC&&this.j.VC.pTb(t)||null},s.prototype.q5a=function(){return this.Le.gK({playerver:this.config.version,jssid:this.config.NZb,groupName:this.config.rTb(),xid:this.j.ga,pbi:this.j.index},this.config.g6b,{prefix:"pi_"})},s.prototype.h9a=function(t){this.j.Md(o.Z.gJa,o.Y.mo,t)},s.prototype.uab=function(t,e,i,n){if(!this.Eb.NYa(t))throw Error("invalid url");this.Heb.push({url:t,name:e,aFb:i,options:n}),this.Jfb()},s.prototype.lua=function(){var t,e,i,n,r,a,o={},s=this.j.f1;try{this.j.$i&&(o.errorCode=this.j.$i.a9,o.errorType=s?"endplay":"startplay"),o.playdelay=u.rg(this.j.AW()),o.xid=this.j.ga,this.j.ja&&this.Eb.$u(this.j.ja.hb.ip)&&(o.packageId=Number(this.j.ja.hb.ip)),o.auth=this.j.mSb(),s&&(o.totaltime=this.j.Am?this.wn(this.j.Am.Ct("content")):0,o.abrdel=this.j.Am?this.j.Am.cta():0,e=(t=this.j.qf)?t.oJ():null,this.Eb.vo(e)&&(o.totdfr=e),e=t?t.cY():null,this.Eb.vo(e)&&(o.totcfr=e),(i=t?t.DTb():null)&&(o.rbfrs_decoder=i.J8,o.rbfrs_network=i.xca),o.rbfrs_delay=this.j.Am?this.j.Am.Kva:0,o.init_vbr=this.j.Eaa,n=this.wJ(),this.Eb.SI(n)&&(o.pdltime=n),(a=(r=this.j.Ie.value)&&r.stream)&&(o.vbr=a.bitrate,o.vdlid=a.Wb),o.bufferedTime=this.j.B5a())}catch(t){this.log.error("error capturing session summary",t)}return o},s.prototype.iP=function(t){return this.j.kb.Wn&&(this.j.kb.Wn.userEngageAction=1),this.Eb.vo(this.j.mediaTime.value)?(t=Object.assign(Object.assign({},this.qw.create(this.j)),{action:t}),this.JW(a.Uq.iP).kq(this.log,this.j.ja.Cj,t).then(function(){return{success:!0}}).catch(function(t){return{success:!1,errorCode:t.code,errorSubCode:t.Kc,errorExternalCode:t.Xd,errorData:t.data,errorDetails:t.details}})):Promise.resolve({success:!1})},s.prototype.VSb=function(t){return{register:t.register.bind(t),notifyUpdated:t.udb.bind(t),getModel:t.bUb.bind(t),getGroups:t.jY.bind(t),addEventListener:t.addEventListener.bind(t),removeEventListener:t.removeEventListener.bind(t),getTime:t.getTime.bind(t)}},s.prototype.Pr=function(t){var e=t.xAa=t.xAa||{trackId:t.trackId,bcp47:t.Bf,displayName:t.displayName,trackType:t.Hi,rawTrackType:t.gG,channels:t.channels};return this.cwa(t)&&(e.isNative=t.isNative,e.surroundFormatLabel=t.o1),this.dwa(t)&&(e.isNoneTrack=t.Vr(),e.isForcedNarrative=t.uq(),e.isImageBased=t.Il),e.subType=t.tL,e.variant=t.variant,e},s.prototype.cwa=function(t){return void 0!==t.isNative},s.prototype.dwa=function(t){return void 0!==t.Vr&&void 0!==t.uq},s.prototype.KX=function(e){var i=this;return e&&this.j.wj.find(function(t){return i.Pr(t)===e})},s.prototype.xY=function(t){var e;return null!=(e=null==(t=this.KX(t)||(null==(e=this.Ny)?void 0:e.Bc)||this.j.Bc.value)?void 0:t.Gi)?e:[]},s.prototype.oY=function(t,e){var i=t.length-1;return"number"!=typeof e||-1===(t=t.findIndex(function(t){return t.cc>e}))?i:t-1},s.prototype.t$a=function(t,e){return 0<=t.Gi.indexOf(e)},s.prototype.w3b=function(t){return 0<=t?t<=1?t:1:0},s.prototype.wn=function(t){return this.Eb.vo(t)?(t/1e3).toFixed(0):""},s.prototype.Cb=function(t,e,i){((e=e||{}).target=this).Mb.Tc(t,e,!i)},s.prototype.PL=function(){var i=this;this.j.addEventListener(g.ma.NDa,function(){i.Cb(g.Na.Gr)}),this.j.EG.addListener(function(){i.Cb(g.Na.QEa)}),this.j.addEventListener(g.ma.Ulb,function(){i.Cb(g.Na.Tlb)}),this.j.addEventListener(g.ma.Uba,function(){i.Cb(g.Na.Voa)}),this.j.addEventListener(g.ma.kl,function(){i.Cb(g.Na.Voa)}),this.j.addEventListener(g.ma.ZP,function(t){i.Cb(g.Na.ZP,{errorCode:t})}),this.j.addEventListener(g.ma.yoa,function(){i.Cb(g.Na.BZa)}),this.j.addEventListener(g.ma.Ui,function(t){i.Cb(g.Na.R7,t)}),this.j.addEventListener(g.ma.tlb,function(){i.Cb(g.Na.P7),i.Cb(g.Na.Kw)}),this.j.tk.addListener(function(){i.Cb(g.Na.Uza)}),this.j.paused.addListener(function(){i.Cb(g.Na.Beb)}),this.j.muted.addListener(function(){i.Cb(g.Na.Kcb)}),this.j.volume.addListener(function(){i.Cb(g.Na.onb)}),this.j.Gb.addListener(function(){i.bmb()}),this.j.state.addListener(function(){i.bmb()}),this.j.bpa.addListener(function(t){i.X_b||i.j.state.value!=g.dc.Me||t.newValue||(i.X_b=!0,i.Cb(g.Na.loaded),setTimeout(function(){i.log.debug.bind(i.log,"summary ",i.lua())})),i.Cb(g.Na.nO)}),this.j.Bc.addListener(function(){i.Cb(g.Na.gn),i.Cb(g.Na.Kw),setTimeout(function(){var t=i.j.Bc.value,e=i.j.Vb.value;null===t||null===e||i.t$a(t,e)||(i.log.info("Changing timed text track to match audio track"),i.j.Vb.set(t.Gi[0]))},0)}),this.j.Vb.addListener(function(t){t.oldValue&&t.newValue&&t.oldValue.trackId==t.newValue.trackId||i.Cb(g.Na.Im)}),this.j.addEventListener(g.ma.Kw,function(){i.Cb(g.Na.Kw)}),this.j.addEventListener(g.ma.H1,function(){i.Cb(g.Na.H1)}),this.j.state.addListener(function(t){switch(t.newValue){case g.dc.Me:i.Cb(g.Na.wra),i.Cb(g.Na.QEa),i.Cb(g.Na.P7),i.Cb(g.Na.Kw),i.Cb(g.Na.xab),i.Jfb(),i.qhc();break;case g.dc.CLOSING:i.j.$i&&i.Cb(g.Na.D9a,i.j.$i);break;case g.dc.CLOSED:i.Cb(g.Na.closed),i.Mb.ti()}}),this.j.addEventListener(g.ma.wQ,function(){i.Cb(g.Na.wQ),i.Cb(g.Na.wra)})},s.prototype.qhc=function(){var e=this;this.j.qp.addEventListener("showsubtitle",function(t){e.Cb(g.Na.JCa,t,!0)}),this.j.qp.addEventListener("removesubtitle",function(t){e.Cb(g.Na.VAa,t,!0)}),this.j.Po().dn.addListener(function(){e.Cb(g.Na.JDb)})},s.prototype.Jfb=function(){if(this.j.state.value==g.dc.Me){for(var t,e,i;e=this.Heb.shift();)t=this.j.qp.Fna(e.url,e.name,e.options),e.aFb&&(i=t);i&&this.j.Vb.set(i)}},s.prototype.bmb=function(){var t=this.j.state.value==g.dc.Me&&this.j.Gb.value==g.rb.Gs;this.ended!==t&&(this.ended=t,this.j.pI("Ended changed: "+t),!t&&this.j.state.value!==g.dc.CLOSING||this.Cb(g.Na.L3a))},s.prototype.wJ=function(){var e,t;try{if(e=/playercore.*js/,(t=r.gx.getEntriesByType("resource").filter(function(t){return null!==e.exec(t.name)}))&&0<t.length)return JSON.stringify(Math.round(t[0].duration))}catch(t){}},e.ILa=s},function(t,e,i){var v,y,w,n,r,a,o,A,s,u,c,h,_;function f(t,e,i,n,r,a,o,s,u,c,h,f,l,d,p,b,g){var m=this;this.N_=e,this.KB=i,this.Ga=n,this.kk=r,this.Mb=a,this.JZ=o,this.B6b=s,this.Web=u,this.ega=c,this.O7=h,this.Da=f,this.zQ=l,this.config=d,this.kE=p,this.G=b,this.Ci=g,this.BZ=new A.$b(!0),this.tk=new A.$b(!1),this.ou=new A.$b(!1),this.ended=new A.$b(!1),this.c8=new A.$b(0),this.Gb=new A.$b(v.rb.fg),this.IR=new A.$b(void 0),this.loaded=this.f1=this.closed=!1,this.xfb=function(o,s){return function(t){var e,i,n,r=t.newValue,a=r.Ao;t=r.kn,e=r.stream,i=(r=o.value).streams.find(function(t){return t.bitrate===e.stream.bitrate}),n=m.Ca.Jg.find(function(t){return t.id===a}),m.log.info("Presenting "+i.type+" request with bitrate "+i.bitrate+", track "+r.trackId+" ["+t.startTime+"..."+t.endTime+"]"),s.set({stream:i,kn:t,xc:n})}},this.fkb=function(n,r,a){return function(e){var t=n.value,i=t.streams.find(function(t){return t.bitrate===e.newValue.stream.bitrate});m.log.info("Streaming "+i.type+" stream with bitrate "+i.bitrate+", track "+t.trackId),r.set(i,{FI:e.Vk.FI,tW:void 0}),t=m.Ca.Jg.filter(function(t){return t.id===e.Vk.Ao})[0],a.set(t)}},this.E4a=new Set,this.log=t.jb("HLSVideoPlayer"),this.ca=y.createElement("VIDEO","position:absolute;width:100%;height:100%"),this.ca.playsInline=this.config.ifb,this.Ca=this.N_(w.BD.index++,b.L,b.id,null!=(e=b.Fb)?e:{},this.KB.hB(),this.Ga.Tb(),!1,void 0,function(){return m.Kv()}),this.Ca.mediaTime.set(null!=(i=this.Ca.mt)?i:0),this.PL(),this.ezb=this.zQ.create(this),this.ezb,this.load()}_esm(e),e.XTa=void 0,v=i(16),y=i(40),w=i(61),n=i(100),r=i(57),a=i(4),o=i(60),A=i(70),s=i(5),u=i(15),c=i(101),h=i(25),_=i(49),f.prototype.Fdc=function(){return!!this.ca.canPlayType&&(""!==this.ca.canPlayType("application/vnd.apple.mpegURL")||""!==this.ca.canPlayType("audio/mpegurl"))},f.prototype.PL=function(){var e=this;this.ca.addEventListener("loadedmetadata",function(){e.Cb(v.Na.yab),e.Cb(v.Na.xab),e.Cb(v.Na.gn),e.Cb(v.Na.P7),e.Cb(v.Na.Im),e.Cb(v.Na.Kw)}),this.ca.addEventListener("error",function(t){t=e.Ci(a.Z.NOa,t),e.close(t)}),this.ca.addEventListener("timeupdate",function(){e.ended.set(!1),e.Ca.mediaTime.set(e.Kv()),e.dra(),e.Cb(v.Na.Gr),e.Cb(v.Na.Tlb)}),this.ca.addEventListener("durationchange",function(){e.Cb(v.Na.wra)}),this.ca.addEventListener("resize",function(){e.Cb(v.Na.QEa)}),this.ca.addEventListener("playing",function(){e.dra(),e.ou.set(!1),e.tk.set(!0),e.ended.set(!1),e.Gb.set(v.rb.Gc)}),this.ca.addEventListener("pause",function(){e.tk.set(!1),e.ou.set(!1),e.Gb.set(v.rb.Ug)}),this.ca.addEventListener("waiting",function(){e.Gb.set(v.rb.fg)}),this.ca.addEventListener("stalled",function(){e.ou.set(!0)}),this.ca.addEventListener("seeking",function(){e.ou.set(!1),e.IR.set(e.Ca.mediaTime.value),e.Gb.set(v.rb.fg)}),this.ca.addEventListener("seeked",function(){void 0!==e.IR.value&&(e.Ca.Am.Dya(e.IR.value,e.Kv()),e.IR.set(void 0)),e.Gb.set(e.Wr()?v.rb.Gc:v.rb.Ug)}),this.ca.addEventListener("progress",function(){e.Cb(v.Na.Voa),e.Afc()}),this.ca.addEventListener("ended",function(){e.Gb.set(v.rb.Gs),e.ou.set(!1),e.tk.set(!1),e.ended.set(!0)}),this.ca.addEventListener("volumechange",function(){e.Cb(v.Na.onb),e.Cb(v.Na.Kcb)}),this.tk.addListener(function(){e.Cb(v.Na.Uza),e.Cb(v.Na.Beb),e.xO()}),this.c8.addListener(function(){e.Cb(v.Na.nO)}),this.ou.addListener(function(){e.Cb(v.Na.nO)}),this.BZ.addListener(function(){e.xO()}),this.ended.addListener(function(){e.Cb(v.Na.L3a)}),this.Ca.playbackRate.addListener(function(t){e.ca.playbackRate=t.newValue})},f.prototype.xO=function(){!this.Wr()||this.BZ.value||this.f1||this.AZa||(this.f1=!0,this.Ca.QB=this.Da.cL,this.Web.Hq(this,this.Ca))},f.prototype.AW=function(){return this.M_-(this.Ca.Jj.ka(s.pa)+this.Ga.UB.ka(s.pa))},f.prototype.lJ=function(){var t=this.Ca.kb.HS;return u.Oa(t)?t:this.Ca.Jj.ka(s.pa)+this.Ga.UB.ka(s.pa)},f.prototype.ipa=function(){return this.Da.Ef.ka(s.pa)-this.lJ()},f.prototype.kpa=function(){return this.M_-this.lJ()},f.prototype.Afc=function(){var t=this.ca.readyState<=o.Ap.c4.HAVE_METADATA?0:this.ca.readyState<=o.Ap.c4.HAVE_CURRENT_DATA?.5:1;1==t&&(this.M_=this.Da.Ef.ka(s.pa),this.BZ.set(!1),this.wsa(v.Na.loaded)),this.c8.set(t)},f.prototype.dra=function(){var t=this.Kv();this.ega.wib(t),this.O7.wib(t)},f.prototype.O0=function(){var m=this;return this.Ca.Se("ats"),this.kk.rJ({ga:this.Ca.ga,kb:this.Ca.kb,N:this.Ca.L,Fv:n.ko.a5,wg:r.Li.Zq}).then(function(t){var e;function r(t){var e=t;t&&t.Vr()&&!t.uq()&&(e=null),m.Ca.uj.set(e)}return m.Ca.Se("at"),e=m.JZ.create({}).veb(t),m.Ca.ja=t,m.Ca.Sc=e,m.ca.audioTracks.addEventListener("addtrack",function(){m.nmb(m.Ca.Bc.value)}),m.ca.audioTracks.addEventListener("change",function(){for(var t,e={},i=rt(m.ca.audioTracks),n=i.next();!n.done;e={YS:e.YS},n=i.next())e.YS=n.value,e.YS.enabled&&e.YS.label!==(null==(t=m.Ca.Bc.value)?void 0:t.displayName)&&(n=null!=(t=m.Ca.wj.find(function(e){return function(t){return t.displayName===e.YS.label}}(e)))?t:null,m.Ca.Bc.set(n))}),m.Ca.Bc.addListener(function(t){m.nmb(t.newValue),m.Cb(v.Na.gn),m.Cb(v.Na.Kw)}),m.ca.textTracks.addEventListener("addtrack",function(){m.omb(m.Ca.Vb.value)}),m.ca.textTracks.addEventListener("change",function(){for(var t,e=m.ca.textTracks,i={},n=0;n<e.length;i={ZS:i.ZS},n++)i.ZS=e[n],"showing"===i.ZS.mode&&i.ZS.label!==(null==(t=m.Ca.Vb.value)?void 0:t.displayName)&&(t=null!=(t=m.Ca.Gi.find(function(e){return function(t){return t.displayName===e.ZS.label}}(i)))?t:null,m.Ca.Vb.set(t),r(t))}),m.Ca.Vb.set(e.dX),r(e.dX),m.Ca.Vb.addListener(function(t){m.omb(t.newValue),m.Cb(v.Na.Im)}),m.B6b.Wi(t,function(t){return m.Ca.Se(t)})}).then(function(t){var i,e,n,r,a,o,s,u,c,h,f,l,d,p,b=t.H0b,g=t.UGb;t=t.Ycc,i=t.audio,e=t.h2a,n=t.video,a=(r=m.Ca).Qh,o=r.Bc,s=r.wj,u=r.tf,c=r.Jh,t=r.mt,h=r.Ie,f=r.Rf,l=r.Am,(r=r.Sc).wj=s.filter(function(e){return i.find(function(t){return t.track.Ng===e.trackId})}),c.set(r.S8),o.set(s.find(function(t){return t.trackId===e})),d=(r=n[0]).stream,p=(s=i.find(function(t){return t.track.Ng===e})).stream,m.XY=d.bitrate,m.ega.aAa.addListener(m.xfb(c,h)),m.ega.vDa.addListener(m.fkb(c,u,m.Ca.xc[_.u.J])),u=g.get(d.hq).tR.Bo,m.ega.xa(n,r,u),m.O7.aAa.addListener(m.xfb(o,f)),m.O7.vDa.addListener(m.fkb(o,a,m.Ca.xc[_.u.P])),g=g.get(p.hq).tR.Bo,m.O7.xa(i,s,g),m.ca.src=b,m.ca.currentTime=(null!=t?t:0)/1e3,m.ca.load(),l.Dya(0,t&&0<t?t:1)}).catch(function(t){var e;t instanceof Error&&(e=h.ff(t),m.log.error("uncaught exception",t,e)),m.close(m.Ci(null!=(e=t.code)?e:a.Z.GTa,t))})},f.prototype.omb=function(t){for(var e,i=this.ca.textTracks,n=0;n<i.length;n++)(e=i[n]).label===t.displayName&&"showing"!==e.mode&&(e.mode="showing"),e.label!==t.displayName&&"showing"===e.mode&&(e.mode="hidden")},f.prototype.nmb=function(t){for(var e=rt(this.ca.audioTracks),i=e.next();!i.done;i=e.next())(i=i.value).label!==t.displayName||i.enabled||(i.enabled=!0),i.label!==t.displayName&&i.enabled&&(i.enabled=!1)},f.prototype.Po=function(){},f.prototype.L6a=function(){},f.prototype.Kv=function(){return Math.floor(1e3*this.ca.currentTime)},f.prototype.n$=function(){return this.Kv()},f.prototype.lta=function(){return Math.floor(1e3*this.ca.duration)},f.prototype.Z6a=function(){return this.G.L},f.prototype.Nv=function(){return this.Ca.ga},f.prototype.Qo=function(){return this.ca},f.prototype.isReady=function(){return null===this.vi()},f.prototype.Wr=function(){return this.tk.value},f.prototype.hZ=function(){return!this.tk.value},f.prototype.Pva=function(){return this.ca.ended},f.prototype.vi=function(){return 1!==this.c8.value?{stalled:this.ou.value,progress:this.c8.value,progressRollback:!1}:null},f.prototype.getError=function(){var t;return null!=(t=null==(t=this.$i)?void 0:t.F1())?t:null},f.prototype.C5a=function(){return 1===this.ca.buffered.length?1e3*this.ca.buffered.end(0):null},f.prototype.V7a=function(){return{width:this.ca.videoWidth,height:this.ca.videoHeight}},f.prototype.Yva=function(){return this.ca.muted},f.prototype.W7a=function(){return this.ca.volume},f.prototype.Jib=function(t){this.ca.muted=t},f.prototype.Zib=function(t){this.ca.volume=t},f.prototype.addEventListener=function(t,e,i){this.Mb.addListener(t,e,i)},f.prototype.removeEventListener=function(t,e){this.Mb.removeListener(t,e)},f.prototype.load=function(){var e=this;this.loaded||(this.loaded=!0,this.kE.AZ(function(t){e.Fdc()?t.ha?e.O0():e.close(e.Ci(t.errorCode||a.Z.mia,t)):e.close(e.Ci(a.Z.Orb))}))},f.prototype.close=function(t){return this.closed?Promise.resolve():(this.Ca.mediaTime.set(this.Kv()),this.dra(),this.Ca.QW=this.n$(),this.closed=!0,this.ca.removeAttribute("src"),this.ca.load(),null!=t&&t.Mib(!this.BZ.value),(this.$i=t)&&this.Cb(v.Na.error,t.F1()),this.Cb(v.Na.closed),this.Web.h1(this.Ca))},f.prototype.play=function(){var e=this,t=this.ca.play();this.AZa=!1,t&&t.then(function(){e.wsa(v.Na.BZa)}).catch(function(t){e.Cb(v.Na.nO),"NotAllowedError"===t.name&&(e.log.warn("Playback is blocked by the browser settings",t),e.AZa=!0,e.Ui=!0,e.wsa(v.Na.R7,{player:{play:function(){return e.play()}}}))})},f.prototype.Cb=function(t,e,i){((e=e||{}).target=this).Mb.Tc(t,e,!i)},f.prototype.wsa=function(t,e){this.E4a.has(t)||(this.E4a.add(t),this.Cb(t,e,void 0))},f.prototype.pause=function(){this.ca.pause()},f.prototype.seek=function(t){this.ca.currentTime=t/1e3},f.prototype.h9a=function(t){this.close(this.Ci(a.Z.gJa,a.Y.mo,t))},f.prototype.pq=function(){return this.Ca.playbackRate.value},f.prototype.Kib=function(t){this.Ca.playbackRate.set(t)},f.prototype.t5a=function(){var e=this;return this.Ca.wj.map(function(t){return e.Pr(t)})},f.prototype.uua=function(t){var e=this;return this.xY(t).map(function(t){return e.Pr(t)})},f.prototype.s5a=function(){var t=this.Ca.Bc.value;return t&&this.Pr(t)},f.prototype.tua=function(){var t=this.Ca.Vb.value;return t&&this.Pr(t)},f.prototype.tib=function(t){return(t=this.KX(t))&&t.bj?(this.Ca.Bc.set(t),Promise.resolve()):(this.log.error("Invalid setAudioTrack call"),Promise.reject(Error("Invalid setAudioTrack call")))},f.prototype.zCa=function(e){var i=this,t=this.Ca.Gi.find(function(t){return i.Pr(t)===e});return t&&t.bj?(this.Ca.Vb.set(t),this.Ca.uj.set(t),Promise.resolve()):(this.log.error("Invalid setTextTrack call"),Promise.reject(Error("Invalid setTextTrack call")))},f.prototype.T6a=function(){var t;return this.oY(this.Ca.wj,null==(t=this.Ca.ja)?void 0:t.hb.Fbb)},f.prototype.Lta=function(t){return this.oY(this.xY(t),null==(t=this.Ca.ja)?void 0:t.hb.Gbb)},f.prototype.Pr=function(t){var e=t.xAa=t.xAa||{trackId:t.trackId,bcp47:t.Bf,displayName:t.displayName,trackType:t.Hi,rawTrackType:t.gG,channels:t.channels};return this.cwa(t)&&(e.isNative=t.isNative,e.surroundFormatLabel=t.o1),this.dwa(t)&&(e.isNoneTrack=t.Vr(),e.isForcedNarrative=t.uq(),e.isImageBased=t.Il),e.subType=t.tL,e.variant=t.variant,e},f.prototype.cwa=function(t){return void 0!==t.isNative},f.prototype.dwa=function(t){return void 0!==t.Vr&&void 0!==t.uq},f.prototype.KX=function(e){var i=this;return e&&this.Ca.wj.find(function(t){return i.Pr(t)===e})},f.prototype.xY=function(t){return null!=(t=null==(t=this.KX(t)||this.Ca.Bc.value)?void 0:t.Gi)?t:[]},f.prototype.oY=function(t,e){var i=t.length-1;return"number"!=typeof e||-1===(t=t.findIndex(function(t){return t.cc>e}))?i:t-1},f.prototype.Rfa=function(t){this.Ca.kb=c.bca(this.Ca.kb,t)},f.prototype.ek=function(t){if(t!==this.Ca.X)throw Error("Unknown segmentId "+t);return this.Ca},f.prototype.k7a=function(){return this.Ca.kb},f.prototype.Pna=function(){},f.prototype.Jy=function(){},f.prototype.oK=function(){},f.prototype.HY=function(){return Promise.reject()},f.prototype.lua=function(){return{}},f.prototype.o$=function(){},f.prototype.q5a=function(){return{}},f.prototype.nCa=function(){},f.prototype.kS=function(){},f.prototype.K9a=function(){return!1},f.prototype.X5a=function(){return{addEventListener:function(){},removeEventListener:function(){},getGroups:function(){return[]},register:function(){},notifyUpdated:function(){},getModel:function(){},getTime:function(){return 0}}},f.prototype.iP=function(){return Promise.resolve({success:!0})},f.prototype.S7a=function(){},f.prototype.BY=function(){},f.prototype.bS=function(){},f.prototype.DCa=function(){},f.prototype.uab=function(){},f.prototype.l5a=function(){return Promise.reject()},f.prototype.Seb=function(){return Promise.reject()},f.prototype.Zfb=function(){return Promise.reject()},f.prototype.Rj=function(){return Promise.reject()},f.prototype.FK=function(){},e.XTa=f},function(t,e,i){var r;e=i(148),r=i(754),i=e(function(n,t,e){return r(function(t,e,i){return n(e,i)},t,e)}),t.exports=i},function(t,e,i){var a,o;e=i(148),a=i(369),o=i(755),i=e(function n(r,t,e){return o(function(t,e,i){return a(e)&&a(i)?n(r,e,i):r(t,e,i)},t,e)}),t.exports=i},function(t,e,i){var a;e=i(148),a=i(230),i=e(function(t,e,i){var n,r={};for(n in e)a(n,e)&&(r[n]=a(n,i)?t(n,e[n],i[n]):e[n]);for(n in i)a(n,i)&&!a(n,r)&&(r[n]=i[n]);return r}),t.exports=i},function(t,e,i){e=i(370),i=i(765)([e,i=i(775)]),t.exports=i},function(t){t.exports=function(t){return"function"==typeof t["@@transducer/step"]}},function(t){t.exports=function(t,e){for(var i=0,n=e.length,r=[];i<n;)t(e[i])&&(r[r.length]=e[i]),i+=1;return r}},function(t,e,i){var n,r;e=i(126),n=i(372),r=i(760),i=e(function(t){return!!n(t)||!(!t||"object"!=typeof t||r(t))&&(1===t.nodeType?!!t.length:0===t.length||0<t.length&&(t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1)))}),t.exports=i},function(t){t.exports=function(t){return"[object String]"===Object.prototype.toString.call(t)}},function(t){i.prototype["@@transducer/init"]=function(){throw Error("init not implemented on XWrap")},i.prototype["@@transducer/result"]=function(t){return t},i.prototype["@@transducer/step"]=function(t,e){return this.f(t,e)};var e=i;function i(t){this.f=t}t.exports=function(t){return new e(t)}},function(t,e,i){var n=i(232);e=i(53)(function(t,e){return n(t.length,function(){return t.apply(e,arguments)})}),t.exports=e},function(t,e,i){var n,r;function a(t,e){this.h2=e,this.f=t}e=i(53),n=i(373),a.prototype["@@transducer/init"]=n.xa,a.prototype["@@transducer/result"]=n.result,a.prototype["@@transducer/step"]=function(t,e){return this.f(e)?this.h2["@@transducer/step"](t,e):t},r=a,i=e(function(t,e){return new r(t,e)}),t.exports=i},function(t,e,i){var n=i(230),r=Object.prototype.toString;t.exports=function(){return"[object Arguments]"===r.call(arguments)?function(t){return"[object Arguments]"===r.call(t)}:function(t){return n("callee",t)}}},function(t,e,i){var n;e=i(126),n=i(766),i=e(function(t){return n(function(){return Array.prototype.slice.call(arguments,0)},t)}),t.exports=i},function(t,e,i){var r,a,o,s,u;e=i(53),r=i(375),a=i(376),o=i(768),s=i(769),u=i(774),i=e(function(t,n){return a(u(o,0,s("length",n)),function(){var e=arguments,i=this;return t.apply(i,r(function(t){return t.apply(i,e)},n))})}),t.exports=i},function(t,e,i){var c,h;c=i(232),h=i(179),t.exports=function a(o,s,u){return function(){for(var t,e=[],i=0,n=o,r=0;r<s.length||i<arguments.length;)r<s.length&&(!h(s[r])||arguments.length<=i)?t=s[r]:(t=arguments[i],i+=1),e[r]=t,h(t)||--n,r+=1;return n<=0?u.apply(this,e):c(n,a(o,e,u))}}},function(t,e,i){e=i(53)(function(t,e){return t<e?e:t}),t.exports=e},function(t,e,i){var n,r;e=i(53),n=i(770),r=i(772),i=e(function(t,e){return n(r(t),e)}),t.exports=i},function(t,e,i){var n,r,a,o,s,u;e=i(53),n=i(371),r=i(375),a=i(231),o=i(771),s=i(376),u=i(374),i=e(n(["fantasy-land/map","map"],o,function(i,n){switch(Object.prototype.toString.call(n)){case"[object Function]":return s(n.length,function(){return i.call(this,n.apply(this,arguments))});case"[object Object]":return a(function(t,e){return t[e]=i(n[e]),t},{},u(n));default:return r(i,n)}})),t.exports=i},function(t,e,i){var n,r;function a(t,e){this.h2=e,this.f=t}e=i(53),n=i(373),a.prototype["@@transducer/init"]=n.xa,a.prototype["@@transducer/result"]=n.result,a.prototype["@@transducer/step"]=function(t,e){return this.h2["@@transducer/step"](t,this.f(e))},r=a,i=e(function(t,e){return new r(t,e)}),t.exports=i},function(t,e,i){var n;e=i(53),n=i(773),i=e(function(t,e){return n([t],e)}),t.exports=i},function(t,e,i){e=i(53)(function(t,e){for(var i=0;i<t.length;){if(null==e)return;e=e[t[i]],i+=1}return e}),t.exports=e},function(t,e,i){i=i(148)(i=i(231)),t.exports=i},function(t,e,i){var n,r=i(776);e=i(53),n=i(370),i=e(function(t,e){return n(r(t),e)}),t.exports=i},function(t){t.exports=function(t){return function(){return!t.apply(this,arguments)}}},function(t,e,i){var n,r=i(778);e=i(148),n=i(779),i=e(function(t,e,i){return n(t,r(e,i))}),t.exports=i},function(t){t.exports=function(t,e){for(var i=(t=t||[]).length,n=(e=e||[]).length,r=[],a=0;a<i;)r[r.length]=t[a],a+=1;for(a=0;a<n;)r[r.length]=e[a],a+=1;return r}},function(t,e,i){var o=i(780);e=i(53)(function(t,e){for(var i,n=0,r=e.length,a=[];n<r;)i=e[n],o(t,i,a)||(a[a.length]=i),n+=1;return a}),t.exports=e},function(t){t.exports=function(t,e,i){for(var n=0,r=i.length;n<r;){if(t(e,i[n]))return!0;n+=1}return!1}},function(t,e,i){e=i(53)(function(t,e){for(var i=[],n=0,r=e.length;n<r;){for(var a=n+1;a<r&&t(e[a-1],e[a]);)a+=1;i.push(e.slice(n,a)),n=a}return i}),t.exports=e},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,d,p,b,g,m,v,y,w,A,_;_esm(e),e.J8a=void 0,t=i(1),n=i(381),r=i(783),a=i(383),o=i(784),s=i(377),u=i(828),c=i(392),h=i(830),f=i(378),l=i(831),d=i(379),p=i(832),b=i(477),g=i(235),m=i(1163),v=i(393),y=i(1164),w=i(1165),A=i(380),_=i(1167),e.J8a=new t.Ad(function(t){t(n.EKa).to(r.DKa).la(),t(a.IKa).to(o.HKa).la(),t(s.sKa).to(u.rKa).la(),t(c.uKa).to(h.tKa).la(),t(v.sHa).to(y.rHa).la(),t(f.DQa).to(l.CQa).la(),t(d.Eka).to(p.OSa),t(b.RT).to(w.QT),t(A.UT).to(_.TT),t(g.fia).to(m.LKa)})},function(t,e,i){var n,r,a,o;function s(t,e){this.gXb=t,this.log=e.jb("HeaderFetcherImpl")}_esm(e),e.DKa=void 0,t=i(0),n=i(1),r=i(7),a=i(382),o=i(71),s.prototype.download=function(t){var i,n,r,a,o;return i=this,n=t.urls,r=t.offset,a=t.length,o=0,this.V2a(n[o].url,r,a).catch(function t(e){if(o<n.length-1)return o++,i.V2a(n[o].url,r,a).catch(t);throw e})},s.prototype.V2a=function(t,e,i){return this.gXb.download({url:t,withCredentials:!1,responseType:o.ResponseType.Tob,KE:"hls_headers",vu:!0,offset:e,length:i,ku:o.lja},{Jbb:1})},i=s,i=t.__decorate([n.$(),t.__param(0,n.l(a.OKa)),t.__param(1,n.l(r.ob))],i),e.DKa=i},function(t,e,i){var n,r,a;function o(t){this.Aa=t.jb("HeaderParserImpl")}_esm(e),e.HKa=void 0,t=i(0),n=i(1),r=i(72),i=i(7),o.prototype.parse=function(t,e,i){if((t=new r.ex(this.Aa,{mediaType:t},e,["sidx"]).parse()).Ly&&t.da)return this.s7(t.da,i)},o.prototype.s7=function(i,n){var r=0,a=0,o=0,s=i.offset,u=[];return i.te.forEach(function(t,e){a+=t,o+=i.sizes[e],(1e3*a/i.aa>=n||e===i.te.length-1)&&(u.push({duration:a/i.aa,ea:r/i.aa,byteOffset:s,YFb:o}),r+=a,s+=o,o=a=0)}),u},a=o,a=t.__decorate([n.$(),t.__param(0,n.l(i.ob))],a),e.HKa=a},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),n=i(21),r=i(24).dg,n.__extends(a,r),a.prototype.parse=function(){return this.Eh(),this.Zc=1===this.version?this.Zy([{creationTime:"int64"},{modificationTime:"int64"},{aa:"int32"},{duration:"int64"}]):this.Zy([{creationTime:"int32"},{modificationTime:"int32"},{aa:"int32"},{duration:"int32"}]),!0},a.lf="mvhd",a.qd=!1,e.default=a},function(t,e,i){var n,r,a;function o(){return null!==a&&a.apply(this,arguments)||this}_esm(e),n=i(21),r=i(149),a=i(24).dg,n.__extends(o,a),o.prototype.dJ=function(t){var e;return t&&t.oa&&!t.U4b&&(e=(e=this.Nq("mdia"))&&e.Nq("mdhd"))&&e.aa!==t.oa.aa&&(t.oa=new r.M(t.oa).Rg(e.aa)),!0},o.lf="trak",o.qd=!0,e.default=o},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),n=i(21),r=i(24).dg,n.__extends(a,r),a.prototype.parse=function(t){var e;return this.Eh(),e=(e=1===this.version?[{creationTime:"int64"},{modificationTime:"int64"},{trackId:"int32"},{offset:32,type:"offset"},{duration:"int64"}]:[{creationTime:"int32"},{modificationTime:"int32"},{trackId:"int32"},{offset:32,type:"offset"},{duration:"int32"}]).concat({offset:64,type:"offset"},{rqc:"int16"},{ync:"int16"},{volume:"int16"},{offset:16,type:"offset"},{offset:288,type:"offset"},{width:"int32"},{height:"int32"}),this.Zc=this.Zy(e),this.Zc.Zsc=!!(1&this.flags),this.Zc.$sc=!!(2&this.flags),this.Zc.atc=!!(4&this.flags),this.Zc.btc=!!(8&this.flags),this.R.console.trace("Finished parsing track box"),null!=t&&t.rf&&(t.rf.width=this.Zc.width,t.rf.height=this.Zc.height),t&&t.pl&&(t.pl[this.Zc.trackId]={}),!0},a.lf="tkhd",a.qd=!1,e.default=a},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),n=i(21),r=i(24).dg,n.__extends(a,r),a.prototype.parse=function(){return this.Eh(),this.Zc=this.Zy(1===this.version?[{$4a:"int64"}]:[{$4a:"int32"}]),!0},a.lf="mehd",a.qd=!1,e.default=a},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),n=i(21),r=i(24).dg,n.__extends(a,r),a.prototype.parse=function(t){return this.Zc=this.Zy([{YWb:"int32"},{Ngc:"int32"}]),null!=t&&t.rf&&(t.rf.Jpc=this.Zc.YWb,t.rf.otc=this.Zc.Ngc),!0},a.lf="pasp",a.qd=!1,e.default=a},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),n=i(21),r=i(24).dg,n.__extends(a,r),a.prototype.parse=function(){return this.Zc=this.Zy([{Snc:"int32"},{maxBitrate:"int32"},{S7:"int32"}]),!0},a.lf="btrt",a.qd=!1,e.default=a},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),n=i(21),r=i(24).dg,n.__extends(a,r),a.prototype.parse=function(){for(this.R.yC(),this.R.yC(),this.cqa=[];this.R.offset<=this.byteOffset+this.byteLength-4;)this.cqa.push(this.R.yC());return!0},a.lf="ftyp",a.qd=!1,e.default=a},function(t,e,i){var n,r,a;function o(){return null!==a&&a.apply(this,arguments)||this}_esm(e),n=i(21),r=i(87),a=i(24).dg,n.__extends(o,a),o.prototype.parse=function(t){var e;return this.Eh(),this.Zc=this.Zy([{Grc:"int32"},{Iua:"int32"},{offset:96,type:"offset"},{name:"string"}]),this.Zc.Iua=r.GH(this.Zc.Iua),t&&t.pl&&"number"==typeof(e=null==(e=null==(e=null==(e=null==(e=this.parent)?void 0:e.parent)?void 0:e.dy("tkhd"))?void 0:e.Zc)?void 0:e.trackId)&&t.pl[e]&&(t.pl[e].oy=this.Zc.Iua),!0},o.lf="hdlr",o.qd=!1,e.default=o},function(t,e,i){var n,r,a,o,s,u;function c(){return null!==u&&u.apply(this,arguments)||this}_esm(e),n=i(21),r=i(103),a=i(149),o=i(180),t=i(24),s=i(88),u=t.dg,n.__extends(c,u),c.prototype.parse=function(){return this.Eh(),this.lP=this.R.ic(),!0},c.prototype.dJ=function(t){var e=Object.keys(this.oe);return e.length&&(e=e[0],this.oe[e].length&&((e=this.oe[e][0])instanceof o.default?this.oa=new a.M(e.iJ,e.samplerate):e instanceof s.default&&(e=e.oe[r.gja])&&e.length&&(1e3!==(e=e[0].Zc).rv&&1001!==e.rv||0!=e.lw%1e3?this.R.console.warn("Unexpected frame rate in NetflixFrameRateBox: "+e.lw+"/"+e.rv):this.oa=new a.M(e.rv,e.lw)),t&&this.oa&&(t.oa=this.oa))),!0},c.prototype.Sgb=function(t){void 0!==this.oe[t]&&0!==this.oe[t].length&&(this.Xb.Sw(this.lP-1,this.byteOffset+12),t=this.oe[t][0],this.Sn(t.byteLength,t.byteOffset))},c.lf="stsd",c.qd=!0,e.default=i=c},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),n=i(21),r=i(24).dg,n.__extends(a,r),a.prototype.parse=function(){return this.KRb=this.R.Hd(2),this.JFb=this.R.Hd(5),this.KFb=this.R.Hd(3),this.wCb=this.R.Hd(3),this.R.Hd(1),this.R.Hd(5),this.R.Hd(5),!0},a.lf="dac3",e.default=a},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),n=i(21),r=i(24).dg,n.__extends(a,r),a.prototype.parse=function(t){var e,i=this.R.mh();for(this.U1a=i>>3,this.v3b=7&i,this.rdc=[],i=0;i<this.v3b;i++)0<(e={KRb:this.R.Hd(2),JFb:this.R.Hd(5),KFb:this.R.Hd(5),wCb:this.R.Hd(3),tqc:this.R.Hd(1),u3b:this.R.Hd(4)}).u3b?e.aoc=this.R.Hd(9):this.R.Hd(1),this.rdc.push(e);return t&&t.fOb&&(t.fOb.U1a=this.U1a),!0},a.lf="dec3",e.default=a},function(t,e,i){var n,r,a;function o(){return null!==a&&a.apply(this,arguments)||this}_esm(e),n=i(21),r=i(24),a=r.dg,n.__extends(o,a),o.prototype.parse=function(t){return this.Eh(),this.QBa=this.R.yC(),r.S&&this.R.console.trace("SchemeTypeBoxTranslator: "+this.QBa),"cenc"===this.QBa?(this.R.offset-=4,r.S&&this.R.console.trace("SchemeTypeBoxTranslator: writing type piff at offset "+this.R.offset),this.Xb.Bnb("piff"),null!=t&&t.rf&&(t.rf.nPb="piff")):null!=t&&t.rf&&(t.rf.nPb=this.QBa),this.R.ic(),!0},o.lf="schm",o.qd=!1,e.default=o},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),n=i(21),r=i(24).dg,n.__extends(a,r),a.prototype.parse=function(t){var e;return this.R.Gd(),this.pob=this.R.Gd(),this.R.Gd(),this.R.Gd(),this.R.Gd(),this.Zea=this.Tma(31&this.R.Gd()),this.nfb=this.Tma(this.R.Gd()),this.vR=this.Zea.length?this.Zea[0][1]:this.pob,this.VWa=this.R.offset,this.startOffset+this.length<this.R.offset&&(100===this.vR||110===this.vR||122===this.vR||144===this.vR)&&(this.R.Gd(),this.R.Gd(),this.Tma(this.R.Gd())),0<(e=this.startOffset+this.length-this.VWa)&&this.Sn(e,this.VWa),t&&t.Boa&&(t.Boa.Zea=this.Zea,t.Boa.nfb=this.nfb,t.Boa.vR=this.vR),!0},a.prototype.Tma=function(t){for(var e,i=[],n=0;n<t;++n)e=this.R.mh(),i.push(this.R.Rda(e));return i},a.lf="avcC",a.qd=!1,e.default=a},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),n=i(21),r=i(24).dg,n.__extends(a,r),a.prototype.parse=function(t){return this.R.Hd(1),this.R.Hd(7),this.hib=this.R.Hd(3),this.gib=this.R.Hd(5),this.iib=this.R.Hd(1),this.G8a=this.R.Hd(1),this.Jlb=this.R.Hd(1),this.Bcb=this.R.Hd(1),this.W_a=this.R.Hd(1),this.X_a=this.R.Hd(1),this.V_a=this.R.Hd(2),this.R.Hd(3),(this.Eva=this.R.Hd(1))?this.q9a=this.R.Hd(4):this.R.Hd(4),t&&(t.Fnc={hib:this.hib,gib:this.gib,iib:this.iib,G8a:this.G8a,Jlb:this.Jlb,Bcb:this.Bcb,W_a:this.W_a,X_a:this.X_a,V_a:this.V_a,Eva:this.Eva,q9a:this.q9a}),!0},a.lf="av1C",e.default=a},function(t,e,i){var n,r,a;function o(){return null!==a&&a.apply(this,arguments)||this}_esm(e),n=i(21),r=i(102),a=i(180).default,n.__extends(o,a),o.prototype.dJ=function(){var t=this.dy("esds");return(t=t&&t.urb.dy(5))&&(r.assert(this.samplerate),this.iJ=t.iJ*this.samplerate/t.zea),!0},o.lf="mp4a",o.qd=!0,e.default=o},function(t,e,i){var n,r,a;function o(){return null!==a&&a.apply(this,arguments)||this}_esm(e),n=i(21),r=i(238),a=i(24).dg,n.__extends(o,a),o.prototype.parse=function(t){return this.Eh(),this.urb=r.aJa.igb(this.R,t),!0},o.lf="esds",o.qd=!1,e.default=o},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),n=i(21),t=i(103),i=i(24),t=t.gja,r=i.dg,n.__extends(a,r),a.prototype.parse=function(){return this.Eh(),this.Zc=this.Zy([{lw:"int32"},{rv:"int16"}]),!0},a.lf=t,a.qd=!1,e.default=i=a},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),n=i(21),r=i(24).dg,n.__extends(a,r),a.prototype.parse=function(t){var e,i,n,r;return this.Eh(),e=(f=this.Zy([{DS:"int32"},{Xqa:"int32"},{ay:"int32"},{mB:"int32"},{lB:"int32"}])).DS,i=f.Xqa,n=f.ay,r=f.lB,f=f.mB,this.Zc={trackId:e,zoc:i,P8:n,Aoc:r,Boc:f},null!=t&&t.pl&&t.pl[e]&&(t.pl[e].Xqa=i,t.pl[e].ay=n,t.pl[e].lB=r,t.pl[e].mB=f),this.DS=e,this.Xqa=i,this.ay=n,this.mB=f,this.lB=r,!0},a.lf="trex",a.qd=!1,e.default=a},function(t,e,i){var n,p,b,r,a;function o(t,e,i,n,r){return(t=a.call(this,t,e,i,n,r)||this).sX=!1,t}_esm(e),n=i(21),p=i(804),b=i(102),r=i(389),a=i(24).dg,n.__extends(o,a),Object.defineProperties(o.prototype,{T1a:{get(){return!!(1&this.flags)},enumerable:!0,configurable:!0},L9:{get(){return!!(4&this.flags)},enumerable:!0,configurable:!0},wea:{get(){return!!(256&this.flags)},enumerable:!0,configurable:!0},yea:{get(){return!!(512&this.flags)},enumerable:!0,configurable:!0},FBa:{get(){return!!(1024&this.flags)},enumerable:!0,configurable:!0},EBa:{get(){return!!(2048&this.flags)},enumerable:!0,configurable:!0}}),o.prototype.parse=function(t){var e,i,n;if(this.Eh(),this.Loa=this.R.offset,this.Zd=this.R.ic(),this.Ho=this.T1a?this.R.Uda():0,this.fRb=this.L9?this.R.ic():void 0,this.DBa=(this.wea?4:0)+(this.yea?4:0)+(this.FBa?4:0)+(this.EBa?4:0),this.vP=this.R.offset,b.assert(this.T1a,"Expected data offset to be present in Track Run"),b.assert(this.length-(this.R.offset-this.startOffset)==this.Zd*this.DBa,"Expected remaining data in box to be sample information"),t&&t.ya){for(t.ya.Ho=this.Ho,t.ya.Zd=this.Zd,this.nl=[],n=null==(i=null==(e=this.parent)?void 0:e.dy("tfhd"))?void 0:i.DS,e=0;e<this.Zd;e++)i={},this.wea?i.vea=this.R.ic():t.ya.ay?i.vea=t.ya.ay:n&&t.pl&&t.pl[n]&&(i.vea=t.pl[n].ay),this.yea?i.YK=this.R.ic():t.ya?i.YK=t.ya.mB:n&&t.pl&&t.pl[n]&&(i.YK=t.pl[n].mB),this.FBa?i.xea=this.R.ic():t.ya?i.xea=t.ya.lB:n&&t.pl&&t.pl[n]&&(i.xea=t.pl[n].lB),this.EBa&&(i.dsc=0===this.version?this.R.ic():this.R.Uda()),0===e&&this.L9&&(i.xea=this.fRb),this.nl.push(i);if(t.ya.nl=this.nl,t.ya.XK)for(b.assert(t.ya.XK.length===t.ya.nl.length,"num fragment samples: "+t.ya.nl.length+", num samples in auxiliary info: "+t.ya.XK.length),n=0;n<t.ya.nl.length;n++)t.ya.nl[n].pia=t.ya.XK[n].pia,t.ya.nl[n].wDa=t.ya.XK[n].wDa}return!0},o.prototype.z6=function(t,e,i){var n,r=this.wea?this.R.ic():t.ay,a=this.yea?this.R.ic():t.mB;return t=this.FBa?this.R.ic():t.lB,{L$b:n=this.EBa?0===this.version?this.R.ic():this.R.Uda():0,xea:t,YK:a,vea:r,Irc:(i||0)+n-(void 0!==e?e:n)}},o.prototype.Ha=function(t,e,i,n,r,a,o){var s,u,c,h;for(b.assert(void 0!==this.Ho),b.assert(void 0!==this.vP),b.assert(void 0!==this.Loa),b.assert(void 0!==this.Zd),b.assert(void 0!==t.jt),u=s=0,this.Xb.offset=this.vP,n=0;n<r;++n)c=this.z6(e,h,u),0===n&&(h=c.L$b),s+=c.YK,u+=c.vea;if(n=r,r=this.R.offset,c=this.z6(e,h,u),this.WAa=o,this.eS=n,this.wjb=u,o){if(this.FR=this.Ho+s,this.ns=0,n===this.Zd)return!0}else if(this.FR=this.Ho,this.ns=s,0===n)return!0;if(0===n||n===this.Zd)return!1;if(this.sX=!0,o){for(this.ns+=c.YK,o=n+1;o<this.Zd;++o)c=this.z6(e,h,u),this.ns+=c.YK;this.Xb.offset=this.Loa,this.Zd=n,this.Xb.Sw(this.Zd),this.Xb.aFa(a),this.L9&&(this.R.offset+=4),this.Sn(this.length-(r-this.startOffset),r)}else e=r-this.vP,this.vP=r,this.Xb.offset=this.Loa,this.Zd-=n,this.Xb.Sw(this.Zd),this.Ho+=s,this.Xb.aFa(a,this.Ho),this.L9&&(this.R.offset+=4),this.Sn(e,this.Xb.offset);return i.Sn(this.ns,t.jt+this.FR),!0},o.prototype.s2b=function(t,e,i,n,r,a,o,s){var u,c,h,f,l;void 0===o&&(o=!1),b.assert(void 0!==this.Ho),b.assert(void 0!==this.vP),b.assert(void 0!==this.Zd),b.assert(void 0!==this.DBa),b.assert(void 0!==t.jt);for(var d=n.length;d<this.Zd;++d)n[d]=n[d-1];for(n.some(function(t){return t<=0})&&(c=null==(u=this.ryb(r,a))?void 0:u.Wea),this.R.offset=this.vP,t=t.jt+this.Ho,r=-1!==r.indexOf("heaac")?"aac":"ddp",a=new Uint8Array(this.R.view.buffer,this.R.view.byteOffset,this.R.view.byteLength),d=0;d<this.Zd;++d){if(u=this.z6(e).YK,-1/0===n[d])c&&this.yea&&(i.fea(u,c,t),h=this.DBa-(this.wea?4:0),this.Xb.offset-=h,this.Xb.Sw(c.byteLength),this.Xb.offset+=h-4);else if(n[d]<0)try{f=a.subarray(t,t+u),(l=p.WE({Wd:r,frame:f,PA:n[d],VK:o,YJ:s}).xRb)!==u&&this.R.console.error("TrackRunBoxEditor: parse frame size error "+l+" should be "+u)}catch(t){this.R.console.error("TrackRunBoxEditor: fadeFrame error: "+t.message+" "+t.stack)}t+=u}},o.prototype.ryb=function(t,e){return"string"==typeof e?(b.assert("reset"!==e&&"standard"!==e),r.kW[e]):void 0!==t?e&&r.kW.reset[t]||r.kW.standard[t]:void 0},o.lf="trun",o.qd=!1,e.jwb=o},function(t,e,i){_esm(e),i(388).__exportStar(i(805),e)},function(t,e,o){var s,u,c,h;_esm(e),e.WE=void 0,s=o(242),u=o(806),e.WE=function(){for(var t,e,i,n,r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];switch(e=(t="string"==typeof r[0]?{Wd:r[0],frame:r[1],PA:r[2],eIb:r[3],YJ:r[4]}:r[0]).Wd,r=t.frame,a=t.PA,i=t.eIb,n=t.YJ,t=void 0!==(t=t.VK)&&t,e){case"aac":void 0===c&&(c=o(807).WE),e=6,i&&(i=new s.F2(i),e=u.reb(i).Aea),r=c(r,a,t,{Aea:e}).fza;break;case"ddp":r=(h=void 0===h?o(816).WE:h)(r,a,{YJ:n}).fza;break;default:throw Error("Unrecognized codec in fadeFrame: "+e)}return{xRb:r}}},function(t,e){var a;_esm(e),e.reb=void 0,a=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],e.reb=function(t){var e,i,n=t.read(5),r=t.read(4);switch(15===r?(e=t.read(24),r=a.indexOf(e)):e=a[r],i=t.read(4),n){case 1:case 2:case 4:if(t.read(1))throw Error("frameLengthFlag not supported");break;default:throw Error("AAC profile "+n+" not supported.")}return{zr:n,sampleRate:e,Aea:r,boc:i,wRb:1024}}},function(t,e,i){var a,o;_esm(e),e.WE=void 0,a=i(242),o=i(808),e.WE=function(t,e,i,n){var r=new a.F2(t);return e=o.Ffb(r,{PA:e,VK:i},n&&n.Aea),r=r.offset,{frame:t.subarray(0,r),fza:r,ntc:e}}},function(t,e,i){var o,s;_esm(e),e.Ffb=void 0,o=i(243),s=i(809),e.Ffb=function(t,e,i){var n,r,a;return 4095===t.read(12)?(t.advance(3),n=!!t.read(1),r=t.read(2)+1,i=t.read(4),t.advance(8),a=t.read(13),t.advance(13+(n?0:16)),n={zr:r,Aea:i,wRb:a}):t.reverse(12),o.assert(void 0!==i),s.Kfb(t,i,e),n}},function(t,e,i){var a,o;_esm(e),e.Kfb=void 0,a=i(810),o=i(815),e.Kfb=function(t,e,i){for(var n,r;7!==(r=t.read(3));)switch(n=t.read(4),r){case 1:a.Cfb(t,e,i);break;case 6:o.Efb(t,n,i);break;default:throw Error("Unsupported AAC element "+r)}t.XFb()}},function(t,e,i){var a;_esm(e),e.Cfb=void 0,a=i(811),e.Cfb=function(t,e,i){var n,r=t.read(1);r&&(n=new a.sLa(t,r,e),1===t.read(2)&&t.advance(n.aR*n.OZ)),a.nAa(t,e,n,i),a.nAa(t,e,n,i)}},function(t,e,i){var m,v,r,y,w,A;_esm(e),e.sLa=e.nAa=void 0,m=i(243),v=i(812),r=i(814),e.nAa=function(t,e,i,n){var r,a,o=t.read(8);n=Math.max(0,Math.ceil(o+4*Math.log(Math.pow(10,n.PA/20))/Math.log(2))),t.reverse(8),t.write(8,n),a=(1<<(r=2===(o=i=i||new A(t,0,e)).YEa?3:5))-1,e=[],n=[];for(var s=[],u=0;u<o.aR;++u){for(var c=0,h=0;c<o.OZ;){for(var f=t.read(4),l=0;(d=t.read(r))===a;)l+=d;c+=l+=d,e.push(f),n.push(l),++h}s.push(h)}for(o=!0,r=0;r<e.length;++r)0!==e[r]&&(13===e[r]&&o?(t.advance(9),o=!1,v.h4.ujb(t,n[r]-1)):v.h4.ujb(t,n[r]));if(t.read(1)&&t.advance(6+9*(t.read(2)+1)),t.read(1))for(r=2===(o=i).YEa?y:w,a=0;a<o.Bdb;++a)if(s=t.read(r[0]))for(u=t.read(1),c=0;c<s;++c)t.advance(r[1]),(h=t.read(r[2]))&&(t.advance(1),f=t.read(1),t.advance(h*(u+3-f)));for(m.assert(!t.read(1)),o=i.aR,r=i.OZ,a=i.Akb,i=i.mga,u=s=0;u<o;++u)for(c=i[u],h=0;h<r;++s)if(f=e[s],l=n[s],0===f||13===f||15===f||14===f)h+=l;else for(var d=5<=f?2:4,p=0;p<l;++p,++h)for(var b=c*(a[h+1]-a[h])/d,g=0;g<b;++g)v.h4.pcc(t,f)},y=[1,4,3],w=[2,6,5],A=function(t,e,i){var n;if(this.mga=[],this.aR=1,this.mga[0]=1,t.advance(1),this.YEa=t.read(2),t.read(1),2===this.YEa){for(this.Bdb=8,this.OZ=t.read(4),e=0;e<7;++e)t.read(1)?this.mga[this.aR-1]++:(this.aR++,this.mga[this.aR-1]=1);this.Akb=r.YRa[i]}else this.Bdb=1,this.OZ=t.read(6),t.read(1)&&(n=14+Math.min(this.OZ,40),t.read(1)&&t.advance(n),e&&t.read(1)&&t.advance(n)),this.Akb=r.XRa[i]},e.sLa=A},function(t,e,i){var n,r,a;function o(){}_esm(e),e.h4=void 0,n=i(813),r=[n.dKa,n.gKa,n.hKa,n.iKa,n.jKa,n.kKa,n.lKa,n.mKa,n.nKa,n.eKa,n.fKa],a=[!1,!1,!0,!0,!1,!1,!0,!0,!0,!0,!0],e.h4=(o.w4a=function(t,e){var i,n,r=e.table;e=e.width;for(var a=0,o=r[0],s=t.read(o);s!==r[a+1];)n=(i=r[a+=e])-o,o=i,s=(s<<=n)|t.read(n);return a},o.tjb=function(t){for(var e=4;t.read(1);)++e;t.advance(e)},o.ujb=function(t,e){for(;e--;)o.w4a(t,n.oKa)},o.pcc=function(t,e){var i=(h=r[e-1]).table;if(h=this.w4a(t,h),e<11)a[e-1]&&(e=i[h+2])&&t.advance(e);else{if(!(11===e||15<e))throw Error("Huffman: unknown spectral codebook: "+e);(e=i[h+=2])&&t.advance(e),(i=i[h+1])&&this.tjb(t),1<i&&this.tjb(t)}},o)},function(t,e){_esm(e),e.oKa=e.fKa=e.eKa=e.nKa=e.mKa=e.lKa=e.kKa=e.jKa=e.iKa=e.hKa=e.gKa=e.dKa=void 0,e.dKa={width:2,table:new Uint16Array([1,0,5,16,5,17,5,18,5,19,5,20,5,21,5,22,5,23,7,96,7,97,7,98,7,99,7,100,7,101,7,102,7,103,7,104,7,105,7,106,7,107,7,108,7,109,7,110,7,111,7,112,7,113,7,114,7,115,7,116,7,117,7,118,7,119,9,480,9,481,9,482,9,483,9,484,9,485,9,486,9,487,9,488,9,489,9,490,9,491,9,492,9,493,9,494,9,495,9,496,9,497,9,498,9,499,9,500,9,501,9,502,9,503,10,1008,10,1009,10,1010,10,1011,10,1012,10,1013,10,1014,10,1015,11,2032,11,2033,11,2034,11,2035,11,2036,11,2037,11,2038,11,2039,11,2040,11,2041,11,2042,11,2043,11,2044,11,2045,11,2046,11,2047])},e.gKa={width:2,table:new Uint16Array([3,0,4,2,5,6,5,7,5,8,5,9,5,10,5,11,5,12,6,26,6,27,6,28,6,29,6,30,6,31,6,32,6,33,6,34,6,35,6,36,6,37,6,38,6,39,6,40,6,41,6,42,6,43,6,44,6,45,6,46,6,47,6,48,6,49,7,100,7,101,7,102,7,103,7,104,7,105,7,106,7,107,7,108,7,109,7,110,7,111,7,112,7,113,7,114,8,230,8,231,8,232,8,233,8,234,8,235,8,236,8,237,8,238,8,239,8,240,8,241,8,242,8,243,8,244,8,245,8,246,8,247,8,248,9,498,9,499,9,500,9,501,9,502,9,503,9,504,9,505,9,506,9,507,9,508,9,509,9,510,9,511])},e.hKa={width:3,table:new Uint16Array([1,0,0,4,8,1,4,9,1,4,10,1,4,11,1,5,24,2,5,25,2,6,52,2,6,53,2,6,54,2,6,55,3,6,56,2,6,57,3,7,116,4,7,117,3,7,118,3,8,238,1,8,239,1,8,240,2,8,241,2,8,242,3,9,486,2,9,487,3,9,488,2,9,489,3,9,490,3,9,491,1,9,492,2,9,493,2,9,494,1,9,495,2,9,496,2,9,497,4,9,498,3,9,499,3,9,500,4,10,1002,3,10,1003,2,10,1004,3,10,1005,2,10,1006,4,10,1007,4,10,1008,3,10,1009,3,10,1010,2,10,1011,3,10,1012,3,10,1013,3,10,1014,2,10,1015,2,10,1016,3,11,2034,2,11,2035,4,11,2036,3,11,2037,3,11,2038,4,11,2039,4,11,2040,2,11,2041,3,12,4084,3,12,4085,3,12,4086,3,12,4087,3,12,4088,3,12,4089,4,12,4090,4,12,4091,4,12,4092,4,13,8186,2,13,8187,2,13,8188,3,14,16378,3,14,16379,4,14,16380,3,15,32762,4,15,32763,4,15,32764,4,15,32765,3,15,32766,2,16,65534,3,16,65535,3])},e.iKa={width:3,table:new Uint16Array([4,0,4,4,1,3,4,2,3,4,3,3,4,4,3,4,5,1,4,6,2,4,7,0,4,8,2,4,9,2,5,20,2,5,21,2,5,22,1,5,23,2,5,24,1,5,25,1,7,104,4,7,105,4,7,106,4,7,107,4,7,108,3,7,109,3,7,110,3,7,111,3,7,112,3,8,226,3,8,227,3,8,228,3,8,229,3,8,230,3,8,231,3,8,232,3,8,233,2,8,234,2,8,235,2,8,236,2,8,237,2,8,238,2,8,239,2,8,240,2,8,241,2,8,242,2,8,243,2,8,244,2,8,245,1,8,246,1,9,494,1,9,495,1,9,496,4,9,497,4,9,498,4,9,499,4,9,500,4,9,501,4,10,1004,3,10,1005,3,10,1006,3,10,1007,3,10,1008,3,10,1009,3,10,1010,3,10,1011,3,10,1012,3,10,1013,4,10,1014,3,10,1015,3,10,1016,3,10,1017,4,11,2036,4,11,2037,4,11,2038,2,11,2039,2,11,2040,2,11,2041,2,11,2042,2,11,2043,2,11,2044,4,11,2045,3,11,2046,3,12,4094,3,12,4095,3])},e.jKa={width:2,table:new Uint16Array([1,0,4,8,4,9,4,10,4,11,5,24,5,25,5,26,5,27,7,112,7,113,7,114,7,115,8,232,8,233,8,234,8,235,8,236,8,237,8,238,8,239,8,240,8,241,8,242,8,243,9,488,9,489,9,490,9,491,9,492,9,493,9,494,9,495,9,496,9,497,9,498,9,499,10,1e3,10,1001,10,1002,10,1003,10,1004,10,1005,10,1006,10,1007,10,1008,10,1009,10,1010,10,1011,11,2024,11,2025,11,2026,11,2027,11,2028,11,2029,11,2030,11,2031,11,2032,11,2033,11,2034,11,2035,11,2036,11,2037,11,2038,11,2039,11,2040,11,2041,12,4084,12,4085,12,4086,12,4087,12,4088,12,4089,12,4090,12,4091,12,4092,12,4093,13,8188,13,8189,13,8190,13,8191])},e.kKa={width:2,table:new Uint16Array([4,0,4,1,4,2,4,3,4,4,4,5,4,6,4,7,4,8,6,36,6,37,6,38,6,39,6,40,6,41,6,42,6,43,6,44,6,45,6,46,6,47,6,48,6,49,6,50,6,51,7,104,7,105,7,106,7,107,7,108,7,109,7,110,7,111,7,112,7,113,7,114,7,115,7,116,8,234,8,235,8,236,8,237,8,238,8,239,8,240,8,241,9,484,9,485,9,486,9,487,9,488,9,489,9,490,9,491,9,492,9,493,9,494,9,495,9,496,9,497,9,498,9,499,9,500,9,501,9,502,9,503,9,504,9,505,9,506,10,1014,10,1015,10,1016,10,1017,10,1018,10,1019,10,1020,10,1021,11,2044,11,2045,11,2046,11,2047])},e.lKa={width:3,table:new Uint16Array([1,0,0,3,4,1,3,5,1,4,12,2,6,52,2,6,53,2,6,54,1,6,55,1,7,112,2,7,113,2,7,114,2,7,115,1,7,116,1,8,234,2,8,235,2,8,236,2,8,237,2,8,238,2,8,239,2,8,240,2,8,241,2,8,242,1,8,243,1,9,488,2,9,489,2,9,490,2,9,491,1,9,492,2,9,493,1,9,494,2,9,495,2,9,496,2,9,497,2,9,498,2,9,499,2,9,500,2,9,501,2,10,1004,2,10,1005,1,10,1006,1,10,1007,2,10,1008,2,10,1009,2,10,1010,2,10,1011,2,10,1012,2,10,1013,2,10,1014,2,10,1015,2,10,1016,2,10,1017,2,10,1018,2,11,2038,1,11,2039,1,11,2040,2,11,2041,2,11,2042,2,11,2043,2,11,2044,2,11,2045,2,12,4092,2,12,4093,2,12,4094,2,12,4095,2])},e.mKa={width:3,table:new Uint16Array([3,0,2,4,2,2,4,3,1,4,4,2,4,5,1,4,6,2,5,14,0,5,15,1,5,16,1,5,17,2,5,18,2,5,19,2,5,20,2,6,42,2,6,43,2,6,44,2,6,45,2,6,46,2,6,47,1,6,48,1,6,49,2,6,50,2,6,51,2,7,104,2,7,105,2,7,106,2,7,107,2,7,108,2,7,109,2,7,110,2,7,111,1,7,112,2,7,113,1,7,114,2,7,115,2,7,116,2,7,117,2,8,236,2,8,237,2,8,238,2,8,239,1,8,240,2,8,241,1,8,242,2,8,243,2,8,244,2,8,245,2,8,246,2,8,247,2,8,248,2,8,249,2,8,250,2,9,502,2,9,503,2,9,504,1,9,505,2,9,506,1,9,507,2,9,508,2,9,509,2,10,1020,2,10,1021,1,10,1022,1,10,1023,2])},e.nKa={width:3,table:new Uint16Array([1,0,0,3,4,1,3,5,1,4,12,2,6,52,2,6,53,2,6,54,1,6,55,1,7,112,2,7,113,2,7,114,2,8,230,1,8,231,1,8,232,2,8,233,2,8,234,2,8,235,2,8,236,2,8,237,2,9,476,2,9,477,2,9,478,1,9,479,1,9,480,2,9,481,2,9,482,2,9,483,2,9,484,2,9,485,2,9,486,2,10,974,1,10,975,2,10,976,1,10,977,2,10,978,2,10,979,2,10,980,2,10,981,2,10,982,2,10,983,2,10,984,2,10,985,1,10,986,2,10,987,2,10,988,2,10,989,2,10,990,2,10,991,2,10,992,2,10,993,2,11,1988,1,11,1989,2,11,1990,2,11,1991,2,11,1992,1,11,1993,2,11,1994,2,11,1995,2,11,1996,2,11,1997,1,11,1998,2,11,1999,2,11,2e3,2,11,2001,2,11,2002,1,11,2003,1,11,2004,2,11,2005,2,11,2006,2,11,2007,2,11,2008,2,11,2009,2,11,2010,2,11,2011,2,11,2012,2,11,2013,2,11,2014,2,11,2015,2,11,2016,2,11,2017,1,11,2018,2,12,4038,2,12,4039,2,12,4040,1,12,4041,2,12,4042,2,12,4043,2,12,4044,2,12,4045,2,12,4046,2,12,4047,2,12,4048,2,12,4049,2,12,4050,2,12,4051,2,12,4052,2,12,4053,2,12,4054,2,12,4055,2,12,4056,2,12,4057,2,12,4058,2,12,4059,2,12,4060,2,12,4061,1,12,4062,2,12,4063,2,12,4064,1,12,4065,2,12,4066,2,12,4067,2,12,4068,2,12,4069,2,12,4070,2,12,4071,2,12,4072,1,12,4073,2,12,4074,2,12,4075,2,13,8152,2,13,8153,2,13,8154,2,13,8155,2,13,8156,2,13,8157,2,13,8158,2,13,8159,2,13,8160,2,13,8161,2,13,8162,2,13,8163,2,13,8164,1,13,8165,2,13,8166,2,13,8167,1,13,8168,2,13,8169,2,13,8170,2,13,8171,2,13,8172,1,13,8173,2,13,8174,2,13,8175,2,13,8176,2,13,8177,2,13,8178,2,13,8179,2,13,8180,2,13,8181,2,13,8182,2,13,8183,2,14,16368,2,14,16369,2,14,16370,2,14,16371,2,14,16372,2,14,16373,2,14,16374,2,14,16375,2,14,16376,2,14,16377,2,14,16378,2,14,16379,2,14,16380,2,14,16381,2,15,32764,2,15,32765,2,15,32766,2,15,32767,2])},e.eKa={width:3,table:new Uint16Array([4,0,2,4,1,2,4,2,2,5,6,2,5,7,1,5,8,1,5,9,2,5,10,2,5,11,2,5,12,2,5,13,2,6,28,1,6,29,1,6,30,2,6,31,2,6,32,2,6,33,2,6,34,0,6,35,2,6,36,2,6,37,1,6,38,1,6,39,2,6,40,2,6,41,2,7,84,2,7,85,2,7,86,2,7,87,2,7,88,2,7,89,2,7,90,2,7,91,2,7,92,2,7,93,1,7,94,2,7,95,1,7,96,2,7,97,2,7,98,2,7,99,2,7,100,2,8,202,2,8,203,2,8,204,2,8,205,2,8,206,2,8,207,2,8,208,2,8,209,1,8,210,2,8,211,1,8,212,2,8,213,2,8,214,2,8,215,2,8,216,2,8,217,2,8,218,2,8,219,2,8,220,2,8,221,2,8,222,2,8,223,2,8,224,2,8,225,2,8,226,2,9,454,2,9,455,2,9,456,2,9,457,1,9,458,2,9,459,2,9,460,2,9,461,2,9,462,2,9,463,1,9,464,2,9,465,2,9,466,2,9,467,2,9,468,2,9,469,2,9,470,2,9,471,2,9,472,2,9,473,2,9,474,2,9,475,2,9,476,2,9,477,2,9,478,2,9,479,2,9,480,2,9,481,1,9,482,2,9,483,1,9,484,2,10,970,2,10,971,2,10,972,2,10,973,2,10,974,2,10,975,2,10,976,1,10,977,2,10,978,2,10,979,2,10,980,2,10,981,2,10,982,2,10,983,1,10,984,2,10,985,2,10,986,2,10,987,2,10,988,2,10,989,2,10,990,2,10,991,2,10,992,2,10,993,2,10,994,2,10,995,2,10,996,2,10,997,2,10,998,2,10,999,2,10,1e3,2,10,1001,1,10,1002,2,10,1003,1,10,1004,2,10,1005,1,10,1006,2,10,1007,2,10,1008,2,10,1009,2,10,1010,2,11,2022,2,11,2023,2,11,2024,2,11,2025,2,11,2026,2,11,2027,2,11,2028,2,11,2029,2,11,2030,2,11,2031,2,11,2032,1,11,2033,2,11,2034,1,11,2035,2,11,2036,2,11,2037,2,11,2038,1,11,2039,2,11,2040,2,11,2041,2,11,2042,1,11,2043,2,12,4088,2,12,4089,2,12,4090,2,12,4091,2,12,4092,2,12,4093,1,12,4094,2,12,4095,2])},e.fKa={width:4,table:new Uint16Array([4,0,0,0,4,1,2,0,5,4,2,2,5,5,1,0,5,6,1,0,5,7,2,0,5,8,2,0,5,9,2,0,6,20,2,0,6,21,2,0,6,22,2,0,6,23,1,0,6,24,2,0,6,25,1,0,6,26,2,0,7,54,2,0,7,55,2,0,7,56,2,0,7,57,2,0,7,58,2,0,7,59,2,0,7,60,1,0,7,61,1,0,7,62,2,0,7,63,2,0,7,64,2,0,7,65,2,0,7,66,2,0,7,67,2,0,7,68,2,0,7,69,2,0,8,140,2,0,8,141,2,0,8,142,2,0,8,143,2,0,8,144,2,0,8,145,2,0,8,146,2,0,8,147,2,1,8,148,2,1,8,149,2,1,8,150,2,1,8,151,2,1,8,152,2,0,8,153,2,1,8,154,1,0,8,155,2,0,8,156,1,0,8,157,2,1,8,158,2,0,8,159,2,1,8,160,2,1,8,161,2,1,8,162,2,1,8,163,2,0,8,164,2,0,8,165,2,0,8,166,2,0,8,167,2,0,8,168,2,1,8,169,2,1,8,170,2,0,8,171,2,0,8,172,2,1,8,173,2,1,8,174,2,1,8,175,2,0,8,176,2,0,8,177,2,1,8,178,2,0,8,179,2,1,8,180,2,1,8,181,2,1,8,182,2,0,8,183,2,1,8,184,2,0,8,185,2,0,8,186,2,1,8,187,2,1,8,188,2,0,8,189,2,0,8,190,2,0,8,191,1,0,8,192,2,1,8,193,2,1,8,194,2,0,8,195,2,0,8,196,2,0,8,197,2,0,8,198,1,0,9,398,2,0,9,399,2,1,9,400,2,1,9,401,2,0,9,402,2,0,9,403,2,1,9,404,2,0,9,405,2,1,9,406,2,0,9,407,2,0,9,408,2,0,9,409,2,0,9,410,2,0,9,411,2,0,9,412,2,0,9,413,2,1,9,414,2,0,9,415,2,0,9,416,1,0,9,417,2,0,9,418,2,0,9,419,2,0,9,420,2,0,9,421,2,0,9,422,2,0,9,423,1,0,9,424,2,0,9,425,2,0,9,426,2,0,9,427,2,0,9,428,2,0,9,429,2,0,9,430,2,0,9,431,2,0,9,432,2,0,9,433,2,0,9,434,2,0,9,435,2,0,9,436,2,0,9,437,2,0,9,438,1,0,9,439,2,0,9,440,2,0,9,441,2,0,9,442,2,0,9,443,2,0,9,444,2,0,9,445,2,0,9,446,2,0,9,447,2,0,9,448,2,0,9,449,2,0,9,450,1,1,9,451,2,0,9,452,2,0,10,906,2,0,10,907,2,0,10,908,2,0,10,909,2,0,10,910,1,1,10,911,2,0,10,912,1,0,10,913,2,0,10,914,2,0,10,915,2,0,10,916,2,0,10,917,2,0,10,918,2,0,10,919,2,0,10,920,2,0,10,921,2,0,10,922,2,0,10,923,2,0,10,924,2,0,10,925,2,0,10,926,2,0,10,927,2,0,10,928,2,0,10,929,2,0,10,930,2,0,10,931,2,0,10,932,2,0,10,933,2,0,10,934,2,0,10,935,2,0,10,936,2,0,10,937,2,0,10,938,2,0,10,939,2,0,10,940,2,0,10,941,2,0,10,942,2,0,10,943,1,0,10,944,2,0,10,945,2,0,10,946,2,0,10,947,2,0,10,948,2,0,10,949,2,0,10,950,2,0,10,951,2,0,10,952,2,0,10,953,2,0,10,954,2,0,10,955,2,0,10,956,2,0,10,957,2,0,10,958,2,0,10,959,2,0,10,960,2,0,10,961,2,0,10,962,1,0,10,963,2,0,10,964,2,0,10,965,2,0,10,966,2,0,10,967,2,0,10,968,2,0,10,969,2,0,10,970,2,0,10,971,2,0,10,972,2,0,10,973,2,0,10,974,2,0,10,975,2,0,10,976,2,0,10,977,2,0,10,978,2,0,10,979,2,0,10,980,2,0,10,981,2,0,10,982,2,0,10,983,2,0,10,984,2,0,10,985,2,0,10,986,2,0,10,987,2,0,10,988,2,0,10,989,2,0,10,990,1,0,10,991,1,0,10,992,2,0,10,993,2,0,10,994,2,0,10,995,2,0,10,996,2,0,10,997,2,0,10,998,2,0,10,999,2,0,10,1e3,2,0,11,2002,2,0,11,2003,2,0,11,2004,2,0,11,2005,2,0,11,2006,2,0,11,2007,2,0,11,2008,2,0,11,2009,2,0,11,2010,2,0,11,2011,2,0,11,2012,2,0,11,2013,2,0,11,2014,2,0,11,2015,2,0,11,2016,2,0,11,2017,2,0,11,2018,2,0,11,2019,1,0,11,2020,2,0,11,2021,2,0,11,2022,1,0,11,2023,2,0,11,2024,1,0,11,2025,2,0,11,2026,2,0,11,2027,2,0,11,2028,1,0,11,2029,2,0,11,2030,2,0,11,2031,2,0,11,2032,2,0,11,2033,2,0,11,2034,1,0,11,2035,1,0,11,2036,2,0,11,2037,2,0,11,2038,2,0,11,2039,2,0,11,2040,1,0,11,2041,2,0,11,2042,2,0,11,2043,1,0,11,2044,2,0,12,4090,1,0,12,4091,1,0,12,4092,2,0,12,4093,1,0,12,4094,1,0,12,4095,2,0])},e.oKa={width:2,table:new Uint32Array([1,0,3,4,4,10,4,11,4,12,5,26,5,27,6,56,6,57,6,58,6,59,7,120,7,121,7,122,8,246,8,247,8,248,8,249,8,250,9,502,9,503,9,504,9,505,10,1012,10,1013,10,1014,10,1015,10,1016,10,1017,11,2036,11,2037,11,2038,11,2039,11,2040,11,2041,12,4084,12,4085,12,4086,12,4087,12,4088,12,4089,13,8180,13,8181,13,8182,13,8183,13,8184,14,16370,14,16371,14,16372,14,16373,14,16374,14,16375,14,16376,14,16377,15,32756,15,32757,15,32758,15,32759,16,65520,16,65521,16,65522,16,65523,16,65524,16,65525,16,65526,17,131054,17,131055,17,131056,18,262114,18,262115,18,262116,18,262117,18,262118,18,262119,18,262120,19,524242,19,524243,19,524244,19,524245,19,524246,19,524247,19,524248,19,524249,19,524250,19,524251,19,524252,19,524253,19,524254,19,524255,19,524256,19,524257,19,524258,19,524259,19,524260,19,524261,19,524262,19,524263,19,524264,19,524265,19,524266,19,524267,19,524268,19,524269,19,524270,19,524271,19,524272,19,524273,19,524274,19,524275,19,524276,19,524277,19,524278,19,524279,19,524280,19,524281,19,524282,19,524283,19,524284,19,524285,19,524286,19,524287])}},function(t,e){var i,n,r,a,o,s,u,c,h,f,l,d;_esm(e),e.uvb=e.Osb=e.wvb=e.Svb=e.Tvb=e.YRa=e.XRa=void 0,t=new Uint16Array([0,4,8,12,16,20,24,28,32,36,40,44,48,52,56,64,72,80,88,96,108,120,132,144,156,172,188,212,240,276,320,384,448,512,576,640,704,768,832,896,960,1024]),i=new Uint16Array([0,4,8,12,16,20,24,32,40,48,64,92,128]),n=new Uint16Array([0,4,8,12,16,20,24,28,32,36,40,44,48,52,56,64,72,80,88,100,112,124,140,156,172,192,216,240,268,304,344,384,424,464,504,544,584,624,664,704,744,784,824,864,904,944,984,1024]),r=new Uint16Array([0,4,8,12,16,20,24,32,40,48,64,92,128]),a=new Uint16Array([0,4,8,12,16,20,24,28,32,36,40,48,56,64,72,80,88,96,108,120,132,144,160,176,196,216,240,264,292,320,352,384,416,448,480,512,544,576,608,640,672,704,736,768,800,832,864,896,928,1024]),o=new Uint16Array([0,4,8,12,16,20,28,36,44,56,68,80,96,112,128]),s=new Uint16Array([0,4,8,12,16,20,24,28,32,36,40,48,56,64,72,80,88,96,108,120,132,144,160,176,196,216,240,264,292,320,352,384,416,448,480,512,544,576,608,640,672,704,736,768,800,832,864,896,928,960,992,1024]),u=new Uint16Array([0,4,8,12,16,20,24,28,32,36,40,44,52,60,68,76,84,92,100,108,116,124,136,148,160,172,188,204,220,240,260,284,308,336,364,396,432,468,508,552,600,652,704,768,832,896,960,1024]),c=new Uint16Array([0,4,8,12,16,20,24,28,36,44,52,64,76,92,108,128]),h=new Uint16Array([0,8,16,24,32,40,48,56,64,72,80,88,100,112,124,136,148,160,172,184,196,212,228,244,260,280,300,320,344,368,396,424,456,492,532,572,616,664,716,772,832,896,960,1024]),f=new Uint16Array([0,4,8,12,16,20,24,28,32,40,48,60,72,88,108,128]),l=new Uint16Array([0,12,24,36,48,60,72,84,96,108,120,132,144,156,172,188,204,220,236,252,268,288,308,328,348,372,396,420,448,476,508,544,580,620,664,712,764,820,880,944,1024]),d=new Uint16Array([0,4,8,12,16,20,24,28,36,44,52,60,72,88,108,128]),e.XRa=[t,t,n,a,a,s,u,u,h,h,h,l],e.YRa=[i,i,r,o,o,o,c,c,f,f,f,d],e.Tvb=new Uint8Array([12,12,12,14,14,14,15,15,15,15,15,15]),e.Svb=new Uint8Array([41,41,47,49,49,51,47,47,43,43,43,40]),e.wvb=function(){for(var t=new Float32Array(428),e=0;e<428;e++)t[e]=Math.pow(2,(e-200)/4);return t}(),e.Osb=function(){for(var t=new Float32Array(8191),e=0;e<8191;e++)t[e]=Math.pow(e,4/3);return t}(),e.uvb=new Int32Array([96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350])},function(t,e){_esm(e),e.Efb=void 0,e.Efb=function(t,e,i){15===e&&(e+=t.read(8)-1),0<e&&1!==i.PA&&!i.VK?(t.write(4,0),t.advance(8*e-4)):t.advance(8*e)}},function(t,e,i){var r,a;_esm(e),e.WE=void 0,r=i(242),a=i(817),e.WE=function(t,e,i){var n=new r.F2(t);return e=a.ZYa(n,e,null==i?void 0:i.YJ).yRb,t=t.subarray(0,e),a.Vib(t),{frame:t,fza:e}}},function(t,e,i){var a,n;_esm(e),e.Vib=e.ZYa=void 0,a=i(243),n=i(818),e.ZYa=function(t,e,i){var n,r=t.read(16);return a.assert(2935===r),r=2*(1+(2047&t.read(16))),t.advance(13),n=t.read(5),t.reverse(5),i&&(e*=-n/i),t.write(5,Math.min(31,Math.max(1,Math.floor(n+e)))),{yRb:r}},e.Vib=function(t){var e=n.b1a(t.subarray(2,t.length-2));t[t.length-2]=e>>8,t[t.length-1]=255&e}},function(t,e){var n;_esm(e),e.b1a=void 0,n=new Uint16Array([0,32773,32783,10,32795,30,20,32785,32819,54,60,32825,40,32813,32807,34,32867,102,108,32873,120,32893,32887,114,80,32853,32863,90,32843,78,68,32833,32963,198,204,32969,216,32989,32983,210,240,33013,33023,250,33003,238,228,32993,160,32933,32943,170,32955,190,180,32945,32915,150,156,32921,136,32909,32903,130,33155,390,396,33161,408,33181,33175,402,432,33205,33215,442,33195,430,420,33185,480,33253,33263,490,33275,510,500,33265,33235,470,476,33241,456,33229,33223,450,320,33093,33103,330,33115,350,340,33105,33139,374,380,33145,360,33133,33127,354,33059,294,300,33065,312,33085,33079,306,272,33045,33055,282,33035,270,260,33025,33539,774,780,33545,792,33565,33559,786,816,33589,33599,826,33579,814,804,33569,864,33637,33647,874,33659,894,884,33649,33619,854,860,33625,840,33613,33607,834,960,33733,33743,970,33755,990,980,33745,33779,1014,1020,33785,1e3,33773,33767,994,33699,934,940,33705,952,33725,33719,946,912,33685,33695,922,33675,910,900,33665,640,33413,33423,650,33435,670,660,33425,33459,694,700,33465,680,33453,33447,674,33507,742,748,33513,760,33533,33527,754,720,33493,33503,730,33483,718,708,33473,33347,582,588,33353,600,33373,33367,594,624,33397,33407,634,33387,622,612,33377,544,33317,33327,554,33339,574,564,33329,33299,534,540,33305,520,33293,33287,514]),e.b1a=function(t,e){e=~~(e=void 0===e?0:e);for(var i=0;i<t.length;i++)e=65535&(n[255&(e>>8^t[i])]^e<<8);return e}},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),n=i(21),r=i(24).dg,n.__extends(a,r),a.prototype.parse=function(t){return this.RLb=this.R.yC(),t&&t.rf&&(t.rf.J$b=this.RLb),!0},a.lf="frma",e.default=a},function(t,e,i){var r,a,u,o,c,n,s,h,f,l,d,p,b;function g(t,e,i,n,r,a){this.console=t,this.stream=e,this.Cw=n,this.yDb=r,this.view=i instanceof ArrayBuffer?new DataView(i):new DataView(i.data,i.offset,i.length),this.config=a||{},this.vWb=f.WSb()}_esm(e),r=i(21),a=i(821),u=i(244),o=i(102),c=i(149),n=i(24),t=i(386),s=i(387),h=i(390),f=i(150),l=i(236),d=i(103),p=i(391),b=i(824),g.path=function(t,e){return e.reduce(function(t,e){return t&&t.oe[e]&&t.oe[e][0]},t)},g.ZTb=function(t){return t&&t.cqa&&-1!==t.cqa.indexOf("mcl0")?"mcl0":void 0},g.MQb=function(t,e){var i,n;for(o.assert("mcl0"===t,"Unsupported McClearen brand"),t=(i=e.da).te,e=new c.M(120,1).Rg(i.aa).fb,n=0,i=i.Yn;n<t.length&&i<e;)i+=t[n++];return n},g.prototype.parse=function(t){var e=this.W$b();return e.done?(null!=t&&t.oa&&(t.U4b=t.oa),this.view=new DataView(this.view.buffer,this.view.byteOffset,e.offset),(t=this.t5b(t)).done?this.EIb():(this.console.error("Parse error: "+t.error),{Ly:!1,parseError:t.error||"unknown mp4 parse error"})):e.Ocb?{Ly:!1,zDb:e.Ocb}:(this.console.error("Scan error: "+e.error),{Ly:!1,parseError:e.error||"unknown mp4 scan error"})},g.prototype.vB=function(t){return n.dg.vB(this,t)},g.prototype.dy=function(t){return n.dg.dy(this,t)},g.prototype.W$b=function(){var t=new p.Wrb(this.Cw,this.yDb?[d.w4,d.v4]:[],this.config&&this.config.Msc||["moof",d.WNa],this.config&&this.config.xeb),e=r.__assign(r.__assign({},this.config),{oza:!1});return new h.dha(g.LBa,t,this.view,this.console,e).parse()},g.prototype.t5b=function(t){var e,i=new p.lIa(this.view.byteLength),n=Object.create(l.SQ.oe);return this.config&&((this.config.nza||this.config.ylb||this.config.Yea)&&a(l.SQ.CBa,n),this.config.aEa&&a(l.SQ.Rec,n),this.config.ylb&&a(l.SQ.zlb,n)),e=r.__assign(r.__assign({},this.config),{oza:!0}),this.zg=new h.dha(n,i,this.view,this.console,e),(t=this.zg.parse(t)).done&&(this.oe=this.zg.oe),t},g.prototype.EIb=function(){var t,e,i,n,r,a={Ly:!0},o=g.path(this,["moov"]),s=null==o?void 0:o.vB("trak");if(1===(null==s?void 0:s.length)&&(t=s[0].Nq("tkhd"))&&(a.trackId=t.Zc.trackId),t=g.path(o,["trak","mdia","minf","stbl","stsd"]),this.config.nza){if(!t)return{Ly:!1,parseError:"Missing sample descriptions"};a.oa=t.oa,a.csc=t.oe}if((e=(e=g.path(t,["encv","sinf","schi"]))&&(g.path(e,["tenc"])||g.path(e,[d.GOa])))&&(a.mPb={ooc:e.vq,uwa:e.uwa,nqc:!1}),(e=g.path(o,["trak","mdia","mdhd"]))&&(a.aa=e.aa),(e=g.path(o,["mvex","trex"]))&&(a.P8=e&&e.Zc.P8),a.P8&&a.aa&&(a.oa=new c.M(a.P8,a.aa)),(e=g.path(this,["sidx"]))&&(i=(i=g.path(this,[d.w4]))&&i.u1b,n=(n=g.path(this,[d.v4]))&&n.Qk,a.da=e.da,a.RQ=i,a.Qk=n),(i=this.oe.vmaf&&this.oe.vmaf[0])&&(a.yz=i.yz),this.config.aBa&&(i=g.path(o,["mvex"]))&&s&&s.length&&(r=s.reduce(function(t,e){return e.byteOffset>t.byteOffset?e:t})).byteOffset>i.byteOffset&&(s=new Uint8Array(this.view.buffer,this.view.byteOffset,this.view.byteLength),n=b.Llb(s,i.byteOffset,i.byteOffset+i.byteLength),r=b.Llb(s,i.byteOffset+i.byteLength,r.byteOffset+r.byteLength),s.set(r,i.byteOffset),s.set(n,i.byteOffset+r.byteLength)),this.config.Dhb){if(!o)return{Ly:!1,parseError:"Missing movie box"};this.trim(o.byteOffset+o.byteLength),this.config.Yea&&t&&1<t.lP&&e&&(a.Mg=this.Yea(t,e)),void 0===a.Mg&&(o=this.zg.sX?u.concat(this.zg.Ha()):this.view.buffer,a.Mg=[{ee:0,data:o}])}return a.Ly=!0,a.gda=this.zg.offset,a},g.prototype.trim=function(t){var e=this.view.buffer.slice(this.view.byteOffset,this.view.byteOffset+Math.min(t,this.view.byteLength));this.zg.trim(t),this.view=new DataView(e)},g.prototype.Yea=function(t,e){var i,n=Object.keys(t.oe),r=n.filter(function(t){return"encv"!==t});if(!(n.length<2||r.length===n.length||0===r.length)&&(n=g.path(this,["ftyp"]),i=g.ZTb(n)))return n=[],this.zg.e8b(),t.Sgb("encv"),n.push({ee:0,pm:!1,data:u.concat(this.zg.Ha())}),this.zg.G6b(),t.Sgb(r[0]),t=g.MQb(i,e),n.push({ee:t,pm:!0,data:u.concat(this.zg.Ha())}),n},g.LBa={},(e.ex=i=g).LBa[d.hja]=t.default,i.LBa[d.ija]=s.default},function(t){t.exports=function t(e,i){var n;e.__proto__&&e.__proto__!==Object.prototype&&t(e.__proto__,i),Object.getOwnPropertyNames(e).forEach(function(t){void 0!==(n=Object.getOwnPropertyDescriptor(e,t))&&Object.defineProperty(i,t,n)})}},function(t,e,i){var n,r,a,o,s,u;function c(t){t?(this.Gq=t.Gq.slice(),this.yu=t.yu.slice(),this.Ai=t.Ai.slice(),this.trim=t.trim):(this.Gq=[],this.yu=[],this.Ai=[])}function h(t,e,i){return(t=u.call(this,t,e,i)||this).i3a=[],t.De=new s,t}_esm(e),n=i(21),r=i(102),a=i(244),o=i(87),t=i(823),Object.defineProperties(c.prototype,{empty:{get(){return 0===this.Gq.length&&0===this.yu.length&&0===this.Ai.length},enumerable:!0,configurable:!0}}),s=c,u=t.swb,n.__extends(h,u),h.fEb=function(t,e){if(e.offset+e.size<=t.byteLength)switch(e.size){case 1:t.setUint8(e.offset,e.value);break;case 2:e.Z0?t.setInt16(e.offset,e.value):t.setUint16(e.offset,e.value);break;case 4:e.Z0?t.setInt32(e.offset,e.value):t.setUint32(e.offset,e.value);break;case 8:r.assert(!e.Z0),t.setUint32(e.offset,Math.floor(e.value/4294967296)),t.setUint32(e.offset+4,4294967295&e.value);break;default:r.assert(!1)}},Object.defineProperties(h.prototype,{sX:{get(){return!this.De.empty},enumerable:!0,configurable:!0}}),h.prototype.oga=function(t,e){this.De.yu.push({offset:void 0!==e?e:this.offset,value:t,size:1}),void 0===e&&(this.offset+=1)},h.prototype.yhc=function(t){this.De.yu.push({offset:!1,value:t,size:2,Z0:!1})},h.prototype.Sw=function(t,e){this.De.yu.push({offset:void 0!==e?e:this.offset,value:t,size:4,Z0:!1}),void 0===e&&(this.offset+=4)},h.prototype.zhc=function(t,e){this.De.yu.push({offset:void 0!==e?e:this.offset,value:t,size:8,Z0:!1}),void 0===e&&(this.offset+=8)},h.prototype.Bnb=function(t){this.Sw(o.MUa(t))},h.prototype.aFa=function(t,e){this.De.Ai.push({offset:this.offset,Ar:t,value:e}),this.offset+=4},h.prototype.Sn=function(t,e,i){this.De.Gq.push({offset:e,remove:t,zb:i})},h.prototype.fea=function(t,e,i,n){this.De.Gq.push({offset:i,remove:t,replace:e,zb:n})},h.prototype.trim=function(t){this.De.trim=t},h.prototype.e8b=function(){this.i3a.push(new s(this.De))},h.prototype.G6b=function(){this.De=this.i3a.pop()||new s},h.prototype.Ha=function(){var e,t,i,n,r,a,o=this;return 0===this.De.Gq.length&&0===this.De.yu.length&&0===this.De.Ai.length?[void 0===this.De.trim?this.view.buffer:this.view.buffer.slice(0,this.De.trim)]:(this.De.Gq.sort(function(t,e){return t.offset-e.offset}),this.De.yu.sort(function(t,e){return t.offset-e.offset}),this.o$b(),e=this.EQb(),t=this.view.buffer.slice(0,e),i=new DataView(t),this.De.yu.forEach(h.fEb.bind(void 0,i)),this.Dfc(i),this.Cfc(i),n=[],r=void 0!==this.De.trim?Math.min(this.De.trim,this.view.byteLength):this.view.byteLength,a=0,this.De.Gq.filter(function(t){return t.offset<=r}).forEach(function(t){t.offset>a&&(n.push(i.buffer.slice(a,t.offset)),t.offset>i.byteLength&&i!==o.view&&(i=o.view,n.push(i.buffer.slice(e,t.offset)))),t.replace&&n.push(t.replace),a=t.offset+t.remove}),a<e&&n.push(t.slice(a)),a<r&&n.push(this.view.buffer.slice(Math.max(t.byteLength,a),r)),n)},h.prototype.EQb=function(){var e=[],t=this.De.yu[this.De.yu.length-1],i=this.De.Ai[this.De.Ai.length-1];return t&&e.push(t.offset+t.size),i&&e.push(i.offset+4),this.De.Gq.filter(function(t){return t.zb}).forEach(function(t){return e.push(t.zb.byteOffset+4)}),t=Math.max.apply(void 0,e),void 0!==this.De.trim?Math.min(t,this.De.trim):t},h.prototype.o$b=function(){this.De.Gq=this.De.Gq.reduce(function(t,e){var i,n;return 0===t.length?t.push(e):(n=(i=t[t.length-1]).offset+i.remove,e.offset>=n?t.push(e):e.offset+e.remove>n&&(r.assert(i.zb===e.zb),i.remove+=e.offset+e.remove-n,e.replace&&(i.replace=i.replace?a.concat(i.replace,e.replace):e.replace))),t},[])},h.prototype.Dfc=function(a){var o=this;this.De.Ai.forEach(function(i){var n,t,e=a,r=i.offset;o.De.Gq.some(function(t){return!!(t.offset<=i.offset&&t.replace&&t.offset+t.replace.byteLength>=i.offset+4)&&(e=new DataView(t.replace),r=i.offset-t.offset,!0)}),n=i.Ar+(void 0!==i.value?i.value:e.getInt32(r)),t=o.De.Gq.reduce(function(t,e){return e.offset>i.Ar&&e.offset<n?t+(e.remove-(e.replace?e.replace.byteLength:0)):t},0),e.setInt32(r,n-i.Ar-t)})},h.prototype.Cfc=function(i){this.De.Gq.forEach(function(t){var e=(t.remove||0)-(t.replace?t.replace.byteLength:0);if(0!=e)for(t=t.zb;t;)i.setUint32(t.byteOffset,i.getUint32(t.byteOffset)-e),t=t.parent})},e.rwb=h},function(t,e,i){var r,n;function a(t,e,i){this.view=t,this.console=e,this.config=i,this.view=t,this.console=e,this.Od=this.kt=this.offset=0}_esm(e),r=i(150),i(150),n=i(87),a.prototype.U5a=function(t){return new DataView(this.view.buffer,this.view.byteOffset+this.offset,t)},a.prototype.Hd=function(t){for(;this.Od<t;)this.kt=(this.kt<<8)+this.Gd(),this.Od+=8;return this.Od-=t,this.kt>>>this.Od&(1<<t)-1},a.prototype.Gd=function(){var t=this.view.getUint8(this.offset);return this.offset+=1,t},a.prototype.mh=function(t){return t=this.view.getUint16(this.offset,t),this.offset+=2,t},a.prototype.ic=function(t){return t=this.view.getUint32(this.offset,t),this.offset+=4,t},a.prototype.Uda=function(){var t=this.view.getInt32(this.offset,void 0);return this.offset+=4,t},a.prototype.N5b=function(t,e){var i=this.view.getUint32(this.offset+(t?4:0),t);return t=this.view.getUint32(this.offset+(t?0:4),t),e||0==(4278190080&i)||this.console.warn("Warning: read unsigned value > 56 bits"),4294967296*i+t},a.prototype.Tl=function(t,e){return t=this.N5b(t,e),this.offset+=8,t},a.prototype.P5b=function(){var t=this.view.getInt32(this.offset+0,void 0),e=this.view.getUint32(this.offset+4,void 0);return 0!=(4278190080&(0<t?t:-t))&&this.console.warn("Warning: read signed value > 56 bits"),4294967296*t+e},a.prototype.v8b=function(){var t=this.P5b();return this.offset+=8,t},a.prototype.yC=function(){return n.GH(this.ic())},a.prototype.Vda=function(){var t,e,i,n,r,a;function o(t,e){return("000000"+t.toString(16)).slice(2*-e)}return t=this.ic(!0),e=this.mh(!0),i=this.mh(!0),n=this.mh(),r=this.mh(),a=this.ic(),[o(t,4),o(e,2),o(i,2),o(n,2),o(r,2)+o(a,4)].join("-")},a.prototype.Sda=function(t){var e=this.view.byteOffset+this.offset,e=this.view.buffer.slice(e,e+t);return this.offset+=t,e},a.prototype.p8b=function(t){var e=[];if(0===t)return"";t=t||Number.MAX_SAFE_INTEGER;for(var i=this.Gd();0!==i&&0<=--t;)e.push(i),i=this.Gd();return String.fromCharCode.apply(null,e)},a.prototype.Rda=function(t){var e,i;return this.jl(this.config.KS&&r.EVb||r.RP,1,t,e=void 0===e?1:e,i=void 0===i?!0:i)},a.prototype.o8b=function(t){var e,i=10,n=!1;return this.jl(this.config.KS&&r.CVb||r.P$,2,t,i=void 0===i?2:i,n=void 0===n?!0:n,e=void 0===e?!1:e)},a.prototype.Qda=function(t,e,i){var n;return this.jl(this.config.KS&&r.DVb||r.DY,4,t,e=void 0===e?4:e,i=void 0===i?!0:i,n=void 0===n?!1:n)},a.prototype.r8b=function(){for(var t=this.Gd(),e=127&t;128&t;)e=e<<7|127&(t=this.Gd());return e},a.prototype.jl=function(t,e,i,n,r,a){return void 0===r&&(r=!0),t=t(this.view,this.offset,i,n,a=void 0===a?!1:a),this.offset=r||!n||n===e?this.offset+i*(n||e):this.offset+e,t},e.swb=a},function(t,e){_esm(e),e.Llb=function(t,e,i){var n,r,a=Uint8Array;if(null!=t&&t.slice)return t.slice(e,i);for(n=Math.min(t.length,i),r=Math.min(t.length,e),i=new a(Math.max(i-e,0));r<n;r++)i[r-e]=t[r];return i}},function(t,e,i){var n,S,r,T,I,a,o;function s(t){return"number"==typeof t[0]||void 0===t[0]?{jj:t[0],aa:t[1],PA:t[2],oBa:t[3],VK:t[4]}:t[0]}function u(t,e,i){return a.call(this,t,e,i)||this}function c(t,e,i){return o.call(this,t,e,i)||this}_esm(e),n=i(21),S=i(103),t=i(245),r=i(87),T=i(102),I=i(24),o=t.fH,n.__extends(c,o),a=c,n.__extends(u,a),u.prototype.Ogb=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.Ha(n.__assign(n.__assign({},s(t)),{WAa:!1}))},u.prototype.XAa=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.Ha(n.__assign(n.__assign({},s(t)),{WAa:!0}))},u.prototype.Ha=function(t){var e,i,n,r,a,o,s,u,c,h,f,l,d,p,b,g,m,v,y,w;function A(t){return u=s[t],void 0!==(c=u.Nq("traf"))&&void 0!==c.jt&&(void 0!==(d=c.Nq("tfdt"))&&void 0!==(h=c.Nq("trun")))}if(e=t.jj,i=t.aa,n=t.WAa,r=t.PA,a=void 0!==(a=t.oBa)&&a,o=void 0!==(o=t.VK)&&o,t=t.YJ,!this.parse().done)return!1;if(!(s=this.oe.moof)||0===s.length)return!1;if(void 0!==e){for(f=e,e=0;e<s.length;++e){if(!A(e,this.zg.console.trace))return!1;if(T.assert(u&&c&&d&&h&&void 0!==h.Zd),h.Zd>f||n&&h.Zd===f)break;f-=h.Zd}T.assert(u&&c&&d&&h)}else if(!A(e=n?s.length-1:0,this.zg.console.trace))return!1;if(T.assert(u&&c&&d&&h),n&&e<s.length-1?(l=s[e+1],this.zg.Sn(this.view.byteOffset-l.startOffset,l.startOffset)):!n&&0<e&&this.zg.Sn(u.startOffset,0),void 0===(l=c.Nq("tfhd")))return!1;if(d=c.Nq("tfdt"),p=h.Zd,b=c.Nq("saiz"),g=c.Nq("saio"),m=c.Nq(S.FOa),v=c.Nq("sbgp"),!(!b&&!g||b&&g))return!1;if(y=c.Nq("sdtp"),(_=I.dg.vB(this,"mdat"))&&e<_.length)w=_[e];else if(e!==s.length-1)return!1;if(void 0===f&&(f=n?h.Zd:0),"number"==typeof r&&0<r){for(var _=n?f:h.Zd-f,E=Array(_),k=0;k<_;++k)E[k]=n?_-r<=k?-1/0:0:k<r?-1/0:0;r=E}if(h.Ha(c,l,w||this.zg,i,f,c.jt,n))h.sX&&(T.assert(void 0!==h.wjb),T.assert(void 0!==h.eS),!n&&d&&d.Ha(h.wjb),b&&g&&(b.Ha(h.eS,n),g.Ha(m?0:b.BBa,c.jt)),m&&m.Ha(h.eS,n),y&&y.Ha(h.eS,p,n),v&&v.Ha(h.eS,n));else if(n){if(0===h.eS)return!1}else{if(e===s.length-1)return!1;this.zg.Sn(s[e+1].startOffset-u.startOffset,u.startOffset)}return Array.isArray(r)&&w&&this.stream.profile&&void 0!==a&&h.s2b(c,l,w,r,this.stream.profile,a,o,t),n=(i=this.zg.Ha()).reduce(function(t,e){return t+e.byteLength},0),i={ya:i,length:n,uK:this.zg.view.byteLength},h.sX&&!w&&(i.FR=c.jt+h.FR,i.ns=h.ns),i},e.dx=i=u,e.AQ=function(t){var e=new ArrayBuffer(8),i=new DataView(e);return i.setUint32(0,t+8),i.setUint32(4,r.MUa("mdat")),e}},function(t,e,i){var n,s,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),n=i(21),t=i(245),s=i(244),r=t.fH,n.__extends(a,r),a.prototype.Ha=function(t){var e,r,a,o=this;return!!this.parse().done&&(!(!(e=this.oe.moov)||0===e.length)&&(!!(r=e[0].dy("tenc"))&&(a=new Uint8Array(r.vq),t.forEach(function(t){for(var e=t.from,i=!0,n=0;n<e.length;n++)if(a[n]!==e[n]){i=!1;break}i&&o.zg.fea(t.from.length,t.to,r.uwa)}),s.concat(this.zg.Ha()))))},e.yia=i=a},function(t,e,i){_esm(e),t=i(49),e.u=t.u},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,d,p;function b(t,e,i){this.eX=e,this.Ec=t.filter(function(t){return t.gEa[u.Rm.q5]}).map(function(t){return{track:t,stream:t.gEa[u.Rm.q5],id:t.Z2a[u.Rm.q5]}}),i||(this.Ec=this.Ec.filter(function(t){return t.track.Ng===e}))}function g(t,e,i){var n;this.xL=e,this.iw=i,n=t[0],this.HL=n.streams.map(function(t){return{track:n,WP:t.Ijb,stream:t}})}function m(t,e,i,n,r){function a(t,e){return t.bitrate>e.bitrate?t:e}this.log=t,this.xL=i,this.eX=n,this.HL=e.map(function(t){var e=t.streams.reduce(a);return{track:t,WP:e.MC?e.MC.offset+e.MC.size:void 0,stream:e}}),r||(this.HL=this.HL.filter(function(t){return t.track.Ng===n}))}function v(t,e,i,n,r,a){this.JWb=t,this.KWb=e,this.C6b=i,this.RGb=n,this.BJ=r,this.$f=a,this.Aa=a.jb("HLSPlaylistBuilderImpl")}_esm(e),e.fwb=e.qwb=e.Aob=e.rKa=void 0,t=i(0),n=i(1),r=i(381),a=i(383),o=i(4),s=i(37),u=i(42),c=i(392),h=i(393),f=i(235),l=i(7),d=i(829),p=i(49),v.prototype.Wi=function(t,n){var e,i,r,a=this,o=t.hb;return t=this.iSb(o,n),i=this.LVb(o,n),r=null!=(r=null==(e=o.m0)?void 0:e.xS)?r:o.A1.find(function(t){return t.id===(null==(t=o.Q8)?void 0:t[0].qkb)}).Ng,e=new b(o.A1,r,this.BJ.aoa),Promise.all([t,i,e]).then(function(t){var e,i=rt(t);return t=i.next().value,e=i.next().value,i=i.next().value,t={audio:t.getMetadata(),video:e.getMetadata(),text:i.getMetadata(),h2a:t.ota(),wMb:i.ota(),duration:o.duration,Zl:o.Zl},e=a.RGb.ESb(t),n("h_s"),{H0b:a.C6b.transform(t,e),UGb:e,Ycc:t}})},v.prototype.LVb=function(t,e){var i=new g(t.bD,this.BJ.K8a,this.BJ.iw);return this.T2a(i.HL,p.u.J,e).then(function(t){return i.qCa(t),i})},v.prototype.iSb=function(e,t){var i=null!=(i=null==(i=e.m0)?void 0:i.zo)?i:e.dv.find(function(t){return t.id===(null==(t=e.Q8)?void 0:t[0].zo)}).Ng,n=new m(this.Aa,e.dv,this.BJ.Gy,i,this.BJ.aoa);return this.T2a(n.HL,p.u.P,t).then(function(t){return n.qCa(t),n})},v.prototype.mza=function(t,e,i,n){if(t=this.KWb.parse(e,t,i))return t;this.Aa.error("Failed to parse headers",{type:e===p.u.P?"audio":"video",downloadableId:n.stream.hq})},v.prototype.T2a=function(t,n,r){var a=this;return Promise.all(t.map(function(e,i){if(e.WP)return a.JWb.download({urls:e.stream.urls,offset:0,length:e.WP}).then(function(t){return r("h_"+(0===n?"A":"V")+"_"+i+"_s"),a.mza(t,n,n==p.u.P?a.BJ.Gy:a.BJ.gC,e)}).catch(function(){r("h_"+e.track.Hi[0]+"_"+i+"_f"),a.Aa.warn("Failed to download and parse headers for "+e.stream.hq)});a.Aa.warn("Stream data offset is missing",{downloadableId:e.stream.hq})}))},i=v,i=t.__decorate([n.$(),t.__param(0,n.l(r.EKa)),t.__param(1,n.l(a.IKa)),t.__param(2,n.l(c.uKa)),t.__param(3,n.l(h.sHa)),t.__param(4,n.l(f.fia)),t.__param(5,n.l(l.ob))],i),e.rKa=i,m.prototype.qCa=function(i){var n=this;if(!i.find(function(t){return void 0!==t}))throw s.jd.ynb(o.Z.nLa,o.Y.Uia);this.Ec=this.HL.map(function(t,e){if(e=i[e])return{track:t.track,stream:t.stream,da:e,xL:n.xL}}).filter(d.fwa)},m.prototype.getMetadata=function(){return this.Ec},m.prototype.ota=function(){var t,e=this;return!this.Ec.find(function(t){return t.track.Ng===e.eX})&&0<this.Ec.length?(t=this.Ec[0].track.Ng,this.log.warn("Did not find metadata for audio track "+this.eX+", falling back to "+t),t):this.eX},e.Aob=m,g.prototype.qCa=function(i){var t,n=this;if(!i.find(function(t){return void 0!==t}))throw s.jd.ynb(o.Z.nLa,o.Y.Via);t=this.HL.map(function(t,e){if(e=i[e])return{track:t.track,stream:t.stream,da:e,xL:n.xL}}).filter(d.fwa),this.Ec=this.qUb(t)},g.prototype.getMetadata=function(){return this.Ec},g.prototype.qUb=function(t){var e,i,n=this;return t.sort(function(t){return t.stream.bitrate}),-1!==(e=t.findIndex(function(t){return(null!=(t=t.stream.eb)?t:0)>=n.iw}))&&e!==t.length-1&&(i=t[e],t.splice(e,1),t.push(i)),t.reverse(),t},e.qwb=g,b.prototype.ota=function(){return this.eX},b.prototype.getMetadata=function(){return this.Ec},e.fwb=b},function(t,e){_esm(e),e.fwa=void 0,e.fwa=function(t){return null!=t}},function(t,e,i){var n,r,p,a,o,b;function s(t){this.Aa=t.jb("HLSPlaylistTransformerImpl"),this.Xgc=a.d3.ut(),this.QEb=o.Eha.ut()}_esm(e),e.tKa=void 0,t=i(0),n=i(1),r=i(7),p=i(127),a=i(246),o=i(394),b=[0,1],s.prototype.transform=function(t,u){var c,h=this,f=["#EXTM3U","#EXT-X-VERSION:8","#EXT-X-INDEPENDENT-SEGMENTS"],l=t.text,e=t.audio,i=t.video,o=t.duration,d=t.h2a,s=t.wMb;return l.forEach(function(a){b.forEach(function(t){var e=0===t,i=a.stream,n=a.track,r=u.get(a.id),e=e?r.tR:r.Cea,i=h.uVb({url:e.url,duration:o/1e3,size:i.size,pn:"Manifest for subtitles "+n.language+' stream "'+n.AF+'", '+n.Ng+", cdn "+e.Bo});h.Aa.trace("Text variant manifest",i.join("\n")),t=h.vVb({groupId:t,name:n.AF,Nva:n.Ng===s,uq:n.Taa,BYb:n.Hi===p.$q.yga,language:n.language,uri:h.Fba(i)}),f.push(t)})}),e.forEach(function(s){b.forEach(function(t){var e=0===t,i=s.stream,n=s.track,r=s.da,a=s.xL,o=u.get(i.hq),e=e?o.tR:o.Cea,i=h.X6a({url:e.url,WP:i.MC.offset+i.MC.size,da:r,Gkb:Math.floor(a/1e3),pn:"Manifest for audio "+n.language+' stream "'+n.AF+'", '+n.Ng+", cdn "+e.Bo});h.Aa.trace("Audio variant manifest",i.join("\n")),t=h.jSb({groupId:t,language:n.language,name:n.AF,Nva:n.Ng===d,uri:h.Fba(i)}),f.push(t)})}),c=this.QEb[e[0].track.profile],i.forEach(function(s){b.forEach(function(t){var e=0===t,i=s.stream,n=s.track,r=s.da,a=s.xL,o=u.get(i.hq),o=e?o.tR:o.Cea,e=0<l.length,n=h.X6a({url:o.url,WP:i.MC?i.MC.offset+i.MC.size:i.Ijb,da:r,Gkb:Math.floor(a/1e3),pn:"Manifest for video bitrate "+i.bitrate+", stream "+n.Ng+", cdn "+o.Bo});h.Aa.trace("Video variant manifest",n.join("\n")),t=h.MVb({groupId:t,tW:1e3*i.bitrate,dFb:1e3*i.bitrate,gZb:0<=i.CE.indexOf("-hdr-")||0<=i.CE.indexOf("-dv5-"),framerate:(i.g5a/i.f5a).toFixed(3),Vl:i.mBa+"x"+i.ohb,Sgc:h.Xgc[i.CE],MEb:c,$dc:e}),f.push(t),t=h.Fba(n),f.push(""+t)})}),this.Aa.trace("Primary manifest",f.join("\n")),this.Fba(f)},s.prototype.jSb=function(t){var e=t.Nva;return["#EXT-X-MEDIA:TYPE=AUDIO",'GROUP-ID="group_'+t.groupId+'"','CHANNELS="2"','LANGUAGE="'+t.language+'"','NAME="'+t.name+'"',"DEFAULT="+(e?"YES":"NO"),"AUTOSELECT="+(e?"YES":"NO"),'URI="'+t.uri+'"'].join(", ")},s.prototype.X6a=function(t){var i=["#EXTM3U","# "+t.pn,"#EXT-X-VERSION:8","#EXT-X-TARGETDURATION:"+t.Gkb,"#EXT-X-MEDIA-SEQUENCE:0","#EXT-X-PLAYLIST-TYPE:VOD",'#EXT-X-DEFINE:NAME="U", VALUE="'+t.url+'"','#EXT-X-MAP:URI="{$U}",BYTERANGE="'+t.WP+'@0"',"#EXT-X-PROGRAM-DATE-TIME:2021-07-20T08:19:00.000-07:00"];return t.da.forEach(function(t,e){i.push("#EXTINF:"+t.duration.toFixed(3)+","+t.ea.toFixed(3)),i.push("#EXT-X-BYTERANGE:"+t.YFb+"@"+t.byteOffset),i.push("{$U}&fi="+e)}),i.push("#EXT-X-ENDLIST"),i},s.prototype.MVb=function(t){var e=t.groupId,i=["#EXT-X-STREAM-INF:BANDWIDTH="+t.tW,"AVERAGE-BANDWIDTH="+t.dFb,"VIDEO-RANGE="+(t.gZb?"PQ":"SDR"),"FRAME-RATE="+t.framerate,'AUDIO="group_'+e+'"',"RESOLUTION="+t.Vl,'CODECS="'+t.Sgc+","+t.MEb+'"'];return t.$dc&&i.push('SUBTITLES="subs_'+e+'"'),i.join(", ")},s.prototype.uVb=function(t){var e=t.duration;return["#EXTM3U","# "+t.pn,"#EXT-X-VERSION:8","#EXT-X-TARGETDURATION:"+Math.floor(e),"#EXT-X-MEDIA-SEQUENCE:0","#EXT-X-PLAYLIST-TYPE:VOD",'#EXT-X-DEFINE:NAME="U", VALUE="'+t.url+'"','#EXT-X-MAP:URI="{$U}"',"#EXT-X-PROGRAM-DATE-TIME:2021-07-20T08:19:00.000-07:00","#EXTINF:"+e.toFixed(3),"#EXT-X-BYTERANGE:"+t.size+"@0","{$U}","#EXT-X-ENDLIST"]},s.prototype.vVb=function(t){var e=t.Nva,i=t.language,n=t.uri,e=["#EXT-X-MEDIA:TYPE=SUBTITLES",'GROUP-ID="subs_'+t.groupId+'"','NAME="'+t.name+'"',"DEFAULT="+(e?"YES":"NO"),"AUTOSELECT="+(e?"YES":"NO"),"FORCED="+(t.uq?"YES":"NO")];return t.BYb&&e.push('CHARACTERISTICS="public.accessibility.transcribes-spoken-dialog,public.accessibility.describes-music-and-sound"'),e.push('LANGUAGE="'+i+'"'),e.push('URI="'+n+'"'),e.join(", ")},s.prototype.Fba=function(t){return"data:application/vnd.apple.mpegurl;charset=utf-8,"+encodeURIComponent(t.join("\n"))},i=s,i=t.__decorate([n.$(),t.__param(0,n.l(r.ob))],i),e.tKa=i},function(t,e,i){var n,r,a,o,s;function u(t,e){var i;(i=this).Feb=e,this.uza=e(),this.Aa=t.jb("PlayerPlaydataMonitorImpl"),o.nf.addListener(o.Vo,function t(){i.uza.then(function(t){i.Aa.trace("Unloading PBO Playdata Services"),t.close()}),o.nf.removeListener(o.Vo,t)})}_esm(e),e.CQa=void 0,t=i(0),n=i(1),r=i(7),a=i(152),o=i(62),s=i(16),u.prototype.Hq=function(e,i){this.uza.then(function(t){t.Hq(i,!0,function(t){return e.close(t)}),t.eDa(i),e.addEventListener(s.Na.Uza,function(){e.Wr()&&t.dib(i).catch(function(t){(t=t.mR)&&e.close(t)})}),e.addEventListener(s.Na.Im,function(){t.Hea(i).catch(function(t){(t=t.mR)&&e.close(t)})}),e.addEventListener(s.Na.gn,function(){t.Hea(i).catch(function(t){(t=t.mR)&&e.close(t)})})})},u.prototype.h1=function(e){return this.uza.then(function(t){return t.Wjb(),t.h1(e).catch()})},i=u,i=t.__decorate([n.$(),t.__param(0,n.l(r.ob)),t.__param(1,n.l(a.jU))],i),e.CQa=i},function(t,e,i){var n,r,a,o;function s(t){this.Wxa={},this.waa={},this.mba=-1,this.vDa=new a.$b(null),this.aAa=new a.$b(null),this.Aa=t.jb("StreamChangeDetector")}_esm(e),e.OSa=void 0,t=i(0),n=i(1),r=i(63),a=i(70),i=i(7),s.prototype.xa=function(t,e,i){var n=this;t.forEach(function(e){e.stream.urls.forEach(function(t){n.Wxa[t.url]=[e,t.Bo]})}),this.Wqa=e,this.qMb=i,new PerformanceObserver(function(t){n.Hfc(t.getEntries())}).observe({entryTypes:["resource"],buffered:!1})},s.prototype.wib=function(t){var e,i,n;if(this.Wqa&&(i=this.u$(t))!==this.mba){for(this.mba=i;0<=i&&!this.waa[i];)i--;e=(n=rt(null!=(e=this.waa[i])?e:[this.Wqa,this.qMb])).next().value,n=n.next().value,this.Aa.debug("Setting time to "+t+", using metadata from fragment "+i+" for "+r.acb(e.track.type)+" track with bitrate "+e.stream.bitrate+" from cdn "+n),i=(t=e.da[this.mba]).ea,this.aAa.set({stream:e,kn:{startTime:Math.floor(1e3*i),endTime:Math.floor(1e3*(i+t.duration))},Ao:n})}},s.prototype.u$=function(t){var e,i,n,r=this.Wqa.da,a=0;if((t/=1e3)>=r[e=r.length-1].ea)return e;for(;a<=e;)if(t<(n=r[i=a+Math.floor((e-a)/2)]).ea)e=i-1;else{if(!(t>=n.ea+n.duration))return i;a=i+1}return r.length-1},s.prototype.Hfc=function(t){var r=this;t.filter(function(t){return"video"===t.initiatorType}).forEach(function(t){var e,i,n=t.name.indexOf("&fi=");0<n&&(e=t.name.substring(0,n),n=Number(t.name.substring(n+4)),r.Wxa[e]&&(t=(i=rt(r.Wxa[e])).next().value,i=i.next().value,e&&!Number.isNaN(n)&&t&&(r.waa[n]&&(r.mba=-1),r.waa[n]=[t,i],e=t.da[n].ea,r.vDa.set(t,{FI:Math.floor(1e3*e),Ao:i}))))})},o=s,o=t.__decorate([n.$(),t.__param(0,n.l(i.ob))],o),e.OSa=o},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e,i){_esm(e),(t=i(0)).__exportStar(i(844),e),t.__exportStar(i(845),e),t.__exportStar(i(846),e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e,i){_esm(e),i(77)},function(t,e,i){_esm(e),i(77)},function(t,e){_esm(e),e.zD=void 0,(t=e.zD||(e.zD={}))[t.HAVE_NOTHING=0]="HAVE_NOTHING",t[t.pD=1]="HAVE_SOMETHING",t[t.oD=2]="HAVE_MINIMUM",t[t.CT=3]="HAVE_ENOUGH"},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e,i){var n,r;_esm(e),e.za=e.wda=void 0,n=i(396),(i=r=r||{})[i.Dg=0]="STARTING",i[i.ed=1]="BUFFERING",i[i.eg=2]="REBUFFERING",i[i.Gc=3]="PLAYING",i[i.Ns=4]="STOPPING",i[i.Uj=5]="STOPPED",i[i.Ug=6]="PAUSED",e.za=r,e.wda=function(t){return t===n.Nc.ed?r.ed:t===n.Nc.eg?r.eg:t===n.Nc.uU?r.ed:t===n.Nc.Vj?r.Gc:r.Dg}},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e),e.tT=void 0,(t=e.tT||(e.tT={}))[t.$l=0]="skipped",t[t.GDb=1]="adjustment"},function(t,e,i){_esm(e),(t=i(0)).__exportStar(i(868),e),t.__exportStar(i(869),e),t.__exportStar(i(870),e),t.__exportStar(i(871),e),t.__exportStar(i(872),e),t.__exportStar(i(873),e),t.__exportStar(i(874),e),t.__exportStar(i(875),e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e,i){_esm(e),(t=i(0)).__exportStar(i(877),e),t.__exportStar(i(878),e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e),e.Ou=void 0,(t=e.Ou||(e.Ou={}))[t.Bub=0]="PLAYGRAPH_CHANGED",t[t.Cub=1]="PLAYGRAPH_UNCHANGED",t[t.Ltb=2]="NO_MATCHING_SEGMENT_FOUND",t[t.zvb=3]="SEGMENT_ALREADY_APPENDED_REMOVAL_NOT_SUPPORTED",t[t.xrb=4]="EXISTING_SEGMENT_VIEWABLE_ID_MISMATCHED",t[t.wrb=5]="EXISTING_SEGMENT_START_TIME_MISMATCHED",t[t.Avb=6]="SEGMENT_EXTENSION_NOT_SUPPORTED",t[t.Tnb=7]="APPENDED_PAST_TRUNCATION_POINT",t[t.Xsb=8]="LOSS_OF_POSITION"},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e,i){var n;function r(t){this.config=t}_esm(e),e.gGa=void 0,n=i(6),r.prototype.un=function(t,e){return this.config.j1||e!==n.Nc.Vj?t.filter(function(t){return t.Ev}):t},e.gGa=r},function(t,e,i){var a,o,s;function n(t){this.console=t,this.i2a=[],this.QZa={},this.D2a=!1}_esm(e),e.xH=void 0,t=i(0),a=i(10),o=t.__importDefault(i(3)),s=i(397),n.prototype.ws=function(t,e){this.i2a=t,void 0!==e?this.QZa[e]=t:this.D2a||(this.console.warn("StreamFilters: Bitrate filters received with undefined viewable id"),this.D2a=!0)},n.prototype.un=function(e){var t,i,n,r=this;if(0===e.length)return e;if(void 0===(i=e[0].N))return this.console.error("StreamFilters: Stream has undefined viewable id"),e;try{null!=(t=o.default.mv)&&t.call(o.default,i)}catch(t){return this.console.error("StreamFilters: createFilteredVideoStreamList: "+t),e}return n=null!=(t=this.QZa[i])?t:this.i2a,a.S&&this.console.trace("VideoBitrateRangesFilter: filtering ".concat(e.length," streams with ").concat(JSON.stringify(n))),e=e.filter(function(t){return s.joa(t.profile,t.bitrate,n,r.console).inRange}),a.S&&this.console.trace("VideoBitrateRangesFilter: ... ".concat(e.length," streams in range")),e},e.xH=i=n},function(t,e){function i(t){var e=this;t.pS&&t.pS.enabled&&t.pS.profiles&&t.pS.profiles.length&&"keepLowest"===t.pS.action&&(this.O$a={},t.pS.profiles.forEach(function(t){return e.O$a[t]=!0}))}_esm(e),e.hGa=void 0,i.prototype.un=function(t){var e={},i=this.O$a;return void 0===i?t:t.filter(function(t){return!i[t.profile]||!e[t.profile]&&(e[t.profile]=!0)})},e.hGa=i},function(t,e){function i(t){this.config=t}_esm(e),e.fGa=void 0,i.prototype.un=function(t){var e=this.config;return t.filter(function(t){return!(void 0!==t.eb&&(t.eb<e.eK||t.eb>e.pbb)||(void 0===t.eb||e.eK<=0)&&t.bitrate<e.aya||(void 0===t.eb||1/0===e.pbb)&&t.bitrate>e.W0b)})},e.fGa=i},function(t,e,i){var n;function r(t,e){return e=Math.max(t,e),isNaN(e)?t||-1/0:e}function a(t){this.config=t,this.Xda=0,this.state=n.Nc.Uj,this.xcb=r(t.aya,t.dca),this.gya=r(t.eK,t.WZ)}_esm(e),e.TFa=void 0,n=i(6),a.prototype.un=function(t,e){var i=this;if(e!==this.state){if((this.state=e)===n.Nc.ed||e===n.Nc.uU)return t;e===n.Nc.eg&&this.sgb()}return t.filter(function(t){return!(void 0!==t.eb&&t.eb<i.gya||(void 0===t.eb||i.gya<0)&&t.bitrate<i.xcb)})},a.prototype.sgb=function(){++this.Xda,this.gya=r(this.config.eK,this.config.WZ-this.config.V1b*this.Xda),this.xcb=this.config.aya||-1/0},e.TFa=a},function(t,e,i){var c;function n(t){this.config=t}_esm(e),e.eGa=void 0,c=i(22),n.prototype.Nbc=function(t){return t%100+1<=this.config.zza},n.prototype.un=function(t){var e,i,n,r,a,o,s,u=Number(null==(e=t[0])?void 0:e.L);if(!(this.config.n9&&this.Nbc(u)&&0<this.config.oea.length))return t;if(e=t.length,r=null!=(i=t[e-1].nea)?i:0,i=c.Xc(this.config.oea,function(t){return t.Vrc>=r&&t.xhb<=r})){for(u=0;u<e&&(a=t[Math.max(u-1,0)],(null!=(s=(o=t[u]).nea)?s:0)<i.xhb||(null!=(s=a.nea)?s:0)<i.xhb||(s=null!=(s=o.eb)?s:1/0,(a=null!=(n=a.eb)?n:1/0)<i.erc||a<i.drc&&o.bitrate<i.maxBitrate||!s&&o.bitrate<i.Fqc));u++);return t.slice(0,u)}return t},e.eGa=n},function(t,e,i){var n;_esm(e),e.Lia=e.Vga=void 0,n=i(22),e.Vga={un:function(t){return t.filter(function(t){return t.Ur&&!t.HB})}},e.Lia={un:function(t){return(t=n.Xc(t,function(t){return!!t.Ur&&!t.HB}))?[t]:[]}}},function(t,e){_esm(e),e.Mia=void 0,e.Mia={un:function(t){return t.length?[t[0]]:[]}}},function(t,e,i){var n,r;_esm(e),e.EE=e.DE=void 0,n=i(399),r=i(104),e.DE=function(t,e){return e&&null!=t&&t.S8a&&(e=new r.Ku(e).or(r.iH)),new r.Ku(r.Vga).and(null!=e?e:r.iH).or(r.Lia,n.DM.cJ).or(r.Mia,n.DM.cJ)},e.EE=function(t,e){return e&&t.S8a&&(e=new r.Ku(e).or(r.iH)),new r.Ku(r.Vga).and(new r.gGa(t)).and(new r.fGa(t)).and(new r.TFa(t)).and(new r.hGa(t)).and(t.n9?new r.eGa(t):r.iH).and(null!=e?e:r.iH).or(r.Lia,n.DM.cJ).or(r.Mia,n.DM.cJ)}},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e,i){_esm(e),(t=i(0)).__exportStar(i(901),e),t.__exportStar(i(405),e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e,i){var n;function r(t,e){var i;return void 0===e&&(e=r),i="",t.pP&&(i=null==t?void 0:t.pP.map(e).reduce(function(t,e){return"".concat(t,",").concat(e)})),"".concat(null==t?void 0:t.name,"::").concat(null==t?void 0:t.message,"::{").concat(null==t?void 0:t.stack,"}[").concat(i,"]")}function a(t,e){return(t=n.call(this,a.QRb(t,e))||this).Xxb=e,t.name="AggregateError",t}_esm(e),e.Gga=void 0,i=i(0),n=Error,i.__extends(a,n),a.QRb=function(t,e){return e.reduce(function(t,e){return"".concat(t,"\n").concat(e)},t)},a.stringify=function(t){return r(t)},Object.defineProperties(a.prototype,{pP:{get(){return this.Xxb},configurable:!0}}),e.Gga=a},function(t,e){_esm(e)},function(t,e){function n(){}_esm(e),e.Xja=void 0,e.Xja=(n.decode=function(t){return Object.assign({initialSegment:t.yd,segments:n.kMb(t.O)},void 0!==t.xe?{transitionType:t.xe}:{})},n.encode=function(t){return Object.assign({yd:t.initialSegment,O:n.kPb(t.segments)},void 0!==t.transitionType?{xe:t.transitionType}:{})},n.kPb=function(i){return Object.keys(i).reduce(function(t,e){return t[e]=n.jPb(i[e]),t},{})},n.jPb=function(t){return Object.assign({N:t.viewableId,va:t.startTimeMs},t.endTimeMs?{wa:t.endTimeMs}:{},t.defaultNext?{Rb:t.defaultNext}:{},t.weight?{weight:t.weight}:{},t.transitionType?{xe:t.transitionType}:{},t.next?{next:n.hPb(t.next)}:{},t.exitZones?{lq:t.exitZones}:{},t.playbackRate?{playbackRate:t.playbackRate}:{},t.uxSegment?{pc:t.uxSegment}:{},t.type?{type:t.type}:{},void 0!==t.fadeIn?{yv:t.fadeIn}:{},void 0!==t.fadeOut?{zv:t.fadeOut}:{})},n.hPb=function(i){return Object.keys(i).reduce(function(t,e){return t[e]=n.iPb(i[e]),t},{})},n.iPb=function(t){return Object.assign({},void 0!==t.weight?{weight:t.weight}:{},t.transitionType?{xe:t.transitionType}:{})},n.kMb=function(i){return Object.keys(i).reduce(function(t,e){return t[e]=n.jMb(i[e]),t},{})},n.jMb=function(t){return Object.assign({viewableId:t.N,startTimeMs:t.va},t.wa?{endTimeMs:t.wa}:{},t.Rb?{defaultNext:t.Rb}:{},t.weight?{weight:t.weight}:{},t.xe?{transitionType:t.xe}:{},t.next?{next:n.hMb(t.next)}:{},t.lq?{exitZones:t.lq}:{},t.playbackRate?{playbackRate:t.playbackRate}:{},t.pc?{uxSegment:t.pc}:{},t.type?{type:t.type}:{},void 0!==t.yv?{fadeIn:t.yv}:{},void 0!==t.zv?{fadeOut:t.zv}:{})},n.hMb=function(i){return Object.keys(i).reduce(function(t,e){return t[e]=n.iMb(i[e]),t},{})},n.iMb=function(t){return Object.assign({},void 0!==t.weight?{weight:t.weight}:{},t.xe?{transitionType:t.xe}:{})},n)},function(t,e,i){var a;function b(t){return"delayedSeamless"===t?"lazy":t}function g(t){var e;return t.ui?null!=(e=t.ui.interactionZones)&&e.length&&e[0].length?e[0][0]-t.startTimeMs:null!=(t=t.ui.interactionZonesV2)&&t.length&&t[0].length?t[0][0]:void 0:void 0!==t.earliestSkipRequestOffset?t.earliestSkipRequestOffset:void 0}_esm(e),e.$A=void 0,a=i(153),e.$A=function(f,t){var e,i,l,d,p,n,r=void 0===t?{}:t;return t=r.Fd,e=r.yd,i=r.O,r=r.config,l=!(!r||-1===r.Lsa.indexOf(f.viewableId)),n=f,d=!Object.keys(n.segments).some(function(t){return void 0!==g(n.segments[t])})&&(null==r?void 0:r.Ksa)||0,r=new a.jx,p=i||f.segments,r.fL(null!=e?e:f.initialSegment).Iib(null!=t?t:f.mediaTypes).ECa(l?"immediate":b(f.transitionType)).yCa(Object.keys(p).reduce(function(t,e){var i,n,r,a,o,s,u,c=p[e],h=i=null==(i=c.weight)?c.next&&(l||null!=(h=c.exitZones)&&h.length)?(a=c.next,o=Object.keys(a),(s=o.length)?o.reduce(function(t,e){return t+(a[e].weight||0)},0)/s:void 0):void 0:i;if(i=c.exitZones)n=void 0;else t:{if(l&&c.endTimeMs){if(n=c.endTimeMs-c.startTimeMs,(r=g(c))&&r<n){n=[[r,n]];break t}if(d&&d<n){n=[[n-d,n]];break t}}n=void 0}return r=l?n?void 0:c.transitionHint||"lazy":c.transitionHint,h={N:f.viewableId,va:c.startTimeMs,wa:null!=(o=c.endTimeMs)?o:1/0,xe:b(r),lq:i||n,weight:h},c.defaultNext&&(h.Rb=c.defaultNext),c.next&&(h.next=(u=c.next,Object.keys(u).reduce(function(t,e){var i=(n=u[e]).weight,n=n.transitionType||n.transitionHint;return e=t[e]={},void 0!==i&&(e.weight=i),n&&(e.xe=b(n)),t},{}))),t[e]=h,t},{})),r.Wi()}},function(t,e,i){var r;_esm(e),e.oG=void 0,r=i(153),e.oG=function(t,e,i){var n=new r.jx;return n.fL(e).ECa("lazy").Iib(i).ng(e,{N:t,va:0,wa:1/0}),n.Wi()}},function(t,e,i){var v,n,r,a;function o(e){return a.dW(Object.keys(e.O).map(function(t){return e.O[t].N}))}function y(t){return null==t?1/0:t}function w(t,e){return null==t?1/0===y(e.wa):t>=e.va&&t<=y(e.wa)}_esm(e),e.Uxa=void 0,v=i(0),n=i(153),r=i(406),a=i(253),e.Uxa=function(p,b){var g,i,m=function(t){for(var e=t.yd,i=[];e&&(i.push(e),e=t.O[e].next)&&(e=Object.keys(e)).length;)r.assert(1===e.length,"Expected linear playgraph"),e=e[0];return i}(b),t=o(p),e=o(b),t=a.eZa(t,e);return r.assert(1===t.length,"Source and content playgraphs should share one viewable"),g=t[0],e=Object.keys(p.O).filter(function(t){return p.O[t].N===g}).map(function(t){for(var e,i,n,r,a,o,s,u=p.O[t],c=u.va,h=y(u.wa),f=0===c,l=[],d=0;d<m.length;++d)if(e=m[d],i=b.O[e],n=function(e,i){return Object.keys(i.O).some(function(t){return t=i.O[t],e.N===t.N&&e.va>t.va&&(!t.wa||!!e.wa&&(1/0===e.wa||e.wa<t.wa))})}(p.O[t],b),i.N!==g)f&&l.push({id:t+":"+e,G:v.__assign(v.__assign({},i),{pc:t})});else if(f){if((a=Math.max(u.va,i.va))<(r=(o=!Number.isFinite(h)&&d==m.length-1)?h:Math.min(h,y(i.wa)))&&(n=1/0!==h||!n&&!o?1/0===r?null:r:u.wa,l.push({id:t+":"+e,G:v.__assign(v.__assign({},i),{va:a,wa:n,pc:t})})),w(h,i)){if(h===y(i.wa))for(d+=1;d<m.length&&(c=m[d],(h=b.O[c]).N!==g);++d)l.push({id:t+":"+c,G:v.__assign(v.__assign({},h),{pc:t})});break}}else w(c,i)&&(f=!0,h<=y(i.wa)?l.push({id:t,G:u}):(a=u.va,n=(o=!Number.isFinite(h)&&d==m.length-1)&&n?u.wa:Math.min(h,y(i.wa)),l.push({id:t+":"+e,G:v.__assign(v.__assign({},i),{va:a,wa:n,pc:t})})));for(l.length||l.push({id:t,G:v.__assign(v.__assign({},u),{pc:t})}),d=0;d<l.length-1;++d)c=l[d+1].id,l[d].G=v.__assign(v.__assign({},l[d].G),{Rb:c,next:((s={})[c]={},s)});return(s=l[l.length-1]).G=v.__assign(v.__assign({},s.G),{Rb:u.Rb,next:u.next}),{id:t,G:u,okb:l}}),i=e.reduce(function(t,e){return t[e.id]=e.okb[0].id,t},{}),t=new n.jx,e=e.reduce(function(e,t){return t.okb.forEach(function(t){return e[t.id]=t.G}),e},{}),t.yCa(e,function(){return!0},i).tYa(p.O,function(t,e){return!i[e]},i,function(t,e){return v.__assign(v.__assign({},t),{pc:e})}).fL(i[p.yd]||p.yd).Wi()}},function(t,e,i){var E,k,S,T,I;function h(t,e,i,n,r){var a,o,s,u=t.O[e],c=i.O[u.pc];return n=n.pc,a=O(u.wa)-u.va,a=void 0===r?r=0:r+a,u.N===(null==c?void 0:c.N)?{S1:O(u.wa),IW:r}:u.pc===n&&(e=E.__read((o=t,s=e,Object.keys(o.O).filter(function(t){return o.O[t].Rb===s})),1)[0])&&t.O[e].pc===u.pc?h(t,e,i,u,a):{S1:c.va,IW:a}}function s(o,s,u){var t,a,i,n,r,c,h,f,e,l=function(t,i,n){var e,r,a,o,s,u,c,h,f,l,d;if(r=t.O[n.G],T.assert(r,"Graph position "+n.G+" does not exist in UX playgraph"),a=n.offset,T.assert(0<=a,"Graph position offset "+a+" cannot be negative"),T.assert(!r.wa||a<=r.wa-r.va,"Graph position "+a+" offset outside segment"),i.O[n.G])return n;if(o=Object.keys(i.O).filter(function(t){return i.O[t].pc===n.G}),T.assert(0<o.length,"No segments found in combined playgraph that point back to the ux segment"),s={},u=0,o.forEach(function(t){if(void 0===s[t]){for(var e=0;t;)s[t]=[u,e++],t=i.O[t].Rb;++u}}),o.sort(function(t,e){return s[t][0]!==s[e][0]?1:s[t][1]-s[e][1]}),c=r.va+a,h=o.filter(function(t){return i.O[t].N===r.N}),f=E.__read(o,1)[0],h=h.map(function(t){return[t,i.O[t]]}).filter(function(t){var e=(t=E.__read(t,2))[0];return c>=t[1].va||e===f}),(h=S.Xc(h,function(t){var e=(t=E.__read(t,2)[1]).Rb?i.O[t.Rb]:void 0;return!t.wa||!!t.wa&&c<t.wa||(null==e?void 0:e.pc)!==n.G&&c>=t.va}))&&(l=E.__read(h,2),h=l[0],l=l[1],d=(isFinite(c)?c:null!=(e=l.wa)?e:1/0)-l.va,T.assert(0<=d,"Content playgrah graph position offset cannot be negative"),e=!0,e=0==d?!(e=I.qsa(i,h))||e.pc!==l.pc:e))return{G:h,offset:d};if(o=o.filter(function(t){return i.O[t].N!==r.N}),0===a&&(!(a=I.qsa(t,n.G))||a.pc!==n.G)&&void 0!==(a=S.Xc(o,function(t){return 0===k.H9(i,t).length})))return{G:a,offset:0};if(r.wa&&1/0!==r.wa&&!(r.wa-r.va!==n.offset||r.Rb&&t.O[r.Rb])&&void 0!==(a=S.Xc(o,function(t){return!i.O[t].next||0===Object.keys(i.O[t].next).length})))return o=i.O[a],t=o.va,o=o.wa,T.assert(o,"Content playgraph segments from other viewables must have end time"),{G:a,offset:o-t}}(o,s,u);if(l)return l;if(l=o.O[u.G],t=u.offset,v=Object.keys(s.O).filter(function(t){return s.O[t].pc===u.G}),a=[],v.forEach(function(t){var e,i,r;i=(e=s.O[t]).wa,r={G:t,offset:i-e.va},(e=i?x(o,s,r):void 0)&&a.push({cB:r,zs:e}),(i=x(o,s,r={G:t,offset:0}))&&a.push({cB:r,zs:i}),i||e||function n(t){null!=(t=k.H9(s,t))&&t.forEach(function(t){var e,i;s.O[t].pc!==u.G&&(i=(e=s.O[t]).wa,r={G:t,offset:i-e.va},(e=i?x(o,s,r):void 0)&&a.push({cB:r,zs:e}),e||(r={G:t,offset:0},(e=x(o,s,{G:t,offset:0}))&&a.push({cB:r,zs:e})),n(t))})}(t)}),T.assert(0<a.length,"No point before the content position that can be directly mapped from combined to ux playgraph founc"),i=l.va+t,r=1/0,a.forEach(function(t){var e=t.zs;0<=(e=i-(o.O[e.G].va+e.offset))&&e<r&&(r=e,n=t)}),c=[],v.forEach(function(t){var e,i,n,a;i=(e=s.O[t]).va,n=e.wa,(e=x(o,s,a={G:t,offset:0}))&&c.push({cB:a,zs:e}),a={G:t,offset:n-i},(i=n?x(o,s,a):void 0)&&c.push({cB:a,zs:i}),e||i||function r(t){Object.keys(s.O[t].next||{}).forEach(function(t){var e,i,n;s.O[t].pc!==u.G&&(i=(e=s.O[t]).va,e=e.wa,(n=x(o,s,a={G:t,offset:0}))&&c.push({cB:a,zs:n}),n||(a={G:t,offset:e-i},(i=e?x(o,s,a):void 0)&&c.push({cB:a,zs:i}))),r(t)})}(t)}),T.assert(0<c.length,"No point after the content position that can be directly mapped from combined to ux playgraph found"),f=1/0,c.forEach(function(t){var e=t.zs;(0<=(e=o.O[e.G].va+e.offset-i)&&e<f||f<e&&f<0||1/0===f)&&(f=e,h=t)}),T.assert(n),T.assert(h),t=n.cB,T.assert(t,"Segment not found in the combined playgraph"),l=h.cB,T.assert(l,"Segment not found in the combined playgraph"),g=s.O[t.G],v=s.O[l.G],t.offset===O(g.wa)-g.va&&s.O[g.Rb].pc===g.pc&&(t.G===l.G&&t.offset===l.offset&&(l={G:v.Rb,offset:0},v=s.O[l.G]),t={G:g.Rb,offset:0},g=s.O[t.G]),e=o.O[n.zs.G].va+n.zs.offset,e=0===(m=o.O[h.zs.G].va+h.zs.offset-e)?0:(i-e)/m,t.G===l.G)return g=g.va+t.offset,{G:t=t.G,offset:g+e*(v.va+l.offset-g)-s.O[t].va};for(var d,p,b,g=(m=function(t,e,i){var n,r;if(e.G===i.G)return{path:[],UI:i.offset-e.offset};for(e=[e.G];e[e.length-1]!==i.G&&(n=t.O[e[e.length-1]],T.assert(n.next,"Cannot find path between points in combined playgraph"),!n.next[i.G]);)1===(r=Object.keys(n.next)).length?e.push(r[0]):(T.assert(n.Rb,"Multiple paths but no default finding paths between points in combined playgrahp"),e.push(n.Rb));return 0!==i.offset&&e.push(i.G),{path:e,UI:function(n,t){return t.reduce(function(t,e){var i=(e=n.O[e]).va;return t+O(e.wa)-i},0)}(t,e)}}(s,t,l)).path,m=m.UI,v=0===l.offset?0:O(v.wa)-v.va,y=s,w=g,A=t.offset+e*(m-t.offset-(v-l.offset)),_=0;_<w.length;++_){if(d=w[_],p=y.O[d],b=p.va,p=O(p.wa)-b,A<p)return{G:d,offset:A};A-=p}T.assert(!1,"Invalid offset given for path")}function O(t){return null==t?1/0:t}function x(t,e,i){var n,r=e.O[i.G];return T.assert(r,"Graph position does not exist in combined playgraph"),n=i.offset,T.assert(0<=n,"Graph position offset cannot be negative"),T.assert(!r.wa||n<=r.wa-r.va,"Graph position offset outside segment"),void 0===r.pc?i:(t=t.O[r.pc],T.assert(t,"Referenced ux playgraph segment must exist"),r.N===t.N?(n=r.va+n-t.va,t=O(t.wa)-t.va,n=Math.max(Math.min(n,t),0),{G:r.pc,offset:n}):0===n&&(i=k.H9(e,i.G).filter(function(t){return e.O[t].pc===r.pc}),0===n&&0===i.length)?{G:r.pc,offset:0}:(null==(n=r.Rb?e.O[r.Rb]:void 0)?void 0:n.pc)!==r.pc?{G:r.pc,offset:t.wa?t.wa-t.va:1/0}:void 0)}_esm(e),e.O5a=e.Tmb=e.u0a=void 0,E=i(0),k=i(35),S=i(253),T=i(406),I=i(407),e.u0a=function(t,e,i){var n,r,a=e.O[i.G],o=x(t,e,i);return o||(T.assert(a.pc,"Combined playgraph must reference a ux playgraph segment since no direct mapping was possible"),n=t.O[a.pc],T.assert(n,"Referenced ux playgraph segment must exist"),T.assert(a.wa,"Content playgraph segments from other viewables must have end time"),a.Rb&&e.O[a.Rb]?(o=(r=h(e,i.G,t,a)).S1,r=r.IW,null==o?(T.assert(n.wa,"Experience playgraph segment must have end time"),{G:a.pc,offset:n.wa-n.va}):(t=(e=function t(e,i,n,r,a){var o,s,u;return void 0===a&&(a=0),i=e.O[i],o=n.O[i.pc],r=r.pc,s=n.O[r],u=O(i.wa)-i.va,i.N===(null==o?void 0:o.N)?{S1:i.va,IW:a}:i.pc===r&&i.Rb?t(e,i.Rb,n,i,a+u):{S1:O(s.wa),IW:a}}(e,i.G,t,a)).S1,e=e.IW,null!=t&&isFinite(t)||T.assert(t,"Experience playgraph segment must have end time"),{G:a.pc,offset:o+(r+i.offset)/(r+e)*(t-o)})):(T.assert(n.wa,"Must have definite end time to add terminal content playgraph segment"),{G:a.pc,offset:n.wa-n.va}))},e.Tmb=s,e.O5a=function(e,i,n){var r,a,o;return E.__generator(this,function(t){switch(t.label){case 0:r=s(e,i,n),a=i.O[r.G],o=r.G,t.label=1;case 1:return[4,o];case 2:t.ib(),o=a.Rb,a=i.O[o],t.label=3;case 3:if((null==a?void 0:a.pc)===n.G&&o!==r.G)return[3,1];t.label=4;case 4:return[2]}})}},function(t,d,e){var a,i,n;function r(){this.sb=new i.jx}_esm(d),d.c1a=d.Xq=void 0,a=e(0),i=e(153),d.Xq=-1,d.c1a=function(o,s,u,c,h){void 0===c&&(c=0),void 0===h&&(h=!1);for(var f=new n,l=0,t=0;t<s.jg.length;++t)!function(n){var r,t=s.jg[n],e=(e=s.jg,i=n,!!(a=u)&&("boolean"==typeof(a=a[i])?!0===a:(null==a?void 0:a.length)===(null==(a=e[i].Ti)?void 0:a.length))),i=!!c&&!e,a=0===t.ap;t.ap>l&&f.ng(o+"-"+n,{N:o,va:l,wa:t.ap,type:"content"}),!i||a&&!h||f.ng("padstart-"+n,{N:d.Xq,va:0,wa:c,type:"padding"}),l=t.ap,t.Ti&&!e&&(r=null==u?void 0:u[n],t.Ti.forEach(function(t,e){var i=!1;(i=Array.isArray(r)?-1<r.indexOf(e):i)||f.ng("ad-"+n+"-"+e,{N:t.id,va:t.va,wa:t.wa,type:"ad"})}),i&&f.ng("padend-"+n,{N:d.Xq,va:0,wa:c,type:"padding"}))}(t);return f.ng(o+"-"+s.jg.length,{N:o,va:l,wa:null,type:"content"}),f.Wi()},r.prototype.ng=function(t,e){var i,n,r;this.fJ||(this.fJ=t),this.Z_&&(r=(n=a.__read(this.Z_,2))[0],(n=n[1]).Rb=t,n.next=((i={})[t]={},i),"content"===n.type&&-1<["ad","padding"].indexOf(e.type)&&(n.zv=!0),"content"===e.type&&-1<["ad","padding"].indexOf(n.type)&&(e.yv=!0),this.sb.ng(r,n)),this.Z_=[t,e]},r.prototype.Wi=function(){var t;return this.Z_&&(t=a.__read(this.Z_,2),this.sb.ng(t[0],t[1])),this.Z_=void 0,this.fJ&&this.sb.fL(this.fJ),this.sb.Wi()},n=r},function(t,e,i){_esm(e),i(0).__exportStar(i(254),e)},function(t,e,i){var n,r,a,o;function s(t,e,i){this.ela=t,this.jm=e,this.Pw=i,this.IVa=this.HVa=!1,this.v5=null!=(i=null==(e=t.Ti)?void 0:e.map(function(t){return new r.NFa(t)}))?i:[]}function u(t,e){this.eda=t,this.Rxb=e}function c(t,e,i){this.Xp=t,this.yXa=e||o.Fya,this.Vxb=i||o.Fya}_esm(e),e.OFa=e.Nga=e.C2=e.PFa=void 0,n=i(63),r=i(408),Object.defineProperties(s.prototype,{ap:{get(){return this.ela.ap},configurable:!0},KL:{get(){return this.ela.KL},configurable:!0},xna:{get(){return this.ela.xna},configurable:!0},Ti:{get(){return this.v5},configurable:!0},duration:{get(){return this.Ti.reduce(function(t,e){return t.add(e.endTime.Ea(e.startTime))},n.M.Ka)},configurable:!0},UYb:{get(){return this.v5.every(function(t){return t.IB})},configurable:!0},IB:{get(){return this.v5.length?this.v5.every(function(t){return t.IB}):this.HVa},configurable:!0}}),s.prototype.kbc=function(){this.Ti.length||(this.HVa=!0)},Object.defineProperties(s.prototype,{Oua:{get(){return this.IVa},set(t){t&&(this.IVa=!0)},configurable:!0}}),e.PFa=s,(i=a=e.C2||(e.C2={}))[i.start=0]="start",i[i.end=1]="end",Object.defineProperties(u.prototype,{duration:{get(){return n.M.Ja(this.Rxb)},configurable:!0}}),Object.defineProperties(u,{Fya:{get(){return this.kAb||(this.kAb=new u(a.start,0))},configurable:!0}}),Object.defineProperties(u,{s3b:{get(){return this.jAb||(this.jAb=new u(a.end,0))},configurable:!0}}),e.Nga=o=u,Object.defineProperties(c.prototype,{cfa:{get(){return this.yXa},configurable:!0},zX:{get(){return this.Vxb},configurable:!0},AWb:{get(){return this.yXa!==o.Fya||this.zX!==o.s3b},configurable:!0},duration:{get(){return this.Xp.duration.add(this.cfa.duration).add(this.zX.duration)},configurable:!0},cda:{get(){return this.cfa.duration.add(this.zX.duration)},configurable:!0}}),e.OFa=c},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e,i){var n,r,a,o,s,b,u;function c(t,e){var i=u.call(this)||this;return i.K=t,i.yi=new s.YLa(t,e),t.gP&&i.P0a(e),i.Ah=new r.Kf,b.forEach(function(e){i.Ah.on(i.yi,e,function(t){return i.emit(e,t)}),i.Gm&&i.Ah.on(i.Gm,e,function(t){return i.emit(e,t)})}),i}_esm(e),e.TMa=void 0,n=i(0),r=i(12),a=i(255),o=i(403),t=n.__importDefault(i(3)),s=i(960),(t=new t.default.Console("ASEJS","media|asejs")).trace.bind(t),b=["prebuffstats","discardedBytes","flushedBytes","cacheEvict","mediacache"],u=r.EventEmitter,n.__extends(c,u),Object.defineProperties(c.prototype,{bc:{get(){return this.yi.bc},configurable:!0},ep:{get(){return this.yi.ep},configurable:!0},Gw:{get(){return this.yi.Gw},configurable:!0},KC:{get(){return this.yi.KC},configurable:!0},nwa:{get(){return this.yi.nwa},configurable:!0},pG:{get(){return this.yi.pG},configurable:!0},Yf:{get(){return this.yi.Yf},configurable:!0},dj:{get(){return this.yi.dj},configurable:!0},gva:{get(){return this.yi.gva},configurable:!0},DZ:{get(){return this.yi.DZ.bind(this.yi)},configurable:!0},f$:{get(){return this.yi.f$.bind(this.yi)},configurable:!0},fpa:{get(){var t=this;return function(){t.vhb(),t.yi.fpa()}},configurable:!0},sE:{get(){var t=this;return function(){t.vhb(),t.yi.sE()}},configurable:!0},xr:{get(){var r=this;return function(t,e,i){var n;null!=(n=r.Yf)&&n.xr(t,e,i)}},configurable:!0}}),c.prototype.P0a=function(t){return this.Gm=new(i(1066).rSa)(this.K,this.sE,this.xr,t)},c.prototype.xa=function(t,e,i,n,r,a,o,s){void 0===o&&(o=262144),void 0===s&&(s=1048576),this.yi.xa(t,e,i,n,r,a),this.Gm?this.Gm.xa(t,e,i,n,r,a,o,s):this.W$a={KEb:t,Qgc:e,Zx:i,KC:n,pG:r,y1b:a,uoa:o,OEa:s}},c.prototype.U0=function(t,e,i){this.yi.U0(t,e,i),this.Gm?this.Gm.U0(t,e,i):this.bab={edc:t,KC:e,pG:i}},c.prototype.createSession=function(t,e,i,n,r,a,o,s,u,c){var h,f,l,d,p=this;return(s=s||this.yi.config).gP&&!this.Gm&&(h=this.P0a(this.yi.xG),b.forEach(function(e){p.Ah.on(p.Gm,e,function(t){return p.emit(e,t)})}),this.W$a&&(l=(f=this.W$a).KC,d=f.pG,h.xa(f.KEb,f.Qgc,f.Zx,l,d,f.y1b,f.uoa,f.OEa)),this.bab&&(f=(d=this.bab).edc,l=d.KC,d=d.pG,h.U0(f,l,d))),this.Gm&&s&&s.Q1?(s.$s||s.lK||this.yi.sE(),this.Gm.createSession(t,e,i,n,r,a,o,s,u,c)):this.yi.createSession(t,e,i,n,r,a,o,s,u,c)},c.prototype.qz=function(t,e,i){if(this.Gm)return this.Gm.qz(t,e,i);throw Error("Update viewable not supported in legacy.")},c.prototype.addEventListener=function(t,e){return this.addListener(t,e),!0},c.prototype.removeEventListener=function(t,e){return this.removeListener(t,e),!0},c.prototype.tb=function(){var t;this.Ah.clear(),this.yi.tb(),null!=(t=this.Gm)&&t.tb(),a.YL.reset()},c.prototype.vhb=function(){var t;this.K.$s||this.K.lK||(null==(t=this.Gm)?void 0:t.La.state)!==o.yp.OPEN||null!=(t=this.Gm)&&t.La.uw.reset()},e.TMa=t=c},function(t){function e(t){this.listeners=[],this.console=t}(e.prototype.constructor=e).prototype.on=e.prototype.addListener=function(t,e,i,n){if(i=n?i.bind(n):i,t){if(this.console&&(i=function(t,e,i,n){t.trace(":",i,":",n),e(n)}.bind(null,this.console,i,e)),"function"==typeof t.addListener)t.addListener(e,i);else{if("function"!=typeof t.addEventListener)throw Error("Emitter does not have a function to add listeners for '"+e+"'");t.addEventListener(e,i)}this.listeners.push([t,e,i])}return this},e.prototype.clear=function(){var t=this.listeners.length;this.listeners.forEach(function(t){var e=t[0],i=t[1];t=t[2],"function"==typeof e.removeEventListener?e.removeEventListener(i,t):"function"==typeof e.removeListener&&e.removeListener(i,t)}),this.listeners=[],this.console&&this.console.trace("removed",t,"listener(s)")},t.exports=e},function(t,e,i){t.exports={nvb:i(918),Hic:i(919)}},function(t,e,i){function h(t){this.data=t,this.right=this.left=null,this.red=!0}function n(t){this.yf=null,this.oo=t,this.size=0}function f(t){return null!==t&&t.red}function l(t,e){var i=t.Wh(!e);return t.xs(!e,i.Wh(e)),i.xs(e,t),t.red=!0,i.red=!1,i}function d(t,e){return t.xs(!e,l(t.Wh(!e),!e)),l(t,e)}e=i(409),h.prototype.Wh=function(t){return t?this.right:this.left},h.prototype.xs=function(t,e){t?this.right=e:this.left=e},(n.prototype=new e).Xo=function(t){var e,i,n,r,a,o,s,u,c=!1;if(null===this.yf)this.yf=new h(t),c=!0,this.size++;else{for(e=new h(void 0),n=i=0,o=r=null,s=this.yf,(a=e).right=this.yf;null===s?(s=new h(t),o.xs(i,s),c=!0,this.size++):f(s.left)&&f(s.right)&&(s.red=!0,s.left.red=!1,s.right.red=!1),f(s)&&f(o)&&(u=a.right===r,s===o.Wh(n)?a.xs(u,l(r,!n)):a.xs(u,d(r,!n))),0!==(u=this.oo(s.data,t));)n=i,null!==r&&(a=r),r=o,s=(o=s).Wh(i=u<0);this.yf=e.right}return this.yf.red=!1,c},n.prototype.remove=function(t){var e,i,n,r,a;if(null===this.yf)return!1;(i=e=new h(void 0)).right=this.yf;for(var o,s=null,u=null,c=1;null!==i.Wh(c);)n=c,o=s,i=(s=i).Wh(c),c=0<(r=this.oo(t,i.data)),0===r&&(u=i),f(i)||f(i.Wh(c))||(f(i.Wh(!c))?(o=l(i,c),s.xs(n,o),s=o):f(i.Wh(!c))||null===(r=s.Wh(!n))||(f(r.Wh(!n))||f(r.Wh(n))?(a=o.right===s,f(r.Wh(n))?o.xs(a,d(s,n)):f(r.Wh(!n))&&o.xs(a,l(s,n)),(n=o.Wh(a)).red=!0,i.red=!0,n.left.red=!1,n.right.red=!1):(s.red=!1,r.red=!0,i.red=!0)));return null!==u&&(u.data=i.data,s.xs(s.right===i,i.Wh(null===i.left)),this.size--),this.yf=e.right,null!==this.yf&&(this.yf.red=!1),null!==u},t.exports=n},function(t,e,i){function s(t){this.data=t,this.right=this.left=null}function n(t){this.yf=null,this.oo=t,this.size=0}e=i(409),s.prototype.Wh=function(t){return t?this.right:this.left},s.prototype.xs=function(t,e){t?this.right=e:this.left=e},(n.prototype=new e).Xo=function(t){if(null===this.yf)return this.yf=new s(t),this.size++,!0;for(var e=0,i=null,n=this.yf;;){if(null===n)return n=new s(t),i.xs(e,n),ret=!0,this.size++,!0;if(0===this.oo(n.data,t))return!1;e=this.oo(n.data,t)<0,n=(i=n).Wh(e)}},n.prototype.remove=function(t){var e,i,n;if(null===this.yf)return!1;(i=e=new s(void 0)).right=this.yf;for(var r=null,a=null,o=1;null!==i.Wh(o);)i=(r=i).Wh(o),o=0<(n=this.oo(t,i.data)),0===n&&(a=i);return null!==a&&(a.data=i.data,r.xs(r.right===i,i.Wh(null===i.left)),this.yf=e.right,this.size--,!0)},t.exports=n},function(t,e,i){var r,a;function n(){this.data={}}_esm(e),e.VNa=void 0,r=i(22),a=i(2),Object.defineProperties(n.prototype,{empty:{get(){return 0===Object.keys(this.data).length},configurable:!0},size:{get(){var i=this;return Object.keys(this.data).reduce(function(t,e){return t+i.data[e].length},0)},configurable:!0}}),n.prototype.get=function(t){return null!=(t=this.data[t])?t:[]},n.prototype.has=function(t,e){return!!(t=this.data[t])&&(void 0===e||-1!==t.indexOf(e))},n.prototype.count=function(t){return(t=this.data[t])?t.length:0},n.prototype.keys=function(){return Object.keys(this.data)},n.prototype.values=function(){var e=this;return r.flatten(this.keys().map(function(t){return e.data[t]}))},n.prototype.set=function(t,e){return(this.data[t]||(this.data[t]=[])).push(e),this},n.prototype.clear=function(){this.data={}},n.prototype.delete=function(t,e){var i,n=this.data[t];return void 0!==n&&(void 0===e?(a.assert(1===arguments.length),delete this.data[t],!0):-1!==(i=n.indexOf(e))&&(1===n.length?delete this.data[t]:n.splice(i,1),!0))},n.prototype.forEach=function(i,t){var n=this;i=void 0!==t?i.bind(t):i,this.keys().forEach(function(e){return n.data[e].forEach(function(t){return i(t,e,n)})})},n.prototype.reduce=function(i,t,e){var n,r=this;return i=void 0!==e?i.bind(e):i,n=t,this.forEach(function(t,e){n=i(n,t,e,r)}),n},n.prototype.map=function(i,t){var n=this;return i=void 0!==t?i.bind(t):i,r.flatten(this.keys().map(function(e){return n.data[e].map(function(t){return i(t,e,n)})}))},n.prototype.filter=function(i,t){var n=this;return i=void 0!==t?i.bind(t):i,r.flatten(this.keys().map(function(e){return n.data[e].filter(function(t){return i(t,e,n)})}))},e.VNa=n},function(t,e,i){var r,a;function n(t,i,e){var n;return void 0===e&&(e={}),n=r.__assign(r.__assign({},a),e),t.filter(function(t){var e=t.Mc;return!!(t=t.vd)&&t.BF(i)&&(!n.y0a||e.zj(i))})}_esm(e),e.lsa=e.BQb=e.usa=void 0,r=i(0),a={y0a:!1},e.usa=function(t,e,i){return n(t,e,i=void 0===i?{}:i).pop()},e.BQb=n,e.lsa=function(t,i,n){return t.filter(function(t){var e=t.Mc;return!!(t=t.vd)&&!!e&&(t.zj(i)&&t.BF(n)||e.zj(i)&&e.BF(n)||t.BF(i)&&e.zj(n))})}},function(t,e,i){var r;function n(t){this.Sa=t,this.listeners=[],this.w_=[]}function a(){this.listeners=[]}_esm(e),e.vSa=e.uSa=void 0,r=i(22),Object.defineProperties(n.prototype,{value:{get(){return this.Sa},configurable:!0}}),n.prototype.set=function(e){var t;this.Sa=e,t=this.w_,this.w_=[],this.listeners.forEach(function(t){return t(e)}),t.forEach(function(t){return t(e)})},n.prototype.whb=function(){this.Sa=void 0},n.prototype.on=function(t){this.listeners=this.listeners.concat([t]),void 0!==this.Sa&&t(this.Sa)},n.prototype.once=function(t){void 0!==this.Sa?t(this.Sa):this.w_.push(t)},n.prototype.Hy=function(e){this.listeners=this.listeners.filter(function(t){return t!==e}),this.w_=this.w_.filter(function(t){return t!==e})},e.uSa=n,a.prototype.on=function(t,e){this.listeners.push({signal:t,listener:e}),t.on(e)},a.prototype.once=function(e,i){var t,n=this;void 0===e.value?(this.listeners.push({signal:e,listener:i,Anb:t=function(t){n.remove(e,i),i(t)}}),e.once(t)):e.once(i)},a.prototype.Hy=function(e,i){var t,n=r.Xc(this.listeners,function(t){return t.signal===e&&t.listener===i});void 0!==n&&e.Hy(null!=(t=n.Anb)?t:n.listener),this.remove(e,i)},a.prototype.removeAllListeners=function(){this.listeners.forEach(function(t){var e=t.listener,i=t.Anb;return t.signal.Hy(null!=i?i:e)}),this.listeners=[]},a.prototype.remove=function(e,i){this.listeners=this.listeners.filter(function(t){return t.signal!==e||t.listener!==i})},e.vSa=a},function(t,e){function i(){var e=this;this.mXa=!1,this.promise=new Promise(function(t){e.kXa=t})}_esm(e),e.nD=e.hwa=void 0,e.hwa=function(t){return"function"==typeof(null==t?void 0:t.then)},Object.defineProperties(i.prototype,{then:{get(){return this.promise.then.bind(this.promise)},configurable:!0},rBa:{get(){return this.mXa},configurable:!0}}),i.prototype.resolve=function(t){var e;this.mXa=!0,null!=(e=this.kXa)&&e.call(this,t),this.kXa=void 0},e.nD=i},function(t,e){_esm(e),e.g2a=void 0,e.g2a=function(t){return JSON.parse(JSON.stringify(t))}},function(t,e,i){var f;_esm(e),e.M8=void 0,f=i(0),e.M8=function(t,e,i){return function t(e,i,n){var r,a,o;if(e===i||!n.$n&&e==i)return!0;if(typeof e!=typeof i)return!1;if(e&&"object"==typeof e){for(var s in e)if(!t(e[s],i[s],n))return!1;if(!n.jHb){a=Object.keys(e),o=Object.keys(i).filter(function(t){return a.indexOf(t)<0});try{for(var u=f.__values(o),c=u.next();!c.done;c=u.next())if(!t(e[s=c.value],i[s],n))return!1}catch(t){var h={error:t}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(h)throw h.error}}}return!0}return!1}(t,e,i=f.__assign({$n:!1,jHb:!1},i=void 0===i?{}:i))}},function(t,e){function i(){this.count=0,this.max=this.min=this.ta=NaN}_esm(e),e.sH=void 0,Object.defineProperties(i.prototype,{bu:{get(){return this.max-this.min},configurable:!0}}),i.prototype.push=function(t){this.count++,1===this.count?this.ta=this.min=this.max=t:(this.min=Math.min(t,this.min),this.max=Math.max(t,this.max),this.ta+=(t-this.ta)/this.count)},i.prototype.toJSON=function(){return{min:this.min,max:this.max,average:this.ta,count:this.count}},e.sH=i},function(t,e,i){var n;function r(t,e){this.ta=t,this.ye=e}_esm(e),n=i(411),r.prototype.E_a=function(t){return.5*n.nP(-(t-this.ta)/Math.sqrt(2*this.ye))},r.prototype.Sy=function(t){return this.ta-Math.sqrt(2*this.ye)*n.R8a(2*t)},e.default=r},function(t,e,i){t.exports={epc:i(413),ysc:i(257),Kic:i(929),Fha:i(258),Jic:i(414),Lic:i(415),Frb:i(416)}},function(t,e,i){var n,r,a,o;function s(t,e,i){n.call(this,t,e,i)}function u(t,e){r.call(this,new s(t,e,!1))}n=i(930),r=i(931),a=i(105).nSb,o=i(105).IVb,(s.prototype=Object.create(n.prototype)).ta=function(){return Math.floor(8*a(this.de)/this.Ud)},s.prototype.ye=function(){return Math.floor(64*o(this.de)/(this.Ud*this.Ud))},s.prototype.get=function(){return{ta:this.ta(),ye:this.ye(),Rnc:this.de.length}},s.prototype.toString=function(){return"bsw("+this.MN+","+this.Ud+","+this.Pk+")"},(u.prototype=Object.create(r.prototype)).setInterval=function(t){this.aN.setInterval(t)},t.exports=u},function(t){function e(t,e,i){this.MN=t,this.Pk=Math.floor((t+e-1)/e),this.Ud=e,this.YAb=i,this.reset()}e.prototype.shift=function(){this.de.shift(),this.Ri.shift()},e.prototype.update=function(t,e){this.de[t]+=e},e.prototype.push=function(t){this.de.push(0),this.Ri.push(t||0),this.Ab+=this.Ud},e.prototype.add=function(t,e,i,n){var r,a;if(null===this.Ab)for(r=Math.max(Math.floor((i-e+this.Ud-1)/this.Ud),1),this.Ab=e;this.de.length<r;)this.push(n);for(;this.Ab<i;)if(this.push(n),this.YAb)for(;1<this.de.length&&i+n-(this.Ab-this.Ud*this.de.length+this.Ri[0])>this.MN;)this.shift();else this.de.length>this.Pk&&this.shift();if(e>this.Ab-this.Ud)this.update(this.de.length-1,t);else if(e==i)0<=(n=this.de.length-Math.max(Math.ceil((this.Ab-i)/this.Ud),1))&&this.update(n,t);else for(n=1;n<=this.de.length;++n)if(a=(r=this.Ab-n*this.Ud)+this.Ud,!(i<r)){if(a<e)break;this.update(this.de.length-n,Math.round(t*(Math.min(a,i)-Math.max(r,e))/(i-e)))}for(;this.de.length>this.Pk;)this.shift()},e.prototype.reset=function(){this.de=[],this.Ri=[],this.Ab=null},e.prototype.setInterval=function(t){this.Pk=Math.floor((t+this.Ud-1)/this.Ud)},t.exports=e},function(t){function e(t){this.aN=t,this.Pb=0,this.GN=null}e.prototype.add=function(t,e,i){null!==this.GN&&e>this.GN&&(this.Pb+=e-this.GN,this.GN=null),this.aN.add(t,e-this.Pb,i-this.Pb,this.Pb)},e.prototype.stop=function(t){null===this.GN&&(this.GN=t)},e.prototype.Xza=function(t,e){return this.aN.Xza(t,e)},e.prototype.get=function(){return this.aN.get()},e.prototype.reset=function(){this.aN.reset()},e.prototype.toString=function(){return this.aN.toString()},t.exports=e},function(t,e,i){var a;function n(t,e){this.lya=t,0<(this.ye=e)?(this.R$a=e=Math.pow(t,3)/e,(t=2*e/t)<=500&&(this.$ra=Math.exp(t))):this.$ra=0}_esm(e),e.l4=void 0,a=i(411),n.prototype.E_a=function(t){var e,i=this.lya,n=this.$ra;return n&&0<t?(e=Math.sqrt(this.R$a/(2*t)),t=a.nP(e*((i=t/i)-1)),e=a.nP(e*(i+1)),Math.max((2-t+n*e)/2,0)):t<i?0:i<t?1:.5},n.prototype.Sy=function(t,e,i){for(var n=0,r=this.lya+5*Math.sqrt(this.ye),a=1,o=0;Math.abs(a)>e&&i--;)(a=t-(a=this.E_a(o=(n+r)/2)))<0?r=o:n=o;return o},n.prototype.PGb=function(t){var e,i,n=this.lya,r=this.$ra;return r&&0<t?(e=Math.sqrt(this.R$a/(2*t)),t=2-a.nP(e*((i=t/n)-1)),r*=a.nP(e*(1+i)),[Math.max((t+r)/2,0),Math.max(n*(t-r)/2,0)]):t<n?[0,0]:n<t?[1,n]:[.5,n/2]},e.l4=n},function(t,e,i){var h,f;function s(t){this.config=t,this.hqa=t.c,this.Gxa=t.Pqc,this.EZ=t.EZ,this.NY=t.NY,this.Daa=t.Daa,this.Rbc=t.woc,this.AJ=t.AJ,this.sbb=t.sbb,this.reset()}_esm(e),e.CHa=void 0,h=i(0),f=i(183),new(h.__importDefault(i(3)).default.Console)("ASEJS_TDIGEST_FILTER","media|asejs"),s.prototype.reset=function(){this.Qg=new f.Ika(this.hqa,this.Gxa),this.Ab=null},s.prototype.add=function(t,e,i){var n,r,a,o;if(t=8*t/(i=Math.max(i-e,1)),this.Rbc){if(null===this.Ab&&(this.Ab=e),a=i*(r=Math.pow(2,(e-this.Ab)/this.AJ)),r>=this.sbb){a=new f.Ika(this.hqa,this.Gxa);try{for(var s=h.__values(this.Qg.co()),u=s.next();!u.done;u=s.next())o=u.value,a.push(o.ag,o.n/r)}catch(t){var c={error:t}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(c)throw c.error}}this.Qg=a,a=i,this.Ab=e}this.Qg.push(t,a)}else this.Qg.push(t,i)},s.prototype.get=function(){var t=this.Qg.Hj([this.EZ,this.NY,this.Daa]);return{low:t[0]||0,high:t[1]||0,initial:t[2]||0}},s.prototype.si=function(){var t,e,i=new s(this.config),n=new f.Ika(this.hqa,this.Gxa);try{for(var r=h.__values(this.Qg.co()),a=r.next();!a.done;a=r.next())e=a.value,n.push(e.ag,e.n)}catch(t){var o={error:t}}finally{try{a&&!a.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return i.Qg=n,i},s.prototype.flush=function(){},s.prototype.start=function(){},s.prototype.stop=function(){},e.CHa=s},function(t,e,i){var n;function r(){this.Mk=void 0,this.ZD=0}n=i(11),r.prototype.start=function(){},r.prototype.stop=function(){},r.prototype.add=function(){},r.prototype.getState=function(){return 0!==this.ZD&&this.Mk?{p25:this.Mk.Ol,p50:this.Mk.nk,p75:this.Mk.Pl,c:this.ZD}:null},r.prototype.Jd=function(t){if(!(!n.xb(t)&&n.has(t,"p25")&&n.has(t,"p50")&&n.has(t,"p75")&&n.has(t,"c")&&n.isFinite(t.p25)&&n.isFinite(t.p50)&&n.isFinite(t.p75)&&n.isFinite(t.c)))return this.Mk=void 0,this.ZD=0,!1;this.Mk={Ol:t.p25,nk:t.p50,Pl:t.p75},this.ZD=t.c},r.prototype.get=function(){return{kda:this.Mk,nl:this.ZD}},r.prototype.set=function(t,e){this.Mk=t,this.ZD=e},r.prototype.reset=function(){this.Mk=void 0,this.ZD=0},r.prototype.toString=function(){return"IQRHist("+this.Mk+","+this.ZD+")"},t.exports=r},function(t,e,i){var c;function n(t){var e=t.sw,i=t.mw;this.LN=e,this.kla={uhd:t.uhdl,hd:t.hdl},this.Pk=Math.max(Math.ceil(+e/i),1),this.vzb=t.mins||1,c.call(this,e,i),this.reset()}c=i(154),new(i(3).default.Console)("ASEJS_NETWORK_ENTROPY","media|asejs"),(n.prototype=Object.create(c.prototype)).flush=function(){this.de.map(function(t,e){this.wYa(t,this.Vsa(e))},this)},n.prototype.gGb=function(){var t,e,i,n,r=this.kla;for(t in r)if(r.hasOwnProperty(t)){s=r[t],a=this.mna[t],e=this.lna[t],a.first&&(o=a.first,void 0!==(i=a.IK)&&(e[o][i]+=1),a.first=void 0);for(var a=[],o=0,s=i=s.length+1,u=0;u<i;u++){for(var c=0,h=0;h<s;h++)c+=e[h][u];o+=c,a.push(c)}if(c=-1,o>this.vzb){for(u=c=0;u<i;u++)if(0<a[u])for(h=0;h<s;h++)0<(n=e[h][u])&&(c-=n*Math.log(+n/a[u]));c/=o*Math.log(2)}this.Lla[t]=c}return this.Lla},n.prototype.wYa=function(t,e){for(var i,n=this.Pk,r=this.kla;this.W5.length>=n;)this.W5.shift();for(;this.X5.length>=n;)this.X5.shift();if(this.W5.push(t),this.X5.push(e),t=this.W5.reduce(function(t,e){return t+e},0),0<(e=this.X5.reduce(function(t,e){return t+e},0)))for(var a in t=8*t/e,r)r.hasOwnProperty(a)&&(e=this.mna[a],n=this.lna[a],a=this.f8b(t,r[a]),void 0!==(i=e.IK)?n[a][i]+=1:e.first=a,e.IK=a)},n.prototype.f8b=function(t,e){for(var i=0;i<e.length&&t>e[i];)i+=1;return i},n.prototype.shift=function(){this.wYa(this.de[0],this.Vsa(0)),c.prototype.shift.call(this)},n.prototype.reset=function(){var t,e,i,n,r;for(e in this.mna={},this.W5=[],this.X5=[],this.lna={},this.Lla={},t=this.kla)if(t.hasOwnProperty(e)){i=this.lna,n=e,0;for(var a=Array(void 0),o=r=t[e].length+1,s=0;s<o;s++){a[s]=Array(r);for(var u=0;u<r;u++)a[s][u]=0}i[n]=a,this.mna[e]={first:void 0,IK:void 0},this.Lla[e]=0}c.prototype.reset.call(this)},t.exports=n},function(t,e){function i(t,e){this.tj=0,this.filter=t,this.yda=e,this.tj=0}_esm(e),e.EQa=void 0,i.prototype.KZ=function(e){return 0<this.yda.filter(function(t){return t===(null==(t=e.HC)?void 0:t.hf)}).length},i.prototype.add=function(t,e,i,n){this.KZ(n)&&this.filter.add(t,e,i,n)},i.prototype.start=function(t,e){this.filter.start&&this.KZ(e)&&this.filter.start(t)},i.prototype.stop=function(t,e){this.filter.stop&&this.KZ(e)&&this.filter.stop(t)},i.prototype.get=function(t){if(this.filter.get)return this.filter.get(t)},i.prototype.flush=function(){this.filter.flush&&this.filter.flush()},i.prototype.reset=function(){this.tj=0,this.filter.reset&&this.filter.reset()},i.prototype.Bw=function(t,e){this.KZ(e)&&(this.tj+=1,this.filter.Bw&&this.filter.Bw(t,e))},i.prototype.az=function(t,e,i){this.KZ(i)&&(this.tj=Math.max(this.tj-1,0),0===this.tj&&this.stop(t,i),this.filter.az&&this.filter.az(t,i))},e.EQa=i},function(t,e,i){var s,r;function n(t,e){this.Ql=t,this.filter=e,this.vbb=Math.max(t.max_n||10,0),this.reset()}_esm(e),e.GFa=void 0,s=i(0),r=i(938),n.prototype.reset=function(){this.l0=[],this.offset=0,this.nz=this.vG=null,this.filter.reset(),this.C1=null},n.prototype.add=function(t,e,i){var n=this.nz;for(null!==n&&n<i&&(this.offset+=Math.max(e-n,0),this.nz=null),r.x9a(this.l0,[e-this.offset,i-this.offset,t]);this.l0&&this.l0.length>this.vbb;)t=s.__read(this.l0.shift(),3),this.filter.add(t[2],t[0],t[1]);this.C1=null},n.prototype.get=function(t,e){var i,n;if(!this.C1){this.C1=this.filter.si();try{for(var r=s.__values(this.l0),a=r.next();!a.done;a=r.next())n=s.__read(a.value,3),this.C1.add(n[2],n[0],n[1])}catch(t){var o={error:t}}finally{try{a&&!a.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}}return o=this.nz,this.C1.get((null===o?t:o)-this.offset,e)},n.prototype.si=function(){var t=new n(this.Ql,this.filter.si());return t.nz=this.nz,t.offset=this.offset,t},n.prototype.start=function(t){var e=this.nz;null!==e&&e<t&&(this.offset+=t-e,this.nz=null),this.filter.start(t-this.offset)},n.prototype.stop=function(t){this.nz=null===this.nz?t:Math.min(this.nz,t),this.filter.stop(t-this.offset)},n.prototype.flush=function(){this.filter.flush()},n.prototype.toString=function(){return"AggregatingFilter("+this.vbb+", "+this.filter.toString()+")"},e.GFa=n},function(t,e,i){var A;_esm(e),e.x9a=void 0,A=i(0),e.x9a=function(t,e){for(var i,n,r,a,o,s,u,c,h,f,l,d,p,b,g,m,v=0;v<t.length;v++)if(n=(i=A.__read(e,3))[0],r=i[1],a=i[2],s=(o=A.__read(t[v],3))[0],i=o[1],u=o[2],!(i<=n)){s=(n=[n,Math.min(i,r),s,i].filter(function(t,e,i){return i.indexOf(t)===e}).sort(function(t,e){return t-e})).length-1,o=Array(s),a+=u;try{g=void 0;for(var y=A.__values([e,t[v]]),w=y.next();!w.done;w=y.next())for(h=(c=A.__read(w.value,3))[0],f=c[1],l=c[2],u=f-h,e=0;e<s&&(d=n[e+1],0<(p=Math.min(d,f)-Math.max(n[e],h))&&(a-=b=p*l/u,o[e]=o[e]?o[e]+b:b),!(f<=d));e++);}catch(t){g={error:t}}finally{try{w&&!w.done&&(m=y.return)&&m.call(y)}finally{if(g)throw g.error}}for(u=[],e=0;e<s;e++)0<(l=o[e])&&u.push([n[e],n[e+1],l]);if(t.splice.apply(t,A.__spreadArray([v,1],A.__read(u),!1)),!(i<r))return;e=[i,r,a]}e&&0<e[2]&&t.splice(t.length,0,e)}},function(t,e,i){var n,r;function a(t){this.K=t,this.iV()}n=i(11),new(r=i(3).default).Console("ASEJS_NETWORK_HISTORY","media|asejs"),a.prototype.save=function(){var t=this.getState();r.storage.set("nh",t)},a.prototype.Kcc=function(){this.iI||(this.iI=!0,this.xA=r.time.ia())},a.prototype.Scc=function(){var t;this.iI&&(t=r.time.ia(),this.DA+=t-this.xA,this.xA=t,this.iI=!1,this.gV=null)},a.prototype.E9a=function(t,e){this.iI&&(e>this.xA&&(this.DA+=e-this.xA,this.xA=e),null===this.gV||t>this.gV)&&(this.nN.push([this.DA-(t=e-t),t]),this.WBb(),this.gV=e)},a.prototype.WBb=function(){var e=this.DA-this.K.K2b;this.nN=this.nN.filter(function(t){return t[0]>e})},a.prototype.iV=function(){var t=r.storage.get("nh");this.dna(t)||(this.xA=r.time.ia(),this.DA=0,this.iI=!1,this.gV=null,this.nN=[])},a.prototype.dna=function(t){return!!(t&&n.has(t,"t")&&n.has(t,"s")&&n.has(t,"i")&&n.Oa(t.t)&&n.Oa(t.s)&&n.isArray(t.i))&&(this.xA=r.time.Eya(1e3*t.t),this.DA=1e3*t.s,this.iI=!1,this.nN=t.i.map(function(t){return[1e3*t[0],t[1]]}),!(this.gV=null))},a.prototype.getState=function(){return this.iI?{t:r.time.now()/1e3|0,s:(this.DA+(r.time.ia()-this.xA))/1e3|0,i:this.nN.map(function(t){return[t[0]/1e3|0,t[1]]})}:{t:r.time.iya(this.xA)/1e3|0,s:this.DA/1e3|0,i:this.nN.map(function(t){return[t[0]/1e3|0,t[1]]})}},t.exports=a},function(t,e,i){var n;function r(t,e){this.config=t,this.Oca=e,this.reset()}_esm(e),e.aOa=void 0,t=i(0).__importDefault(i(3)),n=i(6),new t.default.Console("ASEJS_NETWORK_CONFIDENCE","media|asejs"),r.prototype.reset=function(){this.confidence=n.zD.HAVE_NOTHING,this.startTime=this.fa=0},r.prototype.si=function(){var t=new r(this.config,this.Oca);return t.confidence=this.confidence,t.fa=this.fa,t.startTime=this.startTime,t},r.prototype.add=function(t,e,i){0===this.startTime&&(this.startTime=e,this.fa=0),this.fa+=t,t=i-this.startTime,this.confidence=Math.max(this.confidence,n.zD.pD),this.confidence<n.zD.oD&&(t>this.config.uzb||this.fa>this.config.tzb)&&(this.confidence=n.zD.oD),this.confidence<n.zD.CT&&(t>this.config.OAb||this.fa>this.config.NAb)&&(this.confidence=n.zD.CT,this.Oca())},r.prototype.get=function(){return this.confidence},r.prototype.start=function(){},r.prototype.stop=function(){},r.prototype.flush=function(){},e.aOa=i=r},function(t,e,i){var n,r;_esm(e),e.Oha=void 0,t=i(0),n=i(942),r=i(6),new(t.__importDefault(i(3)).default.Console)("ASEJS_ENDPOINT_ACTIVITY","media|asejs"),i=function(){for(var t=2;7!==t;)switch(t){case 9:return e.prototype.Xlb=function(t){for(var e,i,n=2;5!==n;)2===n&&(e=Object.keys(this.tB).map(function(t){return parseInt(t)}),i=this.tB[e[0]],1===e.length&&!1===i.G9?(this.wG.start(t,i.Zk),this.WV=i.Zk):1<e.length&&this.WV&&(e=this.tB[this.WV],this.wG.stop(t,this.WV),e.G9=!1,this.WV=void 0),n=5)},e;case 2:e.prototype.reset=function(){for(var t=2;1!==t;)switch(t){case 4:this.wG=new n.oHa,t=8;break;case 2:this.wG=new n.oHa,t=1}},e.prototype.Bw=function(t,e){for(var i=2;1!==i;)2===i&&(e.Zk&&(this.ova?this.wG.start(t,e.Zk):e.type===r.u.J&&(this.tB[e.Zk]?this.tB[e.Zk].Z1+=1:this.tB[e.Zk]={Zk:e.Zk,Z1:1,G9:!1},this.Xlb(t))),i=1)},e.prototype.az=function(t,e){for(var i,n=2;9!==n;)switch(n){case 6:n=this.ova?0:7;break;case 1:n=this.ova?5:4;break;case 2:n=e.Zk?1:9;break;case 5:this.wG.stop(t,e.Zk),n=9;break;case 4:i=this.tB[e.Zk],e.type===r.u.J&&i&&(--i.Z1,0===i.Z1&&(i.G9&&this.wG.stop(t,e.Zk),i.G9=!1,delete this.tB[e.Zk]),this.Xlb(t)),n=9}},e.prototype.hE=function(t,e,i,n){for(var r=2;1!==r;)2===r&&(n.Zk&&(this.ova||this.WV===n.Zk)&&this.wG.add(t,e,i,n.Zk),r=1)},e.prototype.So=function(){return this.wG.get()},t=9}function e(t){for(var e=2;4!==e;)2===e&&(this.ova=t,this.tB={},e=4)}}(),e.Oha=i},function(t,e,i){var o;_esm(e),e.oHa=void 0,o=i(0).__importDefault(i(259)),t=function(){function t(){for(var t=2;5!==t;)2===t&&(this.A6={},t=5)}for(;;){1;return t.prototype.add=function(t,e,i,n){for(var r,a=2;4!==a;)2===a&&(void 0===(r=this.A6)[n]&&(r[n]=new o.default),r[n].add(t,e,i),a=4)},t.prototype.start=function(t,e){for(var i,n=2;4!==n;)switch(n){case 2:void 0===(i=this.A6)[e]&&(i[e]=new o.default),n=5;break;case 7:i[e].start(t),n=1;break;case 5:i[e].start(t),n=4}},t.prototype.stop=function(t,e){for(var i,n=2;5!==n;)2===n&&(void 0!==(i=this.A6)[e]&&i[e].stop(t),n=5)},t.prototype.get=function(){for(var t,e,i,n,r,a,o=2;8!==o;)switch(o){case 5:(e=i[t=n[a]].get())&&r.push({cdnid:t,avtp:e.ta,tm:e.c9}),o=3;break;case 1:o=a<n.length?5:9;break;case 3:a++,o=1;break;case 9:return r;case 2:i=this.A6,n=Object.keys(i).map(function(t){return parseInt(t)}),r=[],a=0,o=1}},t}}(),e.oHa=t},function(t,e,i){var n,r;_esm(e),e.SOa=void 0,t=i(0),n=i(6),r=t.__importDefault(i(259)),i=function(){var t;function e(t){for(var e=2;7!==e;)switch(e){case 9:this.hza=[new r.default,new r.default],this.meb=new r.default,e=7;break;case 2:this.z0=[0,0],this.Ag=[0,0],this.B_=[0,0],this.C_=t.C_,e=9}}for(t=2;3!==t;)switch(t){case 2:e.prototype.reset=function(){for(var t=2;4!==t;)2===t&&(this.z0=[0,0],this.Ag=[0,0],this.B_=[0,0],t=4)},e.prototype.hE=function(t,e,i,n){for(var r,a=2;8!==a;)switch(a){case 5:a=null!=(r=n.A0)&&r.Xaa()?4:3;break;case 2:a=1;break;case 1:this.Ag[n.type]+=t,a=5;break;case 4:this.z0[n.type]+=t,this.meb.add(t,e,i),this.hza[n.type].add(t,e,i),a=3;break;case 3:a=null!=(r=n.A0)&&r.Bxa(t,e,i,this.C_)?9:8;break;case 9:this.B_[n.type]+=t,a=8}},e.prototype.F$=function(){return{bytesRequestedPacingVideo:this.z0[n.u.J],bytesRequestedPacingAudio:this.z0[n.u.P],estimatedBytesPacedVideo:this.B_[n.u.J],estimatedBytesPacedAudio:this.B_[n.u.P],bytestotalVideo:this.Ag[n.u.J],bytestotalAudio:this.Ag[n.u.P],pacedAvtpVideo:this.hza[n.u.J].get().ta,pacedAvtpAudio:this.hza[n.u.P].get().ta,pacedAvtp:this.meb.get().ta}},t=4;break;case 4:return e}}(),e.SOa=i},function(t,e,i){_esm(e),(t=i(260)).__exportStar(i(945),e),t.__exportStar(i(420),e)},function(t,e,i){var u,r,c,a,h,f,l,o,s;function n(t,e){this.atob=t,this.console=e,this.rO=1,this.W1=[],this.gW=[]}_esm(e),e.JSa=void 0,u=i(260),r=i(72),c=i(149),a=i(946),h=i(420),f=i(421),l=i(957),o=i(958),s=i(959),n.prototype.lVb=function(t,e,i,n){var r,a;void 0===i&&(i={w:16,Qr:9}),void 0===n&&(n=1),r=l.Xc(h.cnb,function(t){return h.e5a(e,h.d5a[t])}),f.assert(r),f.assert(16===i.w&&9===i.Qr||4===i.w&&3===i.Qr),i=16===i.w?"16:9":"4:3";for(var o=0,s=this.W1;o<s.length;o++)if((a=s[o]).type===t&&a.Qx===i&&"h264"===a.Wd&&a.frameRate===r&&a.trackId===n)return a;return t=this.lMb(t,i,r,n),this.W1.unshift(t),this.W1.length>this.rO&&this.W1.splice(this.rO,this.W1.length-this.rO),t},n.prototype.kVb=function(t,e,i,n){var r;void 0===i&&(i=32),void 0===n&&(n=1);for(var a,o=0,s=this.gW;o<s.length;o++)"silence"===(r=s[o]).type&&r.Wd===t&&r.bitrate===i&&r.trackId===n&&(a=r);return void 0===a&&(a=this.bMb(t,n),this.gW.unshift(a),this.gW.length>this.rO&&this.gW.splice(this.rO,this.gW.length-this.rO)),u.__assign(u.__assign({},this.jOb(a,new c.M(e))),{bitrate:i})},n.prototype.lMb=function(t,e,i,n){var r=a.dnb[t][e].h264[i]();return u.__assign(u.__assign({},this.decode(r,n)),{type:t,Qx:e,Wd:"h264",frameRate:i,width:r.width,height:r.height,ej:r.ej,fj:r.fj})},n.prototype.bMb=function(t,e){var i=a.sZa.silence[t][32]();return u.__assign(u.__assign({},this.decode(i,e)),{type:"silence",Wd:t,bitrate:32,channels:i.channels})},n.prototype.decode=function(t,e){var i,n,r=t.ug?this.e2a(t.xa,t.Dn,t.Fn,t.En):this.atob(t.xa),a=t.sg?this.e2a(t.ya,t.xn,t.zn,t.yn):this.atob(t.ya);return 1!==e&&(i=new DataView(r),n=new DataView(a),t.Yh.forEach(function(t){return i.setUint32(t,e)}),t.Th.forEach(function(t){return n.setUint32(t,e)})),u.__assign(u.__assign({},t),{xa:r,ya:a,trackId:e})},n.prototype.jOb=function(t,e){var i,n=new c.M(t.oa);return new c.M(t.duration).Xk(n)<=(e=Math.ceil(e.Xk(n)))?t:(i=new r.dx(this.console,{mediaType:0},t.ya).XAa(e,n.aa),f.assert(i),u.__assign(u.__assign({},t),{ya:s.st(i.ya),duration:n.jC(e)}))},n.prototype.e2a=function(t,e,i,n){return(t=void 0===e?o.Eba(t):n?o.Eba(e+t):o.Eba(t,new Uint8Array(this.atob(e)))).buffer.slice(t.byteOffset+(i||0),t.byteOffset+t.byteLength)},e.JSa=n},function(t,e,i){_esm(e),e.sZa=e.dnb=void 0,e.dnb={padding:{"16:9":{h264:{23976:function(){return i(156)},24:function(){return i(947)},25:function(){return i(948)},2997:function(){return i(949)},30:function(){return i(950)}}},"4:3":{h264:{23976:function(){return i(157)},24:function(){return i(951)},25:function(){return i(952)},2997:function(){return i(953)},30:function(){return i(954)}}}}},e.sZa={silence:{heaac:{32:function(){return i(955)}},ddp:{32:function(){return i(956)}}}}},function(t,e,i){_esm(e),e.Th=e.Yh=e.fj=e.ej=e.height=e.width=e.bitrate=e.profile=e.duration=e.oa=e.zn=e.sg=e.ya=e.Fn=e.ug=e.xa=e.yn=e.xn=e.En=e.Dn=void 0,t=i(156),e.Dn=t.xa,e.En=t.ug,e.xn=t.ya,e.yn=t.sg,e.xa="hewgADAChewRC3gAYChexZBWhewRgOYFhexjDQhewFDOhewRgfYLhewFBghewacyNjQ6BmBtB0A9gA4CgpYCgOoAA9AtAxgCIABwgAwAAygCAAgFQAgA4AA6hEIAdyPWF1B0Bvhj4XBGhj49AGhj4FC6hj4NCqhj5TAwhj4JAYhj4KhfwAgAgCABCAhkIpBYgAYEhkJvDogBoG",e.ug=!0,e.Fn=759,e.ya="jCQ1DojCQtDQjCQJCIjCQJgC4CiqQSgL4Ci2QGgF4CiwQGgF56jCQGgF4tAPCgjCQJgC4CgEYKjCX/jCRTg9AAjCX/jCQ5",e.sg=!0,e.zn=1555,e.oa={fb:1e3,aa:24e3},e.duration={fb:24e3,aa:24e3},e.profile="none-h264mpl30-dash",e.bitrate=64,e.width=320,e.height=240,e.ej=4,e.fj=3,e.Yh=[176,782],e.Th=[44]},function(t,e,i){_esm(e),e.Th=e.Yh=e.fj=e.ej=e.height=e.width=e.bitrate=e.profile=e.duration=e.oa=e.zn=e.sg=e.ya=e.Fn=e.ug=e.xa=e.yn=e.xn=e.En=e.Dn=void 0,t=i(156),e.Dn=t.xa,e.En=t.ug,e.xn=t.ya,e.yn=t.sg,e.xa="hewgADAChewRC3gAYCgBIABhCohexVBWhewRgOYFhexjDQhewFDOhewRgfYLhewFBghewacyNjQ6BmBtB0A9gA4CgpYCgOoAA9AtAxgCIABwgAwAAyA1A6gFQAgA4AA6hEIAdyPWF1B0Bvhj4XBGhj49AGhj4FC6hj4NCqhj5TAwhj4JAYhj4KhfwAgAgCABCQhkIpDIgAYEhkJWg4oDhkISDogBoG",e.ug=!0,e.Fn=759,e.ya="i3QBCtjCQVCVjCQZDojCQRBAjCQJAZgB4BC1jCQJDQjCQJCIjCQJgC4CiqQSgL4Ci2QGgF4CiwQGgF56jCQGgF5WAljDwejD4CCBjD//jD4uA1jD//jD4MB4jD4TCWgIIGgGYFC1gQYLC3gpgF",e.sg=!0,e.zn=1555,e.oa={fb:1e3,aa:25e3},e.duration={fb:25e3,aa:25e3},e.profile="none-h264mpl30-dash",e.bitrate=64,e.width=320,e.height=240,e.ej=4,e.fj=3,e.Yh=[176,782],e.Th=[44]},function(t,e,i){_esm(e),e.Th=e.Yh=e.fj=e.ej=e.height=e.width=e.bitrate=e.profile=e.duration=e.oa=e.zn=e.sg=e.ya=e.Fn=e.ug=e.xa=e.yn=e.xn=e.En=e.Dn=void 0,t=i(156),e.Dn=t.xa,e.En=t.ug,e.xn=t.ya,e.yn=t.sg,e.xa="hew1C4gAYCgBIAB1AwhexpgOYFhex/gfYLhe0GAHBThewmgvgBAmhRwBgAYChexWgzQDhewb",e.ug=!0,e.Fn=759,e.ya="i3QBDujCQVDWjCQtB8jCQJAegB4BD2iYwBDwjCTJjIRlgF4ugEYDAqjLQegAYEjMABDZjMH/jMAuA1jMCFA6jMACA3iaoAf28P4FA2BWAEBQCXARDNDoCdAzAfC/AVC4C6A0A3C9DOhaQAetTxBvC4AsATBpBPBgAQifAAicQAARDdASgBoACkEQAvBKDrjL4HB/izAEiggDjL4DB/jBwIjL4BgBoBDpjL4IgBoCjL4Ni7IMjL4DiqoDjL4IgGgGjL4EgKAGjL4JgIQGgCwCjL4FgIQKjL4BgQoJjL4BgIQJjL4ZgIQJjL4CgQoIjL4CgIQIjL4HgQoMjMADgIQKjMABgQoIjMACgBoGjMABB4jUQMBngIIECWjMANC1gQgLC3gpoIgIIBC8jUQMBIgIIEDagQYND5gQYLD7gIILD9gIIFdP//3xgCAAAfDh",e.sg=!0,e.zn=1555,e.oa={fb:1001,aa:3e4},e.duration={fb:30030,aa:3e4},e.profile="none-h264mpl30-dash",e.bitrate=64,e.width=320,e.height=240,e.ej=4,e.fj=3,e.Yh=[176,739],e.Th=[44]},function(t,e,i){_esm(e),e.Th=e.Yh=e.fj=e.ej=e.height=e.width=e.bitrate=e.profile=e.duration=e.oa=e.zn=e.sg=e.ya=e.Fn=e.ug=e.xa=e.yn=e.xn=e.En=e.Dn=void 0,t=i(156),e.Dn=t.xa,e.En=t.ug,e.xn=t.ya,e.yn=t.sg,e.xa="hewgADAChewRC3gAYCgBIAB1AwhexVBWhewRgOYFhexjDQhewFDOhewRgfYLhewFBghewacyNjQ6BmBtB0A9gA4CgpYCgOoAA9AtAxgCIABwgAwAAzAwA6gFQAgA4AA6hEIAdyPWF1B0Bvhj4XBGhj49AGhj4FC6hj4NCqhj5TAwhj4JAYhj4KhfwAgAgCABDghkIlg04BAmCIgAYEhkJWg4oDhkISDogBoG",e.ug=!0,e.Fn=759,e.ya="i3QBDujCQVDWjCQZDojCQRB8jCQJAegB4BD2iYwBDwjCQFDQjCQJCIjCQJgC4CiqQSgL4Ci2QGgF4CiwQGgF6qjIQGgF5dgEYDAqjLQegAYEjMABDZjMH/jMAuA1jMCFA6jMACA3iaoAf28P4FA2BWAEBQCXARDNDoCdAzAfC/AVC4C6A0A3C9DOhaQAetTxBvC4AsATBpBPBgAQifAAicQAARDdASgBoACkEQAvBKDrjL4HB/izAEiggDjL4DB/jBwIjL4BgBoBDpjL4IgBoCjL4Ni7IMjL4DiqoDjL4IgGgGjL4EgKAGjL4JgIQGgCwCjL4FgIQKjL4BgQoJjL4BgIQJjL4ZgIQJjL4CgQoIjL4CgIQIjL4HgQoMjMADgIQKjMABgQoIjMACgBoGjMABB4jUQMBngIIECWjMANC1gQgLC3gpoIgIIBC8jUQMBIgIIEDagQYND5gQYLD7gIILD9gIIFdP//3xgCAAAfDh",e.sg=!0,e.zn=1555,e.oa={fb:1e3,aa:3e4},e.duration={fb:3e4,aa:3e4},e.profile="none-h264mpl30-dash",e.bitrate=64,e.width=320,e.height=240,e.ej=4,e.fj=3,e.Yh=[176,782],e.Th=[44]},function(t,e,i){_esm(e),e.Th=e.Yh=e.fj=e.ej=e.height=e.width=e.bitrate=e.profile=e.duration=e.oa=e.zn=e.sg=e.ya=e.Fn=e.ug=e.xa=e.yn=e.xn=e.En=e.Dn=void 0,t=i(157),e.Dn=t.xa,e.En=t.ug,e.xn=t.ya,e.yn=t.sg,e.xa="hewgADAChewRC3gAYChexZBWhewRgOYFhexjDQhewFDOhewRgfYLhewFBghewacyNjQ6BmBtB0A9gA4CgpYCgOoAA9AtAxgCIABwgAwAAygCAAgFQAgA4AA6hEIAdyPWF1B0Bvhj4XBGhj49AGhj4FC6hj4NCqhj5TAwhj4JAYhj4KADAAAIgAgBABCAhkIpBYgAYEhkJvDogBoG",e.ug=!0,e.Fn=759,e.ya="jCQ1DojCQtDQjCQJCIjCQJgC4CiqQSgL4Ci2QGgF4CiwQGgF56jCQGgF4tAPCgjCQJgC4CgEYKjCX/jCRTg9AAjCX/jCQ5",e.sg=!0,e.zn=1555,e.oa={fb:1e3,aa:24e3},e.duration={fb:24e3,aa:24e3},e.profile="none-h264mpl30-dash",e.bitrate=64,e.width=320,e.height=240,e.ej=1,e.fj=1,e.Yh=[176,782],e.Th=[44]},function(t,e,i){_esm(e),e.Th=e.Yh=e.fj=e.ej=e.height=e.width=e.bitrate=e.profile=e.duration=e.oa=e.zn=e.sg=e.ya=e.Fn=e.ug=e.xa=e.yn=e.xn=e.En=e.Dn=void 0,t=i(157),e.Dn=t.xa,e.En=t.ug,e.xn=t.ya,e.yn=t.sg,e.xa="hewgADAChewRC3gAYCgBIABhCohexVBWhewRgOYFhexjDQhewFDOhewRgfYLhewFBghewacyNjQ6BmBtB0A9gA4CgpYCgOoAA9AtAxgCIABwgAwAAyA1A6gFQAgA4AA6hEIAdyPWF1B0Bvhj4XBGhj49AGhj4FC6hj4NCqhj5TAwhj4JAYhj4KADAAAIgAgBABCQhkIpDIgAYEhkJWg4oDhkISDogBoG",e.ug=!0,e.Fn=759,e.ya="i3QBCtjCQVCVjCQZDojCQRBAjCQJAZgB4BC1jCQJDQjCQJCIjCQJgC4CiqQSgL4Ci2QGgF4CiwQGgF56jCQGgF5WAljDwejD4CCBjD//jD4uA1jD//jD4MB4jD4TCWgIIGgGYFC1gQYLC3gpgF",e.sg=!0,e.zn=1555,e.oa={fb:1e3,aa:25e3},e.duration={fb:25e3,aa:25e3},e.profile="none-h264mpl30-dash",e.bitrate=64,e.width=320,e.height=240,e.ej=1,e.fj=1,e.Yh=[176,782],e.Th=[44]},function(t,e,i){_esm(e),e.Th=e.Yh=e.fj=e.ej=e.height=e.width=e.bitrate=e.profile=e.duration=e.oa=e.zn=e.sg=e.ya=e.Fn=e.ug=e.xa=e.yn=e.xn=e.En=e.Dn=void 0,t=i(157),e.Dn=t.xa,e.En=t.ug,e.xn=t.ya,e.yn=t.sg,e.xa="hew8B1Awhez4gfYEhe0GAHBThewmgvgBAmhRwBgAYChexWgzQDhewb",e.ug=!0,e.Fn=759,e.ya="i3QBDujCQVDWjCQtB8jCQJAegB4BD2iYwBDwjCTJjIRlgF4ugEYDAqjLQegAYEjMABDZjMH/jMAuA1jMCFA6jMACA3iaoAf28P4FA2BWAEBQCXARDNDoCdAzAfC/AVC4C6A0A3C9DOhaQAetTxBvC4AsATBpBPBgAQifAAicQAARDdASgBoACkEQAvBKDrjL4HB/izAEiggDjL4DB/jBwIjL4BgBoBDpjL4IgBoCjL4Ni7IMjL4DiqoDjL4IgGgGjL4EgKAGjL4JgIQGgCwCjL4FgIQKjL4BgQoJjL4BgIQJjL4ZgIQJjL4CgQoIjL4CgIQIjL4HgQoMjMADgIQKjMABgQoIjMACgBoGjMABB4jUQMBngIIECWjMANC1gQgLC3gpoIgIIBC8jUQMBIgIIEDagQYND5gQYLD7gIILD9gIIFdP//3xgCAAAfDh",e.sg=!0,e.zn=1555,e.oa={fb:1001,aa:3e4},e.duration={fb:30030,aa:3e4},e.profile="none-h264mpl30-dash",e.bitrate=64,e.width=320,e.height=240,e.ej=1,e.fj=1,e.Yh=[176,739],e.Th=[44]},function(t,e,i){_esm(e),e.Th=e.Yh=e.fj=e.ej=e.height=e.width=e.bitrate=e.profile=e.duration=e.oa=e.zn=e.sg=e.ya=e.Fn=e.ug=e.xa=e.yn=e.xn=e.En=e.Dn=void 0,t=i(157),e.Dn=t.xa,e.En=t.ug,e.xn=t.ya,e.yn=t.sg,e.xa="hewgADAChewRC4gAYCgBIAB1AwhexVBWhewRC3gOYEhexjDQhewFDOhewRgQ4FgfYEhewFBghewacyNjQ6BmBtB0A9gA4CgpYCgOoAA9AtAxgCIABwgAwAAzAwA6gFQAgA4AA6hEIAdyPWF1B0Bvhj4XBGhj49AGhj4FC6hj4NCqhj5TAwhj4JAYhj4KADAAAIgAgBABDghkIlg04BAmgGoBgAYChkJWg4oDhkISDogBoG",e.ug=!0,e.Fn=759,e.ya="i3QBDujCQVDWjCQZDojCQRB8jCQJAegB4BD2iYwBDwjCQFDQjCQJCIjCQJgC4CiqQSgL4Ci2QGgF4CiwQGgF6qjIQGgF5dgEYDAqjLQegAYEjMABDZjMH/jMAuA1jMCFA6jMACA3iaoAf28P4FA2BWAEBQCXARDNDoCdAzAfC/AVC4C6A0A3C9DOhaQAetTxBvC4AsATBpBPBgAQifAAicQAARDdASgBoACkEQAvBKDrjL4HB/izAEiggDjL4DB/jBwIjL4BgBoBDpjL4IgBoCjL4Ni7IMjL4DiqoDjL4IgGgGjL4EgKAGjL4JgIQGgCwCjL4FgIQKjL4BgQoJjL4BgIQJjL4ZgIQJjL4CgQoIjL4CgIQIjL4HgQoMjMADgIQKjMABgQoIjMACgBoGjMABB4jUQMBngIIECWjMANC1gQgLC3gpoIgIIBC8jUQMBIgIIEDagQYND5gQYLD7gIILD9gIIFdP//3xgCAAAfDh",e.sg=!0,e.zn=1555,e.oa={fb:1e3,aa:3e4},e.duration={fb:3e4,aa:3e4},e.profile="none-h264mpl30-dash",e.bitrate=64,e.width=320,e.height=240,e.ej=1,e.fj=1,e.Yh=[176,782],e.Th=[44]},function(t,e){_esm(e),e.Th=e.Yh=e.channels=e.profile=e.bitrate=e.duration=e.oa=void 0,e.xa="IAcgZnR5BwBpBzBvA2gBYBABgA4CBkBzBtgAIBdpeGRhBzBogCQAACDRBtFvB2gDYBdsbXZoBkgA4BcA30AoDsgAYCgBIAADDogB4CgGoAgAQDgAAIgBgLgB4QBAgDwNgAANACgGABfDdHJhBrgBYBBcB0BrgOYDADgO4GgLoRgMIDgCgDgO4sckZWR0BzgA4BccZWxzB0gGIMAEgBIFcBO21kBpBhgkYCgA4AgfYEgQ4IBdDAgBYCBVDEgCQDAtgDoABsBygD4GgoQAB1BugNAKBTgB4BBkBIBhgAYABsBlgEYDfmbWluBmgA4BAQgsoAgKgIgSACgNYAgC4DccZHJlgA4CgSAGcMdXJsAggBYFCqgVQABiBsgA4BBegA4ABzgHYGgC4CdObXA0gVACgewMgpQAAQgAwCgVQEAAAqBlgGQAgeACgpoAAcgcYCAUBAAVgCwDB9gBgCCQEFcTEFblAAAGABgvwBgTIBF0gFIDgAAFgB4BBzBjgB4JAUgB4BB6gtgNgEYBBjBvgB4JA4hFwABlB4gC4CBtBlgcoGAQgq4BgpQAg7QAgC4DgVIGgAYBgCwCg+4DgAACBiB1gywAgZICBagG4AgA4DgAACAhgrwKgyQBhDgAFwggoCgAAHAtBpg4YEAlCpB0hVgAgA4BAdhXYAgHgDghQDdMYXZmA1A5AuAxA2gAQAEw",e.ug=!0,e.ya="EAABAcBtFvBmgA4AcAEG1mBoBkgA4BgAACABgAQBcEdHJhgC4CAcB0gC4CACAAAqgC4EgAYCAEgBwBgAADAQgDYABkB0gGYFgAACDQgGYAB1BugAwAACgE4CAvgFQBAkgA4BAXgAYBAGgAa0cBM21kBhB0DegdgAdMYXZjA1A5AuAxA4gAQAEwcAQiAIDBAYA4AhAQAEBgCMAcgAsM",e.sg=!0,e.oa={fb:1024,aa:24e3},e.duration={fb:48128,aa:24e3},e.bitrate=32,e.profile="heaac-2-dash",e.channels="2.0",e.Yh=[176,635],e.Th=[44]},function(t,e){_esm(e),e.Th=e.Yh=e.channels=e.profile=e.bitrate=e.duration=e.oa=void 0,e.xa="IAcgZnR5BwBtBwA0AygBYBcAaXNvBtgAYBcyZGFzBogA4BA2gCIAACFtFvB2gDQBd4bXZoBkABgEgCgAABffUJM0gA4HCYCWCAgBYCACB1DigAgAgEABgEYGgAADgBgLgB4QBAgDwNgAANACgGABexdHJhBrgBYBBoB0BrgP4DAHgP4PgKoJgQYDgNwOgQYrcBQW1kBpBhgBABAsgA4Agd4VAAC7gd4DcAAwYABVDEgBIDA0gFIABsBygIIGgmwAB1BugKIKBBB1gKAAdvIE1lgKwBcgSGFugFIABlgFQDDZgtAABuBmgA4BAQBzBtgHoAgFwJAkgE4AgC4DccZHJlgA4CgWIGcMdXJsAggBYFedc3RiBsgHYDF0BzgHYJAQBjgB4MBBgD4ABzgLYGgG4CcxZWMtAzggoPgYwAAQgAwCgaoFANBkgEgAAzgDgBAPgKADgIABBjgKAJAUgB4BB6gpwNgEYBBjBvgB4JA8hFAABlB4gFYCBtBlgoAIgzAFAgg5gAgDYDgQAGg3AICggAYA",e.ug=!0,e.ya="EAADCoBtFvBmgA4AcAEG1mBoBkgA4BgAACABgC4BeQdHJhgC4CAUB0gC4CACAAAggC4CACCggD4DgCYBBkB0gEgBgAAJADgCYAByB1BugA4AALgCwCBAgB4BCwgAYAAGgDACCAgD4EgBf/gBbxAABMBzhkwABwgBACQqgAA5gIIAcgCG1kBhB0ALB3AAE/CHDAhxgDhyQAgAYBBYAfAAIEIBhuYAgAAAIQgBgBcY+fPnDPCfA+B8gAwBDfDzCrgBQGDHD8DqgC4Gfx/zq+gCQCgBgCB/DOCvgD4EgBgAAfgFgLcBrQA1CgAGC0AADWCAAaDQADBagZwEAuDGgP//gP//gP//gP//gP//gP//gP//gP//gP//gP//gP//gP//gP//gP//gP//gP9v",e.sg=!0,e.oa={fb:1536,aa:48e3},e.duration={fb:96768,aa:48e3},e.bitrate=32,e.profile="ddplus-5.1-dash",e.channels="5.1",e.Yh=[196,633],e.Th=[44]},function(t,e){_esm(e),e.Xc=void 0,e.Xc=function(t,e){for(var i=0;i<t.length;i++)if(e(t[i],i,t))return t[i]}},function(t,e,i){var h;function f(t){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="[t>>6]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="[63&t]}function l(t,e){return h.assert(0<e&&e<8),f((e-1<<8)+t)}function d(t){return 43===t?62:47===t?63:t<58?t-48+52:t<91?t-65:t-71}_esm(e),e.Eba=e.s0b=void 0,h=i(421),e.s0b=function(n,t){var r,a,o,s,e,i,u;function c(t,e){var i=r;t=a-e-t,h.assert(1<=t),h.assert(t-1<16384),h.assert(2<=e&&e-2<512),e=f(2048+(t-1>>>3))+f(e-2+((t-1&7)<<9)),r=i+e,o=a,s=0}for(r="",o=a=t||0,t=s=0;a<n.byteLength;)if(e=o,0!==(i=s)&&s<513&&n[a]===n[o+s])++s,++a;else if(513===s)c(e,i),t=0;else{for(--o;0<=o&&a-s-16384<=o&&(n[e]!==n[o]||0<s&&!function(t,i,e){return n.subarray(t,t+e).every(function(t,e){return t===n[i+e]})}(a-s,o,s+1));)--o;if(0<=o&&a-s-16384<=o)++s,++a;else if(e===a||1===i){for(a-=i,e=1;e<5&&n[a+e]===n[a];)++e;r+=l(n[a],e),a+=e,4===(t=1<e?0:t+1)&&(r=r.slice(0,r.length-8),r+=f(1792+(u=n.subarray(a-4,a))[0])+f((u[1]<<4)+(u[2]>>>4))+f((u[2]<<8&3840)+u[3])),o=a,s=0}else c(e,i),t=0}return 1===s?r+=l(n[o],1):1<s&&c(o,s),r},e.Eba=function(e,t){function i(){var t=e.slice(r,r+=2);return(d(t.charCodeAt(0))<<6)+d(t.charCodeAt(1))}for(var n=t||new Uint8Array(4096),r=0,a=t?t.byteLength:0;r<e.length;)if(2048&(c=i())){t=i(),o=u=s=void 0;var o,s=a-(((2047&c)<<3)+(t>>>9)+1),u=2+(511&t);if(a+u>n.byteLength&&((o=new Uint8Array(2*n.byteLength)).set(n,0),n=o),s+u<=a)n.set(n.subarray(s,s+u),a);else for(o=0;o<u;++o)n[a+o]=n[s+o];a+=u}else if(1792==(3840&c))n[a++]=255&c,t=i(),c=i(),n[a++]=t>>>4,n[a++]=(t<<4&240)+(c>>>8),n[a++]=255&c;else{t=255&c;for(var c=1+(c>>>8),h=0;h<c;++h)n[a++]=t}return n.subarray(0,a)}},function(t,e){_esm(e),e.uIb=e.st=void 0,e.st=function(){for(var i,t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return e=(t=Array.prototype.concat.apply([],t)).reduce(function(t,e){return t+e.byteLength},0),i=new Uint8Array(e),t.reduce(function(t,e){return i.set(new Uint8Array(e),t),t+e.byteLength},0),i.buffer},e.uIb=function(){for(var i,t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return e=(t=Array.prototype.concat.apply([],t)).reduce(function(t,e){return t+e.byteLength},0),i=new Uint8Array(e),t.reduce(function(t,e){return i.set(e,t),t+e.byteLength},0),i}},function(t,e,a){var i,f,l,c,d,n,h,p,o,b,g,m,s,v;_esm(e),e.YLa=void 0,i=a(0),f=i.__importStar(a(11)),t=a(12),l=i.__importDefault(a(28)),c=i.__importDefault(a(961)),d=i.__importDefault(a(3)),n=a(181),h=a(255),i.__importDefault(a(256)),p=i.__importDefault(a(962)),a(422),o=a(2),b=a(965),g=a(1051),m=new d.default.Console("ASEJS","media|asejs"),s=m.trace.bind(m),v=m.warn.bind(m),t=function(r){for(var t=2;27!==t;)switch(t){case 7:Object.defineProperties(e.prototype,{Yf:{get(){return this.oA},configurable:!0}}),Object.defineProperties(e.prototype,{dj:{get(){return this.F5.dj},configurable:!0}}),Object.defineProperties(e.prototype,{gva:{get(){return this.GAb},configurable:!0}}),t=13;break;case 4:Object.defineProperties(e.prototype,{Gw:{get(){return this.ana},configurable:!0}}),Object.defineProperties(e.prototype,{KC:{get(){return this.K6},configurable:!0}}),Object.defineProperties(e.prototype,{nwa:{get(){return!f.sa(this.BXa)},configurable:!0}}),Object.defineProperties(e.prototype,{pG:{get(){return this.wXa},configurable:!0}}),t=7;break;case 13:e.prototype.xa=function(t,e,i,n,r,a){for(var o,s,u=2;11!==u;)switch(u){case 13:(e=new g.CKa(this,s,i,a)).addListener("prebuffstats",t=function(t){for(var e=2;1!==e;)2===e&&(o.emit(t.type,t),e=1)}),e.addListener("discardedBytes",t),e.addListener("flushedBytes",t),e.addListener("cacheEvict",t),(s.IEa||s.HEa)&&e.addListener("mediacache",function(t){for(var e=2;1!==e;)2===e&&(o.emit("mediacache",t),e=1)}),this.oA=e,u=12;break;case 2:s=(o=this).config,h.YL.reset(),0<s.dw&&(!f.sa(t)&&t>s.dw&&(t=s.dw),e>s.dw&&(e=s.dw)),f.sa(t)&&(this.BXa=e),u=3;break;case 14:u=s.Cmb||s.EEa?13:12;break;case 12:this.ima=!0,u=11;break;case 3:this.K6=n,this.wXa=r,c.default(s),this.F5=h.YL.D$(s,m,this.xG),this.ana=new p.default(s),u=14}},e.prototype.U0=function(t,e,i){for(var n=2;4!==n;)2===n&&(this.BXa=t,this.K6=e||0,this.wXa=i||0,n=4)},e.prototype.createSession=function(t,e,i,n,r,a,o,s,u,c){for(var h=2;4!==h;)switch(h){case 7:v(""),h=1;break;case 2:h=this.ima?1:5;break;case 1:return s=s||this.config,this.bc.reset(),this.ep.Kcc(),this.ana.reset(),void 0===a&&(a=this.f$(t,e)),f.sa(this.K6)&&(this.K6=d.default.oq()[l.default.Sd.J]<=s.e2b?0:s.B0),t=new b.qSa(this,t,c,e,i,n,r,a,o,s,u),this.dI.push(t),t;case 9:h=this.ima?0:8;break;case 5:v("open: streamingManager not initted"),h=4}},e.prototype.DZ=function(t,e){return!(!this.oA||!(t=this.oA.DZ(t,e)))&&t},e.prototype.bBb=function(t){for(var e,i=2;4!==i;)2===i&&(this.bc.$R(null),e=this.dI.indexOf(t),f.sa(e)?v("can't find session in array, movieId:",t.df.T.L):(this.dI.splice(e,1),0===this.dI.length&&this.ep.Scc(),this.ep.save(),this.dj.save()),i=4)},t=19;break;case 2:i.__extends(e,r),Object.defineProperties(e.prototype,{bc:{get(){return this.F5.bc},configurable:!0}}),Object.defineProperties(e.prototype,{ep:{get(){return this.F5.ep},configurable:!0}}),t=4;break;case 19:return e.prototype.f$=function(t,e,i){return n.Mta(t,e,i)},e.prototype.fpa=function(){for(var t,e=2;5!==e;)2===e&&(null!=(t=this.oA)&&t.L4a(),e=5)},e.prototype.sE=function(){for(var t,e=2;5!==e;)2===e&&(null!=(t=this.oA)&&t.dNb(),e=5)},e.prototype.tb=function(){for(var t=2;6!==t;)switch(t){case 2:o.assert(0===this.dI.length,"Attempted to destruct Manager before all Sessions removed"),this.ima=!1,delete this.F5,t=4;break;case 4:delete this.ana,delete this.xG,this.sE(),t=8;break;case 8:delete this.oA,h.YL.reset(),t=6}},e}function e(t,e){for(var i,n=2;13!==n;)switch(n){case 2:(i=r.call(this)||this).config=t,i.xG=e,n=4;break;case 14:return i;case 4:t=a(456),s("nf-ase version:",t,"DEBUG:",!1),i.ima=!1,i.GAb=!1,i.dI=[],n=14}}}(t.EventEmitter),e.YLa=t},function(t,e,i){var n,r,a,o;n=i(2).assert,i(158),r=i(3).default,a=r.Ks,o=r.ytb,t.exports=function(){var s,e,u,t,i;new r.Console("ASEJSMONKEY","media|asejs");r.Ks.Rc||(s=function(t){this.ozb=t},e=o.prototype.appendBuffer,r.MediaSource.Rc||(r.MediaSource.Rc={}),"undefined"!=typeof nrdp&&nrdp.w7&&(t=r.MediaSource.Rc,!(i=nrdp.Wk.Bsc.match(/android-(\d*)/))||23<i[1]?t.CDa=!1:(i=nrdp.Wk.$lc.bq.platform.platformVersion.match(/(\d*)\.(\d*).(\d*)/),t.CDa=!!i&&(6<i[1]||6==i[1]&&1<i[2]||6==i[1]&&1==i[2]&&1<=i[3])),t.Adc=!1,r.MediaSource.Rc.m0a=!1,r.MediaSource.Rc.Jcb=!1),r.Ks.Rc={D0:{Vnb:!0,sU:!0,Jtb:!0}},Object.defineProperty(a.prototype,"_response",{get(){return this.MBb||this.Gxb},set(t){this.Gxb=t}}),u=a.prototype.open,a.prototype.open=function(t,e,i,n,r,a,o){return 1===i&&(this.MBb=new s(this)),u.call(this,t,e,i,n,r,a,o)},a.prototype.CR=function(){this.CN=void 0},o.prototype.appendBuffer=function(t){return t instanceof ArrayBuffer?e.call(this,t):t instanceof s?this.z7(t.ozb):void n(!1)})}},function(t,e,i){var n,r;function a(){this.tA=this.QU=this.c6=this.q6=this.Z5=null}function o(t){this.K=t,this.aE=[],this.Qs=new a,this.iV()}n=i(11),i(28),i(8),new(r=i(3).default).Console("ASEJS_SESSION_HISTORY","media|asejs"),a.prototype.Jd=function(t){var e=!1;return t&&n.has(t,"ens")&&n.has(t,"lns")&&n.has(t,"fns")&&n.has(t,"d")&&n.has(t,"t")&&(this.Z5=t.ens,this.q6=t.lns,this.c6=t.fns,this.QU=t.d,this.tA=t.t,e=!0),e},a.prototype.getState=function(){var t;return n.xb(this.Z5)||n.xb(this.q6)||n.xb(this.c6)||n.xb(this.QU)||n.xb(this.tA)?null:((t={d:this.QU,t:this.tA}).ens=this.Z5,t.lns=this.q6,t.fns=this.c6,t)},a.prototype.get=function(){var t,e=this.getState();return e&&(t=new Date(this.tA),e.dateint=1e4*t.getFullYear()+100*(t.getMonth()+1)+t.getDate(),e.hour=t.getHours()),e},o.prototype.iV=function(){var t=r.storage.get("sth");t&&this.Jd(t)},o.prototype.Jd=function(t){var i=null,e=this.K;return t.forEach(function(t){var e=new a;e.Jd(t)?(i=!0,this.aE.push(e)):n.xb(i)&&(i=!1)},this),this.aE=this.aE.filter(function(t){return t.QU>=e.mca}),this.aE.sort(function(t,e){return t.tA-e.tA}),!!n.xb(i)||i},o.prototype.ama=function(){var e=[];return this.aE.forEach(function(t){e.push(t.getState())},this),e},o.prototype.save=function(){var t=this.ama(),e=this.K,i=this.Qs.getState();i&&i.d>=e.mca&&(t.push(i),this.aE.push(this.Qs)),t.length>e.Nba&&(t=t.slice(t.length-e.Nba,t.length)),this.Qs=new a,t&&r.storage.set("sth",t)},o.prototype.reset=function(){this.Qs=new a},o.prototype.OSb=function(){return this.Qs.get()},o.prototype.cVb=function(){return this.aE.length+1},o.prototype.SCb=function(t){this.Qs.Z5=t,this.Qs.tA=r.time.ia()},o.prototype.bDb=function(t){this.Qs.q6=t,this.Qs.tA=r.time.ia()},o.prototype.WCb=function(t,e){this.Qs.c6=t,this.Qs.tA=r.time.ia(),this.Qs.QU=e},t.exports=o},function(t,e){function i(t,e,i){this.RBb=e,this.$wb=i,this.H=t}_esm(e),e.GMa=void 0,i.prototype.Xza=function(t){return t=this.jYb(t,this.RBb)+this.$wb,this.Qma=isNaN(t)?NaN:this.MCa(t)},i.prototype.IHb=function(t){return!isNaN(this.Qma)&&this.Qma>t?1:0},i.prototype.jYb=function(t,e){var i=0;if(t.length!==e.length)i=NaN;else for(var n=0;n<t.length;n++)i+=t[n]*e[n];return i},i.prototype.MCa=function(t){return 1/(1+Math.exp(-t))},e.GMa=i},function(t,e){function i(t){this.Mk={},this.wma=t,this.Hg=[],this.Ws=!1,this.eI=void 0}_esm(e),e.kU=void 0,i.prototype.m7=function(t){this.Hg.length===this.wma&&this.Hg.shift(),Array.isArray(t)?this.Hg=this.Hg.concat(t):this.Hg.push(t),this.Ws=!0},i.prototype.KP=function(){return this.Hg.length},i.prototype.jpa=function(){var t=this.Hg;return 0<t.length?t.reduce(function(t,e){return t+e},0)/this.Hg.length:void 0},i.prototype.g8=function(){var t=this.Hg,e=this.jpa();if(0<t.length&&void 0!==e)return t=t.reduce(function(t,e){return t+e*e},0)/t.length,Math.sqrt(t-e*e)},i.prototype.jv=function(t){var e,i,n;return!this.Ws&&void 0!==this.eI||(this.eI=this.Hg.slice(0).sort(function(t,e){return t-e}),this.Ws=!1),void 0===this.Mk[t]&&(e=this.eI,i=Math.floor(t/100*(e.length-1)+1)-1,n=(t/100*(e.length-1)+1)%1,this.Mk[t]=i==e.length-1?e[i]:e[i]+n*(e[1+i]-e[i])),this.Mk[t]},e.kU=i},function(t,e,i){var v,p,o,y,n,b,w,f,A,_,E,l,k,r,S,T,I,O,x,d,g,m,R,P,C,j,N,M,D,L;_esm(e),e.qSa=void 0,t=i(0),v=i(12),p=t.__importStar(i(11)),o=i(129),y=i(966),n=i(181),b=i(6),w=i(77),f=i(264),A=i(991),_=i(992),E=t.__importDefault(i(3)),l=E.default.MediaSource,k=i(8),r=i(2),S=i(182),T=i(438),I=i(994),O=i(995),x=i(159),t=i(36),d=i(996),g=i(997),m=i(439),R=i(1032),P=i(448),C=i(1041),j=i(452),N=i(1047),M=i(1048),D=i(1049),L=i(1050),i=function(){var t;function e(t,e,i,n,r,a,o,s,u,c,h){for(var f,l,d,p,b=2;76!==b;)switch(b){case 61:this.qh.sEa(this.K),b=60;break;case 44:this.Oi=new v.Kf,this.np=new N.fSa(this,this.H,this.uc.bind(this),l),this.Kg=new M.DIa(this,this.H,this.uc.bind(this)),this.nX=new I.CIa(this,this.H,l),b=40;break;case 15:this.Hc=t,this.Vm=o,this.K=c=this.V0a.Qwb(e,c),this.y6=a.Q_,b=24;break;case 39:this.Oi.on(this.Hc.Yf,"managerdebugevent",function(t){for(var e=2;1!==e;)2===e&&(k.gb(m,t.type,t),e=1)}),b=38;break;case 55:this.U.addListener(function(t){for(var e,i=2;1!==i;)if(2===i){try{for(e=2;1!==e;)2===e&&(f.Hb.Qfc.bind(f.Hb)(t),e=1)}catch(t){a000.h9M(6),f.Jb.fp(a000.I9M("Hindsight: Error when adding updatePlaySegment Listener: ",t))}i=1}}),b=77;break;case 40:b=c.Zi&&this.Hc.Yf?39:38;break;case 36:d&&c.dP&&!c.vOb&&(c.set?c.set({enableAdaptiveParallelStreaming:!1}):c.dP=!1),0==Math.floor(1e6*Math.random())%c.bO&&(this.iBb=new A.DRa(c)),this.Ex=[],this.rh=[],b=51;break;case 24:this.QXa=!!a.Cmb,this.fCb=!!a.EEa,this.sN=a.Cba,this.D6=void 0,this.U=new O.WFa(u),b=34;break;case 56:f=this,b=55;break;case 60:this.Wa=new P.fha(this,this.Jb,this.H,this.ena.bind(this),e,this.bE,this.K,this.Kg,this.U,this.ZX.bind(this)),g={Cba:this.Cba,du:this.du,fo:this.fo,Q_:this.Q_},this.Hb=new j.ISa(this.H,this.qh,this.K,this.uc.bind(this),this.U,g,this.Hc.bc,this.Jb,this.Kg,this.Wa,p),b=57;break;case 63:for(var g in c=c.RWb)i=c[g],c.hasOwnProperty(g)&&i&&(this.K[g]=i);b=61;break;case 64:b=c.Era&&this.qh.Uaa?63:60;break;case 45:e=e.T,this.qh=new C.HFa(this,this.H,e.Jl.mVb(),this.Hc.bc,c,this.CQ(),t,this.uc.bind(this),p),b=64;break;case 77:h&&this.Hb.ws(h,e.N),b=76;break;case 37:this.Oi.on(this.Hc.Yf,"mediacache",function(t){for(var e=2;1!==e;)switch(e){case 2:k.gb(m,"mediacache",t),e=1;break;case 4:(0,k.gb)(m,"",t),e=2}}),b=36;break;case 51:t=null,c.yX&&(t=this.Hc.Gw.aE),S.Fz.instance().reset(),(e=y.Wia.create({Ub:0,ja:e,Dq:i,bib:n,Pe:!!a.Pe,$9a:!1,Yi:!!a.Yi,Fd:w.$ba(!!a.iW,!!a.DG),ea:0,Qa:a.Qa,Jb:this.Jb,Et:this.EVa.bind(this),jc:this,config:this.K,H:this.H,Kg:this.Kg,np:this.np,Yf:this.QXa?this.Hc.Yf:void 0,mF:this.mF})).cW=!0,b=46;break;case 46:this.Vd=[e],b=45;break;case 57:b=this.zt?56:77;break;case 8:this.Ik=this.H.error.bind(this.H),this.Qb=this.H.warn.bind(this.H),this.Xj=this.H.trace.bind(this.H),l=new L.kOa(this,this.H),this.Jb=l,b=12;break;case 38:b=(c.IEa||c.HEa)&&this.Hc.Yf?37:36;break;case 34:this.bE=r||0,this.tN=0,this.gla=s,this.S6=!1,this.ZU=void 0,this.n6=-1,this.Uma=0,b=44;break;case 18:this.cj=new D.gMa(this,this.H,this.uc.bind(this),p),this.OBb=[!a.DG,!a.iW,!1],this.uc(w.u.P)&&this.uc(w.u.J),b=15;break;case 2:var m=this;this.fA=new x.V4,this.EUa=[],this.mF={Ax:[Object.create(null),Object.create(null)]},this.H=new E.default.Console("ASEJS","media|asejs","("+o.sessionId+")"),b=8;break;case 12:this.V0a=new T.LHa(this.H),p=(d=!(!e||!e.choiceMap||"branching"!==e.choiceMap.type))?{vX:!1,zt:!1}:_.w6a(c),this.vX=p.vX,this.zt=p.zt,this.cz=c.cz,b=18}}for(t=2;91!==t;)switch(t){case 27:e.prototype.GP=function(){return this.Vd.length},e.prototype.Qva=function(t,e){for(var i=2;9!==i;)switch(i){case 2:i=t===e?1:5;break;case 1:return!0;case 5:return t=this.Vd[t],e=this.Vd[e],t.T.Hf.Pe&&e.T.Hf.QZ||e.T.Hf.Pe&&t.T.Hf.QZ;case 6:return-3}},e.prototype.m$=function(t){for(var e=2;5!==e;)switch(e){case 1:return{id:t.G.id,bf:t.bf,ud:t.Qza,gf:t.gf,dd:t.Fea,Ic:t.Ic};case 2:e=(t=this.Wa.Ei.children[t])?1:5}},e.prototype.cl=function(){{var t;return{id:(t=this.Wa.Ei).G.id,bf:t.bf,ud:t.Qza,gf:t.gf,dd:t.Fea,Ic:t.Ic}}},e.prototype.IS=function(t,e){return this.Wa.IS(t,e)},e.prototype.open=function(){for(var r,a,n,t=2;33!==t;)switch(t){case 11:r=new l(this.U.GI),t=10;break;case 15:r.sourceBuffers.forEach(function(t){for(var e=2;13!==e;)switch(e){case 2:var i=t.mediaType,n=a.Hb.bg[i];t=new f.gha(n.H,i,r,t,s,!1,a.U,void 0,a.Uh.bind(a)),n=new R.TLa(t,i,a.Wa,a.K,n.H),t.addListener("headerAppended",a.wyb.bind(a)),t.addListener("requestAppended",a.zyb.bind(a)),e=9;break;case 9:t.addListener("error",function(t){for(var e=2;1!==e;)2===e&&(a.nr(t.errorstr,void 0,"NFErr_MC_StreamingFailure"),e=1)}),t.addListener("logdata",function(t){for(var e=2;1!==e;)2===e&&(k.gb(a,t.type,t),e=1)}),s.Zi&&t.addListener("managerdebugevent",function(t){for(var e=2;1!==e;)2===e&&(k.gb(a,t.type,t),e=1)}),e=6;break;case 6:a.rh[i]=t,a.Ex[i]=n,e=13}}),this.hA=new d.xQa(this.Ex,this.EN.bind(this),this.U.Qe.bind(this.U)),this.du&&this.Jb.Hzb(),o=this.R6a(),this.Jb.CWa(o),t=23;break;case 16:throw this.Xj("Error:",r.error),r.error;case 35:this.emit(o.type,o),t=33;break;case 34:this.Xj("Error:",r.error),this.nr("exception in init",void 0,"NFErr_MC_StreamingInitFailure"),t=33;break;case 9:this.et&&(c.push(w.u.P),h.push(w.u.P)),this.nX.Lyb(),t=7;break;case 1:t=!p.Oa(this.bE)||this.bE<0?5:4;break;case 10:t=1===r.readyState?20:34;break;case 2:a=this,t=1;break;case 18:this.ig=r,t=17;break;case 7:var e=s.$s;this.Hc.Yf&&this.Hc.Yf.xr(e,this.Vm.sessionId),n=this.nX.xxb(h,o),h.forEach(function(t,e){for(var i=2;1!==i;)2===i&&("headers"===t?a.ZU=n[e]:a.Hb.bg[t].Te=n[e],i=1)}),this.Jb.Ym("createMediaSourceStart"),t=11;break;case 17:t=r.n7(c)?15:16;break;case 5:this.nr("startPts must be a positive number, not "+this.bE,void 0,"NFErr_MC_StreamingInitFailure"),t=33;break;case 23:var i=function(){for(var t=2;5!==t;)2===t&&(a.Jb.Zzb(),a.po()?a.Qb("shutdown detected before startRequests"):a.JBb(),t=5)};s.IMb?setTimeout(function(){for(var t=2;1!==t;)switch(t){case 4:a.KUa(u).then(i),t=9;break;case 2:a.KUa(u).then(i),t=1}},0):this.KUa(u).then(function(){for(var t=2;1!==t;)2===t&&(setTimeout(i,0),t=1)}),o={type:"logdata",target:"startplay",fields:{audiogapconfig:s.NQ,audiogapdpi:this.ig.Rc&&this.ig.Rc.NQ,aseApiVersion:this.sI}},t=35;break;case 4:var o,s=this.K,u=(o=this.df.T).L,c=[],h=["headers"];this.fo&&(c.push(w.u.J),h.push(w.u.J)),t=9;break;case 20:this.Jb.Ym("createMediaSourceEnd"),r.Rc||(r.Rc=l.Rc),t=18}},Object.defineProperties(e.prototype,{sI:{get(){return"1.0"},configurable:!0}}),e.prototype.aua=function(){},e.prototype.flush=function(){for(var t=2;1!==t;)switch(t){case 2:this.cj.flush(),t=1;break;case 4:this.cj.flush(),t=4}},e.prototype.paused=function(){for(var t=2;1!==t;)2===t&&(this.U.paused(),t=1)},t=32;break;case 32:e.prototype.Lza=function(){},e.prototype.close=function(){for(var t=2;5!==t;)2===t&&(this.Vd.forEach(function(t){for(var e=2;1!==e;)2===e&&(t.close(),e=1)}),this.cj.close(),t=5)},e.prototype.Tgb=function(){for(var t=2;1!==t;)2===t&&(this.Hc.bBb(this),t=1)},e.prototype.cd=function(){for(var t,e=2;20!==e;)switch(e){case 8:this.Ex.forEach(function(t){for(var e=2;1!==e;)2===e&&(t.reset(),e=1)}),this.U.Jd(b.za.Uj),this.Vd.forEach(function(t){for(var e=2;1!==e;)switch(e){case 4:t.cd(),e=2;break;case 2:t.cd(),e=1}}),this.Vd=[],this.Oi.clear(),t=this.ig,e=11;break;case 2:this.qh.Z3b(),this.B5(),this.Wa.tb(),this.nX.Lxb(),null!=(t=this.hA)&&t.reset(),e=8;break;case 11:this.ig=void 0,p.sa(t)||t.Hr()||this.Qb("Error on MediaSource destroy: ",t.error),e=20}},e.prototype.suspend=function(){for(var t=2;1!==t;)2===t&&(this.cj.suspend(),t=1)},e.prototype.resume=function(){for(var t=2;1!==t;)2===t&&(this.cj.resume(),t=1)},e.prototype.po=function(){return this.cj.po()},e.prototype.EBb=function(){for(var t,e=2;8!==e;)2===e&&(t=this.K,this.dE&&clearTimeout(this.dE),this.dE=setTimeout(this.NV.bind(this),t.Tfa),this.gA||(this.gA=setInterval(this.Jb.AWa.bind(this.Jb),t.lO)),this.T6||(this.T6=setInterval(this.Jb.hAb.bind(this.Jb),t.uDa)),this.du&&!this.x5&&(this.x5=setInterval(this.Jb.zWa.bind(this.Jb),t.F7)),e=8)},e.prototype.B5=function(){for(var t=2;7!==t;)switch(t){case 2:this.dE&&(clearTimeout(this.dE),this.dE=void 0),this.gA&&(clearInterval(this.gA),this.gA=void 0),this.T6&&(clearInterval(this.T6),this.T6=void 0),this.x5&&(clearInterval(this.x5),this.x5=void 0),t=3;break;case 3:this.UM&&(clearTimeout(this.UM),this.UM=void 0),this.Ila&&(clearTimeout(this.Ila),this.Ila=void 0),this.Kg.B5(),t=7}},e.prototype.play=function(){for(var t=2;1!==t;)2===t&&(this.cj.play(),t=1)},t=39;break;case 39:e.prototype.stop=function(){for(var t=2;1!==t;)switch(t){case 4:this.cj.stop(),t=4;break;case 2:this.cj.stop(),t=1}},e.prototype.iu=function(t,e){return this.np.iu(t,e)},e.prototype.seek=function(t,e){return this.np.seek(t,e)},e.prototype.up=function(o){for(var s,i,t,e=2;18!==e;)switch(e){case 12:e=this.zt?11:10;break;case 4:this.rh.forEach(function(t){for(var e=2;1!==e;)2===e&&(i=Math.max(0,Math.min(i,t.Jta-o)),e=1)}),this.Uma+=1,s=this.Wa.Yc,w.Uf.forEach(function(t){for(var e,i,n,r=2;6!==r;)switch(r){case 5:r=c.Zi?4:9;break;case 2:i=s.fe(t),r=1;break;case 3:var a="underflow: "+o+", mediaType: "+t+", completedMs: "+i.CO+", completedBytes: "+n+", partials: "+i.Va.TF+", streamingPts: "+i.Fc+", completeStreamingPts: "+i.Er+", fragments: "+JSON.stringify(i.Va.da)+", toAppend: "+(a&&a.Jea()),r=9;break;case 1:r=i?5:6;break;case 4:a=u.rh[t],n=u.Wa.CI(s,t),r=3;break;case 9:c.Zi&&u.Jb.Kn(a),i.Npa(),null!=(e=i.Hh)&&e.Q9b(),r=6}}),e=7;break;case 2:var u=this,c=this.K,n=this.kv(this.X_,o);this.Qb("underflow: going to BUFFERING at player pts:",o,"contentPts:",n,"entry.manifestOffset:",this.df.zy,"branchOffset:",this.Wa.bf),i=c.cw,e=4;break;case 7:this.df.T.mk(),this.emit("underflow"),this.M6(2),this.Kg.Nk(),e=12;break;case 11:try{for(t=2;1!==t;)switch(t){case 2:this.u9(b.za.ed),t=1;break;case 4:this.u9(b.za.ed),t=3}}catch(t){a000.O9M(6),this.Jb.fp(a000.I9M("Hindsight: Error when evaluating QoE at Buffering: ",t))}e=10;break;case 10:n=(n=this.Hc.bc.get()).confidence?n.Xa.ta:0,i>c.dQb&&n>c.cQb&&this.ena(),e=18}},e.prototype.$l=function(t){return this.np.$l(t)},e.prototype.qt=function(t,e,i){return this.np.qt(t,e,i)},e.prototype.iWa=function(t){for(var e,i=2;3!==i;)2===i&&(this.tN=t,e=this.Vd[t],this.Jb.Wzb(t,e),this.Jb.CWa(e.T.Rt),i=3)},e.prototype.UN=function(t,e,i){for(var o,r,n,a,s,u,c,h=2;34!==h;)switch(h){case 2:r=(o=this).K,h=1;break;case 1:h=this.po()?5:4;break;case 25:t.t_a(),e.replace||this.Wa.lDb(u,a,s),e=this.Hb.Fy[w.u.P].UJ,i=this.Hb.Fy[w.u.J].UJ,r.Zi&&this.Jb.Kn("addManifest, currentPts: "+this.U.Qe()+" playerState: "+this.U.getState()+" streamCount: ("+t.Or(w.u.P).Pc.length+", "+t.Or(w.u.J).Pc.length+") lastStreamAppended: ("+e+", "+i+")"),this.et&&p.sa(e)||this.fo&&p.sa(i)||(t.T.PK([t.Or(w.u.P),t.Or(w.u.J)]),this.d7()),h=34;break;case 5:this.Qb("addManifest: pipelines already shutdown"),h=34;break;case 9:h=!e.aqc&&(this.et&&n.Hs||this.fo&&a.Hs)?8:7;break;case 4:e=e||{},n=this.Wa.Yc.fe(w.u.P),a=this.Wa.Yc.fe(w.u.J),h=9;break;case 13:a=e.ea||0,s=e.Qa,t=y.Wia.create({Ub:n,ja:t,Dq:i,bib:e.CS||[this.df.p$(w.u.P),this.df.p$(w.u.J)],Pe:!1,$9a:!!e.replace,Yi:!!e.Yi,Fd:w.$ba(!!e.iW,!!e.DG),ea:a,Qa:s,Jb:this.Jb,Et:this.EVa.bind(this),jc:this,config:this.K,H:this.H,Kg:this.Kg,np:this.np,Yf:this.QXa?this.Hc.Yf:void 0,mF:this.mF}),u=t.T,h=20;break;case 7:e.Q_&&(this.y6=!0),n=this.Vd.length,e.replace&&1!==n?n=1:this.df.T.Hf.Pe&&!e.replace&&1===n&&(this.Qb("addManifest in fastplay but not drm manifest, leaving space for it"),n=this.Vd[0].clone(),this.Vd.push(n),n=this.Vd.length),h=13;break;case 8:this.Qb("addManifest ignored, pipelines already set EOS:",n.Hs,a.Hs),h=34;break;case 20:(e.wFb||this.EUa)&&this.Hb.ws(e.wFb||this.EUa,u.N),i=["audio_tracks","video_tracks"],c=this.R6a(),e.replace&&i.forEach(function(t,n){for(var r,a,e=2;3!==e;)switch(e){case 2:r=u.EB(n),e=1;break;case 7:e=r?9:1;break;case 1:e=r?5:3;break;case 5:a=o.Vd[0].T,Object.keys(r).forEach(function(t){for(var e,i=2;5!==i;)2===i&&((e=a.ly(n,t))&&e.Yd&&(r[t].u8(e),(t=u.Rt)[n]>c[n]&&(c[n]=t[n])),i=5)}),e=3}}),i.forEach(function(t,i){for(var n,e=2;5!==e;)2===e&&((n=u.EB(i))&&Object.keys(n).forEach(function(t){for(var e=2;1!==e;)2===e&&(n[t].Zlb(E.default.oq()[i],u.ty()?r.ybb:0),e=1)}),e=5)}),h=15;break;case 15:t.cW="boolean"!=typeof e.$Eb||e.$Eb,this.Vd[n]&&this.Vd[n].cd(),this.Vd[n]=t,h=25}},e.prototype.UV=function(t){return this.np.UV(t)},e.prototype.rB=function(t){for(var e,i,n,r,a=2;7!==a;)switch(a){case 2:i=this.K,a=1;break;case 1:a=this.po()?7:5;break;case 8:e&&(this.rh.forEach(function(t){for(var e=2;5!==e;)2===e&&(i.Q9&&t.O4a(),t.rB(),e=5)}),i.iga&&this.DV(),this.df.T.Hf.Pe&&this.c7(this.np.UD?this.np.UD.Ub:this.tN+1),i.$s||null!=(n=this.li)&&n.kF()||this.fA.Ox||this.MV("drmReady"),this.np.Sla()),a=7;break;case 5:p.sa(e)&&(e=!0),n=this.Wa.Yc.fe(w.u.P),r=this.Wa.Yc.fe(w.u.J),i.Zi&&this.Jb.Kn("drmReady at streaming pts: "+(n?n.Fc:null)+", "+(r?r.Fc:null)+" for movieId: "+t+" readyState: "+e),a000.O9M(6),this.U.ZR(a000.I9M(t,""),e),a=8}},t=48;break;case 13:Object.defineProperties(e.prototype,{Gw:{get(){return this.Hc.Gw},configurable:!0}}),Object.defineProperties(e.prototype,{du:{get(){return this.iBb},configurable:!0}}),Object.defineProperties(e.prototype,{Cba:{get(){return this.sN},configurable:!0}}),Object.defineProperties(e.prototype,{Q_:{get(){return this.y6},configurable:!0}}),e.prototype.uc=function(t){return this.OBb[t]},e.prototype.ZX=function(){return E.default.time.ia()-this.mla},e.prototype.R6a=function(){return(this.Vd||[]).reduce(function(i,t){{var n;return n=t.T,w.Uf.forEach(function(t){for(var e=2;1!==e;)2===e&&(n.Rt[t]>i[t]&&(i[t]=n.Rt[t]),e=1)}),i}},[0,0])},e.prototype.CQ=function(){for(var i,t=2;4!==t;)switch(t){case 5:case 7:return i;case 2:i=0,p.forEach(this.df.T.ja.audio_tracks,function(t){for(var e=2;1!==e;)2===e&&(p.forEach(t.streams,function(t){for(var e=2;1!==e;)2===e&&(i=Math.max(i,t.bitrate),e=1)}),e=1)}),t=5}},e.prototype.Uh=function(t){return this.Vd[t]},e.prototype.BTb=function(){{var t;return(t=this.Vd[0]).T.Hf.Pe?this.Vd[1]:t}},t=27;break;case 87:e.prototype.bna=function(t,e){for(var i,n=2;9!==n;)switch(n){case 6:n=i.ab(t)?8:7;break;case 1:n=i.ab(t)?5:9;break;case 5:var r=this.Hb.bg[t],a=this.Hb.OC[t];p.sa(r.Wp)&&(r.Wp=e,t===w.u.J&&this.et&&(t=this.Hb.bg[w.u.P],p.sa(t.Wp)&&(i=i.ab(w.u.P)).hL(e),this.emit("ptschanged",e))),p.sa(a.zW)&&(a.zW=e),n=9;break;case 2:i=this.Wa.Yc,n=1}},e.prototype.c8a=function(t){for(var e=2;1!==e;)2===e&&(this.li&&(this.li.R0b(t),this.M_a()),e=1)},e.prototype.X$=function(t){for(var e=2;1!==e;)2===e&&(this.li&&(this.li.Q0b(t),this.M_a()),e=1)},e.prototype.M_a=function(){for(var t,e=2;4!==e;)switch(e){case 5:this.li.kF()||(this.li=void 0,t.$s||this.fA.Ox||this.MV("allCompleted")),e=4;break;case 2:e=this.li?1:4;break;case 1:t=this.K,e=5}},e.prototype.NV=function(){for(var c,t,e,i,h,f,l,d,n=2;7!==n;)switch(n){case 4:this.Kg.Nk(),d=Math.max(d,1),n=9;break;case 2:t=(c=this).K,e=this.X_,i=this.Vd[e],h=this.Wa.Yc,f=this.U.Qe()||0,l=this.kv(e,f),d=t.Tfa,this.Hc.Yf&&void 0!==i.nK&&i.nK-f<=t.lcb&&this.Hc.Yf.xr(!0,this.Vm.sessionId),this.U.getState()===b.za.Gc&&([w.u.J,w.u.P].forEach(function(t){for(var e,i,n,r,a,o,s,u=2;35!==u;)switch(u){case 8:(s=c.Wa.Cv(f,h,t))&&!s.me&&(s=c.rh[t].XZb),u=7;break;case 2:u=c.uc(t)?1:35;break;case 16:c.sN&&s.yw!=e.g_b&&c.Jb.iAb(s.yw),u=15;break;case 6:(o=s.gf-f)<d&&(d=o),e=c.Hb.Fy[t],n=(i=s.T).Ub,o=s.Va,u=11;break;case 17:l=c.kv(n,f),u=15;break;case 15:e.g_b=s.yw,(i=s.Pa)!=e.Gwa&&(e.Gwa=i,t=c.Vd[n].T.ly(t,i),n=c.kv(n,s.ud),c.Jb.dAb(t,s.ud,n,t.T.Ub)),u=25;break;case 21:a.Qb("Unable to find request presenting at playerPts:",f),u=23;break;case 20:c.n6=n,c.Jb.Uzb(i,f,s.yw,null!==(r=0<n?n-1:null)?c.Vd[r].T.L:null,r),u=17;break;case 11:u=c.fo&&t!==w.u.J?15:10;break;case 1:a=h.ab(t),u=5;break;case 7:u=s?6:21;break;case 5:u=a?4:35;break;case 10:c.Wa.k3b(s,s.yw),u=n>c.n6?20:16;break;case 4:o=a.Va,a.yO(f),u=8;break;case 25:s=s.bitrate,u=24;break;case 24:p.sa(s)||s==a.Ueb||(a.Ueb=s),u=23;break;case 23:c.VAb(o,f),c.Wa.$7b(),u=35}}),this.Wa.Ow(f,l)),n=4;break;case 9:this.dE&&clearTimeout(this.dE),this.dE=setTimeout(this.NV.bind(this),d),n=7}},e.prototype.H5=function(t){return this.Kg.H5(t)},e.prototype.Nk=function(){return this.Kg.Nk()},e.prototype.mI=function(t,e){for(var i,n,r=2;13!==r;)switch(r){case 14:this.Qb("abortRequest with no requestManagaer:",t),r=13;break;case 2:i=t.Va,r=1;break;case 5:n=t.mediaType,r=4;break;case 1:r=i?5:14;break;case 4:t.abort(),t.cd(),t.Oi&&t.Oi.clear(),r=8;break;case 8:i.v0(t),this.rh[n].v0(t),!0===e&&this.Kg.Nk(),r=13}},e.prototype.HBb=function(t){for(var e,i,n=2;5!==n;)2===n&&(e=t.mediaType,i=this.Hb.bg[e],p.sa(i.zca)?t.Qb("no newAudioTrack set"):(this.rh[e].pause(),i.TS=!0,t=this.df.Or(w.u.P),i=this.df.T.getTrackById(i.zca.trackId),this.Jb.Jzb(t,i)),n=5)},e.prototype.PAb=function(t){for(var i,e,n,r,a,o,s,u,c,h=2;27!==h;)switch(h){case 9:h=null!=(e=this.li)&&e.kF()?8:7;break;case 2:n=(i=this).K,r=w.u.P,t=t.$a,a=this.Hb.bg[r],this.Hb.QA=a.zca,u=(s=(o=this.df).T.getTrackById(this.Hb.QA.trackId)).UC,c=this.U.Qe()-t.bf,h=9;break;case 8:this.li.D9b(function(t){for(var e=2;5!==e;)switch(e){case 1:return i.mI(t,!1),!0;case 2:e=t.mediaType===r?1:5;break;case 3:e=t.mediaType!=r?9:8}}),this.li.kF()||(this.li=void 0,n.$s||this.fA.Ox||this.MV("audioSwitch")),h=7;break;case 7:e=this.Hc.f$(o.T.ja,[u],r),this.gla[r]=e[r],this.nX.cXa(r,t.T),a.zca=void 0,h=12;break;case 12:this.qh.gz(null),this.Yma(r,m.qU.U4a,t),this.Wa.xib(t,!0),h=20;break;case 19:h=e<this.Vd.length?18:16;break;case 20:e=this.tN,h=19;break;case 18:this.G7b(e,r,u,c),h=17;break;case 16:t.Egb(s,c),this.nL(r),h=27;break;case 17:++e,h=19}},t=104;break;case 48:e.prototype.faa=function(){return this.U.Yo(this.df.T)},e.prototype.LUa=function(t){for(var e,i,n,r=2;11!==r;)switch(r){case 2:r=t>=this.Vd.length?1:5;break;case 1:return!1;case 9:i=this.Vd[t].T,r=8;break;case 5:e=this.Wa.Yc.fe(w.u.P),i=this.Wa.Yc.fe(w.u.J),e=!e||e.Ki,n=!i||i.Ki,r=9;break;case 12:return!(!(!this.et||t&&t.stream.Yd)||!e);case 8:r=(t===this.tN+1&&i.Hf.replace||e&&n)&&this.U.Yo(i)?6:7;break;case 7:return!1;case 6:t=i.Zh[w.u.P],e=i.Zh[w.u.J],e=!this.fo||e&&e.stream.Yd,r=12}},e.prototype.d7=function(){for(var t=2;1!==t;)2===t&&(this.c7(this.tN+1),t=1)},e.prototype.c7=function(t){for(var e,i=2;6!==i;)switch(i){case 2:i=this.LUa(t)?5:1;break;case 5:e=this.Vd[t],i=4;break;case 1:return!1;case 4:i=e.aQb||!e.T.Hf.replace?3:9;break;case 9:return this.PBb(t),this.Kg.Nk(),!0;case 3:return!1}},e.prototype.PBb=function(t){for(var i,e,n=2;20!==n;)switch(n){case 9:a=(s=this.df).T.Hf.Pe,i=[],[w.u.J,w.u.P].forEach(function(t){for(var e=2;1!==e;)2===e&&(o.T.uc(t)&&(i[t]=o.Or(t)),e=1)}),n=14;break;case 2:var r,a,o=this.Vd[t],s=this.K;a=(a=(r=this.Wa.Yc).ab(w.u.P))?a.Fc:void 0,e=(e=r.ab(w.u.J))?e.Fc:void 0,s.Zi&&this.Jb.Kn("switchManifest manifestIndex: "+t+", streamingPts: "+a+", "+e),n=9;break;case 14:a?this.Wa.G9b(s.T,o.T,i):r.Yib(o.T,i),this.iWa(t),o.xya(),this.np.Sla(),this.Kg.Nk(),n=20}},e.prototype.Gdb=function(){for(var t,e=2;6!==e;)switch(e){case 1:e=r?5:7;break;case 2:r=(t=this.Wa.Yc).ab(w.u.P),e=1;break;case 8:this.Kg.Nk(),e=6;break;case 5:var i=this.U.Qe(),n=this.Hb.bg[r.mediaType],r=(t=this.Wa.Cv(i,t,w.u.P))?t.Va:(this.Qb("onAudioTrackSwitchStarted but current playing request not found"),r.Va);this.PAb(r),n.TS=!1,e=8;break;case 7:this.Qb("onAudioTrackSwitchStarted ignored, no audio pipeline"),e=6}},e.prototype.sfa=function(t){for(var e,i,n,r,a,o=2;35!==o;)switch(o){case 8:return this.Qb("switchTracks rejected, buffering"),!1;case 3:return this.Qb("switchTracks rejected, previous switch still in progress: "+JSON.stringify(this.Hb.QA)),!1;case 9:o=this.U.Gf()?8:7;break;case 13:e=this.Wa.Yc,o=12;break;case 14:return this.Qb("switchTracks rejected, previous switch still waiting to start"),!1;case 17:o=i?15:16;break;case 10:o=i<r.gca?20:19;break;case 5:return this.Qb("switchTracks rejected, audio disabled"),!1;case 11:i=this.Wa.Tx(e,w.u.J),o=10;break;case 7:n=this.Hb.bg[w.u.P],o=6;break;case 4:o=this.Hb.QA?3:9;break;case 2:r=this.K,o=1;break;case 15:a=this.df.Or(w.u.P).trackId,o=27;break;case 20:return this.Qb("switchTracks rejected, bufferLevelMs",i,"<",r.gca),!1;case 1:o=this.et?4:5;break;case 25:r.Zi&&this.Jb.Kn("switchTracks current: "+a+" to: "+i.trackId),n.zca={trackId:t},r=e.ab(w.u.P),this.HBb(r),o=21;break;case 12:o=this.U.getState()===b.za.Gc?11:19;break;case 21:return!0;case 26:return!1;case 27:o=a===i.trackId?26:25;break;case 18:i=this.df.T.getTrackById(t),o=17;break;case 6:o=n.TS?14:13;break;case 19:t=t.zo,o=18;break;case 16:return this.Qb("switchTracks can't find trackId:",t),!1}},e.prototype.ws=function(t,e){for(var i=2;1!==i;)2===i&&(this.Hb.ws(t,e),i=1)},e.prototype.Cv=function(t,e,i){return this.Wa.Cv(t,this.Wa.Ei,e,i)},e.prototype.dh=function(t){return this.np.dh(t)},t=59;break;case 59:e.prototype.u9=function(t,e){for(var i,n,r,a=2;6!==a;)switch(a){case 3:a=e?9:8;break;case 9:n.nBa(),a=6;break;case 8:e=r.zSb();try{for(i=2;1!==i;)2===i&&(this.Jb.Rzb(e),i=1)}catch(t){this.H.error("exception: [".concat(t.message,"] [").concat(t.Esc,"]"))}a=6;break;case 2:t=(n=this.Hb).ksa(t,e),r=this.qh.AAa,t&&!t.YN&&r.Rra(t),a=3}},e.prototype.npa=function(t,e){return a000.O9M(7),r.assert(a000.K9M(e,0)),this.Vd[e].yGb(w.u.J,t)},e.prototype.kv=function(t,e){for(var i,n,r=2;7!==r;)switch(r){case 5:r=n?4:8;break;case 4:i=n.bf,r=3;break;case 3:return p.Oa(i)||(i=this.Vd[t].zy),a000.O9M(0),a000.I9M(i,e);case 2:void 0===t&&(t=this.X_),n=this.Wa.DQb(e,t),r=5;break;case 8:0<(n=this.Wa.msa(t)).length&&(i=(n=n[0]).bf),r=3}},e.prototype.DO=function(t,e){for(var i,n,r=2;7!==r;)switch(r){case 2:void 0===t&&(t=this.X_),i=this.Wa.CQb(e,t),r=5;break;case 8:0<(i=this.Wa.msa(t)).length&&(n=(i=i[0]).bf),r=3;break;case 3:return p.Oa(n)||(n=this.Vd[t].zy),a000.O9M(6),a000.I9M(e,n);case 4:n=i.bf,r=3;break;case 5:r=i?4:8}},e.prototype.EN=function(){for(var t,e=2;4!==e;)switch(e){case 2:t=this.U.Gf(),e=1;break;case 9:t=this.U.Gf(),e=2;break;case 8:t&&this.Hb.QA,e=0;break;case 1:e=t||this.Hb.QA?5:4;break;case 5:t&&this.Jb.Ama(),this.NV(),this.U.Jd(b.za.Gc),this.Kg.Nk(),e=4}},e.prototype.ena=function(){for(var e,t,i=2;3!==i;)2===i&&(t=(e=this).U.Gf(),this.Wa.Yc.Lea(t,function(t){return e.rh[t]?e.rh[t].Jea():""}),this.UM&&(clearTimeout(this.UM),this.UM=void 0),this.hA.T0b(),i=3)},e.prototype.rXa=function(t){for(var e,i,n=2;7!==n;)switch(n){case 3:this.Hb.jA(),n=9;break;case 2:t.Ki=!0,t.Hs=!1,e=this.U.Qe()||0,t.yO(e),n=3;break;case 9:n=this.zt&&t.mediaType===w.u.J?8:7;break;case 8:try{for(i=2;1!==i;)2===i&&(this.u9(b.za.Ns,{Qa:t.Ic}),i=1)}catch(t){a000.O9M(6),this.Jb.fp(a000.I9M("Hindsight: Error evaluating QoE at endOfStream: ",t))}n=7}},e.prototype.eBb=function(){for(var t,e=2;5!==e;)2===e&&((t=(t=this.Hc.bc)&&t.get())&&t.avtp&&this.Gw.SCb({avtp:t.avtp.ta}),e=5)},e.prototype.JBb=function(){for(var t,e,i,n=2;4!==n;)2===n&&(this.U.Jd(b.za.Dg),e=(t=this.Wa.Yc).fe(w.u.P),i=t.fe(w.u.J),this.fo&&!this.zXa(i)?this.Qb("failed to start video pipeline"):this.et&&!this.zXa(e)?this.Qb("failed to start audio pipeline"):(this.MWa=!0,this.Vd[0].T.MY=!0,e=this.Hb.bg[w.u.J],i=this.Hb.bg[w.u.P],(e&&0<e.rw||i&&0<i.rw)&&this.Jb.Pzb(String(t.T.L),i?i.rw:0,e?e.rw:0,i?i.R_:0,e?e.R_:0),this.U.p$a()?(this.M6(0),this.et&&(t=this.df.p$(w.u.P),e=this.df.Or(w.u.P).trackId,this.Jb.Szb(t,e))):this.Qb("startup, playerState no longer STARTING:",this.U.getState())),n=4)},e.prototype.zXa=function(t){for(var e,i,n=2;14!==n;)switch(n){case 1:n=p.sa(i)?5:4;break;case 2:e=t.mediaType,i=this.Hb.bVb(t),n=1;break;case 4:t=t.track.Pc[i],n=3;break;case 9:return!0;case 3:n=t.mq()?9:8;break;case 5:return this.po()||this.nr("startPipeline failed",t.$a.T.Ub,"NFErr_MC_StreamingInitFailure"),!1;case 8:return i=this.df.T,t.T.m1a(t,{offset:0,OE:!i.Hf.Pe&&!i.Yi&&e===w.u.J,ey:!this.Hb.bg[e].aRb}),!0}},t=72;break;case 94:return e.prototype.Ayb=function(t,e){for(var i=2;5!==i;)2===i&&(e=n.U6a(e),this.gla[t.mediaType]=e,i=5)},Object.defineProperties(e.prototype,{QA:{set(t){for(var e=2;1!==e;)2===e&&(this.Hb.QA=t,e=1)},configurable:!0}}),e;case 72:e.prototype.M6=function(i,t){for(var n,e,r,a,o,s=2;19!==s;)switch(s){case 2:e=(n=this).K,r=this.Hb.bg[w.u.P]||{},a=this.Hb.bg[w.u.J]||{},o=this.Hb.OC[w.u.J]||{},(this.Hb.OC[w.u.P]||{}).zW=void 0,o.zW=void 0,s=4;break;case 4:this.U.Jd(2===i?b.za.eg:b.za.ed),this.Jb.Mzb(t),this.hA.reset(),this.df.T.Mya(),s=7;break;case 11:e.yX&&(this.Ila=setTimeout(function(){for(var t=2;1!==t;)2===t&&(n.eBb(),t=1)},e.zra)),this.U.Gf()&&(this.UM=setTimeout(function(){for(var t=2;1!==t;)switch(t){case 2:n.Hb.jA(),t=1;break;case 4:n.Hb.jA(),t=5}},e.uC)),this.Kg.Nk(),s=19;break;case 7:this.emit("startBuffering"),w.Uf.forEach(function(t){for(var e=2;5!==e;)switch(e){case 2:e=(t=n.Wa.Yc.fe(t))?1:5;break;case 1:t.Woa=0,t.seeking=0===i||1===i,t.Npa(),e=5}}),this.mla=E.default.time.ia(),r.km=a.km=this.mla,0===i&&(!this.fo||0<a.rw)&&(!this.et||0<r.rw)&&this.Hb.jA(),s=11}},e.prototype.MV=function(t){for(var e,i=2;3!==i;)2===i&&(a000.O9M(6),t=a000.I9M("wipeHeaderCache:",t),this.fA.Ox&&this.Ik("AdoptingData still has lock:"+t),(e=this.K).lK||(e.Zi&&this.Jb.Kn(t),this.Hc.sE(),this.li&&(this.li=void 0)),i=3)},e.prototype.KUa=function(i){var o,t,n,e=2;function s(t,e){for(var i,n,r,a,o,s,u,c=2;10!==c;)switch(c){case 6:c=n.header?13:14;break;case 2:n=e[i=t.mediaType],r=Promise.resolve(void 0),c=1;break;case 8:c=t.Kgc(a)?6:7;break;case 12:e.l7(n.header,!e.Hf.Pe&&!e.Yi&&i===w.u.J,!0)&&(void 0!==t.xK&&t.hL(t.xK),r=e.mq(i,a).stream.da.No(t.Fc,void 0,!0),o=(e=o.Gl(r)).ea,(e=e.tsa(t.Fc))&&0<e.Qd&&(o=e.Qd),t.Fc!==o&&(t.gL(o,r),h.bna(i,o)),r=h.Kwb(t,n.data).then(function(){return a}),s.aRb=!0,t=h.qh,n=n.header.bitrate,i===w.u.P?t.gz(n):t.iL(n)),c=11;break;case 5:a=n.Pa,o=n.header.stream,s=h.Hb.bg[i],u=h.Hb.OC[i],p.sa(e.nF)||h.qh.Eib(e.nF,e.rq,e.sq),u.OB=e.OB,u.fy=e.fy,c=8;break;case 1:c=n?5:11;break;case 13:e=h.df.T,c=12;break;case 7:return r;case 14:return t.Ik("adoptPipeline no header for streamId:",a),r;case 11:return r}}for(;13!==e;)switch(e){case 5:this.li=void 0,o=this.K,e=3;break;case 3:e=this.fCb&&this.Hc.Yf?8:9;break;case 2:var h=this;null!=(t=this.li)&&t.kF()&&this.Ik("Previously adopted request list still retained was unexpected"),e=5;break;case 8:return this.Jb.Ym("checkForHcdStart"),this.Vd.forEach(function(t){for(var e=2;1!==e;)2===e&&(t.T.L===i&&(n=t),e=1)}),this.Hc.Yf.p0b(i,n?n.T:void 0).then(function(n){for(var t=2;8!==t;)switch(t){case 2:h.Jb.Ym("checkForHcdEnd"),t=1;break;case 5:return o.$s||h.fA.Ox||h.MV("headerCacheDataNotFound"),Promise.resolve();case 4:var r=h.Wa.Yc.fe(w.u.P),a=h.Wa.Yc.fe(w.u.J);return h.Jb.Ym("adoptHcdStart"),h.fA.nga(function(){for(var t,e,i=2;7!==i;)switch(i){case 2:t=Promise.resolve(),h.fo&&(t=s(a,n)),e=Promise.resolve(),!h.et||o.z8a&&!t||(e=o.z8a?t.then(function(t){return t?s(r,n):Promise.resolve()}):s(r,n)),i=3;break;case 3:return h.JVa=n,h.Jb.Ym("adoptHcdEnd"),Promise.all([t,e])}});case 1:t=p.sa(n)?5:4}}).then(function(){for(var t,e=2;5!==e;)2===e&&(o.$s||null!=(t=h.li)&&t.kF()||h.fA.Ox||!h.U.Yo(h.df.T)||h.MV("adoptedCompletedRequests"),e=5)}).catch(function(t){for(var e=2;1!==e;)2===e&&(h.Qb("headerCache:lookupDataPromise caught error:",t),e=1)});case 9:return this.Hc.fpa(),Promise.resolve()}},e.prototype.Kwb=function(n,r){for(var a,o,s,u,c,h,f,t=2;9!==t;)switch(t){case 1:t=0===r.length?5:4;break;case 2:a=this,t=1;break;case 5:case 14:return Promise.resolve();case 7:a=this,t=6;break;case 6:t=1!==r.length?7:0;break;case 4:return o=n.tba,s=o.G,u=Math.min(this.Vd[0].Qa||1/0,o.Ic||1/0),c=n.mediaType,h=this.Hb.bg[c],this.fA.nga(function(){for(var i,t=2;3!==t;)switch(t){case 8:i=[],t=8;break;case 2:i=[],t=1;break;case 7:t=r.length<=7?6:1;break;case 5:e(),t=1;break;case 1:t=0<r.length?5:4;break;case 4:return Promise.all(i);case 6:e(),t=9}function e(){for(var e,t=2;5!==t;)2===t&&(7===(e=r.shift()).readyState?n.Qb("adoptData, not adopting aborted mediaRequest:",e.toString()):6===e.readyState?(n.Qb("adoptData, not adopting failed mediaRequest:",e.toString()),a.mI(e,!1)):n.Fc>=e.dd&&n.Fc<e.Ic&&(n.Fc<u||!p.Oa(u))?(i.push(a.Lwb(n,e).then(function(){for(var t=2;1!==t;)switch(t){case 4:e.complete||a.c8a(e),t=3;break;case 2:e.complete&&a.c8a(e),t=1}})),n.fbc(e.Ic),p.Oa(u)&&n.Fc>=u&&a.Jb.Bma(s,e.Ic),c===w.u.P&&a.qh.gz(e.bitrate),e.complete?(h.rw+=e.duration,e.Y_b&&(h.R_+=e.duration),f=e):(a.li||(a.li=new g.FFa(a.H)),a.li.push(e))):a.mI(e,!1),t=5)}}).then(function(){for(var t,e,i=2;8!==i;)switch(i){case 5:i=f||null!=(t=a.li)&&t.kF()?4:8;break;case 2:f&&n.d8a(f),i=5;break;case 4:t=a.Vd[o.T.Ub],void 0!==(e=n.nsa(n.Fc))?(n.zm=e,n.pd=t.T.Zh[c].stream.Gl(n.zm)):n.zm=n.ue?n.ue.index+1:n.zm+1,i=8}})}},e.prototype.Lwb=function(t,e){for(;;){var i=this,n=t.mediaType;return this.K.Zi&&this.Jb.Kn("adoptMediaRequest: type: "+n+", state: "+e.readyState+", pts: "+e.dd),this.bna(n,e.dd),t.Va.IDb(e).catch(function(t){for(var e=2;1!==e;)2===e&&(i.Ik("Error adopting requests",t),e=1)})}},e.prototype.Yma=function(t,e,i){for(var n,r=2;9!==r;)switch(r){case 3:(void 0===t?w.Uf:[t]).forEach(function(t){for(var e=2;1!==e;)2===e&&(n.uc(t)&&(n.Ex[t].reset(),n.nBb(t),n.qh.o4b(t)),e=1)}),r=9;break;case 2:n=this,void 0===e&&(e=m.qU.Doa),(i||this.Wa.Yc).pBa(t,e),this.hA.reset(),r=3}},e.prototype.kDa=function(){for(var n,t=2;5!==t;)2===t&&(n=this,w.Uf.forEach(function(t){for(var e,i=2;5!==i;)2===i&&(null!=(e=n.Ex[t])&&e.stop(),i=5)}),t=5)},e.prototype.nL=function(t){{var n;return n=this,(void 0===t?w.Uf:[t]).forEach(function(t){for(var e,i=2;5!==i;)2===i&&(null!=(e=n.Ex[t])&&e.resume(),i=5)}),Promise.resolve()}},e.prototype.DV=function(t){for(var n,e,i=2;3!==i;)2===i&&(t=void 0===t?w.Uf:[t],null!=(e=(n=this).hA)&&e.reset(),t.forEach(function(t){for(var e,i=2;5!==i;)2===i&&(null!=(e=n.Ex[t])&&e.resume(),i=5)}),i=3)},e.prototype.nBb=function(t){for(var e,i=2;3!==i;)2===i&&(e=this.Hb.bg[t],this.Hb.Fy[t].Gwa=void 0,e.rw=0,e.R_=0,i=3)},t=87;break;case 2:Object.defineProperties(e.prototype,{addEventListener:{get(){return this.addListener.bind(this)},configurable:!0}}),Object.defineProperties(e.prototype,{removeEventListener:{get(){return this.removeListener.bind(this)},configurable:!0}}),Object.defineProperties(e.prototype,{C1b:{get(){return this.ig.Rc},configurable:!0}}),Object.defineProperties(e.prototype,{mediaSourceId:{get(){return this.ig?this.ig.Csc:void 0},configurable:!0}}),Object.defineProperties(e.prototype,{et:{get(){return this.uc(w.u.P)},configurable:!0}}),Object.defineProperties(e.prototype,{fo:{get(){return this.uc(w.u.J)},configurable:!0}}),Object.defineProperties(e.prototype,{attributes:{get(){return this.gla},configurable:!0}}),Object.defineProperties(e.prototype,{Ah:{get(){return this.Oi},configurable:!0}}),Object.defineProperties(e.prototype,{X_:{get(){return 0<=this.n6?this.n6:0},configurable:!0}}),Object.defineProperties(e.prototype,{df:{get(){return this.Vd[this.tN]},configurable:!0}}),t=13;break;case 104:e.prototype.G7b=function(t,e,i,n){for(var r,a=2;6!==a;)switch(a){case 2:o.Mm.nq(e),a=1;break;case 1:(t=this.Vd[t]).rEa(i),a=4;break;case 3:t.Or(e).Pc.some(function(t){for(var e=2;4!==e;)switch(e){case 2:r=t.mq(),e=1;break;case 9:r=t.mq(),e=4;break;case 5:return!!r;case 1:e=r&&r.stream&&r.stream.da&&n<r.stream.da.vk(0)?4:5}}),a=8;break;case 8:r?(t.T.Zh[w.u.P]=r,t.j0=!1,r.stream.Yd&&t.d8()):(t.T.Zh[w.u.P]=void 0,t.j0=!1,t.T.PK([t.Or(w.u.P)],!0,w.u.P)),a=7;break;case 7:this.DV(e),a=6;break;case 4:a=t.T.MY?3:7}},e.prototype.VAb=function(t,e){for(var i,n=2;4!==n;)2===n&&(i=this.rh[t.mediaType],t=this.Wa.f0(t.$a,t.mediaType,e,this.Hc.KC||0,function(t){for(var e=2;1!==e;)switch(e){case 2:i.v0(t),e=1;break;case 4:i.v0(t),e=8}}),p.sa(t)||this.Kg.Nk(),n=4)},e.prototype.wyb=function(t){for(var e,i,n,r=2;8!==r;)switch(r){case 9:this.Vd.forEach(function(t,e){for(var i,n=2;5!==n;)2===n&&((i=t.T).MY||0===e||i.PK([t.Or(w.u.P),t.Or(w.u.J)]),n=5)}),r=8;break;case 2:e=t.mediaType,i=t.manifestIndex,n=t.streamId,t=this.Wa.Yc.ab(e),e=this.Vd[i].T.ly(e,n),this.CBb(t,e),this.K=this.V0a.Rwb(e.mf,this.K),r=9}},e.prototype.zyb=function(t){for(var e,i,n=2;8!==n;)switch(n){case 2:e=t.request,t=t.mediaType,(i=e.Va.$a).O0b(t),e.Dv&&this.Jb.Ozb(e),n=9;break;case 9:e.$o&&this.Jb.bAb(t,e.T.Ub,i.G),n=8}},e.prototype.CBb=function(t,e){for(var i=2;1!==i;)2===i&&(this.Hb.Fy[t.mediaType].UJ={id:e.Pa,index:e.cg,bitrate:e.bitrate,Xa:e.Lb&&e.Lb.confidence&&e.Lb.Xa?e.Lb.Xa.ta:0,location:e.location},i=1)},e.prototype.Gaa=function(t){for(var e,i,n,r,a,o,s,u,c=2;11!==c;)switch(c){case 8:o.abuflbytes=null!=(a=null==i?void 0:i.Fo.fa)?a:0,o.vbuflmsec=u.Tx(e,w.u.J),o.abuflmsec=u.Tx(e,w.u.P),t&&(o.a=null==i?void 0:i.Va.da.toJSON(),o.v=null==n?void 0:n.Va.da.toJSON()),c=13;break;case 13:t&&s&&(t=s[w.u.J],s=s[w.u.P],o.atoappend=null==t?void 0:t.Jea(),o.vtoappend=null==s?void 0:s.Jea()),c=12;break;case 4:o.vspts=null!=(a=null==n?void 0:n.Fc)?a:0,o.aspts=null!=(r=null==i?void 0:i.Fc)?r:0,o.vbuflbytes=null!=(r=null==n?void 0:n.Fo.fa)?r:0,c=8;break;case 5:i=(e=u.Yc).fe(w.u.P),n=e.fe(w.u.J),c=4;break;case 2:o={},s=this.rh,u=this.Wa,c=1;break;case 1:c=u.Yc.Mf?12:5;break;case 12:return o}},e.prototype.H7a=function(t){for(var e,i,n,r,a,o,s=2;8!==s;)switch(s){case 1:s=i?5:8;break;case 2:i=(e=this.Wa.Yc).ab(t),s=1;break;case 5:return n=this.Hb.Fy[t],r=this.Wa.CI(e,t),n=n.UJ?n.UJ.bitrate:0,a=i.Va.pza,o=this.Wa.bf,{type:t,availableMediaBuffer:E.default.oq()[t]-r,completeBuffer:e.xh(t),incompleteBuffer:a,playbackBitrate:i.Ueb,streamingBitrate:n,streamingTime:i.Fc+o,usedMediaBuffer:r,toappend:i.hhc}}},e.prototype.W9b=function(){for(var t,e=2;5!==e;)2===e&&(t={type:"requestGarbageCollection",time:E.default.time.ia()},k.gb(this,t.type,t),e=5)},e.prototype.nr=function(t,e,i,n,r,a,o){for(var s=2;5!==s;)2===s&&(void 0===o&&(o=!1),this.S6||(p.sa(i)&&(i="NFErr_MC_StreamingFailure"),this.S6=!0,this.Jb.fAb(i,t,n,r,a,void 0!==e?e:this.X_,o)),s=5)},e.prototype.EVa=function(){for(var t=2;5!==t;)2===t&&(this.Qb("Network failures reset!"),this.Kg.Nk(),t=5)},t=94}}(),e.qSa=i,t.Ve(v.EventEmitter,i)},function(t,e,i){var m,v,y,w;function A(t,e,i,n,r,a,o,s,u,c,h,f){void 0===i&&(i=0),this.Be=t,this.I6=e,this.ea=i,this.Qa=n,this.g$=r,this.Uh=a,this.GP=o,this.config=s,this.H=u,this.Jb=c,this.aQb=h,this.Ah=f,this.zy=0}_esm(e),e.Wia=void 0,m=i(12),v=i(6),y=i(8),w=i(261),A.create=function(t){var o,e,i,n,r,a,s,u,c,h,f,l,d,p,b;function g(t){y.gb(u,t.type,t)}return o=t.Ub,e=t.ja,i=t.bib,n=t.ea,r=t.Qa,a=t.Et,s=t.Jb,u=t.jc,c=t.config,h=t.H,f=t.Kg,l=t.np,d=t.Yf,p=t.mF,b=new w.Tga(Number(e.movieId),{Ub:o,ja:e,Dq:t.Dq,Rbb:{Rva:t.Pe,m$a:!!t.$9a},Yi:t.Yi,Fd:t.Fd,config:c,A8a:{Xl:f.Nk.bind(f),Yf:d,mF:p,mC:g,Oaa:function(t){return t===u.Wa.Yc.T},zY:function(t,e,i,n,r){return t=u.Hb.bg[t],!e||i||n||r?u.ZU:t.Te},dF:function(t){return u.Hb.Fy[t]},Uh:u.Uh.bind(u)},j_:function(t){u.emit("requestComplete",{type:"requestComplete",timestamp:t.Zf,mediaRequest:t})},e$:function(){return u.qh},bc:u.Hc.bc,dj:u.Hc.dj,T3a:{Et:a,Sf:function(t,e,i,n,r,a){return!((a=void 0===a?!1:a)&&!u.U.Gf())&&(u.nr(t,o,e,i,n,r,a),!0)},Zo:function(){return u.S6},mC:g},KR:void 0,qG:{W:u.Hc.KC,fa:u.Hc.pG}}),c.sB&&b.lG({jp:u.Vm.jp,ga:u.Vm.ga,ME:u.Vm.ME,fp:s.fp.bind(s)}),(t=new m.Kf).addListener(b.Sv,"onHeaderFragments",function(t){var e,i=t.mediaType,n=t.Pa,r=t.stream.da,a=u.Uh(o);a?(b.Zh[i]&&t!==b.Zh[i]?t.ey&&(a=b.Zh[i],t=t.stream,e=a&&a.stream,h.warn("first header received for non-current track (trackId "+t.trackId+"streamId "+t.Pa+"), expected track "+(e&&e.trackId)+", stream "+(e&&e.Pa)+", "+a)):(b.Zh[i]=t,t=u.Wa.Yc,0===o&&(e=(b.uc(v.u.J)?t.ab(v.u.J):t.ab(v.u.P)).Fc,t.f8(e,b)),a.j0=!1,a.d8(),u.d7()),l.Sla(),s.$zb(o,i,n,b.L,r),f.Nk()):h.warn("addFragments for stale manifestIndex:",o)}),t.addListener(b.Sv,"onHeaderRequestComplete",function(t){var e,i;t.pm?u.d7():t.OE&&(h.warn("drm header header:",t.toString(),"but no headers seen, marking pipeline drmReady"),u.rB(t.L)),e=t.mediaType,i=Object.getOwnPropertyNames(p.Ax[e]),u.rh[e].ndb(t.stream,1===i.length&&i[0]===t.Pa),f.bVa(),u.W9b()}),t.addListener(b.Sv,"onHeaderFromCache",function(t){var e=t.header;t=t.bRb,e.pm&&u.d7(),t&&s.Qzb(e.L,e.Pa)}),new A(b,i,n,r,function(){return u.Wa},u.Uh.bind(u),u.GP.bind(u),c,h,s,!1,t)},Object.defineProperties(A.prototype,{T:{get(){return this.Be},configurable:!0},Ub:{get(){return this.T.Ub},configurable:!0}}),A.prototype.Or=function(t){return this.Be.zVb(t,this.p$(t))},A.prototype.p$=function(t){return this.I6[t]},A.prototype.close=function(){this.Ah.clear(),this.T.close()},A.prototype.cd=function(){this.Be.cd(),delete this.Be},A.prototype.clone=function(){return new A(this.T,this.I6,this.ea,this.Qa,this.g$,this.Uh,this.GP,this.config,this.H,this.Jb,!0,this.Ah)},A.prototype.rEa=function(t){this.H.trace("updateAudioTrack:",this.I6[v.u.P],"->",t),this.I6[v.u.P]=t},A.prototype.C6a=function(){return void 0!==this.nK?this.nK:this.Qa||this.Be.duration},A.prototype.yGb=function(t,e){var i=this.Be.Zh[t];if(i&&i.stream.Yd)return this.xB&&this.xB[t]&&this.xB[t].ea<=e&&this.xB[t].Qa>e?this.xB[t].ud:(e=(t=i.stream.da).No(e,void 0,!0),(i=void 0)===i?t.vk(e):i)},A.prototype.d8=function(){var t,e;if(!this.j0&&this.o8a())for(this.xya(),t=[0,0],0===this.Ub||this.Be.Hf.QZ||this.Be.Hf.replace||(e=this.Uh(this.Ub-1),e=this.Be.L===e.Be.L,t=(e=(t=this.g$().Yc).f8(this.ea,this.T,t,e)).wR),this.ea=t[v.u.J],this.wR=t,this.xB=e&&e.xB,this.t_a(),e=(this.Be.uc(v.u.J)?this.Be.Zh[v.u.J]:this.Be.Zh[v.u.P]).stream.da.Qa,this.Jb.Vzb(this.Ub,this.zy,this.ea,this.nK,e),this.j0=!0,e=this.Ub+1;e<this.GP();++e)(t=this.Uh(e)).j0=!1,t.d8()},A.prototype.t_a=function(){var t;0===this.Ub||this.Be.Hf.replace?this.zy=0:(t=this.Uh(this.Ub-1),this.zy=t.zy+t.C6a()-this.ea)},A.prototype.xya=function(){var t,e,i,n,r,a;this.o8a()&&(i=this.g$().Yc,n=this.Qa||1/0,r=this.Be.uc(v.u.J),a=i.JX(n,this.T),this.nK=(r?a[v.u.J]:a[v.u.P]).Qa,i=(r?this.Be.Zh[v.u.J]:this.Be.Zh[v.u.P]).stream.da.Qa,r=Math.min(null!=(e=null==(t=a[v.u.J])?void 0:t.Qa)?e:1/0,null!=(e=null==(e=a[v.u.P])?void 0:e.Qa)?e:1/0),this.Jb.Xzb(this.Ub,this.nK,i,r),0<(t=this.g$().msa(this.Ub)).length&&t.forEach(function(t){t.Jfc(a,n)}))},A.prototype.o8a=function(){var t=this.Be.uc(v.u.P),e=this.Be.uc(v.u.J),i=this.Be.Zh[v.u.P],n=this.Be.Zh[v.u.J],i=i&&i.stream.Yd,n=n&&n.stream.Yd;return(!t||i)&&(!e||n)},e.Wia=A},function(t,e,i){var n,r;function a(t,e,i){this.fp=i,this.oCb=new n.$ka(t),this.ga=e.ga,this.cxb=1e3*e.t1b/e.LFb,this.CNb=e.ME,this.dZa=!1}_esm(e),e.tSa=void 0,t=i(0),n=i(8),i=t.__importDefault(i(3)),r=i.default.Ks,new i.default.Console("ASEJS_SIDECHANNEL","media|asejs"),a.prototype.nv=function(t){var e,i={s_xid:this.ga,dl:this.CNb?1:0};return t.qE&&(i.bs=n.j8(Math.floor(t.qE/this.cxb)+1,1,5)),t.Dca&&(i.limit_rate=t.Dca),t.RZa&&(i.bb_reason=t.RZa),t.glb&&(i.tm=t.glb),t.RW&&((e=t.RW.Xaa())||!e&&this.dZa)&&(i.cpr_ss=t.RW.LC,i.cpr_ca=t.RW.fB,i.cpr_rec=t.RW.AC,this.dZa=e),t.Moa&&(i.br=t.Moa.start+"+"+t.Moa.size),this.lAb(i)},a.prototype.cCa=function(t,e){var i,n;try{i=new r(void 0,"notification"),n=this.nv({RZa:t}),e&&n&&i.open(e,void 0,2,void 0,void 0,void 0,n)}catch(t){this.fp("SideChannel: Error when sending sendBlackBoxNotification. Error: "+t)}},a.prototype.lAb=function(t){var e;try{return e=this.zBb(t),this.oCb.encrypt(e)}catch(t){this.fp("SideChannel: Error when obfuscating msg. Error: "+t)}},a.prototype.zBb=function(e){return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(JSON.stringify(e[t]))}).join("&")},e.tSa=i=a},function(t,e,i){var r,o,a,s,u,c,h;_esm(e),e.PSa=e.Yvb=void 0,r=i(0),i(72),o=i(2),t=r.__importDefault(i(3)),a=i(426),i=i(424),s=new t.default.Console("FRAGMENTS","media|asejs");try{new Float64Array(8),u=!0}catch(t){u=!1}function f(t,e){return(e=h.call(this,t.Lq,e)||this).hI=t,e}function l(t,e,i,n,r,a,o){this.xN=128,this.Wc=e,this.Pb=i.offset,this.uo=i.sizes,this.Q6=t,this.WM=this.JU=this.Ri=this.ur=this.fna=void 0,this.xzb=n,this.fla=r&&r.Ai,this.rna=a,this.Lf=Math.min(this.Wc.length,this.uo.length),t=this.oGb(),this.jzb=t.maxBitrate,this.kzb=t.cp,this.Lq.Rs.length!==this.uo.length&&s.trace("Mis-matched stream duration ("+this.Lq.Rs.length+","+this.uo.length+") for movie id "+o),this.Lq.o7&&!this.fla&&s.error("Mis-matched additional SAPs information for movie id "+o)}h=i.qTa,r.__extends(f,h),Object.defineProperties(f.prototype,{fa:{get(){return this.hI.sjb(this.ze)},configurable:!0},offset:{get(){return this.hI.Ai(this.ze)},configurable:!0},jya:{get(){return this.hI.RQ&&this.hI.RQ[this.ze]},configurable:!0},Qk:{get(){return this.hI.cSb(this.ze)},configurable:!0},eb:{get(){return this.hI.yz&&this.hI.yz[this.ze]},configurable:!0},Koa:{get(){return 8*this.fa/(1e3*this.tv/this.aa)},configurable:!0}}),f.prototype.toJSON=function(){return{index:this.index,contentStartTicks:this.Za,contentEndTicks:this.mb,durationTicks:this.tv,timescale:this.aa,startPts:this.ea,endPts:this.Qa,duration:this.duration,additionalSAPs:this.Qk}},c=f,e.Yvb=c,Object.defineProperties(l.prototype,{mediaType:{get(){return this.Wc.mediaType},configurable:!0},length:{get(){return this.Lf},configurable:!0},Yn:{get(){return this.Wc.Yn},configurable:!0},Ira:{get(){return this.Wc.Ira},configurable:!0},ea:{get(){return this.Wc.ea},configurable:!0},Qa:{get(){return this.Wc.Qa},configurable:!0},Fxa:{get(){return this.Wc.Fxa},configurable:!0},Dy:{get(){return this.jzb},configurable:!0},cp:{get(){return this.kzb},configurable:!0},oa:{get(){return this.Wc.oa},configurable:!0},aa:{get(){return this.Wc.aa},configurable:!0},Ag:{get(){return this.ur||this.ola()},configurable:!0},RQ:{get(){return this.xzb},configurable:!0},Xna:{get(){return this.fla},configurable:!0},yz:{get(){return this.rna},configurable:!0},Lq:{get(){return this.Wc},configurable:!0},kL:{get(){return this.fna||this.yxb()},configurable:!0}}),l.prototype.sjb=function(t){return this.uo?this.uo[t]:(s.error("sizesByIndex _sizes is undefined"),-1)},l.prototype.vk=function(t){return this.Wc.vk(t)},l.prototype.AX=function(t){return this.Wc.vk(t)+this.Wc.te(t)},l.prototype.Ai=function(t){var e,i,n;if(this.JU!==t||void 0===this.WM){if(0===t)return this.Pb;if(this.JU===t-1&&void 0!==this.WM)this.WM+=this.uo[this.JU],++this.JU;else{for(e=this.Ri||this.hxb(),n=(i=Math.floor(t/this.xN))*this.xN,e=e[i];n<t;++n)e+=this.uo[n];this.JU=t,this.WM=e}}return this.WM},l.prototype.te=function(t){return this.Wc.te(t)},l.prototype.get=function(t){return new c(this,t)},l.prototype.cSb=function(t){var e,i,r,a;if(o.assert(0<=t),n=this.Lq.o7,e=this.Lq.zYa,!(i=this.fla)||!n||!e||t>=n.length)return[];for(r=[],a=t===n.length-1?e.length:n[t+1],n=n[t];n<a;++n)r.push({jj:e[n],Qd:this.vk(t)+this.oa.jC(e[n]).W,offset:i[n]});return r},l.prototype.No=function(t,e,i){return this.Wc.No(t,e,i)},l.prototype.I9=function(t,e,i){return this.Wc.I9(t,e,i)},l.prototype.v8=function(t,e){return this.Wc.v8(t,e)},l.prototype.lGb=function(t,e,i,n,r){var a,o,s,u,c,h=!0,f=0,l=this.Wc.Rs,d=this.uo;if(t=Math.floor(t*this.aa/1e3),a=Math.floor(i*this.aa/1e3),u=s=o=0,this.Wc.lEa&&this.Wc.kEa)for(f=this.Wc.lEa;f<=this.Wc.kEa;++f)o+=l[f],s+=d[f];if(e<s)h=!1;else for(;f<this.length&&(!r||f<r);){if(c=d[f],i=l[f],e<s+c){for(;1<f-u&&e<s+c&&(o-l[u]>=a||s-d[u]>n);)o-=l[u],s-=d[u],++u;if(o<t||e<s+c){h=!1,this.Wc.lEa=u,this.Wc.kEa=f;break}}o+=i,s+=c,++f}return h},l.prototype.subarray=function(t,e){return o.assert(void 0===t||0<=t&&t<this.length),o.assert(void 0===e||t<e&&e<=this.length),new l(this.Q6,this.Wc.subarray(t,e),{offset:this.Ai(t),sizes:this.uo.subarray(t,e)},this.RQ&&this.RQ.subarray(t,e),this.Xna&&{Ai:this.Xna},this.rna&&this.rna.subarray(t,e))},l.prototype.forEach=function(t){for(var e=0;e<this.length;++e)t(this.get(e),e,this)},l.prototype.map=function(t){for(var e=[],i=0;i<this.length;++i)e.push(t(this.get(i),i,this));return e},l.prototype.reduce=function(t,e){for(var i=0;i<this.length;++i)e=t(e,this.get(i),i,this);return e},l.prototype.toJSON=function(){return{length:this.length}},l.prototype.dump=function(){var t;s.trace("StreamFragments: "+this.length);for(var e=0;e<this.length;++e)t=this.get(e),s.trace("StreamFragments: ".concat(e,": [").concat(t.ea,"-").concat(t.Qa,"] @ ").concat(t.offset,", ").concat(t.fa," bytes"))},l.prototype.oGb=function(){var t,e=0,i=0,n=this.Wc.wbb,r=this.Wc.xbb,a=this.Wc.Rs,o=this.uo;if(void 0===n||n>=this.length||void 0===r||r>=this.length){for(var s=0,u=this.length;s<u;++s)i<(t=o[s])&&(i=t,r=s),e<(t/=a[s])&&(e=t,n=s);void 0===this.Wc.wbb&&(this.Wc.wbb=n),void 0===this.Wc.xbb&&(this.Wc.xbb=r)}else e=o[n]/a[n],i=o[r];return{maxBitrate:Math.floor(e*this.aa/125),cp:i}},l.prototype.ola=function(){for(var t=0,e=0;e<this.length;++e)t+=this.uo[e];return this.ur=t},l.prototype.yxb=function(){return this.fna=new a.yka(this.Wc.Rs,this.uo,this.Wc.aa)},l.prototype.hxb=function(){if(!this.Ri){for(var t=u?new Float64Array(Math.ceil(this.length/this.xN)):Array(Math.ceil(this.length/this.xN)),e=this.Pb,i=0;i<t.length;++i){t[i]=e;for(var n=0;n<this.xN;++n)e+=this.uo[i*this.xN+n]}this.Ri=t}return this.Ri},(e.PSa=t=l).prototype.Pjb=i.yy(t.prototype.vk),i.yy(t.prototype.AX),i.yy(t.prototype.te),i.yy(t.prototype.Ai),i.yy(t.prototype.sjb),i.yy(t.prototype.get)},function(t,e,i){var B,a,U,c,F,q,o,s,H,K,G,V,Y,J,u,z,W,Q;_esm(e),e.uJa=void 0,B=i(0),a=i(12),U=B.__importStar(i(11)),c=B.__importDefault(i(3)),F=new c.default.Console("ASEJS_ERROR_DIRECTOR","asejs"),q=B.__importDefault(i(28)),o=i(429),s=i(159),H=i(970),K=c.default.Ks,G=K.i3,V={},Y={},t=[q.default.ji.Xz,!1],i=[q.default.ji.Xz,!0],J=[q.default.ji.rH,!1],u=[q.default.ji.rH,!0],z=[q.default.ji.URL,!0],Q=[q.default.ji.rH,!(W=[-1,!1])],V[G.bic]=J,V[G.UNKNOWN_ERROR]=J,V[G.elc]=J,V[G.xqb]=J,V[G.WHa]=J,V[G.Jqb]=J,V[G.Bqb]=u,V[G.Apb]=u,V[G.eHa]=Q,V[G.cHa]=Q,V[G.Bpb]=W,V[G.Cpb]=Q,V[G.Dpb]=Q,V[G.xpb]=J,V[G.zpb]=J,V[G.dHa]=t,V[G.ypb]=J,V[G.wpb]=Q,V[G.Sic]=u,V[G.Rrb]=Q,V[G.zKa]=Q,V[G.yKa]=Q,V[G.vKa]=Q,V[G.wKa]=Q,V[G.Qrb]=z,V[G.gia]=u,V[G.iia]=z,V[G.hia]=i,V[G.d4]=u,V[G.Trb]=z,V[G.e4]=Q,V[G.AKa]=u,V[G.Srb]=u,V[G.Eqb]=u,V[G.yqb]=J,V[G.Hvb]=J,V[G.oqb]=J,V[G.pqb]=J,V[G.qqb]=J,V[G.rqb]=J,V[G.sqb]=J,V[G.tqb]=J,V[G.uqb]=J,V[G.vqb]=J,V[G.wqb]=J,V[G.zqb]=J,V[G.Aqb]=J,V[G.Cqb]=J,V[G.Dqb]=J,V[G.Fqb]=J,V[G.Gqb]=J,V[G.Hqb]=J,V[G.Iqb]=J,V[G.Kqb]=J,V[G.Lqb]=J,V[G.Gvb]=Q,V[G.TIMEOUT]=t,Y[G.eHa]=!0,Y[G.zKa]=!0,Y[G.yKa]=!0,Y[G.wKa]=!0,Y[G.WHa]=!0,t=function(){var t;function e(t,e,i,n){for(var r=2;20!==r;)switch(r){case 9:this.Ah=new a.Kf,this.Z_a=new s.V4,r=6;break;case 6:V[G.vKa]=e.hXb?u:Q,this.Ah.addListener(this.Jl,"networkFailed",this.cWb.bind(this)),r=13;break;case 2:this.Jl=t,this.config=e,this.Hua=i,this.Et=n,this.events=new a.EventEmitter,r=9;break;case 13:this.sQ=c.default.time.ia(),this.ov=0,this.ODa={},this.b0=new(t.ub?H.Fia:o.eka)(t,n,e),r=20}}for(t=2;12!==t;)switch(t){case 8:e.prototype.Pfa=function(t){for(var e,i=2;9!==i;)switch(i){case 4:e.ww&&this.b0.Pfa(t),this.events.emit("updatingLastSuccessEvent",{type:"updatingLastSuccessEvent"}),i=9;break;case 2:e=this.config,this.sQ=Math.max(t.Zf||c.default.time.ia(),this.sQ),this.g0a(),i=4}},e.prototype.Mya=function(){for(var t=2;1!==t;)2===t&&(this.ov=0,t=1)},e.prototype.mk=function(){for(var e,t,i,n=2;4!==n;)2===n&&(i=(t=(e=this).config).Iba,this.sQ=Math.max(c.default.time.ia(),this.sQ),!t.ymb||this.L1||t.Q1&&t.gP&&t.U2b||(F.info("Setting underflow timeout in "+i+"ms"),this.L1=setTimeout(function(){for(var t=2;4!==t;)2===t&&(a000.O9M(8),F.info(a000.K9M("ms, since underflow with no success",i,"Forcing permanent network failure after ")),e.L1=void 0,e.Jl.cu(q.default.ji.Xz,!0),t=4)},i)),n=4)},t=14;break;case 14:return e.prototype.g0a=function(){for(var t=2;1!==t;)2===t&&(this.L1&&(clearTimeout(this.L1),this.L1=void 0,F.info("Cleared underflow timeout")),t=1)},e;case 2:e.prototype.tb=function(){for(var t=2;1!==t;)2===t&&(this.Ah.clear(),t=1)},t=1;break;case 1:e.prototype.lG=function(t){for(var e=2;1!==e;)switch(e){case 4:this.Vea=t,e=8;break;case 2:this.Vea=t,e=1}},e.prototype.cu=function(e,t,i,n,r){for(var a,o,s,u,c,h,f,l,d,p,b,g,m,v,y,w,A,_,E,k,S,T,I,O,x,R,P,D,C,j=2;25!==j;)switch(j){case 15:F.error("Invalid affected for network failure"),j=27;break;case 13:j=e?12:17;break;case 18:try{for(a=2;13!==a;)switch(a){case 2:s=(o=B.__values(t)).next(),a=1;break;case 1:a=s.done?13:5;break;case 8:a=C!==Q||this.N9b(m)?7:13;break;case 7:b.some(function(t){return P.cu(k,S,t.url),k===q.default.ji.rH}),!this.Vea||0!==i&&void 0!==i||this.Vea.cCa("error",g),a=14;break;case 14:s=o.next(),a=1;break;case 5:m=(p=s.value).oc,b=p.urls,g=p.url,a=8}}catch(t){var N={error:t}}finally{for(u=2;1!==u;)if(2===u){try{for(c=2;1!==c;)2===c&&(s&&!s.done&&(I=o.return)&&I.call(o),c=1)}finally{for(h=2;5!==h;)switch(h){case 2:h=N?1:5;break;case 3:h=N?8:3;break;case 1:throw N.error}}u=1}}j=25;break;case 20:j=R.ww?19:18;break;case 16:t=P.Fac(t.host,t.port).map(function(t){return{url:t.urls[0].url,oc:t.id,kc:t,stream:t.urls[0].stream,urls:t.urls}}),j=10;break;case 19:try{for(f=2;14!==f;)switch(f){case 2:d=(l=B.__values(t)).next(),f=1;break;case 5:b=(p=d.value).urls,g=p.url,m=p.oc,v=p.stream,y=p.kc,f=4;break;case 3:w={r7:m,GS:C,qy:i,qg:n,B9:M,zi:r},f=9;break;case 4:f=C===Q||C===J?3:6;break;case 1:f=d.done?14:5;break;case 9:this.b0.Jda(p,w),f=8;break;case 7:d=l.next(),f=1;break;case 8:!this.Vea||0!==i&&void 0!==i||this.Vea.cCa("error",g),f=7;break;case 6:C===z&&null!=(O=null==v?void 0:v.dO)&&O.ub&&(null==(x=null==v?void 0:v.dO)?void 0:x.kc)===y.id&&e?(w={r7:m,GS:C,qy:i,qg:n,B9:M,zi:r,X:null==e?void 0:e.xq},this.b0 instanceof H.Fia&&this.b0.A7b(p,w)):b.some(function(t){return P.cu(k,S,t.url),k===q.default.ji.rH}),f=8}}catch(t){var L={error:t}}finally{for(A=2;1!==A;)if(2===A){try{for(_=2;1!==_;)2===_&&(d&&!d.done&&(T=l.return)&&T.call(l),_=1)}finally{for(E=2;5!==E;)switch(E){case 2:E=L?1:5;break;case 1:throw L.error}}A=1}}j=25;break;case 10:k=C[0],S=C[1],j=20;break;case 2:var M=K.i3.name;M=n?M[n]:void 0,R=this.config,P=this.Jl,F.warn("Failure "+M+" on "+JSON.stringify(e||t)+" : critical error count = "+this.ov),j=3;break;case 14:j=C!==W?13:25;break;case 3:j=n&&U.isArray(V[n])?9:26;break;case 11:t=P.D7a(e).map(function(t){return{url:e.url,oc:t.id,kc:t,stream:D,urls:t.urls,X:e.xq}}),j=10;break;case 27:return;case 17:j=t?16:15;break;case 12:D=P.xTb(e.bz),j=11;break;case 26:a000.O9M(6),F.error(a000.I9M("Unmapped failure code in JSASE error director : ",n)),j=25;break;case 9:P.ub&&e&&n===G.d4&&e.zWb&&(V[G.d4]=J),C=V[n],this.TB={qy:i,qg:n,B9:M,zi:r},Y[n]&&(++this.ov,this.events.emit("criticalNetworkError",{type:"criticalNetworkError",qg:n})),j=14}},e.prototype.N9b=function(t){for(var e,i,n,r=2;7!==r;)switch(r){case 1:r=n?5:8;break;case 5:r=n.In<this.sQ?4:3;break;case 2:e=c.default.time.ia(),i=this.config,n=this.ODa[t],r=1;break;case 3:r=n.In>=e-i.ufa||n.DC||(n.In=e,++n.count,n.count<i.Pba)?7:9;break;case 8:this.ODa[t]={In:e,count:1},r=7;break;case 9:return n.DC=!0;case 4:n.In=e,n.count=1,r=7}},e.prototype.cWb=function(t){for(var e,i,n,r=2;7!==r;)switch(r){case 2:var a=this,o=c.default.time.ia()-this.sQ,s=t,u=this.config;a000.h9M(9),F.warn(a000.I9M(o," last success was "," ms ago",t?"permanently":"temporarily","Network has failed ")),!t&&o>u.mya&&(s=!0),r=4;break;case 3:e=this.TB.qg,i=this.TB.qy,n=this.TB.zi,r=9;break;case 4:r=this.TB?3:9;break;case 9:t||this.events.emit("temporaryNetworkError",{type:"temporaryNetworkError",errorCode:e,httpCode:i,nativeCode:n}),s?(this.LR&&(clearTimeout(this.LR),this.LR=void 0),this.g0a(),this.b0.reset(),this.Hua({hZb:t,T4b:e,V4b:i,W4b:n})):this.LR||(this.LR=setTimeout(function(){for(var t=2;5!==t;)2===t&&(a.LR=void 0,a.lea(),t=5)},u.nya)),r=7}},e.prototype.lea=function(){for(var e,t=2;5!==t;)2===t&&((e=this).Z_a.Ox||this.Z_a.nga(function(){for(var t=2;1!==t;)2===t&&(e.LR||(e.Jl.lea(),e.ODa={},e.Et()),t=1)}),t=5)},t=8}}(),e.uJa=t},function(t,e,i){var n,r,a,o,s,u;function c(t,e,i){return u.call(this,t,e,i)||this}_esm(e),e.Fia=void 0,n=i(0),r=n.__importDefault(i(3)),a=i(2),o=i(430),t=i(429),s=new r.default.Console("ASEJS_LIVE_PROBE_MANAGER","asejs"),u=t.eka,n.__extends(c,u),c.prototype.Jda=function(t,e){s.log("Starting probing live servers"),u.prototype.Jda.call(this,t,e)},c.prototype.A7b=function(t,e){var i,n=null===(p=t.stream)||void 0===p?void 0:p.dO;a.assert(n,"aseStream is null"),p=this.M6a(n,null!=(i=t.X)?i:0,t.urls[0]),i=new o.D2(this),s.log("probeLiveSegmentServer probeUrl: "+p),n=r.default.time.ia(),u.prototype.fjb.call(this,t.oc,n,e,t),this.Hx&&(n={ts:n,es:e.r7,fc:e.qg,fn:e.B9,nc:e.zi,pb:[i.Vh()],gid:this.groupId},e.qy&&(n.hc=e.qy),u.prototype.wy.call(this,n,"errpb")),i.dza(p,t,t.oc),s.log("Opened probe request for serverId "+t.oc+" url "+t.url)},c.prototype.kAa=function(t,e){var i;s.log("Probe succeeded for serverId "+t.oc+" url "+t.url),p=this.getState(e.oc),(i=null==(i=e.stream)?void 0:i.dO)&&null!==p&&void 0!==p&&p.X?(i.OCb(p.X),s.log("Clearing state for serverId: ",e.oc),u.prototype.Tpa.call(this,e.oc),this.Hx&&(t={ts:r.default.time.ia(),id:t.requestId,result:1,servid:t.oc,gid:t.groupId||-1},u.prototype.wy.call(this,t,"pbres"))):u.prototype.kAa.call(this,t,e)},c.prototype.iAa=function(t,e){var i;s.log("Probe failed for serverId "+t.oc+" url "+t.url),i=null===(p=this.getState(e.oc))||void 0===p?void 0:p.CPb,p&&i&&i.X?(s.log("Clearing state for serverId: ",e.oc),u.prototype.Tpa.call(this,e.oc),u.prototype.Jda.call(this,e,i),this.Hx&&(t={ts:r.default.time.ia(),id:t.requestId,result:0,servid:t.oc,gid:t.groupId||-1},this.wy(t,"pbres"))):u.prototype.iAa.call(this,t,e)},c.prototype.yqa=function(t,e){var i;return t=new o.D2(this),i=this.M6a(e.stream.dO,e.X,e.kc.urls[0]),t.dza(i,e,e.oc),t},c.prototype.M6a=function(t,e,i){return 0<e?t.J6a(e-1,i.url):t.I6a(i.url)},e.Fia=c},function(t,e,i){var c,h,a,f,o,l,d,p,b;function n(t,e,i,n,r,a,o,s,u,c,h){var f=b.call(this,t)||this;return f.Be=t,f.H=e,f.K=i,f.mC=n,f.dF=a,f.Oaa=o,f.oA=s,f.oXa=u,f.Uh=c,f.YVa=[void 0,void 0],f.YU=null!=h?h:{Ax:[Object.create(null),Object.create(null)]},r?f.zY=r:(f.Ne=p.zp.instance.vt("headers",""+f.Be.N,!0,!1,{},f.K),f.Ne.xa()),f}_esm(e),e.FKa=void 0,c=i(0),h=i(129),a=i(431),f=i(6),o=c.__importDefault(i(3)),t=i(89),l=i(434),d=i(2),p=i(118),b=t.Uw,c.__extends(n,b),Object.defineProperties(n.prototype,{Ax:{get(){return this.YU.Ax},configurable:!0},LD:{get(){return this.YU.LD},set(t){this.YU.LD=t},configurable:!0},cN:{get(){return this.YU.cN},set(t){this.YU.cN=t},configurable:!0}}),n.prototype.cd=function(){var n=this;this.Ax.forEach(function(t,e){for(var i in t)t[i].cd(),n.ara(e,i)}),this.Ne&&p.zp.instance.SO(this.Ne),this.Ne=void 0},n.prototype.mq=function(t,e){return this.Ax[t][e]},n.prototype.caa=function(){return!(!this.LD||!this.LD.length)},n.prototype.Ppa=function(){this.LD=void 0},n.prototype.YR=function(t){this.LD=t},n.prototype.fEa=function(){var t,e,i;if(!this.caa()||this.cN)return!1;for(t=f.u.J,h.Mm.nq(t);0<this.LD.length;)if(e=this.LD.shift(),(i=this.Be.ly(t,e))&&!this.sWb(t,e)&&i.Yv)return this.cN=e,this.Kfa(i,{offset:0,hS:!0});return!1},n.prototype.yEa=function(i,t){var n=this;t.forEach(function(t){var e=n.mq(i,t.Pa);e&&!t.Yd&&(e.stream.Yd?t.u8(e.stream):(e.z_||(e.z_=[]),e.z_.push(n.Be)))})},n.prototype.PK=function(a,o,s){var t,u=this,c=this.Be;f.Uf.forEach(function(t){var e,i,n,r;!c.uc(t)||void 0!==s&&t!==s||(n=a[t],d.assert(n&&c.getTrackById(n.trackId)===n),n=n.Pc,c.el?u.H.warn("requestHeadersFromManifest, shutdown detected"):c.Jl.N1(c.N,n)?(r=null!=(r=null==(i=null==(e=u.dF(t))?void 0:e.UJ)?void 0:i.bitrate)?r:0,void 0===(e=l.psa(n,r))&&u.H.warn("Unable to find stream for bitrate ".concat(r)),e=n[e],(i=c.mq(t,e.Pa))&&i.stream.da?c.Ffc(t,i):(t={offset:0,hS:!1,OE:t===f.u.J,ey:!0,TQ:!u.Oaa(c)},c.m1a(e,t,o))):u.H.warn("requestHeadersFromManifest, unable to update urls"))}),c.MY=!0,null!=(t=this.Uh)&&t.call(this,c.Ub).d8()},n.prototype.BG=function(t,e){var i,n,r=this.K,a=this.mq(t.mediaType,t.Pa);return a?(a.stream.da||a.hS&&this.d0a(a),!1):(a=this.Xyb,i=this.Yyb,(void 0===r.dya||void 0===a||void 0===i||!((n=o.default.time.ia())-a<r.dya||n-i<r.dya))&&(t=this.Kfa(t,{offset:0},void 0,void 0,e),this.Yyb=o.default.time.ia(),t))},n.prototype.Kfa=function(t,e,i,n,r){var a,o,s,u=t.mediaType;if(h.Mm.nq(u),s=t.Pa,this.lxb(s,!!e.ey))return null!=(a=this.oXa)&&a.call(this),!1;if(a=this.mq(u,s))t=!1;else{if(a=(s=this.K.tkb&&t.ub)?0:e.offset,s=s?0:null!=(o=e.fa)?o:this.Yxb(t),a=!!(o=c.__assign(c.__assign({},e),{offset:a,fa:s})).OE,s=!!o.TQ,r=this.zY?this.zY(u,!!o.ey,a,s,!!i):r||this.Ne,d.assert(r),t.url&&(this.dF(u).Lwa=t.url),a=t=this.NUa(t,r,o),!t.tK())return this.Be.Sf("MediaRequest open failed (2)","NFErr_MC_StreamingFailure"),!1;t=!0}return e.ey&&n&&(this.Be.Zh[u]=a),null!=(s=this.oXa)&&s.call(this),t},n.prototype.bm=function(){var r=this,a=[];return this.Ax.forEach(function(t,e){var i,n;for(n in h.Mm.nq(e),t)1===(i=(e=t[n]).zEa())?a.push(e):2===i&&r.Be.Sf("swapUrl failure")}),a},n.prototype.gl=function(t){var e=t.mediaType,i=h.Mm.nq(e);this.Be.el?i.warn("header onrequestcomplete ignored, session shutdown:",t.toString()):(this.mC({type:"logdata",target:"startplay",Zc:{usedNativeDataView:t.xgc}}),t.gda>t.Q4b&&(this.YVa[e]=t.gda),t.hS&&this.d0a(t),this.yyb(t),this.Xyb=o.default.time.ia(),this.Be.Sv.emit("onHeaderRequestComplete",t)),this.Gv(t)},n.prototype.l7=function(t,e,i){var n=t.mediaType;return h.Mm.nq(n),n=this.Be.ly(n,t.Pa),e===!!t.pm&&(this.hYa(t),t.HDb(n),this.tUa(t),this.Be.Sv.emit("onHeaderFromCache",{header:t,bRb:i}),!0)},n.prototype.ON=function(t,e){var i,n,r=[],a=this.Ax[t];for(i in a)(n=a[i])&&!n.stream.da&&n.au===e&&(this.ara(t,i),r.push({stream:n.stream,offset:n.offset,fa:n.fa,OE:n.OE,ey:n.ey,TQ:n.TQ,qza:n.qza}),n.cd());return r},n.prototype.uBa=function(t){var e=this;t.forEach(function(t){e.Kfa(t.stream,t)})},n.prototype.hYa=function(t){this.Ax[t.mediaType][t.Pa]=t},n.prototype.sWb=function(t,e){return!!this.mq(t,e)},n.prototype.yyb=function(t){var e,i=this.K,n=h.Mm.nq(t.mediaType),r=t.stream.da;if(i.Oqa){i=r.length,n.trace("fragment count:",i);for(var a=0;a<i;++a)e=r.get(a),n.trace("fragment: "+a+", startPts: "+e.ea+", duration: "+e.duration+", offset: "+e.offset)}this.tUa(t)},n.prototype.tUa=function(e){var i=e.mediaType,n=e.Pa;h.Mm.nq(i),e.z_&&(e.z_.forEach(function(t){(t=t.ly(i,n))&&t!==e.stream&&!t.Yd&&t.u8(e.stream)}),e.z_=void 0),this.Be.$Vb(e)},n.prototype.NUa=function(t,e,i){var n=this,r=h.Mm.nq(t.mediaType);return(t=new a.Lga(t,this.K,e,i,this,!1,r)).addListener("headerRequestCancelled",function(t){n.xyb(t.request)}),t.xa(void 0),this.hYa(t),t},n.prototype.lxb=function(t,e){return!!(this.oA&&(t=this.oA.DZ(this.Be.L,t))&&this.l7(t,!1,e))},n.prototype.Yxb=function(t){var e=t.iz,i=t.T,n=i.duration,r=this.K;return t.ub?512:i.Hf.Pe?r.j4a||r.iaa:r.ugc&&e?e.offset+e.size:(t=this.YVa[t.mediaType])?t+128:r.Qra?2292+12*Math.ceil(n/2e3):r.iaa},n.prototype.xyb=function(t){this.ara(t.mediaType,t.Pa)},n.prototype.ara=function(t,e){delete this.Ax[t][e]},n.prototype.d0a=function(t){this.cN===t.Pa&&(this.cN=void 0)},e.FKa=i=n},function(t,e,i){var n,r,a;function o(t){this.pr=t,this.complete=this.append=this.M9=this.Uwa=this.open=0}_esm(e),e.svb=void 0,n=i(0).__importDefault(i(3)),r=i(129),a=["",""],Object.defineProperties(o.prototype,{console:{get(){return r.Mm.nq(this.pr.mediaType)},configurable:!0}}),o.prototype.n4b=function(){this.open=n.default.time.ia()},o.prototype.g4b=function(){this.Uwa=n.default.time.ia(),this.Xj()},o.prototype.c4b=function(){this.M9=n.default.time.ia(),this.Xj()},o.prototype.S3b=function(){this.append=n.default.time.ia(),this.Xj()},o.prototype.o_=function(){this.complete=n.default.time.ia(),this.Xj()},o.prototype.Xj=function(){var t;"RequestLedger ID: ".concat(this.pr.Vh());" load-open: ".concat(this.Uwa-this.open),0<this.M9&&" firstbyte-load: ".concat(this.M9-this.Uwa),0<this.append&&" append-firstbyte: ".concat(this.append-this.M9),0<this.complete&&(" complete-open: ".concat(this.complete-this.open),t=this.pr.mediaType,this.complete-this.open>this.pr.duration?(" duration: ".concat(this.pr.duration),a[t]+="X"):a[t]+=".",10<a[t].length&&(a[t]=a[t].slice(1)))},e.svb=o},function(t,e,i){var n,a,o;function r(t,e,i,n){var r=o.call(this)||this;return r.H=t,r.track=e,r.Al=!1,r.hma=!1,r.Ah=new a.Kf,r.Ah.on(e,"networkfailing",function(){r.emit("networkfailing")}),r.Ah.on(e,"error",function(){r.H.warn("requestQueue got error"),r.emit("error")}),i?(r.Al=!0,Promise.resolve().then(function(){return r.emit("created")})):r.Ah.on(e,"created",function(){r.Al=!0,r.emit("created")}),r.hma=n,r}_esm(e),e.LRa=void 0,n=i(0),a=i(12),o=a.EventEmitter,n.__extends(r,o),Object.defineProperties(r.prototype,{A9:{get(){return this.track.A9},configurable:!0},qg:{get(){return this.track.qg},configurable:!0},zi:{get(){return this.track.zi},configurable:!0},GX:{get(){return this.track.GX},configurable:!0},config:{get(){return this.track.config},configurable:!0}}),r.prototype.xa=function(){var t,e;this.hma||(null!=(e=(t=this.track).xa)&&e.call(t),this.hma=!0)},r.prototype.Xv=function(){return this.track.Xv()},r.prototype.toString=function(){return this.track.toString()},r.prototype.toJSON=function(){return this.track},r.prototype.Hr=function(){this.Ah.clear()},e.LRa=r},function(t,e,i){var d,p,c,b,g,h,m,v,f,n;function y(t){return t.Ff!==v.Pm}function r(t,e){(t.Ff===v.TEMPORARY||t.Ff===v.cm&&e)&&(t.Ff=v.Pm),t.children&&t.children.forEach(function(t){t&&r(t,e)})}_esm(e),e.lMa=void 0,d=i(0),p=d.__importStar(i(11)),t=i(12),c=i(6),b=d.__importDefault(i(28)),g=d.__importDefault(i(3)),h=i(2),m=new g.default.Console("ASEJS_LOCATION_SELECTOR","media|asejs"),(n=v=v||{})[n.Pm=0]="OK",n[n.TEMPORARY=1]="TEMPORARY",n[n.cm=2]="PERMANENT",(n=f=f||{})[n.ox=0]="STARTUP",n[n.pvb=1]="REBUFFER",i=function(u){var t=2;function e(t,e,i,n,r,a){for(var o,s=2;26!==s;)switch(s){case 6:o.urls={},o.streams={},o.kC=[],o.wca=!1,s=11;break;case 2:(o=u.call(this)||this).bc=i,o.dj=n,o.config=r,o.Tzb=a,s=9;break;case 9:o.E7b=f.ox,o.Dj={},o.Zl={},s=6;break;case 11:o.Bq={id:"network",Mo:b.default.ji.Xz,Ff:v.Pm,Ty:void 0,parent:void 0,children:o.kC},o.r6=null,o.kG=null,o.UR=b.default.nx.ox,i=t.vQ,s=17;break;case 17:return o.ub="LIVE"===t.mfa&&!!i,o.UN(t,e,b.default.nx.ox),o}}for(;22!==t;)switch(t){case 12:e.prototype.lea=function(){for(var t=2;1!==t;)switch(t){case 4:r(this.Bq,-8),t=3;break;case 2:r(this.Bq,!1),t=1}},e.prototype.mC=function(t){for(var e,i=2;5!==i;)2===i&&(null!=(e=this.Tzb)&&e.call(this,t),i=5)},e.prototype.mk=function(){for(var t=2;1!==t;)2===t&&(this.S9b(f.pvb),t=1)},e.prototype.tb=function(){for(var t=2;1!==t;)2===t&&(this.config.b0b&&this.X5b(),t=1)},e.prototype.P7b=function(t){for(var e,a,o,i,n,r,s,u,c,h=2;4!==h;)switch(h){case 2:a=this,o=new Set;try{for(i=2;3!==i;)switch(i){case 2:r=(n=d.__values(t)).next(),i=1;break;case 7:i=~r.done?2:4;break;case 5:l(r.value),i=4;break;case 1:i=r.done?3:5;break;case 6:l(r.value),i=9;break;case 14:r=n.next(),i=0;break;case 4:r=n.next(),i=1}}catch(t){var f={error:t}}finally{for(s=2;1!==s;)if(2===s){try{for(u=2;1!==u;)2===u&&(r&&!r.done&&(e=n.return)&&e.call(n),u=1)}finally{for(c=2;5!==c;)switch(c){case 1:throw f.error;case 2:c=f?1:5}}s=1}}h=5;break;case 5:Object.keys(this.streams).forEach(function(t){for(var e=2;1!==e;)2===e&&(o.has(t)||delete a.streams[t],e=1)}),h=4}function l(r){for(var t=2;1!==t;)2===t&&(Object.keys(r).forEach(function(t){for(var e,i=2;9!==i;)switch(i){case 2:e=r[t],i=1;break;case 1:o.add(t),i=5;break;case 5:i=e?4:9;break;case 4:var n=a.streams[t];a.streams[t]=n?d.__assign(d.__assign({},n),e):{id:t,bitrate:e.bitrate,eb:null,type:e.mediaType,clear:!e.Aj,Ur:!0,urls:[],JS:{},Dj:[],dO:e,Swa:a.ub?"LIVE":void 0},i=9}}),t=1)}},e.prototype.Gfb=function(i,t,n){for(var r,e=2;5!==e;)2===e&&(r=this,t.streams.forEach(function(t){for(var e=2;1!==e;)2===e&&(r.Hfb(i,t.downloadable_id,t,n),e=1)}),e=5)},t=17;break;case 17:e.prototype.H7b=function(t,e){for(var i=2;4!==i;)switch(i){case 2:i="none"!==t.id?1:4;break;case 9:i=""!=t.id?6:5;break;case 1:var n;(n=t.ttDownloadables["imsc1.1"])&&this.Hfb(c.u.Ob,t.downloadableIds["imsc1.1"],n,e),i=4}},e.prototype.Hfb=function(t,e,i,n){for(var r,a,o=2;10!==o;)switch(o){case 1:o=p.sa(r)&&n?5:12;break;case 7:this.streams[r.id]=r,o=6;break;case 2:r=this.streams[e],o=1;break;case 5:n="",r=0,a=null,t!==c.u.Ob&&(n=i.content_profile,r=i.bitrate,t===c.u.J&&(a=i.vmaf)),r={id:e,bitrate:r,eb:a,type:t,profile:n,clear:0===n.indexOf("none-"),Ur:!0,urls:[],JS:{},Dj:[],Swa:this.ub?"LIVE":void 0},o=7;break;case 6:this.I7b(r,i.urls),p.Nf(r.JS,function(t){for(var e=2;1!==e;)2===e&&(t.sort(function(t,e){return t.kc.cc-e.kc.cc}),e=1)}),r.Dj=r.Dj.sort(function(t,e){return t.level-e.level||t.cc-e.cc}),o=10;break;case 12:o=r||n?6:11;break;case 11:return}},e.prototype.I7b=function(s,t){for(var u,e=2;5!==e;)2===e&&(u=this,t.forEach(function(t){for(var e,i,n,r,a,o=2;14!==o;)switch(o){case 4:p.sa(n)&&(n={id:i,Mo:b.default.ji.URL,Ff:v.Pm,Ty:void 0,parent:r,children:[],url:i,kc:r,stream:s,wba:a},u.urls[i]=n,r.children.push(n)),e=r.location,s.urls.push(n),o=8;break;case 5:o=r?4:14;break;case 8:0===s.Dj.filter(function(t){return t.id===e.id}).length&&s.Dj.push(e),(t=(e.streams[s.id]=s).JS[e.id])?t.push(n):s.JS[e.id]=[n],o=14;break;case 2:i=t.url,n=u.urls[i],r=u.Zl[t.cdn_id],u.ub&&(a=t.liveOcaCapabilities),o=5}}),e=5)},e.prototype.Lfc=function(){for(var i,t,e,n,r=2;6!==r;)switch(r){case 1:r=0===e.length?5:4;break;case 9:e.forEach(function(t){for(var e=2;1!==e;)2===e&&(t.id!==i.bc.location&&(t.Lb=i.dj.get(t.id)),e=1)}),this.r6=n,r=8;break;case 8:return e.sort(function(t,e){return t.level-e.level||t.cc-e.cc}),e;case 5:return null;case 2:t=(i=this).config,e=this.kC.filter(function(t){return!y(t)&&0!==t.level}),r=1;break;case 3:r=null===this.r6||this.r6+t.Wwa<n?9:8;break;case 4:n=g.default.time.ia(),r=3}},e.prototype.S9b=function(t){for(var i,e=2;4!==e;)2===e&&(i=this.bc.location,this.E7b=t,this.kC.forEach(function(t){for(var e=2;1!==e;)2===e&&(t.id!==i&&t.Lb&&t.Lb.confidence>b.default.Sj.pD&&(t.Lb.confidence=b.default.Sj.pD),e=1)}),e=4)},t=25;break;case 2:d.__extends(e,u),e.prototype.mVb=function(){return this.kC[0].Lb},e.prototype.Av=function(){return y(this.Bq)},e.prototype.Cac=function(t){for(var e=2;5!==e;)switch(e){case 1:return t.parent.id;case 2:e=(t=this.urls[t])&&t.parent?1:5}},e.prototype.D7a=function(t){for(var e,i,n,r,a,o,s,u,c;;){i=[];try{for(n=2;9!==n;)switch(n){case 1:n=a.done?9:5;break;case 2:a=(r=d.__values(Object.keys(this.urls))).next(),n=1;break;case 5:(o=this.urls[a.value]).url===t.bz.url&&i.push(o.kc),n=3;break;case 3:a=r.next(),n=1;break;case 12:a=r.next(),n=5}}catch(t){var h={error:t}}finally{for(s=2;1!==s;)if(2===s){try{for(u=2;1!==u;)2===u&&(a&&!a.done&&(e=r.return)&&e.call(r),u=1)}finally{for(c=2;5!==c;)switch(c){case 3:c=h?2:9;break;case 1:case 9:throw h.error;case 2:c=h?1:5}}s=1}}return i}},e.prototype.xTb=function(t){for(var e=2;1!==e;)if(2===e){for(var i in this.streams)if(this.streams[i].dO===t)return this.streams[i];e=1}},e.prototype.UN=function(t,e,i){for(var n,o,r,a,s=2;26!==s;)switch(s){case 9:t.servers.forEach(function(t){for(var e,i,n,r=2;14!==r;)switch(r){case 2:e=t.id,r=1;break;case 4:i=o.Dj[t.key],r=3;break;case 5:o.Zl[e].cc=t.rank,r=14;break;case 1:r=o.Zl[e]?5:4;break;case 9:t={id:e,Mo:b.default.ji.rH,Ff:v.Pm,Ty:void 0,parent:i,children:n=[],urls:n,name:t.name,type:t.type,cc:t.rank,location:i},r=7;break;case 3:r=i?9:14;break;case 7:o.Zl[t.id]=t,i.children.push(t),r=14}}),r=t.mfa,n=t.vQ,h.assert(this.ub&&"LIVE"===r&&!!n||!this.ub&&"LIVE"!==r&&!n),this.ub&&(this.P_b=n.H3b),s=14;break;case 2:o=this,void 0===i&&(i=b.default.nx.Zsb),t.locations.forEach(function(t){for(var e,i,n,r,a=2;7!==a;)switch(a){case 2:e=t.key,a=1;break;case 1:a=o.Dj[e]?5:4;break;case 5:o.Dj[e].cc=t.rank,o.Dj[e].level=t.level,o.Dj[e].weight=t.weight,a=7;break;case 4:i=[],n=o.dj.get(e),r=o.Bq,t={id:e,Mo:b.default.ji.LOCATION,Ff:v.Pm,cc:t.rank,level:t.level,weight:t.weight,Ty:void 0,parent:r,children:i,Zl:i,streams:{},Lb:n},o.Dj[t.id]=t,r.children.push(t),a=7}}),this.r6=g.default.time.ia(),this.kC.sort(function(t,e){return t.level-e.level||t.cc-e.cc}),s=9;break;case 11:t.video_tracks.forEach(function(t){for(var e=2;1!==e;)2===e&&(o.Gfb(c.u.J,t,a),e=1)}),null!=(r=t.timedtexttracks)&&r.forEach(function(t){for(var e=2;1!==e;)2===e&&(o.H7b(t,a),e=1)}),(t=this.kC.filter(function(t){{var e;return(e=t.Zl.every(function(t){return 0===t.urls.length}))&&(t.Zl.forEach(function(t){for(var e=2;1!==e;)2===e&&(o.Zl[t.id]=void 0,e=1)}),o.Dj[t.id]=void 0,t.parent=void 0,t.children.length=0,t.streams={}),!e}})).forEach(function(t){for(var e=2;1!==e;)2===e&&(t.Zl.sort(function(t,e){return t.cc-e.cc}),e=1)}),this.kC=t,this.Bq.children=t,s=16;break;case 15:this.UR=i,this.dump(),s=26;break;case 14:a=!0,e&&(a=!1,this.P7b(e)),t.audio_tracks.forEach(function(t){for(var e=2;1!==e;)2===e&&(o.Gfb(c.u.P,t,a),e=1)}),s=11;break;case 16:this.kG=null,s=15}},t=7;break;case 7:e.prototype.N1=function(t,e,s){for(var u,n,c,h,r,f,l,i=2;17!==i;)switch(i){case 5:u=this.bc.get(),n=0,g.default.mv&&g.default.mv(t),i=3;break;case 9:return!1;case 14:p.xb(this.kG)&&(this.kG=this.Lfc()),i=13;break;case 20:return this.cu(b.default.ji.Xz,!1),!1;case 1:l&&(this.kG=null),i=5;break;case 13:i=this.kG?11:12;break;case 12:return this.cu(b.default.ji.Xz,!1),!1;case 19:return e.forEach(function(o,t){for(var e,i=2;5!==i;)2===i&&(e=o.id,c.some(function(n){for(var r,a,t=2;8!==t;)switch(t){case 1:t=a?4:5;break;case 4:return r=a.Dj[0],void 0===o.Hda&&(o.Hda=r.id,o.hAa=a.JS[r.id][0].kc.id),a.JS[n.id].some(function(t){for(var e=2;10!==e;)switch(e){case 7:o.kc=t.kc.id,o.dL=t.kc.name,o.ku=t.kc.type,e=13;break;case 1:return t.kc.Ff===v.TEMPORARY&&(o.Ff=v.TEMPORARY),f.ww&&o.kc===t.kc.id&&t.kc.Ty&&(o.Ty=t.kc.Ty),!1;case 2:e=y(t.kc)?1:5;break;case 4:return!1;case 5:e=y(t)||l&&!t.wba.some(function(t){return a000.O9M(10),a000.I9M(t,s)})?4:3;break;case 13:return l&&(a.Swa=s),o.Lb=f.Joa?n.Lb.confidence>=b.default.Sj.oD||u.confidence<h?n.Lb:u:u.confidence===b.default.Sj.HAVE_NOTHING||n.Lb.confidence>=b.default.Sj.oD?n.Lb:u,!0;case 3:var i="unknown";o.location!==n.id&&(f.ww?o.pwa=n.id===r.id:i=n!==c[0]&&l&&a.Swa!==s?""+b.default.nx.Uvb:n!==c[0]?""+b.default.nx.Yga:void 0===o.location?""+b.default.nx.ox:p.sa(o.Y$a)||o.Y$a===n.id?p.sa(o.aab)||o.aab===t.kc.id?"performance":"serverfailover":"locationfailover",o.location=n.id,o.Xwa=n.level,o.ju=i),o.url=t.url,e=7}});case 2:a=n.streams[e],t=1;break;case 5:return!1}})?(o.HB=!1,o.Ff=void 0,o.Ur&&++n):o.Ff&&o.Ff===v.TEMPORARY?r.Bq.Ff=v.TEMPORARY:o.HB||(m.warn("Failing stream ["+t+"] "+e+" ("+o.bitrate+" Kbps)"),o.SHb(),o.HB=!0),i=5)}),y(this.Bq)?(m.warn("Network has failed, not updating stream selection"),this.wca=!0,this.emit("networkFailed",this.Bq.Ff===v.cm),!1):!!n||(m.warn("Did not find a URL for ANY stream..."+(e.length?"":"(empty stream list)")),this.cu(b.default.ji.Xz,!0),!1);case 3:i=y(this.Bq)?9:8;break;case 11:c=this.kG,i=10;break;case 8:h=b.default.Sj.pD,f.e_&&(h=b.default.Sj.oD),this.bc.location&&u.confidence>=h&&(t=this.Dj[this.bc.location])&&(t.Lb=u),i=14;break;case 2:f=(r=this).config,l=this.ub&&void 0!==s,i=1;break;case 10:i=c.length?19:20}},e.prototype.Fac=function(a,o){for(var s,u,t=2;4!==t;)switch(t){case 5:case 7:return Array.from(s);case 2:s=new Set,u=/^http(s?):\/\/([^\/:]+):?([0-9]*)/,p.forEach(this.urls,function(t,e){for(var i,n,r=2;6!==r;)switch(r){case 4:e="s"===n[1],i=n[2],n=n[3],r=8;break;case 2:t=t.kc,n=e.match(u),r=5;break;case 5:r=n&&4===n.length?4:6;break;case 8:n.length||(n=e?"443":"80"),p.vg(i)&&p.vg(n)&&i===a&&n==o&&s.add(t),r=6}}),t=5}},e.prototype.cu=function(t,e,i,n){for(var r,a,o,s,u,c,h,f=2;42!==f;)switch(f){case 5:r=r.parent,f=1;break;case 30:f=s===v.TEMPORARY?24:29;break;case 44:throw Error("Invalid failure state");case 32:n&&(this.UR=b.default.nx.Vub,r.Ty=n),this.dump(),f=42;break;case 43:a000.h9M(6),m.warn(a000.I9M("Unable to find failure entity for URL ",i)),f=42;break;case 13:c=r,f=12;break;case 17:e.unshift(c.id),f=19;break;case 15:e.unshift("<url for "+c.stream.bitrate+">"),f=19;break;case 16:f=h===b.default.ji.URL?15:19;break;case 2:r=t!==b.default.ji.Xz&&i?this.urls[i]:this.Bq,a=this.Bq.Ff,o=e?v.cm:v.TEMPORARY,f=1;break;case 26:f=(s=r.Ff)===v.cm?25:30;break;case 4:f=r?3:43;break;case 1:f=r&&r.parent&&r.Mo!==t?5:4;break;case 29:f=s===v.Pm?24:28;break;case 12:f=c?11:27;break;case 3:f=o!==r.Ff?9:42;break;case 25:return;case 10:u=c,f=20;break;case 27:l.call(i,t+(e.length?"/"+e.join("/"):"")+" : was "+function(t){switch(t.Ff){case v.Pm:return"OK";case v.cm:return"FAILED PERMANENTLY";case v.TEMPORARY:return"FAILED TEMPORARILY";default:return"INVALID"}}(r)),f=26;break;case 9:var l=(i=m).warn;t=(e?"PERM":"TEMP")+" failure reported for "+b.default.ji.name[t]+" at ",f=6;break;case 24:r.Ff=o,!function t(e){var i,n,r=!1;(e=e.parent)&&e.children&&((i={})[v.Pm]=[],i[v.cm]=[],i[v.TEMPORARY]=[],(n=e.children).forEach(function(t){t&&i[t.Ff].push(t)}),0<i[v.Pm].length||(i[v.cm].length===n.length?e.Ff!==v.cm&&(e.Ff=v.cm,m.error("PERM failing :",b.default.ji.name[e.Mo]+" "+e.id),r=!0):(e.Ff===v.Pm&&(e.Ff=v.TEMPORARY,m.error("TEMP failing :",b.default.ji.name[e.Mo]+" "+e.id),r=!0),i[v.TEMPORARY].forEach(function(t){t.Ff=v.Pm})),r&&t(e)))}(r),this.wca=this.wca||y(this.Bq),a<(o=this.Bq.Ff)&&(m.warn("Emitting networkFailed, permanent =",o===v.cm),this.emit("networkFailed",o===v.cm)),this.kG=null,this.UR=b.default.nx.Jf,f=32;break;case 6:e=[],f=13;break;case 20:e.unshift(u.id+"("+u.name+")"),f=19;break;case 11:f=(h=c.Mo)===b.default.ji.rH?10:18;break;case 18:f=h===b.default.ji.LOCATION?17:16;break;case 28:f=44;break;case 19:c=c.parent,f=12}},e.prototype.uhb=function(t,e){for(var i=2;3!==i;)switch(i){case 2:i=(t=this.Zl[t])?1:5;break;case 1:r(t,e),function t(e){var i;(e=e.parent)&&0<e.children.length&&e.Ff!==v.Pm&&((i={})[v.Pm]=[],i[v.cm]=[],i[v.TEMPORARY]=[],e.children.forEach(function(t){t&&i[t.Ff].push(t)}),0<i[v.Pm].length&&(e.Ff=v.Pm,t(e)))}(t),i=5;break;case 8:i=(t=this.Zl[t])?2:4;break;case 5:this.kG=null,this.UR=b.default.nx.wja,i=3}},t=12;break;case 25:return e.prototype.X5b=function(){for(var i,t=2;5!==t;)2===t&&((i=this).wca||this.kC.forEach(function(t){for(var e=2;1!==e;)2===e&&(t.Ff===v.TEMPORARY&&i.dj.fail(t.id,g.default.time.ia()),e=1)}),t=5)},e.prototype.dump=function(){},e}}(t.EventEmitter),e.lMa=i},function(t,e,i){var d;function n(t){this.config=t}_esm(e),e.iGa=void 0,d=i(22),n.prototype.Q7b=function(s){var u=this.config,c=[],h=[];if(s.forEach(function(t,e){(void 0===t.eb?h:c).push(e)}),0!==h.length)for(var f=-1,l=-1,t=0;t<h.length;t++)!function(t){var e,i,n,r,a=h[t],o=s[a];0!==t&&a===h[t-1]+1||(f=c[d.C7(c,function(t){return t<a})]||-1,l=c[d.Yp(c,function(t){return a<t})]||-1),i=u.n1b,t=e=0,n=u.o1b,-1<l&&(i=s[l].bitrate,n=s[l].eb),-1<f&&(t=s[f].eb,e=s[f].bitrate),i=Math.log(i),e=0===e?0:Math.log(e),r=Math.log(o.bitrate),o.t9=Math.max(0,Math.min(110,Math.round((t*(i-r)+n*(r-e))/(i-e)*100)/100))}(t)},e.iGa=n},function(t,e,i){var n,o,s,r,a,u,c,h,f,l,d,p,b;function g(t,e,i,n){this.config=t,this.mediaType=e,this.Rc=i,this.console=n}_esm(e),e.ENa=void 0,n=i(6),o=i(19),s=i(2),r=i(977),a=i(978),u=i(979),c=i(980),h=i(981),f=i(982),l=i(983),d=i(984),p=i(985),b=i(986),g.prototype.append=function(t,i){var e,n,r,a;return void 0===this.track?this.cQ(t.stream):this.track!==t.stream.track&&(s.assert(this.track.oa),s.assert(t.stream.track.oa),this.track=t.stream.track),s.assert(void 0!==this.bq),n={ya:t,offset:null!=(e=t.wAa)?e:o.M.Ka,Je:this.config.QR,yj:!1},r=(n=this.bq.reduce(function(t,e){return e.append(t,i)},n)).ya,e=n.offset,a=n.yj,n=void 0===(n=n.Ej)?[]:n,r.Ha&&(s.assert(t.Ha,"Fragments must be marked for edit at request time"),t.kj(r.Ha)),a||!this.Xbb?{offset:e,yj:a}:(t=(a=this.Xbb.Ha(t)).ha,r=a.Ej,a=a.response,Array.prototype.push.apply(n,void 0===r?[]:r),{offset:e,yj:!t,Ej:n,response:a})},g.prototype.reset=function(){this.bq=this.track=void 0},g.prototype.cQ=function(t){var e,i;this.track=t.track,this.Xbb=new p.qNa(this.console,this.config,this.mediaType,t.profile),this.bq=[],this.mediaType===n.u.P&&(this.config.QR&&this.bq.push(new u.aSa(this.config,t.track,this.console)),(i=this.lpa(t)).equal(o.M.Ka)?this.config.xo&&t.sf&&this.Iva(t.T.N)&&this.bq.push(new f.GLa(this.config)):this.bq.push(new r.fka(i)),this.config.TZ||(this.console.log("MediaSplicer: NegativePtsGuard: ".concat(i.ac(),", ")+"".concat(null==(e=t.sf)?void 0:e.ac())),this.bq.push(new c.$Na(this.config,t,this.console))),this.fZb()?(this.config.Hh||this.bq.push(new l.mGa(t,this.config,this.Rc,this.console)),this.config.QR&&this.bq.push(new b.Uga(this.console)),this.bq.push(new a.lOa(this.config,t,this.console)),this.Zbc(t)&&(s.assert(t.oa),this.bq.push(this.FIb(t.sf||o.M.Ka,t.oa,i)))):(this.bq.push(new d.nGa(this.console)),this.config.QR&&this.bq.push(new b.Uga(this.console))))},g.prototype.Iva=function(t){return this.config.Iva||this.config.A9a&&-1!==this.config.A9a.indexOf(t)},g.prototype.lpa=function(t){return r.fka.lpa(this.config,t.sf,this.Rc,this.console)},g.prototype.fZb=function(){return!this.config.RK},g.prototype.Zbc=function(t){return this.config.$ec&&this.config.xo&&!!t.sf},g.prototype.FIb=function(t,e,i){return new h.CTa(t.Ea(i),e,this.console)},e.ENa=g},function(t,e,i){var a,o;function n(t){this.sf=t}_esm(e),e.fka=void 0,a=i(19),o=i(10),n.lpa=function(t,e,i,n){var r=a.M.Ka;return e&&(i=null==i?void 0:i.Hoc,t.ngc&&void 0!==i&&0<=i?(t=new a.M(i,48e3),r=e.add(t),o.S&&n.trace("Adjusting profile timestamp offset of ".concat(e)+" by DPI assumed delay of ".concat(t)+" for ASE applied offset of ".concat(r,"."))):t.tI&&(r=e)),r},n.prototype.append=function(t){var e=t.Je,i=t.yj,n=t.Ej;return{ya:t.ya,offset:t.offset.add(this.sf),Je:e,yj:i,Ej:n}},e.fka=n},function(t,e,i){var a,o,s,u;function c(t){return"".concat(t.toString()," (nrdp: ").concat(t.WK,"ms)")}function n(t,e,i){this.console=i,this.offset=a.M.Ka,this.sf=t.xo?e.sf:void 0,u.assert(e.oa),this.oa=e.oa}_esm(e),e.lOa=void 0,a=i(19),o=i(264),s=i(10),u=i(2),n.prototype.append=function(t){var e,i,n,r;return t.yj?t:(e=t.ya,i=t.offset,n=t.Je,r=t.Ej,void 0!==this.U$a&&(u.assert(void 0!==this.ywa),e.ec.add(t.offset).equal(this.U$a)?(t=this.sGb(e,i.add(this.offset)).W-this.ywa)<0?this.offset=this.offset.add(a.M.nC):0===t?this.offset.lessThan(a.M.Ka)&&(this.offset=this.offset.add(a.M.nC)):1===t&&!this.offset.greaterThan(a.M.Ka)||(this.offset=this.offset.Ea(a.M.nC)):this.offset=a.M.Ka),this.ywa=this.rGb(e,i.add(this.offset)).W,this.U$a=e.Ed.add(i),{ya:e,offset:i.add(this.offset),Je:n,yj:!1,Ej:r})},n.prototype.sGb=function(t,e){var i,n;return t=this.CYa(t.ec),i=o.jw(t).add(o.jw(e)),n=t.add(e).Ea(i),s.S&&this.console.trace("NrdpRounding: content start "+c(t)+", timestamp offset: "+c(e)+", start rounding error: "+o.jw(t).toString()+", offset rounding error: "+o.jw(e).toString()+", total error: "+i.toString()+", expected nrdp value:"+n.ac()+", ("+t.WK+e.WK+"ms), last fragment end nrdp: "+this.ywa),n},n.prototype.rGb=function(t,e){var i,n,r=this.oa;return t=this.CYa(t.Ed),i=o.jw(t.Ea(r)).add(o.jw(r)).add(o.jw(e)),n=t.add(e).Ea(i),s.S&&this.console.trace("NrdpRounding: content end: start of last frame:"+c(t.Ea(r))+", frame duration: "+c(r)+", offset: "+c(e)+", timestamp rounding error: "+o.jw(t.Ea(r)).toString()+", frame duration rouding error: "+o.jw(r).toString()+", offset rounding error: "+o.jw(e).toString()+", total rounding error: "+i.toString()+", expected nrdp value: "+n.ac()+", ("+t.Ea(r).WK+r.WK+e.WK+"ms)"),n},n.prototype.CYa=function(t){return this.sf?t.Ea(this.sf):t},e.lOa=n},function(t,e,i){var s,u,c;function n(t,e,i){this.config=t,this.console=i,this.Rx=s.M.Ka,u.assert(e.oa),this.oa=e.oa,t=e.Pc[0].profile,this.oca=this.aUb(t,this.oa),this.Rba=this.YTb(t,this.oa)}_esm(e),e.aSa=void 0,s=i(19),u=i(2),c=i(10),n.prototype.append=function(t,e){var i,n,r,a,o;return t.yj?t:(i=t.ya,n=t.offset,r=void 0===(r=t.Ej)?[]:r,t=t.Je,a=e.JQ,e=e.pya,this.yza&&(o=this.q2b(i,this.yza),i.Ha&&this.Aoa(o)?(c.S&&this.console.trace("SeamlessAudio: dropping first frame"),i.tra(1),this.Rx=o):(this.Rx=o.add(this.oa),this.FZa(this.Rx)||(c.S&&this.console.trace("SeamlessAudio: cannot maintain seamlessness at "+i.vd.ac()+" error would be "+this.Rx.ac()+" (editing "+(i.Ha?"":"not ")+"allowed)"),r.push({type:"logdata",target:"endplay",fields:{avsyncreset:{type:"array",value:{id:i.Pa,pts:i.ec.W}}}}),this.Rx=s.M.Ka,t=!1)),this.yza=void 0),(i.$o||i.vy)&&(u.assert(a,"SeamlessAudio.append(): mediaSplicePlayerTimestamp is undefined"),!i.Ha||!e&&i.vy||(o=this.r2b(i,a,e)).zj(s.M.Ka)&&(c.S&&this.console.trace("SeamlessAudio: dropping last frame"),i.ura(1)),this.yza=a),u.assert(this.FZa(this.Rx)),this.rQ=i.Mc,{ya:i,offset:n.add(this.Rx),Je:t,yj:!1,Ej:r.length?r:void 0})},n.prototype.r2b=function(t,e,i){var n=i?this.Rx.add(t.Mc.Ea(i)).Ea(this.oa):(n=t.Mc.Ea(e),this.Rx.add(n).Ea(this.oa));return c.S&&this.console.trace("SeamlessAudio: fragment end: "+t.Mc.ac()+", splice "+e.ac()+", next start "+(null==i?void 0:i.ac())+", error "+n.add(this.oa).ac()+", error with frame drop "+n.ac()+", is"+(this.Aoa(n)?"":" not")+" within bounds of ["+this.oca.ac()+" and "+this.Rba.ac()+")"),n},n.prototype.q2b=function(t,e){var i;return u.assert(this.rQ),i=this.Rx.add(this.rQ.Ea(t.vd)).Ea(this.oa),c.S&&this.console.trace("SeamlessAudio: fragment start: "+t.vd.ac()+", splice "+e.ac()+", last fragment end: "+this.rQ.ac()+", error "+i.add(this.oa).ac()+", error with frame drop "+i.ac()+", is"+(this.Aoa(i)?"":" not")+" within bounds of ["+this.oca.ac()+" and "+this.Rba.ac()+")"),i},n.prototype.Aoa=function(t){return t.lessThan(this.Rba)&&t.zj(this.oca)},n.prototype.FZa=function(t){return t.lessThan(this.Rba.add(s.M.nC))&&t.zj(this.oca.Ea(s.M.nC))},n.prototype.YTb=function(t,e){return"object"==typeof this.config.RBa&&void 0!==this.config.RBa[t]?(t=new s.M(this.config.RBa[t],1e3).Rg(e.aa).add(new s.M(1,e.aa)),s.M.min(e,t)):e},n.prototype.aUb=function(t,e){var i;return"object"==typeof this.config.SBa&&void 0!==this.config.SBa[t]?(i=e.Xk(-2),t=new s.M(this.config.SBa[t],1e3).Rg(e.aa).Ea(new s.M(1,e.aa)),s.M.max(i,t)):new s.M(-12,1e3)},e.aSa=n},function(t,e,i){var o,n,s;function r(t,e,i){this.console=i,this.y0=!1,n.assert(e.oa,"NegativePtsGuard: stream.frameDuration must exist."),this.oa=e.oa,this.xo=t.xo,this.sf=null!=(i=e.sf)?i:o.M.Ka}_esm(e),e.$Na=void 0,o=i(19),n=i(2),s=i(10),r.prototype.append=function(t){var e,i,n,r,a;return this.y0||t.yj?t:(e=t.ya,i=t.offset,n=t.Je,t=t.Ej,e.Ha&&(r=e.ec.Ea(this.xo?this.sf:o.M.Ka).add(i)).lessThan(o.M.Ka)&&(a=Math.ceil(r.jC(-1).Xk(this.oa)),s.S&&this.console.trace("NegativePtsGuard: dropping ".concat(a," frames on first fragment to avoid nagative pts, ")+"profile offset ".concat(this.sf.ac(),", ")+"request content start ".concat(e.ec.ac(),", ")+"current timestamp offset ".concat(i.ac()," => ")+"firstPlatformTimestamp ".concat(r.ac(),".")),e.tra(a)),{ya:e,offset:i,Je:n,yj:!(this.y0=!0),Ej:t})},e.$Na=r},function(t,e,i){var u,c;function n(t,e,i){this.sf=t,this.oa=e,this.console=i}_esm(e),e.CTa=void 0,u=i(19),c=i(10),n.prototype.append=function(t,e){var i,n,r=t.ya,a=t.offset,o=t.Je,s=t.Ej;return(t=t.yj)||(i=e.endOfStream,e=e.JQ,i&&e?(i=r.ec.Ea(this.sf).add(a),n=r.Ed.Ea(this.sf).add(a),e=e.Ea(u.M.nC),c.S&&this.console.trace("TruncateEndOfStreamAudio: last fragment has adjusted times "+i.ac()+"-"+n.ac()+" vs media splice point at "+e.ac()),i.add(this.oa).zj(e)?(c.S&&this.console.trace("TruncateEndOfStreamAudio: dropping whole fragment"),t=!0):n.zj(e)&&(e=Math.ceil(n.Ea(e).Xk(this.oa)),r.Ha?(c.S&&this.console.trace("TruncateEndOfStreamAudio: drop ".concat(e," frames")),r.ura(e)):(c.S&&this.console.trace("TruncateEndOfStreamAudio: fragment.edit is false, dropping whole fragment"),t=!0))):i&&c.S&&this.console.trace("TruncateEndOfStreamAudio: last fragment has no media splice point")),{ya:r,offset:a,Je:o,yj:t,Ej:s}},e.CTa=n},function(t,e){function i(t){this.y0=!1,this.gcc=t.kYb}_esm(e),e.GLa=void 0,i.prototype.append=function(t){return t.ya.Ha&&(t.ya.qbc(this.y0?0:this.gcc),this.y0=!0),t},e.GLa=i},function(t,e,i){var b,g;function n(t,e,i,n){this.config=e,this.Rc=i,this.console=n,this.oa=t.oa}_esm(e),e.mGa=void 0,b=i(436),g=i(8),n.prototype.append=function(t,e){var i,n,r,a,o,s,u,c,h,f,l,d,p;return t.yj?t:(n=!1,r=b.Pta(this.config,this.Rc),a=t.ya,o=t.offset,s=t.Je,u=t.Ej,c=a.Mc,h=a.vd,f=a.vy,f=a.$o||f,t.ya.Ha&&f&&!s?(l=a.Ed.Ea(a.ec),f=Math.floor(l.Xk(this.oa)),c=(d=null!=(i=e.pya)?i:c.Ea(this.oa.jC(2))).Ea(h),i=f,p=!1,e.pya&&(i=(e=this.w_a(l,c,c)).nl,p=e.adb),r=d.Ea(g.M.Ja(r)),h=g.M.max(r.Ea(h),g.M.Ka),p||(i=(h=this.w_a(l,h,c)).nl,h.adb&&this.oa.jC(--i)),i<(this.config.l2b||1)?n=!0:0<f-i&&t.ya.ura(f-i),{ya:a,offset:o,Je:s,yj:n,Ej:u}):t)},n.prototype.w_a=function(t,e,i){var n;return t=g.M.min(t,e),t=Math.floor(t.Xk(this.oa)),e=this.oa.jC(t),i=i.Ea(e),n=0<t&&i.lessThan(g.M.nC),{nl:t,fsc:e,tpc:i,adb:n}},e.mGa=n},function(t,e,i){var c;function n(t){this.console=t}_esm(e),e.nGa=void 0,c=i(10),n.prototype.append=function(t,e){var i,n,r,a,o,s,u;return t.yj?t:(i=!1,n=t.ya,r=t.offset,a=t.Je,t=t.Ej,e=e.JQ,o=n.Mc,this.Eq&&o.lessThan(this.Eq.Mc)&&(s=this.Eq.JQ.Ea(n.vd),(u=n.Mc.Ea(this.Eq.JQ)).lessThan(s)&&(c.S&&this.console.trace("AudioOverlapGuard: skipping append of ".concat(n)+", current error: ".concat(s.ac())+", discard error: ".concat(u.ac())),i=!0)),this.Eq=(n.$o||n.vy)&&e?{JQ:e,Mc:o}:void 0,{ya:n,offset:r,Je:a,yj:i,Ej:t})},e.nGa=n},function(t,e,i){var o,s,u,a,c;function h(t,e,i,n,r){var a,o,s,u,c,h,f,l;if(void 0!==t.Xea||void 0!==t.PCa||t.yv||t.zv){for(a=t.end-t.start,o=Array(a),s=t.yv,u=t.zv,c=t.e4a?t.e4a-1:0,h=t.f4a?t.f4a-1:0,f=Math.min(a,Math.max(t.Xea||0,r&&s&&!c?1:0)),t=Math.min(a-f,Math.max(t.PCa||0,r&&u&&!h?1:0)),r=Math.floor(i.Xk(e)),e=Math.max(0,Math.min(a-f-t,s?Math.max(0,r-c):0)),l=Math.max(0,Math.min(a-f-t-e,u?Math.max(0,r-h):0)),e=f+e,i=a-t-l,h=h?0:Math.max(0,r+1-l),r=(1-n)/(r+1),l=0;l<a;++l)o[l]=l<f||a-t<=l?-1/0:s&&l<e?d(n+(l-f+c)*r):u&&i<=l?d(1-(l-i+h+1)*r):0;return o}}function d(t){return 20*Math.log(t)/Math.log(10)}_esm(e),e.qNa=void 0,t=i(0),o=i(72),s=i(8),u=i(2),a=i(6),c=t.__importDefault(i(3)),i=function(){function t(t,e,i,n){for(var r=2;9!==r;)2===r&&(this.console=t,this.config=e,this.Fcb=new c.default.Console("MP4","media|asejs"),i===a.u.P&&(this.Ew=s.M.Ja(e.Ew),this.FQ=Math.pow(10,(e.FQ[n]||-44)/20)),r=9)}for(var e=2;3!==e;)switch(e){case 5:return t.prototype.mOb=function(t,e,i){for(var n,r=2;7!==r;)switch(r){case 1:u.assert(t.Ha),n=t.Ha.PCa,r=4;break;case 9:var a=h(t.Ha,t.oa,this.Ew,this.FQ,this.config.y9a);return(e=new o.dx(this.Fcb,t.stream,e).XAa({jj:t.Ha.end-i,aa:t.iK,PA:a,oBa:!1,VK:this.config.pea,YJ:d(this.FQ)}))?{ha:!0,ik:t.dBa(n),data:e.ya}:(this.console.error("MediaFragmentEditor [".concat(t.mediaType,"]: ").concat(t.toString()," edit failed")),{ha:!1});case 3:return{ha:!0};case 2:void 0===i&&(i=0),r=1;break;case 4:r=t.Ha.end!==t.gy||n||t.Ha.yv||t.Ha.zv?9:3}},t;case 2:t.prototype.Ha=function(t){for(var e,i,n,r=2;21!==r;)switch(r){case 17:i=(t=this.mOb(t,i?s.st(i):t.response,n)).ha,n=t.ik,r=27;break;case 23:i=e,r=22;break;case 27:e=t.data,r=26;break;case 11:return{ha:i};case 7:return{ha:!0};case 10:n&&a.push(n),i=e,r=19;break;case 14:i=(e=this.lOb(t,t.response)).ha,n=e.ik,e=e.data,r=12;break;case 5:r=t.Ha?3:4;break;case 12:r=i?10:11;break;case 2:var a=[];u.assert(!t.me,"MediaFragmentEditor [${fragment.mediaType}]: Attempt to edit appended fragment"),r=5;break;case 8:r=t.response instanceof ArrayBuffer?6:7;break;case 4:return{ha:!0};case 22:return{ha:!0,Ej:a,response:i};case 18:r=t.Ha.end!==t.gy||t.Ha.PCa||t.Ha.zv?17:22;break;case 24:n&&a.push(n),r=23;break;case 6:r=0<t.Ha.start||t.Ha.Xea||t.Ha.yv?14:18;break;case 9:return{ha:!1};case 26:r=i?24:25;break;case 25:return{ha:i};case 19:n=t.Ha.start,r=18;break;case 3:r=t.duration<=0?9:8}},t.prototype.lOb=function(t,e){for(var i,n=2;8!==n;)switch(n){case 2:u.assert(t.Ha),i=t.Ha.Xea,n=5;break;case 5:n=t.Ha.start||i||t.Ha.yv||t.Ha.zv?3:4;break;case 3:var r=h(t.Ha,t.oa,this.Ew,this.FQ,this.config.y9a);return(e=new o.dx(this.Fcb,t.stream,e).Ogb({jj:t.Ha.start,aa:t.iK,PA:r,oBa:!1,VK:this.config.pea,YJ:d(this.FQ)}))?{ha:!0,ik:t.dBa(i),data:e.ya}:(this.console.error("MediaFragmentEditor [".concat(t.mediaType,"]: ").concat(t.toString()," edit failed")),{ha:!1});case 4:return{ha:!0}}},e=5}}(),e.qNa=i},function(t,e,i){var s,u;function n(t){this.console=t}_esm(e),e.Uga=void 0,s=i(10),u=i(19),n.prototype.append=function(t){var e,i,n,r,a,o;return t.yj?t:(e=t.ya,i=t.offset,n=t.Ej,r=e.ec,a=e.Ed,o=r.add(i),i=a.add(i),o=this.rQ&&o.Ea(this.rQ),this.rQ=i,void 0===o||o.equal(u.M.Ka)||(t.Ej=n||[],e={stream:e.Pa,pts:r.W,gap:o.W},t.Ej.push({type:"logdata",target:"endplay",fields:{audiodisc:{type:"array",value:e}}}),s.S&&this.console.log("Audio discontinuity: ".concat(JSON.stringify(e)))),t)},e.Uga=n},function(t,e,i){var n,r,s,a,u,o,c,h,f,l,d,p,b,g,m;function v(){this.complete()}function y(t,e,i){var n;return void 0===i&&(i="unknown"),(n=m.call(this)||this).Da=t,n.console=e,n.name=i,n.Czb=0,n.jma=!1,n.xl=new b,n.VE=new r.Kf,n.fm=new a.s4([],c.F0a(function(t,e){return t.TK.lm(e.TK)},function(t,e){return e.ao.priority-t.ao.priority},function(t,e){return t.ao.id>e.ao.id?1:t.ao.id<e.ao.id?-1:0})),n.lZa(t),n}_esm(e),e.kga=e.vU=void 0,n=i(0),r=i(12),s=i(19),a=i(265),u=i(2),o=i(10),c=i(988),h=n.__importDefault(i(3)),f=i(187),l=i(989),d=i(990),p=i(160),Object.defineProperties(v.prototype,{CL:{get(){return this.kna},configurable:!0},Xcb:{get(){return this.Ezb},configurable:!0},GLb:{get(){return this.Cxb},configurable:!0},MBa:{get(){return this.sBb},configurable:!0}}),v.prototype.set=function(t,e,i){this.Cxb=e===g.YQ?0:h.default.time.ia(),this.Ezb=t,this.sBb=e,o.S&&u.assert(!this.kna,"Invalid replacement of timeout value"),this.kna=i},v.prototype.complete=function(){this.kna=void 0,this.set(s.M.Uv,g.YQ)},b=v,(i=g=g||{})[i.YQ=0]="none",i[i.ecb=1]="microTask",i[i.setTimeout=2]="setTimeout",m=r.EventEmitter,n.__extends(y,m),Object.defineProperties(y.prototype,{Pbc:{get(){return this.Da.gk},configurable:!0}}),y.prototype.F1a=function(t,e){return(t=new(t.bind.apply(t,n.__spreadArray([void 0],n.__read(e),!1)))).id=this.Czb++,t.AEb(this),this.Tna(t),t},y.prototype.iB=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.F1a(l.NLa,t)},y.prototype.lSb=function(){var t={hasSchedule:!!this.xl.CL,schedule:this.xl.CL&&{sleepTime:this.xl.CL.u2a,originalSleepTime:this.xl.CL.S4b,clockSkewAdjustments:this.xl.CL.wdb},nextWakeup:this.xl.Xcb.W,timeScheduled:this.xl.GLb,scheduleType:g[this.xl.MBa],numTasks:this.fm.length,clock:{ir:this.Da.gk,ct:this.Da.currentTime.W,sp:this.Da.speed}};return o.S&&this.trace("audit",t),t},y.prototype.GO=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.F1a(d.xSa,t)},y.prototype.n1a=function(e,i,t){return this.iB(function(){return n.__generator(this,function(t){switch(t.label){case 0:return[4,p.Oh.GG(i)];case 1:return t.ib(),e(),[3,0];case 2:return[2]}})},t)},y.prototype.lZa=function(t){var e=this;this.yE(),this.VE.clear(),this.Da=t,this.VE.on(t,"stopStart",function(){return e.AR()}),this.VE.on(t,"clockAdjusted",function(){return e.n_()}),this.VE.on(t,"speedChanged",function(){return e.F4b()}),this.n_(),this.emit("clockChanged")},y.prototype.F4b=function(){this.yE(),this.AR()},y.prototype.tb=function(){this.reset()},y.prototype.reset=function(){this.yE(),this.fm.clear()},y.prototype.n_=function(){var e=this,t=this.fm.map(function(t){return t.ao});this.yE(),this.fm.clear(),t.forEach(function(t){return e.Tna(t,!1)}),this.AR()},y.prototype.Tna=function(t,e){var i,n;void 0===e&&(e=!0),i=t.Cca(),i={ao:t,TK:n=this.hlb(i),hea:i},o.S&&this.trace("Adding task ".concat(t.name," for ").concat(n.W)),u.assert(!this.fm.contains(i)),this.fm.push(i),e&&this.AR()},y.prototype.AR=function(){var t,e,i,n,r=this;o.S&&this.trace("recheck schedule task count:"+this.fm.length),this.Pbc?this.jma?o.S&&this.trace("already executing, bailing"):(e=this.xl.Xcb,(n=null!=(t=null==(i=this.fm.My())?void 0:i.TK)?t:s.M.Uv).isFinite()&&n.yya(e)?(this.yE(!1),this.Da.currentTime.zj(n)?(this.xl.set(n,g.ecb),Promise.resolve().then(function(){r.xl.MBa===g.ecb&&(r.xl.complete(),r.Khb())})):(o.S&&this.trace("scheduling next wake up for",{ttc:n.W,ao:null==i?void 0:i.ao.name}),t=function t(e,i,n,r){var a,o;return u.assert(e.gk,"Current time: ".concat(h.default.time.ia()," cr: ").concat(e.currentTime)),u.assert(e.currentTime.isFinite()),a=n.Ea(e.currentTime),a=Math.max(Math.ceil(a.DK/e.speed),0),(o=null!=r?r:{id:void 0,u2a:a,wdb:0,S4b:a}).id=setTimeout(function(){n.Ea(e.currentTime).BF(s.M.Ka)?i():(o.wdb++,t(e,i,n,o))},a),o.u2a=a,o}(this.Da,function(){r.xl.complete(),r.Khb()},n),this.xl.set(n,g.setTimeout,t))):n.isFinite()||this.xl.MBa!==g.setTimeout||this.yE(!1)):(o.S&&this.trace("should check schedule is false, stopping"),this.yE())},y.prototype.Khb=function(){var t=0,e=null==(e=this.fm.My())?void 0:e.hea;try{for(this.jma=!0;t++<1e4&&this.dfc(););}finally{this.jma=!1,this.yE(),1e4<t&&!this.EWb(e)?this.error("Task scheduler executed more than ".concat(1e4)+" iterations in same tick"):(this.trace("Next tasks",this.fm.map(function(t){return{name:t.ao.name,utc:t.TK.W}})),this.AR())}},y.prototype.EWb=function(t){var e=null==(e=this.fm.My())?void 0:e.hea;return!(t&&e&&t.timestamp.equal(e.timestamp)&&t.type===e.type)},y.prototype.dfc=function(){var t,e,i=null!=(e=null==(t=this.fm.My())?void 0:t.TK)?e:s.M.Uv;if(o.S&&this.trace("tryExecuteNextTask @".concat(this.Da.currentTime.W,", next wakeup at ").concat(i)),this.Da.currentTime.zj(i)&&(t=this.fm.pop())){e=t.ao,o.S&&this.trace("Running a task @"+this.Da.currentTime.W+", scheduled for time:"+i.W+"Name:".concat(e.name));try{e.dz(),t.hea=e.Cca(),t.TK=this.hlb(t.hea)}catch(t){throw this.error("Unhandled error from a task ".concat(e.name," occurred.")+" Removing the task from future executions:"+t,{stack:t.stack}),e.tb(),t}finally{t.TK!==s.M.Uv&&e.state===f.lo.uea&&(u.assert(!this.fm.contains(t)),this.fm.push(t))}return!0}},y.prototype.Ahb=function(t){u.assert(t.$d===this),this.dea(t,!1),this.Tna(t)},y.prototype.dea=function(e,t){var i;void 0===t&&(t=!0),(i=this.fm.find(function(t){return t.ao===e}))&&this.B9b(i,t)},y.prototype.B9b=function(t,e){this.fm.remove(t),e&&this.AR()},y.prototype.yE=function(t){void 0===t&&(t=!0),this.xl.CL&&(t&&this.emit("stopping"),clearTimeout(this.xl.CL.id),this.xl.complete())},y.prototype.hlb=function(t){return t.type===p.uka.absolute?t.timestamp:t.timestamp.add(this.Da.currentTime)},y.prototype.trace=function(){for(var t,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];null!=(t=this.console)&&t.trace.apply(t,n.__spreadArray(["TaskScheduler(".concat(this.name,"):")],n.__read(e),!1))},y.prototype.error=function(){for(var t,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];null!=(t=this.console)&&t.error.apply(t,n.__spreadArray(["TaskScheduler(".concat(this.name,"):")],n.__read(e),!1))},e.vU=y,e.kga=function(e,i,t){var n=void 0;return(t||e.Da.gk)&&e.Da.currentTime.zj(i)?{promise:Promise.resolve()}:{promise:new Promise(function(t){n=e.GO(p.Oh.Rw(i),t)}),ao:n}}},function(t,e,i){var u,n,r;_esm(e),e.F0a=void 0,u=i(0),n=i(10),r=i(2),e.F0a=function(){for(var s=[],t=0;t<arguments.length;t++)s[t]=arguments[t];return n.S&&r.assert(s.length),function(t,e){var i,n;try{for(var r=u.__values(s),a=r.next();!a.done;a=r.next())if(0!==(n=(0,a.value)(t,e)))return n}catch(t){var o={error:t}}finally{try{a&&!a.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return 0}}},function(t,e,i){var n,r,a,o,s,u;function c(t,e,i){return(e=u.call(this,e,i)||this).X$b=t,e.reset(),e}_esm(e),e.NLa=void 0,n=i(0),r=i(19),a=i(2),i(131),o=i(187),s=i(160),u=o.Lka,n.__extends(c,u),c.prototype.reset=function(){var t,e;this.Qc!==o.lo.uea&&this.Qc!==o.lo.pending||null!=(e=null==(t=this.dN)?void 0:t.return)&&e.call(t),this.Qc=o.lo.pending,this.dN=this.X$b(),this.zma=s.Oh.GG(r.M.Ka)},c.prototype.ij=function(){this.reset(),a.assert(this.sr),this.sr.Ahb(this)},c.prototype.Cca=function(){return this.zma},c.prototype.Pf=function(){var t,e,i=null!=(i=null==(i=this.dN)?void 0:i.next())?i:{done:!0};i.done?(this.zma=s.Oh.UEa,null!=(e=(t=this.dN).return)&&e.call(t),this.dN=void 0):this.zma=i.value},c.prototype.tb=function(){var t,e;null!=(e=null==(t=this.dN)?void 0:t.return)&&e.call(t),this.dN=void 0,u.prototype.tb.call(this)},e.NLa=c},function(t,e,i){var n,r,a,o;function s(t,e,i){return(i=o.call(this,i)||this).PBa=t,i.tO=e,i}_esm(e),e.xSa=void 0,n=i(0),r=i(187),a=i(160),o=r.Lka,n.__extends(s,o),s.prototype.Cca=function(){return this.Qc===r.lo.pending?this.PBa:a.Oh.UEa},s.prototype.Pf=function(){this.tO()},e.xSa=s},function(t,e,i){var n,r;function a(t){this.U6=[],this.U6[n.default.Sd.J]=new r.default(t,n.default.Sd.J),this.U6[n.default.Sd.P]=new r.default(t,n.default.Sd.P)}_esm(e),e.DRa=void 0,t=i(0),n=t.__importDefault(i(28)),r=t.__importDefault(i(437)),a.prototype.pDb=function(t,e,i){this.U6[t].add(e,i)},a.prototype.pua=function(){var i=[];return this.U6.forEach(function(t){var e;t&&((e=t.get())&&0<e.length&&e.forEach(function(t){i.push(t)}),t.reset(!0))}),i},a.prototype.pQb=function(t){var e=this.pua();return 0<(t.strmsel=e).length},e.DRa=i=a},function(t,e){_esm(e),e.w6a=void 0,e.w6a=function(t){var e=Math.floor(1e6*Math.random()),i=t.Xua,n=t.laa;return{zt:t=0==e%t.Yua&&0<n.length,vX:t&&0==e%i}}},function(t,e){_esm(e),e.U0a=void 0,e.U0a=function(t,i){var n;return Array.isArray(t.R0a)?(n=t.si?t.si():Object.create(t),t.R0a.forEach(function(t){if(void 0!==t.j2b&&i.duration>=t.j2b&&t.config)for(var e in t.config)n[e]=t.config[e]}),n):t}},function(t,e,i){var r,u,c;_esm(e),e.CIa=void 0,r=i(0).__importStar(i(11)),u=i(118),c=i(2),t=function(){for(var t=2;7!==t;)switch(t){case 8:return e;case 2:e.prototype.xxb=function(t,e){for(var i=2;8!==i;)switch(i){case 2:var n=this,r=this.rn.K;0===this.aI&&this.rn.Jb.Ym("createDlTracksStart"),this.aI+=t.length,i=4;break;case 4:return t=t.map(function(t){return n.OUa(t,e.L,e.ty(),n.rn.Vm,r)}),u.zp.instance.Pf(),t}},e.prototype.Lxb=function(){for(var i,n,t=2;3!==t;)2===t&&(n=[],(i=this).rn.Hb.bg.forEach(function(t){for(var e=2;5!==e;)2===e&&(r.sa(t.Te)||n.push(t.Te),t.Te=void 0,e=5)}),this.rn.ZU&&(n.push(this.rn.ZU),this.rn.ZU=void 0),n.forEach(function(t){for(var e=2;5!==e;)switch(e){case 2:t.Al||--i.aI,e=1;break;case 1:u.zp.instance.SO(t),e=5}}),t=3)},e.prototype.Lyb=function(){for(var t=2;1!==t;)switch(t){case 4:this.aI=5,t=9;break;case 2:this.aI=0,t=1}},e.prototype.cXa=function(t,e){for(var i,n,r=2;5!==r;)2===r&&((n=(i=this.rn.Hb.bg[t]).Te)&&(n=e.ON(t,n),this.Kxb(t),i.Te=this.OUa(t,e.L,e.ty(),this.rn.Vm,this.rn.K),e.uBa(n)),r=5)},t=3;break;case 3:e.prototype.OUa=function(t,e,i,n,r){for(var a=2;6!==a;)switch(a){case 2:var o,s=this;(o=u.zp.instance.vt(t,e,!0,i,n,r)).Ah.on(o,"created",function(){for(var t=2;5!==t;)2===t&&(--s.aI,0===s.aI&&s.rn.Jb.Ym("createDlTracksEnd"),t=5)}),o.Ah.on(o,"networkfailing",function(){for(var t,e=2;8!==e;)switch(e){case 5:c.assert(o.GX),(t=s.rn.df.T).Kr.cu(void 0,o.GX,void 0,o.qg,o.zi),e=9;break;case 2:r.Zi&&s.Qi.Kn("reportNetworkFailing: "+o),e=1;break;case 1:e=o.A9?5:8;break;case 9:t.bm(),e=8}}),o.Ah.on(o,"error",function(){for(var t=2;5!==t;)2===t&&(r.Zi&&s.Qi.Kn("DownloadTrack fatal error"),s.rn.nr("DownloadTrack fatal error",void 0,"NFErr_MC_StreamingFailure",o.qg,0,o.zi),t=5)}),o.on("transportreport",function(t){for(var e=2;1!==e;)switch(e){case 4:s.rn.emit("",t),e=0;break;case 2:s.rn.emit("transportreport",t),e=1}}),a=9;break;case 9:return o.on("mediaRequestComplete",function(t){for(var e=2;1!==e;)switch(e){case 2:s.rn.emit("mediaRequestComplete",t),e=1;break;case 4:s.rn.emit("",t),e=0}}),o.xa(),o}},e.prototype.Kxb=function(t){for(var e,i=2;9!==i;)switch(i){case 3:t.Te=void 0,i=9;break;case 12:t.Te=7,i=2;break;case 2:(e=(t=this.rn.Hb.bg[t]).Te).Al||--this.aI,u.zp.instance.SO(e),i=3}},t=8}function e(t,e,i){for(var n=2;3!==n;)2===n&&(this.rn=t,this.H=e,this.Qi=i,n=3)}}(),e.CIa=t},function(t,e,i){var n,r;function a(t){this.GI=t,this.state=new r.Ls(n.za.Dg),this.hk={}}_esm(e),e.WFa=void 0,n=i(6),r=i(8),a.prototype.getState=function(){return this.state.value},a.prototype.Jd=function(t){this.state.set(t)},a.prototype.addListener=function(t){this.state.addListener(t)},a.prototype.paused=function(){this.state.value===n.za.Gc&&this.state.set(n.za.Ug)},a.prototype.p$a=function(){return this.state.value===n.za.Dg},a.prototype.Wr=function(){return"function"==typeof this.GI.Wr?this.GI.Wr():this.state.value===n.za.Gc},a.prototype.Gf=function(){return this.state.value===n.za.ed||this.state.value===n.za.eg},a.prototype.q$a=function(){return this.state.value===n.za.Uj},a.prototype.r$a=function(){return this.state.value===n.za.Ns},a.prototype.Qe=function(){return this.GI.Qe()},a.prototype.pq=function(){return"function"==typeof this.GI.pq?this.GI.pq():1},a.prototype.pY=function(){return this.GI.pY()},a.prototype.ZR=function(t,e){this.hk[t]=e},a.prototype.Yo=function(t){return!!this.hk[t.L]||t.Yi},e.WFa=a},function(t,e,i){var n;function r(t,e,i){this.nEb=t,this.Ama=e,this.Dxb=i,this.Qla=((t={})[n.u.P]=!1,t[n.u.J]=!1,t[n.u.Ob]=!1,t),this.reset()}_esm(e),e.xQa=void 0,n=i(6),r.prototype.ZA=function(){var e=this,t=this.nEb.filter(function(t){return!t.O9a(e.Dxb())});0===t.length&&this.nma?this.Lzb():t.forEach(function(t){e.Qla[t.mediaType]||(t.once("requestAppended",function(){e.Qla[t.mediaType]=!1,e.ZA()}),e.Qla[t.mediaType]=!0)})},r.prototype.reset=function(){var e=this;this.nma=!1,new Promise(function(t){e.Lzb=t}).then(function(){return e.Ama()})},r.prototype.T0b=function(){this.nma||(this.nma=!0,this.ZA())},e.xQa=r},function(t,e,i){var n;function r(t){this.console=t,this.XH=[],this.SD=[],n.S&&this.console.trace("Received pending adoption ".concat(this.Em.length))}_esm(e),e.FFa=void 0,n=i(10),Object.defineProperties(r.prototype,{length:{get(){return this.XH.length},configurable:!0},Em:{get(){return this.SD},configurable:!0}}),r.prototype.Q0b=function(t){-1!==(t=this.SD.indexOf(t))&&(n.S&&this.console.trace("Marking request attached"),this.XH[t].J9a=!0,this.Hlb(t))},r.prototype.R0b=function(t){-1!==(t=this.SD.indexOf(t))&&(n.S&&this.console.trace("Marking request completed"),this.XH[t].It=!0,this.Hlb(t))},r.prototype.D9b=function(i){var e=this,n=[];this.SD.forEach(function(t,e){i(t)&&n.unshift(e)}),n.forEach(function(t){e.SD.splice(t,1),e.XH.splice(t,1)})},r.prototype.push=function(t){this.SD.push(t),this.XH.push({J9a:!1,It:!1}),n.S&&this.console.trace("Pushing pending request, ".concat(this.length," total"))},r.prototype.kF=function(){return 0<this.length},r.prototype.Hlb=function(t){var e=this.XH[t];e.J9a&&e.It&&(e=this.SD[t],this.SD.splice(t,1),this.XH.splice(t,1),n.S&&this.console.trace("Removing request, ".concat(this.length," left")),0===this.length&&n.S&&this.console.trace("Removing last request, contentEndPts: ".concat(e.Ic)))},e.FFa=r},function(t,e,i){var n,r,a,o,g,s,m,v,u,y,c,w;function h(t,e){return(t.mediaType===o.u.J?0:1)-(e.mediaType===o.u.J?0:1)}function f(){return null!==c&&c.apply(this,arguments)||this}function l(t,e,i,n,r,a,o,s,u,c,h,f,l,d,p,b){return(r=w.call(this)||this).Isc=t,r.K=e,r.T=n,r.Tp=a,r.x$=o,r.er=c,r.WU=h,r.qj=l,r.iA=d,r.events=p,r.Fx=b,r.Ae=new y([]),r.Um=!1,r.fV=0,r.HU=r.Nya.bind(r),t=a.id&&a.id.length?"{"+a.id+"}":"",r.H=g.ai(v.default,i,t),r.Ik=r.H.error.bind(r.H),r.Qb=r.H.warn.bind(r.H),r.Xj=r.H.trace.bind(r.H),r.Gn=null!=u?u:m.M.Ja(r.G.ea),r.Jma=null==f?void 0:f.Mc,null!=(e=r.iA)&&e.addListener(r.HU),n&&s&&r.$Xb(n,s),r}_esm(e),e.ZLa=e.Ija=e.$ub=void 0,n=i(0),r=i(89),a=i(131),o=i(6),g=i(8),s=i(2),m=i(19),v=n.__importDefault(i(3)),t=i(78),u=i(36),c=i(267).qM,n.__extends(f,c),y=f,e.$ub=y,e.Ija={CG:h},w=r.Uw,n.__extends(l,w),Object.defineProperties(l.prototype,{Mf:{get(){return this.Um},configurable:!0},G:{get(){return this.Tp},configurable:!0},Zv:{get(){return this.Ae.every(function(t){return t.Zv})},configurable:!0},vj:{get(){return this.Ae.every(function(t){return t.vj})},configurable:!0},Zs:{get(){return this.sm().reduce(function(t,e){return t+e.Zs},0)},configurable:!0},yh:{get(){return this.sm().every(function(t){return t.yh()})},configurable:!0},we:{get(){return this.sm().map(function(t){return t.track})},configurable:!0},aa:{get(){return this.Xu.aa},configurable:!0},Za:{get(){return this.Xu.Za},configurable:!0},mb:{get(){return this.Xu.mb},configurable:!0},Lj:{get(){return this.Dd.Rg(this.aa).fb},configurable:!0},Ht:{get(){return this.Gn.add(this.Dd)},configurable:!0},Cq:{get(){return this.G.kf.add(this.Dd)},configurable:!0},sC:{get(){return this.G.Lg.add(this.Dd)},configurable:!0},eJ:{get(){var t=null==(t=this.G.G.lq)?void 0:t[0];return t&&this.ec?m.M.Ja(Math.max(0,t[0]-this.ec.W-this.G.kf.W)):void 0},configurable:!0},sZ:{get(){return this.Ae.reduce(function(t,e){return t&&e.Mc?m.M.max(t,e.Mc):e.Mc||t},void 0)},configurable:!0},Bva:{get(){return this.Ht.W},configurable:!0},bf:{get(){return this.Dd.W},configurable:!0},Oq:{get(){return this.Xu.Oq},configurable:!0},Dd:{get(){return this.er},configurable:!0}}),l.prototype.Qq=function(t){this.Dd.equal(t)||(this.er=t)},l.prototype.ky=function(t){return(t=this.ab(t))?Promise.resolve(t.ky()):Promise.resolve(a.AsyncIterator.e6a())},l.prototype.RE=function(){this.sm().forEach(function(t){return t.RE()})},l.prototype.reset=function(){this.Ae.forEach(function(t){t.reset()})},l.prototype.xd=function(){var t;this.Um||(this.Um=!0,null!=(t=this.VD)&&t.cd(),this.VD=void 0,this.Ae.forEach(function(t){t.xd()}),null!=(t=this.iA)&&t.removeListener(this.HU),this.events.removeAllListeners())},l.prototype.eQ=function(){return!0},l.prototype.ab=function(t){return this.Ae.get(t)},l.prototype.sm=function(t){return void 0===t&&(t=h),this.Ae.items.slice().sort(t)},l.prototype.rY=function(){return this.Ae.items},l.prototype.sJ=function(t){return this.ab(t)},l.prototype.xh=function(t,e){return(t=this.ab(t))?e?t.Tn:void 0===(e=t.Er)?0:e-(t=this.WU()):0},l.prototype.yB=function(){var t,e=null==(i=this.ab(o.u.P))?void 0:i.Fo,i=null==(t=this.ab(o.u.J))?void 0:t.Fo;return{wp:null!=(t=null==i?void 0:i.W)?t:0,Xs:null!=(t=null==e?void 0:e.W)?t:0,xu:null!=(t=null==i?void 0:i.fa)?t:0,gE:null!=(i=null==e?void 0:e.fa)?i:0}},l.prototype.PP=function(t){return(t=this.ab(t))&&null!=(t=t.Er)?t:0},l.prototype.bm=function(t){return t=this.ab(t),s.assert(t),t.bm()},l.prototype.Nya=function(t){t=t.newValue,o.tq(t)&&this.Us()},l.prototype.BE=function(e){return this.Ae.every(function(t){return t.BE(e)})},l.prototype.dY=function(t){return null!=(t=null==(t=this.Ae.get(t))?void 0:t.N1a)?t:m.M.Ka},l.prototype.gl=function(t){this.Um||(t.q7||s.assert(!t.Cc),this.Us(),this.vj&&this.Gma()),this.Gv(t)},l.prototype.qK=function(t){this.K.m9&&this.Us(!0),this.hJ(t)},l.prototype.pK=function(t){this.K.m9&&this.Us(!0),this.ZE(t)},l.prototype.FCa=function(t){var e;return o.tq((null==(e=this.iA)?void 0:e.value)||o.Nc.Vj)&&(!t||this.fV+this.K.hca<v.default.time.ia())},l.prototype.Us=function(t){this.FCa(t=void 0===t?!1:t)&&(this.fV=v.default.time.ia(),this.events.emit((t={type:"checkBufferingProgress"}).type,t))},l.prototype.Gma=function(){var t={type:"branchStreamingComplete"};this.events.emit(t.type,t)},l.prototype.$Xb=function(t,e){this.wCa(t),s.assert(t.N===this.G.N||isNaN(t.N)&&isNaN(this.G.N)),t=null!=e?e:null==(e=this.x$)?void 0:e.call(this,t),s.assert(t,"tracks need to exist upon initialization")},l.prototype.toJSON=function(){var t;return{segment:this.G.id,branchOffset:this.bf,viewableId:this.Tp.N,contentStartPts:null==(t=this.ec)?void 0:t.W,contentEndPts:null==(t=this.Ed)?void 0:t.W}},e.ZLa=i=l,u.Ve(t.Au,i),u.Ve(t.Dz,i)},function(t,e,i){var n,u,c,a,h,o,s,f;function r(t,e,i,n,r){this.Tt=t,this.yt=e,this.K=i,this.H=n,this.Zg=r}_esm(e),e.RPa=void 0,n=(t=i(0)).__importDefault(i(28)),u=n.default.Sd,c=n.default.nx,a=i(6),h=i(8),o=i(19),s=t.__importDefault(i(155)),f=t.__importDefault(i(3)),r.prototype.j3b=function(t){h.gb(this.yt,(t={type:"requestCreated",request:t}).type,t)},r.prototype.i3b=function(t){var e=t.Va.$a.G;t={type:"updateStreamingPts",mediaType:t.mediaType,position:{X:e.id,offset:o.M.Ja(this.Tt.eqa-e.ea)},completePlayerStreamingTimestamp:o.M.Ja(this.Tt.Er),trackIndex:t.stream.track.IA},h.gb(this.yt,t.type,t)},r.prototype.sdb=function(t,e,i){var n=this.Zg,r=this.Tt.Pj.ve;r.Sib(t),n===a.u.J&&this.K.Bea&&(void 0===r.Fwa?r.Uib(f.default.time.ia()):f.default.time.ia()-r.Fwa>this.K.Bea&&(t.bitrate!==r.cab&&(f.default.storage.set("vb",t.bitrate),r.sbc(t.bitrate)),r.Uib(f.default.time.ia()))),r.pZ&&r.pZ===t||(this.Tt.Pj.$cc(e,r.pZ,t),r.gbc(t),e=0,t.Lb&&t.Lb.confidence&&t.Lb.Xa&&(e=t.Lb.Xa.ta),r={X:this.Tt.$a.G.id,offset:o.M.Ja(i-this.Tt.$a.G.ea)},t={type:"streamSelected",nativetime:f.default.time.ia(),mediaType:n,streamId:t.id,manifestIndex:t.T.Ub,trackIndex:t.track.IA,streamIndex:t.cg,movieTime:i,bandwidth:e,longtermBw:e,rebuffer:0,position:r,stream:t,manifest:null==(n=t.T)?void 0:n.ja},h.gb(this.yt,t.type,t))},r.prototype.e3b=function(t,e,i){var n=e.T,r=n.Jl,a=this.Tt.Pj.ve,o=(s=n.yZb(e)).pwa,s=s.zZb;i&&e.kc&&!a.qZ?(s=c.ox,e.ju=c.name[s],this.rdb(t,e.kc,e.ju,e.location,e.bitrate),a.qZ=e.kc):!i&&e.kc&&e.kc!==a.qZ&&(s=s?void 0===a.qZ?c.ox:r.UR===c.wja?c.Cvb:c.Yga:c.Bvb,e.ju=c.name[s],this.rdb(t,e.kc,e.ju,e.location,e.bitrate),a.qZ=e.kc),a.qQ||(s={type:"logdata",target:"startplay",fields:{}},this.Zg===u.P?s.fields.alocid=e.location:this.Zg===u.J&&(s.fields.locid=e.location),h.gb(this.yt,s.type,s)),i&&e.location&&!a.qQ?(s=c.ox,e.ju=c.name[s],this.pdb(n.Ub,t,e.location,e.Xwa,e.kc,e.dL,e.ju,e.Ty),a.qQ=e.location):!i&&e.location&&e.location!==a.qQ&&(s=o?void 0===a.qQ?c.ox:r.UR===c.wja?c.Vsb:c.Yga:c.Usb,e.ju=c.name[s],this.pdb(n.Ub,t,e.location,e.Xwa,e.kc,e.dL,e.ju,e.Ty),e.Ty=void 0,a.qQ=e.location),this.K.ww||(e.Y$a=e.location,e.aab=e.kc)},r.prototype.Jca=function(t){h.gb(this.yt,(t={type:"requestsPruned",requests:t}).type,t)},r.prototype.rdb=function(t,e,i,n,r){var a=this.Zg===u.J?"video":"audio",o=s.default.instance().get();t={type:"serverSwitch",segmentId:t,mediatype:a,server:e,reason:i,location:n,bitrate:r,confidence:o.confidence},o.confidence&&(t.throughput=o.Xa.ta),this.Tt.Pj.ve.qZ&&(t.oldserver=e),h.gb(this.yt,t.type,t)},r.prototype.pdb=function(t,e,i,n,r,a,o,s){t={type:"locationSelected",manifestIndex:t,segmentId:e,mediatype:this.Zg===u.J?"video":"audio",location:i,locationlv:n,serverid:r,servername:a,selreason:o,seldetail:s},h.gb(this.yt,"locationSelected",t)},r.prototype.Bma=function(t,e){e={type:"lastSegmentPts",segmentId:t.id,pts:Math.floor(e)},t.$F||h.gb(this.yt,e.type,e)},r.prototype.Kn=function(t){t={type:"managerdebugevent",message:"@"+f.default.time.ia()+", "+t},h.gb(this.yt,t.type,t)},r.prototype.tRb=function(t){h.gb(this.yt,"transportReport",t)},r.prototype.sRb=function(t){h.gb(this.yt,"mediaRequestComplete",t)},e.RPa=i=r},function(t,e,i){var n,r,a,d,p,o,s;function u(t,e,i,n){return s.call(this,t,e,i,n)||this}_esm(e),e.iOa=e.Grb=void 0,n=i(0),r=n.__importDefault(i(3)),a=i(77),d=i(10),p=i(1001),o=i(8),e.Grb=t=function(t,e,i,n){this.K=e,this.Tt=n,i=o.ai(r.default,i,n="["+t+"]"),this.qcb=t===a.u.J?e.nca:e.eca,n=r.default.oq()[t],this.MZ=t===a.u.J?e.q1b:e.Y0b,this.MZ=Math.min(e.g1b*n,this.MZ),d.S&&i.trace("This pipeline's buffer size ",n,this.MZ),this.jca=(t===a.u.J?e.gC:e.Gy)||e.jca,this.Mba=(t===a.u.J?e.p1b:e.X0b)||e.Mba,this.$na=e.$na},s=t,n.__extends(u,s),u.prototype.p6a=function(t,e,i,n){var r,a,o,s,u,c,h,f,l;if(void 0===i&&(i=!1),void 0===n&&(n=!1),o=this.Tt,s=t.T.ty(),h=e===(u=o.pd.index),!(f=e===(c=o.ue.index))||h&&o.pd.Ha?h?((l=t.i6a(o.pd)).aS(o.pd.RC),f&&(o.pd.Ha||o.ue.Ha)&&l.kj({start:null==(r=l.Ha)?void 0:r.start,end:null==(a=o.ue.Ha)?void 0:a.end})):l=t.Gl(e):(l=t.i6a(o.ue)).aS(o.ue.RC),l.UQ=e+1,(r=p.s7a(o,o.Fc))&&(d.S&&o.Xj("getFragmentForRequest pts:",o.Fc,"in region:",r,"previous region:",o.zwa),a=void 0===o.zwa||o.zwa!==r.region,p.h3a(o.H,l,r,{PYb:h,WYb:f,eZb:a})),f&&(l.lbb(),l.pbc(o.$a.G)),h&&l.yxa(!0),h=t.da.kL,!(l.UQ===e||null!=h&&h.U9a(e)||s||!this.$na&&l.Ha||i&&!(u+1<e)||n&&!(e<c-2)))for(i=n?c-1:c,++e;e<t.da.length&&e<i&&(l.fa<this.qcb||l.duration<this.jca)&&(1===l.stream.Mg.length||this.DGb(t,e))&&(n=t.Gl(e),null==h||!h.U9a(e))&&!p.T9a(o,n)&&!(l.duration+n.duration>this.Mba)&&!(l.fa+n.fa>this.MZ);++e)l.s7(n),l.UQ=e+1,d.S&&o.Xj("getFragmentForRequest: extended fragment startPts:",l.ea,"to duration:",l.duration,"size:",l.fa,"min request size:",this.qcb,"max request size:",this.MZ,"min request duration:",this.jca,"max request duration:",this.Mba,"edit:",l.Ha);return d.S&&o.Xj("getFragmentForRequest("+e+") returning:",l,"stream:",l.stream,"firstRequestInRegion:",l.Fsa,"lastRequestInRegion:",l.vy,"nextIndex:",l.UQ),l},u.prototype.DGb=function(t,e){return!t.Mg.some(function(t){return e===t.ee})},e.iOa=u},function(t,e,i){var n;_esm(e),e.h3a=e.RYb=e.T9a=e.s7a=void 0,n=i(22),e.s7a=function(t,e){if((t=t.$a.G.$y)&&0!==t.length)return n.Xc(t,function(t){return t.ec.W<=e&&e<t.Ed.W})},e.T9a=function(t,e){return e.index===t.pd.index||!(!(t=t.$a.G.$y)||0===t.length)&&t.some(function(t){return t=t.ec,e.ec.BF(t)&&t.lessThan(e.Ed)})},e.RYb=function(t,e){return e.index===t.ue.index||!(!(t=t.$a.G.$y)||0===t.length)&&t.some(function(t){return t=t.Ed,e.ec.lessThan(t)&&t.BF(e.Ed)})},e.h3a=function(t,e,i,n){var r,a,o,s,u;t=null==(r=e.Ha)?void 0:r.start,r=null==(a=e.Ha)?void 0:a.end,u=a=!1,(null!=n&&n.eZb||(null==n||!n.PYb)&&e.ec.lessThan(i.ec))&&((s=e.ssa(i.ec.W))&&(s=(null!=(o=null==(o=e.Ha)?void 0:o.start)?o:0)+s.jj,t=Math.max(null!=t?t:0,s)),s=i.ec.W,a=!0),null!=n&&n.WYb||!e.Ed.greaterThan(i.Ed)||((s=e.ssa(i.Ed.W))&&(s=(null!=(n=null==(o=e.Ha)?void 0:o.start)?n:0)+s.jj,r=Math.min(null!=r?r:1/0,s),e.UQ=e.index),s=i.Ed.W,u=!0),void 0===t&&void 0===r||(e.kj({start:t,end:r}),void 0!==s&&(!e.RC||s>e.RC)&&e.aS(s)),e.mbc(i.region,a,u)}},function(t,e,i){var n,u,s,r,c,h,f,l,d,a,o,p,b;function g(t,e,i,n,r,a,o,s){var u=b.call(this,t)||this;return u.K=e,u.H=i,u.gm=n,u.Kd=r,u.Zg=a,u.Vta=s,u.xmb=!0,u.Ne=new d.VL(u.H),u.Ik=u.H.error.bind(u.H),u.Qb=u.H.warn.bind(u.H),u.Xj=u.H.trace.bind(u.H),u.jXa(),u.kr=null==o?void 0:o.iB(function(){return u.X9b()},"pruner"),u}_esm(e),e.JRa=void 0,n=i(0),u=n.__importStar(i(11)),s=i(268),r=i(1004),c=i(1007),h=i(1008),t=i(89),f=i(6),l=i(2),d=i(189),a=i(8),o=i(64),p=i(130),b=t.Uw,n.__extends(g,b),Object.defineProperties(g.prototype,{console:{get(){return this.H},configurable:!0},mediaType:{get(){return this.Zg},configurable:!0},$a:{get(){return this.Kd},configurable:!0},lz:{get(){return 0<this.EC},configurable:!0},dDa:{get(){return!this.hN},configurable:!0},EC:{get(){return this.Ma.length},configurable:!0},uu:{get(){return this.Ma.uu},configurable:!0},h8b:{get(){return this.Ne.count},configurable:!0},WN:{get(){return this.Ne.It},configurable:!0},KW:{get(){return this.Ma.complete.Mc},configurable:!0},Er:{get(){return this.Ma.B0a},configurable:!0},eqa:{get(){return this.Ma.A0a},configurable:!0},PC:{get(){return this.Ma.Mc},configurable:!0},Tn:{get(){return void 0===this.Ma.ud?0:this.Ma.gf-this.Ma.ud},configurable:!0},Fo:{get(){return{fa:this.Ma.AE,W:Math.max(this.Ma.B0a-this.Ma.ud,0)||0}},configurable:!0},CO:{get(){return this.Ma.lIb},configurable:!0},AE:{get(){return this.Ma.AE},configurable:!0},Zs:{get(){return this.Ma.fa},configurable:!0},TF:{get(){return this.qyb()},configurable:!0},pza:{get(){return this.Ma.IXb},configurable:!0},daa:{get(){return this.Ma.length>this.Ma.uu},configurable:!0},tj:{get(){return this.Ma.tj},configurable:!0},f_b:{get(){return this.Ma.F5b},configurable:!0},S$a:{get(){return this.WVa},configurable:!0},Geb:{get(){return this.Ma.length-this.Xm},configurable:!0},da:{get(){return this.Ma},configurable:!0}}),g.prototype.xd=function(){var t,e=this.Ma;setTimeout(function(){e.forEach(function(t){t.abort(),t.cd()})},1),this.jXa(),this.Ne.jP(),null!=(t=this.kr)&&t.tb()},g.prototype.reset=function(){this.xd(),this.Ne.shb()},g.prototype.close=function(){this.Ne.jP()},g.prototype.sib=function(){this.xUa=!0},g.prototype.aua=function(){return{endMarked:void 0!==this.Ne.count,queueCount:this.Ne.count,isComplete:this.Ne.It,itemCount:this.Ne.C0a,continuousEndPts:this.Ne.co().reduce(function(t,e){return e&&!e.done&&(e=e.value,Math.abs(e.Psa-t)<100||-1===t)?e.uRb:t},-1),sentinelItemCount:this.Ne.co().filter(function(t){return t&&t.done}).length,processedCount:this.Ne.TMb,rc:this.EC}},g.prototype.x1a=function(t,e,i){var n,r,a,o=this.K;return l.assert(!t.header),i.ub&&(this.K.tkb?i.mediaType===f.u.J&&void 0!==(a=(r=this.Kd).P7a())&&(n=new c.XFa(i,o,e.track,r.u1.track,t,this.Ma,this.H,a)):n=new h.$Fa(i,o,e.track,t,this.Ma,this.H)),(n=n||s.z2.create(i,o,e.track,t,this.Ma,!1,this.H,this.Vta)).xa(this),this.bv(n),n},g.prototype.IDb=function(t){var e;return t.xa(this),t.q7=!0,this.bv(t),e=Promise.resolve(),t.complete?(this.sla(t),this.gm.sdb(t.stream,t.ud,t.dd),e=this.Lfa(),this.Gv(t)):(t.active&&this.xP(t),t.KAa&&this.ZE(t)),e},g.prototype.bv=function(t){var e;this.Ma.Xo(t),(null==(e=this.kr)?void 0:e.state)===o.lo.complete&&null!=(e=this.kr)&&e.ij(),this.sla(t),t.$o&&(this.hN=!1)},g.prototype.ky=function(){return this.Ne.bta()},g.prototype.xpa=function(){this.Xm===this.Ma.length&&this.xUa&&this.Ne.jP()},g.prototype.Lfa=function(){var e,t,i=this,n=Promise.resolve(),r=this.Kd;if(!r.eQ(this.Zg)||this.Xm===this.Ma.length)return n;for(var a=this.K.j1b,o=0,s=[];this.Xm<this.Ma.length;){if(e=this.Ma.get(this.Xm)){if(this.Ma.J4a&&this.Ma.J4a.Za<e.Za)break;if(!e.Tr())break;s.push(e),++o,u.Oa(this.ud)||(this.ud=e.ud)}if(++this.Xm,!u.sa(a)&&a<=o)break}if(s.length){if(void 0!==this.Ne.count&&(this.Ik("tryToAtach() but requestQueue has sentinel:",this.Ne.count),this.Ne.shb()),this.xmb)n=Promise.all(s.map(function(t){return i.Ne.enqueue(t).then(function(){return i.X$(t)})}));else for(e=0;e<s.length;e++)try{t=s[e],r.BUb(this.mediaType).oNb(t),this.X$(t)}catch(t){return this.Xm-=s.length-e,Promise.reject(t)}this.xpa()}return n},g.prototype.X$=function(t){this.WVa=t,this.S4a(t)},g.prototype.QV=function(e,t){var i,n=this,r=[];0!==this.Ma.uu&&(i=this.Ma.zeb,this.Ma.rfc.ZCa(function(t){return!!(!u.sa(e)&&t.T.Ub!==e||t.$o||i>t.ud)||(t.Dv&&(n.hN=!1),n.t5(t)?void r.unshift(t):(n.Qb("request abort failed:",t.toString()),!0))}),this.Rma(),r.length&&"function"==typeof t&&t(r))},g.prototype.v0=function(){this.Rma()},g.prototype.X9b=function(){var e,i;return n.__generator(this,function(t){switch(t.label){case 0:t.label=1;case 1:return this.Ma.length?(e=this.Ma.get(0),i=a.M.Ja(null!=(i=null==(i=this.K.dS)?void 0:i.W)?i:0),i=i.add(e.Mc),[4,o.Oh.Rw(i)]):[3,3];case 2:return(t.ib(),this.Ma.complete.length<=1&&!e.$o)?[3,3]:(l.assert(e===this.Ma.get(0)),e.me||this.t5(e),i=this.Ma.splice(0,1),0<this.Xm&&this.Xm--,this.gm.Jca(i),[3,1]);case 3:return[2]}})},g.prototype.f0=function(e,i){var t,n=this,r=this.K,a=!1,o=0,s=this.Ma.some(function(t){if(e<t.gf)return a&&n.sla(t),!0;++o,t.me||(n.Qb("pruning unappended request:",t&&t.toString()),r.Zi&&n.gm.Kn("prune pts:".concat(e," unappended request:").concat(t&&t.toString())),t.Dv&&(n.hN=!1,a=!0),n.t5(t,i)||n.Ik("MediaRequest.abort error:",t.qg))});return 0<o&&(t=this.Ma.splice(0,o),this.Xm-=Math.min(o,this.Xm),this.gm.Jca(t)),s},g.prototype.K$=function(t){var e,i,n;return void 0===t&&(t={LW:null,nR:null,ud:null,Gj:0,lp:0,Ag:0,da:[]}),e=this.K,i=this.Ma,u.Oa(i.ud)&&(null===t.ud||i.ud<t.ud)&&(t.ud=i.ud),void 0!==(n=this.Er)&&null===t.LW&&(t.LW=n),void 0!==(n=i.gf)&&(null===t.nR||n>t.nR)&&(t.nR=n),t.Gj+=i.Gj,t.lp+=i.lp,t.Ag=e.SCa?t.Ag+i.vgb:t.Ag+i.AE,Array.prototype.unshift.apply(t.da,i.ib.da),t},g.prototype.Cv=function(t){if(this.Ma.length&&(t=this.Ma.u4a(t)))return t},g.prototype.sCb=function(t){var e,i,n=t.Ed;return t=t.dd,l.assert(n,"expected contentEndTimestamp to be defined"),l.assert(void 0!==t,"expected contentStartPts to be defined"),t=this.Ma.osa(t),i=this.Ma.get(t),l.assert(i&&void 0!==i.dd&&void 0!==i.Ic&&void 0!==i.index,"expected existing request to be defined with properties"),null!=(e=i.Ed)&&e.equal(n)?(this.XXa(t),[i.Ic,i.index+1]):(this.XXa(t-1),[i.dd,i.index])},g.prototype.bm=function(){var i=this,n=[];return this.Ma.forEach(function(t){var e=t.zEa();1===e?n.push(t):2===e&&i.$a.T.Sf("swapUrl failure")}),n},g.prototype.pK=function(t){t.uF&&t.Tr()&&this.Lfa(),this.ZE(t)},g.prototype.gl=function(t){var e;t.uF&&!t.me&&this.Lfa(),(null==(e=this.kr)?void 0:e.state)===o.lo.complete&&null!=(e=this.kr)&&e.ij(),this.Gv(t)},g.prototype.doa=function(t){var e=this.Zg===f.u.J?"v_":"a_",i=this.Ma,n=i.uP(t);return t=0<=n?i.get(n):void 0,(i=0<=n&&n+1<i.length?i.get(n+1):void 0)&&t?t.gf!==i.ud?e+"rg":t.complete&&i.complete?e+"uk":e+"fd":e+"rm"},g.prototype.qyb=function(){return this.Ma.tj+this.Ma.uu},g.prototype.jXa=function(){var t,e=void 0!==this.Ma&&0<this.Ma.length,i=this.Ma;this.Ma=new r.UFa(this.H,this),this.Xm=0,this.Ne.clear(),this.WVa=void 0,(this.ud=null)!=(t=this.kr)&&t.ij(),this.xUa=this.hN=!1,e&&(t=i.map(function(t){return t}),this.gm.Jca(t))},g.prototype.sla=function(t){this.hN?t.Dv&&t.yxa(!1):(t.Dv||t.yxa(!0),this.hN=!0)},g.prototype.XXa=function(t){var e;for(t+=1;t<this.EC;t++)e=this.Ma.get(t),l.assert(e,"expected request to exist"),this.Ne.remove(e),e.aborted||(this.t5(e),e.cd());this.Rma()},g.prototype.t5=function(t,e){return!!t.abort()&&("function"==typeof e&&e(t),!0)},g.prototype.Rma=function(){var t,i,n,r=this;0!==this.Ma.length&&(i=[],n=0,this.Ma.Z7b(function(t,e){e<r.Xm&&++n,i.push(t)}),this.Xm-=n,null!=(t=this.kr)&&t.ij(),this.gm.Jca(i))},i=n.__decorate([p.kJ],g),e.JRa=i},function(t,e,i){var n,c,h,f,l,r,d,p,b,g,m;function a(t,e,i,n,r,a,o,s){var u;return n=m.call(this,t,i,n,a,o,s)||this,r=d.yk.prototype.toString.call(n)+(r?"(cache)":""),s={offset:i.offset,fa:i.jya+8,responseType:0},n.push(new p.TL(t,e,r+"(moof)",s,n,a,o)),s={offset:i.offset+s.fa,fa:i.fa-s.fa,responseType:g.Rc&&!g.Rc.D0.sU?0:1},n.mediaType===h.default.Sd.J&&n.Ha&&(0<n.Ha.start&&(u=n.z4a(n.Ha.start))&&(s.offset=i.offset+u,s.fa=i.fa-u),n.Ha.end<n.gy&&(u=n.z4a(n.Ha.end))&&(s.fa-=i.fa-u)),n.push(new p.TL(t,e,r+"(mdat)",s,n,a,o)),n}_esm(e),e.RFa=void 0,n=i(0),c=i(72),h=n.__importDefault(i(28)),t=n.__importDefault(i(3)),f=i(8),l=i(2),r=i(188),d=i(74),p=i(185),b=i(106),g=t.default.Ks,m=r.Cz,n.__extends(a,m),a.prototype.Tr=function(){return!this.me&&!!this.Ma.length&&this.Ma.every(function(t){return t.Tr()})},a.prototype.jE=function(t,e){var i,n,r,a,o,s,u;return this.me?{status:b.Kh.Fs}:this.Tr()?(t=!1,n=(i=this.Ma[0].response).slice(0,i.byteLength-8),i=(r=new DataView(i)).getUint32(n.byteLength),l.assert("mdat"===c.GH(r.getUint32(n.byteLength+4))),a=this.Ha&&0<this.Ha.start,r=this.Ha&&this.Ha.end<this.gy,this.Ha&&(a||r)?(a&&(s=(o=new c.dx(this.H,this.stream,n)).Ogb(this.Ha.start,this.aa)),r&&!1!==s&&(u=(o=new c.dx(this.H,this.stream,s?f.st(s.ya):n)).XAa(this.Ha.end-this.Ha.start,this.aa)),(o=r?u:s)&&(t=e.appendBuffer(f.st(o.ya),f.$v(this)),s&&(l.assert(void 0!==s.ns),l.assert(void 0!==s.FR),i-=s.ns),u&&(l.assert(void 0!==u.ns),l.assert(void 0!==u.FR),i-=u.ns,s&&l.assert(void 0!==s.ns))),o=this.dBa()):t=e.appendBuffer(n,f.$v(this)),(t=t&&e.appendBuffer(c.AQ(i-8),f.$v(this)))&&(t=e.appendBuffer(this.Ma[1].response,f.$v(this))),this.me=t,this.m9b(),{status:t?b.Kh.Fs:b.Kh.Jf,ik:o}):{status:b.Kh.Jf}},a.prototype.toString=function(){return"ID: "+this.Vh()+":"+m.prototype.toString.call(this)},e.RFa=i=a},function(t,e,i){var r,n,a,o,s,u,c;function h(t,e){var i=this,n=[new a.y2(t),new a.y2(t),new a.y2(t)],i=c.call(this,n,function(t){return t.complete?i.empty||t.Za<=i.mIb?0:1:t.active?1:2})||this,n=r.__read(n,3);return i.Mi=n[0],i.$e=n[1],i.Zu=n[2],i.mr=0,i.dla=0,i.H=t,i.ce=e,i}_esm(e),e.UFa=void 0,r=i(0),i(2),n=i(1005),t=i(36),a=i(1006),o=i(78),s=i(89),u=i(262),c=n.BHa,r.__extends(h,c),Object.defineProperties(h.prototype,{fa:{get(){return this.Mi.fa+this.$e.fa+this.Zu.fa},configurable:!0},rfc:{get(){return this.Zu},configurable:!0},active:{get(){return this.$e},configurable:!0},complete:{get(){return this.Mi},configurable:!0},vgb:{get(){return this.mr},configurable:!0},AE:{get(){return this.Mi.fa},configurable:!0},Gj:{get(){return this.Mi.fa+this.$e.fa-this.mr},configurable:!0},sfc:{get(){return this.Zu.fa},configurable:!0},lp:{get(){return this.fa-this.mr},configurable:!0},first:{get(){return this.JRb()},configurable:!0},In:{get(){return this.gFb()},configurable:!0},yra:{get(){return(!this.Mi.empty||this.Zu.empty||this.$e.empty?this:this.$e.Za<this.Zu.Za?this.$e:this.Zu).first},configurable:!0},gab:{get(){return(this.Zu.empty||this.$e.empty?this:this.$e.mb<this.Zu.mb?this.Zu:this.$e).In},configurable:!0},J4a:{get(){return this.Zu.first},configurable:!0},aa:{get(){return this.first&&this.first.aa},configurable:!0},Za:{get(){return this.yra&&this.yra.Za},configurable:!0},mb:{get(){return this.gab&&this.gab.mb},configurable:!0},Lj:{get(){return this.first&&this.first.Lj},configurable:!0},lIb:{get(){return this.Mi.duration},configurable:!0},IXb:{get(){return this.Ic-this.A0a||0},configurable:!0},mIb:{get(){return this.Mi.empty?this.Za:this.Mi.mb},configurable:!0},A0a:{get(){return this.Mi.empty?this.dd:this.Mi.Ic},configurable:!0},B0a:{get(){return this.Mi.empty?this.ud:this.Mi.gf},configurable:!0},F5b:{get(){return this.$e.In||this.Mi.In},configurable:!0},zeb:{get(){return this.$e.gf||this.Mi.gf},configurable:!0},uu:{get(){return this.Zu.length},configurable:!0},tj:{get(){return this.$e.length},configurable:!0},D0a:{get(){return this.Mi.length},configurable:!0},ib:{get(){return this.Mi.concat(this.$e)},configurable:!0},tt:{get(){return this.Xg},configurable:!0}}),h.prototype.MM=function(t){var e;t.aborted?++this.dla:this.mr+=t.bytesReceived||0,this.empty?this.Xg=new u.iD(this,{}):t.Za!==this.mb&&(t.Za>this.Xg.mb?this.Xg.S0(this.Xg.mb):(t.Za<this.Za||t.Za===this.Xg.mb)&&(e=t.mb,this.iRb(function(t,e){return t.Za-e.Za},function(t){e=t.Za===e?t.mb:e}),e===Math.max(this.mb,t.mb)?this.Xg.Opa():this.Xg.S0(e))),t.wCa(this)},h.prototype.yA=function(t){t.aborted?--this.dla:this.mr-=t.bytesReceived,this.empty?this.Xg=void 0:t.Za!==this.mb&&t.mb<=this.Xg.mb&&t.Za>this.Xg.Za&&this.Xg.S0(t.Za),t.c0a()},h.prototype.push=function(t){return this.MM(t),c.prototype.push.call(this,t)},h.prototype.shift=function(){var t=c.prototype.shift.call(this);return t&&this.yA(t),t},h.prototype.pop=function(){var t=c.prototype.pop.call(this);return t&&this.yA(t),t},h.prototype.unshift=function(t){return this.MM(t),c.prototype.unshift.call(this,t)},h.prototype.Xo=function(t){this.MM(t),c.prototype.Xo.call(this,t)},h.prototype.remove=function(t){return!!c.prototype.remove.call(this,t)&&(this.yA(t),!0)},h.prototype.splice=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];return n=c.prototype.splice.apply(this,r.__spreadArray([t,e],r.__read(i),!1)),i.forEach(this.MM.bind(this)),n.forEach(this.yA.bind(this)),n},h.prototype.Z7b=function(n){var r=this;this.reduce(function(t,e,i){return e.aborted&&(n&&n(e,i,r),0===t.length||t[0].end!==i?t.unshift({start:i,end:i+1}):t[0].end+=1),t},[]).forEach(function(t){return r.splice(t.start,t.end-t.start)})},h.prototype.osa=function(e){return this.v4a(function(t){return t.osa(e)})},h.prototype.uP=function(e){return this.v4a(function(t){return t.uP(e)})},h.prototype.u4a=function(t){return-1!==(t=this.uP(t))?this.get(t):void 0},h.prototype.oac=function(t){for(var e,i=[];t<this.length;)(e=this.get(t))&&i.push(e),t++;return i},h.prototype.oC=function(t){this.move(t),this.xP(t)},h.prototype.qK=function(t){this.mr+=t.bytesReceived-t.Yt,this.hJ(t)},h.prototype.gl=function(t){for(this.mr+=t.bytesReceived-t.Yt;this.$e.first&&this.$e.first.complete&&(this.Mi.empty?this.$e.first===this.yra:this.$e.first.Za===this.Mi.mb);)this.Kbc();this.Gv(t)},h.prototype.x_=function(t,e,i){this.mr-=t.bytesReceived,++this.dla,this.wP(t,e,i)},h.prototype.rK=function(t,e,i){this.$e.Bfc(e-i),this.V9(t,e,i)},e.UFa=i=h,t.Ve(s.Uw,i,!1),t.Ve(o.Au,i),t.Ve(o.Dz,i)},function(t,e,i){var l;function n(t,e){this.wd=t,this.YM=e,this.sA()}_esm(e),e.BHa=void 0,l=i(0),i(2),Object.defineProperties(n.prototype,{length:{get(){return this.Lf},configurable:!0},empty:{get(){return 0===this.Lf},configurable:!0}}),n.prototype.JRb=function(){return this.sh&&this.sh.get(0)},n.prototype.gFb=function(){return this.TM&&this.TM.get(this.TM.length-1)},n.prototype.get=function(t){t<0&&(t+=this.length);for(var e=0;e<this.wd.length;++e)if(this.Ri[e+1]>t)return this.wd[e].get(t-this.Ri[e])},n.prototype.push=function(t){return this.wd[this.YM(t)].push(t),this.sA(),this.Lf},n.prototype.shift=function(){var t;if(this.sh)return t=this.sh.shift(),this.sA(),t},n.prototype.pop=function(){var t;if(this.TM)return t=this.TM.pop(),this.sA(),t},n.prototype.unshift=function(t){return this.wd[this.YM(t)].unshift(t),this.sA(),this.Lf},n.prototype.Xo=function(t){var e=this.YM(t);this.wd[e].Xo(t),this.sA()},n.prototype.remove=function(e){var t=this.wd.some(function(t){return t.remove(e)});return t&&this.sA(),t},n.prototype.splice=function(t,e){for(var i,n,r,a,o,s=[],u=2;u<arguments.length;u++)s[u-2]=arguments[u];for(var c,u=[],h=t+Math.max(0,e),f=0;f<this.wd.length&&(i=this.wd[f],n=this.Ri[f],r=this.Ri[f+1],!(t<r&&(a=t-n,n=Math.min(h-n,i.length),void 0===c&&0<a&&n<i.length?Array.prototype.push.apply(u,i.splice.apply(i,l.__spreadArray([a,n-a],l.__read(s),!1))):(Array.prototype.push.apply(u,i.splice(a,n-a)),void 0===c&&(c=0<f&&0==a?f-1:f)),h<=(t=r))));++f);if(s.length&&void 0!==c){for(h=this.YM(s[0]);0<c&&h<c&&this.wd[c].empty;)--c;for(;s.length&&h===c&&(this.wd[c].push(s.shift()),s.length);)h=this.YM(s[0]);for(;s.length&&++c<this.wd.length&&this.wd[c].empty;)for(;s.length&&h===c&&(this.wd[c].push(s.shift()),s.length);)h=this.YM(s[0]);s.length&&(o=this.wd[c]).splice.apply(o,l.__spreadArray([0,0],l.__read(s),!1))}return this.sA(),u},n.prototype.find=function(i){var n,r=this;return this.wd.some(function(t,e){return void 0!==(n=t.find(r.eE(i,e)))})?n:void 0},n.prototype.findIndex=function(t){for(var e,i=0;i<this.wd.length;++i)if(-1!==(e=this.wd[i].findIndex(this.eE(t,i))))return e+this.Ri[i];return-1},n.prototype.indexOf=function(t){for(var e,i=0;i<this.wd.length;++i)if(-1!==(e=this.wd[i].indexOf(t)))return e+this.Ri[i];return-1},n.prototype.map=function(i){var n=this,t=this.wd.map(function(t,e){return t.map(n.eE(i,e))});return Array.prototype.concat.apply([],t)},n.prototype.reduce=function(n,t){var r=this;return this.wd.reduce(function(t,e,i){return e.reduce(r.nCb(n,i),t)},t)},n.prototype.forEach=function(i){var n=this;this.wd.forEach(function(t,e){t.forEach(n.eE(i,e))})},n.prototype.P9=function(t){for(var e=this.wd.length-1;0<=e;--e)this.wd[e].P9(this.eE(t,e))},n.prototype.some=function(i){var n=this;return this.wd.some(function(t,e){return t.some(n.eE(i,e))})},n.prototype.ZCa=function(t){for(var e=this.wd.length-1;0<=e;--e)if(this.wd[e].ZCa(this.eE(t,e)))return!0;return!1},n.prototype.every=function(i){var n=this;return this.wd.every(function(t,e){return t.every(n.eE(i,e))})},n.prototype.iRb=function(r,t){var e;for(var i=this,n=this.wd.map(function(){return 0}),a=this.wd.filter(function(t){return t.empty}).length;a<this.wd.length;)t((e=n.map(function(t,e){return t<i.wd[e].length?i.wd[e].get(t):void 0}))[e=e.reduce(function(t,e,i,n){return void 0!==e&&(void 0===t||r(e,n[t])<0)?i:t},void 0)],this.Ri[e]+n[e],this),++n[e],n[e]===this.wd[e].length&&++a},n.prototype.move=function(t){return!!this.remove(t)&&(this.Xo(t),!0)},n.prototype.Kbc=function(){var t;this.wd[1].length&&(t=this.wd[1].shift(),this.wd[0].push(t),this.sA())},n.prototype.v4a=function(t){for(var e=-1,i=0;i<this.wd.length;++i)if(-1!==(e=t(this.wd[i]))){e+=this.Ri[i];break}return e},n.prototype.toJSON=function(){return this.map(function(t){return t.toJSON()})},n.prototype.sA=function(){var t;this.Lf=0,this.Ri=[0],this.TM=this.sh=void 0;for(var e=0;e<this.wd.length;++e)t=this.wd[e],this.Lf+=t.length,this.Ri.push(this.Ri[this.Ri.length-1]+t.length),!this.sh&&t.length&&(this.sh=t),t.length&&(this.TM=t)},n.prototype.eE=function(i,t){var n=this,r=this.Ri[t];return function(t,e){return i(t,r+e,n)}},n.prototype.nCb=function(n,t){var r=this,a=this.Ri[t];return function(t,e,i){return n(t,e,a+i,r)}},e.BHa=n},function(t,e,i){var a,r,n;function o(t,e){this.Ya=[],this.Xg=void 0,this.kd=0,this.H=t,e&&e.length&&(Array.isArray(e)?(this.Ya=e.slice(),this.CU(0,this.Ya.length)):e instanceof o&&(this.Ya=e.Ya.slice(),this.CU(0,this.Ya.length)))}_esm(e),e.y2=void 0,a=i(0),r=i(2),t=i(36),n=i(262),i=i(78),Object.defineProperties(o.prototype,{length:{get(){return this.Ya.length},configurable:!0},empty:{get(){return 0===this.Ya.length},configurable:!0},first:{get(){return this.Ya[0]},configurable:!0},In:{get(){return this.Ya[this.Ya.length-1]},configurable:!0},Za:{get(){return this.first&&this.first.Za},configurable:!0},mb:{get(){return this.In&&this.In.mb},configurable:!0},tt:{get(){return this.Xg},configurable:!0},fa:{get(){return this.kd},configurable:!0},aa:{get(){return this.first&&this.first.aa},configurable:!0},Lj:{get(){return this.first&&this.first.Lj},configurable:!0},da:{get(){return this.Ya},configurable:!0}}),o.prototype.Bfc=function(t){this.kd+=t},o.prototype.WEb=function(){var t;0===this.Ya.length?(r.assert(void 0===this.Xg),r.assert(0===this.kd)):(r.assert(this.Xg instanceof n.iD),r.assert("number"==typeof this.kd),r.assert(void 0!==this.tt&&this.tt.Za===this.Za),t=this.Ya.reduce(function(t,e,i){return 0===i||e.Za===t?e.mb:t},0),r.assert(this.tt.mb===t),r.assert(this.Ya.reduce(function(t,e,i){return 0===i||e.Za===t?e.mb:t},0)===this.tt.mb),r.assert(this.Ya.reduce(function(t,e){return t+e.fa},0)===this.kd))},o.prototype.get=function(t){return t<0&&(t+=this.Ya.length),this.Ya[t]},o.prototype.push=function(t){return this.Ya.push(t),this.CU(this.Ya.length-1),this.length},o.prototype.unshift=function(t){return this.Ya.unshift(t),this.CU(0,1),this.length},o.prototype.pop=function(){if(0!==this.Ya.length)return this.Vma(this.Ya.length-1),this.Ya.pop()},o.prototype.shift=function(){if(0!==this.Ya.length)return this.Vma(0),this.Ya.shift()},o.prototype.splice=function(t,e){for(var i,n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return t<0&&(t+=this.Ya.length),(t=t<0?0:t)>this.Ya.length&&(t=this.Ya.length),(void 0===e||e<0)&&(e=0),0<(e=Math.min(e,this.Ya.length-t))&&this.Vma(t,t+e),r=(i=this.Ya).splice.apply(i,a.__spreadArray([t,e],a.__read(n),!1)),0<n.length&&this.CU(t,t+arguments.length-2),r},o.prototype.slice=function(t,e){return void 0===e&&(e=this.Ya.length),(t=void 0===t?0:t)<0&&(t+=this.Ya.length),t>=this.Ya.length?new o(this.H):((e=e>this.Ya.length?this.Ya.length:e)<0&&(e+=this.Ya.length),new o(this.H,this.Ya.slice(t,e)))},o.prototype.Xo=function(t){if(0===this.Ya.length||t.Za>=this.mb)this.push(t);else if(t.mb<=this.Za)this.unshift(t);else{for(var e,i=0,n=this.Ya.length-1;i<n-1;)e=Math.floor((n+i)/2),r.assert(e!==n&&e!==i),t.Za>=this.Ya[e].mb?i=e:n=e;r.assert(i!==n),r.assert(this.Ya[i].mb<=t.Za&&this.Ya[n].Za>=t.mb),this.splice(n,0,t)}},o.prototype.remove=function(t){return!((t=this.Ya.indexOf(t))<0)&&(this.splice(t,1),!0)},o.prototype.concat=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t=t.map(function(t){return t.Ya}),new o(this.H,Array.prototype.concat.apply(this.Ya,t))},o.prototype.forEach=function(i){var n=this;this.Ya.forEach(function(t,e){return i(t,e,n)})},o.prototype.some=function(i){var n=this;return this.Ya.some(function(t,e){return i(t,e,n)})},o.prototype.every=function(i){var n=this;return this.Ya.every(function(t,e){return i(t,e,n)})},o.prototype.map=function(i){var n=this;return this.Ya.map(function(t,e){return i(t,e,n)})},o.prototype.reduce=function(n,t){var r=this;return this.Ya.reduce(function(t,e,i){return n(t,e,i,r)},t)},o.prototype.indexOf=function(t){return this.Ya.indexOf(t)},o.prototype.find=function(i){var n,r=this;return this.Ya.some(function(t,e){return i(t,n=e,r)})?this.Ya[n]:void 0},o.prototype.findIndex=function(i){var n,r=this;return this.Ya.some(function(t,e){return i(t,n=e,r)})?n:-1},o.prototype.filter=function(i){var n=this;return new o(this.H,this.Ya.filter(function(t,e){return i(t,e,n)}))},o.prototype.P9=function(t){for(var e=this.Ya.length-1;0<=e;--e)t(this.Ya[e],e,this)},o.prototype.ZCa=function(t){for(var e=this.Ya.length-1;0<=e;--e)if(t(this.Ya[e],e,this))return!0;return!1},o.prototype.osa=function(t){if(this.empty||t<this.dd||t>=this.Ic)return-1;for(var e,i=0,n=this.Ya.length-1;i<n;){if(e=Math.floor((n+i)/2),t>=this.Ya[e].dd&&t<this.Ya[e].Ic){n=e;break}t<this.Ya[e].Ic?n=e-1:i=e+1}return n},o.prototype.uP=function(t){if(this.empty||t<this.ud||t>=this.gf)return-1;for(var e,i=0,n=this.Ya.length-1;i<n;){if(e=Math.floor((n+i)/2),t>=this.Ya[e].ud&&t<this.Ya[e].gf){n=e;break}t<this.Ya[e].gf?n=e-1:i=e+1}return n},o.prototype.u4a=function(t){return 0<=(t=this.uP(t))?this.Ya[t]:void 0},o.prototype.e7=function(t){var e=this.Ya[t].mb;for(t+=1;t<this.Ya.length&&e===this.Ya[t].Za;++t)e=this.Ya[t].mb;t<this.Ya.length?void 0===this.Xg?this.Xg=new n.iD(this,{mb:e}):this.Xg.S0(e):void 0===this.Xg?this.Xg=new n.iD(this,{}):this.Xg.Opa()},o.prototype.MM=function(t,e){for(var i=t;i<e;++i)this.kd+=this.Ya[i].fa;void 0===this.Xg||0===t?this.e7(0):this.Xg.mb===this.mb?this.e7(t-1):this.Ya[t].Za===this.Xg.mb&&this.e7(t)},o.prototype.yA=function(t,e){var i;for(0===t?(this.Xg=void 0,e<this.length&&this.e7(e)):(i=this.Xg).mb>this.Ya[t-1].mb&&(e<this.length?i.S0(this.Ya[t-1].mb):i.Opa());t<e;++t)this.kd-=this.Ya[t].fa},o.prototype.CU=function(t,e){this.MM(t,e=void 0===e?t+1:e)},o.prototype.Vma=function(t,e){this.yA(t,e=void 0===e?t+1:e)},e.y2=e=o,t.Ve(i.Au,e),t.Ve(i.Dz,e)},function(t,e,i){var n,r,a,o,u,s,c,h;function f(t,e,i,n,r,a,o,s){return(e=h.call(this,t,r,a,e,o)||this).dV=u.yk.prototype.toString.call(e)+" live",e.OVa="AseLiveTextAndVideoMediaRequest(".concat(e.dd,"-").concat(e.Ic,")"),e.CA("video",i,1,t),e.CA("text",n,0,s.Pc[0]),e}_esm(e),e.XFa=void 0,(n=i(0)).__importDefault(i(3)),r=i(6),a=i(8),o=i(188),u=i(74),s=i(106),c=i(185),h=o.Cz,n.__extends(f,h),f.prototype.CA=function(t,e,i,n){t=new c.TL(n,e,this.dV+" ("+t+")",{L:this.L,mediaType:this.mediaType,Pa:this.Pa,bitrate:this.bitrate,offset:0,fa:0,location:this.location,oc:this.oc,responseType:i,xq:this.xq},this,this.Ce,this.H),this.push(t)},f.prototype.gl=function(t){o.Cz.prototype.gl.call(this,t)},f.prototype.rK=function(t,e,i){o.Cz.prototype.rK.call(this,t,e,i)},f.prototype.jE=function(t,e){var i;return this.me?{status:s.Kh.Fs}:this.Tr()?(i=this.Ma[0],this.me=e.appendBuffer(i.response,a.$v(i)),this.zUa(t)||(t.addSourceBuffer(r.u.Ob),this.zUa(t)),{status:this.me?s.Kh.Fs:s.Kh.Jf}):{status:s.Kh.Jf}},f.prototype.zUa=function(t){var e=this;return t.sourceBuffers.some(function(t){if(t.mediaType===r.u.Ob)return t.appendBuffer(e.Ma[1].response),!0})},e.XFa=f},function(t,e,i){var n,a,o,s,u,r,c,h,f,l;function d(t,e,i,n,r,a){return(t=l.call(this,t,n,r,e,a)||this).Pxb=i,t.iVa=f.INIT,t.inc=n.offset,t.dV=u.yk.prototype.toString.call(t)+" multiple",t.OVa="AseMultiFragmentMediaRequest(".concat(t.dd,"-").concat(t.Ic,")"),t.xq=n.xq,t.SUa=0,t.P5=0,i=Math.max(h[t.mediaType],1024),t.BV=i,t.CA(n.offset,i,0),t}_esm(e),e.$Fa=void 0,n=i(0),a=i(72),i(2),n.__importDefault(i(3)),o=i(8),s=i(188),u=i(74),r=i(185),c=i(106),h=[0,0],(i=f=f||{})[i.INIT=0]="INIT",i[i.atb=1]="MDAT",l=s.Cz,n.__extends(d,l),Object.defineProperties(d.prototype,{data:{get(){return this.Wm},configurable:!0},fa:{get(){return this.BV},configurable:!0}}),d.prototype.gl=function(t){var e,i,n,r;this.iVa===f.INIT&&(this.Wm=void 0===this.Wm?t.response:o.st(this.Wm,t.response),t.CR(),e=new DataView(this.Wm),n=(i=this.fyb(e,this.SUa,this.P5)).size,e=i.offset,r=i.$Fb,i.V4a?(i=e+n-this.P5,h[this.mediaType]=Math.max(e+8,h[this.mediaType]),this.CA(t.offset+t.fa,i,1),this.iVa=f.atb):(this.SUa=e,i=Math.max(r,256),this.CA(t.offset+t.fa,i,0)),e=this.BV,this.BV+=i,s.Cz.prototype.rK.call(this,this,this.BV,e)),s.Cz.prototype.gl.call(this,t)},d.prototype.jE=function(t,e){return this.me?{status:c.Kh.Fs}:this.Tr()?e.appendBuffer(this.Wm,o.$v(this))?(t=this.Ma[this.Ma.length-1],this.me=e.appendBuffer(t.response,o.$v(t)),{status:this.me?c.Kh.Fs:c.Kh.Jf}):(this.H.error(this.OVa,"appendTo failed to append array"),{status:c.Kh.Jf}):{status:c.Kh.Jf}},d.prototype.CA=function(t,e,i){t=new r.TL(this.stream,this.Pxb,this.dV+" ("+this.Ma.length+")",{L:this.L,mediaType:this.mediaType,Pa:this.Pa,bitrate:this.bitrate,offset:t,fa:e,location:this.location,oc:this.oc,responseType:i,xq:this.xq},this,this.Ce,this.H),this.push(t),this.P5+=e},d.prototype.fyb=function(t,e,i){for(var n,r;;){if(n=t.getUint32(e),r=t.getUint32(e+4),"mdat"===a.GH(r))return{V4a:!0,size:n,offset:e};if(i<=e+n)return{V4a:!1,size:-1,offset:e,$Fb:e+n-i+8};e+=n}},e.$Fa=d},function(t,e,i){var o,s,u;function n(t,e){this.Hh=t,this.console=e,this.UH=1/0,this.MU=this.C6=0,this.LXa=!1}_esm(e),e.ESa=void 0,o=i(436),s=i(6),u=i(19),n.prototype.Q9b=function(){this.LXa=!0},n.prototype.HQb=function(t,e,i,n,r){var a;if(this.Hh&&(a=t.da)){if(i===s.u.J)i=a.No(Math.ceil(this.Hh*t.oa.DK),void 0,!0),t=(a=t.Gl(i)).uv.Xk(t.oa),a.kj({start:0,end:this.Hh-i*t}),this.UH=this.Hh;else{for(void 0!==n.Hjb?i=(e=n.Hjb)*t.oa.W:(i=o.Pta(n,r)+Math.ceil(n.PEb*t.oa.DK),u.M.Ja(i).Xk(t.oa),i=e+i,e=Math.ceil(i/t.oa.DK)),i=a.No(i,void 0,!0),r=n=0;r<i;++r)n+=(a=t.Gl(r)).uv.Xk(t.oa);n=e-n,(a=t.Gl(i)).kj({end:n}),this.UH=e}return a.lbb(),a}},n.prototype.JXb=function(t){this.MU+=t.lhb,this.console.warn("StallAtFrameCount, adding frames: ".concat(t.lhb),"total frames: ".concat(this.MU),"needed frames: ".concat(this.UH))},n.prototype.rWb=function(){return this.console.trace("stallAtFrameCount.hasEnoughRequestedFrames:","requested: ".concat(this.C6),"needed: ".concat(this.UH)),this.C6>=this.UH},n.prototype.qWb=function(){return this.MU>=this.UH},n.prototype.LXb=function(t,e){this.C6+=this.AB(t,e)},n.prototype.qPb=function(t,e,i){t.lhb=this.AB(e,i)},n.prototype.AB=function(t,e){return t.uv.Xk(e.oa)},n.prototype.ZA=function(){return!!this.qWb()&&(this.LXa?(this.console.warn("StallAtFrameCount underflow reported, bufferingComplete = false"),!1):(this.console.warn("StallAtFrameCount bufferingComplete = true:","".concat(this.MU," >= ").concat(this.UH)),!0))},e.ESa=n},function(t,e,i){var k,S,T,I,O,x,o,R,s,n,u,c;_esm(e),e.Fka=void 0,t=i(0),k=t.__importStar(i(11)),S=t.__importDefault(i(28)),T=t.__importDefault(i(3)),I=i(22),O=i(6),x=i(266),o=i(1011),R=new T.default.Console("ASEJS_STREAM_SELECTOR","media|asejs"),s=[O.za[O.za.Dg],O.za[O.za.ed],O.za[O.za.eg],O.za[O.za.Gc],O.za[O.za.Ug],"checkBuffering"],n=i(1013),u={first:function(){return i(1014)},random:function(){return i(1015)},optimized:function(){return i(191).default},roundrobin:function(){return i(1019)},selectaudio:function(){return i(443)},selectaudioadaptive:function(){return i(1020)},default:function(){return i(191).default},lowest:function(){return i(1021)},highest:function(){return i(1022)},throughputthreshold:function(){return i(1023)},replay:function(){return i(1024).default},checkdefault:function(){return i(1026)},live:function(){return i(1027)},testscript:function(){return n}},c={STARTING:"default",BUFFERING:"default",REBUFFERING:"default",PLAYING:"default",PAUSED:"default",checkBuffering:"checkdefault"},t=function(){var t=2;function e(n,t,e,i){for(var r,a=2;6!==a;)switch(a){case 2:(r=this).VR=n,this.K=t,a=4;break;case 7:i&&(this.leb=new o.TOa(t)),a=6;break;case 4:this.ve=e,n=n||this.K.oDa,this.qh=s.reduce(function(t,e){{var i;return i=(u[n]||u[c[e]])()[e]||u[c[e]]()[e],t[e]=i.bind(r),t}},{}),a=7}}for(;6!==t;)switch(t){case 2:e.prototype.bCa=function(t,e,i,n,r,a,o){for(var s,u,c,h,f,l,d,p,b,g,m,v,y,w,A,_=2;67!==_;)switch(_){case 71:_=s===O.za.Gc?24:70;break;case 68:return R.error("Stream selector called with invalid player state "+O.za[t.state]),null;case 31:_=n<e.length?30:28;break;case 27:_=(s=t.state)===O.za.Dg?26:74;break;case 32:a000.O9M(11);var E=a000.I9M(20,241,12);n=f.Ke+E,_=31;break;case 7:this.ve.T0(g),_=6;break;case 45:u=[],a.forEach(function(t){for(var e,i=2;4!==i;)2===i&&(e=t.stat,e=(t=c[t.filter])&&t[e],u.push(isNaN(e)?-1:e),i=4)}),_=64;break;case 64:f.R6b=u,_=63;break;case 21:n=d.Tk-d.tc,m=void 0,i=!1,_=33;break;case 74:_=s===O.za.ed?73:72;break;case 75:return f;case 48:c=i.Lb,a=b.hXa,_=46;break;case 10:h=v[y-1].bitrate,g=I.Yp(e,function(t){return t.bitrate>h}),_=19;break;case 24:(f=this.qh[O.za[t.state]].call(this,b,t,e,g,n,!!r,m,i)).hf=t.state,_=22;break;case 18:k.sa(g)&&(g=this.ve.$$a),void 0!==n&&this.Yza(e,!!t.Lt,t.state,t.buffer,n),t.state===O.za.Dg&&k.Oa(g)&&(t.state=O.za.ed),_=15;break;case 63:f.Fc=d.Fc,a=t&&t.ee,e=i.da,f.Uk=e&&void 0!==a&&!isNaN(a)&&0<=a&&a<e.length?e.vk(a):d.Fc,f.B3b=c&&c.Xa&&c.Xa.ta||0,f.Zoa=d.Tk-d.tc,_=57;break;case 73:this.ve.Dib(S.default.L3.Dg),_=24;break;case 55:f.tj=t&&t.tj,_=77;break;case 76:f.vG=T.default.time.ia(),_=75;break;case 70:_=s===O.za.Ug?24:69;break;case 15:t.state!==O.za.Dg&&void 0===g&&(t.state=O.za.Dg),_=27;break;case 22:_=f.Gh&&(f.nB=[],e.forEach(function(t,e){for(var i=2;5!==i;)switch(i){case 1:t.pDa=!1,i=5;break;case 2:t===f.Gh?f.Ke=e:(!b.zOb||t.da&&t.da.length)&&!t.pDa||f.nB.push(t.Pa),i=1}}),!f.nB.length)?21:39;break;case 30:m=e[n],_=29;break;case 4:_=k.sa(g)&&t.state===O.za.Gc&&(m=!0,void 0!==this.ve.um)?3:6;break;case 46:_=c&&a&&0<a.length?45:63;break;case 44:n=f.Ke-1,_=43;break;case 41:m.da&&m.da.length||(i=!0,f.nB.push(m.Pa)),_=40;break;case 25:this.ve.Dib(S.default.L3.Dg),_=24;break;case 49:_=t.bP?48:75;break;case 2:d=null==t?void 0:t.buffer,p=T.default.time.ia(),b=this.K,g=this.ve.$$a,m=!1,k.Oa(g)&&t.state===O.za.Dg&&(this.ve.T0(void 0),g=void 0),k.Oa(g)&&g>=e.length&&(this.ve.T0(void 0),g=void 0),_=4;break;case 77:f.tu=p,_=76;break;case 28:_=i?40:44;break;case 40:i||(f.nB=void 0),_=39;break;case 39:_=f&&null!==f.Ke?37:38;break;case 29:m.da&&m.da.length||(i=!0,f.nB.push(m.Pa)),_=28;break;case 57:f.h_a=d.Ag,f.w6b=null!=(l=null==(l=null==(E=T.default.Cpc)?void 0:E.call(T.default))?void 0:l[t.mediaType===O.u.J?1:0])?l:-1,_=55;break;case 26:this.tma=this.pma=void 0,_=25;break;case 6:y=(v=d.da).length,_=14;break;case 43:_=0<=n?42:40;break;case 19:g=0<g?g-1:0===g?0:e.length-1,_=18;break;case 3:w=this.ve.um.bitrate,g=0<(g=I.Yp(e,function(t){return t.bitrate>w}))?g-1:0===g?0:e.length-1,_=7;break;case 11:_=0<=g?18:10;break;case 14:_=0<y?13:18;break;case 38:return null;case 72:_=s===O.za.eg?73:71;break;case 37:void 0===f.$1b?this.ve.T0(f.Ke):this.ve.T0(f.$1b),i=e[f.Ke],f.U_=i.Xa||0,f.reason&&(i.ju=f.reason,"min_fragment_vmaf"!==f.reason&&(i.$Ba=f.Tv,i.NB=f.NB,i.rq=f.rq,i.sq=f.sq)),this.leb&&(f.Ky=this.leb.sUb({qE:d.Tk-d.tc,NFb:d.Ag||0,MFb:d.pt||0,tc:d.tc,r0b:e[0],Gh:i,jgc:e[f.Ke+1]||i,Cec:e[e.length-1],hf:t.state,playbackRate:t.playbackRate,ee:t.ee,X9:o,Ij:r})),k.Oa(g)&&i.bitrate<e[g].bitrate&&(this.pma=d.Fc),t.state!==O.za.Gc&&t.state!==O.za.Ug?(e=x.xda(t.state),a=this.ZA(t.buffer,e,t.playbackRate,i,a),(f.cf=a.complete)?f.Y7=a.reason:(f.cf=!1,f.SK=a.SK,f.EF=a.EF,f.progress=a.progress)):(f.cf=!0,f.Y7="playing"),_=49;break;case 42:m=e[n],_=41;break;case 69:_=68;break;case 13:A=v[y-1].Pa,g=I.Yp(e,function(t){return t.Pa===A}),_=11;break;case 33:_=b.xjb&&n>b.XZ?32:40}},e.prototype.ZA=function(t,e,i,n,r){return this.qh.checkBuffering.call(this,t,e,i,n,r,this.K)},e.prototype.$cc=function(t,e,i){for(var n=2;1!==n;)2===n&&(k.sa(e)?this.pma=this.tma=void 0:e.bitrate<i.bitrate&&(this.tma=t),n=1)},e.prototype.Yza=function(t,i,n,r,a){for(var o,s,e=2;5!==e;)2===e&&(this.P9(t,function(t){for(var e=2;1!==e;)2===e&&(t.Yv&&t.Lb&&t.Lb.confidence?(o!==t.Lb&&(o=t.Lb,i&&t.Lb&&(t.Lb.Lt=!0),s=a(t.Lb,r,n,t.track.T.Rt[O.u.P])),t.Xa=Math.floor(s.lower)||1,t.iec=Math.floor(s.upper||1)||1):t.Xa=void 0,e=1)}),e=5)},e.prototype.P9=function(t,e){for(var i=2;3!==i;)switch(i){case 14:++r,i=7;break;case 1:i=0<=r?5:3;break;case 2:a000.h9M(2);var n=a000.I9M(70,10,7),r=t.length-n,i=1;break;case 6:e(t[r],r,t),i=1;break;case 5:e(t[r],r,t),i=4;break;case 7:i=6<r?6:1;break;case 4:--r,i=1}},Object.defineProperties(e.prototype,{nba:{get(){return this.pma},configurable:!0}}),t=8;break;case 8:return Object.defineProperties(e.prototype,{Kwa:{get(){return this.tma},configurable:!0}}),e}}(),e.Fka=t},function(t,e,i){var r,a,n;function o(t){return f(t.Gh)}function s(t,e){var i=t.Sdc,i=p(e)+i*b(e);return e=e.Xa||0,t.d2b+t.Rdc*Math.max(0,0<e?i/e-1:0)}function u(t,i){var e,n,r,a,o,s,u,c;return i&&"object"==typeof i?(e=t.Gh,n=t.jgc,r=t.Cec,a={selectedFragmentBitrate:(o=t.X9,s=e,(void 0!==(u=t.ee)&&s.da?(void 0===o?null==(c=s.da)?void 0:c.get(u).Koa:o.p6a(s,u).Koa)||s.Dy||0:s.Dy||0)*t.playbackRate),selectedPeakBitrate:(e.Dy||l(e)||0)*t.playbackRate,upswitchPeakBitrate:(n.Dy||l(n)||0)*t.playbackRate,maxPeakBitrate:(r.Dy||l(r)||0)*t.playbackRate,selectedAverageBitrate:l(e)*t.playbackRate,upswitchAverageBitrate:l(n)*t.playbackRate,maxAverageBitrate:f(e)*t.playbackRate,bufferLevelMs:t.qE,observedThroughput:d(t.Gh)||0,averagetp:p(t.Gh)||0,stddevtp:b(t.Gh)||0},t=i.offset||0,Object.keys(a).reduce(function(t,e){return t+(i[e]||0)*a[e]},t)):0}function c(t,e,i){var n;function r(t,e){return void 0!==t&&0<t.filter(function(t){return t===e}).length}return(t=0===(t=(n=0===(n=t.filter(function(t){return r(t.yda,e)})).length?t.filter(function(t){return!t.yda||0===t.yda.length}):n).filter(function(t){return r(t.Pcb,i)})).length?n.filter(function(t){return!t.Pcb||0===t.Pcb.length}):t).sort(function(t,e){return t.Z7-e.Z7})}function h(t,e){var i,n,r=c(e.i9b,t.hf,t.Gh.Lb.confidence);if(0===r.length)return 0;switch(e.m5b){case"implicit":e=s(e,t.Gh),e=t.qE/e;break;case"capacityPercentage":e=Math.max(t.NFb/t.MFb||0,t.qE/e.cw);break;default:e=0}for(var a=-1,o=0;o<r.length;o++)if(r[o].Z7>=e){a=o;break}return-1===a?u(t,r[r.length-1].Zpa):0===a?u(t,r[0].Zpa):(i=r[a-1].Z7,o=u(t,r[a-1].Zpa),n=r[a].Z7,t=u(t,r[a].Zpa),(1-(r=Math.min((e-i)/(n-i),1)))*o+r*t)}function f(t){var e=null==(e=null==t?void 0:t.T)?void 0:e.Rt;return e&&e[t.mediaType]||0}function l(t){return(null==t?void 0:t.bitrate)||0}function d(t){return(null==(t=null==(t=t.Lb)?void 0:t.Xa)?void 0:t.ta)||0}function p(t){return(null==(t=null==(t=t.Lb)?void 0:t.Io)?void 0:t.gO)||0}function b(t){return t=t.Lb,Math.sqrt(null==(t=null==t?void 0:t.Io)?void 0:t.OS)||0}_esm(e),e.nUb=e.ISb=e.zTb=e.TOa=void 0,t=i(0).__importDefault(i(3)),r=i(6),a=i(1012),new t.default.Console("ASEJS_PACERATE_SELECTOR","media|asejs"),n={maxStreamBitrate:o,static:function(t,e){return e.Ujb},none:function(){return 0},regression:h,epsGreedy:function(t,e){return Math.min(h(t,e)||0,d(t.Gh))},default:o},i=function(){function t(t){for(var e=2;4!==e;)2===e&&(this.K=t,this.algorithm=(n[this.K.j5b]||n.default).bind(this),e=4)}for(var e=2;3!==e;)switch(e){case 4:case 14:return t;case 2:t.prototype.rUb=function(t){for(var e,i=2;9!==i;)switch(i){case 2:e=null==(n=t.Gh)?void 0:n.mediaType,n=0,i=5;break;case 3:return n;case 4:var n="static"===this.K.k5b?this.K.Ujb:f(t.Gh),i=3;break;case 5:i=e===r.u.P&&this.K.j9&&this.K.DOb||e===r.u.J&&this.K.k9&&this.K.EOb?4:3;break;case 12:return n}},t.prototype.qta=function(t,e,i){for(var n,r=2;8!==r;)switch(r){case 1:r=i?4:5;break;case 2:r=1;break;case 5:return 0;case 4:return a000.h9M(12),(e=Math.ceil(a000.K9M(e,i)))<(t=(this.K.h0a.wqc||0)*((null==(n=t.r0b)?void 0:n.Dy)||0))?0:e}},t.prototype.sUb=function(t){for(var e,i,n,r=2;6!==r;)switch(r){case 8:return e=t.Ij?this.algorithm(t,this.K):this.rUb(t),new a.zja({LC:this.qta(t,e,i.cgb[0]),AC:this.qta(t,e,i.cgb[2]),fB:this.qta(t,e,i.cgb[1])});case 2:e=new a.zja({LC:0,fB:0,AC:0}),i=this.K.h0a,r=1;break;case 5:return e;case 1:r=i?4:5;break;case 4:n=this.K.qfc,r=3;break;case 9:return e;case 3:r=n&&t.ee&&0==t.ee%n||t.qE<i.KF?9:8}},e=4}}(),e.TOa=i,e.zTb=s,e.ISb=c,e.nUb=d},function(t,e,i){var a;function n(t){this.LC=t.LC,this.fB=t.fB,this.AC=t.AC}_esm(e),e.zja=void 0,a=i(0),Object.defineProperties(n.prototype,{dgb:{get(){return[this.LC,this.fB,this.AC]},configurable:!0}}),n.prototype.rcb=function(){return Math.min(this.LC,this.fB,this.AC)},n.prototype.Xaa=function(){return this.dgb.some(function(t){return 0<t})},n.prototype.KBa=function(t){return new n({LC:t*this.LC,fB:t*this.fB,AC:t*this.AC})},n.prototype.Bxa=function(t,e,i,n){var r=8*t/Math.max(i-e,1);return!!this.Xaa()&&(t=this.dgb.map(function(t){return Math.abs(r-t)/t}),Math.min.apply(Math,a.__spreadArray([],a.__read(t),!1))<n)},e.zja=n},function(t,e,i){var n,r,a,o,s,u;function c(t,e,i){return u=(s=i).map(function(t,e){return e}),null===o?(t=r(i),o=i[t].bitrate,new a(t)):i.length?void 0===(t=u.filter(function(t){return i[t].bitrate==o})[0])?(n.log("Defaulting to first stream due to unvalid bitrate requested: "+o),new a(u[0])):new a(t):null}e=i(32),i=i(3).default,n=e.console,r=e.ysa,a=e.Hp,u=s=o=null,i.XGb&&(i.XGb.Pj={xa:function(){u=s=o=null},bCa:function(t){o=t},Fpc:function(){return{all:s,wmb:u}}}),t.exports={STARTING:c,BUFFERING:c,REBUFFERING:c,PLAYING:c,PAUSED:c}},function(t,e,i){var r,a,o,s;function n(t,e,i,n){if(r.sa(n))t=a(i);else if(o(i[n]))t=n;else if((t=a(i,n))<0)return null;return new s(t)}r=i(11),e=i(32),a=e.ysa,o=e.OJ,s=e.Hp,t.exports={STARTING:n,BUFFERING:n,REBUFFERING:n,PLAYING:n,PAUSED:n}},function(t,e,i){var n;function r(t,e,i){return(t=i.map(function(t,e){return t.Yv?e:null}).filter(function(t){return null!==t})).length?new n(t[Math.floor(Math.random()*t.length)]):null}n=i(32).Hp,t.exports={STARTING:r,BUFFERING:r,REBUFFERING:r,PLAYING:r,PAUSED:r}},function(t,e,i){var f,l,s,d,p;_esm(e),e.M0=void 0,t=i(0),f=t.__importStar(i(11)),l=i(22),t=t.__importDefault(i(32)),s=i(442),d=t.default.assert,p=t.default.Hp,e.M0=void 0;for(var n=2;5!==n;)2===n&&(e.M0=function(t,e,i,n,r,a,o){return"playing"===t.Xoa?s.Vn.call(this,t,e,i,n,r,a,o):u.call(this,t,e,i,n)},n=5);function u(n,r,t,e){for(var i,a,o,s,u=2;20!==u;)switch(u){case 4:i=Math.min(e+(n.SDb?2:1),t.length),i=l.Xc(t.slice(0,i).reverse(),h),u=9;break;case 14:var c="select_feasible_buffering",u=6;break;case 2:d(!f.sa(e),"Must have at least one selected stream"),i=t[e],a=i.bitrate,o=i,u=5;break;case 7:c="fallback_lowest_acceptable_stream",u=6;break;case 5:u=i.Xa?4:13;break;case 9:u=void 0===i?8:14;break;case 6:s=null==i?void 0:i.Xa,u=13;break;case 8:i=t[0],u=7;break;case 13:o!==((t=new p).Gh=i)&&(t.reason=c,t.Tv=s),u=10;break;case 10:return t}function h(t){for(var e,i=2;8!==i;)switch(i){case 1:i=!e||(t.bitrate>a?n.igc:1)*t.bitrate*r.playbackRate>e?5:4;break;case 2:e=t.Xa,i=1;break;case 5:return!1;case 4:return c="buff_lt_hist",s=e,!0}}}},function(t,e,i){var I,O;_esm(e),(I=i(0)).__importStar(i(11)),O=i(32),e.default=function(t){for(var e,i,n,r,a,o,s,u,c,h=a000,f=2;54!==f;)switch(f){case 43:++y,f=42;break;case 32:h.O9M(0),l=h.I9M(p,v),f=31;break;case 33:return t&&m.push(l/(u/1e3)),I.__assign({result:!1,FZ:l/(u/1e3),Ev:!1},t&&{a8:m});case 29:_-=r,f=28;break;case 3:d=Math.min(l.length,d),e=l.te,i=l.sizes,n=b-p,r=8*m/E|0,f=8;break;case 44:_+=i[o],g+=e[++o],f=28;break;case 42:f=w<=y&&n<l?36:41;break;case 8:m=[],b=1/0,f=6;break;case 31:h.h9M(13),p+=h.K9M(E,r,s,0),v+=c,f=29;break;case 21:f=_<a?35:34;break;case 41:t&&m.push(l/(u/1e3)),a=l,f=39;break;case 37:return t&&m.push(l/(u/1e3)),I.__assign({result:!1,FZ:Math.min(l,b)/(u/1e3),Ev:!0},t&&{a8:m});case 6:l=l.te[o=a=0],h.h9M(14),g=h.I9M(g,u,l,1e3),h.O9M(15),E=h.I9M(E,0,8),h.O9M(1),s=h.I9M(1e3,u),f=10;break;case 38:f=(l=Math.max(v-p,0))<k&&l<a?37:31;break;case 39:b=Math.min(l,b),f=26;break;case 34:f=!T&&(l=v-p)<S?33:32;break;case 2:var l=t.da,d=t.blocks,p=t.tc,b=t.Tk,g=t.occ,m=t.Gj,v=t.Fc,y=t.ee,w=t.ZQb,A=t.oX,_=t.h5a,E=t.Xa,k=t.fca,S=t.KF,T=t.AZb;t=t.BOb,u=l.aa,f=3;break;case 22:a=Math.max(r,A),f=21;break;case 35:p=g,_+=i[o],g+=l=e[++o],f=21;break;case 23:f=_<r?22:38;break;case 28:f=g<p&&o<y?44:43;break;case 25:r=i[y],c=e[y],f=23;break;case 10:d<=y&&O.console.error("StreamingIndex: "+y+" >= fragmentsLength: "+d),p+=r,0===v&&(p=0),h.h9M(1),p*=h.K9M(1e3,u),h.h9M(1),v*=h.I9M(1e3,u),f=16;break;case 27:h.h9M(1),n*=h.I9M(1e3,u),f=26;break;case 16:h.O9M(1),S*=h.I9M(1e3,u),h.O9M(1),k*=h.I9M(1e3,u),f=27;break;case 26:f=y<d?25:36;break;case 36:return I.__assign({result:!0,FZ:b/(u/1e3),Ev:!0},t&&{a8:m})}}},function(t,e,i){var n,s,d,c,u,p,r,b,g,m,v;_esm(e),e.OYb=e.aCa=void 0,n=i(0),s=n.__importDefault(i(90)),d=n.__importStar(i(11)),c=i(22),u=i(418),p=n.__importDefault(i(3)),t=n.__importDefault(i(105)),i=n.__importDefault(i(32)),r=i.default.y2b,b=i.default.ZFb,g=i.default.j8,m=i.default.Hp,v=t.default.MCa,t=(i=function(){function a(a,o,t){{var s,u;return s=new m,u=Math.max(a.hw,a.dca,o.Tva?a.bya:-1/0),s.Gh=c.Xc(t.filter(function(t){return t.bitrate<=a.bC}).reverse(),function(t){for(var e,i=2;13!==i;)switch(i){case 1:i=t.bitrate>u?5:14;break;case 2:n={Xa:t.Xa,en:t.Lb&&t.Lb.en,Qg:t.Lb&&t.Lb.Qg},i=1;break;case 5:t=t.bitrate*o.playbackRate,r=n.Xa,i=3;break;case 3:i=r?9:6;break;case 8:var n=h(t,r,a)<=e&&(s.Tv=r,n&&(s.rq=n.en||0,s.sq=n.en&&n.Qg),s.reason="hist_bufftime",!0),i=7;break;case 9:e=function(t,e){for(var i,n,r=2;13!==r;)switch(r){case 1:i=t.zaa,n=c.Yp(i,function(t){return e<=t.r}),r=5;break;case 5:r=0===n?4:3;break;case 4:return i[0].d;case 9:return i[i.length-1].d;case 2:r=t.zaa?1:14;break;case 3:r=-1===n?9:8;break;case 6:return Math.floor(t.d+(i.d-t.d)*(e-t.r)/(i.r-t.r));case 14:return t.Yr;case 8:a000.h9M(0),t=i[a000.K9M(1,n)],i=i[n],r=6}}(a,t),i=8;break;case 7:return n;case 14:var r=n.Xa;n=t.bitrate*o.playbackRate<=r?(s.Tv=r,n&&(s.rq=n.en||0,s.sq=n.en?n.Qg:void 0),s.reason="lt_hist_lte_minbitrate",!0):r?(s.Tv=r,n&&(s.rq=n.en||0,s.sq=n.en?n.Qg:void 0),!(s.reason="hist_tput_lt_minbitrate")):(s.reason="no_historical_lte_minbitrate",!0),i=7;break;case 6:n=!1,i=7}})||t[0],s}}for(0;;){1;return{vBb:function(t,e,i,n){return("historical"===t.xva?function(t,e,i){for(var n,r=2;7!==r;)switch(r){case 5:return(t.VV?o:a)(t,e,i);case 2:n=p.default.storage.get("vb"),r=1;break;case 4:return(t=new m).Gh=c.Xc(i.slice().reverse(),function(t){return t.bitrate<=n})||i[0],t.reason="hist_bitrate",t;case 1:r="number"!=typeof n?5:4}}:t.VV?o:a)(t,e,i)},Qyb:f}}function h(t,e,i){return t=b(i.Fj,t*i.Yba),r(t,e)}function f(t,e,i,n,r,a){return t=i?t.eb>=a.iw&&t.eb<=a.Mbb:t.bitrate>=a.hw&&t.bitrate<=a.bC,(n=n<r&&t)?{D9:n}:{D9:n,reason:t?"no_valid_DelayTarget":i?"no_valid_VMAF":"no_valid_Bitrate"}}function o(t,e,i){for(var n,r,a,o,s,u,c=2;19!==c;)switch(c){case 1:c=0<=a&&(n?i[a].eb>=t.iw:i[a].bitrate>=t.hw)?5:11;break;case 8:o=u.D9,u=u.reason,r.NB=s,c=14;break;case 2:n=!!t.iw&&!!t.Mbb&&i.every(function(t){return t.eb&&t.eb<=110}),r=null,a=i.length-1,c=1;break;case 5:r=l(o=i[a],t),s=h(o.bitrate*e.playbackRate,r.Tv,t),u=function(t,e){for(var i,n=a000,r=2;9!==r;)switch(r){case 5:i=e.SR,r=4;break;case 1:r=0===e.SR.lastIndexOf("log",0)?5:3;break;case 2:n.h9M(6);var a=n.K9M(99982,18),o=(n.O9M(1),n.I9M(18,18e3));t=g(t,0,a)/o,r=1;break;case 3:return 0===e.SR.lastIndexOf("sigmoid",0)?(i=e.SR,(i=e.$hb[i])&&2===i.length?1e3*(i[0]+i[1]*v(t)):e.Yr):e.Yr;case 4:return(i=e.$hb[i])&&2===i.length?1e3*(i[0]+i[1]*Math.log(1+t)):e.Yr}}(r.Tv,t),u=f(o,r.Tv,n,s,u,t),c=8;break;case 14:c=o?11:13;break;case 11:return d.xb(r)&&i[a].bitrate<t.hw&&((r=l(i[a],t)).reason="below_minInitVideoBitrate"),d.xb(r)&&((r=l(i[0],t)).reason="fallback_no_acceptable_stream"),r;case 12:a--,c=1;break;case 13:r.reason=u,c=12}}function l(t,e){for(var i,n,r=2;12!==r;)switch(r){case 5:t=i.Gh.Lb||{},r=4;break;case 4:i.sq=t.en&&t.Qg,i.rq=t.en||0,r=9;break;case 2:(i=new m).Gh=t,r=5;break;case 9:t=s.default(i.sq,{}),r=8;break;case 8:r=7;break;case 7:r=(n=d.Oa(e.Gea)&&0<=e.Gea&&e.Gea<=100&&!d.sa(t)&&!d.xb(t))?6:14;break;case 6:n=u.bTa.vUb(t),n=!!d.gd(n)&&(t.Hj=n,!0),r=14;break;case 14:return n?(e=t.Hj(e.Gea/100)||i.Gh.Xa,i.Tv=e,i.reason="hist_tdigest"):i.Gh.Xa&&(e=i.Gh.Xa,i.Tv=e,i.reason="hist_throughput"),i}}}()).Qyb,e.aCa=i.vBb,e.OYb=t},function(t,e,i){var a,o,s,u;function n(t,e,i){var n,r=this.rma;return e=e.buffer.Fc,n="forward"===t.C$b,a.sa(r)?(r=n?o(i):o(i,i.length),this.sma=e,this.rma=r,new u(r)):(s(i[r])||(r=o(i,r),this.sma=e,this.rma=r),r<0?null:e>this.sma+t.lec?(t=i.map(function(t,e){return t.Yv?e:null}).filter(function(t){return null!==t})).length?(n?r=(t.indexOf(r)+1)%t.length:(r=t.indexOf(r)-1)<0&&(r=t.length-1),this.rma=t[r],this.sma=e,new u(t[r])):null:new u(r))}a=i(11),e=i(32),o=e.ysa,s=e.OJ,u=e.Hp,t.exports={STARTING:n,BUFFERING:n,REBUFFERING:n,PLAYING:n,PAUSED:n}},function(t,e,i){function n(u,c,h,t){for(var e,f,i,n,r,a,o,s,l,d,p=2;32!==p;)switch(p){case 14:e=0,p=21;break;case 3:e=t,u.Dkb.some(function(t){for(var i,e,n,r,a,o,s=2;9!==s;)switch(s){case 1:s=e?5:3;break;case 2:e=(i=t.profiles)&&0<=i.indexOf(d),s=1;break;case 4:f=h.filter(function(t){{var e;return e=t.bitrate,r<=e&&e<=a&&0<=i.indexOf(t.mf)&&e*n/8<o}}).map(function(t){return t.cg}),s=3;break;case 5:n=(t=t.A_)&&t.lca||u.lca,r=t&&t.Wqc||-1/0,a=t&&t.CQ||1/0,o=c.buffer.pt,s=4;break;case 6:s=e?9:6;break;case 3:return e}}),p=8;break;case 8:p=f&&1<f.length?7:21;break;case 7:n=(i=h[t]).bitrate,r=f.indexOf(t),b=i.Xa,a=u.TEb,p=6;break;case 22:v&&m.log("  Upswitch not allowed. lastDownswitchPts = "+l+", lastUpswitchPts = "+s+", buffer level = "+o+"ms"),p=21;break;case 20:o=h[n],p=19;break;case 4:return new A(t);case 23:e=n,p=21;break;case 19:p=w(o)&&(0==r||o.bitrate*c.playbackRate*a.S2a<b)?18:17;break;case 15:s=this.Kwa,l=this.nba,p=27;break;case 27:p=c.Wr&&o>a.XB&&(void 0===l||Number(s)>l||n.Fc-l>a.yba)?26:22;break;case 16:p=r<f.length-1&&b>a.Vlb*n*c.playbackRate&&(v&&m.log("throughput for audio "+b+" kbps > "+a.Vlb+"*"+n+" kbps"),o=(n=c.buffer).Tk-n.tc,i.da&&i.da.length)?15:21;break;case 13:p=r&&b<a.S2a*n*c.playbackRate?12:16;break;case 34:return v&&m.log("selectAudioStream: selected stream :"+b.bitrate+" kbps, profile :"+d+", audio throughput:"+b.Xa+"kbps, streamingPts :"+c.buffer.Fc),new A(e);case 6:p=r<0?14:13;break;case 5:p=u&&u.sS&&0<=u.sS.indexOf(d)?3:4;break;case 24:n=f[r],o=h[n],p=w(o)&&b>a.Vlb*o.bitrate*c.playbackRate?23:25;break;case 12:v&&m.log("throughput for audio "+b+" kbps < "+a.S2a+"*"+n+" kbps, try to downswitch"),--r,p=11;break;case 25:p=++r<f.length?24:21;break;case 26:v&&m.log("  Upswitch allowed. lastDownswitchPts = "+l+", lastUpswitchPts = "+s+", streamingPts = "+n.Fc),p=25;break;case 21:var b=h[e];e!==t&&v&&m.log((t<e?"up":"down")+"switching audio from "+i.bitrate+" kbps, to "+b.bitrate+" kbps"),p=34;break;case 18:e=n,p=21;break;case 17:r--,p=11;break;case 2:y(!g.sa(t),"Must have at least one selected stream"),d=h[t].mf,p=5;break;case 11:p=0<=r?10:21;break;case 10:n=f[r],p=20}}for(var g,r,m,v,y,s,w,A,u,c,a=2;4!==a;)2===a&&(g=i(11),m=(r=i(32)).console,v=r.debug,y=r.assert,s=i(90),w=r.OJ,A=r.Hp,u=i(443),c=i(6).za,t.exports={STARTING:function(t,e,i,n){for(var r,a=2;7!==a;)switch(a){case 1:a=(r=t&&t.sS&&0<=t.sS.indexOf(r)?h(r,t.Dkb):h(r,t.SEb))?5:4;break;case 2:o=t,r=i[n||0].mf,a=1;break;case 4:return i=i[(t=u[c[c.Dg]](o,e,i,n)).Ke],v&&m.log("selectAudioStreamStarting: selected stream :"+i.bitrate+" kbps, profile :"+i.mf),t;case 5:var o={minInitAudioBitrate:t.$Z,minHCInitAudioBitrate:t.YZ,maxInitAudioBitrate:t.LZ,minRequiredAudioBuffer:t.lca};v&&m.log("selectAudioStreamStarting: overriding config with "+JSON.stringify(r)),s(r,o),a=4}},BUFFERING:n,REBUFFERING:n,PLAYING:n,PAUSED:n},a=4);function h(i,t){{var n;return n=void 0,t.some(function(t){{var e;return(e=(e=t.profiles)&&0<=e.indexOf(i))&&(n=t.override),e}}),n}}},function(t,e,i){var n;function r(){return new n(0)}i(11),n=i(32).Hp,t.exports={STARTING:r,BUFFERING:r,REBUFFERING:r,PLAYING:r,PAUSED:r}},function(t,e,i){var n;function r(t,e,i){return new n(i.length-1)}i(11),n=i(32).Hp,t.exports={STARTING:r,BUFFERING:r,REBUFFERING:r,PLAYING:r,PAUSED:r}},function(t,e,i){for(var o,s,u,n,r=2;6!==r;)switch(r){case 4:i(3),o=n.assert,s=n.Hp,n=i(191).default,t.exports={STARTING:n.STARTING,BUFFERING:n.BUFFERING,REBUFFERING:n.REBUFFERING,PLAYING:a,PAUSED:a},r=7;break;case 2:u=i(11),i(28),n=i(32),r=4;break;case 7:r=6}function a(t,e,i,n){for(var r,a=2;12!==a;)switch(a){case 8:a=r.Lb&&r.Lb.Xa&&r.bitrate<r.Lb.Xa.ta-t.Rkb?7:6;break;case 4:n=i.length-1,a=3;break;case 14:return e.Ke=0,e;case 2:o(!u.sa(n),"Must have at least one selected stream"),o(u.Oa(e.ee),"player missing fragmentIndex"),e=s(n),a=4;break;case 3:a=-1<n?9:14;break;case 7:return e.Ke=n,e;case 6:--n,a=3;break;case 9:r=i[n],a=8}}},function(t,e,i){_esm(e),t=i(1025),e.default={PLAYING:t.Vn,PAUSED:t.Vn}},function(t,e,i){var E,n,k,S,T,I,O;_esm(e),e.Vn=void 0,t=i(0),E=t.__importStar(i(11)),n=t.__importDefault(i(32)),k=t.__importDefault(i(191)),S=i(74),T=t.__importDefault(i(3)),I=n.default.assert,O=n.default.Hp,e.Vn=void 0;for(var r=2;5!==r;)2===r&&(e.Vn=function(t,e,i,n,r,a,o){for(var s,u,c,h,f,l,d,p,b,g,m,v,y,w,A,_=2;66!==_;)switch(_){case 69:g=s,_=73;break;case 61:v.wZa=r,_=60;break;case 24:o=e.buffer.pt-o.fa,m=i[n],y=i[n],_=21;break;case 54:_=void 0!==l?53:65;break;case 30:_=b.Lb&&b.Lb.tdigest?29:38;break;case 19:v.Ke=m[y].I$b,_=18;break;case 21:s=0,_=35;break;case 9:s=m[m.length-1].f,_=8;break;case 75:_=m[s].f>y?73:74;break;case 77:_=m[s].f===y?76:75;break;case 51:u=l.get(h),f.push({d:u.duration,b:u.fa}),_=49;break;case 60:return v;case 16:r=[],a=(a=e.buffer).Tk-a.tc,o=S.yk.A1a(e.buffer.da),_=24;break;case 11:_=b===y?10:58;break;case 53:h=e.ee,_=52;break;case 38:p=void 0,b.Lb&&b.Lb.tputTrace&&(p=b.Lb.tputTrace),f=[],l=b.da,d=0,_=54;break;case 55:_=s<m.length?77:73;break;case 29:p=b.Lb.tdigest,A.push(p.min),A.push(p.ada),A.push(p.Ol),_=42;break;case 47:_=h<l.length?46:65;break;case 68:_=m[s].f<y?73:67;break;case 73:y=g,_=20;break;case 76:g=s,_=73;break;case 3:g=m[0].f,_=9;break;case 7:return k.default.PLAYING.call(this,t,e,i,n,r,a,o);case 67:s--,_=71;break;case 48:h=e.ee,_=47;break;case 62:s++,_=35;break;case 8:_=y<g||s<y?7:6;break;case 52:_=h<Math.min(h+t.XEb,l.length)?51:48;break;case 59:return k.default.PLAYING.call(this,t,e,i,n,r,a,o);case 42:A.push(p.nk),A.push(p.Pl),A.push(p.bda),_=39;break;case 46:d+=l.get(h).duration,_=45;break;case 58:g=void 0,_=57;break;case 65:l=void 0,e.xW&&(l=T.default.time.ia()-e.xW),r.push({ee:e.ee,Usc:l,Mqc:d,Hnc:w,Rsc:A,Tsc:p,Zoa:a,h5a:o,foc:f,pqc:m.bitrate,qqc:null!=(u=m.eb)?u:0,qoc:b.bitrate,roc:null!=(c=b.eb)?c:0,osc:y.bitrate,psc:null!=(c=y.eb)?c:0,Kt:g}),_=62;break;case 10:y=s,_=20;break;case 57:_=b<y?56:72;break;case 71:_=0<=s?70:73;break;case 56:s+=1,_=55;break;case 74:s++,_=55;break;case 6:a000.h9M(0),b=m[s=(s=(s=a000.I9M(g,y))<0?0:s)>=m.length?m.length-1:s].f,_=11;break;case 17:_=t.ZOb?16:60;break;case 45:h++,_=47;break;case 49:h++,_=52;break;case 39:A.push(p.max),_=38;break;case 72:--s,_=71;break;case 2:I(!E.sa(n),"Must have at least one selected stream"),I(E.Oa(e.ee),"player missing fragmentIndex"),m=t.adc,v=new O(n),y=null!=(g=e.ee)?g:-1,_=3;break;case 35:_=s<i.length?34:61;break;case 70:_=m[s].f===y?69:68;break;case 20:_=void 0!==y?19:59;break;case 18:v.Gh=i[v.Ke],_=17;break;case 34:g=s<=n,w=void 0,A=[],(b=i[s]).Lb&&b.Lb.throughput&&(w=b.Lb.throughput.ta),_=30}},r=5)},function(t,e,i){for(var n=2;8!==n;)switch(n){case 4:var m=i(6).Nc;t.exports={checkBuffering:function(i,t,e,n,r,a){var o=a000;function s(t){return t=n.da.I9(i.tc+t,void 0,!0),(u-i.Gj)/(u+(t.offset+t.fa)-c)}for(var u,c,h,f,l,d=2;37!==d;)switch(d){case 20:u=0,i.da.forEach(function(t){for(var e=2;1!==e;)2===e&&(u+=t.ea+t.duration>i.tc?t.fa:0,e=1)}),e=Math.max(e,1),d=17;break;case 14:a.UOb&&n.Lb&&n.Lb.ll&&n.Lb.ll.ta>a.hxa&&(b+=a.Una+n.Lb.ll.ta*a.wza),r&&(b+=r.ov*a.Vna),b=l?Math.min(l,b):b,d=11;break;case 24:c=n.da.Ai(r),d=23;break;case 31:--a,d=30;break;case 8:d=t<=a.mxa&&(0<t||!a.Yra)?7:6;break;case 43:return{complete:!1,SK:b=Math.min(l,h+g),progress:s(b)};case 16:d=n.da&&n.da.length?27:15;break;case 17:f=e*n.bitrate,d=16;break;case 22:d=t>f*a.C9?21:35;break;case 10:return{complete:!1,SK:b};case 11:d=t?20:10;break;case 42:g=f.offset,d=41;break;case 6:o.h9M(0);var p=o.K9M(20,21),b=a.Fj*(f?a.JAa:p),d=14;break;case 4:l=Math.min(a.cw,l),d=3;break;case 15:return{complete:!1,SK:b=t<f?Math.min(l,Math.max(a.k0*(f/t-1),b)):b,progress:0};case 35:b=n.da.te(r),a=Math.min(r+Math.floor(a.k0/b),n.da.length-1),g=n.da.Ai(a),o.O9M(16),b=o.I9M(555,14,96,7,11)*c*e/t-i.tc,d=31;break;case 9:return{complete:!0,reason:"maxsize"};case 26:d=-1===r?25:24;break;case 39:return{complete:!1,SK:b=0<t&&t<f?Math.min(l,Math.max(a.k0*(f/t-1),b)):b,progress:s(b)};case 2:h=i.Tk-i.tc,f=t===m.eg,t=n.Xa||0,b=0,l=a.GEa&&!f?a.dC:a.Kxa,d=4;break;case 25:return{complete:!0,reason:"outofrange"};case 21:return{complete:!0,reason:"hightp"};case 23:d=b<=h?22:39;break;case 27:r=n.da.No(i.Fc),d=26;break;case 7:return{complete:!1,EF:!0};case 29:f=n.da.get(a),o.O9M(0);var g=o.I9M(48,56)*g*e/t-f.ea-b;d=44;break;case 3:d=l<=h?9:8;break;case 41:--a,d=30;break;case 30:d=r<a?29:40;break;case 40:return{complete:!0,reason:"norebuff"};case 44:d=0<g?43:42}}},n=8;break;case 2:i(11),i(28),i(32),n=4}},function(t,e,i){var n,h,f;function r(){}_esm(e),e.Ug=e.Gc=e.ed=e.Dg=void 0,n=i(0),t=i(8),n=n.__importDefault(i(3)),h=i(32),f=t.ai(n.default,h.console,"SELECTLIVE"),r.prototype.aCa=function(){},r.prototype.M0=function(){},r.prototype.Vn=function(t,e,i,n){var r,a,o,s,u;n=new h.Hp(n);for(var c=i.length-1;-1<c;--c)if((r=i[c]).Lb&&r.Lb.Xa){if(a=r.Lb.Xa.ta,o=t.Rkb,s=r.bitrate,r=r.Rfb(null!=(u=e.ee)?u:-1),f.log("Stream "+c+": throughput="+a+", bitrate="+s+", threshold="+o+", feasible="+(u=s<a-o)+", live segment ID="+e.ee+", feasibleAllowSegment="+r),u&&r)return f.log("Threshold policy selected stream "+c),n.Ke=c,n}else f.warn("Stream has no throughput statistics");return n.Ke=0,f.log("Threshold policy selected stream 0 (no feasible streams)."),n},i=new r,e.Dg=i.Vn,e.ed=i.Vn,e.Gc=i.Vn,e.Ug=i.Vn},function(t,e,i){var n,r,a;_esm(e),e.wSa=void 0,t=(n=i(0)).__importDefault(i(3)),r=i(161),a=i(446),new t.default.Console("ASEJS_PREDICTOR","media|asejs"),i=function(i){return n.__extends(t,i),t.prototype.oSb=function(t,e){{var i,n;return i=this.config,n=e?i.mqa:i.Eoa,e=e?i.nqa:i.Goa,n=Array.isArray(e)?a.W3a(e,t.Tk-t.tc,i.Foa):n}},t.prototype.$bc=function(t,e){return e=this.So(t,e),t=!!t.Lt,t=this.config.GDa&&e<this.config.NW?!0:t},t;function t(t,e){for(;;){var a;return(a=i.call(this,t,e)||this).EK=function(t,e,i,n){{var r;return n=null!=n?n:a.CQ,r=a.So(t,i),t=a.$bc(t,i),e=r?r*(100-a.oSb(e,t))/100|0:0,{lower:e=a.G2a(e,n),upper:e*a.config.CEa}}},a}}}(r.jD),e.wSa=i},function(t,e,i){var n;_esm(e),e.KSa=void 0,n=i(0),t=function(i){return n.__extends(t,i),t;function t(t,e){for(;;){var r;return(r=i.call(this,t,e)||this).EK=function(t){for(var e,i=2;10!==i;)switch(i){case 5:i=t.Io&&t.Io.ta?3:4;break;case 11:i="ewma"===n?14:4;break;case 4:return e;case 1:var n;i="deliverytime"===(n=r.config.Pcc)?5:12;break;case 3:e=Math.sqrt(t.Io.ye||0),i=9;break;case 12:i="averagetp"===n?8:11;break;case 8:i=t.Io&&t.Io.gO?7:4;break;case 14:i=t.Io&&t.Io.OS?13:4;break;case 6:return{lower:t.Io.gO+r.config.iDa*e,upper:t.Io.gO+r.config.jDa*e};case 7:e=Math.sqrt(t.Io.OS||0),i=6;break;case 13:return e=Math.sqrt(t.Io.OS||0),{lower:t.Xa.ta+r.config.iDa*e,upper:t.Xa.ta+r.config.jDa*e};case 9:return{lower:8/(t.Io.ta+r.config.iDa*e),upper:8/(t.Io.ta-r.config.jDa*e)};case 2:e={lower:t.Xa.ta,upper:void 0},i=1}},r}}}(i(161).jD),e.KSa=t},function(t,e,i){var r,o,s;_esm(e),e.DHa=void 0,r=i(0),o=i(6),t=i(161),s=i(445),i=function(n){function t(t,e){for(var a,i=2;9!==i;)switch(i){case 2:(a=n.call(this,t,e)||this).EK=function(t,e,i,n){for(var r=2;11!==r;)switch(r){case 5:r="deliverytime-ci"===a.config.Jpa?4:13;break;case 7:return{lower:(null==e?void 0:e.low)||t.Xa.ta,upper:(null==e?void 0:e.high)||n};case 2:r=a.ICa(i)?1:5;break;case 12:e=t["throughput-ci"],r=3;break;case 9:r=i===o.za.Dg?8:6;break;case 3:n=a.config.CEa*t.Xa.ta,r=9;break;case 1:return a.I0b.EK(t,e,i,n);case 4:e=t["deliverytime-ci"],r=3;break;case 6:r=i===o.za.ed?8:14;break;case 14:r=7;break;case 13:r=12;break;case 8:return{lower:(null==e?void 0:e.initial)||t.Xa.ta,upper:(null==e?void 0:e.high)||n}}},a.I0b=new s.Yia(t,e),i=4;break;case 13:return a;case 4:return a}}return r.__extends(t,n),t}(t.jD),e.DHa=i},function(t,e){function i(t,e,i,n,r,a,o,s){this.$a=t,this.$Za=e,this.config=i,this.console=n,this.mediaType=r,this.Jb=a,this.Va=o,this.jc=s,this.Hs=this.Ki=!1}_esm(e),e.VLa=void 0,i.prototype.yO=function(t,e){!this.$a.G.Hw||this.jc.sN||this.jc.y6||(t-=this.$a.bf,this.Ki&&!this.Hs&&t+this.config.Wkb>=e&&0===this.Va.TF&&0===this.Va.uu&&0===this.Va.h8b&&((e=this.jc.df.T.Ub)+1<(t=this.jc.GP())||(this.$Za[this.mediaType].ukb||this.Jb.Nzb(this.mediaType),this.Hs=!0,this.$Za[this.mediaType].i_())))},e.VLa=i},function(t,e,i){var n,r,a,o;function s(){return null!==o&&o.apply(this,arguments)||this}_esm(e),e.TLa=void 0,n=i(0),r=i(10),t=i(447),a=i(440),o=t.Qga,n.__extends(s,o),s.prototype.oNb=function(t){o.prototype.gba.call(this,{value:t})},s.prototype.O9a=function(){return!0},s.prototype.aDa=function(){},s.prototype.gba=function(t){o.prototype.gba.call(this,t),t.done&&(t=this.Yu.VW,r.S&&this.H.trace("Requests drained",{Inc:t&&t.G.id}),(t=t&&t.ab(this.Zg))&&t instanceof a.m4&&t.yO(this.gg.Jta()||0))},e.TLa=i=s},function(t,e,i){var a,o,s;function n(t,e,i){this.H=t,this.bxb=e,this.Zg=i,this.O5=0,this.l6=!1,this.DU=[],this.KH=void 0,s.S&&t.trace("BranchRequestIterator [".concat(this.Zg,"]: created"))}_esm(e),e.JGa=void 0,a=i(0),o=i(131),s=i(10),Object.defineProperties(n.prototype,{LLb:{get(){return this.O5},configurable:!0},VW:{get(){return this.QUa},configurable:!0},gk:{get(){return this.l6},configurable:!0},O1a:{get(){return this.dm?this.dm.It?"Complete":this.dm.qAa?"WaitingForBranch":void 0!==this.KH&&0!==this.KH?"In Policy ".concat(this.DU[this.KH].name):"WaitingForRequest":"Uninitialized;Prior:".concat(this.bWa)},configurable:!0}}),n.prototype.next=function(){return a.__awaiter(this,void 0,void 0,function(){var e,i,n;return a.__generator(this,function(t){switch(t.label){case 0:return(e=this.dm)?(this.KH=void 0,[4,e.next()]):[3,6];case 1:i=t.ib(),n=0,t.label=2;case 2:return n<this.DU.length?(this.KH=n,[4,this.DU[n].process(i)]):[3,5];case 3:i=t.ib(),t.label=4;case 4:return n++,[3,2];case 5:return(this.KH=void 0,i.done||this.dm!==e)?[2,{done:!0}]:(this.O5++,i.value.YXa(),[2,{done:!1,value:i.value.value}]);case 6:return[2,o.AsyncIterator.sua()]}})})},n.prototype.t$b=function(){this.Vjb(),this.G8b()},n.prototype.Vjb=function(){var t;this.dm&&(this.bWa=this.O1a,(t=this.dm)&&t.ti(),this.DU.forEach(function(t){return t.reset()}),t&&s.S&&this.H.trace("BranchRequestIterator [".concat(this.Zg,"]: Disposing iterator that was on branch "),this.VW&&this.VW.G.id),this.l6=!1,this.KH=this.dm=void 0)},n.prototype.Rna=function(t){this.DU.push(t)},n.prototype.G8b=function(){var n,t,r,e=this;this.l6||(n=this.H,t=this.bxb,r=this.Zg,this.O5=0,this.bWa=this.QUa=void 0,this.dm=o.flatten(o.map(t.C7a(),function(i){return a.__awaiter(e,void 0,void 0,function(){var e;return a.__generator(this,function(t){switch(t.label){case 0:return this.QUa=i,this.O5=0,s.S&&n.trace("BranchRequestIterator [".concat(this.Zg,"]: new branch ").concat(i.G.id)),[4,i.ky(r)];case 1:return(e=t.ib())?[2,{value:e}]:(s.S&&n.error("BranchRequestIterator [".concat(this.Zg,"]: skipping branch ").concat(i.G.id)),[2,{value:[]}])}})})},n),n),this.l6=!0)},e.JGa=n},function(t,e,i){var n,u,c,h;function r(t,e,i,n,r,a,o,s){this.mediaType=t,this.console=e,this.Ia=i,this.ZN=n,this.tn=r,this.O_=a,this.$d=o,this.EA=[],this.mediaType===u.u.J&&this.EA.push(new h.oSa(t,e,i,n,r,a,o,s,2)),this.EA.push(new c.QSa(t,e,i,n,r,a,o,"stream",1,null==s?void 0:s.V8a()))}_esm(e),e.kRa=void 0,n=i(0),u=i(6),c=i(1035),h=i(1036),r.prototype.dt=function(e,i,n){this.Ia=e,this.$d=i,this.ZN=n,this.YDa.forEach(function(t){return t.dt(e,i,n)})},r.prototype.vYa=function(t){this.EA.push(t)},r.prototype.Ugb=function(e){this.EA=this.EA.filter(function(t){return t!==e}),e.close()},r.prototype.G1a=function(t){return t=t({ZN:this.ZN,tn:this.tn,console:this.console,U:this.Ia,O_:this.O_,$d:this.$d}),this.vYa(t),t},r.prototype.reset=function(){this.EA.forEach(function(t){return t.reset()})},r.prototype.close=function(){this.EA.forEach(function(t){return t.close()})},r.prototype.dh=function(t){return n.__read(this.EA,1)[0].dh(t)},Object.defineProperties(r.prototype,{YDa:{get(){return this.EA},configurable:!0}}),e.kRa=r},function(t,e,i){var n,r,a,o;function s(){return null!==o&&o.apply(this,arguments)||this}_esm(e),e.QSa=void 0,n=i(0),r=i(10),a=i(2),o=i(270).L4,n.__extends(s,o),s.prototype.ew=function(t){var e=t.stream,i=t.vd,n=t.Mc;t=t.ec,a.assert(void 0!==i,"playerStartTimestamp undefined at media append"),a.assert(void 0!==t,"contentStartTimestamp undefined at media append"),this.Lna({stream:e,ec:t,S3a:function(t){return this.stream===t.stream}},i,n)&&r.S&&this.trace("stream ".concat(e.id,", ").concat(e.bitrate,"kbit/s @ ").concat(i.W,"ms"))},s.prototype.Cra=function(t,e){var i=t.Mw.stream,n=this.Ia.On(e);a.assert(void 0!==n),r.S&&this.trace("emitStreamPresentingEvent @ ".concat(t.timestamp.W,"ms for ").concat(null==i?void 0:i.id,", ")+"".concat(null==i?void 0:i.bitrate,"kbit/s")),this.events.emit("streamPresenting",{type:"streamPresenting",mediaType:i.mediaType,playerTimestamp:e,position:n,trackIndex:null==(e=null==i?void 0:i.track)?void 0:e.IA,streamIndex:null==i?void 0:i.cg,stream:i,manifest:null==(n=i.T)?void 0:n.ja,contentStartTimestamp:t.Mw.ec})},e.QSa=s},function(t,e,i){var n,u,c,h,f;function r(t,e,i,n,r,a,o,s,u){return(t=f.call(this,t,e,i,n,r,a,o,"segment",u,null==s?void 0:s.V8a())||this).rp=s,t}_esm(e),e.oSa=void 0,n=i(0),u=i(10),c=i(2),h=i(8),f=i(270).L4,n.__extends(r,f),r.prototype.ew=function(t){var e,i=t.vd,n=t.Mc,r=t.ec,a=t.bitrate,o=t.eb;c.assert(void 0!==i),t=null==(e=this.Ia.On(i))?void 0:e.X,c.assert(void 0!==t),this.pba=e={X:t,ec:r,Xmb:a,eb:o,u7b:null==(r=this.pba)?void 0:r.Xmb,v7b:null==(a=this.pba)?void 0:a.eb},this.Lna(e,i,n)&&u.S&&this.trace("segment ".concat(t," @ ").concat(i.W,"ms"))},r.prototype.D$a=function(t,e){return t.ec.lessThan(e.ec)&&t.X===e.X},r.prototype.Cra=function(t,e){var i=(o=t.Mw).X,n=o.Xmb,r=o.u7b,a=o.eb,o=o.v7b,s=this.Ia.On(e);c.assert(void 0!==s),u.S&&this.trace("emitSegmentPresentingEvent @ ".concat(t.timestamp.W,"ms for segment ").concat(i)),s.X!==i&&(u.S&&this.console.warn("player position:",s,"not equal to trackedElement:",i),s={X:i,offset:h.M.Ka}),t={type:"segmentPresenting",playerTimestamp:e,position:s},this.rp&&((i=this.rp.Ota(i))&&(i.destvbitrate=n,i.destvmaf=a,i.srcvbitrate=r,i.srcvmaf=o),t.metrics=i),u.S&&this.trace("segmentPresenting: ".concat(JSON.stringify(t))),this.events.emit(t.type,t)},r.prototype.reset=function(){f.prototype.reset.call(this),this.pba=void 0},r.prototype.close=function(){f.prototype.close.call(this),this.pba=void 0},e.oSa=r},function(t,e,i){var r,a,n;function o(t,e,i){this.$d=t,this.W1b=e,this.H=i}_esm(e),e.CJa=void 0,r=i(0),a=i(10),n=i(64),Object.defineProperties(o.prototype,{name:{get(){return"ExitZone"},configurable:!0}}),o.prototype.waitUntil=function(t){var e=(t=n.kga(this.$d,t,!0)).promise;return this.mCb=t.ao,e},o.prototype.process=function(n){return r.__awaiter(this,void 0,void 0,function(){var e,i;return r.__generator(this,function(t){switch(t.label){case 0:return n.done?[3,2]:(e=n.value.value).Fsa?(i=e.vd.Ea(this.W1b),a.S&&this.H.trace("[".concat(e.mediaType,"] JIT: waiting until playertime >= ").concat(i.W),"to append next request ".concat(e.toString())),[4,this.waitUntil(i)]):[3,2];case 1:t.ib(),a.S&&this.H.trace("[".concat(e.mediaType,"] JIT: now appending request ").concat(e.toString())),t.label=2;case 2:return[2,n]}})})},o.prototype.reset=function(){var t;null!=(t=this.mCb)&&t.tb()},e.CJa=o},function(t,e,i){var o,s,u,n;function r(t,e,i,n){var r=this;this.$d=t,this.l5b=e,this.iza=i,this.H=n,t.Da.on("stopStart",function(){return r.ZHb()}),s.S&&this.H.trace("PacingThrottler: pacingFactory=".concat(e,", pacingThreshold=").concat(i.ac()))}_esm(e),e.UOa=void 0,o=i(0),s=i(10),u=i(2),n=i(64),Object.defineProperties(r.prototype,{name:{get(){return"Pacing"},configurable:!0}}),r.prototype.ZHb=function(){var t=this.$d.Da;this.BO=t.gk?t.currentTime:void 0,this.bW=this.NX=void 0,s.S&&this.H.trace("PacingThrottler: clock reset ".concat(null==(t=this.BO)?void 0:t.W))},r.prototype.waitUntil=function(t){var e=(t=n.kga(this.$d,t,!0)).promise;return this.ehc=t.ao,e},r.prototype.process=function(a){return o.__awaiter(this,void 0,void 0,function(){var e,i,n,r;return o.__generator(this,function(t){switch(t.label){case 0:return a.done?[3,11]:(e=a.value.value,u.assert(e.vd),i=this.$d.Da,this.NX&&this.bW?this.bW.greaterThan(this.iza)?this.BO?(n=e.vd.Ea(this.BO).Ea(this.iza),(r=this.BO.add(n.Xk(this.l5b))).lessThan(e.vd)?r.greaterThan(i.currentTime)?(s.S&&this.H.trace("PacingThrottler: waiting until ".concat(r.ac()," for mediaRequest @")+"".concat(e.vd.ac(),", ")+"current time ".concat(i.currentTime.ac(),", ")+"clock start time ".concat(this.BO.ac(),", ")+"distance ".concat(n.ac())),[4,this.waitUntil(r)]):[3,2]:[3,3]):[3,5]:[3,8]:[3,10]);case 1:t.ib(),t.label=2;case 2:return[3,4];case 3:s.S&&this.H.warn("PacingThrottler: invalid schedule time "+"".concat(r.ac()," for mediaRequest ")+"@".concat(e.vd.ac(),", ")+"current time ".concat(i.currentTime.ac(),", ")+"clock start time ".concat(this.BO.ac(),", ")+"distance ".concat(n.ac())),t.label=4;case 4:return[3,7];case 5:return(n=e.vd.Ea(this.NX)).greaterThan(this.iza)?(s.S&&this.H.trace("PacingThrottler: (buffering) waiting until ".concat(this.NX.W,"ms")+" for mediaRequest @".concat(e.vd.W,"ms, ")+"current time ".concat(i.currentTime.W)),[4,this.waitUntil(this.NX)]):[3,7];case 6:t.ib(),t.label=7;case 7:return[3,9];case 8:this.bW=this.bW.add(e.uv),t.label=9;case 9:return[3,11];case 10:this.NX=e.vd,this.bW=e.uv,t.label=11;case 11:return[2,a]}})})},r.prototype.reset=function(){var t;null!=(t=this.ehc)&&t.tb()},e.UOa=r},function(t,e,i){var r;function n(t){this.ez=t}_esm(e),e.cSa=void 0,r=i(0),Object.defineProperties(n.prototype,{name:{get(){return"Transition"},configurable:!0}}),n.prototype.process=function(i){var n;return r.__awaiter(this,void 0,void 0,function(){var e;return r.__generator(this,function(t){switch(t.label){case 0:return i.done?[3,3]:(e=i.value.value,this.AN&&e.Dv?[4,this.ez.fhc({mediaType:e.mediaType,to:{stream:e.stream,X:null==(n=e.Va)?void 0:n.$a.G.id},from:{stream:this.AN.stream,X:this.AN.X},timestamp:e.vd,x7b:null==(n=this.AN)?void 0:n.vd})]:[3,2]);case 1:t.ib(),t.label=2;case 2:return this.AN={stream:e.stream,vd:e.vd,X:null==(n=e.Va)?void 0:n.$a.G.id},[3,4];case 3:this.AN=void 0,t.label=4;case 4:return[2,i]}})})},n.prototype.j4b=function(){this.AN=void 0},n.prototype.reset=function(){},e.cSa=n},function(t,e){function i(t,e,i,n,r,a,o,s,u,c){var h=this;this.id=t,this.T=e,this.ea=i,this.cX=r,this.mm=a,this.Hw=o,this.lq=s,this.Dq=u,this.xe=c,this.QP=function(t){var e;return(null==(e=null==(e=h.mm)?void 0:e[t])?void 0:e.Pec)||h.xe},this.Qa=n||1/0}_esm(e),e.gSa=void 0,Object.defineProperties(i.prototype,{N:{get(){return this.T.N},configurable:!0}}),i.prototype.V5a=function(){var i=this,t=Object.keys(this.mm||{}).filter(function(t){var e;return!(null==(e=null==(e=i.mm)?void 0:e[t])||!e.weight)});return t.length&&null!=(t=t.map(this.QP).reduce(function(t,e){return t===e?e:void 0}))?t:this.xe},i.prototype.toString=function(){return"segmentId: "+this.id+" playlistSegmentId: "+this.Dq+" viewableId: "+this.T.N+" pts: "+this.ea+"-"+this.Qa+" defaultKey: "+this.cX+" dests: "+JSON.stringify(this.mm)+" terminal: "+!!this.Hw},i.prototype.toJSON=function(){return{id:this.id,viewable:this.T.N,"startPts:":this.ea,endPts:this.Qa,defaultKey:this.cX,"dests:":this.mm,terminal:!!this.Hw,playlistSegmentId:this.Dq}},e.gSa=i},function(t,e,i){var h,p,n,b,g,m,v;_esm(e),e.HFa=void 0,t=i(0),h=t.__importStar(i(11)),p=i(192),n=i(77),b=t.__importDefault(i(1042)),g=i(422),m=t.__importDefault(i(28)),v=t.__importDefault(i(3)),i=function(){for(var t=2;24!==t;)switch(t){case 7:e.prototype.XX=function(){return this.AUa},e.prototype.iL=function(t){for(var e=2;5!==e;)2===e&&(this.sV.iL(t),this.SXa=t,e=5)},e.prototype.EY=function(){return this.SXa},e.prototype.LCb=function(t,e,i,n,r,a){for(var o,s=2;5!==s;)2===s&&((o=this.K).jga&&this.FAb(e)||!i||!n||!(i=a?Math.min(i,n,a):Math.min(i,n))||(this.Np.get(),t=(n=this.Bb.Wa).Tx(n.Yc,t),e.track.Xv()&&t>o.Roa&&i===r?(o.set?(o.set({pipelineEnabled:!0}),o.set({maxParallelConnections:1}),o.set({maxActiveRequestsPerSession:2}),o.set({maxPendingBufferLen:500})):(o.Ij=!0,o.DQ=1,o.Cy=2,o.Oba=500),e.track.Yda({type:e.track.config.type,connections:1,openRange:!1,pipeline:!0,socketBufferSize:o.PS,minRequestSize:o.fK}),this.HDa++,o.jga&&(this.F6=!0)):o.Ij&&!e.Xv()&&(t<o.Qoa||i!==r)&&(o.set?(o.set({pipelineEnabled:!0}),o.set({maxParallelConnections:3}),o.set({maxActiveRequestsPerSession:3}),o.set({maxPendingBufferLen:12e3})):(o.Ij=!0,o.DQ=3,o.Cy=3,o.Oba=12e3),e.track.Yda({type:e.config.type,connections:3,openRange:!1,pipeline:!0,socketBufferSize:o.PS,minRequestSize:o.fK}),this.IDa++,o.jga&&(this.G6=!0))),s=5)},t=12;break;case 2:Object.defineProperties(e.prototype,{Uaa:{get(){return this.kma},configurable:!0}}),Object.defineProperties(e.prototype,{AAa:{get(){return this.XWa},configurable:!0}}),e.prototype.Eib=function(t,e,i){for(var n=2;4!==n;)2===n&&(this.nF=t,h.sa(e)||(this.I8a=e),h.sa(i)||(this.H8a=i),n=4)},t=4;break;case 12:e.prototype.PCb=function(t,e){for(var i,n,r,a=2;6!==a;)switch(a){case 2:i=this.K,a=1;break;case 7:this.no.Bwa=i,a=6;break;case 5:void 0===this.no&&(this.no={startTime:v.default.time.ia(),hW:[],X1:[],Hwa:void 0,Bwa:void 0}),i=Math.floor((v.default.time.ia()-this.no.startTime)/i.lO),n=this.no.Bwa,r=this.no.Hwa?i-this.no.Hwa-1:i,a=9;break;case 8:this.no.hW[r]=t,this.no.X1[r]=e,a=7;break;case 9:a=void 0===n||n<i?8:7;break;case 1:a=this.gWa?5:6}},e.prototype.Z3b=function(){for(var e,t,i=2;4!==i;)switch(i){case 9:e=this.Bb,i=0;break;case 1:i=this.$H.zt?5:4;break;case 8:i=this.$H.zt?7:5;break;case 2:e=this.Bb,i=1;break;case 5:try{for(t=2;1!==t;)2===t&&(this.Np.u9b(),this.XWa.cd(),t=1)}catch(t){a000.h9M(6),e.Jb.fp(a000.K9M("Hindsight: Error during clean up: ",t))}i=4}},e.prototype.o4b=function(t){for(var e=2;1!==e;)2===e&&(this.K.dP&&t===m.default.Sd.J&&(this.IDa=this.HDa=this.pjb=this.qjb=this.peb=this.qeb=0),e=1)},e.prototype.l4b=function(t,e){for(var i=2;1!==i;)2===i&&(t===m.default.Sd.J&&(this.Vgc=e),i=1)},t=19;break;case 19:e.prototype.lHb=function(t){for(var e,i,n,r,a,o=2;6!==o;)switch(o){case 1:o="none"!==e.uG&&!0!==this.Lt&&t.state<=e.Jxa?5:6;break;case 2:e=this.K,o=1;break;case 9:void 0!==r&&void 0!==r.Ol&&void 0!==r.nk&&void 0!==r.Pl&&(i=(r.Pl-r.Ol)/r.nk),o=8;break;case 5:n=this.Np.get(),o=4;break;case 3:r=this.xVa(n),o=9;break;case 8:a=e.e_?m.default.Sj.oD:m.default.Sj.pD,n&&n.confidence>=a&&this.lma(e.uG,n,r,i)&&(this.Lt=!0,this.q8=t.state),o=6;break;case 4:o="iqr"===e.uG?3:8}},e.prototype.kDb=function(t){for(var e=2;1!==e;)2===e&&(t.Lt=this.Lt,e=1)},e.prototype.qQb=function(i){for(var n,t,e,r,a=2;25!==a;)switch(a){case 9:o.actualbw=e,o.isConserv=this.Lt,o.ccs=this.q8,a=6;break;case 11:e=[(n=function(t){return h.Oa(t)?Number(t).toFixed(2):-1})(r.min||void 0),n(r.ada||void 0),n(r.Ol||void 0),n(r.nk||void 0),n(r.Pl||void 0),n(r.bda||void 0),n(r.max||void 0)],t=[],a=19;break;case 1:c.fields=o,Object.keys(i).forEach(function(t){for(var e=2;1!==e;)switch(e){case 4:o[t]=i[t],e=5;break;case 2:o[t]=i[t],e=1}}),(e=this.Np.get())&&e.Xa&&(e=e.Xa.ta),a=9;break;case 12:a=r?11:16;break;case 6:o.isLowEnd=this.ZYb,a=14;break;case 14:o.histdiscbw=this.nF,r=this.H8a,a=12;break;case 19:r=h.isArray(r.xj)&&r.xj.reduce(function(t,e){{var i;return i=n(e.ag||void 0),e=n(e.n||void 0),-1<i&&-1<e&&t.push({mean:i,n:e}),t}},t),o.histtdc=r,a=17;break;case 2:var o={},s=this.K,u=this.Bb,c={type:"logdata",target:"startplay",fields:{}},a=1;break;case 16:o.histage=this.I8a,s.Era&&this.lN&&(o.ishighstable=this.kma,o.avg_avtp=this.lN.cFb,o.avg_ne=Number(this.lN.eFb).toFixed(4)),u.Hc&&(s=v.default.oq(),o.maxAudioBufferAllowedBytes=s[m.default.Sd.P],o.maxVideoBufferAllowedBytes=s[m.default.Sd.J]),u.emit(c.type,c),a=25;break;case 17:o.histtd=e,a=16}},e.prototype.rQb=function(t){for(var n,r,a,o,e,i,s,u=2;6!==u;)switch(u){case 3:a.confidence&&(e=a.Xa?a.Xa.ta:0,i=a.ll?a.ll.ta:0,s=a.XP?a.XP.ta:0),t.location={responseTime:i,httpResponseTime:s,bandwidth:e,confidence:a.confidence,name:this.Vgc},this.gWa&&(t.bt={startTime:this.no.startTime,audioMs:this.no.hW,videoMs:this.no.X1},this.no.hW=[],this.no.X1=[],this.no.Hwa=this.no.Bwa),"none"!==r.uG&&(t.isConserv=this.Lt,t.ccs=this.q8),u=6;break;case 2:r=(n=this).K,a=this.Np.get(),o=[],[m.default.Sd.J,m.default.Sd.P].forEach(function(t){for(var e,i=2;4!==i;)switch(i){case 2:i=n.uc(t)?1:4;break;case 1:void 0!==(e=n.Bb.H7a(t))&&(t===m.default.Sd.J&&(r.dP&&(e.parallelDownloadMs=n.qeb,e.parallelDownloadBytes=n.peb,e.singleDownloadMs=n.qjb,e.singleDownloadBytes=n.pjb,e.switchFromParallelToSingle=n.HDa,e.switchFromSingleToParallel=n.IDa),a&&a.confidence&&a.Xa&&(e.asetput=a.Xa,e.aseiqr=a.Wv,e.tdigest=a.Qg&&a.Qg.CB()||void 0),a&&a.avtp&&(e.avtp=a.avtp.ta)),o.push(e)),i=4}}),t.stat=o,s=i=e=0,u=3}},e.prototype.FAb=function(t){for(var e,i=2;6!==i;)switch(i){case 1:i=this.F6&&t.Xv()?5:4;break;case 4:this.F6&&(this.F6=!1),i=3;break;case 5:case 9:return!0;case 2:e=this.K,i=1;break;case 8:return this.G6&&(this.G6=!1),!1;case 3:i=this.G6&&e.Ij&&!t.Xv()?9:8}},e.prototype.xVa=function(t){for(var e=2;4!==e;)switch(e){case 6:t=t.Qg,e=4;break;case 1:t=t.Qg,e=5;break;case 2:e="tdigest"===this.K.Zua?1:3;break;case 5:case 14:return t;case 3:e=9;break;case 12:e=8;break;case 9:t=t.Wv&&t.Wv.kda,e=5}},t=26;break;case 4:e.prototype.sEa=function(t){for(var e=2;5!==e;)2===e&&(this.K=t,this.sV.sEa(t),e=5)},e.prototype.lma=function(t,e,i,n){for(var r,a=2;7!==a;)switch(a){case 3:return!1;case 8:return!e.Xa||e.Xa.ta<r.NW;case 2:r=this.K,a=1;break;case 1:a="iqr"===t?5:9;break;case 5:a=void 0!==n?4:3;break;case 9:a="avg"===t?8:3;break;case 4:return!!(e.Xa&&i&&h.Oa(n)&&e.Xa.ta<r.NW&&n>r.oia)}},e.prototype.IP=function(t){return t===n.u.J?this.sV.EK:this.sV.T_},e.prototype.gz=function(t){for(var e=2;5!==e;)2===e&&(this.sV.gz(t),this.AUa=t,e=5)},t=7;break;case 26:return e.prototype.Myb=function(t,e,i){for(var n,r=2;3!==r;)2===r&&(n=this.K,this.lma(n.uG,t,e,i)?this.Lt=!0:this.Lt=!1,this.q8=0,this.lma(n.jxa,t,e,i)&&(this.ZYb=!0),r=3)},e}function e(e,t,i,n,r,a,o,s,u){for(var c,h,f,l=2;31!==l;)switch(l){case 23:this.lN=new g.kia(o,r,this.H),l=22;break;case 25:l=o&&1<o.length&&r.Era?24:32;break;case 34:l=33;break;case 33:this.lN=new g.kia(o,r,this.H),l=22;break;case 21:l="LR"===d?35:34;break;case 32:r.jga&&(this.G6=this.F6=!1),l=31;break;case 15:l=this.$H.zt?27:26;break;case 3:this.Bb=e,this.Qb=this.H.warn.bind(this.H),this.Xj=this.H.trace.bind(this.H),l=6;break;case 22:this.kma=this.lN.Uaa(),l=32;break;case 6:this.K=r,this.SXa=this.AUa=null,this.gWa=0==Math.floor(1e6*Math.random())%r.Soa,this.nF=this.H8a=this.I8a=this.q8=this.Lt=void 0,l=11;break;case 35:this.lN=new g.JKa(o,r,this.H),l=22;break;case 27:try{for(c=2;4!==c;)switch(c){case 5:this.XWa=h,c=4;break;case 7:this.XWa=h,c=8;break;case 2:h=new b.default(e,this.H,{bufferSize:v.default.oq()},r),this.Np.VCb(h),c=5}}catch(t){a000.O9M(6),e.Jb.fp(a000.K9M("Hindsight: Error when creating QoEEvaluator: ",t))}l=26;break;case 26:this.kma=!1,l=25;break;case 24:var d;l="baseline"===(d=r.QWb)?23:21;break;case 11:this.IDa=this.pjb=this.qjb=this.HDa=this.peb=this.qeb=0,this.sV=p.IP(r,a),t=this.xVa(i),l=18;break;case 2:this.H=t,this.Np=n,this.uc=s,this.$H=u,l=3;break;case 18:void 0!==t&&void 0!==t.Ol&&void 0!==t.nk&&void 0!==t.Pl&&(f=(t.Pl-t.Ol)/t.nk),n=r.e_?m.default.Sj.oD:m.default.Sj.pD,i&&i.confidence>=n&&i.Xa&&f&&this.Myb(i,t,f),l=15}}}(),e.HFa=i},function(t,e,i){var r,a,l;function n(t,e,i,n){this.Bb=t,this.H=e,this.Ik=this.H.error.bind(this.H),this.Qb=this.H.warn.bind(this.H),this.Xj=this.H.trace.bind(this.H),this.hg=this.H.log.bind(this.H),this.Mwb=new a,this.K=n,this.x6=[],this.O6=void 0,t=n.maa,r.call(this,t.numB*t.bSizeMs,t.bSizeMs),this.fma=!0}i(28),e=i(3).default,r=i(154),i(449),a=i(1043),new e.Console("ASEJS_QOE_EVAL","media|asejs"),l=i(132).mRa||i(132),(n.prototype=Object.create(r.prototype)).add=function(t,e,i){this.O6||(this.O6=e),r.prototype.add.call(this,t,e,i)},n.prototype.zSb=function(){var e;if(0!==this.x6.length)return e=[],this.x6.forEach(function(t){t&&t.YN&&e.push(t.CB())}),e},n.prototype.cd=function(){this.x6=[]},n.prototype.wVb=function(){var i,n,t=this.get(this.K.maa.fillS);if((0===t[0]||null===t[0])&&(t.some(function(t,e){if(t)return i=t,n=e,!0}),i))for(var e=0;e<n;e++)t[e]=i;return t={trace:t,timestamp:this.O6,SA:this.Ud},this.fma=!1,r.prototype.reset.call(this),this.fma=!0,this.O6=void 0,t},n.prototype.Rra=function(t){var e,i,n,r,a,o;if(t&&!t.YN){if((i=t.wv.k$a)&&(t.IAa=this.doa(t),t.Wda=!1),(e=this.wVb())&&e.trace&&e.trace.length){if((n=t.wk.ZF)<(r=e.timestamp))for(a=e.SA,o=e.trace[0],n=Math.ceil((r-n)/a),e.timestamp=r-n*a,r=0;r<n;r++)e.trace.splice(0,0,o);e.trace.length&&e.trace.pop()}(t.TC=e).trace&&0===e.trace.length||void 0===e.timestamp||(e=this.hGb(t),t.Udb=e,i&&e&&(t.Wda=e.Kt),t.YN=!0,this.x6.push(t))}},n.prototype.hGb=function(t){var e,i,n,r;for(var a=this.K.laa,o={Kt:!1,Haa:!1,oOb:0},s=0;s<a.length;s++)if(e=a[s],i=this.Mwb.create(e)){n=l.now(),r={};try{f=c=u=h=void 0;for(var u,c,h=t.uz,f=0;f<h.length;f++)if(u=h[f].reduce(function(t,e){return e.eb?t+1:t},0),void 0===c)c=u;else if(u!==c)throw Error("length of per-fragment vmafs mismatch across streams [ceil(log2(delta))="+Math.ceil(Math.log(c<u?u-c:c-u)*Math.LOG2E)+"]");r=i(t)}catch(t){r.qP=t}r.LDb=l.now()-n,o[e]=r,o.Kt=o.Kt||r.Kt,o.Haa=o.Haa||r.Haa,o.qP=o.qP||r.qP}return o},n.prototype.doa=function(t){var e="";return(t=t.wv).wp<1e3&&(e+=t.pnb),t.Xs<1e3&&(e=e+(""!==e?",":"")+t.cZa),e=1e3<=t.wp&&1e3<=t.Xs?"media":e},t.exports=n},function(t,e,i){var n;function r(){}function a(e,i,n){return function(t){return t.rs=i,t.compare=n,e(t)}}n=i(1044),(r.prototype.constructor=r).prototype.create=function(t){var e;switch(t){case"htwbr":break;case"htwbr-dlvmaf":e=a(n.JY,!1,n.w0a);break;case"htwbr-segvmaf":e=a(n.JY,!0,n.w0a);break;case"hvmafgr":case"hvmafgr-dlvmaf":e=a(n.JY,!1,n.bqa);break;case"hvmafgr-segvmaf":e=a(n.JY,!0,n.bqa);break;case"hvmafdp":case"hvmafdp-dlvmaf":e=a(n.dp,!1);break;case"hvmafdp-segvmaf":e=a(n.dp,!0);break;default:throw Error("Unrecognized hindsight algorithm")}return e},t.exports=r},function(t,e,i){var j,N,h,f,s,u,c,M,l,D,L;function B(t,e,i){return(e=t.uz[e][i]).fa+t.wk.qW*e.duration/8}function U(t){for(var e,i,n,r,a=t.wk,o=a.Zn,s=(c=t.wv).by,u=[],c=s=Math.min(c.ZJ,s);o<=c;c--){if(L.update("backward step loop"),i=e=t.uz[0][c].ea-t.wk.ea,c<s&&(j(void 0!==u[c+1],"expect solution[(fragIndex + 1)] !== undefined"),i=Math.min(u[c+1].startTime,i)),(r=q(n=B(t,0,c),i,t.TC,a.ZF))<0)throw Error("Infeasible: reason throughput at min bitrate");u[(n={startTime:r,endTime:i,G8:i,JNb:e,TR:n,Ke:0}).Y4a=c]=n}for(a=0,c=o;c<=s;c++)a+=u[c].TR,u[c].lra=a;if(F(t,u,o,s))return{Kt:!0,tya:0==u.length,ys:u};throw Error("Infeasible: reason buffer capacity at min bitrate")}function F(t,e,i,n){for(var r,a,o,s,u,c,h,f,l,d;i<=n;i++){if(L.update("checkBuffer"),r=t,a=e,o=i,L.update("check buffer vacancy"),s=r.wk,u=r.uz[s.VY],c=r.ZZa,h=!0,r=r.OQb(Math.floor(a[o].startTime)+s.ea),f=s.xu+a[o].lra,d=l=0,r.index<s.Zn){for(var p=0,b=s.NC;b<r.index;b++)p+=u[b].fa;for(l+=p,p=0,b=s.NC;b<r.index;b++)p+=u[b].duration;d+=p}else l+=s.xu,d+=s.wp;for(p=0,b=s.Zn;b<r.index;b++)p+=a[b].TR;for(l+=p,p=0,b=s.Zn;b<r.index;b++)p+=u[a[b].Y4a].duration;if(d+=p,r=f-l,((s=u[o].ea+u[o].duration-s.ea-d)>=c.cw||r>=c.Ymb)&&(h=!1),a[o].h_a=r,a[o].Zoa=s,!h)return}return 1}function d(t,e,i){return e=Math.min(t.length-1,e),t[e=Math.max(0,e)]*i/8}function q(t,e,i,n){var r,a=i.trace,o=+i.SA,s=e+n-i.timestamp,u=Math.floor(+s/o);if(t<=(e=(s-u*o)/o*d(a,u,o)))r=s-+t/e*(s-u*o);else for(s=u;e<t;){if(L.update("find download start time"),--s<0)return-1;if(t<=e+(u=d(a,s,o))){r=(s+1)*o-(t=(t-e)/u*o);break}e+=u}return r+i.timestamp-n}j=i(2).assert,N=i(1045),h=i(450).Lpb,f=i(450).Mpb,s=i(1046).drb,u=i(451).hwb,c=i(271).PGa,M=i(265).s4,l=i(90).default,D=new(i(3).default.Console)("ASEJS_QOE_EVAL","media|asejs"),L=i(132).mRa||i(132),t.exports={JY:function(t){var e,i,n,r,a,o,s,u,c,h,f,l,d,p,b,g,m,v,y,w,A,_,E,k,S,T;D.debug("greedy DEBUG false"),L.pCa("greedy-"+(t.rs?"segvmaf":"dlvmaf")+": ");try{for(t.XJ=[],e=t.uz,i=t.wk,r=(n=t.wv).by,a=t.Pc,r=Math.min(n.ZJ,r),s=i.Zn;s<=r;s++){for(u=new N,t.XJ[s]=u,e[0][s].epa=e[0][s].fa,o=1;o<e.length;o++)e[o][s].epa=e[o][s].fa;for((c=e[o=0][s]).GF=1/0,c.cg=o,o=1;o<e.length;o++)(c=e[o][s]).cg=o,h=u.Qaa()?e[0][s]:u.O5b(),f=8*c.epa/c.duration,l=8*h.epa/h.duration,p=t.rs&&void 0!==c.eb?(d=c.eb,h.eb):(d=a[o].eb,a[h.cg].eb),c.aw=f-l,c.GF=(d-p)/c.aw,isFinite(c.GF)&&(0<c.GF||o==e.length-1)&&0<c.aw&&u.enqueue(c)}for(s=i.Zn;s<=r;s++)for(i=[],b=[],O=[],g=t.XJ[s].co(),e=0;e<g.length;e++)c=g[e],i.push(c.aw.toFixed(2)),t.rs&&void 0!==c.eb?b.push(c.eb):b.push(a[c.cg].eb),O.push(c.GF.toFixed(4));if((m=U(t)).tya)return m;v=t.wk,I=(y=t.wv).by;for(var I=Math.min(y.ZJ,I),O=[],x=v.Zn;x<=I;x++)t.XJ[x].Qaa()||O.push(t.XJ[x].QO());j(void 0!==t.compare,"playSegment.compare required for greedy");for(var R=new M(O,t.compare);0<R.length;){L.update("upgrade frags"),w=R.pop();t:if(I=v=void 0,O=m,b=w,A=(x=t).wk,_=x.wv,E=Math.min(_.ZJ,_.by),k=JSON.parse(JSON.stringify(O.ys)),j(b&&k[b.index].Ke<b.cg,"expect solution[targetFrag.index].selectedStreamIndex < targetFrag.streamIndex"),(v=k[I=b.index]).Ke=b.cg,v.TR=B(x,v.Ke,I),v.startTime=q(v.TR,v.G8,x.TC,A.ZF),(k[I]=v).startTime<0)S=!1;else{for(I=b.index-1;I>=A.Zn&&(v=k[I],T=k[I+1].startTime,!(v.G8<=T));I--)if(v.G8=T,v.startTime=q(v.TR,v.G8,x.TC,A.ZF),(k[I]=v).startTime<0){S=!1;break t}for(var P=b.index+1;P<=E;P++)k[P].lra=k[P].TR+(P>x.wk.Zn?k[P-1].lra:0);for(var C=b.index+1;C<=E;C++)if(k[C].startTime>k[b.index].JNb){E=C-1;break}S=!!F(x,k,b,Math.min(I+1,b.index))&&(O.ys=k,!0)}!S||t.XJ[w.index].Qaa()||R.push(t.XJ[w.index].QO())}}finally{delete t.XJ}for(E=_=A=S=w=R=0;E<m.ys.length;E++)(k=m.ys[E])&&(R+=((T=t.uz[k.Ke][k.Y4a]).eb||t.Pc[k.Ke].eb)*T.duration,w+=T.duration,S+=T.fa,A+=t.wk.qW*T.duration/8,_+=T.duration*t.Pc[k.Ke].bitrate);return m.N2a=0<w?+R/w:0,m.M2a=w,m.L2a=S,m.I2a=A,m.K2a=0<w?+_/w:0,m.aC=L.S6a(),D.debug("Max heap used: "+Math.round(m.aC/1024/1024)+" MB"),m},bqa:function(t,e){if(t.GF<e.GF)return 1;if(t.GF>e.GF)return-1;if(t.aw>e.aw)return 1;if(t.aw<e.aw)return-1;if(t.index>e.index)return 1;if(t.index<e.index)return-1;throw Error("Invalid frag comparison")},w0a:function(t,e){if(t.aw>e.aw)return 1;if(t.aw<e.aw)return-1;if(t.index>e.index)return 1;if(t.index<e.index)return-1;throw Error("Invalid frag comparison")},dp:function(t){var e,i,n,r,a,o;return L.pCa("dp-"+(t.rs?"segvmaf":"dlvmaf")+": "),!1===(e=U(t)).Kt||!0===e.tya||(i=function(t){for(var e,i=t.uz,n=t.wk,r=(u=t.wv).by,a=t.Pc,o=[],r=Math.min(u.ZJ,r),s=0;s<i.length;s++){for(var u=[],c=n.Zn;c<=r;c++)L.update("get chunk map from play segment"),e=i[s][c],e=new h(e.fa,e.duration/1e3,(t.rs&&void 0!==e.eb?e:a[s]).eb),u.push(e);o.push(u)}return new f(o,!1)}(t),n=new s(i),r=function(t){t=t.wk.da;for(var e,i=[],n=0;n<t.length;n++)L.update("get prebuffered chunks loop"),e=t[n],j(void 0!==e.eb,"expect frag.vmaf !== undefined"),e=new h(e.fa,e.duration/1e3,e.eb),i.push(e);return i}(t),r={blb:function(t){var e=t.TC,i=t.wk,n=t.wv.Qa-i.ea;e.timestamp>i.ZF&&D.error("expect playSegment.tput.timestamp <= playSegment.startState.playingStartTime but has "+e.timestamp+" and "+i.ZF),t=[];for(var r,a=e.timestamp,o=0;o<e.trace.length;o++)a>=i.ZF&&(t.push(e.trace[o]),r=e.trace[o]),a+=e.SA,n-=e.SA;for(;0<n;)t.push(r),n-=e.SA;if(i=e.SA,0===(e=t.length))e=[];else{for(i=[i/1e3];2*i.length<=e;)i=i.concat(i);e=i=i.length<e?i.concat(i.slice(0,e-i.length)):i}return new u(t,e,!1)}(t),uZa:t.wk.qW,ucb:0,Qbb:240,Pbb:8*t.ZZa.Ymb/1e3,e_a:.5,MZa:new c(r),K3a:0,Ipc:void 0,a8a:void 0,Wfb:void 0,JYa:!0},r=function(t,e,i){j(t.TP()>=e.length,"expect chunk_map.get_n_epoch() >= stream_choices.length");for(var n,r=0,a=0,o=0;o<e.length;o++)L.update("calculate twvmaf"),j(e[o].Q8a===o,"expect stream_choices[idx].i_epoch === idx"),n=t.ln[e[o].paa][o],r+=(void 0!==i?i(n.quality):n.quality)*(n=n.Un),a+=n;return{N2a:r/a,M2a:1e3*a}}(i,n=n.dz(r),void 0),i=function(t,e,i){j(t.TP()>=e.length,"expect chunk_map.get_n_epoch() >= stream_choices.length");for(var n,r=0,a=0,o=i.wk.qW,s=0,u=0,c=0;c<e.length;c++)L.update("calculate Bytes"),j(e[c].Q8a===c,"expect stream_choices[idx].i_epoch === idx"),r+=(n=t.ln[e[c].paa][c]).fa,a+=o*n.Un*1e3/8,s+=n.Un*i.Pc[e[c].paa].bitrate,u+=n.Un;return{L2a:r,I2a:a,K2a:0<u?+s/u:0}}(i,n,t),a=[],o=t.wk.Zn,n.forEach(function(t){a[o]={Ke:t.paa},o++}),l(r,e),l(i,e),e.ys=a,e.aC=L.S6a(),D.debug("Max heap used: "+Math.round(e.aC/1024/1024)+" MB")),e}}},function(t){var n;function e(t){if(this.Fg=r(t),this.sh=this.Lf=0,n(t)){for(var e=t.length,i=0;i<e;++i)this[i]=t[i];this.Lf=e}}function r(t){if("number"!=typeof t){if(!n(t))return 16;t=t.length}return t=((t=Math.min(Math.max(16,t),1073741824))>>>0)-1,1+((t=(t=(t=(t|=t>>1)|t>>2)|t>>4)|t>>8)|t>>16)}e.prototype.co=function(){for(var t=this.Lf,e=Array(t),i=this.sh,n=this.Fg,r=0;r<t;++r)e[r]=this[i+r&n-1];return e},e.prototype.push=function(t){var e,i,n=arguments.length,r=this.Lf;if(1<n){if((e=this.Fg)<r+n){for(var a=0;a<n;++a)this.A5(r+1),this[i=this.sh+r&this.Fg-1]=arguments[a],this.Lf=++r;return r}for(i=this.sh,a=0;a<n;++a)this[i+r&e-1]=arguments[a],i++;return this.Lf=r+n,r+n}return 0===n?r:(this.A5(r+1),this[a=this.sh+r&this.Fg-1]=t,this.Lf=r+1,r+1)},e.prototype.pop=function(){var t,e,i=this.Lf;if(0!==i)return e=this[t=this.sh+i-1&this.Fg-1],this[t]=void 0,this.Lf=i-1,e},e.prototype.shift=function(){var t,e,i=this.Lf;if(0!==i)return e=this[t=this.sh],this[t]=void 0,this.sh=t+1&this.Fg-1,this.Lf=i-1,e},e.prototype.unshift=function(t){var e,i,n=this.Lf,r=arguments.length;if(1<r){if((e=this.Fg)<n+r){for(var a=r-1;0<=a;a--)this.A5(n+1),e=this.Fg,this[i=(this.sh-1&e-1^e)-e]=arguments[a],this.Lf=++n,this.sh=i;return n}for(i=this.sh,a=r-1;0<=a;a--)this[i=(i-1&e-1^e)-e]=arguments[a];return this.sh=i,this.Lf=n+r,n+r}return 0===r?n:(this.A5(n+1),e=this.Fg,this[a=(this.sh-1&e-1^e)-e]=t,this.Lf=n+1,this.sh=a,n+1)},e.prototype.O5b=function(){var t=this.Lf;if(0!==t)return this[this.sh+t-1&this.Fg-1]},e.prototype.get=function(t){var e;if(t===(0|t)&&(e=this.Lf,t<0&&(t+=e),!(t<0||e<=t)))return this[this.sh+t&this.Fg-1]},e.prototype.Qaa=function(){return 0===this.Lf},e.prototype.clear=function(){for(var t=this.Lf,e=this.sh,i=this.Fg,n=0;n<t;++n)this[e+n&i-1]=void 0;this.sh=this.Lf=0},e.prototype.valueOf=e.prototype.toString=function(){return this.co().toString()},e.prototype.enqueue=e.prototype.push,e.prototype.QO=e.prototype.shift,e.prototype.toJSON=e.prototype.co,Object.defineProperty(e.prototype,"length",{get(){return this.Lf},set(){throw new RangeError("")}}),e.prototype.A5=function(t){this.Fg<t&&this.oBb(r(1.5*this.Fg+16))},e.prototype.oBb=function(t){var e,i=this.Fg;if(this.Fg=t,i<(t=this.sh)+(e=this.Lf))for(t=t+e&i-1,e=0;e<t;++e)this[e+i]=this[e+0],this[e+0]=void 0},n=Array.isArray,t.exports=e},function(t,e,i){var J,z,W,Q,X;function Z(t,e,i){this.PZa=this.sxb(t,e,i)}function $(){}function tt(){}function et(){}function n(t){this.zHb=t}function it(){}function nt(){}function rt(){}function at(){this.hra={}}J=i(0),z=i(2).assert,e=i(271).PGa,W=i(451).iwb,Q=i(271).npb,new(i(3).default.Console)("ASEJS_QOE_EVAL","media|asejs"),X=i(132).mRa||i(132),(Z.prototype.constructor=Z).prototype.sxb=function(t,e,i){z(t<e,"expect min_buffer_sec < max_buffer_sec but got "+t+" and "+e),z(0<i,"expect buffer_step_sec > 0. but got "+i);for(var n=[];t<e;t+=i)n.push(t);return n[n.length-1]<e&&n.push(e),n},Z.prototype.hF=function(t){return this.vyb(t,this.PZa)},Z.prototype.vyb=function(t,e){if(0===(t=this.lNb(t,e)))throw new $;if(t===e.length)throw new tt;return t},Z.prototype.lNb=function(t,e){if(z(0<e.length,"expect bins.length > 0 but got "+e.length),t<e[0])return 0;if(t>=e[e.length-1])return e.length;for(var i=1;i<e.length;i++)if(e[i-1]<=t&&t<e[i])return i;z(!1,"expect not coming here in digitize()")},Z.prototype.T$=function(){return i=1,t=this.PZa.length-1,Array.apply(0,Array(t)).map(function(t,e){return e+i});var i,t},$.prototype=Error(),tt.prototype=Error(),et.prototype=Error(),(n.prototype.constructor=n).prototype.VERSION="0.5",n.prototype.gqb=-20,n.prototype.fqb=20,n.prototype.eqb=void 0,n.prototype.$pb=new e(void 0),n.prototype.bqb=0,n.prototype.aqb=1,n.prototype.jqb=!1,n.prototype.dqb=!0,n.prototype.cqb=!0,n.prototype.hqb=void 0,n.prototype.Ypb=!0,n.prototype.Zpb=0,n.prototype.dz=function(t){return z(void 0!==t.blb,"expect recipe.time_varying_bandwidth !== undefined"),this.qBb(this.zHb,t.blb,void 0!==t.ucb?t.ucb:this.gqb,void 0!==t.Qbb?t.Qbb:this.fqb,void 0!==t.Pbb?t.Pbb:this.eqb,void 0!==t.MZa?t.MZa:this.$pb,void 0!==t.K3a?t.K3a:this.bqb,void 0!==t.e_a?t.e_a:this.aqb,void 0!==t.qcc?t.qcc:this.jqb,void 0!==t.VVb?t.VVb:this.dqb,void 0!==t.a8a?t.a8a:this.cqb,void 0!==t.Wfb?t.Wfb:this.hqb,void 0!==t.JYa?t.JYa:this.Ypb,void 0!==t.uZa?t.uZa:this.Zpb)},n.prototype.qBb=function(t,e,i,n,r,a,o,s,u,D,c,h,f,L){var l,d,p,b,g,m,v,y,w,A,B,_,E,k,U,S,T,I,O,x,R;function F(t){return t[g]}X.pCa("dp: "),z(i<=a.ei,"expect min_buffer_sec <= bgn_buffer_queue.total_remain_sec"),z(a.ei<=n,"expect bgn_buffer_queue.total_remain_sec <= max_buffer_sec"),z(i<=o,"expect min_buffer_sec <= end_buffer_sec"),z(o<=n,"expect end_buffer_sec <= max_buffer_sec"),void 0!==r&&z(a.Km<=r,"Need bgn_buffer_queue.total_remain_kb <= max_buffer_kb but has got "+a.Km+" and "+r),d=new Z(i,n,s),b=a,(s=new at).put([p=0,d.hF(a.ei)],[p,b,void 0,void 0,e,void 0,void 0,void 0]),e=b=0,a=t.QVb(),z(t.TP()==a.length,"expect chunk_map.get_n_epoch() == durations_sec.length"),g=-1;try{for(var P=J.__values(a),C=P.next();!C.done;C=P.next()){g+=1,a=!0;for(var q=t.ln.map(F),H=d.T$(),j=0;j<H.length;j++)if(m=H[j],s.twa([g,m]))for(var N=s.get([g,m]),K=N[0],G=N[1],V=N[4],M=0;M<q.length;M++){v=q[M],X.update("epoch-ibuf-chunk loop"),y=void 0!==h?h(v.quality):v.quality,w=V.si();try{A=(N=this.$xb(G,v,w,L))[0],B=N[1],_=N[2],E=N[3],k=N[4],U=N[5]}catch(t){if(t instanceof W)continue;if(t instanceof $){b+=1;continue}throw t}T=S=!1;try{if(I=d.hF(E.ei),D&&d.hF(A),c&&d.hF(B),void 0!==r)if(c){if(_.Km>r)throw new et}else if(E.Km>r)throw new et}catch(t){if(t instanceof $)I=void 0,b+=1;else if(t instanceof tt)f?S=!0:e+=1,I=void 0;else{if(!(t instanceof et))throw t;f?T=S=!0:e+=1,I=void 0}}try{if(S&&T){z(void 0!==r,"expect max_buffer_kb !== undefined"),O=c?_.Km-r:E.Km-r,z(0<=O,"pause dlnd kb cannot be -ve but is "+O);try{x=E.k6b(O)}catch(t){if(t instanceof Q)throw new $;throw t}w.Aeb(x),k+=x,z(E.ei<n,"expect cur_buffer_queue.total_remain_sec < max_buffer_sec"),I=d.hF(E.ei)}else if(S&&!T){x=c?_.ei-n+1e-8:E.ei-n+1e-8,z(0<=x,"pause dlnd kb cannot be -ve but is "+x);try{E.Teb(x)}catch(t){if(t instanceof Q)throw new $;throw t}w.Aeb(x),k+=x,z(i<=E.ei,"expect min_buffer_sec <= cur_buffer_queue.total_remain_sec"),z(E.ei<n,"cur_buffer_queue.total_remain_sec < max_buffer_sec"),I=d.hF(E.ei)}else x=0}catch(t){if(!(t instanceof $)){if(t instanceof W)continue;throw t}b+=1,x=I=void 0}p=s.twa([g+1,I])?s.get([g+1,I])[0]:-1/0,this.dCb(E,I,v,y,m,g+1,p,s,K,M,w,k,U,x)&&(a=!1)}if(a){--g;break}}}catch(t){var Y={error:t}}finally{try{C&&!C.done&&(l=P.return)&&l.call(P)}finally{if(Y)throw Y.error}}try{R=this.nVa(g+1,d.hF(o),s,u,d)}catch(t){if(!(t instanceof it))throw t;try{R=this.nVa(g+1,d.hF(o),s,!u,d)}catch(t){if(t instanceof it){if(e<b)throw new nt;throw new rt}throw t}}for(m=R,i=[];-1<g;g--)p=(N=s.get([g+1,m]))[0],b=N[1],m=N[3],n=N[5],r=N[6],o=N[7],N=N[2],u=(v=t.ln[N][g]).FB(),y=v.quality,i.unshift({Q8a:g,paa:N,info:{Nnc:u,quality:y,Uoa:b.ei,Toa:b.Km,j3a:n,Xa:r,sza:o}});return i},n.prototype.nVa=function(t,e,i,n,r){var a=!1,o=r.T$()[0];for(r=r.T$()[r.T$().length-1];;){if(e<o||r<e){a=!0;break}if(i.twa([t,e]))break;e=n?e-1:e+1}if(a)throw new it;return e},n.prototype.dCb=function(t,e,i,n,r,a,o,s,u,c,h,f,l,d){return i=u+n*i.Un,void 0!==e&&o<i&&(s.put([a,e],[i,t,c,r,h,f,l,d]),!0)},n.prototype.$xb=function(t,e,i,n){var r,a,o;n=(e.FB()+n)*e.Un,n/=i=i.RNb(n),r=t.ei-i,a=t.ei+e.Un,(o=t.si()).add(e,void 0),(t=t.si()).add(e,void 0);try{t.Teb(i)}catch(t){if(t instanceof Q)throw new $;throw t}return[r,a,o,t,i,n]},it.prototype=Error(),nt.prototype=new it,rt.prototype=new it,at.prototype={hEa:function(t){return t.join(",")},put:function(t,e){this.hra[this.hEa(t)]=e},get:function(t){return this.hra[this.hEa(t)]},twa:function(t){return this.hEa(t)in this.hra}},t.exports={drb:n,Mic:Z,lic:$,mic:tt}},function(t,e,i){var h,f,l,n,a,d;_esm(e),e.fSa=void 0,t=i(0),h=t.__importStar(i(11)),f=i(6),l=i(6),n=t.__importDefault(i(3)),a=i(251),d=i(448),i=function(){var t=2;function e(t,e,i,n){for(var r=2;9!==r;)switch(r){case 2:this.lb=t,this.H=e,this.uc=i,r=4;break;case 4:this.Qi=n,r=9;break;case 13:this.Qi=n,r=10}}for(;13!==t;)switch(t){case 2:e.prototype.iu=function(t,e){for(var i,n,r,a,o,s,u,c=2;50!==c;)switch(c){case 11:e<u.T.Ub&&s.T.Hf.replace&&(s.T.Hf.replace=!1),i=this.lb.Wa.Yc,l.Uf.forEach(function(t){for(var e=2;1!==e;)2===e&&((t=i.fe(t))&&a.lb.rXa(t),e=1)}),c=19;break;case 36:n=this.lb.Wa.Yc,l.Uf.forEach(function(t){for(var e,i=2;5!==i;)2===i&&(e=n.fe(t),a.uc(t)&&a.SAb(e,r[t]),i=5)}),c=53;break;case 15:c=this.qt(d.fha.Usa(e),!1,!0)?27:26;break;case 3:s.Zi&&this.Qi.Kn("seek: "+t+" manifestIndex: "+e+" current manifest: "+this.lb.df.T.Ub+" media.currentPts: "+u+" playerState: "+this.lb.U.getState()),c=9;break;case 26:u=this.lb.Wa.Yc.JX(s.Qa||1/0,s.T),c=25;break;case 52:this.UD={Ub:e,Uk:t},this.lb.emit("seekDelayed"),c=50;break;case 12:c=e!=u.T.Ub?11:26;break;case 31:this.lb.U.Jd(f.za.Dg),this.lb.kDa(),this.lb.Wa.Jdc(t,e),c=28;break;case 51:this.H.warn("seek, no manifest at manifestIndex:",e),this.lb.emit("seekFailed"),c=50;break;case 6:!s.T.Hf.QZ&&0<e&&(o=this.lb.DO(e,t)),this.lb.U.Jd(f.za.Uj),u=this.lb.df,c=12;break;case 25:c=u.length?24:52;break;case 22:c=s.T.Hf.Pe?21:32;break;case 7:c=(s=this.lb.Uh(e))?6:51;break;case 39:this.lb.Yma(),r=this.lb.Wa.Yc.f8(t).wR,s.xya(),c=36;break;case 27:return;case 35:this.UD={Ub:s.T.Ub+1,Uk:t},this.lb.emit("seekDelayed"),c=33;break;case 9:h.sa(e)&&(e=this.lb.df.T.Ub),this.lb.Wa.thb(),c=7;break;case 21:c=this.lb.c7(s.T.Ub+1)?31:35;break;case 32:o=(t=u)+this.lb.Wa.bf,c=31;break;case 19:c=this.lb.LUa(e)?15:18;break;case 28:c=(u=this.lb.df.T.Ub===e&&!this.Syb(e)&&t===s.ea)?44:39;break;case 42:return this.lb.emit("ptschanged",o),this.lb.emit("seek"),this.UV(e),t=u&&this.lb.Hb.jA()?100:0,this.lb.M6(1,t),this.lb.Nk(),o;case 43:c=this.lb.U.p$a()?42:41;break;case 2:null!=(o=(a=this).cWa)&&o.cancel(),s=this.lb.K,u=this.lb.U.Qe(),o=t,c=3;break;case 23:c=u<t?22:31;break;case 16:return;case 41:this.H.warn("after seeking, playerState no longer STARTING: "+this.lb.U.getState()),this.lb.emit("seekFailed"),c=50;break;case 44:l.Uf.forEach(function(t){for(var e=2;1!==e;)2===e&&(a.lb.Ex[t].ij(!0),e=1)}),c=43;break;case 53:this.lb.DV(),c=43;break;case 24:u=this.lb.et?this.lb.fo?Math.min(u[l.u.P].ea,u[l.u.J].ea):u[l.u.P].ea:u[l.u.J].ea,c=23;break;case 18:this.UD={Ub:e,Uk:t},this.lb.emit("seekDelayed"),c=16;break;case 33:return}},e.prototype.seek=function(t,e){{var i;return i=t,h.sa(e)&&(e=this.lb.df.T.Ub),this.lb.Wa.thb(),this.lb.Uh(e).T.Hf.QZ||this.lb.sN||(i=this.lb.kv(e,t)),this.iu(i,e)}},e.prototype.qt=function(t,e,i){for(var n,r,a=2;9!==a;)switch(a){case 1:a=e?5:4;break;case 2:r=this.lb.Wa.qt(t,e),a=1;break;case 4:return r?(this.lb.U.Jd(f.za.Uj),(t=this.lb.Wa.Ei.children[t])&&this.lb.emit("ptschanged",null!=(n=t.ud)?n:t.Bva),this.lb.U.Jd(f.za.Dg),this.lb.emit("seek"),t&&this.UV(t.T.Ub),this.lb.M6(1),this.lb.Nk(),this.lb.Hb.jA()):i||(n=this.lb.Wa.$Ub(t),this.iu(n)),r;case 5:return r}},e.prototype.Syb=function(t){return!!this.lb.Uh(t).cW},e.prototype.UV=function(t){for(var i,e=2;4!==e;)2===e&&((t=(i=this).lb.Uh(t)).cW||(t.cW=!0,l.Uf.forEach(function(t){for(var e=2;1!==e;)2===e&&(i.lb.rh[t].resume(),e=1)}),this.lb.DV()),e=4)},e.prototype.SAb=function(t,e){for(var i,n,r,a=2;8!==a;)switch(a){case 2:i=this,r=t.mediaType,t.hL(e),a=5;break;case 5:t.j$b(),a=4;break;case 4:a=null!=(n=this.lb.li)&&n.kF()?3:9;break;case 9:this.lb.nX.cXa(r,t.$a.T),a=8;break;case 3:this.lb.li.Em.forEach(function(t){for(var e=2;1!==e;)2===e&&(i.lb.mI(t,!1),e=1)}),this.lb.li=void 0,a=9}},t=8;break;case 8:return e.prototype.Sla=function(){for(var t,e,i=2;4!==i;)switch(i){case 2:i=this.UD?1:4;break;case 1:t=this.UD.Uk,e=this.UD.Ub,this.lb.Uh(e)&&(this.UD=void 0,this.iu(t,e)),i=4}},e.prototype.$l=function(t){for(var r,e,i=2;7!==i;)switch(i){case 8:return t.o_(function(){for(var t=2;5!==t;)2===t&&(r.lb.U.Jd(f.za.Gc),r.lb.NV(),t=5)}).vBa;case 2:null!=(e=(r=this).cWa)&&e.cancel(),this.lb.kDa(),this.lb.Wa.Ei.$l(t),l.Uf.forEach(function(t){for(var e,i=2;9!==i;)switch(i){case 1:e=r.lb.Hb.bg[t],r.lb.zt&&(e.XCa=n.default.time.ia()),i=4;break;case 2:i=r.uc(t)?1:9;break;case 4:e.TS?e.Qb("skip: not resuming bufferManager, audio track switch in progress"):r.lb.rh[t].resume(),!function t(e,i){for(var n=2;5!==n;)2===n&&(e!==r.lb.Wa.Ei&&(e.Pg?t(e.Pg,i):r.H.error("skip: unexpected behaviour - a non-presenting branch doesn't have a previous branch")),(e=e.fe(i))&&e.$l(),n=5)}(r.lb.Wa.Yc,t),i=9}}),this.cWa=t=new a.vH(this.lb.nL()),i=8}},e.prototype.dh=function(t){for(var e,i,n,r=2;8!==r;)switch(r){case 1:r=t<(null!=(e=i.ud)?e:i.Bva)||n<=t?5:4;break;case 2:i=this.lb.Wa.Ei,n=0<Object.keys(i.G&&i.G.mm||{}).length&&!i.Cl?i.gf-this.lb.K.LF:i.gf,r=1;break;case 5:return!1;case 4:return e=this.lb.Cv(t,l.u.P,!0),t=this.lb.Cv(t,l.u.J,!0),void 0!==e&&void 0!==t&&e.complete&&t.complete}},e}}(),e.fSa=i},function(t,e,i){var d,p,b,g;_esm(e),e.DIa=void 0,t=i(0),d=t.__importStar(i(11)),p=i(6),b=i(6),g=t.__importDefault(i(3)),i=function(){for(var t=2;18!==t;)switch(t){case 2:e.prototype.B5=function(){for(var t=2;1!==t;)2===t&&(this.CH&&(clearTimeout(this.CH),this.CH=void 0),t=1)},e.prototype.bVa=function(){for(var t,e,i,n,r=2;6!==r;)switch(r){case 1:void 0===this.cb.Mxb&&(this.cb.Mxb=!0,this.cb.Jb.Ym("firstDriveStreaming")),e=(t=this.cb.Wa).Yc.fe(b.u.P),n=!(i=t.Yc.fe(b.u.J))||i.Ki,(!e||e.Ki)&&n&&this.cb.sN&&t.$Hb((i||e).Ic),i=!i||i.Hs,r=9;break;case 2:r=this.cb.cj.jna||this.cb.po()?6:1;break;case 9:e&&!e.Hs||!i||this.cb.sN||(this.cb.Hc.Yf&&this.cb.Hc.Yf.xr(!0,this.cb.Vm.sessionId),this.cb.Jb.tdb()),this.ZUa(t.Yc),this.XBb(),r=6}},e.prototype.CXa=function(){return!!(this.cb.po()||this.cb.U.r$a()||this.cb.U.q$a())},e.prototype.H5=function(t){return!(this.CXa()||this.cb.Hb.bg[t.mediaType].TS||this.cb.fA.Ox)},t=3;break;case 20:return e.prototype.XBb=function(){for(var t,e,i,n=2;5!==n;)2===n&&(t=this.cb.K,i=(e=this.cb.Wa).Yc,this.cb.U.Gf()||e.Tx(i,b.u.J)<t.XZ||i.T.fEa(),n=5)},e;case 3:e.prototype.Nk=function(){for(var i,t,e=2;5!==e;)switch(e){case 1:!this.cb.MWa||this.cb.D6||this.cb.S6||(this.cb.D6=setTimeout(function(){for(var t=2;4!==t;)2===t&&(clearTimeout(i.cb.D6),i.cb.D6=void 0,i.bVa(),t=4)},t.Eza),t.dP&&this.cb.fo&&(this.CH||(this.CH=setTimeout(function(){for(var t,e=2;3!==e;)2===e&&(clearTimeout(i.CH),i.CH=void 0,(t=i.cb.Wa.Yc.fe(b.u.J))&&i.rUa(t),e=3)},t.MCb)))),e=5;break;case 2:t=(i=this).cb.K,e=1}},e.prototype.rUa=function(t,e){for(var i,n,r,a,o=2;3!==o;)switch(o){case 2:i=t.mediaType,n=this.cb.Hb.Fy[i].UJ,r=t.ve.pZ,o=1;break;case 1:o=n&&r?5:3;break;case 5:!(a=this.cb.Hb.bg[i].Te)||this.cb.U.Gf()||this.cb.qh.LCb(i,a,n.bitrate,r.bitrate,t.SWb.bitrate,e),o=3}},e.prototype.ZUa=function(t,e){for(var i,n,r,a,o,s=2;7!==s;)switch(s){case 4:this.cb.fo&&this.$Ua(t,n,r),this.cb.et&&this.$Ua(t,r,n),a=!r||r.Ki,s=(o=!n||n.Ki)&&a?9:3;break;case 2:i=t.G,n=t.fe(b.u.J),a=!(r=t.fe(b.u.P))||r.Ki,o=!n||n.Ki,i.Ml||this.cb.Wa.Eca(t,i,t.T.Hf.Pe&&0===t.T.Ub),s=5;break;case 5:s=o&&a?9:4;break;case 3:return;case 9:this.cb.U.Gf()&&(this.H.warn("Still in buffering state while pipeline's are done"),this.cb.Hb.jA()),e||i.Hw||t.T.Hf.Pe||!this.fHb(t)||((e=this.cb.U.Gf())&&this.cb.K.Qqa&&(this.cb.ena(),e=!1),t.T9||this.cb.Wa.WWb(t,e),t.fO(),t.hHb()&&(e=Object.keys(t.children),this.cb.K.h9&&1===e.length&&!t.children[e[0]].active&&this.cb.Wa.Wab(t,e[0]),this.Qxb(t,i))),s=7}},e.prototype.Qxb=function(t,n){for(var i,r,a,o,e,s,u,c,h=2;23!==h;)switch(h){case 15:t.XM=s,h=27;break;case 17:s=o[0].$a,u=o[0].weight,h=15;break;case 12:s=o.reduce(function(t,e){for(;;){e.Tn=e.$a.Tn,e.fca=Math.min(e.Tn[0],e.Tn[1]),a000.h9M(17);var i=a000.K9M(4,15,1,5);return[t[0]+e.weight,t[i]+e.fca]}},[0,0]),i=s[0],r=s[1],h=10;break;case 18:return;case 3:t.XM=void 0,h=8;break;case 19:this.H.warn("No subbranch candidates to drive"),h=18;break;case 10:0!==i&&0!==r?(d.Nf(o,function(t){for(var e=2;4!==e;)2===e&&(t.nhc=t.weight/i,t.OFb=t.fca/r,t.usage=t.OFb-t.nhc,e=4)}),o.sort(function(t,e){return t.usage-e.usage})):o.sort(function(t,e){return t=Math.min.apply(null,t.$a.Tn),e=Math.min.apply(null,e.$a.Tn),a000.h9M(0),a000.I9M(e,t)}),h=20;break;case 7:a=[],o=[],d.Nf(t.children,function(t,e){for(var i=2;5!==i;)2===i&&(0!==(e=n.mm[e].weight)&&(e={weight:e,$a:t},t.Cpa(!0,!0)||o.push(e),a.push(e)),i=5)}),0===o.length?o=a:2<o.length&&(o.sort(function(t,e){return e.weight-t.weight}),o.length=2),h=13;break;case 2:e=this.cb.K,h=1;break;case 13:h=1<o.length?12:20;break;case 20:h=0===o.length?19:17;break;case 1:h=this.cb.Hc.gva&&t.XM&&t.tla?5:8;break;case 9:s=t.XM,u=n.mm[s.G.id].weight,h=8;break;case 8:h=s?26:7;break;case 5:c=t.XM.Tn,h=4;break;case 27:t.tla=s.Tn,h=26;break;case 26:s.Ge||(s.Ge={Aaa:g.default.time.ia(),EC:0}),s.Ge.weight=u,this.ZUa(s,!0),h=23;break;case 4:h=Math.min(c[0]-t.tla[0],c[1]-t.tla[1])>=e.yHb?3:9}},e.prototype.$Ua=function(t,e,i){for(var n,r,a,o,s,u=2;8!==u;)switch(u){case 2:n=this.cb.K,r=e.mediaType,u=1;break;case 1:u=e.Ki?8:5;break;case 5:a=this.cb.Hb.bg[r],o=this.cb.Hb.OC[r],s=this.cb.Hb.Fy[r],u=4;break;case 3:var c=this.cb.df;d.sa(c.nK)||(n.RK&&r===b.u.P&&d.sa(this.cb.Hb.bg[b.u.J].Wp)?e.Qb("drivePipeline, delaying audio until video actualStartPts determined"):(d.sa(e.zm)&&(e.zm=e.pd?e.pd.index:e.nsa(e.Fc)),e.ue&&e.zm>e.ue.index?t.T.Hf.Pe&&d.sa(c.Qa)&&d.sa(t.Ic)||(e.Ki||this.cb.rXa(e),(t=this.cb.df.T.Ub)<this.cb.GP()-1&&this.cb.c7(t+1)):this.H5(e)&&(n.WOb&&!this.cb.U.Gf()&&e.aK<=0?e.Mfc(n.B1b):this.nxb(e,i)?(e.i_b=g.default.time.ia(),n=(i=this.cb.Hb.oua(e)).cg,d.sa(n)||(n=e.track.Pc[n],this.mxb(e,n)||((r=n.w$())?(e.$Zb=n.bitrate,e.D0b(n,r,this.cb.U.Gf(),a.Te,i.Ky),this.Xfc(n,s,o),t.Ge&&++t.Ge.EC):n.BG()))):this.cb.U.Gf()&&(e.Xj("Still in buffering state while pipeline does not have vacancy"),this.cb.Hb.jA())))),u=8;break;case 4:u=!a.Te||void 0!==e.xK&&(e.hL(e.xK,e.Q5b),void 0!==e.xK)?8:3}},e.prototype.Xfc=function(t,e,i){for(var n=2;4!==n;)switch(n){case 2:e.Ewa=t.kc,d.Oa(i.fy)||(i.Ufc(t.ju,t.NB||-1,t.bitrate),d.sa(t.$Ba)||this.cb.qh.Eib(t.$Ba,t.rq,t.sq)),n=5;break;case 5:t.url&&(e.Lwa=t.url),n=4}},e.prototype.mxb=function(t,e){{var i;return i=this.cb.Hb.Fy[t.mediaType],!!(this.cb.MWa&&e.kc&&i.Ewa&&e.kc!==i.Ewa&&(0<t.Va.TF||0<t.Va.uu))}},t=12;break;case 12:e.prototype.nxb=function(t,e){for(var i,n,r,a=2;32!==a;)switch(a){case 2:var o,s=this.cb.K,u=t.mediaType,c=t.tba,h=this.cb.U.Qe(),f=this.cb.U.getState(),l=this.cb.Wa.Tx(c,u);(o=t.Fc+c.bf-h)<0&&(t.Qb("negative scheduledBufferLevel:",o,"floored to 0"),o=0),a=5;break;case 34:return!1;case 11:f=this.cb.Wa.CI(c,u),r=0,a=20;break;case 4:a=null!=(i=t.Hh)&&i.rWb()?3:9;break;case 20:a=e&&(r=this.cb.Wa.CI(c,e.mediaType),n=t.Fc-n,this.uc(e.mediaType)&&!e.Ki&&n>=s.Lxa&&o>s.Fj)?19:26;break;case 13:a=f===p.za.Gc&&l>s.Cxa&&!i.Hf.Pe&&!r&&!i.PZ||l&&h>Math.max(l*s.Hxa/100,s.c2b)?12:11;break;case 26:a=this.tyb(u)>=s.Hbb?25:24;break;case 15:a=void 0===o||o<s.Z0b?27:26;break;case 23:a=!d.sa(s.Cy)&&o>=s.Cy||t.CO+h>=Math.max(s.cw,this.cb.Hc.KC+s.Hya*c.T.c1b[u])?22:21;break;case 21:a=(c=this.cb.U.Gf())?35:33;break;case 5:n=e?e.Fc:0,a=4;break;case 27:return!1;case 35:h=1,t.Woa<s.cC&&(h=s.cC),a=t.Va.TF>=h?34:33;break;case 19:a=this.cb.Hc.nwa?18:17;break;case 33:return!(0<s.dw&&!c&&f+(e?r:0)>s.dw||void 0!==this.HUa&&l>this.HUa||u===b.u.J&&i.Hf.Pe&&l>s.Kba&&((e=this.cb.Hc.bc.get()).confidence&&e.Xa&&e.Xa.ta*t.CO>s.Exa));case 7:return!1;case 6:i=this.cb.df.T,r=this.cb.U.Yo(i),a=13;break;case 3:return!1;case 24:o=this.cb.Wa.Eec(),a=23;break;case 9:h=t.Va.pza,a=8;break;case 17:o=void 0,e&&(o=e.mediaType,n=g.default.oq()[o],o=s.lgc?this.cb.Wa.Xab(c,o).Ag/n:r/n),a=15;break;case 25:case 22:case 18:return!1;case 8:a=h>=s.Oba?7:6;break;case 12:return!1}},e.prototype.tyb=function(i){return this.cb.Wa.bb.reduce(function(t,e){return t+e.TUb(i)},0)},e.prototype.fHb=function(r){{var a,o,s;return o=(a=this).cb.Wa,s=!0,d.Nf(r.G.mm,function(t,e){for(var i,n=2;7!==n;)switch(n){case 8:r.Qb("invalid segment:",e,"in dests:",r.G.mm),n=7;break;case 1:t=(e=t.T).Zh[b.u.P],i=e.Zh[b.u.J],t&&i&&t.stream.Yd&&i.stream.Yd||(s=!1),n=9;break;case 9:a.cb.U.Yo(e)||(s=!1),n=7;break;case 2:n=(t=o.Ee(e))?1:8}}),s}},t=20}function e(t,e,i){for(var n=2;9!==n;)2===n&&(this.cb=t,this.H=e,this.uc=i,this.HUa=this.CH=void 0,n=9)}}(),e.DIa=i},function(t,e,i){var n,f,a,l;_esm(e),e.gMa=void 0,n=i(182),f=i(6),a=i(6),l=i(8),t=function(){var t=2;function e(t,e,i,n){for(var r=2;8!==r;)switch(r){case 2:this.jc=t,this.H=e,this.uc=i,this.$H=n,r=3;break;case 3:this.JWa=this.jna=!1,r=8}}for(;6!==t;)switch(t){case 2:e.prototype.play=function(){for(var i,t=2;5!==t;)2===t&&((i=this).po()?this.H.warn("play called after pipelines already shutdown"):(this.jc.U.Jd(f.za.Gc),this.jc.EBb(),this.jc.Hb.bg.forEach(function(t){for(var e=2;1!==e;)2===e&&(i.uc(t.mediaType)&&(t.TS?t.Qb("play: not resuming bufferManager, audio track switch in progress"):(i.jc.rh[t.mediaType].resume(),i.jc.Ex[t.mediaType].resume())),e=1)}),this.jc.NV(),this.jc.emit("play")),t=5)},e.prototype.stop=function(){for(var i,t,e,n=2;6!==n;)switch(n){case 3:var r=this.jc.Wa.Yc;a.Uf.forEach(function(t){for(var e=2;5!==e;)switch(e){case 1:t.Ki=!1,e=5;break;case 2:e=(t=r.fe(t))?1:5}}),a.Uf.forEach(function(t){for(var e=2;1!==e;)2===e&&((t=i.jc.rh[t])&&t.pause(),e=1)}),this.jc.emit("stop"),n=6;break;case 2:t=(i=this).jc.U.r$a(),e=this.jc.U.q$a(),this.jc.U.Jd(f.za.Ns),this.jc.B5(),t||e||this.jc.Wa.Ei.kz(!1,this.jc.U),n=3}},t=5;break;case 7:return e;case 5:e.prototype.suspend=function(){for(var t=2;1!==t;)switch(t){case 4:this.jna=~9,t=9;break;case 2:this.jna=!0,t=1}},e.prototype.resume=function(){for(var t=2;5!==t;)2===t&&(this.jna=!1,this.jc.Kg.Nk(),t=5)},t=3;break;case 3:e.prototype.close=function(){for(var t=2;6!==t;)switch(t){case 3:e.E3a&&(e=n.Fz.instance().Lb())&&l.gb(this.jc,(e={type:"logdata",target:"endplay",fields:{bridgestat:e}}).type,e),this.jc.Hc.Yf&&this.jc.Hc.Yf.xr(!0,this.jc.Vm.sessionId,!0),this.jc.Jb.tdb(),this.jc.Tgb(),t=6;break;case 2:var e=this.jc.K;this.JWa=!0,this.stop(),this.jc.emit("close"),t=3}},e.prototype.flush=function(){for(var t,e,i,n,r,a,o,s,u,c=2;16!==c;)switch(c){case 18:c=this.$H.zt?17:16;break;case 14:for(var h in n)n.hasOwnProperty(h)&&(o["ne"+h]=Number(n[h]).toFixed(6),u["ne"+h]=+o["ne"+h]);c=13;break;case 1:c=i?5:19;break;case 2:e=this.jc.K,i=this.jc.Hc.bc,c=1;break;case 9:s&&s.cdnavtp&&(o.cdnavtp=s.cdnavtp,o.activecdnavtp=s.activecdnavtp),i.flush(),n=i.h6a(),r=i.ZXa,c=6;break;case 20:e.yX&&(s&&s["throughput-sw"]&&s["throughput-sw"].ta&&this.jc.Gw.bDb({avtp:s["throughput-sw"].ta,variance:s["throughput-sw"].ye}),this.jc.Gw.WCb(u,null==(t=s.avtp)?void 0:t.c9),t=this.jc.Gw.OSb(),e=this.jc.Gw.cVb(),t&&(t.n=e,l.gb(this.jc,(t={type:"logdata",target:"endplay",fields:{ibef:t}}).type,t),this.jc.Gw.save())),c=19;break;case 6:c=n?14:13;break;case 13:r&&r.length&&(o.activeRequests=JSON.stringify(r)),o.aseApiVersion=this.jc.sI,e.B3a&&(i=i.F$())&&(i.bytesRequestedPacingVideo&&(o.bytesRequestedPacingVideo=i.bytesRequestedPacingVideo,o.estimatedBytesPacedVideo=i.estimatedBytesPacedVideo,o.bytestotalVideo=i.bytestotalVideo,o.pacedAvtpVideo=i.pacedAvtpVideo),i.bytesRequestedPacingAudio&&(o.bytesRequestedPacingAudio=i.bytesRequestedPacingAudio,o.estimatedBytesPacedAudio=i.estimatedBytesPacedAudio,o.bytestotalAudio=i.bytestotalAudio,o.pacedAvtpAudio=i.pacedAvtpAudio),i.pacedAvtp&&(o.pacedAvtp=i.pacedAvtp)),Object.keys(o).length&&l.gb(this.jc,(o={type:"logdata",target:"endplay",fields:o}).type,o),c=20;break;case 17:try{for(a=2;1!==a;)2===a&&(this.jc.u9(f.za.Ns),a=1)}catch(t){a000.O9M(6),this.jc.Jb.fp(a000.K9M("Hindsight: Error evaluating QoE at stopping: ",t))}c=16;break;case 19:this.jc.Jb.zWa(),c=18;break;case 5:o={},u={},(s=i.get())&&s.avtp&&s.avtp.ta&&(o.avtp=s.avtp.ta,o.dltm=s.avtp.c9,u.avtp=o.avtp),s&&s.initialThroughput&&s.initialThroughput.ta&&(o.initial_avtp=s.initialThroughput.ta),c=9}},e.prototype.po=function(){return this.JWa||this.jc.Wa.el},t=7}}(),e.gMa=t},function(t,e,i){var a,o,s,u,c,I,O;_esm(e),e.kOa=void 0,t=i(0),a=t.__importStar(i(11)),o=i(129),s=t.__importDefault(i(28)).default.Sd,u=i(6),c=t.__importDefault(i(3)),I=i(8),O=i(2),i=function(){function t(t,e){for(var i=2;4!==i;)2===i&&(this.qb=t,this.H=e,i=4)}for(var e=2;38!==e;)switch(e){case 16:t.prototype.dAb=function(t,e,i,n){for(var r,a=2;3!==a;)2===a&&(r=t.mediaType,o.Mm.nq(r),t={type:"streamPresenting",startPts:Math.floor(e),contentStartPts:Math.floor(i),mediaType:r,manifestIndex:n,trackIndex:t.track.IA,streamIndex:t.cg},I.gb(this.qb,t.type,t),a=3)},t.prototype.iAb=function(t){for(var e=2;5!==e;)2===e&&(I.gb(this.qb,(t={type:"videoLooped",offset:t}).type,t),e=5)},e=27;break;case 10:t.prototype.Bma=function(t,e){for(var i=2;5!==i;)2===i&&(e={type:"lastSegmentPts",segmentId:t.id,pts:Math.floor(e)},t.$F||I.gb(this.qb,e.type,e),i=5)},t.prototype.Vzb=function(t,e,i,n,r){for(var a=2;5!==a;)2===a&&(t={type:"manifestRange",index:t,manifestOffset:e,startPts:Math.floor(i),endPts:Math.floor(n),maxPts:Math.floor(r)},I.gb(this.qb,t.type,t),a=5)},t.prototype.CWa=function(t){for(var e=2;5!==e;)2===e&&(t={type:"maxBitrates",audio:t[u.u.P],video:t[u.u.J]},I.gb(this.qb,t.type,t),e=5)},t.prototype.Wzb=function(t,e){for(var i=2;3!==i;)switch(i){case 2:var n=this.qb.K;t={type:"manifestSelected",index:t,replace:e.T.Hf.replace,ptsStarts:e.wR,streamingOffset:e.ea+e.zy},n.Zi&&(e="notifyManifestSelected: "+JSON.stringify(t),n.Zi&&this.Kn(e)),i=4;break;case 4:I.gb(this.qb,t.type,t),i=3}},t.prototype.Uzb=function(t,e,i,n,r){for(var a=2;4!==a;)2===a&&(t={type:"manifestPresenting",index:t.Ub,pts:Math.floor(e),movieId:t.L,replace:t.Hf.replace,contentOffset:i},null!=n&&null!=r&&(t.previousMovieId=n,t.previousIndex=r),I.gb(this.qb,t.type,t),a=4)},e=16;break;case 26:t.prototype.Ozb=function(t){for(var e=2;5!==e;)2===e&&(t={type:"firstRequestAppended",manifestIndex:t.Va.$a.T.Ub,mediatype:t.mediaType,time:c.default.time.ia()},I.gb(this.qb,t.type,t),e=5)},t.prototype.Szb=function(t,e){for(var i=2;5!==i;)2===i&&(I.gb(this.qb,(t={type:"initialAudioTrack",trackId:e,trackIndex:t}).type,t),i=5)},t.prototype.Jzb=function(t,e){for(var i=2;3!==i;)2===i&&(t=t.wm,e=e.wm,e={type:"audioTrackSwitchStarted",oldLangCode:t.language,oldNumChannels:t.channels,newLangCode:e.language,newNumChannels:e.channels},I.gb(this.qb,e.type,e),i=3)},t.prototype.Izb=function(i,n){for(var r,t=2;5!==t;)2===t&&(r=this,setTimeout(function(){for(var t,e=2;5!==e;)2===e&&(I.gb(r.qb,(t={type:"audioTrackSwitchComplete",trackId:i,trackIndex:n}).type,t),e=5)},0),t=5)},t.prototype.Mzb=function(t){for(var e,i=2;4!==i;)2===i&&(e={type:"bufferingStarted",time:c.default.time.ia(),percentage:t||0},I.gb(this.qb,e.type,e),this.qma=t||0,i=4)},e=21;break;case 28:t.prototype.Nzb=function(t){for(var e=2;5!==e;)2===e&&(I.gb(this.qb,(t={type:"endOfStream",mediaType:t}).type,t),e=5)},t.prototype.fp=function(t){for(var e=2;1!==e;)2===e&&(this.qb.emit("aseexception",{type:"aseexception",msg:t}),e=1)},t.prototype.f3b=function(t,e,i,n){for(var r=2;5!==r;)2===r&&(t={type:"maxvideobitratechanged",time:c.default.time.ia(),spts:n,maxvb_old:t,maxvb:e,reason:i},this.qb.emit("maxvideobitratechanged",t),r=5)},t.prototype.tdb=function(){for(var t,e=2;3!==e;)switch(e){case 1:this.NBb=!0,t={type:"streamerend",time:c.default.time.ia()},I.gb(this.qb,t.type,t),e=3;break;case 2:e=!this.NBb&&this.qb.K.qdb?1:3}},e=41;break;case 32:t.prototype.hAb=function(){for(var t=2;3!==t;)switch(t){case 1:var e={type:"streamingstat",time:c.default.time.ia(),playbackTime:this.qb.U.Qe()};this.qb.qh.rQb(e),I.gb(this.qb,e.type,e),t=3;break;case 2:this.qb.K.f0b&&c.default.memory.uTb(this.dzb.bind(this)),t=1}},t.prototype.zWa=function(){for(var t=2;4!==t;)switch(t){case 2:t=this.qb.du?1:4;break;case 1:var e;this.qb.du.pQb(e={type:"asereport"})&&I.gb(this.qb,e.type,e),t=4}},t.prototype.Hzb=function(){for(var t,e=2;5!==e;)2===e&&(I.gb(this.qb,(t={type:"asereportenabled"}).type,t),e=5)},t.prototype.Rzb=function(t){for(var e,i,n,r=a000,a=2;6!==a;)switch(a){case 2:a=t?1:6;break;case 4:a=this.qb.vX||this.qb.cz?3:9;break;case 1:var o,s={type:"hindsightreport"};for(i in o=this.qb.K.laa){var u=o[i],c=0,h=0,f=0,l=0,d=0,p=0,b=void 0,g=void 0,m=!1,v=-1,y=-1,w=-1,A=-1,_=-1,E=-1;for(e in t)void 0===(g=t[e]).nd&&(b=(b=g.sols)&&b[u])&&(m=!0,f+=b.dlvdur,c+=b.dltwbr*b.dlvdur,h+=b.dlvmaf*b.dlvdur),p+=g.pbdur,l+=g.pbtwbr*g.pbdur,d+=g.pbvmaf*g.pbdur,b=g.rr,g=g.ra;switch(0<p&&(v=+l/p,A=+d/p),m&&(0<f&&(y=+c/f,_=+h/f),0<f+p&&(w=+(c+l)/(f+p),E=+(h+d)/(f+p))),u){case"htwbr":s.htwbr=w,s.hptwbr=y,s.pbtwbr=v,b&&(s.rr=b,s.ra=g);break;case"hvmaftb":s.hvmaftb=E,s.hpvmaftb=_,s.pbvmaftb=A,b&&(s.rrvmaftb=b,s.ravmaftb=g);break;case"hvmafgr":s.hvmafgr=E,s.hpvmafgr=_,s.pbvmafgr=A,b&&(s.rrvmafgr=b,s.ravmafgr=g);break;case"hvmafdp":s.hvmafdp=E,s.hpvmafdp=_,s.pbvmafdp=A,b&&(s.rrvmafdp=b,s.ravmafdp=g)}}a=4;break;case 3:s.report=t,a=9;break;case 9:a=this.qb.cz?8:7;break;case 8:for(var k in t)if(void 0!==(o=t[k]).Bjb)for(u in o.Bjb)if(void 0!==(b=o.Bjb[u]).nfa){var S,T;for(n in(c=void 0!==o.b5a)||(console.error("expect report.fragmentsPrebuffered !== undefined"),O.assert(c,"expect report.fragmentsPrebuffered !== undefined")),i=[],o.b5a)c=o.b5a[n],i.push({fa:c.fa,Un:c.duration/1e3,quality:c.eb});for(S in c=b.nfa.length===b.c5a.length,h="expect sol.strmsel.length === sol.fragsel.length but got "+b.nfa.length+" and "+b.c5a.length,c||(console.error(h),O.assert(c,h)),i=[],c=0,b.nfa)f=b.nfa[S],h=b.c5a[S],r.h9M(6),c=f=r.I9M(c,f),i.push({qsc:f,Vsc:b.j3a[S],Qoc:b.Xa[S],Uoa:b.Uoa[S],Toa:b.Toa[S],d_a:b.d_a[S],goc:{fa:h.fa,Un:h.duration/1e3,quality:h.eb||b.Pc[f].eb,wsc:h.cg,hoc:h.ze},sgb:0,Src:0,sza:b.sza[S]});for(T in b=[],i=0,o.TC.trace)c=o.TC.trace[T],r.O9M(6),i=c=r.K9M(i,c),b.push(c)}a=7;break;case 7:I.gb(this.qb,s.type,s),a=6}},e=28;break;case 35:t.prototype.Ama=function(){for(var t,e,i=2;8!==i;)switch(i){case 2:t=(a=this.qb.Wa.Yc).ab(u.u.P),e=a.ab(u.u.J),this.AWa(),i=5;break;case 5:var n,r=(n=this.qb.fo?this.qb.Hb.OC[s.J]:this.qb.Hb.OC[s.P]).zW,a={type:"bufferingComplete",time:c.default.time.ia(),actualStartPts:r,aBufferLevelMs:a.xh(u.u.P),vBufferLevelMs:a.xh(u.u.J),selector:(e||t).VR,initBitrate:n.fy,skipbackBufferSizeBytes:this.qb.Hc.pG};this.qb.qh.qQb({initSelReason:n.OB,initSelectionPredictedDelay:n.NB,buffCompleteReason:n.hv,hashindsight:this.qb.zt,hasasereport:!!this.qb.du,bcVBufferLevelMs:a.vBufferLevelMs,bcABufferLevelMs:a.aBufferLevelMs}),I.gb(this.qb,a.type,a),i=8}},t.prototype.AWa=function(){for(var t,e,i,n,r,a=2;12!==a;)switch(a){case 2:t=this.qb.K,a=1;break;case 1:a=this.qb.po()?12:5;break;case 5:s=(o=this.qb.Wa.Yc).xh(u.u.P),e=o.xh(u.u.J),this.qb.qh.PCb(s,e),a=3;break;case 3:i=(i=this.qb.Hc.bc.get()).confidence?i.Xa.ta:0,r=(n=this.qb.Wa).CI(o,u.u.P),a=7;break;case 7:var o,s={type:"updateBufferLevel",abuflbytes:r,vbuflbytes:o=n.CI(o,u.u.J),totalabuflmsecs:s,totalvbuflmsecs:e,currentBandwidth:i};e>t.lcb&&this.qb.Hc.Yf&&this.qb.Hc.Yf.xr(!0,this.qb.Vm.sessionId),I.gb(this.qb,s.type,s),a=12}},t.prototype.dzb=function(t){for(var e=2;7!==e;)switch(e){case 2:e=a.sa(t)?7:1;break;case 1:a.Oa(t.r1),e=5;break;case 5:e=a.sa(this.uN)?8:4;break;case 4:var i=t.k4a-this.uN.k4a,n=t.D8a-this.uN.D8a,r=t.Zdb-this.uN.Zdb;(4194304<i||4194304<r)&&this.H.warn("memoryUsage at time: "+c.default.time.ia()+", fastMallocDelta: "+i+", jsHeapDelta: "+n+", osAllocatorDelta: "+r),e=9;break;case 9:a.Oa(t.r1)&&a.Oa(this.uN.r1)&&(4194304<(i=t.r1-this.uN.r1)&&this.H.warn("memoryUsage at time: "+c.default.time.ia(),", systemDelta: "+i)),e=8;break;case 8:this.uN=t,e=7}},e=32;break;case 41:return t.prototype.m3b=function(t){for(var e=2;5!==e;)2===e&&(t={type:"streamSelectionAugmentData",augmentData:t,fragmentIndex:t[0].ee},I.gb(this.qb,t.type,t),e=5)},t.prototype.Kn=function(t){for(var e=2;5!==e;)switch(e){case 1:I.gb(this.qb,t.type,t),e=5;break;case 2:t={type:"managerdebugevent",message:"@"+c.default.time.ia()+", "+t},e=1}},t;case 21:t.prototype.Kzb=function(){for(var t,e,i,n,r,a=2;3!==a;)2===a&&(t=this.qb.K,e=c.default.time.ia(),i=this.qb.Wa.Yc,n=this.qb.fo?u.u.J:u.u.P,r=i.ab(n),i=i.xh(n),(t=Math.min(Math.max(Math.round(100*(r.EF?(e-this.qb.mla)/t.uC:r.progress||i/t.Fj)),this.qma),99))!=this.qma&&(I.gb(this.qb,(e={type:"buffering",time:e,percentage:t}).type,e),this.qma=t),a=3)},e=35;break;case 3:t.prototype.Pzb=function(t,e,i,n,r){for(var a=2;3!==a;)switch(a){case 4:I.gb(this.qb,t.type,t),a=3;break;case 2:var o=this.qb.JVa;this.qb.JVa=void 0,t={type:"headerCacheDataHit",movieId:t,audio:e,audioFromMediaCache:n,video:i,videoFromMediaCache:r,actualStartPts:o&&o.Wp,headerCount:o&&o.VP,stats:o&&o.Zb},a=4}},t.prototype.Xzb=function(t,e,i,n){for(var r=2;5!==r;)switch(r){case 1:I.gb(this.qb,t.type,t),r=5;break;case 2:t={type:"maxPosition",index:t,endPts:e,maxPts:i,maxSeekPts:n},r=1}},t.prototype.fAb=function(t,e,i,n,r,a,o){for(var s=2;3!==s;)2===s&&(t={type:"error",error:t,errormsg:e,networkErrorCode:i,httpCode:n,nativeCode:r,manifestIndex:a,temporaryFailure:o=void 0===o?!1:o},this.H.error("notifyStreamingError: "+JSON.stringify(t)),I.gb(this.qb,t.type,t),s=3)},t.prototype.v6=function(t,e){for(var i=2;5!==i;)2===i&&(e={type:"segmentStarting",segmentId:t.id,contentOffset:e,maxBitrates:{audio:t.T.Rt[u.u.P],video:t.T.Rt[u.u.J]}},t.$F||I.gb(this.qb,e.type,e),i=5)},t.prototype.Cma=function(t){for(var e,i=2;5!==i;)2===i&&(e={type:"segmentAborted",segmentId:t.id},t.$F||I.gb(this.qb,e.type,e),i=5)},t.prototype.uyb=function(n,t){for(var e=2;12!==e;)switch(e){case 2:var i,r={segment:n,srcsegment:t.$ea,srcoffset:t.iS,seamlessRequested:t.Je,atRequest:{},discard:{}};(i=t.Ge[n])?r.atRequest={weight:i.weight,abuflmsec:i.ot.Xs,vbuflmsec:i.ot.wp,abuflbytes:i.ot.gE,vbuflbytes:i.ot.xu}:void 0!==(i=this.qb.Wa.B7a(t.$ea,n))&&(r.atRequest.weight=i),a.Nf(t.Ge,function(t,e){for(var i=2;1!==i;)2===i&&(e!=n&&(r.discard[e]={weight:t.weight,abuflmsec:t.ot.Xs,vbuflmsec:t.ot.wp,abuflbytes:t.ot.gE,vbuflbytes:t.ot.xu}),i=1)}),i=t.Je?t.KY?"seamless":"long":t.Qcb?"long":t.$l?"skip":"reset",e=3;break;case 3:return r.transitionType=i,t.Yqa||(r.delayToTransition=t.U8),i="seamless"===i?0:c.default.time.ia()-t.startTime,r.durationOfTransition=i,r.atTransition=t.wlb,r.srcsegmentduration=this.qb.Wa.ZUb(t.$ea),r}},e=13;break;case 27:t.prototype.gAb=function(t,e,i,n,r){for(var a=2;4!==a;)2===a&&(e={type:"updateStreamingPts",mediaType:t,manifestIndex:e,trackIndex:i,movieTime:Math.floor(n),segmentId:r},o.Mm.nq(t),I.gb(this.qb,e.type,e),a=4)},e=26;break;case 2:t.prototype.Ym=function(t){for(var e=2;5!==e;)2===e&&(t={type:"startEvent",event:t,time:c.default.time.ia()},I.gb(this.qb,t.type,t),e=5)},t.prototype.Zzb=function(){for(var t,e=2;5!==e;)2===e&&(I.gb(this.qb,(t={type:"openComplete"}).type,t),e=5)},t.prototype.$zb=function(t,e,i,n,r){for(var a=2;1!==a;)2===a&&(this.qb.K.rNb||(t={type:"ptsStarts",manifestIndex:t,mediaType:e,movieId:n,streamId:i,ptsStarts:r.Pjb()},I.gb(this.qb,t.type,t)),a=1)},t.prototype.Qzb=function(t,e){for(var i=2;5!==i;)2===i&&(I.gb(this.qb,(t={type:"headerCacheHit",movieId:t,streamId:e}).type,t),i=5)},e=3;break;case 13:t.prototype.cAb=function(t,e,i){for(var n=2;4!==n;)2===n&&(i=i?this.uyb(t.id,i):void 0,t={type:"segmentPresenting",segmentId:t.id,contentOffset:e,metrics:i,playlistSegment:t.$F,manifestIndex:t.T.Ub},I.gb(this.qb,t.type,t),n=4)},t.prototype.aAb=function(t,e){for(var i=2;5!==i;)2===i&&(e={type:"segmentAppended",segmentId:t.id,metrics:e},t.$F||I.gb(this.qb,e.type,e),i=5)},t.prototype.bAb=function(t,e,i){for(var n=2;5!==n;)2===n&&(t={type:"segmentComplete",mediaType:t,manifestIndex:e,segmentId:i.id},I.gb(this.qb,t.type,t),n=5)},e=10}}(),e.kOa=i},function(t,e,i){var n,p,r,o,a,s,b,u,c,h,g,f,l,d,m,v,y;_esm(e),e.CKa=void 0,n=i(0),t=i(12),p=n.__importStar(i(11)),i(2),i(261),r=i(268),o=i(431),a=i(89),i(428),i(438),s=i(118),b=n.__importDefault(i(28)),i(435),u=i(1052),c=n.__importDefault(i(158)),h=i(6),g=n.__importDefault(i(3)),i(192),i(269),i(190),i(104),f=new g.default.Console("HEADERCACHE","media|asejs"),i=new g.default.Console("MEDIACACHE","media|asejs"),l=g.default.$L,d=f.trace.bind(f),i.trace.bind(i),m=f.warn.bind(f),v=f.error.bind(f),y=f.info.bind(f),i=function(a){var t;function e(t,e,i,n){for(var r=2;25!==r;)switch(r){case 10:t.eN=[],t.dI={},t.ona=(t.Op.HEa||t.Op.IEa)&&0<(t.Op.jX||(g.default.options||{}).LQ||0),t.TH=t.Op.Oxa,r=17;break;case 2:(t=a.call(this)||this).Xj=d,t.Ik=v,t.Qb=m,t.enc=y,t.f6=Object.create(null),t.Op=e,r=7;break;case 7:t.md=Object.create(null),t.FH=0,t.Rp=[],t.jWa=e.O8,t.Gx=[],t.Q5=!1,r=10;break;case 15:return t.Vm=i,t;case 17:t.Jk=void 0,t.ona&&(t.Op.jX||(e=(g.default.options||{}).LQ||0,t.Op.set?t.Op.set({jX:e}):t.Op.jX=(g.default.options||{}).LQ||0),t.Jk=new u.nNa(t.Op,g.default,t),t.Jk.xa(t,n).then(function(){for(var t=2;1!==t;)2===t&&(d("Media cache initialized"),t=1)}).catch(function(t){for(var e=2;1!==e;)2===e&&(v("Media cache did not initialize",t),e=1)})),r=15}}for(t=2;39!==t;)switch(t){case 18:e.prototype.PUa=function(){for(var t=2;1!==t;)2===t&&(0===this.Gx.length&&(this.Gx=[s.zp.instance.vt(h.u.P,void 0,!1,!1,this.Vm,this.Op),s.zp.instance.vt(h.u.J,void 0,!1,!1,this.Vm,this.Op)],this.Gx.forEach(function(t){return t.xa()}),l.Pf()),t=1)},e.prototype.VUa=function(){for(var t,e=2;4!==e;)2===e&&(t=this.Gx,this.Gx=[],t.forEach(function(t){for(var e=2;1!==e;)2===e&&(s.zp.instance.SO(t),e=1)}),e=4)},e.prototype.fzb=function(){for(var i,t=2;5!==t;)2===t&&(!(i=this).Q5&&0<this.eN.length&&(this.eN.forEach(function(t){for(var e=2;1!==e;)2===e&&(i.Wma(t.LWb,t.Qd),e=1)}),this.eN=[]),t=5)},e.prototype.NUa=function(t,e){for(var i,n=2;8!==n;)switch(n){case 3:e.Yf=this,n=9;break;case 2:i=t.stream.mediaType,this.Gx.length<2&&this.PUa(),(e=new o.Lga(t.stream,e,this.Gx[i],t,this,!0,f)).Fi=t.Fi,n=3;break;case 9:return e}},t=27;break;case 41:return e.prototype.Cc=function(t){return!!t.Cc},e;case 20:e.prototype.K4b=function(e){for(var i,t=2;9!==t;)2===t&&(i=this,e.mec=e.Zf,this.Iwb(e),p.sa(e.IWb)||e.IWb(e.mec),this.jBb(e,function(){for(var t=2;1!==t;)2===t&&(p.sa(e)||(p.sa(e.Jn)||e.Jn.B8a--,i.C5(e)),t=1)}),t=9)},e.prototype.L4b=function(i){for(var n,r,t,a,e=2;8!==e;)switch(e){case 1:e=a?5:8;break;case 5:this.Op.Zi&&(t="@"+g.default.time.ia()+", headerCache dataComplete: movieId: "+t+", streamId: "+i.Pa+", pts: "+i.ea+", remaining: "+(a.XW-1),this.emit("managerdebugevent",{message:t})),e=i.Fi&&0===i.responseType&&this.Jk&&!this.TH?4:9;break;case 4:n=g.default.time.now(),this.Jk.S$b(i,a,function(t){for(var e=2;4!==e;)2===e&&(t||p.sa(a)||(t=g.default.time.ia()-n,p.sa(a.Zb)&&(a.Zb={}),p.sa(a.Zb.su)&&(a.Zb.su=0),a.Zb.su+=t),--a.XW,r.C5(i),e=4)}),e=8;break;case 9:--a.XW,r.C5(i),e=8;break;case 2:r=this,t=i.L,a=this.md[t]||i.Jn,e=1}},t=18;break;case 23:e.prototype.Iwb=function(t){for(var e=2;1!==e;)switch(e){case 4:this.uUa(t,t.Jn),e=9;break;case 2:this.uUa(t,t.Jn),e=1}},e.prototype.Hwb=function(t,e){for(var i=2;1!==i;)switch(i){case 2:this.uUa(t,e),i=1;break;case 4:this.uUa(t,e),i=2}},e.prototype.uUa=function(t,e){for(var i,n=2;4!==n;)switch(n){case 2:i=t.Pa,n=1;break;case 9:i=t.Pa,n=9;break;case 1:n=(e=this.md[t.L]||e)?5:4;break;case 5:e.wDb||e.Fi&&!this.TH||(e.wDb=!0,++this.FH),e.headers||(e.headers={}),e.headers[i]=t,this.Op.bPb&&(e.VP||(e.VP=0),++e.VP),this.rla(),n=4}},e.prototype.rla=function(){for(var t,i,e,n=2;12!==n;)switch(n){case 2:i=0,n=1;break;case 5:n=this.FH>this.jWa?4:13;break;case 3:e=t.L,n=9;break;case 1:n=this.FH<=this.jWa?12:5;break;case 4:n=(t=this.Rp.shift())?3:5;break;case 9:n=t.data?8:7;break;case 14:this.cBb(e),n=5;break;case 8:for(var r in t.data)t.data[r].forEach(a),delete t.data[r];n=7;break;case 13:this.dBb(i),n=12;break;case 7:delete this.md[e],--this.FH,n=14}function a(t){for(var e=2;5!==e;)2===e&&(t.abort(),i+=t.bytesReceived,e=5)}},t=34;break;case 28:e.prototype.$yb=function(i,t){for(var e,n,r,a=2;8!==a;)switch(a){case 5:e=void 0,n=!1,this.Jk.a$a(this.md[i])?(e=Promise.resolve(this.md[i]),n=!0):e=this.Jk.V_b(i),a=3;break;case 1:a=this.Jk?5:9;break;case 2:r=this,a=1;break;case 9:return Promise.reject("Media cache is not enabled");case 3:return e.then(function(e){return!p.sa(e)&&r.Jk?r.Jk.S_b(i,t,e).then(function(t){return t&&(n||(r.md[i]=e,++r.FH,r.rla(),r.Rp.push(e),r.Rp.sort(r.Bfb)),r.vUa(i,t)),r.md[i]}):Promise.resolve(void 0)})}},e.prototype.vUa=function(t,e){for(var r,i,n,a,o=2;7!==o;)switch(o){case 5:r=this.md[t],i=e.headers,r&&i&&Object.keys(i).forEach(function(t){for(var e=2;1!==e;)switch(e){case 4:n.Hwb(i[t],r),e=9;break;case 2:n.Hwb(i[t],r),e=1}}),o=3;break;case 2:n=this,o=1;break;case 3:o=e.data?9:7;break;case 9:a=e.data,Object.keys(a).forEach(function(i){for(var t,n,e=2;9!==e;)2===e&&(t=a[i],p.sa(r.data)&&(r.data={}),p.sa(r.data[i])&&(r.data[i]=[]),n=r.data,t.forEach(function(t){for(var e=2;1!==e;)2===e&&(n[i].push(t),e=1)}),e=9)}),o=7;break;case 1:o=e?5:7}},e.prototype.Bfb=function(t,e){return e.priority-t.priority},e.prototype.Ifb=function(t){for(var e,i,n,r=2;11!==r;)switch(r){case 2:e={},r=1;break;case 5:for(i in t.data)0<(n=t.data[i]).length&&(e[n[0].mediaType]={Pa:i,header:t.headers[i],data:n});e.Wp=t.Wp,e.VP=t.VP,e.Zb=t.Zb,r=8;break;case 1:r=t&&t.data?5:11;break;case 8:e.fy=t.fy,e.OB=t.OB,e.nF=t.nF,r=14;break;case 14:e.rq=t.rq,r=13;break;case 13:return e.sq=t.sq,e}},t=41;break;case 4:e.prototype.Ufa=function(t){for(var e=2;5!==e;)2===e&&(this.Vm=t,this.Gx.forEach(function(){}),e=5)},e.prototype.xr=function(t,e,i){for(var n,r,a=2;9!==a;)switch(a){case 1:a=(n[e]=t)?5:4;break;case 5:for(var o in n)n.hasOwnProperty(o)&&!1===n[o]&&(r=!1);a=4;break;case 2:n=this.dI,r=t,a=1;break;case 4:i&&delete n[e],r?(this.Q5=!1,this.fzb()):this.Q5=!0,a=9}},e.prototype.flush=function(){for(var t,e=2;8!==e;)switch(e){case 3:this.Rp=[],this.Op.Zi&&(t="@"+g.default.time.ia()+", headerCache flush: ",this.emit("managerdebugevent",{message:t})),e=8;break;case 2:for(var i in this.L4a(),this.f6)(t=this.f6[i]).abort();this.md=Object.create(null),this.FH=0,e=3}},e.prototype.list=function(){return this.Rp},e.prototype.DZ=function(t,e){for(var i=2;4!==i;)switch(i){case 2:i=(t=this.md[t])?1:4;break;case 1:i=(e=t.headers[e])?5:4;break;case 9:i=(t=this.md[t])?5:0;break;case 7:case 5:return e}},e.prototype.p0b=function(t,e){{var i,n;return(n=(i=this).o0b(t))||!this.Jk?Promise.resolve(n):(this.TH?this.azb(t,e):this.$yb(t,e)).then(function(t){return i.Ifb(t)})}},t=14;break;case 34:e.prototype.dBb=function(t){for(var e=2;1!==e;)2===e&&(0!==t&&this.emit((t={type:"discardedBytes",bytes:t}).type,t),e=1)},e.prototype.fBb=function(t){for(var e=2;1!==e;)2===e&&(0!==t&&this.emit((t={type:"flushedBytes",bytes:t}).type,t),e=1)},t=32;break;case 27:e.prototype.uxb=function(t,e){{var i;return i=t.stream.mediaType,this.Gx.length<2&&this.PUa(),(e=r.z2.create(t.stream,e,this.Gx[i].track,t,this,!0,f)).Fi=t.Fi,e.Yf=this,e}},e.prototype.C5=function(t){for(var e,i=2;9!==i;)2===i&&(this.Cc(t)&&delete this.f6[t.Pa],this.Cc(t)||delete t.response,t.cd(),(e=this.md[t.L]||t.Jn)&&0===e.B8a&&0===e.XW&&(this.yBb(e,t.Zf),e.Fi&&this.Jk&&(e.Zb.Rqc||(this.TH?this.Jk.U$b(e):this.Jk.WR("savetodisk",{Qhb:e.Zb.su})))),i=9)},e.prototype.nzb=function(t,e,i){for(var n,r,a=2;8!==a;)switch(a){case 2:n=t.N8,e.Fi&&this.Jk&&(t.Ubb?n=t.Ubb:t.Bbb&&0<t.Bbb&&(n=2e3*t.Bbb)),a=5;break;case 5:a=0<n?4:3;break;case 4:return function(t,e){{var i=a000;return i.h9M(18),i.I9M(e,n)}};case 3:return r=i&&i.length<t.j2a?i.length:t.j2a,function(t){return a000.h9M(18),a000.K9M(t,r)}}},e.prototype.Wma=function(t,e){for(var i,n,r,a,o,s,u,c,h,f,l,d=2;53!==d;)switch(d){case 33:d=f<(h&&h.length||0)&&!a(l,s)?32:54;break;case 1:d=this.Q5?5:9;break;case 42:p.sa(i.Wp)&&(i.Wp=c.ea),c.Fi&&(c.responseType=0),t.Fi&&this.Jk&&t.RZ&&t.RZ[o]&&void 0!==c.ea&&t.RZ[o][c.ea]||((n=this.uxb(c,t.Ce)).Fi&&(n.Jn=t.Jn),n.tK(),++i.XW,e.push(n)),++l,d=38;break;case 29:a000.h9M(6),n=a000.I9M(f,1),d=28;break;case 26:u.Zi&&(e="@"+g.default.time.ia()+", headerCache requestData: movieId: "+a+", streamId: "+o+", pts: "+e+", startPts: "+c.ea,this.emit("managerdebugevent",{message:e})),d=25;break;case 38:s+=c.duration,d=37;break;case 13:return;case 9:i=this.md[a]||t.Jn,d=8;break;case 12:e=i.Wp,d=11;break;case 17:d=p.sa(c)?25:16;break;case 7:d=t.mediaType===b.default.Sd.P?6:11;break;case 19:v("no proper fragment found to request data at pts",e),d=53;break;case 21:l=s=0,r=(n=c&&c.mediaType)===b.default.Sd.J?u.nca:u.eca,d=34;break;case 3:this.eN.shift(),d=4;break;case 2:a=t.L,o=t.Pa,s=t.stream,u=t.Ce,d=1;break;case 4:d=this.eN.length>u.HWb?3:53;break;case 54:i.$qa&&!p.sa(i.Wp)&&(t=i.$qa,delete i.$qa,this.Wma(t,i.Wp)),d=53;break;case 5:this.eN.push({LWb:t,Qd:e}),d=4;break;case 6:d=void 0===i.Wp?14:12;break;case 36:++f,d=33;break;case 8:d=i?7:53;break;case 37:c=void 0,d=36;break;case 32:d=void 0!==(c=void 0===c?t.stream.Gl(f):c)?31:36;break;case 20:d=-1===f||void 0===f?19:18;break;case 31:c.Fi=t.Fi,d=30;break;case 43:++n,d=28;break;case 30:d=p.sa(h)||c.Ha?42:29;break;case 18:c=t.stream.Gl(f),d=17;break;case 44:c.s7(h.get(n)),c.UQ=n+1,f=n,d=43;break;case 34:u=n===b.default.Sd.J?u.g2b:u.Y1b,d=33;break;case 28:d=n<h.length&&(c.fa<r||c.duration<u)?44:42;break;case 14:i.$qa=t,d=13;break;case 11:t.mediaType===b.default.Sd.P&&u.xo&&!u.tI&&s.sf&&(e=Math.max(s.da&&s.da.vk(0)||0,e+s.sf.W)),f=(h=t.stream.da)&&h.No(e),d=20;break;case 16:c.Fi=t.Fi,(l=c.tsa(e))&&(c.mediaType===b.default.Sd.P&&!u.TZ&&l.Qd<(u.xo&&!u.tI&&s.sf?Math.floor(s.sf.W):0)&&(++l.jj,l.Qd+=c.oa.W),0<l.jj&&c.kj({start:l.jj})),d=26;break;case 25:void 0===i.data&&(i.data={}),void 0===i.data[o]&&(i.data[o]=[]),e=i.data[o],a=this.nzb(u,t,h),d=21}},t=23;break;case 14:e.prototype.o0b=function(t){return this.Ifb(this.md[t])},e.prototype.L4a=function(){function t(t){for(var e=2;1!==e;)2===e&&(t.c0a(),e=1)}for(var i,e,n,r=2;4!==r;)if(2===r){for(e in i=0,this.md)if((n=this.md[e]).data){for(var a in n.data){n.headers[a]||v("missing headerEntry for streamId:",a,"in entry:",n),u=s=o=void 0;for(var o=n,s=a,u=2;1!==u;)2===u&&(o&&o.data&&o.data[s].forEach(function(t){for(var e=2;5!==e;)2===e&&(t.abort(),i+=t.bytesReceived,e=5)}),u=1);n.data[a].forEach(t),delete n.data[a]}delete n.data}this.fBb(i),r=4}},e.prototype.oC=function(t){for(var e,i=2;5!==i;)2===i&&((e=this.md[t.L])&&(this.Cc(t)?p.sa(e.Zb.MWb)&&!p.sa(t.loadTime)&&(e.Zb.MWb=t.loadTime):p.sa(e.Zb.ofb)&&!p.sa(t.loadTime)&&(e.Zb.ofb=t.loadTime)),i=5)},e.prototype.gl=function(t){for(var e=2;1!==e;)2===e&&(this.Cc(t)?this.K4b(t):this.L4b(t),e=1)},e.prototype.y_=function(t){for(var e=2;5!==e;)2===e&&(m("_onError: ",t.toString()),this.C5(t),e=5)},t=20;break;case 32:e.prototype.cBb=function(t){for(var e=2;5!==e;)2===e&&(this.emit((t={type:"cacheEvict",movieId:t}).type,t),e=5)},e.prototype.jBb=function(t,e){for(var i,n=2;3!==n;)2===n&&(i=t.Ce,p.sa(t.Y9b)||this.Wma(t,t.Y9b),!this.Jk||!t.Fi||this.TH||p.sa(t.RZ)||t.RZ[t.Pa]&&t.RZ[t.Pa].header?e():this.Jk.T$b(t,e),i.EEa||0!==Object.keys(this.f6).length||this.VUa(),n=3)},e.prototype.yBb=function(t,e){for(var i=2;4!==i;)switch(i){case 9:t.Zb.O6b=e,i=8;break;case 2:t.Zb.O6b=e,i=1;break;case 1:t={type:"prebuffstats",movieId:t.L,stats:{prebuffstarted:t.Zb.ofb,prebuffcomplete:t.Zb.O6b}},this.emit(t.type,t),i=4}},e.prototype.azb=function(i,t){for(;;){var n=this;return this.Jk?this.Jk.T_b(i,t).then(function(t){for(var e=2;5!==e;)switch(e){case 1:return n.md[i]=t.Jn,++n.FH,n.rla(),n.Rp.push(t.Jn),n.Rp.sort(n.Bfb),n.vUa(i,t),n.cache[i];case 2:e=t&&t.Jn?1:5}}):Promise.reject("Media cache is not enabled")}},t=28;break;case 2:n.__extends(e,a),Object.defineProperties(e.prototype,{cache:{get(){return this.md},configurable:!0}}),e.prototype.dNb=function(){for(var t=2;5!==t;)2===t&&(this.flush(),this.VUa(),t=5)},t=4}}(a.Uw),e.CKa=i,c.default(t.EventEmitter.prototype,i.prototype)},function(t,e,i){var K,n,s,G,x,c,V,R;_esm(e),e.nNa=void 0,K=i(0),n=i(12),s=K.__importStar(i(1053)),G=K.__importStar(i(11)),i(2),x=i(268),c=i(8),t=i(36),V=K.__importStar(i(1064)),R=V.LMa,i=function(){function t(t,e,i){for(var n=2;12!==n;)switch(n){case 3:this.mzb=t.Tbb||!1,this.K=t,this.Qp=e,this.ce=i,n=6;break;case 2:this.H=new e.Console("MEDIACACHE","media|asejs"),this.ona=(t.HEa||t.IEa)&&0<(t.jX||(e.options||{}).LQ||0),this.Txb=t.POb||!1,this.TH=t.Oxa||!1,n=3;break;case 6:this.Vu=Promise.reject("Media cache has not been initiaized"),this.Vu.catch(function(){}),n=12}}for(var e=2;18!==e;)switch(e){case 7:t.prototype.a$a=function(t){return!(G.sa(t)||G.xb(t)||G.sa(t.Zb)||G.xb(t.Zb)||G.sa(t.L)||G.xb(t.L)||G.sa(t.priority)||G.xb(t.priority))},t.prototype.WR=function(t,e){for(var i=2;9!==i;)switch(i){case 2:var n={type:"mediacachestats",operation:t};"savetodisk"===t&&(n.saveTime=e.Qhb),"mediacachelookup"===t&&(n.lookupTime=e.Bba,n.dataFound=e.F8),n.oneObject=this.TH,i=3;break;case 3:this.Txb&&this.emit("mediacache",n),i=9}},t.prototype.d8b=function(e,i){{var n,t;return n=this,t=Object.keys(e).map(function(t){return n.HKb(e[t])}),Promise.all(t).then(function(t){return t.sort(function(t,e){return t.Cc===e.Cc?0:t.Cc?-1:1}),V.Rta(n.K,n.H,n.ce,t,i)})}},t.prototype.HKb=function(e){for(var i,u,c,h,t=2;5!==t;)switch(t){case 1:return new Promise(function(r,o){for(var s,t=2;5!==t;)2===t&&(i.Mp.Tda(R.Is,e,function(t,a){for(var e,i=2;1!==i;)if(2===i){try{for(e=2;19!==e;)switch(e){case 3:e=u instanceof ArrayBuffer?9:7;break;case 20:s=V.Ysa(c,{response:h.response}),e=6;break;case 10:var n="Missing or invalid media data parts for stream "+s.Pa;return o(n);case 5:Object.keys(a).map(function(e){for(var t,i,n,r=2;3!==r;)switch(r){case 5:try{for(t=2;5!==t;)2===t&&(i=new Uint8Array(a[e]),c=JSON.parse(String.fromCharCode.apply(null,i)),t=5)}catch(t){c=a[e]}r=3;break;case 2:n=e.substr(e.lastIndexOf(".")+1),r=1;break;case 4:n===R.GJa?u=a[e]:h[n]=a[e],r=3;break;case 1:r=n===R.Tia?5:4}}),e=4;break;case 13:return n="Missing or invalid header data parts for stream "+s.Pa,o(n);case 12:r(s),e=19;break;case 2:e=t||void 0===a?1:5;break;case 1:return o(t);case 14:e=V.Vva(s)?13:12;break;case 6:e=s.Cc?14:11;break;case 9:n="Header fragments was an array buffer, is invalid type "+s.Pa,e=8;break;case 11:e=V.Uva(s)?10:12;break;case 8:return o(n);case 7:s=V.Zsa(c,h,u),e=6;break;case 4:e=V.V9a(c)?3:20}}catch(t){o(t)}i=1}}),t=5)});case 2:i=this,h={},t=1}},e=12;break;case 3:t.prototype.T$b=function(i,n){for(var r,t,a,e,o,s,u=2;13!==u;)switch(u){case 2:r=this,t=[i.L,i.Pa,R.Mrb].join("."),a=this.Qp.time.ia(),e=V.u6a(i),(o={})[t+"."+R.Tia]={qs:e,Ec:R.bH},o[t+"."+R.osb]={qs:c.st(i.Mg.map(function(t){return t.data})),Ec:R.bH},u=4;break;case 3:e={timescale:i.stream.da.aa,startTicks:i.stream.da.Yn,offset:i.stream.da.Ai(0)},s=i.stream.da.kL,o[t+"."+R.GJa]={qs:e,Ec:R.bH},u=7;break;case 4:u=i.stream.Yd&&!G.sa(i.stream.da)?3:14;break;case 7:o[t+"."+R.Drb]={qs:s.sizes.buffer,Ec:R.bH},u=6;break;case 6:o[t+"."+R.Crb]={qs:s.te.buffer,Ec:R.bH},u=14;break;case 14:this.Mp.Phb(R.Is,o,function(t){for(var e=2;5!==e;)2===e&&(t||(t=r.Qp.time.ia()-a,i.Jn&&(G.sa(i.Jn.Zb.su)&&(i.Jn.Zb.su=0),i.Jn.Zb.su+=t)),n(),e=5)}),u=13}},t.prototype.S$b=function(t,i,n){for(var r,e,a,o,s,u=2;14!==u;)switch(u){case 5:r=this.Qp.time.ia(),e=[t.L,t.Pa,t.dd].join("."),t=V.Nta(t),a={},u=9;break;case 1:u=s instanceof ArrayBuffer?5:6;break;case 9:a[e+"."+R.Tia]={qs:t,Ec:R.bH},G.sa(s)||(a[e+"."+R.ktb]={qs:s,Ec:R.bH}),u=7;break;case 2:o=this,s=t.response,u=1;break;case 7:this.Mp.Phb(R.Is,a,function(t){for(var e=2;5!==e;)2===e&&(t?o.H.warn("Failed to save fragment",t):(t=o.Qp.time.ia()-r,G.sa(i.Zb.su)&&(i.Zb.su=0),i.Zb.su+=t),n(),e=5)}),u=14;break;case 6:n(Error("Unable to save fragment because response is not an ArrayBuffer")),u=14}},t.prototype.U$b=function(n){for(var t,e,i,r,a,o,s,u,c,h,f,l,d,p,b,g,m,v,y,w,A,_,E,k,S,T,I=2;20!==I;)switch(I){case 2:a=(r=this).Qp.time.ia(),o={},s=V.Y6a(n),o.movieEntry=s,I=5;break;case 4:u={},Object.keys(n.headers).forEach(function(t){for(var e,i=2;5!==i;)switch(i){case 9:u[t]=e,i=6;break;case 2:e=V.r6a(n.headers[t]),i=1;break;case 1:u[t]=e,i=5}}),I=9;break;case 9:o.headers=u,I=8;break;case 5:I=n.headers?4:8;break;case 8:I=n&&n.data?7:12;break;case 13:o.data=s,I=12;break;case 12:O={lifespan:259200},this.mzb&&(O.convertToBinaryData=!0),this.Mp.save(R.Is,n.L,o,O,function(t){for(var e=2;1!==e;)2===e&&(t||r.WR("savetodisk",{Qhb:r.Qp.time.ia()-a}),e=1)}),I=20;break;case 7:s={},c=n.data,h=Object.keys(n.data);try{for(f=2;6!==f;)switch(f){case 2:d=(l=K.__values(h)).next(),f=1;break;case 1:f=d.done?6:5;break;case 5:b=c[p=d.value],h={},f=3;break;case 3:f=b?9:7;break;case 9:try{for(g=2;7!==g;)switch(g){case 2:e=void 0,v=(m=K.__values(b)).next(),g=1;break;case 4:g=w instanceof x.z2&&w.response instanceof ArrayBuffer&&!G.sa(w.dd)?3:8;break;case 1:g=v.done?7:5;break;case 3:y=V.Nta(w),g=9;break;case 8:v=m.next(),g=1;break;case 5:w=v.value,g=4;break;case 9:h[w.dd]={mediaType:y.mediaType,streamId:y.streamId,movieId:y.movieId,bitrate:y.bitrate,location:y.location,serverId:y.serverId,saveToDisk:y.saveToDisk,offset:y.offset,bytes:y.bytes,timescale:y.timescale,startTicks:y.startTicks,durationTicks:y.durationTicks,response:w.response},g=8}}catch(t){e={error:t}}finally{for(A=2;1!==A;)if(2===A){try{for(_=2;1!==_;)2==_&&(v&&!v.done&&(i=m.return)&&i.call(m),_=1)}finally{for(E=2;5!==E;)switch(E){case 1:case 9:throw e.error;case 2:E=e?1:5}}A=1}}f=8;break;case 7:d=l.next(),f=1;break;case 8:s[p]=h,f=7}}catch(t){var O={error:t}}finally{for(k=2;1!==k;)if(2===k){try{for(S=2;1!==S;)2===S&&(d&&!d.done&&(t=l.return)&&t.call(l),S=1)}finally{for(T=2;5!==T;)switch(T){case 2:T=O?1:5;break;case 3:T=O?4:9;break;case 1:throw O.error}}k=1}}I=13}},e=7;break;case 2:t.prototype.xa=function(a,e){for(;;){var o=this;return this.ona?this.Vu=new Promise(function(n,r){for(var t=2;1!==t;)2===t&&((null!=e?e.cQ:function(t){return s.cQ(o.Qp,o.K,t)})(function(t){for(var e,i=2;4!==i;)2===i&&(e=(o.Mp=t).Vv,(t=t.IJ)?r(t):e?(o.Hbc(a),n()):r(Error("Media cache did not initialize")),i=4)}),t=1)}):(this.Vu=Promise.reject("Media cache is disabled"),this.Vu.catch(function(){})),this.Vu}},t.prototype.V_b=function(u){{var c,e,i;return c=this,e=[R.PMa,u].join("."),i=this.Qp.time.ia(),this.Vu.then(function(){return new Promise(function(s){for(var t=2;1!==t;)2===t&&(c.Mp.h0(R.Is,e,function(t){for(var o,e=2;3!==e;)switch(e){case 2:e=!t||t.length<=0?1:5;break;case 1:s(void 0),c.WR("mediacachelookup",{Bba:c.Qp.time.ia()-i,F8:!1}),e=3;break;case 5:o=t[0],c.Mp.read(R.Is,o,function(t,e){for(var i,n,r,a=2;14!==a;)switch(a){case 1:a=G.sa(e)?9:5;break;case 2:t&&c.H.warn("Reading movie entry "+o+" failed",t),a=1;break;case 3:n={priority:e.priority,movieId:e.movieId,saveToDisk:e.saveToDisk,firstSelectedStreamBitrate:e.firstSelectedStreamBitrate,initSelectionReason:e.initSelectionReason,histDiscountedThroughputValue:e.histDiscountedThroughput,histTdigest:e.histTdigest,histAge:e.histAge,headerCount:e.headerCount,dataRequestCount:e.dataRequestCount,headerRequestCount:e.headerRequestCount,stats:e.stats},a=9;break;case 4:try{for(i=2;1!==i;)2===i&&(n=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(e))),i=1)}catch(t){}a=9;break;case 5:a=e instanceof ArrayBuffer?4:3;break;case 9:G.sa(n)||(r=V.Qta(n)),G.sa(r)||G.xb(r)||(r.Zb=r.Zb||{},r.headers=r.headers||{}),c.a$a(r)?s(r):(c.tBb(u),s(void 0)),a=14}}),e=3}}),t=1)})})}},t.prototype.S_b=function(a,i,o){for(var s,u,t=2;9!==t;)switch(t){case 2:s=this,t=1;break;case 6:t=-this.Vu?1:0;break;case 4:return u=this.Qp.time.ia(),this.Vu.then(function(){return new Promise(function(r){for(var t=2;1!==t;)2===t&&(s.Mp.h0(R.Is,a,function(t){for(var e=2;5!==e;)2===e&&(t=t.reduce(function(t,e){for(var i,n=2;9!==n;)switch(n){case 4:return t[i]?t[i].push(e):t[i]=[e],t;case 2:i=e.substr(0,e.lastIndexOf(".")),n=1;break;case 14:return t;case 1:n=-1!==i.indexOf("drmHeader.__embed__")?5:4;break;case 5:return t}},{}),s.d8b(t,i).then(function(t){for(var e=2;8!==e;)switch(e){case 5:var i=s.Qp.time.ia()-u,n=!1;G.sa(t)||G.sa(t.data)||!G.fk(t.data)?s.H.trace("No content data found for "+a,o):n=!0,s.WR("mediacachelookup",{Bba:i,F8:n}),r(t),e=8;break;case 1:return r(void 0);case 2:e=void 0===o||void 0===t?1:5}},function(){for(var t=2;1!==t;)switch(t){case 4:r(-8),t=4;break;case 2:r(void 0),t=1}}),e=5)}),t=1)})});case 1:t=this.Vu?4:5;break;case 5:return Promise.reject("Media cache is not enabled")}},t.prototype.T_b=function(i,n){{var r,a;return a=(r=this).Qp.time.ia(),this.Vu.then(function(){return r.Tyb(i)}).then(function(t){for(var e=2;5!==e;)switch(e){case 9:e=t?6:3;break;case 1:return r.XAb(i.toString(),n,a);case 2:e=t?1:4;break;case 4:r.WR("mediacachelookup",{Bba:r.Qp.time.ia()-a,F8:!1}),e=5}})}},e=3;break;case 12:t.prototype.XAb=function(U,F,q){{var H;return H=this,new Promise(function(D,L){for(var B,t=2;5!==t;)2===t&&(H.Mp.read(R.Is,U,function(t,e){for(var i,n,r,a,o,s,u,c,h,f,l,d,p,b,g,m,v,y,w,A,_,E,k,S,T,I,O,x,R,P=2;4!==P;)switch(P){case 12:i=Object.keys(n.headers),P=11;break;case 15:H.WR("mediacachelookup",{Bba:H.Qp.time.ia()-q,F8:!0}),D(B),P=4;break;case 17:B=V.Rta(H.K,H.H,H.ce,e,F),P=16;break;case 9:D(void 0),P=4;break;case 3:P=G.sa(e)?9:8;break;case 1:P=t?5:3;break;case 8:n=e[U],P=7;break;case 2:P=1;break;case 6:t=V.Qta(n.movieEntry),e=[],P=13;break;case 7:P=n.movieEntry?6:15;break;case 11:try{for(j=2;12!==j;)switch(j){case 4:j=l.fragments instanceof ArrayBuffer?3:8;break;case 3:var C="Header fragments was an array buffer, is invalid type "+l.streamId,j=9;break;case 2:c=(u=K.__values(i)).next(),j=1;break;case 14:e.push(h),j=13;break;case 7:j=V.Vva(h)?6:14;break;case 1:j=c.done?12:5;break;case 13:c=u.next(),j=1;break;case 8:h=V.Zsa(l,l,l.fragments),j=7;break;case 5:f=c.value,l=n.headers[f],j=4;break;case 6:return C="Missing or invalid header data parts for stream "+h.Pa,L(C);case 9:return L(C)}}catch(t){var N={error:t}}finally{for(d=2;1!==d;)if(2===d){try{for(p=2;1!==p;)2===p&&(c&&!c.done&&(r=u.return)&&r.call(u),p=1)}finally{for(b=2;5!==b;)switch(b){case 3:b=7;break;case 2:b=N?1:5;break;case 1:throw N.error}}d=1}}P=10;break;case 10:P=n.data?20:17;break;case 5:L(t),P=4;break;case 20:N=n.data,r=Object.keys(N),P=18;break;case 18:try{for(g=2;8!==g;)switch(g){case 9:v=m.next(),g=1;break;case 2:v=(m=K.__values(r)).next(),g=1;break;case 5:f=v.value,y=Object.keys(N[f]);try{for(w=2;7!==w;)switch(w){case 1:w=_.done?7:5;break;case 3:return C="Missing or invalid media data parts for stream "+k.Pa,L(C);case 2:o=void 0,_=(A=K.__values(y)).next(),w=1;break;case 4:w=V.Uva(k)?3:9;break;case 5:E=N[f][_.value],k=V.Ysa(E,E),w=4;break;case 8:_=A.next(),w=1;break;case 9:e.push(k),w=8}}catch(t){o={error:t}}finally{for(S=2;1!==S;)if(2===S){try{for(T=2;1!==T;)2===T&&(_&&!_.done&&(s=A.return)&&s.call(A),T=1)}finally{for(I=2;5!==I;)switch(I){case 9:throw o.error;case 2:I=o?1:5;break;case 3:I=o?6:9;break;case 1:throw o.error}}S=1}}g=9;break;case 1:g=v.done?8:5}}catch(t){var M={error:t}}finally{for(O=2;1!==O;)if(2===O){try{for(x=2;1!==x;)2===x&&(v&&!v.done&&(a=m.return)&&a.call(m),x=1)}finally{for(R=2;5!==R;)switch(R){case 2:R=M?1:5;break;case 1:throw M.error}}O=1}}P=17;break;case 13:P=n.headers?12:10;break;case 16:void 0!==B&&(B.Jn=t),P=15}}),t=5)})}},t.prototype.Tyb=function(n){for(var e,t=2;5!==t;)switch(t){case 3:e=this,t=8;break;case 2:e=this,t=1;break;case 1:return this.Vu?this.Vu.then(function(){return new Promise(function(i){for(var t=2;1!==t;)2===t&&(e.Mp.h0(R.Is,n.toString(),function(t){for(var e=2;1!==e;)2===e&&(t&&0!==t.length&&1===t.length&&t[0]===n.toString()?i(!0):i(!1),e=1)}),t=1)})}):Promise.reject("Media cache is not enabled")}},t.prototype.tBb=function(t){var i,e,n=2;function r(t){for(var e=2;1!==e;)2===e&&(i.Mp.delete(R.Is,t),e=1)}for(;4!==n;)2===n&&(i=this,e=t.toString(),this.Mp.h0(R.Is,[R.PMa,t].join("."),a),this.Mp.h0(R.Is,e,a),n=4);function a(t){for(var e=2;1!==e;)switch(e){case 4:t.map(r),e=2;break;case 2:t.map(r),e=1}}},t.prototype.Hbc=function(i){for(var t,e=2;4!==e;)2===e&&((t=new n.Kf).on(this.Mp,"mediacache",function(t){for(var e=2;4!==e;)switch(e){case 9:e=t.keys&&t.items?6:7;break;case 2:e=t.keys||t.items?1:5;break;case 1:t.keys||t.items.map(function(t){return t.key}),e=5;break;case 5:i.emit("mediacache",t),e=4}}),t.on(this.Mp,"mediacache-error",function(t){for(var e=2;5!==e;)2===e&&(t.type="error",i.emit("mediacache",t),e=5)}),e=4)},e=19;break;case 19:return t}}(),e.nNa=i,t.Ve(n.EventEmitter,i)},function(t,e,r){var a,o,s=r(11),u=[],c=!1;t.exports={cQ:function(t,e,i){var n;return c?s.gd(i)&&(a.Vv||a.IJ?setTimeout(function(){i(a)},0):u.push(i)):(c=!0,(n=r(133)).TY(t),o=new n.Console("MEDIACACHE","media|asejs"),a=new(r(453))(e,function(t){t&&o.warn("Failed to initialize MediaCache",t),s.gd(i)&&setTimeout(function(){i(a)},0),u.map(function(t){setTimeout(function(){t(a)},0)})})),a},opc:function(t,i){a=new(r(453))(t,function(t,e){t&&o.warn("Failed to initialize MediaCache",t),s.gd(i)&&setTimeout(function(){i(e)},0)})}}},function(t,e,i){var o,s,u,c,h;function f(t){this.Ps=t,this.context=t.context,this.kdb="NULLCONTEXT"===t.context}o=i(11),s=i(133),u=new s.Console("DISKCACHE","media|asejs"),c={context:"NULLCONTEXT",read:function(t,e,i,n,r){r("MediaCache is not supported")},remove:function(t,e,i){i("MediaCache is not supported")},create:function(t,e,i,n){n("MediaCache is not supported")},append:function(t,e,i,n){n("MediaCache is not supported")},query:function(t,e,i){i([])}},f.prototype.jI=function(){var t=Array.prototype.slice.call(arguments),e=t[0],i=t[t.length-1];(t=t.slice(1,t.length-1)).push(function(t){i(null,t)});try{if(this.kdb)throw Error("Media Cache not supported");e.apply(this.Ps,t)}catch(t){i(t)}},f.prototype.query=function(t,e,i,n){try{if(this.kdb)throw Error("Media Cache not supported");this.Ps.query(t,e,function(t){i(null,t)},n)}catch(t){i(t)}},f.prototype.read=function(t,e,i,n,r){this.jI(this.Ps.read,t,e,i,n,r)},f.prototype.remove=function(t,e,i){this.jI(this.Ps.remove,t,e,i)},f.prototype.create=function(t,e,i,n){this.jI(this.Ps.create,t,e,i,n)},f.prototype.append=function(t,e,i,n){this.jI(this.Ps.append,t,e,i,n)},f.prototype.info=function(t){this.jI(this.Ps.info,t)},f.prototype.validate=function(t){this.jI(this.Ps.validate,t)},f.prototype.flush=function(t){this.jI(this.Ps.flush,t)},f.prototype.clear=function(){this.Ps.clear()},t.exports={KKb:function(t){var e,i,n,r,a=t.Koc||"NRDMEDIADISKCACHE";t=h=0!==(h=t.jX||0)||o.sa(s.options)||o.sa(s.options.LQ)?h:s.options.LQ;try{if(!(i=s.storage.xNb)||!o.fk(i))throw u.warn("Failed to get disk store contexts from platform"),"Platform does not support disk store";if(e=i[a])u.warn("Disk store exists, returning"),n=new f(e);else{if(o.sa(s.storage)||!o.gd(s.storage.h1a)||s.options&&0===s.options.LQ)throw u.warn("Platform doesn't support creating disk store contexts"),"Platform doesn't support creating disk store contexts";if(u.warn("Disk store context doesn't exist, creating with size "+t),!(r=s.storage.h1a({context:a,size:t,encrypted:!0,signed:!0}))||!r.valid)throw"Failed to create disk store context";n=new f(r)}}catch(t){u.warn("Exception creating disk store context - returning NullContext (noops)",t),n=new f(c)}return n},YSb:function(){return h},pjc:f}},function(t,e,o){var h,f,c,l,s,u,d,p,b;function g(){}function m(t,e,i,n,r){var a=h.gd(n)?n:g;this.Dx=t,this.Fg=i.pt,this.FA=0,this.Zxb=i.GPb||"NONE",this.lA=h.sa(r)||h.xb(r)?0:r,this.af={},this.Ru=i.Qqc||f.storage.dU,this.wx=e,this.NN=s.create(this.wx,i.QLb*this.lA,this.Dx),this.on=this.addEventListener=b.addEventListener,this.removeEventListener=b.removeEventListener,this.emit=this.gb=b.gb,this.FVa=y(this,m.We.REPLACE),this.Byb=y(this,m.We.fUa),this.cI,this.cI=i.Gmb?o(1060):o(1061),this.wx.query(this.Ru,this.Zr(""),function(t,r){var e;t?a(t):(e=this.NN.Hta(),t=Object.keys(r).filter(function(t){return t!==e&&u.jQ(t)}).map(this.eEa.bind(this)),this.Tda(t,function(t,n){Object.keys(n).map(function(t){var e,i=n[t];(this.af[u.z9(t)]=i).sBa&&1<Object.keys(i.sBa).length?(e=0,Object.keys(i.sBa).forEach(function(t){r[this.Zr(t)]&&h.Oa(r[this.Zr(t)].size)&&(e+=r[this.Zr(t)].size)}.bind(this)),t=u.z9(t),this.af[t].size=e):(t=u.z9(t),r[this.Zr(t)]&&(this.af[t].size=r[this.Zr(t)].size))}.bind(this)),v(this.wx,this.Ru,this.Dx,function(t,e){this.FA=e,t?a(t):a(null,this)}.bind(this))}.bind(this)))}.bind(this))}function v(t,e,i,n){var r=h.gd(n)?n:g;t.query(e,i,function(t,i){t?r(t):(t=Object.keys(i).reduce(function(t,e){return t+(i[e].size||0)},0),r(null,t))})}function y(u,c){return function(e,r,a,o,s){return function(t,i){var n;t?(r||u.gb(m.We.Jf,{itemKey:e,error:t}),a(t)):(n={zl:0,duration:0,items:[],time:f.time.now()},Object.keys(i.actions).map(function(t){var e=i.actions[t];t={key:u.eEa(e.fba),Nl:t},e.ha?(n.zl+=e.zl,t.eba=e.zl,h.Oa(e.duration)&&(n.duration+=e.duration)):t.error=e.error,n.items.push(t)}),t=h.gd(o)?o():0,0<s&&(n.LO=s-t),v(u.wx,u.Ru,u.Dx,function(t,e){t?a(t):(u.FA=e,n.Oo=u.Fg-e,r||u.gb(c,p.P5a(n)),a(null,n))}))}}}function w(t,e){return 0<e&&e<=t}h=o(11),f=o(133),c=o(272),e=o(90),l=new f.Console("MEDIACACHE","media|asejs"),s=o(1056),u=o(454),d=o(134),p=o(273),b=o(455).EventEmitter,e({We:{fUa:"writeitem",REPLACE:"replaceitem",tia:"journalupdate",Jf:"mediacache-error"}},m),m.prototype.eUb=function(){return this.Dx},m.prototype.eEa=function(t){return t.slice(this.Dx.length+1)},m.prototype.vta=function(){return Object.keys(this.af).filter(function(t){return void 0===(t=u.Rsa(this.af[t]))||t.H0a()<=0}.bind(this))},m.prototype.oUb=function(){return Object.keys(this.af).reduce(function(t,e){var i=this.af[e];return i&&i.creationTime<t.creationTime?{resourceKey:e,creationTime:i.creationTime}:t}.bind(this),{resourceKey:null,creationTime:f.time.now()}).Wrc},m.prototype.iTb=function(){var t;return t="FIFO"===this.Zxb?this.oUb():t},m.prototype.OMb=function(r){var a=h.gd(r)?r:g;this.B6a(function(t){var n,i=this.af,e=Object.keys(i).reduce(function(e,t){return(t=i[t]).resourceIndex&&Object.keys(t.resourceIndex).forEach(function(t){e.push(t)}),e},[]);(t=t.filter(function(t){return!u.jQ(t)&&e.indexOf(t)<0}))&&0<t.length?(n=this,t=f.Promise.all(t.map(function(t){return new f.Promise(function(e,i){n.delete(t,function(t){t?i(t):e()})})})).then(function(){a(void 0,{NAa:!0})},function(t){a(t,{NAa:!1})}),p.Vy(t)):r(void 0,{NAa:!1})}.bind(this))},m.prototype.u8b=function(n,t,r){var a,o=h.gd(t)?t:g;t=this.Zr(n),a=f.time.now(),this.wx.read(this.Ru,t,0,-1,function(t,e){var i;if(t)o(t);else if(e&&e.ha&&e.value){h.gd(r)||(r=this.cI.fY(d.Js.OG),u.jQ(n)?r=this.cI.fY(d.Js.A4):(t=this.af[n],!h.sa(t)&&h.Oa(t.resourceIndex[n])?(t=t.resourceIndex[n],h.sa(t)&&(t=d.Js.OG),r=this.cI.fY(t)):l.warn("Metadata is undefined or does not contain a resource format for key",n,":",t)));try{i=r(e.value)}catch(t){return o(c.AM.Ds(t.message))}e={duration:f.time.now()-a},this.af[n]&&h.Oa(this.af[n].size)&&(e.VA=h.Oa(this.af[n].size)?this.af[n].size:0),o(null,i,e)}else o(c.AM.Ds(e.error))}.bind(this))},m.prototype.read=function(t,e,i){this.u8b(t,e,i)},m.prototype.Tda=function(t,e,i){var o,s,n=h.gd(e)?e:g;"[object Array]"!==Object.prototype.toString.call(t)?n(c.AM.Ds("item keys must be an array")):(o={},s=[],t=f.Promise.all(t.map(function(a){return new f.Promise(function(n,r){var t;i&&!h.sa(i[a])&&(t=this.cI.fY(i[a])),this.read(a,function(t,e,i){t?((e={})[a]=t,r(e)):(o[a]=e,s.push({duration:i.duration,VA:i.VA}),n())},t)}.bind(this))}.bind(this))).then(function(){var t={};0<s.length&&(t=s.reduce(function(t,e){return h.Oa(e.duration)&&(t.duration+=e.duration),h.Oa(e.VA)&&(t.VA+=e.VA),t},{duration:0,VA:0})),n(null,o,t)},function(t){n(t)}),p.Vy(t))},m.prototype.write=function(t,e,i,n,r){var a,o;i=h.gd(i)?i:g,B=this.Zr(t),a="function"==typeof r?r():0,o=d.zua(e),(o=this.cI.iua(o)(e)).byteLength+this.FA>=this.Fg?i(c.WL):w(o.byteLength+a,this.lA)?i(c.s5):this.NN.save(this.Ru,B,e,this.Byb(t,n,i,r,this.lA),o.byteLength)},m.prototype.replace=function(e,i,t,n,r){var a,o=h.gd(t)?t:g,s=this.Zr(e),u=0;"function"==typeof r&&(u=r()),t=d.zua(i),a=this.cI.iua(t)(i),(t=(this.af[e]||{}).size||0)<=0&&this.af[e]?this.g7a([e],function(t){l.trace("Replacing key",e,"which exists:",!!this.af[e],this.af[e]||void 0,"and has size",t,"with",i,"with size",a.byteLength,"plus _used",this.FA,"vs capacity",this.Fg),a.byteLength-t+this.FA>=this.Fg?o(c.WL):w(a.byteLength-t+u,this.lA)?o(c.s5):this.NN.replace(this.Ru,s,i,this.FVa(e,n,o,r,this.lA),a.byteLength)}.bind(this)):(l.trace("Replacing key",e,"which exists:",!!this.af[e],this.af[e]||void 0,"and has size",t,"with",i,"with size",a.byteLength,"plus _used",this.FA,"vs capacity",this.Fg),a.byteLength-t+this.FA>=this.Fg?o(c.WL):w(a.byteLength-t+u,this.lA)?o(c.s5):this.NN.replace(this.Ru,s,i,this.FVa(e,n,o,r,this.lA),a.byteLength))},m.prototype.I9b=function(t,e,a,o){var s=h.gd(e)?e:g;"[object Object]"!==Object.prototype.toString.call(t)?s(c.r5.Ds("items must be a map of keys to objects")):(e=f.Promise.all(Object.keys(t).map(function(n){return new f.Promise(function(i){this.replace(n,t[n],function(t,e){i(t?{error:t,qs:n}:e)},!0,o)}.bind(this))}.bind(this))).then(function(t){var i,e,n,r;try{i=Number.MAX_VALUE,e=t.reduce(function(e,t){return t.error||(e.zl+=t.zl,h.Oa(t.duration)&&(e.duration+=t.duration),!h.sa(t.Oo)&&t.Oo<i&&(i=t.Oo),t.items.map(function(t){e.items.push({key:t.key,Nl:t.Nl,eba:t.eba,j0b:t.j0b,duration:t.duration})}),i<Number.MAX_VALUE&&(e.Oo=i)),e},{zl:0,items:[],time:f.time.now(),duration:0}),0<this.lA&&(e.LO=this.lA-o()),n=t.filter(function(t){return!h.sa(t.error)}),r=p.Z7a(n),a||(r?r.forEach(function(t){this.gb(m.We.Jf,t)}.bind(this)):this.gb(m.We.REPLACE,p.P5a(e))),s(r,e)}catch(t){s(t)}}.bind(this),function(t){a||this.gb(m.We.Jf,t),s(t)}.bind(this)),p.Vy(e))},m.prototype.delete=function(t,e){var i=h.gd(e)?e:g;this.wx.remove(this.Ru,this.Zr(t),function(t,e){t?i(t):e&&e.ha?v(this.wx,this.Ru,this.Zr(""),function(t,e){t?i(t):(this.FA=e,i())}.bind(this)):i(c.kqb.Ds(e.error))}.bind(this))},m.prototype.B6a=function(i){this.query("",function(t,e){t?(l.error("Failed to get keys",t),i([])):i(e)})},m.prototype.query=function(t,e){var i=h.gd(e)?e:g,n=this.NN.Hta();this.wx.query(this.Ru,this.Zr(t),function(t,e){t?i(t):i(null,Object.keys(e).filter(function(t){return t!==n}).map(this.eEa.bind(this)))}.bind(this))},m.prototype.Zr=function(t){return this.Dx+"."+t},m.prototype.clear=function(t){var i=h.gd(t)?t:g;this.B6a(function(t){var e=f.Promise.all(t.map(function(e){return new f.Promise(function(t){e&&this.delete(e,function(){t()})}.bind(this))}.bind(this))).then(function(){i(t)},function(t){this.gb(m.We.Jf,t),i([],t)}.bind(this));p.Vy(e)}.bind(this))},m.prototype.g7a=function(e,t){var n=h.gd(t)?t:g,r=(e||[]).map(function(t){return this.Zr(t)}.bind(this));this.wx.query(this.Ru,this.Dx,function(t,i){t?(l.error("failed to get persisted size for keyset ",e,t),n(0)):(t=Object.keys(i).filter(function(t){return 0<=r.indexOf(t)}).reduce(function(t,e){return t+(i[e].size||0)},0),n(t))}.bind(this))},m.prototype.ySb=function(t){return this.NN.D5a(t)},t.exports=m.prototype.constructor=m},function(t,e,i){var f,y,w,n,A,_,E,r;function k(t,e,i){var b,g,c,h;function m(t,n,r,a){t.info.call(t,function(t,e){var i;if(t)a(t);else{try{i=e.values[this.context].entries[n][r].size}catch(t){i=-1}-1<i?a(null,i):this.validate(function(t,e){t?a(t):(e[r]&&(i=e[r].size),a(null,i))})}}.bind(t))}function v(t,e,i,n,r,a){n.Xo(i.time,i);for(var o,s,u,c,h,f,l,d=i.time-864e5,p=n.My();p&&!isNaN(p.time)&&p.time<d;)p=n.QO(),b(0-(p.fa||0)),p=n.My();n=n.co().map(function(t){return t.time+";"+t.fa}),o=t,s=e,u=Array.prototype.join.call(n,"|"),t=i.fa,c=i.time,f=a,(h=r)?h.actions||(h.actions={}):h={actions:{}},b(t),l=y.time.now(),t=new E(function(i,n){o.create(y.storage.dU,s,u,function(t,e){t?n(t):i(e)})}).then(function(i){i.ha?m(o,y.storage.dU,s,function(t,e){t?f(t):(g(e),b(e),h.actions[k.k2.tia]={ha:!0,time:c,zl:e,fba:s,egb:i,duration:y.time.now()-l},h.Oo=i.Oo,f(null,h))}):(h.actions[k.k2.tia]={ha:!1,fba:s,error:i.error},f(null,h))},function(t){f(t)}),A.Vy(t)}if(!t.Ps.valid)return r;this.UUa=f.sa(e)||f.xb(e)?0:e,this.Gla=t,this.oma=this.IU=0,this.yV=new n,this.CAb=i||"default",this.pN=this.CAb+".NRDCACHEJOURNALKEY",b=function(t){return isNaN(t)||(this.IU+=t),this.IU}.bind(this),g=function(t){return isNaN(t)||(this.oma+=t),this.oma}.bind(this),this.Hta=function(){return this.pN},this.save=function(t,e,i,n){var o,s,u,c,h,f,l,d,p,r=y.time.now();o=this.Gla,s=this.pN,u=t,c=e,t=i,h=0<=this.UUa,f=this.yV,l=r,d=n,p=y.time.now(),o.append(u,c,t,function(t,r){var a;t?(_.error("Failed to save item "+c,t),d(t)):r.ha?(a=r.Oo,m(o,u,c,function(t,e){var i,n;t?d(t):(t={time:l,fa:e||0},i={Oo:a,actions:{}},n=y.time.now()-p,i.actions[k.k2.vvb]={ha:!0,time:l,zl:e,fba:c,egb:r,duration:n},h?v(o,s,t,f,i,d):(b(e),d(null,i)))})):d(w.r5.Ds(r.error||"Failed to save item"))})},this.replace=function(t,e,i,n){var o,s,u,c,h,f,l,d,p,r=y.time.now();o=this.Gla,s=this.pN,u=t,c=e,t=i,h=0<=this.UUa,f=this.yV,l=r,d=n,p=y.time.now(),o.create(u,c,t,function(t,r){var a;t?_.error("Failed to replace item",c,t):r.ha?(a=r.Oo,m(o,u,c,function(t,e){var i,n;t?d(t):(t={time:l,fa:e||0},i={Oo:a,actions:{}},n=y.time.now()-p,i.actions[k.k2.REPLACE]={ha:!0,time:l,zl:e,fba:c,egb:r,duration:n},h?v(o,s,t,f,i,d):(b(e),d(null,i)))})):d(w.r5.Ds(r.error||"Failed to create item"))})},this.D5a=function(t){var e,i=this.IU;t-=864e5;for(var n=this.yV.co(),r=0;r<n.length;r++)(e=n[r]).time<t&&!isNaN(e.fa)&&(i-=e.fa);return i},h=(c=this).Gla,c.IU=0,h.read(y.storage.dU,c.pN,0,-1,function(t,e){var i,n,r,a=[],o=0,s=!0;if(t)_.error("Failed to compile records",t);else if(e.ha){t=String.fromCharCode.apply(null,new Uint8Array(e.value)),e=(t=String.prototype.split.call(t,"|")).reduce(function(t,e){return t+(e.length+40)},0),b(e),a=t.map(function(t){return t=t.split(";"),{time:Number(t[0]),fa:Number(t[1])}});try{if(!isNaN(a.reduce(function(t,e){return t+e.fa},0)))for(var s=!1,u=y.time.now()-864e5;o<a.length;o++)(i=a[o]).time<u||(c.yV.Xo(i.time,i),b(i.fa))}catch(t){}}s&&(r=c,(n=h)&&f.gd(n.remove)&&n.Ps.valid&&n.remove(y.storage.dU,r.pN,function(t,e){if(t)_.error("Failed to delete old journal key",t);else try{e&&(f.sa(e.error)||e.error.some(function(t){return"NFErr_FileNotFound"===t.apc}))&&v(n,r.pN,{time:0,fa:0},r.yV,0,function(){})}catch(t){}}))})}f=i(11),y=i(133),w=i(272),n=i(1057),e=i(90),A=i(273),_=new y.Console("DISKWRITEMANAGER","media|asejs"),E=y.Promise,e({k2:{vvb:"saveitem",REPLACE:"replaceitem",tia:"journalupdate"}},k),r={save:function(t,e,i,n){n(w.MMa)},replace:function(t,e,i,n){n(w.MMa)},Hta:function(){return""},D5a:function(){return 0}},k.prototype.constructor=k,t.exports={create:function(t,e,i){return new k(t,e,i)},mlc:r}},function(t){function e(t){if(!(this instanceof e))return new e(t);if(void 0===t)this.oo=function(t,e){return t<=e};else{if("function"!=typeof t)throw Error("heap comparator must be a function");this.oo=t}this.gr=[]}function h(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}e.prototype.clear=function(){this.gr=[]},e.prototype.Xo=function(t,e){this.gr.push({priority:t,value:e}),t=this.gr,e=this.oo;for(var i=t.length-1,n=0===i?null:Math.floor((i-1)/2);null!==n&&e(t[i].priority,t[n].priority);)h(t,i,n),n=0===(i=n)?null:Math.floor((i-1)/2)},e.prototype.remove=function(){var t;if(0!==this.gr.length)return t=this.gr[0],h(this.gr,0,this.gr.length-1),this.gr.pop(),function t(e,i){var n=e.gr,r=e.oo,a=2*i+1,o=2*i+2,s=n[i],u=n[a],c=n[o];u&&r(u.priority,s.priority)&&(!c||r(u.priority,c.priority))?(h(n,i,a),t(e,a)):c&&r(c.priority,s.priority)&&(h(n,i,o),t(e,o))}(this,0),t.value},e.prototype.My=function(){if(0!==this.gr.length)return this.gr[0].value},e.prototype.enqueue=e.prototype.Xo,e.prototype.QO=e.prototype.remove,e.prototype.Qaa=function(){return 0===this.gr.length},e.prototype.co=function(){return this.gr.map(function(t){return t.value})},t.exports=e},function(t){function e(t,e){var i;if(void 0===e||"function"!=typeof e||"string"!=typeof t)throw new TypeError("EventEmitter: addEventListener requires a string and a function as arguments");return void 0===this.Ld?(this.Ld={},this.Ld[t]=[e],!0):void 0===(i=this.Ld[t])?(this.Ld[t]=[e],!0):i.indexOf(e)<0&&(i.push(e),!0)}function i(t,e){return!!(t=this.Ld?this.Ld[t]:void 0)&&(t.forEach(function(t){t(e)}),!0)}t.exports={addEventListener:e,on:e,removeEventListener:function(t,e){var i;if(void 0===e||"function"!=typeof e||"string"!=typeof t)throw new TypeError("EventEmitter: removeEventListener requires a string and a function as arguments");return void 0!==this.Ld&&(void 0!==(i=this.Ld[t])&&(!((e=i.indexOf(e))<0)&&(1===i.length?delete this.Ld[t]:i.splice(e,1),!0)))},gb:i,emit:i,removeAllListeners:function(t){return this.Ld&&(void 0===t?delete this.Ld:delete this.Ld[t]),this}}},function(t){function e(t){this.listeners=[],this.console=t}(e.prototype.constructor=e).prototype.on=e.prototype.addEventListener=function(t,e,i,n){if(i=n?i.bind(n):i,n=!1,t){if(this.console&&(i=function(t,e,i,n){t.trace(":",i,":",n),e(n)}.bind(null,this.console,i,e)),"function"==typeof t.addEventListener)n=t.addEventListener(e,i);else{if("function"!=typeof t.addListener)throw Error("Emitter does not have a function to add listeners for '"+e+"'");n=t.addListener(e,i)}this.listeners.push([t,e,i])}return n},e.prototype.clear=function(){var t=this.listeners.length;this.listeners.forEach(function(t){var e=t[0],i=t[1];t=t[2],"function"==typeof e.removeEventListener?e.removeEventListener(i,t):"function"==typeof e.removeListener&&e.removeListener(i,t)}),this.listeners=[],this.console&&this.console.trace("removed",t,"listener(s)")},t.exports=e},function(t,e,i){var n,r=i(11),a=i(134),o={};o[a.Js.OG]=function(t){return t},o[a.Js.Z4]=function(t){return t=t||new ArrayBuffer(0),String.fromCharCode.apply(null,new Uint8Array(t))},o[a.Js.A4]=function(t){var e=t||new ArrayBuffer(0);t="";for(var e=new Uint8Array(e),i=0;i<e.byteLength;i++)t+=String.fromCharCode(e[i]);return JSON.parse(t)},(n={})[a.Js.OG]=function(t){return t},n[a.Js.Z4]=function(t){for(var e=new ArrayBuffer(t.length),i=new Uint8Array(e),n=0,r=t.length;n<r;n++)i[n]=t.charCodeAt(n);return e},n[a.Js.A4]=function(t){return r.sa(t)||r.xb(t)?t:n[a.Js.Z4](JSON.stringify(t))},t.exports={fY:function(t){return o[t]||o[a.Js.OG]},iua:function(t){return n[t]||n[a.Js.OG]}}},function(t,e,i){function n(t){return t}function r(){return n}i(11),t.exports={fY:r,iua:r}},function(t,e,i){var c;function h(t,e){return t.length>e.length?1:e.length>t.length?-1:0}c=i(134),t.exports={wNb:function a(o,s){var u,t,e=[];return c.fk(s)?(u={},(t={})[o]=u,e.push(t),e=Object.keys(s).reduce(function(t,e){var i,n=s[e],r={};return c.Kaa(n)?(r[i=o+".__embed__."+e]=n,t.push(r)):c.fk(n)?(n=a(i=o+".__sub__."+e,n),u[e]=n[0][i],t=t.concat(n.slice(1))):u[e]=n,t},e)):((t={})[o]=s,e.push(t)),e},pYb:function(t){var e,i=Object.keys(t).map(function(t){return t.split(".")});i.sort(h);for(var n=(r=i[0]).length,r=t[r.join(".")],a=1;a<i.length;a++)for(var o=!1,s=!1,u=r,c=n;c<i[a].length;c++)switch(e=i[a][c]){case"__metadata__":break;case"__sub__":s=!0;break;case"__embed__":o=!0;break;default:s?(u=u[e],s=!1):o&&(u[e]=t[i[a].join(".")],o=!1)}return r},VYb:function(t){return t&&(0<=t.indexOf("__sub__")||0<=t.indexOf("__embed__"))}}},function(t,e,i){var s,u;s=i(134),u=i(90),t.exports={MIb:function(t){var e,i,n=function i(n,r,a){return Object.keys(n).forEach(function(t){var e;s.Kaa(n[t])?(e=n[t],r.push(e),n[t]={Kaa:!0,offset:a.Gqa,byteLength:e.byteLength},a.Gqa+=e.byteLength):s.fk(n[t])&&i(n[t],r,a)}),n}(n=u(t,{}),t=[],{Gqa:0});n=JSON.stringify(n),e=new ArrayBuffer(n.length+4),(i=new DataView(e)).setUint32(0,n.length);for(var r=4,a=0,o=n.length;a<o;a++)i.setUint8(r,n.charCodeAt(a)),r++;return t=[e].concat(t),function(){var t=Array.prototype.concat.apply([],arguments),e=t.reduce(function(t,e){return t+e.byteLength},0),i=new Uint8Array(e);return t.reduce(function(t,e){return i.set(new Uint8Array(e),t),t+e.byteLength},0),i.buffer}.apply(null,t)},LIb:function(t){for(var e=new DataView(t,0,4).getInt32(0),i=new Uint8Array(t,4,e),n="",r=0;r<i.byteLength;r++)n+=String.fromCharCode(i[r]);return e=4+e,function n(r,a,o){return Object.keys(r).forEach(function(t){var e,i;s.fk(r[t])&&(r[t].Kaa?(e=r[t],i=o+e.offset,r[t]=a.slice(i,i+e.byteLength)):r[t]=n(r[t],a,o))}),r}(n=JSON.parse(n),t,e)}}},function(t,e,i){var n,f,l,a,d;function o(t){return{mediaType:t.mediaType,streamId:t.Pa,movieId:t.L,bitrate:t.bitrate,location:t.location,serverId:t.oc,saveToDisk:!0,offset:t.offset,bytes:t.fa,timescale:t.aa,frameDuration:t.stream.oa&&t.stream.oa.fb,encrypted:t.pm,initSegments:1<t.Mg.length?t.Mg.map(function(t){return{fi:t.ee,s:t.data.byteLength,e:!!t.pm}}):void 0}}_esm(e),e.Uva=e.Vva=e.V9a=e.Y6a=e.r6a=e.u6a=e.Nta=e.Rta=e.Qta=e.Ysa=e.Zsa=e.LMa=void 0,n=i(0).__importStar(i(11)),f=i(1065),l=i(432),a=i(8),d=i(19),e.LMa={PMa:"movieEntry",Mrb:"header",Tia:"metadata",osb:"headerData",skc:"headerMetadata",Drb:"sizes",Crb:"durations",GJa:"fragments",ktb:"response",Is:"billboard",bH:{lifespan:259200}},e.Zsa=function(t,e,i){var n,r=e.headerData;return i&&e.sizes instanceof ArrayBuffer&&e.durations instanceof ArrayBuffer&&(n={Yn:i.startTicks,offset:i.offset,aa:i.timescale,sizes:new Uint32Array(e.sizes),te:new Uint32Array(e.durations)}),{Cc:!0,mediaType:t.mediaType,L:t.movieId,Pa:t.streamId,bitrate:t.bitrate,location:t.location,oc:t.serverId,fa:t.bytes,offset:t.offset,Qua:r,xaa:t.initSegments,pm:t.encrypted,aa:t.timescale,oa:t.frameDuration,Fi:t.saveToDisk,da:n}},e.Ysa=function(t,e){var i,n,r;return e=e.response,i=t.startTicks,n=t.durationTicks,{Cc:!1,mediaType:t.mediaType,L:t.movieId,Pa:t.streamId,bitrate:t.bitrate,location:t.location,oc:t.serverId,fa:t.bytes,offset:t.offset,response:e,aa:t.timescale,Za:t.startTicks,tv:n,Fi:t.saveToDisk,mb:r=void 0!==i&&void 0!==n?i+n:r}},e.Qta=function(t){return{priority:t.priority,L:t.movieId,headers:{},VP:0,XW:0,B8a:0,Fi:t.saveToDisk,Zb:t.stats,fy:t.firstSelectedStreamBitrate,OB:t.initSelectionReason,nF:t.histDiscountedThroughputValue,sq:t.histTdigest,rq:t.histAge,Wp:void 0}},e.Rta=function(o,s,u,t,c){var e,h={headers:{},data:{}};return t.forEach(function(t){var e,i=t.mediaType,i=c&&c.ly(i,t.Pa),n=[];if(t.Cc)if(!Array.isArray(t.xaa)||t.xaa.length<2)n.push({ee:0,data:t.Qua});else for(var r=0,a=0;a<t.xaa.length;++a)e=t.xaa[a],n.push({ee:e.fi,data:t.Qua.slice(r,r+e.s),pm:e.e}),r+=e.s;i?(t.da&&i.Pca(n,t.aa,t.oa?new d.M(t.oa,t.aa):void 0,t.da),t.Cc&&i&&i.Yd?(void 0===h.headers&&(h.headers={}),h.headers[t.Pa]=new l.A2(i,{fa:t.fa,offset:t.offset,Mg:n,pm:t.pm},s)):t.response instanceof ArrayBuffer&&void 0!==i.da&&void 0!==t.Za&&void 0!==t.aa&&void 0!==t.mb&&(void 0!==(n=i.da.I9(new d.M(t.Za,t.aa).W))&&(i=new f.SFa(i,{aa:t.aa,Za:t.Za,mb:t.mb,index:n.index,offset:t.offset,fa:t.fa},t.response,u,o,s),void 0===h.data&&(h.data={}),h.data[t.Pa]||(h.data[t.Pa]=[]),h.data[t.Pa].push(i)))):s.warn("Failed to load data from disk because the AseStream was missing from the stream map streamId: "+t.Pa+" movieId: "+t.L)}),n.sa(h.data)||(e=h.data,Object.keys(e).forEach(function(t){e[t].sort(function(t,e){return t.Za-e.Za})})),h},e.Nta=function(t){return{mediaType:t.mediaType,streamId:t.Pa,movieId:t.L,bitrate:t.bitrate,location:t.location,serverId:t.oc,saveToDisk:!0,offset:t.offset,bytes:t.fa,timescale:t.aa,startTicks:t.Za,durationTicks:t.tv}},e.u6a=o,e.r6a=function(t){var e,i,n,r=o(t);return t.stream.Yd&&t.stream&&t.stream.da&&(e={timescale:t.stream.da.aa,startTicks:t.stream.da.Yn,offset:t.stream.da.Ai(0)},n=(i=t.stream.da.kL).sizes.buffer,i=i.te.buffer),{mediaType:r.mediaType,streamId:r.streamId,movieId:r.movieId,bitrate:r.bitrate,location:r.location,serverId:r.serverId,saveToDisk:!0,offset:r.offset,bytes:r.bytes,timescale:r.timescale,frameDuration:r.frameDuration,headerData:a.st(t.Mg.map(function(t){return t.data})),initSegments:r.initSegments,encrypted:t.pm,fragments:e,sizes:n,durations:i}},e.Y6a=function(t){return{priority:t.priority,movieId:t.L,saveToDisk:t.Fi,firstSelectedStreamBitrate:t.fy,initSelectionReason:t.OB,histDiscountedThroughputValue:t.nF,histTdigest:t.sq,histAge:t.rq}},e.V9a=function(t){return!n.has(t,"startTicks")},e.Vva=function(t){return!(t.Qua&&t.aa&&t.da&&void 0!==t.da.Yn&&void 0!==t.da.offset&&void 0!==t.da.te&&t.da.te.length&&void 0!==t.da.sizes&&t.da.sizes.length)},e.Uva=function(t){return void 0===t.fa||void 0===t.offset||void 0===t.aa||void 0===t.Za||void 0===t.tv}},function(t,e,i){var n,r,o,s;function a(t,e,i,n,r,a){return n=s.call(this,t,e,n,r,a)||this,e.fa=i.byteLength,o.yk.xa(n,t,e),n.CN=i,n.fxb=e.fa,n}_esm(e),e.SFa=void 0,n=i(0),r=i(8),t=i(36),o=i(74),s=i(186).IG,n.__extends(a,s),Object.defineProperties(a.prototype,{Cc:{get(){return!1},configurable:!0}}),Object.defineProperties(a.prototype,{Xv:{get(){return!1},configurable:!0}}),Object.defineProperties(a.prototype,{Zf:{get(){return 0},configurable:!0}}),Object.defineProperties(a.prototype,{status:{get(){return 0},configurable:!0},zi:{get(){return 0},configurable:!0}}),Object.defineProperties(a.prototype,{qg:{get(){},configurable:!0}}),Object.defineProperties(a.prototype,{active:{get(){return!1},configurable:!0},complete:{get(){return!0},configurable:!0},response:{get(){return this.CN},configurable:!0},Y_b:{get(){return!0},configurable:!0},readyState:{get(){},configurable:!0}}),Object.defineProperties(a.prototype,{url:{get(){return"disk://"},configurable:!0},aborted:{get(){return!1},configurable:!0},tP:{get(){return""},configurable:!0}}),Object.defineProperties(a.prototype,{KAa:{get(){return!1},configurable:!0},bytesReceived:{get(){return this.fxb},configurable:!0}}),a.prototype.Tr=function(){return!0},a.prototype.jE=function(t,e){return this.me=e.appendBuffer(this.response,r.$v(this)),{ha:this.me}},a.prototype.Vh=function(){return-1},a.prototype.abort=function(){return!0},a.prototype.cd=function(){},a.prototype.rfa=function(){return!1},e.SFa=i=a,t.Ve(o.yk,i)},function(t,e,s){var p,b,i,g,u,r,m,v,a,c;_esm(e),e.rSa=void 0,p=s(0),t=s(12),b=s(35),i=p.__importDefault(s(3)),g=s(6),u=s(274),r=s(8),m=s(2),v=s(1158),a=s(252),(c=new i.default.Console("ASEJS","media|asejs")).trace.bind(c),t=function(o){function d(t,e,i,n){for(var r,a=2;11!==a;)switch(a){case 4:r.xr=i,r.xG=n,r.IC={},t=s(456),a=7;break;case 7:r.console=c,r.console.trace("nf-ase shim version:",t,"DEBUG:",!1),a=14;break;case 14:return r.La=u.tJ(),r;case 2:(r=o.call(this)||this).config=t,r.sE=e,a=4}}for(var t=2;17!==t;)switch(t){case 2:p.__extends(d,o),Object.defineProperties(d.prototype,{bc:{get(){return this.La.bc},configurable:!0}}),Object.defineProperties(d.prototype,{ep:{get(){return this.La.ep},configurable:!0}}),Object.defineProperties(d.prototype,{dj:{get(){return this.La.dj},configurable:!0}}),t=3;break;case 6:d.prototype.qz=function(a,o,s){return p.__awaiter(this,void 0,void 0,function(){{var n,r;return p.__generator(this,function(t){for(var e,i=2;3!==i;)switch(i){case 9:i=1===e?5:8;break;case 1:return r=this.rm.bind(this,s.ga),n=this.S$(a,s.ga),r=r(a),m.assert(void 0!==r,"Can not update viewable. Viewable not found ".concat(n)),[4,r.xp];case 2:i=0===(e=t.label)?1:9;break;case 5:return r=t.ib(),this.IC[n]={i8:function(){},ga:s.ga,equals:function(t){return!(t.N!==a||s.ga!==t.ga&&t.ga&&s.ga)},Mr:!1,xp:Promise.resolve({ja:o,Yi:r.Yi,Pe:r.Pe,Fd:r.Fd,config:r.config}),N:a},[4,this.La.qz(this.IC[n])];case 4:return t.ib(),[2];case 8:i=2===e?4:3}})}})},d.prototype.kLb=function(t,e,n,r,i,a,o){for(var s,u,c,h,f=2;7!==f;)switch(f){case 4:f=l&&l.q5b?3:8;break;case 2:var l,d=this;(l=e.choiceMap)?(t=b.$A(l,{config:r}),this.console.trace("Generated playgraph from choicemap.")):(e=o.iW||o.DG?o.DG?["video"]:["audio"]:["audio","video"],t=b.oG(t,a,e)),s=Object.create(r,{vv:{value:i.ME},kRb:{value:i.cO}}),u=this.rm.bind(this,i.ga),c=[this.La.oI(t,n,s,{rm:u})],f=4;break;case 3:h=l.q5b,f=9;break;case 9:Object.keys(h).forEach(function(t,e){for(var i=2;9!==i;)switch(i){case 3:c.push(d.La.oI(t,n,s,{rm:u})),i=9;break;case 2:a000.h9M(10),m.assert(a000.I9M(0,e),"Currently only one parallel graph is supported"),e=h[t],m.assert(e.Fd&&1===e.Fd.length&&"audio"===e.Fd[0],"Currently parallel graph can only be media type [audio]"),t=b.$A(l,p.__assign(p.__assign({},h[t]),{config:r})),i=3}}),f=8;break;case 8:return c}},t=13;break;case 13:d.prototype.OHb=function(){for(var t=2;1!==t;)2===t&&(this.bc.$R(null),t=1)},d.prototype.rm=function(t,e){return this.IC[this.S$(e,t)]},d.prototype.A9b=function(t){for(var e,i,n=2;13!==n;)switch(n){case 2:this.OHb(),e=this.S$(t.N,t.ga),(i=this.IC[e])&&(i.Mr=!0),this.La.Aw(t.qa),t.Ia&&this.La.DR(t.Ia),t.kh&&this.La.Aw(t.kh),n=8;break;case 8:t.pk&&this.La.DR(t.pk),t===this.rba&&delete this.rba,this.La.UAa(this.IC[e]),delete this.IC[e],n=13}},d.prototype.tb=function(){for(var t=2;9!==t;)switch(t){case 2:m.assert(0===this.La.YF.length,"Attempted to destruct ShimManager with playgraphs present in ASE"),m.assert(0===this.La.afb.length,"Attempted to destruct ShimManager with players present in ASE"),m.assert(0===Object.keys(this.IC).length,"Attempted to destruct ShimManager with session config active"),t=4;break;case 4:m.assert(void 0===this.rba,"Attempt to destruct ShimManager with latest session still defined"),this.La.close(),t=9}},d.prototype.S$=function(t,e){return"".concat(t,"-").concat(e)},t=19;break;case 3:d.prototype.xa=function(t,e,i,n,r,a,o,s){for(var u=2;5!==u;)2===u&&(this.La.oCa({audio:t,video:e,uoa:o,OEa:s},{W:n,fa:r}),this.La.open(this.config,this.xG),u=5)},d.prototype.U0=function(t,e,i){for(var n=2;1!==n;)2===n&&(this.La.oCa({total:t},{W:e,fa:i}),n=1)},d.prototype.createSession=function(t,e,i,n,r,a,o,s,u,c){for(var h,f,l=2;19!==l;)switch(l){case 2:this.console.trace("creating session"),this.La.bc.reset(),h=Number(t.movieId),u=this.S$(h,r.ga),l=3;break;case 3:this.IC[u]={i8:function(){},ga:r.ga,equals:function(t){return!(t.N!==h||r.ga!==t.ga&&t.ga&&r.ga)},Mr:!1,xp:Promise.resolve({ja:t,Yi:!!n.Yi,Pe:!!n.Pe,Fd:g.$ba(!!n.iW,!!n.DG),config:s}),N:h},s.sB&&this.La.lG(this.IC[u],{jp:r.jp,ga:r.ga,ME:r.ME}),f=(c=this.kLb(h,t,s.bfb,s,r,c||d.vMb,n))[0],l=6;break;case 10:return s.$s||s.lK||this.sE(),this.rba;case 6:u=f.ba.O[f.ba.yd].va,f=[this.AY(h,f.ba,i,u)],c[1]&&f.push(this.AY(h,c[1].ba,i,u)),m.assert(void 0===n.Qa,"endPts is not supported"),this.rba=new v.sSa(this.console,this,t,c,e,f,n,r,a,o,s),l=10}},d.prototype.AY=function(t,e,i,n){return e.O[e.yd].va===n?(t=a.NI(e,t,r.M.Ja(i)),m.assert(t,"invalid start position relative to playgraph"),t):{X:e.yd,offset:r.M.Ka}},t=6;break;case 19:return d.vMb="s0",d}}(t.EventEmitter),e.rSa=t},function(L,t,e){var h,u,a,o,f,s,c,l,d,p,b,g,m,i,v,y,n,r,w,A,_,E,k,S,I,O,x,R,P,C,j,N,M,B,U;function D(t){this.H=t,this.events=new u.EventEmitter,this.Qc=a.yp.CLOSED,this.HA=[],this.Y0=[],this.rV=[],this.jr=[],this.GUa={},this.L6={},this.tDa=a.dT.default,this.UBb=new n.Lu({Mn:this,source:"engine",cp:10,console:t})}_esm(t),t.EFa=void 0,h=e(0),u=e(12),a=e(404),o=e(1068),f=e(261),s=e(1069),c=e(255),l=e(6),e(247),d=e(1070),p=e(452),b=e(22),g=e(2),m=e(159),i=e(1071),v=e(1072),y=e(1073),n=e(65),r=e(193),w=e(1074),A=e(64),_=e(275),E=e(8),k=h.__importDefault(e(3)),S=e(1075),I=e(1076),O=e(1077),x=e(1078),R=e(54),P=e(1079),C=e(459),j=e(1090),N=e(1091),M=e(1092),B=e(1147),U=e(1157),Object.defineProperties(D.prototype,{uw:{get(){return g.assert(this.wA),this.wA},configurable:!0},state:{get(){return this.Qc},configurable:!0},afb:{get(){return this.rV},configurable:!0},YF:{get(){return this.jr.map(function(t){return t.ba})},configurable:!0},x6b:{get(){return this.jr},configurable:!0},bc:{get(){return this.AL(),this.dB.bc},configurable:!0},ep:{get(){return this.AL(),this.dB.ep},configurable:!0},dj:{get(){return this.AL(),this.dB.dj},configurable:!0},$gc:{get(){return this.HA.length},configurable:!0},kO:{get(){return this.GUa},configurable:!0},a_a:{get(){return this.Jp},configurable:!0},qG:{get(){return this.L6},configurable:!0},H1b:{get(){return this.qWa||(this.qWa=this.pGb())},configurable:!0}}),D.prototype.open=function(t,e,i,n){var r=this;return this.Qc!==a.yp.OPEN&&(this.K=t,this.Bs=new A.vU(new _.c5({gk:!0,currentTime:function(){return E.M.Ja(k.default.time.ia())},speed:1}),this.H,"Engine Scheduler"),this.DVa=new s.YJa(this.H,t),this.YD=new d.KRa(this.dba.bind(this),t),t.Vfa&&(this.Jp=new o.QGa(this.H,function(){return r.kO})),this.dB=c.YL.D$(t,this.H,e),this.Qc=a.yp.OPEN,t=Object.create(t,{NDb:{value:t.lK||t.$s}}),this.wA=C.tY(t),i&&this.wA.Rib(i),n&&this.wA.uCa(n),this.efb=new j.TQa({Sk:function(){r.Qc!==a.yp.CLOSED&&r.YD.Sk("playgraphOpportunity")}}),this.rWa=new O.HNa(function(){return r.B$()},function(){return r.C$().global},this.H),this.pLb(),!0)},D.prototype.oI=function(t,e,i,n,r){var a,o,s=this;return void 0===r&&(r=!0),this.AL(),i=Object.create(i,{dS:{value:this.qG}}),r&&(a=this.uw.EHb(t,i))?(a.qmb(e),t=this.eu.bind(this,n,a),a.obc(t),a):(a=new P.MRa(function(t){return s.eu(n,o,t)}),(o=M.A8(this.K,[t,e,i,D.P2b++,this.bc,a,function(t){return s.YD.Sk(t)},r?this.uw.DHb.bind(this.uw):function(){},this.B$.bind(this),this.Jp],this.H)).mg(new v.HSa(o)),o.mg(new y.aTa(o.Di)),o.Fab.mg(new x.dGa(o)),this.zA.MK.forEach(function(t){return o.mg(t)}),this.efb.oI(o),(t=new u.Kf).on(o.events,"requestsPruned",this.c$b.bind(this)),t.on(o.events,"weightUpdated",this.bza.bind(this)),t.on(o.events,"underflow",this.mk.bind(this,o)),this.jr.push({ba:o,Ah:t,o0:0}),this.bza(),o)},D.prototype.mk=function(t){null!=(t=this.rWa.ARb(t))&&t.X8||this.uw.reset()},D.prototype.Aw=function(e){this.efb.Aw(e),this.jr=this.jr.filter(function(t){return t.ba!==e||(t.Ah.clear(),!1)}),e.tb(),this.bza()},D.prototype.pYa=function(t,e){var i;return this.AL(),i=void 0===(i=e.Fd)?[l.u.P,l.u.J]:i,t=B.FO(this.K,[t,i,h.__assign({dS:null!=(i=null!=(i=e.dS)?i:this.L6)?i:{}},e)]),this.rV.push(t),t},D.prototype.DR=function(e){this.AL(),this.rV=this.rV.filter(function(t){return t!==e}),e.tb()},D.prototype.oCa=function(t,e){this.GUa=t,this.L6=e,this.qWa=void 0},D.prototype.lG=function(e,t){var i=null==(i=b.Xc(this.HA,function(t){return t.MW.equals(e)}))?void 0:i.T;i?i.lG(h.__assign(h.__assign({},t),{fp:this.zya.bind(this)})):this.Y0.push({hnb:e,KCa:t})},D.prototype.UAa=function(e){this.Y0=this.Y0.filter(function(t){return!t.hnb.equals(e)})},D.prototype.close=function(){this.Qc!==a.yp.CLOSED&&(this.p9b(),g.assert(0===this.HA.length,"Unexpected viewable lease after Playgraph destruction."),this.o9b(),this.Y0=[],delete this.dB,this.Qc=a.yp.CLOSED,this.Bs.tb())},D.prototype.ubc=function(t){this.tDa=t,this.YD.Sk("streamingModeChanged")},D.prototype.al=function(){return this.zA.al()},D.prototype.pLb=function(){this.zA=new R.lka(this.K),this.zA.mg(new S.rJa(this)),this.zA.mg(new w.NRa(this.bc,this.YD)),this.zA.mg(new i.oJa(this.bc)),this.zA.mg(new r.px(this.UBb)),this.zA.mg(new r.px(this.YD.Xr)),this.zA.mg(new r.px(this.DVa.gi)),this.zA.mg(new r.px(this.rWa.gi))},D.prototype.zya=function(){},D.prototype.qz=function(r){return h.__awaiter(this,void 0,void 0,function(){var e,i,n;return h.__generator(this,function(t){switch(t.label){case 0:return g.assert(r,"ase.updateViewable(): Viewable config not found."),e=b.Xc(this.HA,function(t){return!0!==t.MW.Mr&&t.MW.equals(r)}),g.assert(e,"ase.updateViewable(): Viewable entry not found."),[4,e.FG];case 1:return e=t.ib(),n=(i=e).qz,[4,r.xp];case 2:return n.apply(i,[t.ib()]),[2]}})})},D.prototype.eu=function(t,e,i){var n,r=this,a=i.N,o=t.rm(a,i.w0);return g.assert(o,"ase.requestViewable(): Viewable config not found."),(n=b.Xc(this.HA,function(t){return!0!==t.MW.Mr&&t.MW.equals(o)}))||(n={MW:o,FG:h.__awaiter(r,void 0,void 0,function(){var e;return h.__generator(this,function(t){switch(t.label){case 0:return[4,o.xp];case 1:return e=t.ib(),e=this.Yx(a,o,e),[2,n.T=e]}})}),T:void 0,n_b:new m.Cia(function(t){t()&&r.YAa(n)},E.ai(k.default,this.H,"".concat(a)))},this.HA.push(n)),(t=new U.cUa(n,this.H,e,i)).events.once("error",this.YAa.bind(this,n,!1)),t},D.prototype.YAa=function(e,t){var i,n;void 0===t&&(t=!0),g.assert(e,"expected viewableEntry to exist"),i=e.T,n=e.FG,t&&(i?i.tb():n.then(function(t){t.tb()})),this.HA=this.HA.filter(function(t){return t!==e})},D.prototype.Yx=function(t,e,i){var n,r,a,o,s,u;function c(t){n.events.emit("logdata",t)}return(n=this).AL(),r=i.ja,a=i.Yi,o=i.Pe,s=void 0===(s=i.Fd)?l.Uf:s,i=i.config,u=[new p.aja(l.u.P),new p.aja(l.u.J)],r={ja:r,config:i,Yi:a,Fd:s,e$:void 0,bc:this.dB.bc,dj:this.dB.dj,T3a:{Et:function(){return n.YD.Sk("networkFailureReset")},Sf:this.Sf.bind(this,t),Zo:this.Zo.bind(this,t),mC:c},A8a:{mC:c,zY:void 0,dF:function(t){return u[t]},Oaa:function(){return!0},Yf:void 0,Xl:void 0,Uh:void 0,mF:void 0},KR:{bv:this.bv.bind(this),CC:this.CC.bind(this)},qG:this.L6,Ub:0,Dq:void 0,Rbb:{Rva:!!o,m$a:!1},j_:function(){}},t=new f.Tga(t,r),i.sB&&(r=b.Xc(this.Y0,function(t){return t.hnb.equals(e)}))&&(r=r.KCa,this.UAa(e),t.lG(h.__assign(h.__assign({},r),{fp:this.zya.bind(this)}))),t},D.prototype.dba=function(){var t;return g.assert(this.state===a.yp.OPEN),T=this.C$(),t=this.OP(),this.DVa.Qdb(T,t)},D.prototype.OP=function(){var e=this,t=null!=(i=this.K.X6b)?i:this.jr.every(function(t){return!t.ba.qq}),i=b.flatten(this.jr.map(function(e){return e.ba.OP().map(function(t){return e.ba.qq||1===e.o0||(t.yJ=e.o0),t})}));return this.tDa===a.dT.disabled?i=[]:this.tDa===a.dT.q0b&&(i=i.filter(function(t){return e.K.Cxa>=t.qu-t.xt})),t||(t=i.filter(function(t){return 1===(null!=(t=t.yJ)?t:1)})).length&&(i=t),t=this.HA.reduce(function(t,e){return e.T?h.__spreadArray(h.__spreadArray([],h.__read(t),!1),h.__read(e.T.OP()),!1):t},[]),b.flatten(h.__spreadArray(h.__spreadArray([],h.__read(i),!1),h.__read(t),!1))},D.prototype.AL=function(){if(this.Qc===a.yp.CLOSED)throw Error("Engine CLOSED")},D.prototype.p9b=function(){var t,e;try{for(var i=h.__values(this.jr),n=i.next();!n.done;n=i.next())(e=n.value).Ah.clear(),this.Aw(e.ba)}catch(t){var r={error:t}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(r)throw r.error}}},D.prototype.o9b=function(){var t;try{for(var e=h.__values(this.rV),i=e.next();!i.done;i=e.next())this.DR(i.value)}catch(t){var n={error:t}}finally{try{i&&!i.done&&(t=e.return)&&t.call(e)}finally{if(n)throw n.error}}},D.prototype.Sf=function(e,i,n,r,a,o,s){var u;return void 0===s&&(s=!1),u=!1,this.m7a(e).forEach(function(t){s&&!l.tq(t.Cf.value)||(u=t.Sf(i,e,n,r,a,o,s))}),u},D.prototype.Zo=function(t){return this.m7a(t).some(function(t){return t.Zo()})},D.prototype.m7a=function(i){return this.jr.filter(function(t){var e;for(t=t.ba;t.yc;)t=t.yc;return e=t.ba,Object.keys(e.O).some(function(t){return e.O[t].N===i})}).map(function(t){return t.ba})},D.prototype.C$=function(){var n=new I.WJa;return this.jr.forEach(function(t){var e,i=t.ba;t=t.o0,(e=i.C$()).yJ=t,n.add(i.id,e)}),n},D.prototype.B$=function(){return this.H1b},D.prototype.pGb=function(){var t,e=N.x_a(this.K,this.kO);return{total:((t={})[l.u.J]=this.kO.video||1/0,t[l.u.P]=this.kO.audio||1/0,t[l.u.Ob]=this.kO.text||1/0,t.total=this.kO.total||1/0,t),hDa:e}},D.prototype.bv=function(t){var e;this.YD.bv(t),null!=(e=this.Jp)&&e.bv(t)},D.prototype.CC=function(t){this.YD.CC(t)},D.prototype.bza=function(){var e=this.YF.reduce(function(t,e){return Math.max(e.weight,0)+t},0);this.jr.forEach(function(t){t.o0=t.ba.weight<=0?0:t.ba.weight/e})},D.prototype.c$b=function(t){var e=this;this.Jp&&t.requests.forEach(function(t){return e.Jp.CC(t)})},D.P2b=0,h.__decorate([n.nb({methodName:"open"})],D.prototype,"open",null),h.__decorate([n.nb({methodName:"addPlaygraph",context:function(t){return{playgraphCount:null!=(t=null==(t=t.Edb.jr)?void 0:t.length)?t:0}}})],D.prototype,"oI",null),h.__decorate([n.nb({methodName:"removePlaygraph",context:function(t){return{playgraphCount:t.Edb.jr.length}}})],D.prototype,"Aw",null),h.__decorate([n.nb({methodName:"close"})],D.prototype,"close",null),h.__decorate([n.nb({methodName:"setStreamingMode",yo:!0})],D.prototype,"ubc",null),h.__decorate([n.nb({methodName:"notifyAseException",yo:!0})],D.prototype,"zya",null),h.__decorate([n.nb({methodName:"updateViewable"})],D.prototype,"qz",null),h.__decorate([n.nb({methodName:"requestViewable"})],D.prototype,"eu",null),h.__decorate([n.nb({methodName:"removeViewable"})],D.prototype,"YAa",null),h.__decorate([n.nb({methodName:"createViewable"})],D.prototype,"Yx",null),h.__decorate([n.nb({methodName:"issueRequestOpportunity",Dl:!0,return:!0})],D.prototype,"dba",null),h.__decorate([n.nb({methodName:"reportStreamingFailure",yo:!0})],D.prototype,"Sf",null),t.EFa=D},function(t,e,i){var n,r;function a(t,e){this.H=t,this.kyb=e,this.Jx=this.rx=this.ur=0}_esm(e),e.QGa=void 0,n=i(6),r=i(2),a.prototype.bv=function(t){var e;t.Cc||(e=t.fa,r.assert(0<e),this.ur+=e,t.mediaType===n.u.P?this.rx+=e:this.Jx+=e,r.assert(this.ur===this.rx+this.Jx),r.assert(0<this.ur),r.assert(0<=this.rx),r.assert(0<=this.Jx))},a.prototype.CC=function(t){var e;t.Cc||(e=t.fa,r.assert(0<e),this.ur-=e,t.mediaType===n.u.P?this.rx-=e:this.Jx-=e,r.assert(this.ur===this.rx+this.Jx),r.assert(0<=this.ur),r.assert(0<=this.rx),r.assert(0<=this.Jx))},a.prototype.kHb=function(t,e){var i;return r.assert(this.ur===this.rx+this.Jx),!(void 0!==(i=this.kyb()).total&&this.ur+e>i.total)&&(i=t===n.u.P?i.audio:i.video,t=t===n.u.P?this.rx:this.Jx,!(void 0!==i&&i<t+e))},e.QGa=a},function(t,e,i){var v,y,w,A,n,_,E;function r(t,e){this.H=t,this.config=e,this.dab=0,this.gi=new n.Lu({cp:10,Mn:this,source:"GraphStreamingProcess"})}_esm(e),e.YJa=void 0,v=i(0),y=i(247),w=i(22),A=i(6),n=i(65),_=v.__importDefault(i(3)),E=i(457),r.prototype.Qdb=function(t,e){var i,n,r,a,o,s,u,c,h,f,l,d=!1,p=[];if(0<e.length){a=(r=this.ucc(e)).some(function(t){return 1===E.z_a(t)&&A.tq(t.Cf)}),o=r.slice(),s=[!1,!1,!1];try{for(var b=v.__values(r),g=b.next();!g.done;g=b.next())if((u=g.value).wF&&"global"!==s[u.mediaType])if(c=u.x$a(t,null!=(n=u.yJ)?n:1),(h=y.qgb(c.reason))&&(s[u.mediaType]=h,w.fZa(o,u)),c.result){if(f=function(t,e){return t.filter(function(t){return t.groupId===e.groupId}).reduce(w.mcb(function(t){return t.qC}),e).qC}(o,u),this.sHb(u,a,f)){if(l=u.B$a(),this.bxa(p,u,l.reason),l.Bj&&(this.dab=_.default.time.ia()),d=l.Bj)break;if("globalVideoMemoryLimit"===l.reason||"globalAudioMemoryLimit"===l.reason){this.H.trace("GSP.onRequestOpportunity stopping at memory limit:",l.reason);break}}else if(this.bxa(p,u,"concurrencyCheck"),!h)break}else this.bxa(p,u,c.reason)}catch(t){var m={error:t}}finally{try{g&&!g.done&&(i=b.return)&&i.call(b)}finally{if(m)throw m.error}}}return this.gi.av({streamableCount:e.length,streamableReasons:p,lastSuccessfulIssueRequestMs:this.dab}),d},r.prototype.ucc=function(t){return this.y7b(t).sort(function(t,e){return t.priority-e.priority}).map(function(t){return t.bdc})},r.prototype.y7b=function(t){var e=this;return t.map(function(t){return{priority:-E.y_a(e.config,t,e.H),bdc:t}})},r.prototype.bxa=function(t,e,i){this.gi.enabled&&t.push(this.qVb(i,e))},r.prototype.qVb=function(t,e){return{mediaType:e.mediaType,reason:t,bufferingState:e.Cf,currentPlayerMs:e.xt,pathCompletePlayerMs:e.qC,streamingPlayerMs:e.qu}},r.prototype.sHb=function(t,e,i){return this.config.yW&&(e||A.tq(t.Cf))?this.tHb(t,i):this.uHb(t,i)},r.prototype.vHb=function(t){return t.qu<=t.qC},r.prototype.uHb=function(t,e){return t.qu-(t.xt>e?t.xt:e)<=Math.max(this.config.cya,Math.min((t.qC-t.xt)*this.config.rDa,this.config.m1b))},r.prototype.tHb=function(t,e){var i,n;return void 0===this.config.yW||(i=this.config.yW,n=t.xt+i,t.qu<=n||this.vHb(t)&&n<=e&&t.qu-e<i)},v.__decorate([n.nb({methodName:"onRequestOpportunity",Dl:!0})],r.prototype,"Qdb",null),e.YJa=r},function(t,e,i){var n,r,a,o,s;_esm(e),e.KRa=void 0,n=i(0),r=i(2),a=n.__importDefault(i(3)),o=i(65),s=i(8),t=function(){var t=2;function e(t,e){for(var i=2;14!==i;)switch(i){case 9:this.NBa=!1,this.Xr=new o.Lu({Mn:this,source:"RequestPacer",Wna:function(){return{numOutstanding:n.VH}},cp:10}),this.hhb=new s.sH,i=14;break;case 2:var n=this;this.dba=t,this.config=e,this.VH=0,this.console=new a.default.Console("ASEJS_REQUEST_PACER","media|asejs"),i=9}}for(;13!==t;)switch(t){case 3:e.prototype.S_a=function(t){for(var e,i,n,r=2;9!==r;)switch(r){case 1:this.hhb.push(i),r=5;break;case 2:e=this.config.Hba,i=a.default.time.ia()-t,n=0,r=1;break;case 4:n++,r=5;break;case 3:this.Xr.ZV("requestOpportunityRunnerComplete",{requestsIssued:n,scheduledMs:t,timeSinceScheduled:i},!0),r=9;break;case 5:r=this.VH<e&&this.dba()?4:3}},n.__decorate([o.nb({methodName:"checkRequestOpportunity",Dl:!0,yo:!0})],e.prototype,"Sk",null),t=8;break;case 2:Object.defineProperties(e.prototype,{t3b:{get(){return this.VH},configurable:!0}}),e.prototype.Sk=function(){for(var e,i,t=2;9!==t;)switch(t){case 2:e=this,t=1;break;case 5:return this.NBa=!0,i=a.default.time.ia(),Promise.resolve().then(function(){for(var t=2;5!==t;)2===t&&(e.NBa=!1,e.S_a(i),t=5)});case 1:t=this.NBa?9:5}},e.prototype.bv=function(t){for(var e=2;4!==e;)2===e&&(this.Xr.av({mediaType:t.mediaType,contentStartPts:t.dd,contentEndPts:t.Ic}),this.VH++,r.assert(this.VH<=this.config.Hba,"More than maxAllowedOutstandingRequests are outstanding"),e=4)},e.prototype.CC=function(t){for(var e=2;3!==e;)switch(e){case 2:this.Xr.av({mediaType:t.mediaType,contentStartPts:t.dd,contentEndPts:t.Ic}),this.VH--,r.assert(0<=this.VH,"Received remove request when there are no requests outstanding"),e=4;break;case 4:this.Sk("removeRequest"),e=3}},t=3;break;case 8:n.__decorate([o.nb({methodName:"addRequest",Dl:!0})],e.prototype,"bv",null),n.__decorate([o.nb({methodName:"removeRequest",Dl:!0})],e.prototype,"CC",null),t=6;break;case 6:return n.__decorate([o.nb({methodName:"checkRequestOpportunityRunner",Dl:!0})],e.prototype,"S_a",null),e}}(),e.KRa=t},function(t,e,i){var n;function r(t){this.bc=t}_esm(e),e.oJa=void 0,n=i(54),Object.defineProperties(r.prototype,{re:{get(){return"EndplayFieldsReporter"},configurable:!0},enabled:{get(){return!0},configurable:!0}}),r.prototype.al=function(t){var e;if(t.cj===n.ke.iq&&this.bc){if(t={},(e=this.bc.get())&&e.avtp&&e.avtp.ta&&(t.avtp=e.avtp.ta,t.dltm=e.avtp.c9),e&&e.initialThroughput&&e.initialThroughput.ta&&(t.initial_avtp=e.initialThroughput.ta),e&&e.cdnavtp&&(t.cdnavtp=e.cdnavtp,t.activecdnavtp=e.activecdnavtp),(e=this.bc.F$())&&(e.bytesRequestedPacingVideo&&(t.bytesRequestedPacingVideo=e.bytesRequestedPacingVideo,t.estimatedBytesPacedVideo=e.estimatedBytesPacedVideo,t.bytestotalVideo=e.bytestotalVideo,t.pacedAvtpVideo=e.pacedAvtpVideo),e.bytesRequestedPacingAudio&&(t.bytesRequestedPacingAudio=e.bytesRequestedPacingAudio,t.estimatedBytesPacedAudio=e.estimatedBytesPacedAudio,t.bytestotalAudio=e.bytestotalAudio,t.pacedAvtpAudio=e.pacedAvtpAudio),e.pacedAvtp&&(t.pacedAvtp=e.pacedAvtp)),this.bc.flush(),e=this.bc.h6a())for(var i in e)e.hasOwnProperty(i)&&(t["ne"+i]=Number(e[i]).toFixed(6));return t}},e.oJa=r},function(t,e,i){var n,r,a;function o(t){this.WUa=!1,this.UE=new n.Kf,this.UE.addListener(t.events,"streamSelection",this.Zya.bind(this))}_esm(e),e.HSa=void 0,n=i(12),r=i(6),a=i(54),o.prototype.Zya=function(t){this.WUa||(t.mediaType===r.u.P&&void 0===this.zva?this.zva=t:t.mediaType===r.u.J&&void 0===this.Dva&&(this.Dva=t))},o.prototype.tb=function(){this.Dva=this.zva=void 0,this.UE.clear(),this.WUa=!0},Object.defineProperties(o.prototype,{re:{get(){return"StartplayFieldsReporter"},configurable:!0},enabled:{get(){return!0},configurable:!0}}),o.prototype.al=function(t){var e;if(t.cj===a.ke.Hq)return e={histdiscbw:null==(t=null!=(e=this.Dva)?e:this.zva)?void 0:t.result.Tv,histage:null==t?void 0:t.result.rq},0<(null==(t=null==t?void 0:t.streamList.map(function(t){return void 0!==t.t9?{vmaf:t.t9,streamIndex:t.cg,streamId:t.Pa}:void 0}).filter(function(t){return void 0!==t}))?void 0:t.length)&&(e.vmafEstimates=t),this.tb(),e;this.tb()},e.HSa=o},function(t,e,i){var n,r,a;function o(t){this.$d=t,this.y5=[],this.reset()}_esm(e),e.aTa=void 0,t=i(0),n=i(12),r=i(10),a=t.__importDefault(i(3)),Object.defineProperties(o.prototype,{re:{get(){return"task-audit"},configurable:!0},kw:{get(){return"tsched"},configurable:!0},enabled:{get(){return r.S},configurable:!0}}),o.prototype.reset=function(){var t,e=this;null!=(t=this.gN)&&t.clear(),this.gN=new n.Kf,this.gN.on(this.$d,"clockChanged",function(){e.reset(),e.UX("initial")}),this.gN.on(this.$d,"stopping",function(){e.UX("stopping")}),this.gN.on(this.$d.Da,"clockAdjusted",function(){e.UX("clockAdjusted")}),this.gN.on(this.$d.Da,"stopStart",function(){e.UX("stopStart")}),this.gN.on(this.$d.Da,"speedChanged",function(){e.UX("speedChanged")})},o.prototype.UX=function(t){this.y5.push({reason:t,audit:this.$d.lSb(),time:a.default.time.ia()}),5<this.y5.length&&this.y5.shift()},o.prototype.al=function(){return this.y5},e.aTa=i=o},function(t,e,i){var n;function r(t,e){this.bc=t,this.ihb=e}_esm(e),e.NRa=void 0,n=i(54),Object.defineProperties(r.prototype,{re:{get(){return"RequestsReporter"},configurable:!0},enabled:{get(){return!0},configurable:!0}}),r.prototype.al=function(t){var e;if((t=t.cj)===n.ke.iq||t===n.ke.up||void 0===t)return t={numOutstandingRequests:this.ihb.t3b,requestOpportunityDelayStats:this.ihb.hhb},(e=this.bc.ZXa)&&e.length&&(t.activeRequests=JSON.stringify(e)),t},e.NRa=r},function(t,e){function i(t){this.p9=t,this.kw="engine",this.enabled=!0}_esm(e),e.rJa=void 0,Object.defineProperties(i.prototype,{re:{get(){return this.kw},configurable:!0}}),i.prototype.al=function(){var t=this.p9.x6b.map(function(t){var e=t.ba;return{id:e.id,weight:e.weight,relativeWeight:t.o0}});return{prefetcher:this.p9.uw.getStats(),playgraphs:t,viewables:this.p9.$gc,players:this.p9.afb.length}},e.rJa=i},function(t,e,i){var n,r;function a(){this.global=new r.aU,this.YF={}}_esm(e),e.WJa=void 0,n=i(2),r=i(458),a.prototype.add=function(t,e){n.assert(void 0===this.YF[t],"Cannot add new memory object for playgraph"),this.YF[t]=e,this.global.add(e.tt),this.global.add(e.iX)},e.WJa=a},function(t,e,i){var p,b,m,v,n;function r(t,e,i){this.xta=t,this.qTb=e,this.H=i,this.gi=new n.Lu({Mn:this,console:i,source:"MemoryDeadlockProtector",cp:5})}_esm(e),e.HNa=void 0,p=i(0),b=i(10),m=i(457),v=i(6),n=i(65),r.prototype.ARb=function(t){var e,i=t.config,n=i.Fj+(null!=(e=null===(g=i.dS)||void 0===g?void 0:g.W)?e:0);return g=this.pWb(n,t),b.S&&this.H.debug("MDP: has prebuf: ".concat(g)),g?{X8:!0}:(e=this.tGb(i),g=e.d5b,e=e.Cgc,g&&e?(b.S&&this.H.debug("MDP: utilizing ".concat(Math.round(100*e),"%")),e>=i.F1b?this.rhb(t,g):{X8:!0}):{X8:!1})},r.prototype.rhb=function(t,e){var i,n,r,a,o,s;this.gi.av({o:e}),c=t.U,t=t.bb;for(var u=c.bb,c=c.Mt,h=0;h<u.length;h++)if(!u[h].vj){c=u[h],u=u.slice(0,h+1);break}if(h=!1,a=[{mediaType:v.u.P,UA:0},{mediaType:v.u.J,UA:0},{mediaType:v.u.Ob,UA:0}],null==c||!c.vj){t=t.map(function(t){return t}).filter(function(t){return-1===u.indexOf(t)}).sort(function(t,e){return m.mpa(t)-m.mpa(e)});try{for(var f=p.__values(t),l=f.next();!l.done;l=f.next())s=(o=l.value).yB(),a[v.u.P].UA+=null!=(n=s.gE)?n:0,a[v.u.J].UA+=null!=(r=s.xu)?r:0,b.S&&this.H.debug("Resetting discontiguous branch ".concat(o.G.id),s),o.reset(),h=a.every(function(t){return t.UA>=e[t.mediaType].UA})}catch(t){var d={error:t}}finally{try{l&&!l.done&&(i=f.return)&&i.call(f)}finally{if(d)throw d.error}}}return{X8:h,qpc:a}},r.prototype.tGb=function(t){var i,n,r,a,e=[v.u.P,v.u.J,v.u.Ob];return t.G1b?(i=this.qTb(),n=this.xta().total,r=t.E1b,a=0,t=e.map(function(t){var e=i[t]-n[t]*r;return a=Math.max(0<n[t]?i[t]/n[t]:0,a),{UA:Math.max(0,e),mediaType:t}}),{Cgc:a,d5b:t}):{}},r.prototype.pWb=function(i,t){var n,e=!1;return null!=(t=t.qq?t.U:void 0)&&t.aYb&&(e=t.Ei.sm().map(function(t){return t.mediaType}),n=t.LSb(),e=e.every(function(t){var e;if(t===v.u.P)t=null!=(e=n.Xs)?e:0;else{if(t!==v.u.J)throw Error("Unsupported media type:".concat(t));t=null!=(e=n.wp)?e:0}return i<=t})),e},p.__decorate([n.nb({methodName:"resetDiscontiguousBranches",return:!0,Dl:!0})],r.prototype,"rhb",null),e.HNa=r},function(t,e,i){var n,r,a,o,s;function u(t){var e,i=this;this.ba=t,this.xv="aseReport",this.r_a=n.M.Uv,this.Pp=!1,0!=Math.floor(1e6*Math.random())%t.config.bO&&!t.config.kRb||(this.r_a=n.M.Ja(t.config.F7),this.ba.cO=!0,(e=[])[r.default.Sd.J]=new o.default(t.config,r.default.Sd.J),e[r.default.Sd.P]=new o.default(t.config,r.default.Sd.P),this.hna=e,this.ba.events.on("openComplete",function(){return i.open()}))}_esm(e),e.dGa=void 0,t=i(0),n=i(8),r=t.__importDefault(i(28)),a=i(22),o=t.__importDefault(i(437)),s=i(54),u.prototype.open=function(){this.ba.cO&&!this.Pp&&(this.Pp=!0,this.ba.events.emit("aseReportEnabled",{type:"asereportenabled"}),this.ba.events.on("streamSelection",this.Zya.bind(this)))},u.prototype.Zya=function(t){this.hna[t.mediaType].add(t.result,t.streamList)},u.prototype.pua=function(){var t=a.flatten(this.hna.map(function(t){return t.get()}).filter(function(t){return void 0!==t}));return this.hna.forEach(function(t){return t.reset(!0)}),t},u.prototype.Pf=function(t){var e=t.cj;return t=t.FYb,this.ba.cO&&this.Pp&&(t||e===s.ke.iq)&&(e=this.pua())&&e.length?{jjb:!0,event:{type:"asereport",strmsel:e}}:{jjb:!1,event:{type:"asereport",strmsel:[]}}},e.dGa=i=u},function(t,e,i){var n;function r(t){this.x0=[],this.x0.push(t)}_esm(e),e.MRa=void 0,n=i(194),r.prototype.eu=function(t,e){return n.sT.Iaa({N:t,w0:e},this.x0)},r.prototype.H9b=function(t){this.x0.pop(),this.x0.push(t)},r.prototype.iYa=function(t){this.x0.unshift(t)},e.MRa=r},function(t,e,i){var c,s,n,u,o,h,f,l,d,r,p,b,a,g,m,v,y,w,A;function _(t,e,i,n,r){void 0===n&&(n=new m.kIa),void 0===r&&(r=new g.jIa),this.N3a=t,this.config=e,this.Cgb=n,this.Qn=[],this.tfb=[],this.zz=[],this.Zb={H$a:0,I$a:0,E$a:0,cpa:0,F$a:0,G$a:0,dpa:0},this.events=new s.EventEmitter,this.H=u.ai(b.default,i,"PREFETCH"),this.qYa(new v.NHa(e)),this.qYa(new A.pSa(e)),this.uib({EJ:e.T6b}),this.uCa(r),this.XXb()}_esm(e),e.dRa=void 0,c=i(0),s=i(12),n=i(6),u=i(8),o=i(194),h=i(22),f=i(2),l=i(1081),d=i(10),r=i(104),p=i(1082),b=c.__importDefault(i(3)),a=i(248),g=i(1083),m=i(1084),v=i(1085),y=i(195),w=i(1087),A=i(1089),Object.defineProperties(_.prototype,{U6b:{get(){return this.Qn.map(function(t){return t.context})},configurable:!0}}),_.prototype.Rib=function(t){return d.S&&f.assert(t,"Reconciliation strategy is undefined"),this.Cgb=t,this},_.prototype.qYa=function(t){this.tfb.unshift(t)},_.prototype.$ib=function(t){d.S&&this.H.debug("Wish list changed",{krc:t.length}),this.zz=t,this.pAa()},_.prototype.reset=function(){var t,e,i,n,r,a;if(this.config.b7b)try{for(var o=c.__values(this.Qn),s=o.next();!s.done;s=o.next())i=(e=s.value).ba,n=e.iba,r=e.context,i&&(i.xd(),n.cea(function(t){return"segmentNormalized"!==t.xv}),a=y.fua(r.ie,i.ba),i.Dw(a))}catch(t){var u={error:t}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(u)throw u.error}}else this.$ib([])},_.prototype.uib=function(t){d.S&&this.H.debug("Budget changed",{O3b:this.wW,L2b:t}),this.wW=t,this.pAa()},_.prototype.EHb=function(t,e){var i,n,r;return d.S&&this.H.debug("Looking for playgraph to claim"),(t=this.Cgb.y4a(this.Qn,{ba:t,Kj:e}))&&(e=this.zz.indexOf(t.context.ie),d.S&&this.H.debug("Claiming item: ".concat(y.Uo(t.context.ie.key)),{en:b.default.time.ia()-t.wfa,buffer:null==(i=t.ba)?void 0:i.xh(u.M.Ka)}),this.XO(t.context,{swa:!!t.ba}),t.ba&&(i=t.ba,n=t.du,r=i.Nj,w.bRa.K9b(i,r,t.iba,this.H),n.R$b(null!=(n=i.ny(r))?n:u.M.Ka,e),i.Ylb({EJ:this.config.dw||1/0}),this.events.emit("itemClaimed",{type:"itemClaimed",wishListItem:t.context.ie,videoBytesBuffered:t.ba.iy().xu,audioBytesBuffered:t.ba.iy().gE}))),this.config.NDb||this.reset(),null==t?void 0:t.ba},_.prototype.DHb=function(){},_.prototype.getStats=function(){var i=b.default.time.ia();return{wishListLength:this.zz.length,prefetchList:this.U6b.length,contents:this.Qn.map(function(t){var e;return{id:y.Uo(t.context.ie.key),buffer:null==(e=t.ba)?void 0:e.xh(u.M.Ka),pId:null==(e=t.ba)?void 0:e.id,budget:{inMemoryBytes:t.context.C$a.EJ},weight:t.context.Bda,age:i-t.wfa,timeOpened:i-(null!=(e=t.oec)?e:0),state:n.Nc[null!=(t=null==(e=t.ba)?void 0:e.Cf.value)?t:n.Nc.Uj]}}),aggregated:{itemsRequested:this.Zb.H$a,itemsStarted:this.Zb.I$a,itemsClaimed:this.Zb.E$a,bytesClaimed:this.Zb.cpa,itemsCompleted:this.Zb.F$a,itemsDiscarded:this.Zb.G$a,bytesDiscarded:this.Zb.dpa}}},_.prototype.XO=function(a,o){var s;void 0===o&&(o={}),c.__awaiter(this,void 0,void 0,function(){var e,i,n,r;return c.__generator(this,function(t){switch(t.label){case 0:return(i=c.__assign({swa:!1,N$a:!1},o),e=i.swa,i=i.N$a,n=h.Xc(this.Qn,function(t){return t.context===a}))?(this.Qn.splice(this.Qn.indexOf(n),1),i||(r=this.zz.length,this.zz=this.zz.filter(function(t){return t!==a.ie}),d.S&&this.H.info("Dropping items from wishlist",r-this.zz.length),this.zz.length>=r&&d.S&&this.H.warn("Unable to filter out wishlist item",this.zz.map(function(t){return t.key}),a.ie.key)),d.S&&this.H.debug("Dropping playgraph",{en:b.default.time.ia()-n.wfa,buffer:null==(s=n.ba)?void 0:s.xh(u.M.Ka),N:y.Uo(a.ie.key),Trc:!e,dpc:!i}),n.UE.clear(),e?[3,2]:(r=this.Aw(n),n.ba?[4,r]:[3,2])):[3,3];case 1:t.ib(),t.label=2;case 2:this.pAa(),t.label=3;case 3:return[2]}})})},_.prototype.uCa=function(t){return f.assert(t,"Playgraph resolver is undefined"),this.Tza=t,this},_.prototype.XXb=function(){var i=this;this.events.on("prefetchComplete",function(){return i.Zb.F$a++}),this.events.on("prefetchStarted",function(){return i.Zb.I$a++}),this.events.on("itemQueued",function(){return i.Zb.H$a++}),this.events.on("itemClaimed",function(t){var e;i.Zb.E$a++,i.Zb.cpa+=(null!=(e=t.Rgc)?e:0)+(null!=(e=t.LEb)?e:0)}),this.events.on("itemDropped",function(t){var e;i.Zb.G$a++,i.Zb.dpa+=(null!=(e=t.Rgc)?e:0)+(null!=(e=t.LEb)?e:0)})},_.prototype.pAa=function(){var t,i=this,r=o.sT.Iaa({shc:this.zz,RVb:this.wW},this.tfb.map(function(t){return t.v_a.bind(t)})).Qn,e=h.cv(r,this.Qn,function(t,e){return y.isEqual(t.ie.key,e.context.ie.key)}),n=h.cv(this.Qn,r,function(t,e){return y.isEqual(t.context.ie.key,e.ie.key)}),a=h.cv(this.Qn,n);d.S&&this.H.debug("Re-evaluated prefetch items. new:".concat(e.length,", evict: ").concat(n.length,", update: ").concat(e.length)),n=n.map(function(t){var e=t.context.ie.key;return d.S&&i.H.debug("Releasing playgraph",y.Uo(e)),i.Aw(t).then(function(){i.events.emit("itemEvicted",{type:"itemEvicted",wishListItem:t.context.ie})})}),t=a.map(function(n){return c.__awaiter(i,void 0,void 0,function(){var e,i;return c.__generator(this,function(t){switch(t.label){case 0:e=h.Xc(r,function(t){return y.isEqual(t.ie.key,n.context.ie.key)}),f.assert(e,"Couldn't find the requested item context"),n.context=e,t.label=1;case 1:return t.Ih.push([1,3,,4]),[4,n.Ada];case 2:return i=t.ib(),[3,4];case 3:return t.ib(),[2];case 4:return h.Xc(this.Qn,function(t){return t===n})&&(this.bZa(n.context,i),this.events.emit("itemReevaluated",{type:"itemReevaluated",wishListItem:n.context.ie})),[2]}})})}),e=e.map(function(t){var e=i.lLb(t);return i.events.emit("itemQueued",{type:"itemQueued",wishListItem:t.ie}),e}),this.Qn=c.__spreadArray(c.__spreadArray([],c.__read(a),!1),c.__read(e),!1),a=e.map(function(t){return t.Ada.catch(function(){})}),a=n.concat(t).concat(a),Promise.all(a)},_.prototype.Aw=function(i){var t=this;return i.Ada.then(function(e){return c.__awaiter(t,void 0,void 0,function(){return c.__generator(this,function(t){switch(t.label){case 0:return d.S&&this.H.debug("Removing prefetch playgraph",{size:e.xh(u.M.Ka)}),i.UE.clear(),[4,this.N3a()];case 1:return t.ib().Aw(e),this.events.emit("itemDropped",{type:"itemDropped",wishListItem:i.context.ie,videoBytesBuffered:e.iy().xu,audioBytesBuffered:e.iy().gE}),[2]}})})},function(){})},_.prototype.A8=function(o){return c.__awaiter(this,void 0,void 0,function(){var e,i,n,r,a=this;return c.__generator(this,function(t){switch(t.label){case 0:return e=o.context,i=y.Uo(e.ie.key),d.S&&this.H.debug("Creating playgraph",i),[4,this.Tza.hbb(e)];case 1:return n=t.ib(),[4,e.ie.ph.rm(i).xp];case 2:return t.ib().ja.Go?(this.XO(e,{swa:!0}),[2,Promise.reject("contentPlaygraph viewable:".concat(i)+" is not supported with prefetching")]):[4,this.N3a()];case 3:return r=t.ib(),r=r.oI(n,e.Bda,e.Kj,e.ie.ph,!1),o.UE.addListener(r.events,"error",function(t){d.S&&a.H.debug("Prefetch playgraph resulted in error",t.bpc),a.XO(e)}),[2,r]}})})},_.prototype.M4b=function(a,o){return c.__awaiter(this,void 0,void 0,function(){var e,i,n,r;return c.__generator(this,function(t){switch(t.label){case 0:return e=a.context,i=y.Uo(e.ie.key),[4,(n=e.ie.ph.rm(i)).xp];case 1:return r=t.ib(),this.bZa(e,o),this.eEb(e,o,!!r.Pe),o.open(),o.hz({ss:function(e,t){var i=e.recommendedMedia;return i?h.Yp(t,function(t){return t.new_track_id===i.zo}):h.Yp(t,function(t){return t.track_id===e.defaultTrackOrderList[0].audioTrackId})}},{ss:function(e,t){var i=e.recommendedMedia;return i?h.Yp(t,function(t){return t.new_track_id===i.QS}):h.Yp(t,function(t){return t.track_id===e.defaultTrackOrderList[0].videoTrackId})}}),o.Dw(y.fua(e.ie,o.ba)),this.g9b(a,n),n.Mr&&(d.S&&this.H.warn("Viewable churn encountered during prefetcher (expired on initialization)",i),this.XO(a.context)),[2]}})})},_.prototype.g9b=function(e,t){var i;function n(t){d.S&&i.H.debug("Viewable ".concat(t?"superseded":"expired"),y.Uo(e.context.ie.key)),e.Dqc=!0,i.XO(e.context,{N$a:!t})}i=this,t.events&&(e.UE.addListener(t.events,"viewableEvicted",function(){n(!0)}),e.UE.addListener(t.events,"viewableExpired",function(){n(!1)})),this.events.emit("prefetchStarted",{type:"prefetchStarted",wishListItem:e.context.ie})},_.prototype.bZa=function(t,e){e.qmb(t.Bda),e.Ylb(t.C$a)},_.prototype.eEb=function(t,e,i){var n=t.Xcc;t=n.audio,n=n.video,i&&n.push(new a.pM(this.H,e.config)),e.Qea(new r.Ku(t,!0),new r.Ku(n,!0))},_.prototype.lLb=function(r){var e=this,a=new l.cRa,o={context:r,wfa:b.default.time.ia(),UE:new s.Kf,du:a};return o.Ada=this.A8(o).then(function(n){return c.__awaiter(e,void 0,void 0,function(){var e,i=this;return c.__generator(this,function(t){switch(t.label){case 0:for(e=n;e.yc;)e=e.yc;return n.mg(a),a.EEb(n),o.iba=new p.zJa(e.events,{Vbc:function(t){var e=t.xv;switch(e){case"buffering":return!1;case"bufferingStarted":o.iba.cea(function(t){return"bufferingComplete"===t.xv||"updateStreamingPts"===t.xv});case"openComplete":case"updateStreamingPts":case"bufferingComplete":o.iba.cea(function(t){return t.xv===e});default:return!0}}}),e.events.on("bufferingComplete",function(){i.events.emit("prefetchComplete",{type:"prefetchComplete",wishListItem:r.ie})}),[4,this.M4b(o,n)];case 1:return t.ib(),o.oec=b.default.time.ia(),[2,o.ba=n]}})})}),o.Ada.catch(function(t){d.S&&e.H.error("Exception occurred creating playgraph",t),e.XO(o.context)}),o},e.dRa=_},function(t,e,i){var n,r;function a(){this.creationTime=n.default.time.ia(),this.Zc={isPrefetchItem:!0,prefetchClaimDurationMs:0,prefetchedVideoMs:0,prefetchedAudioMs:0}}_esm(e),e.cRa=void 0,n=i(0).__importDefault(i(3)),r=i(54),a.prototype.EEb=function(t){this.ba=t},a.prototype.R$b=function(t,e){var i;t=null==(i=this.ba)?void 0:i.xh(t),this.Zc={isPrefetchItem:!0,prefetchedVideoMs:t.BS,prefetchedAudioMs:t.AS,prefetchClaimDurationMs:n.default.time.ia()-this.creationTime,prefetchRank:e}},Object.defineProperties(a.prototype,{re:{get(){return"PrefetchReporter"},configurable:!0},enabled:{get(){return!0},configurable:!0}}),a.prototype.al=function(t){if(t.cj===r.ke.Hq)return this.Zc},e.cRa=a},function(t,e,i){var a,n;function r(t,e){void 0===e&&(e={}),this.tn=t,this.options=e,this.bJ=[],this.JJ=new n(t,this.ZCb.bind(this))}function o(t,e){this.tn=t,this.tO=e,this.Ydb=this.tn.emit,this.VKb(),this.C9a()}_esm(e),e.zJa=void 0,a=i(0),r.prototype.ZCb=function(t){for(var e,i,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return n={xv:t,yo:n},null!=(i=null==(i=(e=this.options).Vbc)?void 0:i.call(e,n,this.bJ))&&!i||this.bJ.push(n),null==(i=null==(i=(e=this.options).usc)?void 0:i.call(e,n))||i},r.prototype.cea=function(i){this.bJ=this.bJ.filter(function(t,e){return!i(t,e)})},r.prototype.bBa=function(){var i=this;this.JJ.mEa(),this.bJ.forEach(function(t){var e;(e=i.tn).emit.apply(e,a.__spreadArray([t.xv],a.__read(t.yo),!1))}),this.JJ.C9a()},Object.defineProperties(r.prototype,{length:{get(){return this.bJ.length},configurable:!0}}),r.prototype.clear=function(){this.bJ=[]},r.prototype.tb=function(){this.clear(),this.JJ.mEa(),this.options=void 0},e.zJa=r,o.prototype.VKb=function(){var r=this;this.JJ=function(t){for(var e,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];return!(null==(e=r.tO)||!e.call.apply(e,a.__spreadArray([r,t],a.__read(i),!1)))&&(e=r.Ydb).call.apply(e,a.__spreadArray([r.tn,t],a.__read(i),!1))}},o.prototype.C9a=function(){this.JJ&&(this.tn.emit=this.JJ)},o.prototype.mEa=function(){this.tn.emit=this.Ydb},o.prototype.tb=function(){this.mEa(),this.tO=this.JJ=void 0},n=o},function(t,e,i){var o,s,u;function n(){}_esm(e),e.jIa=void 0,o=i(0),s=i(35),u=i(195),n.prototype.hbb=function(a){return o.__awaiter(this,void 0,void 0,function(){var e,i,n,r;return o.__generator(this,function(t){switch(t.label){case 0:return(e=a.ie.key,u.kZ(e))?(i=e.N,n=a.ie.ph.rm(i),[4,Promise.resolve(n.xp)]):[3,2];case 1:return n=t.ib(),(r=n.ja).Co?[2,s.$A(r.Co,{config:n.config})]:[2,s.oG(i,"ps0")];case 2:return[2,e.ba]}})})},e.jIa=n},function(t,e,i){var n,r,a;function o(){}_esm(e),e.kIa=void 0,n=i(0),r=i(2),a=i(195),o.Uo=function(t){var e,i=t.O;return t=t.yd,e=i[t].N,Object.keys(i).forEach(function(t){return r.assert(i[t].N===e)}),i[t].N},o.prototype.y4a=function(t,e){var i=Object.keys(e.ba.O).length;return n.__read(t.filter(function(t){return o.Uo(e.ba)===a.Uo(t.context.ie.key)&&(1===i||i===Object.keys(null!=(t=null==(t=t.ba)?void 0:t.ba.O)?t:{}).length)}),1)[0]},e.kIa=o},function(t,i,e){var a,o;function n(t){this.config=t}_esm(i),i.NHa=i.QHa=void 0,a=e(104),o=e(1086),i.QHa=625e3,n.prototype.v_a=function(t){var e=this.config.O8,n=(this.config.Ubb||this.config.N8)*i.QHa/1e3,r=Math.floor(t.RVb.EJ/n);return{Qn:t.shc.sort(function(t,e){return t.priority-e.priority}).slice(0,e).map(function(t,e){var i=t.key.config;return{C$a:{EJ:r-1<e?0:n},ie:t,Bda:1,Kj:i,Xcc:{audio:[a.DE(i),new o.Dka],video:[a.EE(i),new o.Dka]}}})}},i.NHa=n},function(t,e,i){var n;function r(){}_esm(e),e.Dka=void 0,n=i(6),r.prototype.un=function(t,e){return e===n.Nc.Vj?[]:t},e.Dka=r},function(t,e,i){var o,s;function n(){}_esm(e),e.bRa=void 0,o=i(10),s=i(1088),e.bRa=(n.K9b=function(t,n,r,a){t.events.once("seeking",function(t){var e=t.position,i=r.length;t.duplicate||(r.cea(function(t){return"segmentNormalized"!==t.xv}),o.S&&a.log("Discarding ".concat(i-r.length," events from prefetched playgraph")+" for original seek postition ".concat(s.W$(n))+" due to seek to ".concat(s.W$(e)))),o.S&&a.log("Replaying ".concat(r.length," events from prefetched playgraph")+"for seek postition ".concat(s.W$(e))),r.bBa(),r.tb()})},n)},function(t,e){_esm(e),e.W$=void 0,e.W$=function(t){return"( ".concat(t.X,", ").concat(t.offset.ac()," )")}},function(t,e){function i(t){this.config=t}_esm(e),e.pSa=void 0,i.prototype.v_a=function(t,e){var i,n=this;return t=e(t),i=t.Qn.map(function(t){return t.ie.priority}).sort(),t.Qn.forEach(function(t){t.Bda=n.config.W6b/(2<<i.lastIndexOf(t.ie.priority))}),t},e.pSa=i},function(t,e){function i(t){this.Sk=t.Sk,this.oy=this.SXb()}_esm(e),e.TQa=void 0,i.prototype.oI=function(t){t.events.on("requestsPruned",this.oy)},i.prototype.Aw=function(t){t.events.removeListener("requestsPruned",this.oy)},i.prototype.SXb=function(){var t=this;return function(){return t.Sk()}},e.TQa=i},function(t,e,i){var o;function s(t,e,i,n){return t&&e?Math.min(t-e*i,t-n):(t||1/0)-n}_esm(e),e.x_a=void 0,o=i(6),e.x_a=function(t,e){var i=s(e.audio,e.uoa,t.sqa,null!=(n=t.W0a)?n:0),n=s(e.video,e.OEa,t.sqa,null!=(r=t.Y0a)?r:0),r=s(e.text,e.Nsc,t.sqa,null!=(a=t.X0a)?a:0),a={};return a[o.u.P]=i,a[o.u.J]=n,a[o.u.Ob]=r,a.total=(e.total||1/0)-(null!=(i=t.W0a)?i:0)-(null!=(n=t.Y0a)?n:0)-(null!=(r=t.X0a)?r:0),a}},function(t,e,s){var u,c,h,f,l;_esm(e),e.A8=void 0,u=s(0),c=s(10),h=s(1093),f=s(195),l=s(194),e.A8=function(t,e,i){var n,r,a=[function(t){return new(h.Rga.bind.apply(h.Rga,u.__spreadArray([void 0],u.__read(t.P_),!1)))}],o=f.Uo({ba:e[0]});return c.S&&i.trace("Creating playgraph",{Lrc:o,loc:t.uX,Ti:t.ZI}),t.uX&&(n=s(1131),a.unshift(function(t,e){return n.OW({},t,e)})),t.ZI&&(r=s(1136),a.unshift(function(t,e){return r.OW({},t,e)})),l.sT.Iaa({P_:e,eoa:[]},a)}},function(D,t,e){var w,h,n,f,A,i,_,a,l,d,p,b,r,g,m,o,v,s,u,y,E,k,c,S,T,I,O,x,R,P,C,L,j,B,U,F,q,H,K,G,N;function V(t){var e={};return t.forEach(function(t){t.mediaType!==A.u.Ob&&(e[t.mediaType]=t.Ro())}),e}function M(t,e,i,n,r,a,o,s,u,c){this.qo=t,this.UXa=e,this.config=i,this.id=n,this.AV=a,this.Sk=o,this.FHb=s,this.Jp=c,this.Ela=!1,this.ak=this.yc=void 0,this.sI="2.0",this.o9a=this.H6=this.so=void 0,this.Qc=f.zk.CLOSED,this.Wla=!0,this.cO=!1,this.Kkb=this.REa=this.nW=void 0,this.WZa=new h.Kf,this.PE=0,this.kfa=!1,this.TXb(),this.console=new d.default.Console("ASEJS_PLAYGRAPH","asejs","".concat(this.id)),this.gi=new k.Lu({cp:10,Mn:this,source:"AsePlaygraph",console:this.console}),this.events=new h.EventEmitter,this.Nib(t),this.bb=new C.HQa,this.fh=new G.JQa(this.console),this.Fua=new O.XJa(this.config,_.M.Ja(this.config.Qba),{parent:this.G7a.bind(this)},this.events,this.console),this.lfa=new l.SSa(this.console,this.events),this.wW={EJ:i.dw||1/0},this.U=new b.Jja(this),this.Di=new g.vU(this.U.Da,this.console,"playgraph"),this.YXb(),this.Df=new L.RGa(this.console,i,r,this.events,this,this.Bs),this.W7=new U.IGa(this.Di,this.Bs,this.config,this.lj.bind(this),this.Cf,this.console),this.Mca=this.Df.Mca.bind(this.Df),this.u_=this.Df.u_.bind(this.Df),this.Wca=this.Df.Wca.bind(this.Df),this.bL=this.bL.bind(this),this.NK=new v.lka(i),this.PXb(),this.NK.mg(new y.px(this.Df.gi)),this.NK.mg(new E.SPa(this.wUb.bind(this))),this.NK.mg(new y.px(this.gi)),this.NK.mg(new S.GQa(this.bb,this)),this.dkb=new K.RSa(this,this.console,u),this.Fab=new T.BMa(this.Bs,this.console,this.events),this.Zp=new N.LQa(this.$da.bind(this)),this.Qea(m.EE(this.config),m.DE())}_esm(t),t.Rga=void 0,w=e(0),h=e(12),n=e(35),f=e(250),A=e(6),i=e(1094),_=e(8),a=e(1095),l=e(1103),d=w.__importDefault(e(3)),p=e(2),b=e(1104),r=e(22),g=e(64),m=e(104),o=e(159),v=e(54),s=e(465),u=e(275),y=e(193),E=e(1110),k=e(65),c=w.__importDefault(e(155)),S=e(1111),T=e(1112),I=e(466),O=e(1113),x=e(1114),R=e(1115),P=e(1116),C=e(1119),L=e(1120),j=e(1121),B=e(1122),U=e(1123),F=e(1124),q=e(1126),H=e(1127),K=e(1128),G=e(1129),N=e(1130),e=e(135).Qy.Vqa,Object.defineProperties(M.prototype,{state:{get(){return this.Qc},configurable:!0},qq:{get(){return!(this.U instanceof b.Jja)},configurable:!0},ba:{get(){return this.qo},configurable:!0},weight:{get(){return this.UXa},configurable:!0},Nj:{get(){return p.assert(this.Ft,"AsePlaygraph.seekPosition accessed before seekStreaming"),this.so.position},configurable:!0},Yhb:{get(){return p.assert(this.Ft,"AsePlaygraph.seekTimestamp accessed before seekStreaming"),this.my(this.Nj).bk},configurable:!0},Cf:{get(){return this.Df.state},configurable:!0},hf:{get(){return this.Df.hf},configurable:!0},Gf:{get(){return this.Df.Gf},configurable:!0},Ft:{get(){return void 0!==this.so},configurable:!0},og:{get(){return this.U.Fe?this.U.og:this.Nj},configurable:!0},se:{get(){var t;return this.U.Fe?this.U.se:null!=(t=null==(t=this.so)?void 0:t.Py)?t:this.Yhb},configurable:!0},voa:{get(){return this.Wwb},configurable:!0},aD:{get(){return this.iCb},configurable:!0}}),M.prototype.YXb=function(){this.Bs=new g.vU(new u.c5({gk:!0,currentTime:function(){return _.M.Ja(d.default.time.ia())},speed:1}),this.console,"wallclock")},M.prototype.PXb=function(){var t=this;(0,H.f1a)({Df:this.Df,Bs:this.Bs},g.Oh.GG(_.M.Ja(this.config.uC)),function(){t.U.Fe&&t.U.Ei&&(t.Df.state.value===A.Nc.eg||t.Df.state.value===A.Nc.ed)&&t.Us(t.U.Ei)},"buffering")},M.prototype.TXb=function(){var r=this;this.RF=function(e){var t,i,n=r.navigator.Ee(e.position.X);(n=r.a7a(n))&&r.U.Fe&&(i=_.usa(r.U.bb.filter(function(t){return t.G.id===e.position.X}),e.playerTimestamp,{y0a:!0}))&&null!=(t=r.U.rp)&&t.kz({G:i.G,get Hfa(){return i.Ed.Ea(i.G.kf)}},n,r.og.offset,!0,!1),r.Zp.start()},this.p_=function(){r.Sk("onDrmReady")},this.i4b=function(t){t=t.newValue,r.Ela||(r.Ela=t)}},M.prototype.open=function(){return this.Wla=!0,this.events.emit("opening",{type:"opening"}),this.events.emit("openComplete",{type:"openComplete"}),this.Qc===f.zk.CLOSED&&(this.Qc=f.zk.OPEN,!0)},M.prototype.tb=function(){this.Bs.tb(),this.Di.tb(),this.Qc!==f.zk.CLOSED&&(this.xd(),this.Zp.tb(),this.Df.stop(),this.Qc=f.zk.CLOSED,this.qq||this.U.tb())},M.prototype.dHb=function(t,e,i){return t=j.Tra(this.bb,this.bL.bind(this),t,e,i).L_a,this.B_a(t)},M.prototype.hz=function(t,e,i){var n,r,a,o=this;return this.nW=t,this.REa=e,this.Kkb=i,t=j.Tra(this.bb,this.bL.bind(this)),n=t.L_a,t=t.GFb,!!this.B_a(n)&&(0===n.length||(r=this.og,n.forEach(function(t){return o.U.C0(t)}),a=this.my(r).bk,t.forEach(function(t){var e=t.$a;e.hz(t.we,r.X===e.G.id?a:void 0,void 0!==o.bb.yY(e),n)}),this.Df.I4b(r,t[0].we)),!0)},M.prototype.DE=function(t){return m.DE(this.config,t)},M.prototype.EE=function(t){return m.EE(this.config,t)},M.prototype.HP=function(t,e){var i=this.navigator.Ee(t),n=this.navigator.Ee(e);return{Vmb:i.wWb(e),mO:e!==t&&this.bb.has(e)&&this.bb.hy(e)[0].yh,dd:n.kf.W,VQ:this.a7a(i)}},M.prototype.lj=function(t,e,i,n){var r,a,o,s=this;if(void 0===n&&(n=!0),!e)throw Error("AsePlaygraph.setNextSegment - nextSegmentId undefined - not implemented");n&&this.fh.get(t)?i||this.fh.set(t,e):(a=this.h$(t)[0],o=this.navigator.Ee(t),this.og.X===t&&a&&null!=(r=this.U.rp)&&r.kz({G:a.G,get Hfa(){return a.Ed.Ea(a.G.kf)}},e,this.og.offset,n,i),n||(t={offset:_.M.Ka,X:e},this.so={position:t,yh:!0,Slb:t}),i?this.fh.Sac(o.id,e):this.fh.set(o.id,e),this.Zp.start(),n&&o.$y&&0<o.$y.length&&(p.assert(a),a.Mfa(o.$y)&&this.h$(e).forEach(function(t){return s.Qq(a,t)})),n||this.Df.Uca(this.Nj))},M.prototype.B_a=function(t){return 0===t.length||1===t.length&&t[0]===A.u.P&&(!(t=this.U.I$())||!t.greaterThan(this.U.se))},M.prototype.Qq=function(t,e){var i=this;t=t.Mc.Ea(e.G.kf),e.Qq(t),this.bb.HSb(e).forEach(function(t){return i.Qq(e,t)})},M.prototype.Rj=function(t){this.navigator.Rj(t),this.Zp.start()},M.prototype.Qea=function(t,e){this.Wwb=t,this.iCb=e,this.state===f.zk.Vj&&this.Sk("setStreamFilters")},M.prototype.obc=function(t){this.AV.H9b(t)},M.prototype.Dw=function(t,e){this.Dea(t,e)},M.prototype.Dea=function(t,e,i){var n,r,a,o=this.ba,s=I.Wmb(o,t);if(s.nQ){if(void 0===(a=this.Q$b(o,t,e)))this.Sf("Invalid seekPosition after sanitization to ".concat(t.X)+"(".concat(t.offset.W,"ms)")+", reason: ".concat(s.reason),null==(n=o.O[t.X])?void 0:n.N);else if(void 0===this.nW||void 0===this.REa)this.Sf("No track selectors available");else if(n=!(this.qq&&this.U.Pv)&&I.X7a(null==(r=this.so)?void 0:r.Slb,a),this.events.emit("seeking",{type:"seeking",position:t,duplicate:n}),!n){this.H6=i,this.Ft&&(this.kz(a),this.LHb(t)),t=this.E6a();try{this.xd(!0),this.KHb(),this.so={position:a,Slb:a,yh:!1,Py:e},this.o9a=e?e.Ea(this.Yhb):_.M.Ka,this.Df.Uca(),this.Qc=f.zk.Vj,this.Zp.start()}finally{t.release()}}}else this.Sf("Invalid seekPosition to ".concat(null==t?void 0:t.X)+"(".concat(t.offset.W,"ms)")+", reason: ".concat(s.reason),null==(a=o.O[t.X])?void 0:a.N)},M.prototype.kz=function(t){var e,i=this.navigator.Ee(this.og.X);null!=(e=this.U.rp)&&e.kz({G:i,Hfa:i.duration},t.X,this.og.offset,!1)},M.prototype.LHb=function(t){var e,i;(null==(e=this.U.mY())?void 0:e.G.id)===t.X?(this.fh.MHb(t.X),!this.fh.get(t.X)&&this.U.Pv&&(t=this.U.bb,(i=this.U.mY())&&(t=r.Xc(t,function(t){return t.parent===i}))&&this.fh.set(i.G.id,null==t?void 0:t.G.id))):this.fh.Lpa()},M.prototype.E6a=function(){var e=this,t=this.bb.filter(function(t){return t.G.N!==n.Xq}).map(function(t){return e.AV.eu(t.G.N).uZ});return new o.Cia(function(){t.forEach(function(t){return t.release()})},this.console).Kx()},M.prototype.xd=function(t){var e,i=this.OVb();if(this.bb.reset(),!t&&(this.fh.Lpa(),i.length))try{for(var n=w.__values(i),r=n.next();!r.done;r=n.next())r.value.Jgb()}catch(t){var a={error:t}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}this.Di.reset(),this.Bs.reset(),this.U.reset(),this.so=void 0,this.W7.reset(),null!=(t=this.WZa)&&t.clear(),this.Qc===f.zk.Vj&&(this.Qc=f.zk.OPEN)},M.prototype.h$=function(t){return this.bb.hy(t)},M.prototype.mk=function(t){this.Df.mk(t),p.assert(this.U.Mt,"Must have an appended branch on underflow"),this.U.XYa&&this.Df.Gf&&(this.console.trace("End of stream flagged implying branch completion, declaring buffering complete"),t=this.xh(this.se),this.Df.cf("complete",t.AS,t.BS)),this.W7.XDa(this.U.Mt,this.se),this.Sk("onUnderflow"),this.events.emit("underflow")},M.prototype.mg=function(t){this.NK.mg(t)},M.prototype.dt=function(t){return this.mg(new s.IRa(t)),this.DEb(t)},M.prototype.DEb=function(t){return this.U.ZDa(t)?(this.U=t,this.Di.lZa(this.U.Da),this.U.events.on("segmentPresenting",this.RF),this.U.events.on("drmReady",this.p_),this.U.ew.addListener(this.i4b),this.events.emit("playerChanged",{type:"playerChanged"}),!0):(this.Sf("player in use"),!1)},M.prototype.my=function(t){var e=t.offset,i=this.navigator.Ee(t.X);return{N:t=i.N,bk:i.kf.add(e)}},M.prototype.On=function(t,e){var i,n=this.U.On(t);return void 0!==n?n:null!=(i=null==(n=this.so)?void 0:n.Py)&&i.equal(t)?null!=(i=this.H6)?i:this.Nj:(n=this.U.Mt,I.On(t,{qa:this,bYb:n&&{id:n.G.id,kac:n.Cq}},e))},M.prototype.ny=function(t,e){if(!(t=this.IY(t,e=void 0===e?!1:e).next()).done)return null==(t=t.value)?void 0:t.Py},M.prototype.IY=function(e,i){var n,r,a,o,s,u,c,h,f,l,d;return void 0===i&&(i=!1),w.__generator(this,function(t){switch(t.label){case 0:n=this.U.IY(e),r=n.next(),t.label=1;case 1:return r.done?[3,3]:[4,r.value];case 2:return t.ib(),r=n.next(),[3,1];case 3:return i?(a={},h=this.og,this.qq&&this.U.Fe&&(u=this.U.Mt)&&(h={offset:_.M.Ka,X:u.G.id},o=u.Mc.Ea(this.U.se),s=u.G),o||(s=this.navigator.Ee(h.X),o=s.kf.add(h.offset).Ea(s.Lg)),p.assert(s,"Current segment should be defined by here"),u=this.se,s.G.Rb&&s.id!==e.X?[3,6]:s.id!==e.X?[3,5]:[4,{UO:c=e.offset.Ea(h.offset),Py:u.add(c)}]):[2];case 4:t.ib(),t.label=5;case 5:return[2];case 6:h=this.navigator.Ee(s.G.Rb),f=this.navigator.J$a(h),l=f.next(),t.label=7;case 7:return l.done?[3,11]:(d=l.value,a[d.id]?[3,11]:(a[d.id]=!0,d.id!==e.X?[3,9]:[4,{UO:c=e.offset.add(o),Py:u.add(c)}]));case 8:return t.ib(),[2];case 9:o=o.add(d.duration),t.label=10;case 10:return l=f.next(),[3,7];case 11:return[2]}})},M.prototype.IBa=function(t){return I.HBa(this.ba,t)},M.prototype.Q$b=function(t,e,i){var n=I.HBa(t,e),r=_.M.Ja(1e4);return n&&i&&!i.greaterThan(r)?(t=e.offset.add(_.M.Ja(t.O[e.X].va)),(i=i.Ea(t)).zj(_.M.Ka)||(r=_.M.max(_.M.Ka,t.Ea(r)).add(i)).zj(_.M.Ka)?n:(r=n.offset.add(r),{X:n.X,offset:r})):n},M.prototype.vn=function(t,e){var i;if((t="string"==typeof t?{N:this.ba.O[t].N,bk:_.M.Ja(e)}:t).N!==n.Xq){e=this.AV.eu(t.N);try{return null==(i=e.T)?void 0:i.vn(this.config,t.bk.W)}finally{e.uZ.release()}}},M.prototype.C$=function(){return F.x5a(this.bb,this.Laa.bind(this))},M.prototype.Laa=function(t){return void 0===(t=this.bb.yY(t))||t.vj&&this.Laa(t)},M.prototype.B$=function(){return this.wW.EJ},M.prototype.fTb=function(t){return q.I7a(this.bb,t)},M.prototype.xh=function(t){var n,r,a=this;return this.bb.gJ(function(t){var e=t.PP(A.u.P),i=t.PP(A.u.J);return!t.G.Hw&&a.bb.Jua(t)&&t.vj||((!n||e<n)&&(n=e),(!r||i<r)&&(r=i)),t.vj}),{AS:n?Math.max(n-t.W,0):0,BS:r?Math.max(r-t.W,0):0}},M.prototype.iy=function(){var t=this.Ft?this.xh(this.se):{AS:0,BS:0},e=c.default.instance().get();return{totalabuflmsecs:t.AS,totalvbuflmsecs:t.BS,abuflbytes:0,vbuflbytes:0,currentBandwidth:null!=(e=Number(0<e.confidence)&&(null==(t=e.Xa)?void 0:t.ta))?e:0}},M.prototype.OP=function(){var t,e,f,l,d,p,b,g=this;return this.Zo()?(this.gi.av({isStreamingFailureReported:!0}),[]):(e=this.bb.size,this.gi.av({branchCount:e}),this.Ft&&0!==e?(f=this.se,l=this.og,d=[],e=this.navigator.Ee(this.og.X),p=e.duration,b=!this.fh.get(e.id)&&null!=(t=e.GC)?t:1,t=this.bb.reduce(function(t,e,i){var n,r,a,o,s;try{for(var u=w.__values(e.rY()),c=u.next();!c.done;c=u.next())(a=c.value).Jt()||(o="p".concat(g.id,"-").concat(i,"-").concat(null==(r=e.vd)?void 0:r.W),s=g.F7a(a),t.push(g.rLb(a,s.W,o,p.W,b,f.W,l))),!a.wF()&&g.gi.enabled&&d.push({segmentId:a.X,isDoneStreaming:a.Jt(),isNormalized:a.yh(),needsHeaderRequest:a.track.uca})}catch(t){var h={error:t}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(h)throw h.error}}return t},[]),this.gi.av({nonStreamables:d}),t):[])},M.prototype.F7a=function(t){var e;return t.Ana||(!(e=this.G7a(t))||e.vj||this.config.l9&&this.navigator.tWb(e.$a.G,t.X)?t.KW:this.F7a(e))},M.prototype.G7a=function(t){var e;if(!t.$a.Mf){for(var i,n=t.$a;!i&&(e=this.bb.yY(n));)i=(n=e).sJ(t.mediaType);return i}},M.prototype.J4b=function(t){var e,i;this.lfa.Zo()||(e=void 0,(i=this.U.og)&&(e=this.navigator.Ee(i.X).N),this.Sf("BufferingStateTracker: Temporary failure while buffering",e,"NFErr_MC_StreamingFailure",null==t?void 0:t.qg,null==t?void 0:t.qy,null==t?void 0:t.zi))},M.prototype.Sf=function(t,e,i,n,r,a,o){return void 0===o&&(o=!1),"string"==typeof t?this.lfa.Sf(t,i,{networkErrorCode:n,httpCode:r,nativeCode:a,viewableId:e,temporaryFailure:o}):this.lfa.O9b(t),!0},M.prototype.J1=function(t,e){e=this.z$(e),this.events.emit("logdata",{type:"logdata",target:t,fields:e})},M.prototype.z$=function(t){var e;return this.Fab.s_b(t),e=this.NK.al(t),t===v.ke.iq&&(t=this.iy(),e.vbuflmsec=t.totalvbuflmsecs,e.abuflmsec=t.totalabuflmsecs,e.vbuflbytes=t.vbuflbytes,e.abuflbytes=t.abuflbytes),e},M.prototype.Ylb=function(t){this.wW=t,this.Sk("updateBudget")},M.prototype.Zo=function(){return this.lfa.Zo()},M.prototype.qmb=function(t){t!==this.weight&&(this.UXa=t,this.events.emit("weightUpdated"))},M.prototype.Nw=function(t){var e,i,n,r,a,o,s,u,c,h,f,l,d=P.u_a(this.ba,t),p=d.ER,b=d.$Gb,g=d.nfc;if([d.vDb,p,b].every(function(t){return!t.length}))return{ha:!0,reason:A.Ou.Cub};if(0===b.length&&0===g.length&&this.qq&&this.U.Fe)return{ha:!1,reason:A.Ou.Ltb};if(this.U.bb.some(function(t){return-1<p.indexOf(t.G.id)}))return{ha:!1,reason:A.Ou.zvb};if(this.Ft&&!this.U.Fe&&-1<p.indexOf(this.Nj.X))return{ha:!1,reason:A.Ou.Xsb};if(this.Ft)try{for(var m=w.__values(b),v=m.next();!v.done;v=m.next()){if(n=v.value,a=(r=this.ba.O[n]).va,o=r.wa,s=r.N,c=(u=t.O[n]).wa,h=u.va,f=u.N,this.og.X===n&&c!==o){if(!c)return{ha:!1,reason:A.Ou.Avb};if(l=_.M.Ja(c-h),null!=(i=this.og.offset)&&i.greaterThan(l))return{ha:!1,reason:A.Ou.Tnb}}if(a!==h)return{ha:!1,reason:A.Ou.wrb};if(s!==f)return{ha:!1,reason:A.Ou.xrb}}}catch(t){var y={error:t}}finally{try{v&&!v.done&&(e=m.return)&&e.call(m)}finally{if(y)throw y.error}}return this.Nib(t),this.Zp.start(),{ha:!0,reason:A.Ou.Bub}},M.prototype.bF=function(t){if((t=null==(t=0<(t=this.h$(t)).length?t[0]:void 0)?void 0:t.sm())&&0!==t.length)return _.M.min.apply(_.M,w.__spreadArray([],w.__read(t.map(function(t){return t.bF()})),!1))},M.prototype.Nib=function(t){var e={type:"playgraphUpdating",O3b:this.qo,L2b:t};this.qo=t,this.navigator=new R.QQa(t),this.TVb=P.O0a(this.navigator),this.events.emit("playgraphUpdating",e)},M.prototype.v_=function(t,e){this.Vgb(t),t.oP.addListener("criticalNetworkError",this.Mca),t.oP.addListener("temporaryNetworkError",this.u_),t.oP.addListener("updatingLastSuccessEvent",this.Wca),this.Qc===f.zk.Vj&&e&&this.Shb()},M.prototype.aza=function(e){0===this.bb.filter(function(t){return t.Gt&&t.T===e}).length&&this.Vgb(e)},M.prototype.Vgb=function(t){t.oP.removeListener("criticalNetworkError",this.Mca),t.oP.removeListener("temporaryNetworkError",this.u_),t.oP.removeListener("updatingLastSuccessEvent",this.Wca)},M.prototype.bYa=function(t){var e;p.assert(t.yh,"expected branch to be normalized on addBranchToPlayer"),this.U.Pv||null!=(e=this.so)&&e.yh||this.XQb(t),this.Df.Ufa(t.we),this.U.Pv&&(e=this.U.Mt)&&this.fh.clear(e.G.id),this.U.Kra(t),this.W7.XDa(t,this.se)},M.prototype.XQb=function(t){p.assert(t.ec,"Normalized branch should have a defined content start timestamp"),p.assert(this.so,"AsePlaygraph should have a seek position on first branch normalization"),p.assert(!this.so.yh,"Seek position should not already be normalized on first branch normalization"),this.so=w.__assign(w.__assign({},this.so),{position:{X:t.G.id,offset:t.ec.Ea(t.G.kf)},yh:!0}),this.Df.Mac(this.so.position,t.we.filter(function(t){return t.mediaType===A.u.P})[0])},M.prototype.KHb=function(){var t;this.W7.reset(),this.U.xE(),this.so=void 0,null!=(t=this.WZa)&&t.clear()},M.prototype.rLb=function(u,t,e,i,n,r,a){var c,h=this,o=null!=(f=null==(s=u.$a.vd)?void 0:s.W)?f:u.$a.Ht.W,s=u.PC.W,f=this.fh.get(u.X)?1:u.$a.G.GC;return{identifier:u.X,mediaType:u.mediaType,bi:u.bi,Cf:this.Cf.value,qC:t,qu:s,xt:r,G4a:u.eJ.W,eAa:a.offset.W,dAa:i,Y_:n,GC:f,sn:u.$a.uv.W,ekb:Math.max(s-o,0),wF:u.wF(),Jt:u.Jt(),groupId:e,x$a:function(t,e){return t=h.dkb.HGb(t,u.mediaType,e<1||!u.$a.Mf&&!h.Laa(u.$a)),1===e&&"global"===A.HAa(t.reason)&&h.Df.d4b(u.mediaType,h.xh(h.se)),t},B$a:function(){var t,e,i,n,r,a=u.mediaType,o=u.K6a(),s=h.Fua.qac(h.Cf.value,h.se,u.PC,h.U.playbackRate,u,a===A.u.P?h.voa:h.aD,h.cO,o);if(o=s.stream,e=s.a1,i=s.bQ,n=s.HC,r=s.Ky,s=s.reason,!o)return{Bj:!1,reason:s||"selectLocationsAndStream"};if(h.Cf.value===A.Nc.Vj&&u.$a&&u.$a.T.Wo&&!u.$a.T.PZ&&!h.U.Yo(u.$a.T.N)){if(s=u.PC.W-h.se.W,!u.$a.T.Hf.Pe&&s>h.config.Cxa)return{Bj:!1,reason:"maxBufferingCompleteBufferInMs"};if(!o.Aj&&o.mediaType===A.u.J&&s>=h.config.Kba)return{Bj:!1,reason:"maxFastPlayBufferInMs"}}return s=A.u.J,null!=(t=u.$a)&&t.we.every(function(t){return t.mediaType===A.u.P})&&(s=A.u.P),h.Df.Gf&&a===s&&h.Df.$ac(u.Pj.VR,o.bitrate,i),h.YR(e),t=null==(a=u.$a.Oq)?void 0:a.W,(a=u.Glb(o,r,n)).Bj?(h.Wla&&(h.Ym("firstDriveStreaming"),h.Wla=!1),0<h.PE&&(o=null==(s=u.$a.Oq)?void 0:s.W,t&&o&&(h.PE-=t-o,h.PE<=0&&h.Shb()))):"exceedsLiveEdge"===a.reason&&(null!=c&&c.tb(),c=h.Bs.GO(g.Oh.GG(o.cF().uv),function(){c=void 0,h.Sk("liveEdgeRetry")})),a}}},M.prototype.YR=function(t){var i=this;t.forEach(function(t){t.T.Tac(t,function(){var t,e;return p.assert(i.Ft,"Speculative header callback after streaming is cancelled"),e=(t=i.se.W)+i.config.XZ,{bi:[],Cf:i.Df.state.value,qC:e,qu:e,xt:t}})})},M.prototype.Shb=function(){var t=this;this.Zp.hga(N.aH.Mz,function(){return t.Zp.start()})},M.prototype.$da=function(){var t,e,i,n,r,a=this;this.Qc===f.zk.Vj&&(t=this.og,e=this.U.bb,i=this.bb.FVb(),t=(n=w.__read(e,1)[0])?this.navigator.Ee(n.G.id):this.navigator.Ee(t.X),e=e.map(function(t){return t.G.id}),i=(e=x.$da(this.console,this.TVb,t,i,this.fh,e,_.M.Ja(this.config.EFb),this.config.fya,_.M.Ja(this.config.Noa))).kea,e=e.PE,t=w.__read(i),r=t[0],n=(t=t.slice(1)).filter(function(t){return t.tw}),p.assert(t.length===n.length,"Missing parent branch"),p.assert(!t.length||t.some(function(t){return t.tw===r}),"Disconnected tree"),this.PE=e||0,this.bb.zfc(i,function(t,e){var i,n=a.navigator.Ee(t);return t=t===a.Nj.X?a.Nj.offset:t===(null==(i=a.H6)?void 0:i.X)?a.H6.offset:_.M.Ka,i=n.kf.add(t),a.bfc(n,i,e)}).ER.forEach(function(t){t.xd("aborted")}),this.Fgb(),this.Q_a(),this.Zp.hga(N.aH.Mz,function(){var t;null!=(t=a.bb.root())&&t.Gt&&a.Sk("reevaluateBranches"),a.Zp.VZ(N.aH.pU)}),this.events.emit("branchesReevaluated",{type:"branchesReevaluated"}))},M.prototype.OVb=function(){return r.dW(this.bb.filter(function(t){return t.Gt}).map(function(t){return t.T}))},M.prototype.Fgb=function(){var t,e=this;if(this.Qc===f.zk.Vj&&(this.U.Mt||null!=(t=w.__read(this.bb.hy(this.Nj.X),1)[0])&&t.yh&&this.bYa(t),this.U.Mt))for(;(t=this.s6a(this.U.Mt.G))&&(t=w.__read(this.bb.hy(t).filter(function(t){return t.parent===e.U.Mt}),1)[0])&&(null!=t&&t.yh);)this.bYa(t)},M.prototype.a7a=function(e){var i,n,t;return this.U.Pv&&(i=this.U.Ei,n=!1,t=(t=this.U.bb.filter(function(t){return n=n||t===i}))[r.Yp(t,function(t){return t.G.id===e.id})+1])?t.G.id:this.s6a(e)},M.prototype.s6a=function(t){var e=this.fh.get(t.id);return void 0!==e?e:1===(t=this.navigator.XSb(t)).length?t[0].id:void 0},M.prototype.Q_a=function(){var t=0!==this.XRb();t||this.kfa?t&&this.kfa&&(this.kfa=!1):(this.Df.Gf&&(t=this.xh(this.se),this.Df.cf("complete",t.AS,t.BS)),this.eAb(),this.kfa=!0)},M.prototype.XRb=function(){return this.bb.filter(function(t){return!t.vj}).length},M.prototype.Us=function(t){this.Laa(t)&&this.Df.Epa(this.se,this.U.playbackRate,t,{Dpa:this.Fua.Dpa.bind(this.Fua,this.dkb)})},M.prototype.W3b=function(t,e){var i,n=this;e.didNormalizeSegment&&(i=B.jSa.NVb(t),p.assert(i,"Segment should be normalized"),Promise.resolve().then(function(){return n.events.emit("segmentNormalized",{type:"segmentNormalized",segmentId:t.G.id,normalizedStart:e.segmentContentStart,normalizedEnd:e.branchContentEnd,viewableContentEnd:i.inb,viewableEarliestContentEnd:i.jnb,media:V(t.we)})})),Promise.resolve().then(function(){n.Fgb()}),this.Sk("branchNormalized")},M.prototype.X3b=function(){this.Q_a()},M.prototype.V3b=function(){this.Zp.start()},M.prototype.DLb=function(t){var n=this,r=!this.U.Pv&&!this.bb.has(this.Nj.X);return new i.KGa(t.N,this.AV.eu.bind(this.AV),function(t,e,i){n.state!==f.zk.CLOSED&&(n.v_(e,i),n.Zp.hga(N.aH.pU,function(){t.Mf||n.v6(t,e,r)}))},this.aza.bind(this))},M.prototype.bfc=function(t,e,i){var n,r;if(this.FHb(t,e))throw Error("Not implemented");return n=this.DLb(t),r=i?i.Mc.Ea(e):this.o9a||_.M.Ka,t=a.N0a({config:this.config,console:this.console,G:t,events:this.events,bL:this.bL,Gn:e,Dd:r,Qe:this.OLb.bind(this),Cf:this.Cf,Di:this.Di,OL:n,a_a:this.Jp,Sza:this.bb}),this.ldc(t,!!i),t},M.prototype.OLb=function(){return this.se.W},M.prototype.ldc=function(e,t){var i=this,n=new h.Kf;n.addListener(e.events,"needsRequest",function(){var t=i.bb.root();t&&!t.Gt||i.Sk("branchNeedsHeader")}),n.addListener(e.events,"branchNormalized",this.W3b.bind(this,e)),n.addListener(e.events,"lastRequestIssued",this.V3b.bind(this,e)),n.addListener(e.events,"branchStreamingComplete",this.X3b.bind(this,e)),n.addListener(e.events,"checkBufferingProgress",this.Us.bind(this,e)),n.addListener(e.events,"branchDestroyed",function(t){n.clear(),i.bb.contains(e)&&(i.bb.bea(e),i.Zp.start()),"aborted"!==t.reason||i.U.g8a(e)||i.Zp.hga(N.aH.Mz,function(){return i.Cma(e.G.id)})}),t||(this.Ym("createDlTracksStart"),e.events.once("requestQueuesCreated",function(){i.Ym("createDlTracksEnd")}))},M.prototype.wUb=function(t){if(this.U.Fe)return this.U.Ei.ab(t)},M.prototype.bL=function(n,t,e,i){return t=[[A.u.P,null!=t?t:this.nW,"audio_tracks"],[A.u.J,null!=e?e:this.REa,"video_tracks"]].map(function(t){var e=w.__read(t,3),i=e[0];if(t=e[1],e=e[2],n.ja&&(p.assert(t,"Expected mediaType ".concat(i," track selector to be defined")),i=n.ja[e],void 0!==(t=t.ss(n.ja,i))))return n.getTrackById(i[t].ES)}).filter(r.Fca),e=i||this.Kkb,n.ja&&e&&(i=n.ja.timedtexttracks,void 0!==(e=e.ss(n.ja,i))&&0<=e&&(i=n.getTrackById(i[e].id))&&t.push(i)),t},M.prototype.v6=function(t,e,i){p.assert(t.we.length,"Branch should have tracks defined"),t={type:"segmentStarting",segmentId:t.G.id,contentOffset:t.Dd.W,maxBitrates:{audio:e.Rt[A.u.P],video:e.Rt[A.u.J]},media:V(t.we),initial:i},this.events.emit(t.type,t)},M.prototype.Cma=function(t){this.events.emit((t={type:"segmentAborted",segmentId:t}).type,t)},M.prototype.eAb=function(){var t={type:"streamerEnd",time:d.default.time.ia()};this.events.emit(t.type,t)},M.prototype.Ym=function(t){t={type:"startEvent",event:t,time:d.default.time.ia()},this.events.emit(t.type,t)},w.__decorate([e.return.wi()],M.prototype,"Nj",null),w.__decorate([k.nb({methodName:"checkCanSetTracks",return:!0})],M.prototype,"dHb",null),w.__decorate([k.nb({methodName:"setTracks",return:!0})],M.prototype,"hz",null),w.__decorate([k.nb({methodName:"setNextSegment",yo:!0})],M.prototype,"lj",null),w.__decorate([k.nb({methodName:"seekStreaming"}),w.__param(0,e.wi())],M.prototype,"Dw",null),w.__decorate([k.nb({methodName:"seekStreamingWithEntryPoint"}),w.__param(0,e.wi()),w.__param(2,e.wi()),w.__param(2,e.Gya)],M.prototype,"Dea",null),w.__decorate([e.return.S0a(),w.__param(0,e.wi())],M.prototype,"my",null),w.__decorate([e.return.wi()],M.prototype,"On",null),w.__decorate([w.__param(0,e.wi())],M.prototype,"ny",null),w.__decorate([w.__param(0,e.wi())],M.prototype,"IY",null),w.__decorate([e.return.wi(),w.__param(0,e.wi())],M.prototype,"IBa",null),w.__decorate([w.__param(0,e.S0a()),w.__param(0,e.X())],M.prototype,"vn",null),w.__decorate([k.nb({methodName:"getStreamables",Dl:!0})],M.prototype,"OP",null),w.__decorate([k.nb({methodName:"updatePlaygraphMap",return:!0})],M.prototype,"Nw",null),t.Rga=M},function(t,e,i){var a;function n(t,e,i,n){this.N=t,this.eu=e,this.v_=i,this.aza=n}_esm(e),e.KGa=void 0,a=i(0),Object.defineProperties(n.prototype,{T:{get(){var t;return null==(t=this.c2)?void 0:t.T},configurable:!0}}),n.prototype.tb=function(){var t;this.T&&(this.T.oEa(this.$a),this.aza(this.T)),null!=(t=this.c2)&&t.uZ.release(),this.c2=void 0},n.prototype.xa=function(r){return a.__awaiter(this,void 0,void 0,function(){var e,i,n;return a.__generator(this,function(t){switch(t.label){case 0:return this.$a=r,n=this.eu(this.N),e=n.FG,i=n.T,n=n.uZ,this.c2={uZ:n,T:i},i?(this.n9a(i,r,!1),[2,i]):[4,e];case 1:return n=t.ib(),this.n9a(n,r,!0),[2,n]}})})},n.prototype.n9a=function(t,e,i){this.c2&&((this.c2.T=t).PAa(e),this.v_(e,t,i))},e.KGa=n},function(t,e,d){var p,b,g,m;_esm(e),e.N0a=void 0,p=d(35),b=d(1096),g=d(8),m=d(1097),e.N0a=function(t){var e=t.config,i=t.console,n=t.Sza,r=t.G,a=t.events,o=t.bL,s=t.Gn,u=t.Dd,c=t.Qe,h=t.Cf,f=t.Di,l=t.OL;return t=t.a_a,e=r.N===p.Xq&&e.ZI?(a=new b.WOa(r.N,e.kza),o=g.M.Ka,new(d(1101).VOa)(i,r,o,n.yY.bind(n),a,e)):new m.HGa(e,i,a,r,o,s,u,c,n.yY.bind(n),h,f,l,t)}},function(t,e,i){var n;function r(t,e){this.N=t,this.Wgc=e,this.L="".concat(n.Xq)}_esm(e),e.WOa=void 0,n=i(35),r.prototype.getTrackById=function(){},r.prototype.mk=function(){},r.prototype.Jgb=function(){},r.prototype.Sf=function(){return!0},r.prototype.PK=function(){},e.WOa=r},function(t,e,i){var s,n,u,d,r,a,c,o,p,h,f,l,b,g,m,v,y;function w(t,e,i,n,r,a,o,s,u,c,h,f,l){return(e=y.call(this,n,u,o,a,e)||this).K=t,e.mda=i,e.x$=r,e.WU=s,e.iA=c,e.Fx=h,e.OL=f,e.Jp=l,e.ry=new p.qM,e.hBa=0,e.Vb=void 0,e.u1=void 0,e.Ml=new d.nD,e.Baa=new d.nD,e.Pya=e.VXb(),e}_esm(e),e.HGa=e.kD=void 0,s=i(0),n=i(118),u=i(6),d=i(8),r=i(19),t=i(78),a=i(36),c=i(2),o=i(190),p=i(267),h=i(10),f=i(130),l=i(1098),b=i(460),g=i(1099),(v=m=e.kD||(e.kD={}))[v.qT=0]="CREATED",v[v.iT=1]="CANCELLED",y=b.eha,s.__extends(w,y),Object.defineProperties(w.prototype,{we:{get(){var t;return this.Gt&&0===(null==(t=this.JN)?void 0:t.length)&&this.x$&&(h.S&&this.console.trace("Branch getting initial tracks"),this.JN=this.x$(this.T).sort(b.CG),h.S&&this.console.trace("Branch got initial tracks:",this.JN)),this.JN},configurable:!0},WN:{get(){return!!this.vj&&this.sm().every(function(t){return t.Va.WN})},configurable:!0},OYa:{get(){return this.sm().some(function(t){return t.UDb})},configurable:!0},Zv:{get(){var t;return!(null==(t=this.Pd)||!t.Zv)},configurable:!0},vj:{get(){var t;return!(null==(t=this.Pd)||!t.vj)},configurable:!0},Zs:{get(){var t;return null!=(t=null==(t=this.Pd)?void 0:t.Zs)?t:0},configurable:!0},yh:{get(){var t;return!(null==(t=this.Pd)||!t.yh)},configurable:!0},SS:{get(){return this.Ml.promise.then(function(){})},configurable:!0},Gt:{get(){var t;return!(null==(t=this.OL)||!t.T)},configurable:!0},eaa:{get(){return!!this.we.length&&this.we.every(function(t){return t.Yd})},configurable:!0},T:{get(){return c.assert(this.OL.T,"viewable should be available"),this.OL.T},configurable:!0},aa:{get(){var t;return(null==(t=this.Pd)?void 0:t.aa)||this.Gn.aa},configurable:!0},Za:{get(){var t;return null!=(t=null==(t=this.Pd)?void 0:t.Za)?t:this.Gn.fb},configurable:!0},mb:{get(){var t;return null!=(t=null==(t=this.Pd)?void 0:t.mb)?t:this.G.Lg.fb},configurable:!0},Lj:{get(){var t;return null!=(t=null==(t=this.Pd)?void 0:t.Lj)?t:this.Dd.Rg(this.aa).fb},configurable:!0},Ht:{get(){var t;return null!=(t=null==(t=this.Pd)?void 0:t.Ht)?t:null==(t=this.Gn)?void 0:t.add(this.Dd)},configurable:!0},eJ:{get(){var t=null==(t=this.G.G.lq)?void 0:t[0];return t&&this.ec?r.M.Ja(Math.max(0,t[0]-this.ec.W-this.G.kf.W)):r.M.Ka},configurable:!0},Cq:{get(){var t;return null!=(t=null==(t=this.Pd)?void 0:t.Cq)?t:this.G.kf.add(this.Dd)},configurable:!0},sC:{get(){var t;return null!=(t=null==(t=this.Pd)?void 0:t.sC)?t:this.G.Lg.add(this.Dd)},configurable:!0},sZ:{get(){var t;return null==(t=this.Pd)?void 0:t.sZ},configurable:!0},Dd:{get(){var t;return null!=(t=null==(t=this.Pd)?void 0:t.Dd)?t:this.er},configurable:!0},Oq:{get(){var t;return null!=(t=null==(t=this.Pd)?void 0:t.Oq)?t:this.G.Lg.Ea(this.Gn||this.G.kf)},configurable:!0}}),w.prototype.xa=function(){return s.__awaiter(this,void 0,void 0,function(){var e,i,n=this;return s.__generator(this,function(t){switch(t.label){case 0:return(y.prototype.xa.call(this),this.Mf)?[2]:(h.S&&this.console.log("AseBranch {".concat(this.G.id,"} awaiting viewable")),[4,this.OL.xa(this)]);case 1:return(t.ib(),h.S&&this.console.log("AseBranch {".concat(this.G.id,"} viewable available, branch ").concat(this.Mf?"cancelled":"active")),this.Mf)?[2]:(e=this.we.map(function(t){var e;return null==(e=n.parent)?void 0:e.NP(t.mediaType)}),this.Fib(this.Gn),this.we.some(function(t){t.mediaType===u.u.Ob&&n.Wib(t)}),[4,this.m4a()]);case 2:return t.ib(),h.S&&this.console.log("AseBranch {".concat(this.G.id,"} have headers")),this.Mf?[2]:(i=this.parent)?[4,i.SS]:[3,4];case 3:if(t.ib(),this.Mf)return[2];this.TKb(e),t.label=4;case 4:return this.normalize(),[2]}})})},w.prototype.TKb=function(n){var r=this;this.ry.forEach(function(e){var t,i=null==(t=r.parent)?void 0:t.NP(e.mediaType);c.assert(i,"Parent state should be defined"),-1===(null==n?void 0:n.indexOf(i))&&(e.Pj.ve.tb(),t=new o.e5(function(){var t;return null==(t=r.parent)?void 0:t.NP(e.mediaType)}),e.Pj.ve=t)}),n=void 0},w.prototype.m4a=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(){return this.eaa?this.Baa.resolve():(this.T.Sv.on("onHeaderFragments",this.Pya),this.events.emit("needsRequest")),[2,this.Baa.promise]})})},w.prototype.VXb=function(){var t=this;return function(){!t.Mf&&t.eaa&&(t.T.Sv.Hy("onHeaderFragments",t.Pya),t.Baa.resolve())}},w.prototype.normalize=function(){this.Mf||(this.Pd=new g.jOa(this,this.K,this.console,this.T,this.mda,this.Tp,this.Gn,this.ry.items,this.er,this.WU,this.iA,this.events,this.Fx,this.Jp),this.Bra(this.Pd.LE),this.Ml.resolve(this.Pd))},w.prototype.update=function(t){var e;this.Tp=t,null!=(e=this.Pd)&&e.update(t)&&this.Bra(!0)},w.prototype.Qq=function(t,e){y.prototype.Qq.call(this,t,e=void 0===e?"unknown":e),null!=(e=this.Pd)&&e.Qq(t)},w.prototype.ky=function(i){return s.__awaiter(this,void 0,void 0,function(){var e;return s.__generator(this,function(t){switch(t.label){case 0:return[4,this.Ml];case 1:return[2,null==(e=t.ib())?void 0:e.ky(i)]}})})},w.prototype.RE=function(){var t;null!=(t=this.Pd)&&t.RE()},w.prototype.reset=function(){var t;null!=(t=this.Pd)&&t.reset()},w.prototype.xd=function(t){var e;y.prototype.xd.call(this,t=void 0===t?"other":t),this.Qc=m.iT,this.Gt&&this.T.Sv.Hy("onHeaderFragments",this.Pya),null!=(e=this.Pd)&&e.xd(),this.ry.forEach(function(t){t.cancel(),t.Pj.ve.tb()}),this.OL.tb(),this.events.emit("branchDestroyed",{type:"branchDestroyed",reason:t}),this.events.removeAllListeners()},w.prototype.eQ=function(t){var e;return!(null==(e=this.Pd)||!e.eQ(t))},w.prototype.ab=function(t){var e;return null==(e=this.Pd)?void 0:e.ab(t)},w.prototype.gaa=function(e){return this.we.some(function(t){return t.mediaType===e})},w.prototype.sm=function(t){var e;return void 0===t&&(t=b.CG),null!=(e=null==(e=this.Pd)?void 0:e.sm(t))?e:[]},w.prototype.NP=function(t){var e;return(null==(e=this.ab(t))?void 0:e.Pj.ve)||(null==(e=this.ry.get(t))?void 0:e.Pj.ve)},w.prototype.rY=function(){var t,e=this;return this.eaa?(t=null!=(t=null==(t=this.Pd)?void 0:t.rY())?t:[],this.Vb&&t.some(function(t){if(t.mediaType===u.u.J)return t.EZa=e.Vb,h.S&&e.console.trace("Branch setting auxiliaryTrack:",e.Vb),!0}),t):this.ry.items},w.prototype.sJ=function(t){var e;return(null==(e=this.Pd)?void 0:e.sJ(t))||this.ry.get(t)},w.prototype.xh=function(t,e){var i;return(null==(i=this.Pd)?void 0:i.xh(t,e))||0},w.prototype.yB=function(){var t;return(null==(t=this.Pd)?void 0:t.yB())||{}},w.prototype.PP=function(t){var e;return(null==(e=this.Pd)?void 0:e.PP(t))||this.Ht.W},w.prototype.hz=function(r,a,o){return s.__awaiter(this,void 0,void 0,function(){var e,i,n=this;return s.__generator(this,function(t){switch(t.label){case 0:return(this.JN=r.sort(b.CG),this.Fib(a),this.yh)?(c.assert(this.Pd),i=this.ry.filter(function(t){return t.track.Yd}).items,i=this.Pd.hmb(i,a,o),e=i.hX,i=i.LE,e&&this.Bra(i),this.eaa?[3,4]:(this.Baa=new d.nD,this.Ml=new d.nD,h.S&&this.console.log("AseBranch {".concat(this.G.id,"} setTracks waiting for headers")),[4,this.m4a()])):[3,5];case 1:return t.ib(),this.Mf?[2]:this.parent?[4,this.parent.SS]:[3,3];case 2:t.ib(),t.label=3;case 3:this.Pd.hmb(this.ry.items,a,o),h.S&&this.console.log("AseBranch {".concat(this.G.id,"} setTracks pipelines updated")),this.Ml.resolve(this.Pd),this.events.emit("needsRequest"),t.label=4;case 4:r.some(function(t){if(t.mediaType===u.u.Ob)return n.Wib(t),!0}),t.label=5;case 5:return[2]}})})},w.prototype.Wib=function(t){this.Vb=t,this.u1||(this.u1=n.zp.instance.vt(u.u.Ob,this.T.L,!0,!1,{vv:this.K.vv},this.K),this.u1.xa(),h.S&&this.console.trace("AseBranch created textRequestQueue:",this.u1))},w.prototype.P7a=function(){return this.Vb},w.prototype.Fib=function(i){var n=this;this.hBa=0,this.ry=new p.qM(this.we.filter(function(t){return t.mediaType!==u.u.Ob}).map(function(e){var t=n.ry.find(function(t){return t.track===e});return t||(++n.hBa,t=new l.GKa(n,e,function(){return(null==i?void 0:i.add(n.Dd))||r.M.Ka},n.K,n.console,function(){var t;return null==(t=n.parent)?void 0:t.NP(e.mediaType)},n.mda,function(){0==--n.hBa&&n.events.emit("requestQueuesCreated")})),t}))},w.prototype.bm=function(t){var e;return(null==(e=this.Pd)?void 0:e.bm(t))||[]},w.prototype.BE=function(t){var e;return!(null==(e=this.Pd)||!e.BE(t))},w.prototype.dY=function(t){return this.Pd?this.Pd.dY(t):r.M.Ka},w.prototype.Mfa=function(t){var e;return!(null==(e=this.Pd)||!e.Mfa(t))},w.prototype.Bra=function(t){t={type:"branchNormalized",segmentContentStart:this.G.kf,branchContentStart:this.ec,branchContentEnd:this.Ed,didNormalizeSegment:t},this.events.emit(t.type,t),h.S&&this.console.trace("branchNormalized:",t)},w.prototype.toJSON=function(){var t;return(null==(t=this.Pd)?void 0:t.toJSON())||{}},i=s.__decorate([f.kJ],w),e.HGa=i,a.Ve(t.Au,i),a.Ve(t.Dz,i)},function(t,e,i){var n,r,a,o,s,u,c;function h(t,e,i,n,r,a,o,s){this.$a=t,this.track=e,this.Gcc=i,this.config=n,this.console=r,this.events=o,this.A4b=s,this.zm=0,this.wfb=this.vj=!1,this.Pj=this.qLb(a)}_esm(e),e.GKa=void 0,n=i(0),r=i(444),a=i(118),o=i(6),s=i(190),u=i(269),c=i(2),Object.defineProperties(h.prototype,{mediaType:{get(){return this.track.mediaType},configurable:!0},X:{get(){return this.$a.G.id},configurable:!0},bi:{get(){return this.$a.bi},configurable:!0},dfa:{get(){return this.Gcc()},configurable:!0},KW:{get(){return this.dfa},configurable:!0},PC:{get(){return this.dfa},configurable:!0},eJ:{get(){return this.$a.eJ},configurable:!0},Te:{get(){return this.Ne||(this.Ne=this.vt())},configurable:!0}}),h.prototype.wF=function(){return this.track.uca},h.prototype.Jt=function(){return this.track.Yd},h.prototype.yh=function(){return!1},h.prototype.q6a=function(){return{da:[],hda:0,Gj:0,lp:0}},h.prototype.Kec=function(){var t;return c.assert(this.Jt()),t=this.Te,this.Ne=void 0,t},h.prototype.Glb=function(t){return(t=t.BG(this.Te))?{Bj:t,reason:"success"}:{Bj:t,reason:"pipelineTryIssueHeaderRequest"}},h.prototype.cancel=function(){this.Ne&&(this.$a.T.ON(this.mediaType,this.Ne),a.zp.instance.SO(this.Ne),this.Ne.removeAllListeners(),this.Ne=void 0)},h.prototype.K6a=function(){},h.prototype.f$a=function(){var t,e=this.config.Ij;return e=null!=(t=this.Te)&&t.track?null==(t=this.Te)?void 0:t.track.Ij:e},h.prototype.qLb=function(t){var e,i=this.mediaType===o.u.P?this.config.tZa:this.track.ub?this.config.N_b:this.config.oDa;return(t=new s.e5(t)).V0(this.track),e=this.config,new u.Fka(i,this.config,t,this.mediaType===o.u.P?e.j9:e.k9)},h.prototype.vt=function(){var e=this,t=this.track.ub?n.__assign(n.__assign({},this.config),{Hmb:!0}):this.config;return(t=r.vt(this.mediaType,this.track.T,t,this.console,function(t){return e.events.emit("transportReport",t)},function(t){return e.events.emit("mediaRequestComplete",t)},function(){})).on("created",this.A4b),t},e.GKa=h},function(t,e,i){var r,o,n,a,s,u,b,c,g,m,v,h,y,f,w;function l(t,e){return(t.mediaType===s.u.J?0:1)-(e.mediaType===s.u.J?0:1)}function d(t,e,i,n,r,a,o,s,u,c,h,f,l,d){var p=w.call(this,n)||this;return p.$a=t,p.K=e,p.T=n,p.mda=r,p.Tp=a,p.er=u,p.WU=c,p.iA=h,p.events=f,p.Fx=l,p.Jp=d,p.Ae=new y.qM([]),p.Um=!1,p.fV=0,p.HU=p.Nya.bind(p),g.assert(n.N===p.G.N||isNaN(n.N)&&isNaN(p.G.N)),t=a.id&&a.id.length?"{"+a.id+"}":"",p.console=b.ai(v.default,i,t),p.Gn=null!=o?o:m.M.Ja(p.G.ea),i=p.parent,p.Jma=null==i?void 0:i.Mc,null!=(e=p.iA)&&e.addListener(p.HU),s=p.q1a(s,p.Gn,!!i).LE,p.LE=s,p}_esm(e),e.jOa=e.Ija=void 0,r=i(0),o=i(441),n=i(89),a=i(131),s=i(6),u=i(1100),b=i(8),c=i(22),g=i(2),m=i(19),v=r.__importDefault(i(3)),t=i(78),h=i(36),y=i(267),f=i(461),e.Ija={CG:l},w=n.Uw,r.__extends(d,w),Object.defineProperties(d.prototype,{Mf:{get(){return this.Um},configurable:!0},G:{get(){return this.Tp},configurable:!0},Zv:{get(){return this.Ae.every(function(t){return t.Zv})},configurable:!0},vj:{get(){return this.Ae.every(function(t){return t.vj})},configurable:!0},Zs:{get(){return this.sm().reduce(function(t,e){return t+e.Zs},0)},configurable:!0},yh:{get(){return this.sm().every(function(t){return t.yh()})},configurable:!0},we:{get(){return this.$a.we},configurable:!0},aa:{get(){return this.Xu.aa},configurable:!0},Za:{get(){return this.Xu.Za},configurable:!0},mb:{get(){return this.Xu.mb},configurable:!0},Lj:{get(){return this.Dd.Rg(this.aa).fb},configurable:!0},Ht:{get(){return this.Gn.add(this.Dd)},configurable:!0},Cq:{get(){return this.G.kf.add(this.Dd)},configurable:!0},sC:{get(){return this.G.Lg.add(this.Dd)},configurable:!0},sZ:{get(){return this.Ae.reduce(function(t,e){return t&&e.Mc?m.M.max(t,e.Mc):e.Mc||t},void 0)},configurable:!0},Bva:{get(){return this.Ht.W},configurable:!0},bf:{get(){return this.Dd.W},configurable:!0},Oq:{get(){return this.Xu.Oq},configurable:!0},Dd:{get(){return this.er},configurable:!0},parent:{get(){return this.$a.parent},configurable:!0}}),d.prototype.hmb=function(t,e,i){var n;return void 0===e&&(e=null!=(n=this.ec)?n:this.Gn),this.q1a(t,e,i)},d.prototype.update=function(t){var e,i=t.Lg.yya(this.Tp.Lg);return this.Tp=t,!(!i||!this.VD)&&(t=(i=r.__read(this.VD.F9b(t,t.Lg),2))[0],i=i[1],g.assert(t&&i,"branch.update: lastFragment should be defined"),null!=(e=this.ab(s.u.P))&&e.truncate(t),null!=(e=this.ab(s.u.J))&&e.truncate(i),this.events.emit("branchEdited",{type:"branchEdited"}),!0)},d.prototype.Qq=function(t){this.Dd.equal(t)||(this.er=t,this.events.emit("branchEdited",{type:"branchEdited"}))},d.prototype.ky=function(i){return r.__awaiter(this,void 0,void 0,function(){var e;return r.__generator(this,function(t){switch(t.label){case 0:return[4,Promise.resolve()];case 1:return t.ib(),(e=this.ab(i))?[2,e.ky()]:[2,a.AsyncIterator.e6a()]}})})},d.prototype.RE=function(){this.sm().forEach(function(t){return t.RE()})},d.prototype.QV=function(){this.Ae.forEach(function(t){return t.QV()})},d.prototype.reset=function(){this.Ae.forEach(function(t){t.reset()})},d.prototype.xd=function(){var t;this.Um||(this.Um=!0,null!=(t=this.VD)&&t.cd(),this.VD=void 0,this.Ae.forEach(function(t){t.xd()}),null!=(t=this.iA)&&t.removeListener(this.HU))},d.prototype.eQ=function(){return!0},d.prototype.ab=function(t){return this.Ae.get(t)},d.prototype.sm=function(t){return void 0===t&&(t=l),this.Ae.items.slice().sort(t)},d.prototype.rY=function(){return this.Ae.items},d.prototype.sJ=function(t){return this.ab(t)},d.prototype.xh=function(t,e){return(t=this.ab(t))?e?t.Tn:void 0===(e=t.Er)?0:e-(t=this.WU()):0},d.prototype.yB=function(){var t,e=null==(i=this.ab(s.u.P))?void 0:i.Fo,i=null==(t=this.ab(s.u.J))?void 0:t.Fo;return{wp:null!=(t=null==i?void 0:i.W)?t:0,Xs:null!=(t=null==e?void 0:e.W)?t:0,xu:null!=(t=null==i?void 0:i.fa)?t:0,gE:null!=(i=null==e?void 0:e.fa)?i:0}},d.prototype.PP=function(t){return(t=this.ab(t))&&null!=(t=t.Er)?t:0},d.prototype.bm=function(t){return(null==(t=this.ab(t))?void 0:t.bm())||[]},d.prototype.Nya=function(t){t=t.newValue,s.tq(t)&&this.Us()},d.prototype.BE=function(e){return this.Ae.every(function(t){return t.BE(e)})},d.prototype.dY=function(t){return null!=(t=null==(t=this.Ae.get(t))?void 0:t.N1a)?t:m.M.Ka},d.prototype.Mfa=function(t){var e,i,n=this.Xu.YZb;return!!n&&(!!(t=c.Xc(t,function(t){return n.W<=t.ec.W}))&&(e=t.ec,t=!1,e=(i=r.__read(f.$Aa(this.K,this.Ae,e),2))[0],(i=i[1])&&(this.ab(s.u.J).truncate(i),t=!0),e&&(this.ab(s.u.P).truncate(e),t=!0),t&&this.events.emit((e={type:"branchEdited"}).type,e),t))},d.prototype.gl=function(t){this.Um||(t.q7||g.assert(!t.Cc),this.Us(),this.vj&&this.Gma()),this.Gv(t)},d.prototype.qK=function(t){this.K.m9&&this.Us(!0),this.hJ(t)},d.prototype.pK=function(t){this.K.m9&&this.Us(!0),this.ZE(t)},d.prototype.q1a=function(t,i,e){var n=this,r=new y.qM,a=!1;return t.forEach(function(e){var t=n.Ae.find(function(t){return t.track===e.track});void 0===t?(a=!0,t=new o.Hja(n,n.K,n.console,n.mda,n.$a,e.track,i,e.Pj,!0,void 0,e.Kec(),n.Fx,n.Jp),n.gYb(t)):(n.Ae.remove(t),t.QV()),r.add(t)}),this.Ae.forEach(function(t){return t.xd()}),this.Ae=r,a?this.normalize(i,e):{hX:!1,LE:!1}},d.prototype.gYb=function(t){var e=this;t.events.on("lastRequestIssued",function(){return e.Zv&&e.events.emit("lastRequestIssued",{type:"lastRequestIssued"})})},d.prototype.normalize=function(t,e){var i;return null!=(i=this.VD)&&i.cd(),this.VD=new u.QPa({console:this.console,config:this.K,T:this.T,G:this.G,Rl:this.Ae,ec:t,Ed:null!=(i=this.G.Lg)?i:void 0!==this.G.Qa?m.M.Ja(this.G.Qa):void 0,splice:e}),this.Xu=this.Ae.$_,t=(e=this.VD.normalize()).hX,e=e.LE,t&&this.Jma&&(this.er=this.Jma.Ea(this.ec)),{hX:t,LE:e}},d.prototype.FCa=function(t){var e;return s.tq((null==(e=this.iA)?void 0:e.value)||s.Nc.Vj)&&(!t||this.fV+this.K.hca<v.default.time.ia())},d.prototype.Us=function(t){this.FCa(t=void 0===t?!1:t)&&(this.fV=v.default.time.ia(),this.events.emit((t={type:"checkBufferingProgress"}).type,t))},d.prototype.Gma=function(){var t={type:"branchStreamingComplete"};this.events.emit(t.type,t)},d.prototype.toJSON=function(){var t;return{segment:this.G.id,branchOffset:this.bf,viewableId:this.Tp.N,contentStartPts:null==(t=this.ec)?void 0:t.W,contentEndPts:null==(t=this.Ed)?void 0:t.W}},e.jOa=i=d,h.Ve(t.Au,i)},function(t,e,i){var n,r,a,o;function s(t){var e=t.console,i=t.config,n=t.T,r=t.Rl,a=t.G,o=t.ec,s=t.Ed;t=t.splice,this.WY=this.AO=!1,this.console=e,this.config=i,this.Rl=r,this.T=n,this.G=a,this.ec=o,this.Ed=s,this.splice=t,this.RXb()}_esm(e),e.QPa=void 0,n=i(0),r=i(6),a=i(461),o=i(2),s.prototype.xa=function(t){if(this.AO)throw Error("Cannot call init() after cleanup");if(this.WY)throw Error("Cannot call init() twice");this.WY=!0,this.Ndb=t,this.T.Sv.addListener("onHeaderFragments",this.N_a),this.Zna()&&this.wya()},s.prototype.normalize=function(){if(this.AO)throw Error("Cannot call normalize() after cleanup");if(this.WY)throw Error("Cannot call init() / normalize() twice");return this.WY=!0,o.assert(this.Zna()),this.wya()},s.prototype.F9b=function(t,e){return o.assert(this.WY,"expected to be called init() before renormalize"),this.G=t,this.Ed=e,t=a.$Aa(this.config,this.Rl,this.Ed),this.Eca(),t},s.prototype.cd=function(){this.AO||(this.AO=!0,this.Ndb=void 0,this.T.Sv.removeListener("onHeaderFragments",this.N_a))},s.prototype.RXb=function(){var t=this;this.N_a=function(){t.AO||t.Zna()&&t.wya()}},s.prototype.wya=function(){var t,e,i;return this.AO?{hX:!1,LE:!1}:(e=this.X2b(),i=!1,this.G&&!this.G.Ml&&(i=this.Eca()),null!=(t=this.Ndb)&&t.call(this,e,i),this.cd(),{hX:e,LE:i})},s.prototype.Zna=function(){return this.Rl.every(function(t){return t.track.Yd})},s.prototype.X2b=function(){var t=n.__read(a.fdb(this.config,this.Rl,this.ec,this.Ed,this.splice),2),e=t[0];return t[1]||void 0===this.Rl.get(r.u.J)&&e},s.prototype.Eca=function(){var t,e;return o.assert(this.G),o.assert(!this.G.Ml),d=this.Rl.$_,void 0!==(t=a.hdb(this.config,d,this.G.kf))&&void 0!==d.Ed&&(d=d.Ed,e=this.config.DEa&&"lazy"===this.G.xe?a.mbb(this.console,this.G,this.Rl):[],this.G.normalize(t,d,e),!0)},e.QPa=s},function(t,e,i){var p,b,g,m,v,y,n,o,w,A,_,E,k,S,T,r,a,s,u;function I(t){return function(){return"[".concat(t,":padding]")}}function c(t,e,i,n,r,a){return(t=u.call(this,e,n,i,v.M.Ka,_.ai(E.default,t,"AsePadding"))||this).T=r,t.config=a,t.NL=new o.VL(t.console),t.vI=new o.VL(t.console),t.Ml=new _.nD,t.console.trace("AsePaddingBranch {".concat(e.id,"}: created")),t}_esm(e),e.VOa=e.kD=void 0,p=i(0),b=i(72),g=i(423),m=i(6),v=i(19),t=i(78),y=i(1102),n=i(36),o=i(189),w=i(2),A=i(419),_=i(8),E=p.__importDefault(i(3)),k=i(263),S=i(427),T=i(10),r=i(130),i=i(460),(s=a=e.kD||(e.kD={}))[s.qT=0]="CREATED",s[s.iT=1]="CANCELLED",u=i.eha,p.__extends(c,u),c.prototype.vKb=function(h){return p.__awaiter(this,void 0,void 0,function(){var e,i,n,r,a,o,s,u,c;return p.__generator(this,function(t){switch(t.label){case 0:return[4,this.s7b()];case 1:return i=t.ib(),e=i.sf,s=i.Wd,r=i.bitrate,i=i.St,n=A.d5.instance(),n=n.kVb(s,h.Ea(e),r,i),s=new v.M(n.duration),r=new v.M(n.oa),a=r.aa,o=n.profile,u=n.bitrate,c=n.channels,s=s.add(e),(u={H9a:!0,mediaType:m.u.P,mf:o,profile:o,aa:a,Mg:[{ee:0,data:n.xa}],oa:r,sf:e,T:this.T,bitrate:u,track:{mediaType:m.u.P,Wo:!1,oa:r,T:this.T,channels:c,sampleRate:48e3,profile:o,Pc:[],St:i,toString:I(m.u.P)}}).Ro=u.track.Ro=g.UL.prototype.Ro.bind(u.track),T.S&&this.console.trace("AsePaddingBranch {".concat(this.G.id,"}: audio queue"),u,s.ac()),u.track.Pc.push(u),(c=new y.Oga(n.xa,n.ya,u,a,e.Rg(a).fb,s.Rg(a).fb,new v.M(n.oa),_.ai(E.default,this.console,"[0]"),this,this.y5a.bind(this,a),h.W)).kj({start:-Math.ceil(e.Xk(r))}),this.vI.enqueue(c),this.vI.jP(),[2]}})})},c.prototype.BLb=function(){var d;return p.__awaiter(this,void 0,void 0,function(){var e,i,n,r,a,o,s,u,c,h,f,l;return p.__generator(this,function(t){switch(t.label){case 0:return[4,this.t7b()];case 1:return e=t.ib(),r=e.Qx,e=e.St,i=A.d5.instance(),n=null==(d=null==(d=null==(d=this.parent)?void 0:d.ab(m.u.J))?void 0:d.track.oa)?void 0:d.Bgb(),w.assert(n,"padding branches should always have a frameRate"),i=i.lVb(this.T.Wgc,n,r,e),n=new v.M(i.duration),r=i.profile,u=i.bitrate,h=i.width,f=i.height,l=i.ej,a=i.fj,o=i.oa.aa,s=new v.M(i.oa.fb,o),c=new k.IM(o,i.oa.fb),(u={H9a:!0,mediaType:m.u.J,mf:r,profile:r,aa:o,Mg:[{ee:0,data:i.xa}],oa:s,T:this.T,bitrate:u,track:{mediaType:m.u.J,Wo:!1,oa:s,frameRate:c,Lba:c,Vl:new S.Uka({w:h,Qr:f},{w:l,Qr:a}),T:this.T,profile:r,Pc:[],St:e,toString:I(m.u.J)}}).Ro=u.track.Ro=g.UL.prototype.Ro.bind(u.track),c=new b.ex(this.console,u,i.xa,["moov"],!0,{Dhb:!0,nza:!0}),h={oa:s},f=c.parse(h),w.assert(f.Ly,"Failed to parse padding fragment header"),w.assert(f.Mg,"Failed to get initialization segments from padding fragment header"),u.Mg=f.Mg,T.S&&this.console.trace("AsePaddingBranch {".concat(this.G.id,"}: video queue"),u),u.track.Pc.push(u),this.G.normalize(new v.M(this.Za,n.aa),n,[]),l=new y.Oga(i.xa,i.ya,u,o,this.Za,this.mb,new v.M(i.oa),_.ai(E.default,this.console,"[1]"),this,this.y5a.bind(this,o)),this.NL.enqueue(l),this.NL.jP(),this.Umb=new v.M(i.duration),[2,{duration:this.Umb}]}})})},Object.defineProperties(c.prototype,{Zv:{get(){return!0},configurable:!0}}),Object.defineProperties(c.prototype,{vj:{get(){return!0},configurable:!0}}),Object.defineProperties(c.prototype,{Zs:{get(){return 0},configurable:!0}}),Object.defineProperties(c.prototype,{yh:{get(){return this.Ml.rBa},configurable:!0},SS:{get(){return this.Ml.promise},configurable:!0},Gt:{get(){return!0},configurable:!0}}),Object.defineProperties(c.prototype,{aa:{get(){return this.G.kf.aa},configurable:!0},Za:{get(){return this.G.kf.fb},configurable:!0},mb:{get(){return this.G.Lg.fb},configurable:!0},Lj:{get(){return this.Dd.Rg(this.aa).fb},configurable:!0},Ht:{get(){return this.G.kf.add(this.Dd)},configurable:!0},eJ:{get(){return w.assert(!this.G.G.lq,"exit zone not supported for padding segments"),v.M.Ka},configurable:!0},WN:{get(){return!(!this.vI||!this.NL)&&(this.vI.It&&this.NL.It)},configurable:!0},OYa:{get(){return!(!this.vI&&!this.NL)},configurable:!0},Cq:{get(){return this.G.kf.add(this.Dd)},configurable:!0},sC:{get(){return this.G.Lg.add(this.Dd)},configurable:!0},sZ:{get(){return this.Mc},configurable:!0},Dd:{get(){return this.er},configurable:!0},Wbb:{get(){var t;return null!=(t=this.pWa)?t:this.G.Lg.Ea(this.G.kf)},configurable:!0},Oq:{get(){return v.M.Ka},configurable:!0}}),c.prototype.xa=function(){return p.__awaiter(this,void 0,void 0,function(){var e;return p.__generator(this,function(t){switch(t.label){case 0:u.prototype.xa.call(this),t.label=1;case 1:return t.Ih.push([1,5,,6]),this.console.trace("AsePaddingBranch {".concat(this.G.id,"}: init")),this.parent?[4,this.parent.SS]:[3,3];case 2:t.ib(),t.label=3;case 3:return this.pWa=this.G.Lg.Ea(this.G.kf),[4,this.y1a([m.u.P,m.u.J])];case 4:return t.ib(),this.Ml.resolve(),[3,6];case 5:if(e=t.ib(),this.Mf)return[3,6];throw e;case 6:return[2]}})})},c.prototype.update=function(t){this.Tp=t},c.prototype.ky=function(t){return p.__awaiter(this,void 0,void 0,function(){return p.__generator(this,function(){return this.console.trace("AsePaddingBranch {".concat(this.G.id,"}: getRequestIterator(").concat(t,")")),t===m.u.P?[2,this.vI.bta()]:[2,this.NL.bta()]})})},c.prototype.RE=function(){},c.prototype.reset=function(){},c.prototype.xd=function(t){u.prototype.xd.call(this,t=void 0===t?"other":t),this.Qc=a.iT,this.pWa=void 0,this.events.emit("branchDestroyed",{type:"branchDestroyed",reason:t}),this.events.removeAllListeners()},c.prototype.eQ=function(){return!0},c.prototype.ab=function(){},c.prototype.gaa=function(e){return[m.u.P,m.u.J].some(function(t){return t===e})},c.prototype.sm=function(){return[]},c.prototype.NP=function(t){var e;return null==(e=this.parent)?void 0:e.NP(t)},c.prototype.rY=function(){return[]},c.prototype.sJ=function(){},c.prototype.xh=function(){return this.Wbb.W},c.prototype.yB=function(){return{}},c.prototype.PP=function(){return this.G.Lg.W},c.prototype.hz=function(t,e,i,n){return p.__awaiter(this,void 0,void 0,function(){return p.__generator(this,function(t){switch(t.label){case 0:return[4,this.Ml.promise];case 1:return t.ib(),this.parent?[4,this.parent.SS]:[3,3];case 2:t.ib(),t.label=3;case 3:return[4,this.y1a(n)];case 4:return t.ib(),[2]}})})},c.prototype.y1a=function(n){return p.__awaiter(this,void 0,void 0,function(){var e,i;return p.__generator(this,function(t){switch(t.label){case 0:return(e=v.M.Ka,-1===n.indexOf(m.u.J))?[3,2]:(this.NL.clear(),[4,this.BLb()]);case 1:i=t.ib(),e=i.duration,t.label=2;case 2:return-1===n.indexOf(m.u.P)?[3,4]:(this.vI.clear(),this.console.trace("AsePaddingBranch {".concat(this.G.id,"}: video duration ").concat(e.ac())),[4,this.vKb(this.Umb)]);case 3:t.ib(),t.label=4;case 4:return[2]}})})},c.prototype.P7a=function(){},c.prototype.bm=function(){return[]},c.prototype.BE=function(t){var e;return!(null==(e=this.Mc)||!e.greaterThan(t)||null==(e=this.vd)||!e.lessThan(t))},c.prototype.dY=function(){return this.Wbb},c.prototype.Mfa=function(){return!1},c.prototype.toJSON=function(){var t;return{segment:this.G.id,viewableId:this.Tp.N,contentStartPts:null==(t=this.ec)?void 0:t.W,contentEndPts:null==(t=this.Ed)?void 0:t.W}},c.prototype.t7b=function(){var r,a;return p.__awaiter(this,void 0,void 0,function(){var e,i,n;return p.__generator(this,function(t){switch(t.label){case 0:return(e=null==(r=null==(r=this.parent)?void 0:r.ab(m.u.J))?void 0:r.ve.um)?[3,2]:[4,null==(r=null==(r=this.parent)?void 0:r.ab(m.u.J))?void 0:r.ve.tnb];case 1:if(t.ib(),this.Mf)return[2,Promise.reject()];t.label=2;case 2:return e=null==(a=null==(r=this.parent)?void 0:r.ab(m.u.J))?void 0:a.ve.um,w.assert(e,"Parent of padding branch must have last selected video stream"),i=null==(a=e.track.Vl)?void 0:a.Qx,n=e.track.St,[2,{Qx:i,St:n}]}})})},c.prototype.s7b=function(){var o,s;return p.__awaiter(this,void 0,void 0,function(){var e,i,n,r,a;return p.__generator(this,function(t){switch(t.label){case 0:return(e=null==(o=null==(o=this.parent)?void 0:o.ab(m.u.P))?void 0:o.ve.um)?[3,2]:[4,null==(o=null==(o=this.parent)?void 0:o.ab(m.u.P))?void 0:o.ve.tnb];case 1:if(t.ib(),this.Mf)return[2,Promise.reject()];t.label=2;case 2:return e=null==(s=null==(o=this.parent)?void 0:o.ab(m.u.P))?void 0:s.ve.um,w.assert(e,"Parent of padding branch must have last selected audio stream"),i=e.sf||v.M.Ka,n=-1!==e.profile.indexOf("heaac")?"heaac":"ddp",r=e.bitrate,a=e.track.St,[2,{sf:i,Wd:n,bitrate:r,St:a}]}})})},c.prototype.y5a=function(t){return this.er.Rg(t).fb},i=p.__decorate([r.kJ],c),e.VOa=i,n.Ve(t.Au,i)},function(t,e,i){var n,r,a,f,o,s,u,l;function c(t,e,i,n,r,a,o,s,u,c,h){return(t=l.call(this,i,{index:0,offset:0,fa:0,Za:r,mb:a,aa:n,Dv:!0,$o:!0,RC:h},c)||this).response=e,t.o5b=i,t.H=s,t.Va={$a:u,console:s,f_b:void 0,mediaType:i.mediaType,v0:function(){}},f.S&&t.H.log("AsePaddingRequest [".concat(t.mediaType,"], constructed ").concat(t.toString())+", ".concat(t.response.byteLength," bytes")+", ".concat(t.gy," samples")),t}_esm(e),e.Oga=void 0,n=i(0),r=i(35),a=i(8),t=i(36),f=i(10),o=i(186),s=i(78),u=i(106),l=i(74).yk,n.__extends(c,l),Object.defineProperties(c.prototype,{profile:{get(){return this.o5b.profile},configurable:!0}}),c.prototype.xa=function(){},c.prototype.Tr=function(){return!this.me},c.prototype.jE=function(t,e,i,n,r){return f.S&&this.H.log("AsePaddingRequest [".concat(this.mediaType,"], appending ").concat(this.toString())+", ".concat(r||this.response.byteLength," bytes")+", ".concat(r?"":"not ","edited")),this.me=e.appendBuffer(r?a.st(r):this.response,n||a.$v(this)),{status:this.me?u.Kh.Fs:u.Kh.Jf}},c.prototype.abort=function(){return!1},c.prototype.cd=function(){},c.prototype.CR=function(){this.response=void 0},c.prototype.toJSON=function(){return{viewableId:r.Xq,startPts:this.ea,endPts:this.ea+this.duration,"contentStartTicks:":this.Za,contentEndTicks:this.mb,contentStartPts:this.dd,contentEndPts:this.Ic}},Object.defineProperties(c.prototype,{Pa:{get(){return"".concat(r.Xq)},configurable:!0}}),c.prototype.toString=function(){return"[padding c:".concat(this.ec.W,"-").concat(this.Ed.W,",")+"p:".concat(this.vd.W,"-").concat(this.Mc.W,",")+"d:".concat(this.Ed.W-this.ec.W,"]")},e.Oga=i=c,t.Ve(o.IG,i,!1),t.Ve(s.Au,i),t.Ve(s.Dz,i)},function(t,e,i){var n;function r(t,e){this.H=t,this.Gg=e,this.sDa=!1}_esm(e),e.SSa=void 0,n=i(0),r.prototype.O9b=function(t){this.Sf(t.message,void 0,n.__assign(n.__assign({},t.U3a),{err:t.toString()}))},r.prototype.Sf=function(t,e,i){void 0===e&&(e=void 0),void 0===i&&(i={}),this.sDa||(i.temporaryFailure||(this.sDa=!0),t=n.__assign({type:"error",error:null!=e?e:"NFErr_MC_StreamingFailure",errormsg:t,temporaryFailure:!1},i),this.H.error("notifyStreamingError:",t),this.Gg.emit("error",t))},r.prototype.Zo=function(){return this.sDa},e.SSa=r},function(t,e,i){var n,r,a,o,s,u;function c(t){var e=u.call(this)||this;return e.qa=t,e.Nma={},e.bb=[],e.KU=new s.c5({gk:!1,currentTime:function(){return e.Fe?e.se:a.M.Uv},speed:1}),e}_esm(e),e.Jja=void 0,n=i(0),r=i(2),a=i(8),o=i(10),s=i(275),u=i(463).Wja,n.__extends(c,u),Object.defineProperties(c.prototype,{Da:{get(){return this.KU},configurable:!0},Di:{get(){throw Error("Can't get scheduler on placeholder player")},configurable:!0},rp:{get(){return this.LV},configurable:!0},vC:{get(){return this.Nma},configurable:!0}}),c.prototype.K7=function(t,e){var i=!this.qa;return i&&(this.qa=t,this.zla=null!=e&&e.Fe?e.se:void 0,this.LV=null==e?void 0:e.rp,this.Nma=(null==e?void 0:e.vC)||{},null!=e&&e.eR()),i},c.prototype.eR=function(){this.Nma=this.LV=void 0},c.prototype.xE=function(){this.bb=[],this.zla=void 0},c.prototype.cra=function(t){o.S&&r.assert(this.qa===t),this.qa=void 0,this.xE()},c.prototype.Kra=function(){for(var t,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];(t=this.bb).push.apply(t,n.__spreadArray([],n.__read(e),!1))},c.prototype.nJ=function(){return this.zla||u.prototype.nJ.call(this)},c.prototype.Yo=function(){return!1},c.prototype.nG=function(){},c.prototype.qL=function(){},c.prototype.Mda=function(){this.bb=this.bb.filter(function(t){return!t.WN||(t.xd("pruned"),!1)})},c.prototype.tb=function(){var e=this;u.prototype.tb.call(this),Object.keys(this.vC).map(function(t){return e.vC[t]}).forEach(function(t){null!=t&&t.close()})},e.Jja=c},function(t,e,i){var a,o;_esm(e),e.k_a=void 0,a=i(276),o=i(1107),e.k_a=function(){return function(r){var t,i,e,n;for(e in t={},i=a.map(r.kbb),r.NR)!function(e){t[e]=function(t){return i({rules:[{Wl:e,config:t}]})}}(e);for(e in t.Gya=i({rules:[],boa:!0}),t.$n=i({rules:[],$n:!0}),n={},r.NR)!function(e){n[e]=function(t){return i({rules:[{Wl:e,config:t}]},!0)}}(e);return n.Gya=i({rules:[],boa:!0},!0),n.$n=i({rules:[],$n:!0},!0),t.return=n,{Vqa:t,yBa:r,sAa:function(t,e,i,n){return o.v1a(t,e,i,r.NR,r.kbb,n)}}}}},function(t,e,i){!function(S,T){var I;I={},function(){var t,o,e,n,s,i,u,r,a,c,h;function f(i,n){return function(t,e){"function"!=typeof i[t]&&Object.defineProperty(i,t,{configurable:!0,writable:!0,value:e}),n&&n(t,e)}}function l(t,e,i){var n=h.get(t);if(m(n)){if(!i)return;n=new a,h.set(t,n)}if(m(t=n.get(e))){if(!i)return;t=new a,n.set(e,t)}return t}function d(t,e,i){return!m(e=l(e,i,!1))&&!!e.has(t)}function p(t,e,i){if(!m(e=l(e,i,!1)))return e.get(t)}function b(e,t){var i,n,r=[];if(m(e=l(e,t,!1)))return r;if(!A(t=_(e=e.keys(),s)))throw new TypeError;if(!v(e=t.call(e)))throw new TypeError;for(t=0;;){if(!(i=!(i=e.next()).done&&i))return r.length=t,r;i=i.value;try{r[t]=i}catch(t){try{(n=e.return)&&n.call(e)}finally{throw t}}t++}}function g(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function m(t){return void 0===t}function v(t){return"object"==typeof t?null!==t:"function"==typeof t}function y(t){return"symbol"==typeof(t=function(t,e){var i;switch(g(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}if(e=3===e?"string":5===e?"number":"default",void 0!==(i=_(t,n))){if(v(t=i.call(t,e)))throw new TypeError;return t}t:{if("string"===("default"===e?"number":e)){if(A(e=t.toString)&&!v(e=e.call(t)))break t;e=t.valueOf}else{if(A(e=t.valueOf)&&!v(e=e.call(t)))break t;e=t.toString}if(!A(e)||v(e=e.call(t)))throw new TypeError}return e}(t,3))?t:""+t}function w(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function A(t){return"function"==typeof t}function _(t,e){if(null!=(t=t[e])){if(A(t))return t;throw new TypeError}}function E(t){var e,i=Object.getPrototypeOf(t);return"function"!=typeof t||t===r||i!==r||null==(e=(e=t.prototype)&&Object.getPrototypeOf(e))||e===Object.prototype||"function"!=typeof(e=e.constructor)||e===t?i:e}function k(t){return t.Cwb=void 0,delete t.Cwb,t}t="object"==typeof T?T:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),e=f(I),void 0===t.Reflect?t.Reflect=I:e=f(t.Reflect,e),t=e,o=Object.prototype.hasOwnProperty,e="function"==typeof Symbol,n=e&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",s=e&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",e="function"==typeof Object.create,i={__proto__:[]}instanceof Array,u={create:e?function(){return k(Object.create(null))}:i?function(){return k({__proto__:null})}:function(){return k({})},has:(i=!e&&!i)?function(t,e){return o.call(t,e)}:function(t,e){return e in t},get:i?function(t,e){return o.call(t,e)?t[e]:void 0}:function(t,e){return t[e]}},r=Object.getPrototypeOf(Function),a=(e="object"==typeof S&&S.BX&&"true"===S.BX.REFLECT_METADATA_USE_MAP_POLYFILL)||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var n,i,t;function e(t){return t}function r(t,e){return e}function a(t,e){return[t,e]}function o(){this.xf=[],this.Vf=[],this.sx=n,this.Qu=-2}return n={},i=[],t=function(){function t(t,e,i){this.ze=0,this.xf=t,this.Vf=e,this.xBb=i}return t.prototype["@@iterator"]=function(){return this},t.prototype[s]=function(){return this},t.prototype.next=function(){var t,e=this.ze;return 0<=e&&e<this.xf.length?(t=this.xBb(this.xf[e],this.Vf[e]),e+1>=this.xf.length?(this.ze=-1,this.Vf=this.xf=i):this.ze++,{value:t,done:!1}):{value:void 0,done:!0}},t.prototype.throw=function(t){throw 0<=this.ze&&(this.ze=-1,this.Vf=this.xf=i),t},t.prototype.return=function(t){return 0<=this.ze&&(this.ze=-1,this.Vf=this.xf=i),{value:t,done:!0}},t}(),Object.defineProperty(o.prototype,"size",{get(){return this.xf.length},enumerable:!0,configurable:!0}),o.prototype.has=function(t){return 0<=this.mA(t,!1)},o.prototype.get=function(t){return 0<=(t=this.mA(t,!1))?this.Vf[t]:void 0},o.prototype.set=function(t,e){return t=this.mA(t,!0),this.Vf[t]=e,this},o.prototype.delete=function(t){var e,i=this.mA(t,!1);if(0<=i){for(e=this.xf.length,i+=1;i<e;i++)this.xf[i-1]=this.xf[i],this.Vf[i-1]=this.Vf[i];return this.xf.length--,this.Vf.length--,t===this.sx&&(this.sx=n,this.Qu=-2),!0}return!1},o.prototype.clear=function(){this.xf.length=0,this.Vf.length=0,this.sx=n,this.Qu=-2},o.prototype.keys=function(){return new t(this.xf,this.Vf,e)},o.prototype.values=function(){return new t(this.xf,this.Vf,r)},o.prototype.entries=function(){return new t(this.xf,this.Vf,a)},o.prototype["@@iterator"]=function(){return this.entries()},o.prototype[s]=function(){return this.entries()},o.prototype.mA=function(t,e){return this.sx!==t&&(this.Qu=this.xf.indexOf(this.sx=t)),this.Qu<0&&e&&(this.Qu=this.xf.length,this.xf.push(t),this.Vf.push(void 0)),this.Qu},o}():Map,c=e||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function t(){this.th=new a}return Object.defineProperty(t.prototype,"size",{get(){return this.th.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this.th.has(t)},t.prototype.add=function(t){return this.th.set(t,t),this},t.prototype.delete=function(t){return this.th.delete(t)},t.prototype.clear=function(){this.th.clear()},t.prototype.keys=function(){return this.th.keys()},t.prototype.values=function(){return this.th.values()},t.prototype.entries=function(){return this.th.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[s]=function(){return this.keys()},t}():Set,h=new(e||"function"!=typeof WeakMap?function(){var r,i;function t(){var t,e;do{(t="function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(16)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(16)):a(new Uint8Array(16),16):a(Array(16),16))[6]=79&t[6]|64,t[8]=191&t[8]|128;for(var i="",n=0;n<16;++n)4!==n&&6!==n&&8!==n||(i+="-"),(e=t[n])<16&&(i+="0"),i+=e.toString(16).toLowerCase()}while(u.has(r,t="@@WeakMap@@"+i));return r[t]=!0,t}function n(t,e){if(!o.call(t,i)){if(!e)return;Object.defineProperty(t,i,{value:u.create()})}return t[i]}function a(t,e){for(var i=0;i<e;++i)t[i]=255*Math.random()|0;return t}function e(){this.Wu=t()}return r=u.create(),i=t(),e.prototype.has=function(t){return void 0!==(t=n(t,!1))&&u.has(t,this.Wu)},e.prototype.get=function(t){return void 0!==(t=n(t,!1))?u.get(t,this.Wu):void 0},e.prototype.set=function(t,e){return n(t,!0)[this.Wu]=e,this},e.prototype.delete=function(t){return void 0!==(t=n(t,!1))&&delete t[this.Wu]},e.prototype.clear=function(){this.Wu=t()},e}():WeakMap),t("decorate",function(t,e,i,n){var r;if(m(i)){if(!w(t))throw new TypeError;if("function"!=typeof e)throw new TypeError;for(i=t.length-1;0<=i;--i)if(!m(n=(0,t[i])(e))&&null!==n){if("function"!=typeof n)throw new TypeError;e=n}return e}if(!w(t))throw new TypeError;if(!v(e))throw new TypeError;if(!v(n)&&!m(n)&&null!==n)throw new TypeError;null===n&&(n=void 0),i=y(i);for(var a=t.length-1;0<=a;--a)if(!m(r=(0,t[a])(e,i,n))&&null!==r){if(!v(r))throw new TypeError;n=r}return n}),t("metadata",function(n,r){return function(t,e){var i;if(!v(t))throw new TypeError;if(i=!m(e)){switch(g(e)){case 3:case 4:i=!0;break;default:i=!1}i=!i}if(i)throw new TypeError;l(t,e,!0).set(n,r)}}),t("defineMetadata",function(t,e,i,n){if(!v(i))throw new TypeError;l(i,n=m(n)?n:y(n),!0).set(t,e)}),t("hasMetadata",function(t,e,i){if(v(e))return function t(e,i,n){if(d(e,i,n))return!0;i=E(i);return null!==i&&t(e,i,n)}(t,e,i=m(i)?i:y(i));throw new TypeError}),t("hasOwnMetadata",function(t,e,i){if(v(e))return d(t,e,i=m(i)?i:y(i));throw new TypeError}),t("getMetadata",function(t,e,i){if(v(e))return function t(e,i,n){if(d(e,i,n))return p(e,i,n);i=E(i);if(null!==i)return t(e,i,n)}(t,e,i=m(i)?i:y(i));throw new TypeError}),t("getOwnMetadata",function(t,e,i){if(v(e))return p(t,e,i=m(i)?i:y(i));throw new TypeError}),t("getMetadataKeys",function(t,e){if(v(t))return function t(e,i){var n,r=b(e,i);e=E(e);if(null===e)return r;i=t(e,i);if(i.length<=0)return r;if(r.length<=0)return i;e=new c;for(var a=[],o=0;o<r.length;o++)n=r[o],e.has(n)||(e.add(n),a.push(n));for(r=0;r<i.length;r++)n=i[r],e.has(n)||(e.add(n),a.push(n));return a}(t,e=m(e)?e:y(e));throw new TypeError}),t("getOwnMetadataKeys",function(t,e){if(v(t))return b(t,e=m(e)?e:y(e));throw new TypeError}),t("deleteMetadata",function(t,e,i){var n;if(v(e))return m(i)||(i=y(i)),!(m(n=l(e,i,!1))||!n.delete(t))&&(0<n.size||((t=h.get(e)).delete(i),0<t.size||h.delete(e),!0));throw new TypeError})}()}.call(this,i(128),i(207))},function(t,e,i){var s,n,u,c,h;function l(t,e){if(t)return Object.getOwnPropertyDescriptor(t,e)?t:l(t.prototype,e)||l(t.__proto__,e)}function d(t,e){if(t=l(t,e))return Object.getOwnPropertyDescriptor(t,e)}function r(t,e){for(var i,n=Object.getPrototypeOf(t),r=[];n!==Object.prototype;)r=r.concat(Object.getOwnPropertyNames(n)),n=Object.getPrototypeOf(n);t=Object.keys(t).concat(r),e.__proxyCtor||(e.__proxyCtor=void 0),i=Object.getPrototypeOf(e),t.forEach(function(t){Object.getOwnPropertyDescriptor(e,t)||Object.getOwnPropertyDescriptor(i,t)||e[t]||Object.defineProperty(e,t,{get(){},configurable:!0,enumerable:!0})})}function p(t,n,r,e){for(var a,i=[],o=4;o<arguments.length;o++)i[o-4]=arguments[o];return(null!=(a=e())&&a.Xxa||null!=a&&a.Fb)&&(i=i.map(function(t,e){var i;return e=h.ccb(a.Xxa,null==(i=a.Fb)?void 0:i[e]),c.tea(n,t,r,e)})),i=t.call.apply(t,s.__spreadArray([void 0],s.__read(i),!1)),null!=a&&a.return?c.tea(n,i,r,a.return,u.cx.pEa):i}_esm(e),e.MRb=e.JMb=e.v1a=void 0,s=i(0),n=i(276),u=i(196),c=i(464),h=i(1108),e.v1a=function(o,s,u,c,t,e){var h,f;return void 0===e&&(e=[]),h={},f=n.O6a(t),r(s,o),e.forEach(function(t){return r(t,o)}),new Proxy(o,{get:function(t,e){var i,n,r,a;return"__proxyCtor"===e?null!=(i=o[e])?i:o.constructor:e in s?"function"==typeof(a=s[e])?a.bind(s):a:(i=h[e])||d(h,e)?i:(n=null!=(a=l(i=null!=(r=null==(n=null==t?void 0:t.constructor)?void 0:n.prototype)?r:t,e))?a:l(i.__proxyCtor,e),null!=(a=d(i,e))&&a.get?(a=a.get,n=f.bind(null,n,e),t=p.bind(t,a.bind(t),u,c,n),Object.defineProperty(h,e,{get:t,enumerable:!0,configurable:!0}),t()):"function"==typeof(a=t[e])?(n=f.bind(null,t,e),t=p.bind(t,a.bind(t),u,c,n),h[e]=t):a)},set(t,e,i){return e in s?s[e]=i:(t[e]=i,delete h[e]),!0}})},e.JMb=r,e.MRb=p},function(t,e,i){var n,r;_esm(e),e.ccb=void 0,n=i(0),r=i(22),e.ccb=function(t,e){var i;if(t||e)return i=null!=t&&t.rules&&null!=e&&e.rules?r.D7(t.rules,e.rules):(null==t?void 0:t.rules)||(null==e?void 0:e.rules),n.__assign(n.__assign(n.__assign({},t),e),{rules:i})}},function(t,e,i){var a;_esm(e),e.Cib=e.Wpa=e.v$=e.N9a=e.Q9a=e.n$a=e.r8a=e.i$a=e.Fe=void 0,a=i(0),e.Fe=function(t){return!(null==t||!t.position)},e.i$a=function(t){return!(null==t||!t.X||null==t||!t.offset)},e.r8a=function(t){return!(null==t||!t.X)||!(null==t||!t.segmentId)},e.n$a=function(t,e){return"string"==typeof t&&!(!e.yg.ba.O[t]&&!e.yc.ba.O[t])},e.Q9a=function(t){return!(null==t||!t.N||null==t||!t.bk)},e.N9a=function(t){return!(null==t||!t.Dd)},e.v$=function(t,e){var i=t;return e.forEach(function(t){i=null==i?void 0:i[t]}),i},e.Wpa=function t(e,i){var n=a.__assign({},e),r=a.__read(null!=i?i:[],1)[0];return r&&e[r]&&("object"==typeof(e=e[r])?((i=i.concat()).shift(),n[r]=t(e,i)):n[r]=e),n},e.Cib=function(t,e,i){for(var n=0;n<e.length-1&&t;n++)t=t[e[n]];return!!t&&(t[e[e.length-1]]=i,!0)}},function(t,e,i){var n,r;function a(t){this.ab=t}_esm(e),e.SPa=void 0,n=i(6),r=i(54),Object.defineProperties(a.prototype,{re:{get(){return"PipelineReporter"},configurable:!0},enabled:{get(){return!0},configurable:!0}}),a.prototype.al=function(t){var e,i;if((t=t.cj)===r.ke.up||t===r.ke.iq)return t={},e=this.ab(n.u.J),i=this.ab(n.u.P),e&&(t.videoPipelineSummary=this.skb(e)),i&&(t.audioPipelineSummary=this.skb(i)),t},a.prototype.skb=function(t){var e,i=t.Va.da;return{actualStartPlayerTimestamp:null==(e=i.vd)?void 0:e.W,actualPartialPlayerTimestamp:i.zeb,actualCompletePlayerTimestamp:null==(e=t.Ana)?void 0:e.W,segmentId:t.X,contentStartMs:null==(e=t.ec)?void 0:e.W,contentEndMs:null==(e=t.Ed)?void 0:e.W,streamingPlayerMs:t.PC.W,isStreamable:t.wF(),isNormalized:t.yh(),isDoneStreaming:t.Jt(),trackNeedsHeaderRequest:t.track.uca,completedRequests:i.D0a,activeRequests:t.Va.tj,unsentRequests:t.Va.uu,bytes:{current:i.fa,received:i.vgb,partial:i.Gj,completed:i.AE,unsent:i.sfc}}},e.SPa=a},function(t,e,i){var r,n,a,o,s;function u(t,e){var i=this;this.Sza=t,this.qa=e,this.dfb=new a.sH,e.events.on("branchesReevaluated",function(){i.dfb.push(t.size)})}_esm(e),e.GQa=void 0,r=i(0),n=i(10),a=i(8),o=i(54),s=i(465),Object.defineProperties(u.prototype,{re:{get(){return"playgraph-branch-audit"},configurable:!0},kw:{get(){return"paudit"},configurable:!0},enabled:{get(){return n.S},configurable:!0}}),u.prototype.al=function(t){var n;if((t=t.cj)===o.ke.iq||t===o.ke.up)return n={branchCountStats:this.dfb.toJSON(),decisions:this.qa.fh.toJSON(),player:this.qa.U.Pv?this.qa.U.bb.map(function(t){return t.G.id}):[]},this.Sza.forEach(function(t,e){var i=s.hta(t);n[e]=r.__assign({probabilities:t.bi.map(function(t){return{duration:t.duration,immediate:t.oF,seamless:t.Je}}),parent:null==(e=t.parent)?void 0:e.G.id,normalized:t.yh,hasViewable:t.Gt,headerRequested:t.Gt&&t.T.MY},i)}),n},e.GQa=u},function(t,e){function i(t,e,i){this.$d=t,this.H=e,this.events=i,this.MK=[]}_esm(e),e.BMa=void 0,i.prototype.mg=function(t){var e=this;this.MK.push(t),this.$d.n1a(function(){e.Clb(t,{FYb:!0})},t.r_a,t.xv)},i.prototype.s_b=function(t){var e=this,i={cj:t};this.MK.forEach(function(t){e.Clb(t,i)})},i.prototype.Clb=function(e,t){var i,n;try{n=(i=e.Pf(t)).event,i.jjb&&this.events.emit(e.xv,n)}catch(t){this.H.error("Error generating event for ".concat(e.xv),t)}},e.BMa=i},function(t,e,i){var b,s,u,l,a,g,h;function n(t,e,i,n,r){this.config=t,this.ncc=e,this.navigator=i,this.events=n,this.console=r,t=a.IP(this.config),this.gz=t.gz.bind(t),this.iL=t.iL.bind(t),this.XX=t.XX.bind(t),this.EY=t.EY.bind(t),this.rfb=[t.T_.bind(t),t.EK.bind(t)]}_esm(e),e.XJa=void 0,t=i(0),b=i(6),s=t.__importDefault(i(32)).default.OJ,u=t.__importDefault(i(155)),l=t.__importDefault(i(3)),a=i(192),g=i(22),h=i(2),n.prototype.qac=function(t,e,i,n,r,a,o,s){var u,c,h,f,l,d,p=[];return this.Aza(r.track,s)?(r.EZa&&this.Aza(r.EZa,s),s=(u=r.Pj).ve,c=r.X9,h=s.um,0===(f=a?a.un(r.track.Pc,t,i.Ea(r.$a.Dd),r.yh()):r.track.Pc).length&&null!=a&&a.GGb?{stream:void 0,a1:p,reason:"allStreamsFiltered"}:(h&&!h.track.equals(r.track)&&(h=this.NQb(h,f)),(a=(l=r.mediaType)===b.u.P)&&h&&!this.Sbc(s,h)?(this.config.Y7a&&this.gz(h.bitrate),{stream:h,a1:p}):(t=b.wda(t),e=this.iLb(t,e,n,r,!!o),n=this.rfb[l],o=a?this.EY():this.XX(),(r=u.bCa(e,f,o,n,r.f$a(),r.track.T.Kr,c))?(u={hf:r.hf,U_:r.U_},r.reason&&(d={reason:r.reason,$Ba:r.Tv,NB:r.NB,rq:r.rq,sq:r.sq},this.Bpa(l,f,i)),this.tOb(l,r,f),i=(h=f[r.Ke]).bitrate,a?this.config.Y7a&&this.gz(i):this.iL(i),s.Sib(h),{stream:h,a1:p=null!=(t=r.nB)&&t.length?r.nB.map(function(e){return g.Xc(f,function(t){return t.id===e})}).filter(g.Fca):p,bQ:d,HC:u,Ky:r.Ky}):{stream:h,a1:p,reason:"streamSelectionFailure"}))):{stream:h,a1:p,reason:"locationSelectionFailure"}},n.prototype.Dpa=function(t,e,i,n,r,a,o){var s,u,c;return b.tq(e)?a.wfb?a.e5b?(h.assert(a.deb),a.deb):(u=(s=a.Pj).ve,i=this.A5a(a,i),c=u.um,(u=i.Tk-i.tc)<this.config.Fj||void 0===c?{complete:!1,pE:u,reason:"preBuf"}:a.mediaType===b.u.P?{complete:!0,pE:u,reason:"audio"}:(t=t.R_a(a.mediaType))?{complete:!0,pE:u,reason:t}:(this.Aza(a.track),s.Yza([c],!1,b.wda(e),i,this.rfb[a.mediaType]),!(e=s.ZA(i,e,r,c,{ov:o})).complete&&n?{complete:!0,reason:"prebufferTimeLimit",pE:u}:(e.pE=u,e))):{complete:!1,reason:"unknown"}:{complete:!0,reason:"playing"}},n.prototype.tOb=function(t,e,i){this.events.emit("streamSelection",{type:"streamSelection",mediaType:t,result:e,streamList:i})},n.prototype.sOb=function(t,e,i,n){t={type:"maxVideoBitrateChanged",time:l.default.time.ia(),streaming:n,maxvb_old:t,maxvb:e,reason:i},this.events.emit(t.type,t)},n.prototype.NQb=function(e,t){var i=t[0];return t.filter(function(t){return t.Yv}).every(function(t){return t.bitrate<=e.bitrate&&(i=t)}),i},n.prototype.Sbc=function(t,e){return 0<this.config.sS.length||(!(t=t.qQ)||t!==e.location)},n.prototype.Aza=function(t,e){return t.T.Jl.N1(t.T.N,t.Pc,e)},n.prototype.A5a=function(t,e){for(var i,n,r,a=e.Ea(this.ncc),o=[],s=t,u=e,c=0,h=0,f=!0;s&&(i=s.q6a(a),f||s.vj);)0<i.da.length&&(u=i.da[0].vd,void 0===n&&(n=i.da[i.da.length-1].Mc,r=i.hda>=i.da.length?n:i.da[i.hda].vd),o=i.da.concat(o),c+=0<i.Gj?i.Gj:0,h+=i.lp),s=this.navigator.parent(s),f=!1;return{pt:l.default.oq()[t.mediaType],ea:Math.floor(u.W),tc:e.W,Fc:Math.floor(null!=(t=null==n?void 0:n.W)?t:e.W),Tk:Math.floor((r||e).W),Ag:o.reduce(function(t,e){return t+e.fa},0),Gj:c,lp:h,Z4a:o.length,da:o}},n.prototype.iLb=function(t,e,i,n,r){var a=this.A5a(n,e),o=n.mediaType===b.u.J?this.config.V1:this.config.fW,s=u.default.instance();return{state:t,Wr:t===b.za.Gc,ee:n.zm,playbackRate:i,buffer:a,oX:o,Lab:!1,bP:r,tj:null==s?void 0:s.tj,mediaType:n.mediaType,tc:e.W,Lt:!1,Tva:!1,Xda:0}},n.prototype.Bpa=function(t,e,i){var n,r;if(t===b.u.J){t="manifest";for(var a=0,o=e.length-1;0<=o;--o){if(r=(n=e[o]).bitrate,s(n)){a=Math.max(a,r);break}this.config.j1&&!n.Ev?t="bc":n.Ur?n.HB&&(t="hf"):t="av"}this.Nbb!==a&&(this.sOb(this.Nbb,a,t,i),this.Nbb=a)}},e.XJa=i=n},function(t,e,i){var E,k,r,S;function l(t,e,i,n,r){var a,o,s,u,c,h,f,l,d,p,b,g=t.console,m=t.tfc,v=t.fh,y=t.f$b,w=t.ANb,A=t.fya,_=t.Noa;if(t=t.b5b,u=(s=r||{complete:!0,Oq:0}).root,c=s.complete,h=s.BCb,f=s.mhb,s=s.Oq,l=(f=void 0===f?0:f)<y.length&&y[f]===e.id,d=f<y.length?y[f]:n&&v.get(n.id),p=((v=(p=r&&n&&d!==e.id?void 0!==d?{Je:0}:n.qGb(e.id):{Je:1}).Je)+(b=void 0===(p=p.oF)?0:p))*(null!=(a=null==r?void 0:r.z7b)?a:1),S&&g.trace("reevaluateBranches: visiting ".concat(e.id,", ")+"distance: ".concat(i,", ")+"probability: ".concat(p,", ")+"predecessor: ".concat(null==n?void 0:n.id,", ")+"decision: ".concat(d,", ")+"predecessorComplete: ".concat(c,", ")+"isOnRequiredPath: ".concat(l,", ")+"requiredPathIndex: ".concat(f,", ")+"activeDistance: ".concat(h,", ")+"seamless ".concat(v,", ")+"immediate ".concat(b,", ")+"predecessor sum of: successor weights=".concat(null==n?void 0:n.zDa,", ")+"immediate weights= ".concat(null==n?void 0:n.ofa)),d=0===(a=null!=(m=null==(d=m[e.id])?void 0:d.shift())?m:e.duration.W),!l){if(0===p)return{fga:!1,u7:!0};if(!c&&0===b&&_<s)return t.PE=Math.min(t.PE||1/0,s-_),{fga:!1,u7:!0};if(!d&&w<=i&&p<1||!1===u&&p<A)return{fga:!1,u7:!0}}return f<y.length&&E.assert(y[f]===e.id,""),r=null!=(m=null==r?void 0:r.bi)?m:[],n&&v<1&&(r=0===b?r.concat([{Je:v}]):(m=(null==(_=null==(o=n.G.lq)?void 0:o[0])?void 0:_[0])||0,o=Math.max(0,n.duration.W-m),S&&g.trace("reevaluateBranches: immediate: ".concat(n.duration.W,", ").concat(m,", ").concat(o)),r.concat([{Je:v,oF:b,duration:o}]))),o=k.C7(t.kea,function(t){return t.G===n}),t.kea.push({G:e,tw:t.kea[o],bi:r}),i=c?i+e.duration.W:h,S&&g.trace("reevaluateBranches: added ".concat(e.id,", visiting successors, ")+"active distance: ".concat(i," ")+"probabilities: ".concat(JSON.stringify(r))),{fga:!0,u7:l,state:{root:!n,complete:d,z7b:p,bi:r,BCb:i,mhb:f+1,Oq:s+a}}}_esm(e),e.Gec=e.bhc=e.$da=void 0,E=i(2),t=i(10),k=i(22),r=i(467),S=t.S&&!1,e.$da=function(t,e,i,n,r,a,o,s,u){var c,h={kea:[]},f=(null==(f=i.Lg)?void 0:f.Ea(i.kf).W)||0;return 0<a.length&&E.assert(i.id===a[0],"First segment of required path (if it exists) must equal reevaluateBranches start segment."),S&&t.trace("reevaluateBranches: starting at ".concat(i.id," ")+"requiredPath: ".concat(JSON.stringify(a))),c={console:t,tfc:n,fh:r,f$b:a,ANb:o.W+f,fya:s,Noa:u.W,b5b:h},e.ahc(i,function(t,e,i,n){return l(c,t,e,i,n)}),h},e.bhc=l,e.Gec=function(t,e){var i,n=new r.Pka;t.forEach(function(t){e("starting tree"),n.add(t,t.tw)}),i=r.zfb(n,function(t){return"".concat(t.G.id)}),e("requiredBranches ".concat(t.length),i.replace(/\n/g,"<>")),e("requiredBranches ".concat(t.length),t.map(function(t){return"".concat(t.G.id,"::").concat(null==(t=t.tw)?void 0:t.G.id)}).reduce(function(t,e){return"".concat(t,", ").concat(e)}))}},function(t,e,i){var n,r;function a(t){this.ba=t,this.O={}}_esm(e),e.QQa=void 0,n=i(0),r=i(462),a.prototype.q8a=function(t){return!!this.ba.O[t]},a.prototype.Ee=function(t){var e=this.O[t];if(void 0===e){if(void 0===(e=this.ba.O[t]))throw Error("Segment not found (".concat(t,")"));e=new r.VQa(t,e,this.ba.xe),this.O[t]=e}return e},a.prototype.XSb=function(t){var e=this;return t.G.next?Object.keys(t.G.next).map(function(t){return e.Ee(t)}):[]},a.prototype.J$a=function(e){var i;return n.__generator(this,function(t){switch(t.label){case 0:return[4,e];case 1:t.ib(),i=e,t.label=2;case 2:return i.G.Rb?[4,i=this.Ee(i.G.Rb)]:[3,4];case 3:return t.ib(),[3,2];case 4:return[2]}})},a.prototype.tWb=function(t,e){return r.W9a(t.QP(e))},a.prototype.Rj=function(i){var n=this;Object.keys(i).forEach(function(t){var e;return null==(e=n.Ee(t))?void 0:e.Rj(i[t])})},e.QQa=a},function(t,e,i){var h,f,n;_esm(e),e.u_a=e.O0a=void 0,h=i(0),f=i(22),n=i(1117),e.O0a=function(i){return new n.wIa(function(e){return Object.keys(e.G.next||{}).map(function(t){return{Mgc:t=i.Ee(t),weight:null!=(t=null==(t=e.Lg)?void 0:t.Ea(e.kf).W)?t:1/0}})})},e.u_a=function(s,u){var e=Object.keys(s.O),c=Object.keys(u.O),t=c.filter(function(t){return-1===e.indexOf(t)}),i=e.filter(function(t){return-1===c.indexOf(t)}),n=e.filter(function(t){var i,n,e,r,a,o=-1!==c.indexOf(t)&&(o=s.O[t],t=u.O[t],!(o.Rb===t.Rb&&o.wa===t.wa&&o.va===t.va&&o.xe===t.xe&&o.N===t.N&&(r=null!=(r=o.lq)?r:[],a=null!=(e=t.lq)?e:[],!r.some(function(t,e){return 0!==f.cv(t,null!=(t=a[e])?t:[]).length})&&r.length===a.length)&&(i=null!=(e=o.next)?e:{},n=null!=(r=t.next)?r:{},!(e=Object.keys(i)).some(function(t){var e;return(null==(e=i[t])?void 0:e.xe)!==(null==(e=n[t])?void 0:e.xe)||(null==(e=i[t])?void 0:e.weight)!==(null==(e=n[t])?void 0:e.weight)})&&(t=Object.keys(n),0===h.__spreadArray(h.__spreadArray([],h.__read(f.cv(e,t)),!1),h.__read(f.cv(t,e)),!1).length))));return o});return{vDb:t,ER:i,$Gb:n,nfc:f.cv(e,h.__spreadArray(h.__spreadArray(h.__spreadArray([],h.__read(n),!1),h.__read(t),!1),h.__read(i),!1))}}},function(t,e,i){var n,r,a;function o(t){this.hOb=t,this.SEa=!1,this.gga=new a.qRa}_esm(e),e.wIa=void 0,n=i(2),r=i(265),a=i(1118),o.prototype.ahc=function(t,o){var s,u;u=(s=this).hOb,n.assert(!this.SEa),this.SEa=!0,this.gga.clear();for(var c=new r.s4([{node:t,x7:{UI:0,state:{root:!1,complete:!0,mhb:0,Oq:0}}}],function(t,e){return t.x7.UI-e.x7.UI}),h=this;!c.empty;)!function(){var i,n,r=(t=c.pop()).node,t=(e=t.x7).tw,a=e.UI,e=e.state;h.gga.has(r)||(t=o(r,a,t,e),i=t.fga,n=t.state,t.u7||h.gga.add(r),u(r).forEach(function(t){var e=t.Mgc;s.gga.has(e)||(t=a+t.weight,i&&c.push({node:e,x7:{UI:t,tw:r,state:n}}))}))}();this.SEa=!1},e.wIa=o},function(t,e){var i,n,r;function a(t){return void 0!==(null==t?void 0:t.pUa)}function o(t){return(a(t)?t:Object.defineProperties(t,{pUa:{value:{}}})).pUa}function s(){this.Iea=0,this.id=r=(r+1)%n}_esm(e),e.qRa=void 0,n=null!=(i=Number.MAX_SAFE_INTEGER)?i:1e9,r=Date.now()%n,s.prototype.add=function(t){return o(t)[this.id]=this.Iea,this},s.prototype.has=function(t){return a(t)&&o(t)[this.id]===this.Iea},s.prototype.delete=function(t){return!!this.has(t)&&!(o(t)[this.id]=void 0)},s.prototype.clear=function(){return this.Iea=(this.Iea+1)%n,this},e.qRa=s},function(t,e,i){var n,l,d,r;function a(t){return{value:t.$a,parent:t.tw}}function o(){this.bb=new n.VNa,this.Mq=new r.Pka}_esm(e),e.HQa=void 0,n=i(8),l=i(22),d=i(2),r=i(467),Object.defineProperties(o.prototype,{empty:{get(){return this.bb.empty},configurable:!0},size:{get(){return this.bb.size},configurable:!0}}),o.prototype.reset=function(){var t=this.bb.values();this.bb.clear(),this.Mq.clear(),t.forEach(function(t){return t.xd()})},o.prototype.hy=function(t){return this.bb.get(t)},o.prototype.has=function(t){return this.bb.has(t)},o.prototype.root=function(){return this.Mq.root},o.prototype.contains=function(t){var e=t.G.id;if(this.has(e))return-1!==this.hy(e).indexOf(t)},o.prototype.gJ=function(t){this.Mq.gJ(t)},o.prototype.kEb=function(){var e=[];return this.Mq.gJ(function(t){return e.push(t),!0}),e},o.prototype.yY=function(t){return this.Mq.parent(t)},o.prototype.HSb=function(t){return this.Mq.children(t)},o.prototype.Jua=function(t){return this.Mq.Jua(t)},o.prototype.bea=function(t){var e;this.bb.delete(t.G.id,t)&&(e=this.Mq.children(t),this.Mq.root===t?0===e.length?this.Mq.clear():(d.assert(1===e.length,"cannot remove the root branch with multiple successors"),this.Mq.J9b(e[0])):(d.assert(0===e.length,"cannot remove non-root branch with successors"),this.Mq.remove(t)))},o.prototype.forEach=function(i){var n=this;this.bb.forEach(function(t,e){return i(t,e,n)})},o.prototype.reduce=function(n,t){var r=this;return this.bb.reduce(function(t,e,i){return n(t,e,i,r)},t)},o.prototype.map=function(i){var n=this;return this.bb.map(function(t,e){return i(t,e,n)})},o.prototype.filter=function(i){var n=this;return this.bb.filter(function(t,e){return i(t,e,n)})},o.prototype.FVb=function(){var n={};return this.forEach(function(t,e){var i;(t=t.Oq)&&(null!=(i=n[e])?i:n[e]=[]).push(t.W)}),n},o.prototype.zfc=function(t,e){var i,n=this;return t=(e=this.U0b(t,e)).Al,e=(i=this.Mq.z8b(e.target.map(a))).ER,i=i.$gb,t.forEach(function(t){return t.xa()}),e.forEach(function(t){return n.bb.delete(t.G.id,t)}),{ER:e,$gb:i.map(function(t){return t.value})}},o.prototype.U0b=function(t,s){var u,c,h,f;return u=this,c=[],h=[],f=new Map,{target:t.reduce(function(t,e,i){var n,r,a,o;return d.assert(0===i||e.tw),e.tw&&!(n=f.get(e.tw))?h.push(e):((r=null!=(r=l.Xc(u.hy(e.G.id),function(t){return u.Mq.parent(t)===n||0===i}))?r:(o=n,(a=s((a=e).G.id,o))&&(c.push(a),u.bb.set(a.G.id,a)),a))&&f.set(e,r),r.bi=e.bi,t.push({$a:r,tw:n}),null!=r&&r.Gt&&r.update(e.G)),t},[]),Al:c}},e.HQa=o},function(t,e,i){var n,l,d,u,p,b,c,g;function r(t,e,i,n,r,a,o){var s;void 0===o&&(o=500),(s=this).H=t,this.config=e,this.bc=i,this.events=n,this.Nra=r,this.$d=a,this.QFb=o,this.fAa=this.km=0,this.aca=[],this.pP={ov:0},this.state=new u.Ls(d.Nc.Uj),this.hf=new u.Ls(d.za.Dg),this.gi=new c.Lu({cp:10,Mn:this,source:"BufferStateTracker",Wna:function(){return{isBuffering:s.Gf,alwaysRunUnderflowTimer:s.config.XN}}})}_esm(e),e.RGa=void 0,n=i(0),l=n.__importDefault(i(3)),d=i(6),u=i(8),p=i(19),b=i(2),c=i(65),g=i(64),Object.defineProperties(r.prototype,{ov:{get(){return this.pP.ov},configurable:!0},Gf:{get(){return d.tq(this.state.value)},configurable:!0}}),r.prototype.Ufa=function(t){var e=this;(t=Array.isArray(t)?t:[t]).forEach(function(t){t.mediaType===d.u.P&&(e.f_a=n.__assign(n.__assign({},e.f_a),{audio:{trackId:t.trackId,trackIndex:t.UC}}))})},r.prototype.Uca=function(t){this.set(d.Nc.Uj),this.nL(t,d.Nc.ed)},r.prototype.Mca=function(){this.pP.ov++},r.prototype.u_=function(t){this.config.XN||void 0===this.TB&&this.Gf&&this.Cqa(),this.TB={qy:t.httpCode,qg:t.errorCode,zi:t.nativeCode}},r.prototype.Wca=function(){this.TB=void 0,this.config.XN||this.W8()},r.prototype.mk=function(t){this.Gf||(this.nL(t,d.Nc.eg),this.Gf&&(this.TB||this.config.XN)&&this.Cqa())},r.prototype.I4b=function(t,e){this.state.value!==d.Nc.ed&&this.nL(t,d.Nc.uU),this.Ufa(e)},r.prototype.d4b=function(t,e){var i=this;this.config.PFb&&this.Gf&&(-1===this.aca.indexOf(t)&&this.aca.push(t),2===this.aca.length&&Promise.resolve().then(function(){i.Gf&&void 0!==i.jz&&i.cf("memoryLimit",e.AS,e.BS)}))},r.prototype.Mac=function(t,e){b.assert(this.state.value===d.Nc.ed&&void 0===this.jz),this.jz=t,e&&(this.events.emit("initialAudioTrack",{type:"initialAudioTrack",trackId:e.trackId,trackIndex:e.UC}),this.Ufa(e))},r.prototype.$ac=function(t,e,i){b.assert(this.Gf),this.Cva=null!=t?t:this.Cva,this.XY=null!=e?e:this.XY,void 0===this.bQ?this.bQ=i:void 0!==(null==i?void 0:i.reason)&&(this.bQ.reason=i.reason)},r.prototype.cf=function(t,e,i){b.assert(this.Gf&&void 0!==this.jz&&void 0===this.yI&&void 0===this.aga&&void 0===this.h7),this.yI=t,this.aga=e,this.h7=i,this.Dr=100,this.Rpa(),this.W8(),null!=(t=this.Fpa)&&t.tb(),this.state.value===d.Nc.eg&&(this.fAa=l.default.time.ia()),this.i9(),this.set(d.Nc.Vj),this.h7=this.aga=this.yI=this.bQ=this.XY=this.Cva=this.jz=void 0},r.prototype.stop=function(){var t;this.set(d.Nc.Uj),this.Rpa(),this.W8(),null!=(t=this.Fpa)&&t.tb()},r.prototype.Epa=function(e,i,t,n){var r,a,o,s,u,c,h,f=this;b.assert(this.Gf),null!=(r=this.Fpa)&&r.tb(),this.state.value===d.Nc.eg&&l.default.time.ia()<this.fAa+this.config.eya?(a=this.config.eya-(l.default.time.ia()-this.fAa),this.Fpa=this.$d.GO(g.Oh.GG(p.M.Ja(a)),function(){f.Epa(e,i,t,n)})):(r=t.sJ(d.u.P),o=t.sJ(d.u.J),s=l.default.time.ia()-this.km,(r||o)&&(c=(u=function(t){return t?t.wF()||t.Jt()?n.Dpa(f.state.value,e,s>=f.config.uC,i,t,f.ov):{complete:!1,reason:"selecteeNotStreamable"}:{complete:!0,reason:"noSelectee"}})(r),u=u(o),this.gi.av({as:(h=function(t){return{reason:t.reason,complete:t.complete,bl:null!=(t=t.pE)?t:0}})(c),vs:h(u),bt:s}),(h=o?u:c).Pgc=o&&u.pE||0,h.JEb=r&&c.pE||0,c.complete&&u.complete?(h.complete=!0,this.cf(null!=(a=h.reason)?a:"unknown",null!=(o=h.Pgc)?o:0,null!=(r=h.JEb)?r:0)):(h.complete=!1,this.iGb(h),this.gi.av({bp:this.Dr}))))},r.prototype.iGb=function(t){var e,i=t.progress;i=t.EF?(l.default.time.ia()-this.km)/this.config.uC:i||(null!=(e=t.pE)?e:0)/this.config.Fj,(t=Math.min(Math.max(Math.round(100*i),null!=(e=this.Dr)?e:0),99))!=this.Dr&&(this.Dr=t)},r.prototype.nL=function(t,e){b.assert(e===d.Nc.ed||void 0!==t),this.jz=t,this.Dr=0,this.Hca=void 0,this.pP.ov=0,this.aca=[],t=this.state.value===d.Nc.ed||this.state.value===d.Nc.eg,this.km=l.default.time.ia(),this.set(e),t||(this.rOb(),this.ybc())},r.prototype.set=function(t){switch(this.state.set(t),t){case d.Nc.Uj:this.hf.set(d.za.Uj);break;case d.Nc.ed:case d.Nc.uU:this.hf.set(d.za.ed);break;case d.Nc.eg:this.hf.set(d.za.eg);break;case d.Nc.Vj:this.hf.set(d.za.Gc)}},r.prototype.rOb=function(){b.assert(this.events&&void 0!==this.Dr),this.Hca=this.Dr,this.events.emit("bufferingStarted",{type:"bufferingStarted",time:l.default.time.ia(),percentage:this.Dr})},r.prototype.ybc=function(){var t=this;this.Rpa(),this.Y2b=this.$d.n1a(function(){return t.qOb()},p.M.Ja(this.QFb),"buffering-notification")},r.prototype.Rpa=function(){var t;null!=(t=this.Y2b)&&t.tb()},r.prototype.qOb=function(){this.Gf&&this.events&&void 0!==this.Dr&&this.Dr!==this.Hca&&this.events.emit("buffering",{type:"buffering",time:l.default.time.ia(),percentage:this.Dr})&&(this.Hca=this.Dr)},r.prototype.i9=function(){var t;b.assert(this.events&&this.jz&&void 0!==this.yI&&void 0!==this.h7&&void 0!==this.aga),this.Hca=this.Dr,this.events.emit("bufferingComplete",n.__assign({type:"bufferingComplete",time:l.default.time.ia(),actualStartPosition:this.jz,reason:this.yI,aBufferLevelMs:this.h7,vBufferLevelMs:this.aga,selector:this.Cva,initBitrate:this.XY,initSelReason:null==(t=this.bQ)?void 0:t.reason,skipbackBufferSizeBytes:this.xsc},this.f_a))},r.prototype.Cqa=function(){var t=this;this.config.ymb&&(!this.YC||this.YC.state!==g.lo.complete&&this.YC.state!==g.lo.TO?void 0===this.YC&&(this.YC=this.$d.iB(function(){return t.Plb()},"underflow")):this.YC.ij())},r.prototype.W8=function(){this.YC&&(this.YC.state!==g.lo.TO&&this.YC.tb(),this.YC=void 0)},r.prototype.Plb=function(){var e,i;return n.__generator(this,function(t){switch(t.label){case 0:return e=this.config.Iba,this.H.trace("BufferingStateTracker: starting underflow timer: ".concat(e,"ms")),[4,g.Oh.GG(p.M.Ja(e))];case 1:t.ib(),t.label=2;case 2:return this.Gf?(i=this.bc.b_b||0,i=l.default.time.ia()-i,e<=i?(this.H.trace("Forcing streaming failure, ".concat(i,"ms since data received")),this.Nra.J4b(this.TB),[2]):(this.H.trace("BufferingStateTracker: network activity, wait ".concat(e-i,"ms")),[4,g.Oh.GG(p.M.Ja(e-i))])):[3,4];case 3:return t.ib(),[3,2];case 4:return[2]}})},n.__decorate([c.nb({methodName:"onTemporaryNetworkError",Dl:!0})],r.prototype,"u_",null),n.__decorate([c.nb({methodName:"onUnderflow",Dl:!0})],r.prototype,"mk",null),n.__decorate([c.nb({methodName:"bufferingComplete",Dl:!0})],r.prototype,"cf",null),n.__decorate([c.nb({methodName:"stop",Dl:!0})],r.prototype,"stop",null),n.__decorate([c.nb({methodName:"checkStreamingBufferingComplete",Dl:!0})],r.prototype,"Epa",null),n.__decorate([c.nb({methodName:"createUnderflowTask",Dl:!0})],r.prototype,"Cqa",null),n.__decorate([c.nb({methodName:"destroyUnderflowTask",Dl:!0})],r.prototype,"W8",null),n.__decorate([c.nb({methodName:"onUnderflowTimeout",Dl:!0})],r.prototype,"Plb",null),e.RGa=r},function(t,e,i){var u;_esm(e),e.Tra=void 0,u=i(22),e.Tra=function(t,n,r,a,o){var s=[];return t=t.kEb().filter(function(t){return t.Gt}).map(function(t){var e=n(t.T,r,a,o),i=u.cv(e,t.we).map(function(t){return t.mediaType});return s=u.D7(s,i),{$a:t,we:e}}),{L_a:s,GFb:t}}},function(t,e,i){var n,r,a;function o(){}_esm(e),e.jSa=void 0,n=i(0),r=i(19),a=i(2),e.jSa=(o.NVb=function(t){var e,i;if(t.yh)return t=(i=n.__read(t.we,2))[0],i=i[1],t.ub||null!=i&&i.ub?{inb:r.M.Uv,jnb:r.M.Uv}:(t=null==(e=t.Lq)?void 0:e.Lg,e=null==(i=null==i?void 0:i.Lq)?void 0:i.Lg,a.assert(t),{inb:t,jnb:i=e?r.M.min(t,e):t})},o)},function(t,e,i){var o,s,n,u,r,c;function a(t,e,i,n,r,a){this.$d=t,this.Bs=e,this.config=i,this.T3b=n,this.Cf=r,this.console=a,this.Ola=new o.Kf,this.console=s.ai(c.default,a,"BranchDecisionMaker")}_esm(e),e.IGa=void 0,t=i(0),o=i(12),s=i(8),n=i(64),u=i(10),r=i(6),c=t.__importDefault(i(3)),a.vSb=function(t){var e;return null!=(e=t.Mc)?e:t.sC},a.oTb=function(t){var e=t.G,i=t.XQ;return e.Rb||(i.length?i:t.lC)[0]},a.prototype.XDa=function(t,e){var i,n,r=this,a=t.G;u.S&&this.console.trace("tracking ".concat(t.G.id)),this.reset(),a.Hw||a.lC.length<=1&&(null==(i=a.$y)||!i.length)?u.S&&this.console.trace("".concat(t.G.id," does not need tracking")):(i=(n=this.jGb(t)).PBa,e=e.lessThan(n.yXb),u.S&&this.console.trace("tracking ".concat(t.G.id),{X:a.id,xoc:e,gsc:null==i?void 0:i.W}),this.Y$b(a,e?i:void 0),e&&this.Ola.on(t.events,"branchEdited",function(){r.XDa(t,r.$d.Da.currentTime)}))},a.prototype.b0a=function(){var t;null!=(t=this.c2a)&&t.tb(),this.c2a=void 0},a.prototype.reset=function(){this.b0a(),this.Ola.clear()},a.prototype.jGb=function(t){var e,i;return t=a.vSb(t),e=s.M.Ja(this.config.LF),i=s.M.Ja(this.config.k2b+this.config.a_),e=t.Ea(e),{yXb:r.tq(this.Cf.value)?t.Ea(i):e,PBa:e}},a.prototype.Y$b=function(t,e){var i=this;this.b0a(),this.c2a=e?this.$d.GO(n.Oh.Rw(e),function(){return i.Vab(t)},"scheduled branch decision"):this.Bs.GO(n.Oh.ghc,function(){return i.Vab(t)},"immediate branch decision")},a.prototype.Vab=function(t){var e;this.Ola.clear(),e=a.oTb(t),u.S&&this.console.trace("BranchDecisionMaker making decision for ".concat(t.id,", decision is ").concat(e)),this.T3b(t.id,e,!0)},e.IGa=i=a},function(t,e,i){var r;_esm(e),e.x5a=void 0,r=i(1125),e.x5a=function(t,n){return t.reduce(function(e,t){var i=n(t);return t.sm().forEach(function(t){return e.Kna(t.mediaType,t.Zs,!i)}),e},new r.PQa)}},function(t,e,i){var n;function r(){this.tt=new n.aU,this.iX=new n.aU}_esm(e),e.PQa=void 0,n=i(458),Object.defineProperties(r.prototype,{total:{get(){var t=new n.aU;return t.add(this.tt),t.add(this.iX),t},configurable:!0}}),r.prototype.add=function(t){this.tt.add(t.tt),this.iX.add(t.iX)},r.prototype.Kna=function(t,e,i){(i?this.iX:this.tt).Kna(t,e)},e.PQa=r},function(t,e){_esm(e),e.I7a=void 0,e.I7a=function(t,i){return t.reduce(function(t,e){return t+e.dY(i).W},0)}},function(t,e,i){var o,s;_esm(e),e.f1a=void 0,o=i(0),s=i(6),e.f1a=function(t){var e,i;function n(t){s.tq(t.newValue)&&!s.tq(t.oldValue)?(null!=i&&i.tb(),i=e.GO.apply(e,o.__spreadArray([],o.__read(r),!1))):null!=i&&i.tb()}for(var r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];a=t.Df,e=t.Bs,a.state.addListener(n),n({oldValue:s.Nc.Uj,newValue:a.state.value})}},function(t,e,i){var s,u;function c(e,i){return Object.keys(e.YF).map(function(t){return e.YF[t]}).filter(function(t){return void 0===t.yJ||1===t.yJ}).reduce(function(t,e){return t+e.tt[i]},0)}function n(t,e,i){this.ba=t,this.console=e,this.xta=i}_esm(e),e.RSa=void 0,s=i(6),u=i(10),n.prototype.HGb=function(t,e,i){var n,r=i&&this.ba.config.vgc,a=this.ba.config.Vfa||r,o=this.xta();return r&&(r=t.global,(n={})[s.u.P]=r[s.u.P]-c(t,s.u.P),n[s.u.J]=r[s.u.J]-c(t,s.u.J),n[s.u.Ob]=r[s.u.Ob]-c(t,s.u.Ob),r=n),n=r,o=this.R_a(e)||this.pHb(t)||this.nHb(t,o,n)||this.oHb(t,o,n,e),n=s.HAa(o),!o||n&&!a?(u.S&&this.console.log("canIssueRequest ".concat(this.ba.id," [").concat(e,"] static limit: ")+"".concat(i,", usage: ").concat(JSON.stringify(t),", success ").concat(o)),{result:!0,reason:o}):(u.S&&this.console.log("canIssueRequest ".concat(this.ba.id," [").concat(e,"] static limit: ")+"".concat(i,", usage: ").concat(JSON.stringify(t),", failed ").concat(o)),{result:!1,reason:o})},n.prototype.R_a=function(t){var e=this.ba.config.cw;if(this.ba.fTb(t)>=(e||1/0))return"mediaDurationLimit"},n.prototype.pHb=function(t){return t.YF[this.ba.id].total.total>(this.ba.B$()||1/0)?"playgraphMemoryLimit":void 0},n.prototype.nHb=function(t,e,i){return t=t.global,i?i[s.u.P]+i[s.u.J]>(e.hDa.total||1/0)?"staticMemoryLimit":void 0:t.total>(e.total.total||1/0)?"globalMemoryLimit":void 0},n.prototype.oHb=function(t,e,i,n){var r=t.global;return i?(u.S&&this.console.log("checkRequestByMediaTypeMemory [".concat(n,"]:")+" using static limit ".concat(e.hDa[n],", usage: ").concat(i)+" (global: ".concat(r[n]," ")+" - certain contiguous: ".concat(c(t,n),")")),i[n]>(e.hDa[n]||1/0)?n===s.u.J?"staticVideoMemoryLimit":"staticAudioMemoryLimit":void 0):r[n]>(e.total[n]||1/0)?n===s.u.J?"globalVideoMemoryLimit":"globalAudioMemoryLimit":void 0},e.RSa=n},function(t,e){function i(t){this.console=t,this.Lpa()}_esm(e),e.JQa=void 0,i.prototype.get=function(t){return this.OO[t]||this.fh[t]},i.prototype.set=function(t,e){void 0===this.fh[t]&&(this.fh[t]=e)},i.prototype.Sac=function(t,e){void 0===this.get(t)&&(this.OO[t]=e)},i.prototype.clear=function(t){this.OO[t]=void 0,this.fh[t]=void 0},i.prototype.MHb=function(t){var e;this.fh=((e={})[t]=this.fh[t],e),this.OO={}},i.prototype.Lpa=function(){this.fh={},this.OO={}},i.prototype.toJSON=function(){return{fh:this.fh,OO:this.OO}},e.JQa=i},function(t,e,i){var n,r,a;function o(t){this.dz=t,this.Qc=a.qT,this.sG={},this.g1={}}_esm(e),e.LQa=e.aH=void 0,n=i(0),r=i(2),(i=a=e.aH||(e.aH={}))[i.qT=0]="CREATED",i[i.qka=1]="STARTED",i[i.pU=2]="REQUEST_ISSUED",i[i.Mz=3]="EVALUATED",i[i.SHa=4]="DESTRUCTED",Object.defineProperties(o.prototype,{state:{get(){return this.Qc},configurable:!0}}),o.prototype.start=function(){var n=this;this.Qc!==a.qka&&(this.VZ(a.qka),[a.Mz,a.pU].forEach(function(e){var i=new Promise(function(t){r.assert(n.g1&&n.sG,"state promises should be defined"),n.g1[e]=t,n.sG[e]=i})}),this.dz(),this.VZ(a.Mz))},o.prototype.VZ=function(t){this.Qc=t,!this.g1||null!=(t=this.g1[t])&&t()},o.prototype.tb=function(){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(t){switch(t.label){case 0:return this.Qc!==a.qka?[3,2]:(r.assert(this.sG,"state resolves should be defined"),[4,this.sG[a.Mz]]);case 1:t.ib(),t.label=2;case 2:return this.g1=this.sG=void 0,this.Qc=a.SHa,[2]}})})},o.prototype.hga=function(e,i){n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(t){switch(t.label){case 0:if(this.Qc===a.SHa)return[2];if(this.Qc===a.Mz)return[3,6];switch(r.assert(this.sG,"state promises should be defined"),e){case a.Mz:return[3,1];case a.pU:return[3,3]}return[3,5];case 1:return[4,this.sG[a.Mz]];case 2:return t.ib(),[3,6];case 3:return[4,this.sG[a.pU]];case 4:return t.ib(),[3,6];case 5:return[3,6];case 6:return null!=i&&i(),[2]}})})},e.LQa=o},function(t,e,i){var c,h,f,l,d;_esm(e),e.OW=void 0,c=i(0),h=i(469),f=i(470),l=i(135),d=i(472),e.OW=function(t,e,i){var n,r,a,o,s=e.P_,u=e.eoa;return t=c.__assign({Xha:f.Wha},t).Xha,n=s[5],s=d.Wya(function(){return o}),n.iYa(s.eu),i=i(e),(n=new h.kja).xa(i),a={Xh:new t(function(){return r.ba},n,e.P_[2]),get yg(){return r},yc:i,Hva:n,iab:"content"},o=new d.IHa(a,s.nkb,l.Qy.yBa.NR),r=l.Qy.sAa(i,o,function(){return a},u)}},function(t,e){_esm(e),e.X$a=void 0,e.X$a=function(t){for(var e,i=t.next();i.done||(e=i.value),!(i=t.next()).done;);return e}},function(t,e){function i(t){this.Go=t,this.re="content-playgraph",this.enabled=!0}_esm(e),e.JHa=void 0,i.prototype.al=function(){var t,e=this.Go.yc,i=e.U;return(i.Fe?i.og:e.Ft&&e.Nj)&&this.Go.Go&&(i=i.og,e=this.Go.Xh.Pq(i),i=this.Go.yc.ba.O[i.X].N,this.Go.ba.O[e.X].N!=i&&(t=i)),{contentPlaygraph:this.Go.Go,auxMid:t}},e.JHa=i},function(t,e,i){var n,r;function a(t,e){this.vcc=t,this.Mn=e}_esm(e),e.iHa=void 0,n=i(471),r=i(10),Object.defineProperties(a.prototype,{kw:{get(){return"cache-".concat(this.vcc)},configurable:!0},re:{get(){return this.kw},configurable:!0},enabled:{get(){return r.S},configurable:!0}}),a.prototype.al=function(){var e,i=n.E5a(this.Mn),t=Object.keys(i).filter(function(t){return i[t].isEnabled});if(t.length)return e={},t.forEach(function(t){e[t]={hit:i[t].gpa,idx:i[t].o_a}}),{Unc:e}},e.iHa=a},function(t,e){_esm(e),e.cfb=void 0,e.cfb={"*":{Y3a:["logdata"],rules:[{Wl:function(t){return t.$Ea}}]},locationSelected:[{Wl:function(t){return t.K0}}],segmentComplete:[{Wl:function(t){return t.K0}}],segmentStarting:[{Wl:function(t){return t.K0}}],serverSwitch:[{Wl:function(t){return t.K0}}],streamSelected:[{Wl:function(t){return t.Fe}}]}},function(t,e,i){var c,h,f,l,d,p;_esm(e),e.OW=void 0,c=i(0),h=i(469),f=i(470),l=i(472),d=i(135),p=i(1137),e.OW=function(t,e,i){var n,r,a,o,s,u;return t=c.__assign({Xha:f.Wha},t).Xha,n=e.P_[5],r=l.Wya(function(){return s}),n.iYa(r.eu),n=new h.kja,o={Xh:new t(function(){return a.ba},n,e.P_[2],"Ads:"),get yg(){return a},get yc(){return u},Hva:n,iab:"ads"},s=new p.wFa(o,r.nkb,d.Qy.yBa.NR),t=e.eoa,e.eoa=c.__spreadArray(c.__spreadArray([],c.__read(t),!1),[s],!1),u=i(e),n.xa(u),s.xa(),n.Zda(),a=d.Qy.sAa(u,s,function(){return o},t)}},function(t,e,i){var n,r,a,o,s,u,c;function h(t,e,i){return(t=c.call(this,t,e,i,"AdsPlaygraphHost",!1)||this).BU=void 0,t}_esm(e),e.wFa=void 0,n=i(0),r=i(10),a=i(1138),o=i(65),s=i(2),t=i(473),u=i(1139),c=t.Yja,n.__extends(h,c),Object.defineProperties(h.prototype,{yg:{get(){return this.Rn.yg},configurable:!0},Si:{get(){var t=this.GE(this.yg.ba);if(t!==this.yg.ba)return t},configurable:!0},kg:{get(){return this.BU},configurable:!0}}),h.prototype.xa=function(){var r=this;c.prototype.xa.call(this),this.Rn.yc.mg(new a.xFa(this.Rn)),this.BU=new u.rFa(this.H,this.K,this.yc,function(){return r.yg},function(t,e,i,n){return r.n0(t,e,i,n)})},h.prototype.cG=function(t){var e=c.prototype.cG.call(this,t);return e&&(s.assert(this.kg,"missing manager"),this.kg.ah.v_(t,this.R5),this.R5=void 0),e},h.prototype.Sf=function(t,e,i,n,r,a,o){var s,u;return void 0===o&&(o=!1),u=s=!1,u=(s=e&&!o?this.kg.ICb.Hua(e):s)?u:this.Rn.yc.Sf(t,e,i,n,r,a,o)},h.prototype.Dw=function(t,e){var i;this.R5=void 0,this.kg.ah.p8a(t)?(r.S&&this.H.trace("ads::seekStreaming: ".concat(JSON.stringify(t))),t=(i=this.kg.ah.Uca(t)).Nj,i=i.wPb,r.S&&this.H.trace("ads::seekStreaming: forwarding seek to ".concat(JSON.stringify(t),", ")+"playerTimestamp: ".concat(e,", ")+"entryPoint: ".concat(JSON.stringify(i))),this.yc.Dea(t,e,i)):(this.R5={Nj:t,Py:e},this.yc.Dw(t,e))},h.prototype.GE=function(t){return this.kg.ah.GE(t)},h.prototype.xd=function(t){c.prototype.xd.call(this,t),this.R5=void 0},n.__decorate([o.nb({methodName:"ads::processViewableResponse"})],h.prototype,"cG",null),n.__decorate([o.nb({methodName:"ads::reportStreamingFailure"})],h.prototype,"Sf",null),n.__decorate([o.nb({methodName:"ads::seekStreaming"})],h.prototype,"Dw",null),n.__decorate([o.nb({methodName:"ads::cancelStreaming"})],h.prototype,"xd",null),e.wFa=i=h},function(t,e,i){var o;function n(t){this.context=t,this.re="ad-playgraph",this.enabled=!0}_esm(e),e.xFa=void 0,o=i(35),n.prototype.al=function(){var t,e,i=this.context,n=i.yg,r=i.yc,a=(i=r.U).Fe?i.og:r.Ft?r.Nj:void 0;return i=n.Si,t="content",a&&((a=(r=r.ba.O[a.X]).pc)&&n.ba.O[a].N!=r.N)&&(e=r.N,t=r.type),{adPlaygraph:i?o.Xja.decode(i):void 0,adMid:e,auxMidType:t,manifestHasAds:!!i}},e.xFa=n},function(t,e,i){var a,o,s,u,c;function n(t,e,i,n,r){this.qUa=new a.mFa(e,t,i,n,r,t),this.OWa=new o.yFa(i,n,this.ah),this.Lma=new s.wQa(this,i,t),this.PVa=new u.vLa(this.Lma,this.ah,this.OWa,t,n),this.qUa.xa(this.PVa.events),this.Fwb=new c.nFa(i,this.ah)}_esm(e),e.rFa=void 0,a=i(1140),o=i(475),s=i(1143),u=i(1144),c=i(1146),Object.defineProperties(n.prototype,{ah:{get(){return this.qUa},configurable:!0},Ry:{get(){return this.OWa},configurable:!0},XF:{get(){return this.Lma},configurable:!0},zXb:{get(){return this.PVa},configurable:!0},ICb:{get(){return this.Fwb},configurable:!0}}),n.prototype.dh=function(t){return this.Lma.dh(t)},e.rFa=n},function(t,e,i){var o,s,u,c,h,f,r,l,n,a,d,p;function b(t,e,i,n,r,a){this.config=t,this.console=e,this.Nyb=i,this.yg=n,this.n0=r,this.H=a,this.Mx={},this.fWa=new h.V4,this.fN=!0,this.events=new s.EventEmitter}_esm(e),e.mFa=void 0,o=i(0),s=i(12),u=i(35),c=i(10),h=i(159),f=i(8),r=i(63),l=i(2),n=i(22),a=i(1141),d=i(475),p=i(1142),Object.defineProperties(b.prototype,{yc:{get(){return this.Nyb},configurable:!0},dQ:{get(){return this.yc.ba},configurable:!0},jg:{get(){return this.SN.HCb},configurable:!0}}),b.prototype.xa=function(t){this.SN=new a.AFa(t)},b.prototype.Y$=function(){var e=this;return!!n.Xc(Object.keys(this.jg),function(t){return 0<e.jg[t].length})},b.prototype.Uca=function(t){var e,i,n,r,a,o=this.yg().Xh;return l.assert(o,"Could not get graph location service"),null!=(e=this.Kla)&&e.stop(),this.Kla=void 0,t.offset.equal(f.M.Ka)&&!this.fN&&(i=this.yg().ba).yd===t.X&&(e=this.yg().ba.O[t.X].N,c.S&&this.H.trace("ads::seekStreaming: dropping preroll for viewable "+e),this.SN.YNb(e)),0<this.SN.P1&&(c.S&&this.H.trace("ads::seekStreaming: recreating inner playgraph"),n=this.yg().ba,n=this.GE(n),o=o.Smb(this.yg().ba,n),this.SN.reset(),this.process(t)),(e=o.oB(t))&&(t=e="padding"===(t=(i=null!=n?n:this.dQ).O[e.X]).type?{X:t.Rb,offset:f.M.Ka}:e,(i=this.yc.U.mY())&&(i=i.G.id,c.S&&this.H.trace("ads::seekStreaming: seek from segment ".concat(i)),(i=this.FUb(i,e,n))&&(r=o.Pq(t),i.Xp.Pw=r,r=this.yc.config.FDa,i.X?(c.S&&this.H.trace("ads::seekStreaming: prerollSegment ".concat(i.X)),t={X:i.X,offset:f.M.Ka},a=e):r&&(this.Kla=new p.nJa(i.Xp,this.yc,o),this.Kla.start())))),c.S&&this.H.trace("ads::seekStreaming: returning ".concat(JSON.stringify(t))),{Nj:t,wPb:a,mrc:n}},b.prototype.v_=function(t,e){var i=this.aSb(t),n=this.Mx[t.L];if(n!==(this.Mx[t.L]=i)&&(null==n?void 0:n.jg.length)!==(null==i?void 0:i.jg.length)){if(null!=i&&i.jg&&(this.SN.Iac(t.L,i.jg,this.yg()),this.fN&&(this.fN=(n=t,!this.yc.config.qNb||!n.getTracks(r.u.J).map(function(t){return null==(t=t.Vl)?void 0:t.Qx}).some(function(t){return t&&3===t.Qr&&4===t.w}))),c.S&&this.H.trace("ads::composer: enablePrerollOnSeek for ".concat(t.L,"} is ").concat(this.fN)),c.S&&this.H.trace("Received ad metadata for",{T:t.L,tnc:null==(n=i)?void 0:n.jg.map(function(t){return t.Ti}).map(function(t){return null==t?void 0:t.map(function(t){return t.id})}).reduce(function(t,e){return null==e?void 0:e.concat(t)},[])})),t=this.yc.Ela,i=this.yc.config.D3a,e&&this.p8a(e.Nj)){if(i&&!t)return this.F7b(e);c.S&&this.H.trace("ads::seekStreaming: Ignoring delayed seek request ".concat(JSON.stringify(e),", didAppendData ").concat(t,", enablePrerollForInitialSeek ").concat(i))}this.process(null==e?void 0:e.Nj,null==e?void 0:e.Py)}},b.prototype.F7b=function(t){var e,i,n,r,a,o;if(c.S&&this.H.trace("ads::processDelayedSeekRequest: seek request ".concat(JSON.stringify(t))),e=t.Nj,t=t.Py,i=e,n=this.yg().Xh,l.assert(n,"Could not get graph location service"),r=this.yg().ba,a=this.GE(r),r=this.yg().ba.O[i.X].N,o=this.jg[r],r=(n=n.Smb(this.yg().ba,a)).oB(i),(i=this.EUb(a,o))&&(i.vr.Pw=e,i.X))return e={X:i.X,offset:f.M.Ka},c.S&&this.H.trace("ads::processDelayedSeekRequest: executing delayed seek to ".concat(JSON.stringify(e),", playerTimestamp ").concat(t,", entryPoint ").concat(JSON.stringify(r))),i=n.Pq(e),this.process(i,t,r);this.process(e,t)},b.prototype.process=function(e,i,n){var r=this;this.fWa.Ox||this.fWa.nga(function(){var t=r.yg().ba;r.n0(t,e,i,n),r.events.emit("adPlaygraphUpdated",{type:"adPlaygraphUpdated"})})},b.prototype.GE=function(e){var n=this,r=e,a=Object.keys(e.O).map(function(t){return"".concat(e.O[t].N)});return Object.keys(this.Mx).forEach(function(i){var t,e;-1!==a.indexOf(i)&&(t=n.Mx[i])&&(e=t.jg.map(function(t,e){return(t=n.jg[i][e]).IB||t.Ti.reduce(function(t,e,i){return e.dZ?o.__spreadArray(o.__spreadArray([],o.__read(t),!1),[i],!1):t},[])}),t=u.c1a(parseInt(i),t,e,n.config.jza),r=u.Uxa(r,t))}),r},b.prototype.p8a=function(t){return t=this.yg().ba.O[t.X].N,!!this.Mx[t]},b.prototype.aSb=function(t){if(t.VN&&(t=t.VN).jg.length)return t},b.prototype.sra=function(t){this.SN.sra(t),this.events.emit("adSegmentDropped",{type:"adSegmentDropped",adId:t}),this.process(),this.events.emit("adPlaygraphUpdated",{type:"adPlaygraphUpdated"})},b.prototype.FUb=function(t,e,i){var n,r,a;if(c.S&&this.console.trace("AdComposer: getPrerollOnSeek: "+"from ".concat(t," to ").concat(JSON.stringify(e)," ").concat(this.fN)),this.fN){if(n=null!=i?i:this.dQ){i=n.O[e.X].pc,i=this.yg().ba.O[i].N,i=this.jg[i],t=(n=n.O)[t].Rb;for(var o=void 0,s=void 0;t;){if("content"!==(r=n[t]).type||"content"!==o&&void 0!==o||!i||(a=this.f6a(t,i))&&(s={Xp:a}),t===e.X)return e=s&&!s.X||o&&"content"!==o?s:void 0,c.S&&this.console.trace("AdComposer: getPrerollOnSeek: returning ".concat(e)),e;"ad"===r.type&&"ad"!==o&&(c.S&&this.console.trace("AdComposer: getPrerollOnSeek: found start of ad break: ".concat(t)),o=d.VX(t),l.assert(o,"AdComposer: getPrerollOnSeek: Unable to find ad from ad segmentId"),s={X:t,Xp:i[null==o?void 0:o.jm]}),o=r.type,t=r.Rb}}c.S&&this.console.trace("AdComposer: getPrerollOnSeek: returning undefined")}},b.prototype.EUb=function(t,e){var i;return c.S&&this.console.trace("AdComposer: getPreroll"),(i=t.O[t.yd].type)&&"content"!==i?(i=d.VX(t.yd),l.assert(i,"AdComposer: getPrerollSegmentId: Unable to find ad from ad segmentId"),{X:t.yd,vr:e[null==i?void 0:i.jm]}):(t=this.f6a(t.yd,e))?{vr:t}:void 0},b.prototype.f6a=function(t,e){if(t=d.R5a(t),l.assert(t,"Should have contentInfo from segment name"),l.assert(0<t.T0a,"contentSegmentIndex should be greater than 0"),0===(e=e[t.T0a-1]).Ti.length&&!e.IB&&!e.Oua)return e},e.mFa=b},function(t,e,i){var a,o,s,u;function n(t){var e=this;this.P1=0,this.BH={},t.on("adEvent",function(t){return e.Q3b(t)})}_esm(e),e.AFa=void 0,a=i(2),o=i(8),s=i(63),u=i(254),Object.defineProperties(n.prototype,{HCb:{get(){return this.BH},configurable:!0}}),n.prototype.Iac=function(n,t,r){this.BH[n]=t.map(function(t,e){var i=s.NI(r.ba,Number(n),o.M.Ja(t.ap));return new u.PFa(t,e,i)})},n.prototype.reset=function(){this.P1=0},n.prototype.Q3b=function(n){var r=this;"adComplete"===n.event&&Object.keys(this.BH).some(function(t){var e,i;return t=null!=(e=(i=r.BH)[t])?e:i[t]=[],a.assert(void 0!==n.jm,"complete event should have an adBreakIndex"),null==(e=t[n.jm].Ti)?void 0:e.some(function(t){return t.id===n.ja.L&&(t.IB=!0,r.P1++,!0)})})},n.prototype.sra=function(e){var i=this;Object.keys(this.BH).forEach(function(t){i.BH[t].forEach(function(t){t.Ti.forEach(function(t){t.id===e&&(t.dZ=!0)})})})},n.prototype.YNb=function(t){var e;0===(null==(e=null==(t=this.BH[t])?void 0:t[0])?void 0:e.ap)&&(t[0].Ti.forEach(function(t){return t.IB=!0}),this.P1+=(null==(e=null==t?void 0:t[0])?void 0:e.Ti.length)||0)},e.AFa=n},function(t,e){function i(t,e,i){this.vr=t,this.dQ=e,this.a5b=i}_esm(e),e.nJa=void 0,i.prototype.start=function(){this.vAa=this.xfc.bind(this),this.dQ.U.events.once("ptsChanged",this.vAa)},i.prototype.xfc=function(){var t=this.a5b.Pq(this.dQ.Nj);this.vr.Pw=t},i.prototype.stop=function(){this.vAa&&this.dQ.U.events.removeListener("ptsChanged",this.vAa)},e.nJa=i},function(t,e,i){var s,r,n,a,o,u;function c(t,e,i){var n=this;this.BU=t,this.Si=e,this.fVa=new r.Kf,this.H=o.ai(a.default,i,"PLAYERADMANAGER"),this.events=new r.EventEmitter,this.Si.events.on("playerChanged",this.vda.bind(this)),this.vda(),this.ah.events.on("adPlaygraphUpdated",function(t){return n.events.emit("adPlaygraphUpdated",t)}),this.ah.events.on("adSegmentDropped",function(t){n.R3b(t)})}_esm(e),e.wQa=void 0,s=i(0),r=i(12),n=i(10),a=s.__importDefault(i(3)),o=i(8),u=i(22),Object.defineProperties(c.prototype,{U8a:{get(){return this.aV},configurable:!0}}),c.prototype.dh=function(t){var e;return this.Si.qq?(e=this.Si.U).YX(t)?(n.S&&this.H.trace("PlayerAdManager.canSkip(): ".concat(e.se.ac()," -> ").concat(t.ac())),e=!(t=t.greaterThan(e.se)?o.lsa(e.bb,e.se,t):o.lsa(e.bb,t,e.se)).some(function(t){return"content"!==t.G.G.type}),n.S&&this.H.trace("PlayerAdManager.canSkip(): ".concat(e,"; ").concat(t.map(function(t){return"".concat(t.G.id," ").concat(t.G.G.type," ").concat(t.ud,"..").concat(t.ud)}))),e):(n.S&&this.H.trace("PlayerAdManager.canSkip() false, no branch spanning playerTimestamp:",t),!1):(n.S&&this.H.trace("PlayerAdManager.canSkip(): no player"),!1)},Object.defineProperties(c.prototype,{ah:{get(){return this.BU.ah},configurable:!0}}),c.prototype.vda=function(){var e=this;this.H.trace("Player changed",this.Si.qq),this.fVa.clear(),this.Si.qq&&this.fVa.addListener(this.Si.U.events,"segmentPresenting",function(){var t=e.Ry.gs;e.H.trace("Got segment presenting event",{U8a:e.aV,Jrc:t}),null!=t&&t.vr?e.aV||(e.aV=!0,e.H.trace("Emitting adbreak"),e.events.emit("adBreakPresenting",{type:"adBreakPresenting",presentingInfo:t})):e.aV&&(e.aV=!1,e.H.trace("Emitting adbreak ended"),e.events.emit("adBreakEnded",{type:"adBreakEnded"})),null!=t&&t.Ys&&(e.H.trace("Emitting ad presenting"),e.events.emit("adPresenting",{type:"adPresenting",presentingInfo:t}))})},c.prototype.Wsa=function(i){var r=this,a={bEb:[],result:{}},o=this.ah.Mx,t=Object.keys(o).filter(function(t){return o[t]});return null!=i&&i.lnb&&(t=t.filter(function(t){var e;return-1!==(null==(e=i.lnb)?void 0:e.indexOf(t))})),(a.bEb=t).forEach(function(t){var e,i,n=null==(e=o[t])?void 0:e.jg;n&&(e=r.wQb(t,n),i=r.ah.jg[t],a.result["".concat(t)]=e.map(function(t,e){return s.__assign(s.__assign({},t),{hasCompletedPlayback:i[e].UYb})}))}),a},Object.defineProperties(c.prototype,{Ry:{get(){return this.BU.Ry},configurable:!0}}),c.prototype.wQb=function(t,e){var i=[],n=[];return this.ah.jg[t].forEach(function(t){return t.Ti.forEach(function(t){t.dZ&&-1===n.indexOf(t.id)&&n.push(t.id)})}),e.forEach(function(t){var e=null==(e=(t=s.__assign({},t)).ads)?void 0:e.filter(function(t){return-1===n.indexOf(t.id)});t.ads=e,i.push(t)}),i},c.prototype.R3b=function(t){var r,a=this,o=t.adId,e=this.ah.Mx;t=Object.keys(e).filter(function(t){return e[t]}),r=this.Si.ba.O,t.forEach(function(t){null!=(t=null==(t=e[t])?void 0:t.jg)&&t.forEach(function(i,n){var t;null!=(t=i.Ti)&&t.forEach(function(t,e){t.id===o&&(t=u.Xc(Object.keys(r),function(t){return!!(t=a.Ry.VX(t))&&(e===t.Cna&&n===t.jm)}))&&a.events.emit("segmentDropped",{type:"segmentDropped",auxMid:o,auxMidType:"ad",adBreakLocationMs:i.KL,reason:"network_error",sev:"error",segmentId:t})})})})},e.wQa=c},function(t,e,i){var k,s,c,h,S,T,I,f,O,x,l;function n(t,e,i){return void 0===i&&(i=!1),k.__read(t.filter(function(t){return!t.IB&&!t.Oua&&t.Pw&&t.Pw.X===e.X&&t.Pw.offset.zj(e.offset)&&(!i||0===t.Ti.length)}),1)[0]}function r(t,e,i,n,r){var a,o=this;this.XF=t,this.ah=e,this.Ry=i,this.Qw=r,this.events=new s.EventEmitter,this.H=T.ai(S.default,n,"IMPRESSION"),t=(a=this.ba).Di,this.VE=new s.Kf,this.KCb=t.iB(function(){return o.Jec()},"impressionLogging"),this.Bna=t.iB(function(){return o.Iec()},"impressionLogging::adBreakComplete"),this.XF.events.addListener("adBreakPresenting",function(){return o.WDa()}),t.on("clockChanged",function(){o.Oya()}),this.Oya(),this.ah.events.on("adPlaygraphUpdated",function(){o.Bna.ij(),a.events.addListener("playerChanged",function(){return o.vda()}),o.Oya()})}_esm(e),e.$Rb=e.vLa=void 0,k=i(0),s=i(12),c=i(6),h=i(277),S=k.__importDefault(i(3)),T=i(8),I=i(2),f=i(22),O=i(64),x=i(10),l=i(1145),Object.defineProperties(r.prototype,{ba:{get(){return this.XF.Si},configurable:!0},U:{get(){return this.ba.U},configurable:!0}}),r.prototype.AKb=function(){var t,e,i,n,r,a,o,s,u=this;return x.S&&this.H.trace("Creating cdn trackers"),t=this.ba,I.assert(t.qq,"player should exist at ad break"),e=this.U.vC,i=e[c.u.P],n=e[c.u.J],r={},a={},i&&(o=i.G1a(function(){var t=f.Xc(i.YDa,function(t){return t instanceof h.rT});return I.assert(t,"could not find existing cdn list tracker"),t.clone(r,{priority:100,lkb:l.ria})})),n&&(s=n.G1a(function(){var t=f.Xc(n.YDa,function(t){return t instanceof h.rT});return I.assert(t,"could not find existing cdn list tracker"),t.clone(a,{priority:100,lkb:l.ria})})),{VEb:function(){return null==o?void 0:o.YCa(u.U.se)},Zgc:function(){return null==s?void 0:s.YCa(u.U.se)},C9b:function(){t.qq&&(o&&null!=i&&i.Ugb(o),s&&null!=n&&n.Ugb(s))}}},r.prototype.WDa=function(){this.KCb.ij()},r.prototype.Iec=function(){var e,i,n,r,a,o,s,u,c;return k.__generator(this,function(t){switch(t.label){case 0:if(!(e=this.XF.Si).U.Fe)return[2];i=e.U.og,n=this.Qw().Xh.Pq(i),x.S&&this.H.trace("trackAdBreakTask:getNextAdBreak for uxPosition",n,"position",i),r=this.Tta(n),t.label=1;case 1:if(null==r||!r.Pw)return[3,3];for(x.S&&this.H.trace("trackAdBreakTask:getNextAdBreak found ad break, position",null==r?void 0:r.Pw),a=this.ah.Mx[this.Qw().ba.O[n.X].N],I.assert(a,"Could not find ad metadata for next ad break"),a=a.jg[r.jm],c=this.Qw().my(r.Pw),I.assert(c,"Could not find ux content timestamp for next ad break"),u=this.Qw().Xh.oB(r.Pw),o=u.X,s=e.ba.O[o];"content"!==s.type&&o;)o=this.Uta(o),s=e.ba.O[o];return u=o&&o!==u.X?{X:o,offset:T.M.Ka}:u,x.S&&this.H.trace("trackAdBreakTask:getNextAdBreak calculating new offset uxPlayTimestamp",c.bk.W,"adBreakMetadata.locationMs s",a.ap),c.bk.W>a.ap&&(x.S&&this.H.trace("subtracting",T.M.Ja(c.bk.W-a.ap),"from offset",u.offset),u.offset=u.offset.Ea(T.M.Ja(c.bk.W-a.ap))),x.S&&this.H.trace("trackAdBreakTask:next non ad segment",u.X),c=e.ny(u,!0),x.S&&this.H.trace("trackAdBreakTask:yielding on playerPts",c),I.assert(void 0!==c,"playerPts was undefined"),I.assert(c.zj(T.M.Ka),"trackAdBreakTask playerPts was negative"),[4,O.Oh.Rw(c)];case 2:return t.ib(),r.kbc(),x.S&&this.H.trace("trackAdBreakTask: reached playerPts, emitting adBreakEvent"),this.events.emit("adBreakEvent",k.__assign(k.__assign({type:"adBreakEvent"},r.xna.complete),{wi:r.Pw,JA:r.KL,jm:r.jm})),r.Oua=!0,i=e.U.og,n=this.Qw().Xh.Pq({X:i.X,offset:T.M.Ja(1)}),r=this.Tta(n),[3,1];case 3:return[2]}})},r.prototype.vda=function(){x.S&&this.H.trace("playerChanged event",!!this.Ry.gs,this.ba.qq,this.ba.Di.Da.currentTime.ac())},r.prototype.Jec=function(){var e,i,n,r,a,o,s,u,c,h,f,l,d,p,b,g,m,v,y,w,A,_,E;return k.__generator(this,function(t){switch(t.label){case 0:x.S&&this.H.trace("starting at",this.ba.Di.Da.currentTime.ac()),n=this.AKb(),e=n.VEb,i=n.Zgc,n=n.C9b,t.label=1;case 1:t.Ih.push([1,,18,19]),t.label=2;case 2:return this.Ry.gs?(E=this.Ry.gs).dda?"end"===E.dda.eda?[3,17]:(r=this.Uta(E.position.X),E=this.U.ny({X:r,offset:T.M.Ka}),I.assert(E,"paddingEnd should be defined for end of padding"),x.S&&this.H.trace("ImpressionLogger: waiting for padding until ".concat(E)),[4,O.Oh.Rw(E)]):[3,4]:[3,17];case 3:t.ib(),t.label=4;case 4:if(!(a=this.Ry.gs))return[3,17];o=a.Ys.vh,s=a.position.X,u=this.U.Ei.T.ja,I.assert(u,"presenting ad should have a manifest"),c=S.default.time.now(),x.S&&this.H.trace("Emitting start event",{position:a.position}),I.assert(null==(E=o.TV)?void 0:E.start,"Start event info should be defined"),h=e(),f=i(),this.events.emit("adEvent",k.__assign(k.__assign({type:"adEvent"},o.TV.start),{wi:a.position,ja:u,Xn:c,pib:-1,Vt:this.wY(h,f,u.L),JA:a.vr.Xp.KL,jm:a.vr.Xp.jm})),l={X:s,offset:T.M.Ka},d=this.U.ny(l),I.assert(d,"startPlayerTime should be defined for ad startTime"),I.assert(o.xfa,"Start event info should be defined"),t.label=5;case 5:t.Ih.push([5,10,11,12]),A=void 0,p=k.__values(o.xfa),b=p.next(),t.label=6;case 6:return b.done?[3,9]:(g=b.value,l={offset:T.M.Ja(g.nec),X:s},m=d.add(l.offset),x.S&&this.H.trace("ImpressionLogger: waiting for next event at ".concat(m)),[4,O.Oh.Rw(m)]);case 7:t.ib(),x.S&&this.H.trace("Emitting timed event",{position:l,$eb:m}),h=e(),f=i(),this.events.emit("adEvent",k.__assign(k.__assign({type:"adEvent"},g),{wi:l,ja:u,Xn:c,pib:-1,Vt:this.wY(h,f,u.L),JA:a.vr.Xp.KL,jm:a.vr.Xp.jm})),t.label=8;case 8:return b=p.next(),[3,6];case 9:return[3,12];case 10:return y=t.ib(),A={error:y},[3,12];case 11:try{b&&!b.done&&(_=p.return)&&_.call(p)}finally{if(A)throw A.error}return[7];case 12:return(v={offset:o.endTime,X:s}).offset.zj(l.offset)?(y=d.add(v.offset),x.S&&this.H.trace("ImpressionLogger: waiting for end of ad at ".concat(y)),[4,O.Oh.Rw(y)]):[3,14];case 13:t.ib(),t.label=14;case 14:return h=e(),f=i(),x.S&&this.H.trace("Emitting complete event",{position:a.position}),this.events.emit("adEvent",k.__assign(k.__assign({type:"adEvent"},o.TV.complete),{jm:a.index,wi:v,ja:u,Xn:c,pib:S.default.time.now(),Vt:this.wY(h,f,u.L),JA:a.vr.Xp.KL})),this.U.og.X===v.X&&(r=this.Uta(v.X))&&(w=this.U.ny({X:r,offset:T.M.Ka}))?[4,O.Oh.Rw(w)]:[3,16];case 15:t.ib(),t.label=16;case 16:return[3,2];case 17:return[3,19];case 18:return n&&n(),[7];case 19:return[2]}})},r.prototype.Uta=function(t){return this.ba.ba.O[t].Rb},r.prototype.Tta=function(t){var e,i=this.Qw().ba.O[t.X];if(this.ah.Y$())return(e=this.ah.jg[i.N])&&(t=n(e,t))?t:(i=i.Rb)?this.Tta({X:i,offset:T.M.Ka}):void 0},r.prototype.n7a=function(e,i){var n=f.Xc(Object.keys(e),function(t){return e[t].L==="".concat(i)}),t=Object.keys(n?e[n].pB:{}).map(function(t){return{Wb:t,duration:n?e[n].pB[t].totalTime:0,Ao:n?e[n].Ao:void 0}}),r=t.reduce(function(t,e){return t+e.duration},0);return x.S&&this.H.trace("Getting playtime journal",{L:i,Erc:t.length,key:n,totalTime:r}),[t,r]},r.prototype.wY=function(t,e,i){var n;return void 0===e&&(e={}),t=(n=k.__read(this.n7a(t=void 0===t?{}:t,i),2))[0],n=n[1],{audio:t,video:(e=k.__read(this.n7a(e,i),2))[0],text:[],total:Math.max(n,e[1])}},r.prototype.Oya=function(){var t,e=this;this.VE.clear(),t=this.XF.Si.Di,this.VE.on(t.Da,"clockAdjusted",function(t){t.reason===c.tT.$l&&(e.WDa(),e.Bna.ij())}),this.VE.on(t.Da,"stopStart",function(){e.XF.U8a||(e.Bna.ij(),e.WDa())})},e.vLa=r,e.$Rb=n},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),e.ria=void 0,n=i(0),r=i(277).rT,n.__extends(a,r),a.prototype.yta=function(t){var e=t.Mw.request.stream.track.L;return"".concat(r.prototype.yta.call(this,t),"::").concat(e)},e.ria=a},function(t,e,i){var n;function r(t,e){this.Si=t,this.ah=e}_esm(e),e.nFa=void 0,n=i(22),r.prototype.Hua=function(e){var i=this;return!this.Si.U.bb.some(function(t){return t.G.G.N===e&&t.OYa})&&(!!n.Xc(Object.keys(this.ah.Mx),function(t){if(t=i.ah.Mx[t])return n.Xc(t.jg,function(t){return t.Ti&&n.Xc(t.Ti,function(t){return t.id===e})})})&&(this.ah.sra(e),!0))},e.nFa=r},function(t,e,a){var o,s,u;_esm(e),e.FO=void 0,o=a(0),s=a(1148),u=a(194),e.FO=function(t,e){var i,n,r=[function(t){return new(s.Pga.bind.apply(s.Pga,o.__spreadArray([void 0],o.__read(t.r6b),!1)))}];return t.uX&&(i=a(476).qqa,r.unshift(function(t,e){return i(t,e)})),t.ZI&&(n=a(476).qqa,r.unshift(function(t,e){return n(t,e)})),u.sT.Iaa({r6b:e},r)}},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,d,p,b;function g(t,e,i){var n=b.call(this)||this;return n.U=t,n.Fd=e,n.Vs=i,n.qX=[],n.Af=void 0,n.Pla=new r.Kf,n.Ss=void 0,n.WD=void 0,n.Pla.on(n.U,"underflow",n.mk.bind(n)),n.KU=new d.yQa(t),n.Pla.on(n.U,"skipped",n.t_.bind(n)),n.Fx=new s.vU(n.KU,n.H,"player"),n.WEa=new a.sH,t.C_a&&t.ij&&(n.ez=new p.bSa(n,t,n.H)),n}_esm(e),e.Pga=void 0,n=i(0),r=i(12),a=i(8),o=i(2),s=i(64),u=i(22),t=i(135),c=i(1149),h=i(130),f=i(1150),l=i(463),d=i(1153),p=i(1154),t=t.Qy.Vqa,b=l.Wja,n.__extends(g,b),Object.defineProperties(g.prototype,{rp:{get(){var t;return null==(t=this.Af)?void 0:t.rp},configurable:!0},vC:{get(){var t;return(null==(t=this.Af)?void 0:t.vC)||{}},configurable:!0},bb:{get(){var t;return null!=(t=null==(t=this.Af)?void 0:t.hy())?t:[]},configurable:!0},qa:{get(){var t;return null==(t=this.Af)?void 0:t.qa},configurable:!0},Da:{get(){return this.KU},configurable:!0},XYa:{get(){var t;return!(null==(t=this.Af)||!t.OCa||null==(t=this.Mt)||!t.vj)},configurable:!0}}),g.prototype.ZR=function(t){-1===this.qX.indexOf(t)&&this.qX.push(t),this.Af&&this.Af.p_(t),this.events.emit("drmReady",{viewableId:t})},g.prototype.Oea=function(t){-1!==(t=this.qX.indexOf(t))&&this.qX.splice(t,1)},g.prototype.Yo=function(e){var t;return-1!==this.qX.indexOf(e)||!(null==(t=u.Xc(this.bb,function(t){return t.Gt&&t.T.N===e}))||!t.T.Yi)},g.prototype.nG=function(t){var e;null!=(e=this.Af)&&e.nG(t)},g.prototype.reset=function(){var t;this.WEa=new a.sH,b.prototype.reset.call(this),this.WD=void 0,null!=(t=this.Af)&&t.reset(),null!=(t=this.ez)&&t.reset()},g.prototype.C0=function(t){var e;b.prototype.C0.call(this,t),null!=(e=this.Af)&&e.C0(t),null!=(e=this.ez)&&e.k$b(t)},g.prototype.xE=function(){var t;null!=(t=this.Af)&&t.xE()},g.prototype.pause=function(t){this.qL(t),b.prototype.pause.call(this,null!=t?t:this.Fd)},g.prototype.resume=function(t){var e;null!=(e=this.Af)&&e.resume(t),b.prototype.resume.call(this,null!=t?t:this.Fd)},g.prototype.tb=function(){this.Ss=this.UP()?this.cl():void 0,this.Af&&this.cra(this.Af.qa),this.KU.tb(),this.Fx.tb(),this.Pla.clear(),b.prototype.tb.call(this)},g.prototype.nJ=function(){var t,e;if(null!=(t=this.Af)&&t.w7b){if(t=this.U.tc,this.Da.gk){if(this.WD){if(this.WD.greaterThan(t))return t=this.WD.Ea(t),this.WEa.push(t.W),this.WD;if(this.bb.length&&(e=this.Af.m_b)&&e.lessThan(t))return this.events.emit("logdata",{type:"logdata",target:"endplay",Zc:{clockdrift:{type:"count"}}}),this.WD}this.WD=t}return t}return b.prototype.nJ.call(this)},g.prototype.pq=function(){var t=this.U.playbackRate;return t=void 0===t?b.prototype.pq.call(this):t},g.prototype.UP=function(){return!!this.Ss||b.prototype.UP.call(this)},g.prototype.cl=function(){return this.Ss||b.prototype.cl.call(this)},g.prototype.mY=function(){var t;return null==(t=this.Af)?void 0:t.d_b},g.prototype.cra=function(t){o.assert(t===this.qa),null!=(t=this.Af)&&t.tb(),this.Af=void 0},g.prototype.K7=function(t,e){var i,n;return this.Ss=void 0,(i=b.prototype.K7.call(this,t,e))&&(n=new f.lGa(t,this,this.H,t.config,this.Vs,this.events,this.Fd,this.Fx,this.ez,this.QD,this.PD,null==e?void 0:e.rp,null==e?void 0:e.vC),null!=e&&e.eR(),this.Af=n,this.qL(this.hR),this.ez&&((e=t.NK.SUb(c.vka))||(e=new c.vka,t.mg(e)),this.ez.f9b(e))),i},g.prototype.eR=function(){var t;null!=(t=this.Af)&&t.eR()},g.prototype.Kra=function(){for(var e,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e=this.Af,o.assert(e),t.forEach(function(t){return e.pPb(t)})},g.prototype.NCa=function(){var t;null!=(t=this.Af)&&t.NCa()},g.prototype.dh=function(t){var e,i,n;return!!this.Af&&(!!(e=this.YX(t))&&(i=e.G,n=a.M.Ja(this.Vs.LF),!(i.Lg.Ea(n).lessThan(t)||!e.BE(t))&&this.Af.dh(t)))},g.prototype.I$=function(){var t;return null==(t=this.ez)?void 0:t.I$()},g.prototype.mk=function(){var t,e,i;null!=(t=this.qa)&&t.Gf?this.console.error("AsePlayer: received underflow in buffering state - ignoring"):(i=this.se,o.assert(this.qa),t=this.On(i,!0),o.assert(t),null!=(e=this.Af)&&e.mk(),null!=(e=this.YX(i))&&e.T.mk(),this.qa.mk(t))},g.prototype.t_=function(){this.WD=void 0},g.prototype.ata=function(){var t;return null==(t=this.Af)?void 0:t.ata()},g.prototype.qL=function(t){var e;null!=(e=this.Af)&&e.qL(t)},g.prototype.ZDa=function(t){return o.assert(this.qa&&this.Af),b.prototype.ZDa.call(this,t)},g.prototype.Mda=function(){o.assert(this.Af),this.Af.Mda()},n.__decorate([t.return.Ooa(),t.return.$n],g.prototype,"cl",null),n.__decorate([t.return.Ooa(),t.return.Gya],g.prototype,"mY",null),i=n.__decorate([h.kJ],g),e.Pga=i},function(t,e){function i(){this.kw=this.re=i.re,this.enabled=!0,this.E0=[],this.Bhb=0}_esm(e),e.vka=void 0,i.prototype.nDb=function(t){this.E0.push(t),5<this.E0.length&&this.E0.shift()},i.prototype.oDb=function(){this.Bhb++},i.prototype.al=function(){if(this.E0.length)return{restarts:this.E0.map(function(t){return{s:t.wcc,d:t.cNb,r:t.reason,atMs:t.$eb.W}}),restartsCompleted:this.Bhb}},i.re="seamlessManager",e.vka=i},function(t,e,i){var p,b,u,g,m,c,h,v,n,r,y,a,f,w,l;function o(t,e,i,n,r,a,o,s,u,c,h,f,l){var d=this;this.qa=t,this.U=e,this.H=i,this.K=n,this.Vs=r,this.Gg=a,this.Fd=o,this.Di=s,this.ez=u,this.QD=c,this.PD=h,this.z5=!1,this.oVa=new v.vSa,this.Dma=this.U3b.bind(this),this.rj=new m.VL(this.H),this.LV=f||new w.Oka(this.H,t),this.hLb(l),this.qj&&(this.MAb=this.$sa(this.HUb()),this.lzb=v.Ls.VEa(this.qj.map(function(t){return t.ew}),function(t){return t.every(function(t){return t})},function(t){return d.QD.set(t)}),this.dxb=new y.nja(this.qj.map(function(t){return t.nZ}),function(t){return v.M.min.apply(v.M,p.__spreadArray([],p.__read(t),!1))},function(t){d.PD.set(t)},v.M.Ja(-1/0))),this.kr=s.iB(function(){return d.FFb()},"branchPruner"),this.eVa=new b.Kf,this.eVa.on(this.Gg,"segmentPresenting",function(){return p.__awaiter(d,void 0,void 0,function(){var e;return p.__generator(this,function(t){switch(t.label){case 0:return this.Zyb=this.U.cl(),null!=(e=this.K.kZa)&&e.segmentPresenting?[4,Promise.resolve()]:[3,2];case 1:t.ib(),this.Gg.emit("requestGarbageCollection",{time:g.default.time.ia(),type:"requestGarbageCollection"}),t.label=2;case 2:return[2]}})})})}_esm(e),e.lGa=void 0,p=i(0),b=i(12),u=i(447),g=p.__importDefault(i(3)),m=i(189),c=i(6),h=i(264),v=i(8),n=i(22),r=i(64),y=i(249),a=i(2),f=i(1151),w=i(1152),l=i(277),Object.defineProperties(o.prototype,{rp:{get(){return this.LV},configurable:!0},vC:{get(){var e={};return this.qj.forEach(function(t){e[t.mediaType]=t.qR}),e},configurable:!0},d_b:{get(){return this.Zyb},configurable:!0},OCa:{get(){return this.qj.every(function(t){return t.OCa})},configurable:!0}}),o.prototype.FFb=function(){var e,i,n;return p.__generator(this,function(t){switch(t.label){case 0:return this.rj.C0a?(e=p.__read(this.rj.G1(),1),e=e[0],n=e.G.aZb&&(null==(n=this.Vs.dS)?void 0:n.W)||0,i=e.sZ||e.Mc,i=i.add(v.M.Ja(n+1e3)),[4,r.Oh.Rw(i)]):[3,2];case 1:return t.ib(),this.Tfb(e),[3,0];case 2:return[2]}})},Object.defineProperties(o.prototype,{w7b:{get(){var t;return!(null==(t=this.MAb)||!t.ew.value)},configurable:!0},m_b:{get(){return this.z5?v.M.max.apply(v.M,p.__spreadArray([],p.__read(this.qj.map(function(t){return null==(t=t.GEb)?void 0:t.Z$a}).filter(n.Fca)),!1)):void 0},configurable:!0}}),o.prototype.nG=function(e){this.qj.forEach(function(t){t.nG(e)})},o.prototype.U3b=function(){var t;this.kr.ij(),t=this.qj.filter(function(t){return t.AYb}).map(function(t){return t.mediaType}),this.qL(t),this.resume(t)},o.prototype.pPb=function(t){a.assert(-1===this.rj.G1().indexOf(t),"Branch ".concat(t.G.id," is already in the collection, cannot re-queue")),t.events.on("branchEdited",this.Dma),this.rj.enqueue(t),this.kr.state===r.lo.complete&&this.kr.ij(),t.G.Hw&&this.rj.jP(),this.z5||this.YQb(t)},o.prototype.p_=function(e){this.qj.forEach(function(t){t.p_(e)})},o.prototype.reset=function(){this.qj.forEach(function(t){t.reset()}),this.z5=!1,this.oVa.removeAllListeners(),this.xE()},o.prototype.C0=function(t){null!=(t=this.$sa(t))&&t.reset()},o.prototype.xE=function(){var e=this;this.rj.G1().forEach(function(t){return t.events.Hy("branchEdited",e.Dma)}),this.rj.clear(),this.kr.ij()},o.prototype.Mda=function(){var e=this;this.rj.G1().filter(function(t){return t.WN}).forEach(function(t){return e.Tfb(t)})},o.prototype.resume=function(e){this.qj.forEach(function(t){void 0!==e&&-1===e.indexOf(t.mediaType)||t.resume()})},o.prototype.qL=function(e){this.qj.forEach(function(t){return(void 0===e||-1!==e.indexOf(t.mediaType))&&t.stop()})},o.prototype.NCa=function(){this.qj.forEach(function(t){return t.fcc()})},o.prototype.mk=function(){this.H.trace("attached-player: onUnderflow")},o.prototype.C7a=function(){return this.rj.getIterator()},o.prototype.ATb=function(){return this.hy()[0]},o.prototype.hy=function(){return this.rj.G1()},o.prototype.hLb=function(r){var a,o,s=this;if(this.Ym("createMediaSourceStart"),this.Vs.qY?a=this.Vs.qY():(a=new g.default.MediaSource(this.U.U)).Rc||(a.Rc=g.default.MediaSource.Rc),1!==a.readyState)this.nr("exception in init","NFErr_MC_StreamingInitFailure");else{if(this.Ym("createMediaSourceEnd"),!(this.ig=a).n7(this.Fd))throw this.H.trace("Error:",a.error),this.nr("error creating source buffers","NFErr_MC_StreamingInitFailure"),a.error;this.qa.mg(new f.pHa(o={},this.K)),this.qj=a.sourceBuffers.filter(function(t){return 0<=s.Fd.indexOf(t.mediaType)}).map(function(t){var e,i,n=new h.gha(s.H,t.mediaType,a,t,s.K,!0,{Qe:function(){return s.U.se.W},Yo:function(t){return s.U.Yo(t.N)}},s.Di);return n.addListener("error",function(t){return s.nr(t.errorstr)}),n.addListener("logdata",function(t){return s.Gg.emit("logdata",t)}),n.addListener("managerdebugevent",function(t){s.Gg.emit("managerdebugevent",t)}),e=null==r?void 0:r[t.mediaType],i=new u.Qga(n,t.mediaType,s,s.K,s.H,s.U,s.Vs,s.Di,s.rp,s.ez,e),t.mediaType===c.u.J&&i.on("drmNeeded",function(t){return s.Gg.emit("drmNeeded",t)}),e||null!=(t=i.qR)&&t.vYa(new l.rT(o,s.H,s.U,n,s.U.events,s.Vs,s.Di)),i})}},o.prototype.Tfb=function(t){a.assert(t.WN,"Attempted to prune branch that has not been fully appended"),this.rj.remove(t),t.events.removeListener("branchEdited",this.Dma),t.xd("pruned"),null!=(t=this.K.kZa)&&t.branchPruned&&this.Gg.emit("requestGarbageCollection",{time:g.default.time.ia(),type:"requestGarbageCollection"})},o.prototype.tb=function(){this.lzb.clear(),this.dxb.clear(),this.qj.forEach(function(t){return t.tb()}),this.Vs.qY||this.ig.Hr(),this.xE(),this.kr.tb(),this.eVa.clear()},o.prototype.dh=function(e){return this.qj.every(function(t){return t.dh(e)})},o.prototype.eR=function(){this.qj.forEach(function(t){return t.o1a()}),this.LV=new w.Oka(this.H,this.qa)},o.prototype.ata=function(){return{k8b:this.hy(),q6b:this.qj}},o.prototype.YQb=function(t){var i=this;this.z5=!0,t.we.forEach(function(t){var e=i.$sa(t.mediaType);void 0!==e&&i.oVa.once(t.Dsa,function(t){return e.$Qb(t)})}),t.ec?this.o3a():t.events.once("branchNormalized",function(){return i.o3a()})},o.prototype.o3a=function(){var t=this.ATb();t&&(a.assert(t.vd),this.Gg.emit("ptsChanged",{initialTimestamp:t.vd,forcedTimestamp:void 0}))},o.prototype.$sa=function(e){return n.Xc(this.qj,function(t){return t.mediaType===e})},o.prototype.HUb=function(){return-1!==this.Fd.indexOf(c.u.J)?c.u.J:c.u.P},o.prototype.Ym=function(t){t={type:"startEvent",event:t,time:g.default.time.ia()},this.Gg.emit(t.type,t)},o.prototype.nr=function(t,e){this.qa.Sf(t,void 0,e)},e.lGa=o},function(t,e,i){var r,n;function a(t,e){this.Jg=t,this.config=e,this.re="CdnListTracker"}_esm(e),e.pHa=void 0,r=i(6),n=i(54),Object.defineProperties(a.prototype,{enabled:{get(){return this.config.VGb},configurable:!0}}),a.prototype.al=function(t){var e=this;if(t.cj===n.ke.iq)return{cdndldist:JSON.stringify(Object.keys(this.Jg).map(function(t){var n=e.Jg[t];return{cdnid:n.Ao,pbcid:n.jp,dls:Object.keys(n.pB).map(function(t){var e,i=(t=n.pB[t]).mediaType===r.u.P?"adlid":"dlid";return(e={tm:t.totalTime,bitrate:t.bitrate})[i]=t.Wb,e.vf=t.eb,e})}}))}},e.pHa=a},function(t,e,i){var p,n,b,r;function a(t,e){this.H=t,this.qo=e}_esm(e),e.Oka=void 0,p=i(0).__importDefault(i(3)),n=i(6),b=i(19),r=i(32),a.prototype.kz=function(t,e,i,n,r){var a,o;void 0===r&&(r=!1),a=t.G,o=this.myb(a),this.KN={startTime:p.default.time.ia(),ycc:t,xcc:i.W,eOb:e,xe:this.NTb(n,e),Qec:this.AVb(n,r),Yqa:r,Je:n,U_a:o,O2b:this.iUb(a,i)}},a.prototype.V8a=function(){return!!this.KN},a.prototype.Ota=function(t){var e,i,n,r,a,o,s,u,c,h,f,l,d;if(this.KN&&0!==Object.keys(this.KN.U_a).length&&t===this.KN.eOb){for(d in i=(e=this.KN).U_a,n=e.O2b,r=e.Yqa,a=e.Je,o=e.ycc,s=e.xcc,u=e.startTime,c=e.xe,e=e.Qec,this.KN=void 0,h=this.Zla(t).ot,f=this.fSb(o.G.id,t,i),h=this.hWa(f.weight,h),l={},i)d!==t&&(l[d]=i[d].details);return i=p.default.time.ia()-u,u=a?0:i,d={offset:b.M.Ja(this.iVb(o,s,a,r)),X:o.G.id},s={offset:b.M.Ja(s),X:o.G.id},n={segment:t,destPosition:{X:t,offset:b.M.Ka},srcsegment:o.G.id,srcTransitionPosition:d,srcStartPosition:s,srcsegmentduration:o.Hfa.W,srcoffset:d.offset.W,seamlessRequested:a,atRequest:f,atTransition:h,discard:l,transitionType:c,transitionTypeAtRequest:e,delayToTransition:this.RSb(i,a,r),durationOfTransition:u,nextExitPositionAtRequest:n},r=null!=(f=null==(s=this.qo.ba.O[t])?void 0:s.type)?f:"content",s=null!=(c=null==(h=this.qo.ba.O[o.G.id])?void 0:h.type)?c:"content",t=null!=(a=null==(e=this.qo.ba.O[t])?void 0:e.N)?a:void 0,e=null!=(f=null==(u=this.qo.ba.O[o.G.id])?void 0:u.N)?f:void 0,t&&e&&t!==e&&(n.auxMidType=r,n.auxSrcmidType=s,n.auxMid=t,n.auxSrcmid=e),n}},a.prototype.fSb=function(t,e,i){var n={};return(i=i[e])?n=i.details:(r.assert(this.qo),n.weight=null==(t=null==(i=this.qo.ba.O[t].next)?void 0:i[e])?void 0:t.weight),n},a.prototype.RSb=function(t,e,i){var n;return n=i?n:e?t:0},a.prototype.iUb=function(t,e){var i,n=t.kf.add(e);return null!=(e=t.$y)&&e.some(function(t){n.lessThan(t.ec)&&(i=t.ec.W)}),i},a.prototype.iVb=function(t,e,i,n){return i||n?t.Hfa.W:e},a.prototype.NTb=function(t,e){return t?"seamless":this.Zla(e).KY?"reset":"long"},a.prototype.AVb=function(t,e){return t||e?"lazy":"immediate"},a.prototype.myb=function(n){var r=this,a={};return n.lC.forEach(function(t){var e=n.R2b[t],i=r.Zla(t).ot;a[t]={details:r.hWa(e,i)}}),a},a.prototype.Zla=function(t){var e,i;return t=null==(e=0<(t=this.qo.h$(t)).length?t[0]:void 0)?void 0:e.yB(),e&&t?(i=e.gaa(n.u.P)&&!t.Xs,e=e.gaa(n.u.J)&&!t.wp,{KY:!i&&!e,ot:t}):{KY:!1,ot:{wp:0,Xs:0,xu:0,gE:0}}},a.prototype.hWa=function(t,e){return{weight:t,vbuflmsec:e.wp,abuflmsec:e.Xs,vbuflbytes:e.xu,abuflbytes:e.gE}},e.Oka=a},function(t,e,i){var n,r,a;function o(t){this.U=t,this.mma=!1,this.vWa=new n.Kf,this.d9b()}_esm(e),e.yQa=void 0,n=i(12),r=i(6),a=i(8),t=i(36),o.prototype.d9b=function(){var t=this,e=this.vWa;e.on(this.U,"paused",function(){return t.Vca()}),e.on(this.U,"playing",function(){return t.Vca(!0)}),e.on(this.U,"underflow",function(){return t.Vca()}),e.on(this.U,"skipped",function(){return t.t_()}),e.on(this.U,"clockAdjusted",function(){return t.n_()}),e.on(this.U,"playbackRateChanged",function(){return t.r4b()})},Object.defineProperties(o.prototype,{currentTime:{get(){return this.AXa||this.U.tc||a.M.Ka},configurable:!0},gk:{get(){return this.mma},configurable:!0},speed:{get(){var t;return null!=(t=this.U.playbackRate)?t:1},configurable:!0}}),o.prototype.Vca=function(t){(t=void 0===t?!1:t)!==this.mma&&(this.AXa=(this.mma=t)?void 0:this.U.tc),this.emit("stopStart",{type:"stopStart"})},o.prototype.t_=function(){this.AXa=void 0,this.n_(r.tT.$l)},o.prototype.n_=function(t){void 0===t&&(t=r.tT.GDb),this.emit("clockAdjusted",{type:"clockAdjusted",reason:t})},o.prototype.r4b=function(){this.emit("speedChanged",{type:"speedChanged"})},o.prototype.tb=function(){this.Vca(),this.vWa.clear()},e.yQa=i=o,t.Ve(n.EventEmitter,i)},function(t,e,i){var b,n,g,l,r,a,o;function s(t,e,i){var f=this;this.Ia=t,this.U=e,this.pending=new Map,this.listeners=new n.Kf,this.vya=!1,this.gWb=function(t){var e,i,n,r,a,o,s;if(f.pending.size){g.S&&f.H.trace("playback ending, restarting player"),n={},(e={})[l.u.P]=void 0,e[l.u.J]=void 0,e[l.u.Ob]=void 0,r=e;try{for(var u=b.__values(f.pending.entries()),c=u.next();!c.done;c=u.next())o=(a=b.__read(c.value,2))[0],s=a[1],n[o]=s.to.stream.Ro(),s.from.X&&(r[o]=s.from.X)}catch(t){var h={error:t}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(h)throw h.error}}g.S&&f.H.debug("cancelling playback ending"),t.cancel(),g.S&&f.H.debug("Restarting player",n),f.U.ij(n,r).then(function(){var t;null!=(t=f.PO)&&t.resolve(),g.S&&f.H.debug("Restart completed"),null!=(t=f.Uhb)&&t.oDb(),f.reset()})}},this.listeners.addListener(e,"playbackEnding",this.gWb),this.H=a.ai(r.default,i,"SEAMLESSMANAGER"),g.S&&this.H.debug("construct")}_esm(e),e.bSa=void 0,b=i(0),n=i(12),g=i(10),l=i(6),r=b.__importDefault(i(3)),a=i(8),o=i(2),s.prototype.tb=function(){g.S&&this.H.debug("destruct"),this.pending.clear(),this.listeners.clear()},s.prototype.f9b=function(t){this.Uhb=t},s.prototype.fhc=function(t){var e;if(0===this.pending.size&&(o.assert(void 0===this.PO,"SeamlessManager: No pending transitions, but a wait is deferred"),this.PO=new a.nD),o.assert(this.PO,"SeamlessManager: deferred is undefined"),o.assert(!this.pending.has(t.mediaType),"SeamlessManager: There is already a pending transition for mediaType "+t.mediaType),this.pending.set(t.mediaType,t),g.S&&this.H.trace("got new transition [".concat(t.mediaType,"] --\x3e ").concat(t.to.stream.id)),this.pending.size===this.Ia.Fd.length&&!this.vya){if((e=this.oZb()).jfb)return g.S&&this.H.trace("seamless transition possible at ".concat(t.timestamp.ac())),this.PO.resolve(),this.reset(),this.hab=t.timestamp,Promise.resolve();g.S&&this.H.trace("starting non-seamless transition at ".concat(t.timestamp.ac())),null!=(t=this.Uhb)&&t.nDb(e.info),this.Fcc()}return this.PO.promise},s.prototype.k$b=function(t){g.S&&this.H.trace("reset media [".concat(t,"]")),this.pending.delete(t),0===this.pending.size&&this.reset()},s.prototype.I$=function(){return this.hab},s.prototype.reset=function(){g.S&&this.H.debug("resetting"),this.vya=!1,this.PO=this.hab=void 0,this.pending.clear()},s.prototype.oZb=function(){var t,e,i,n,r,a,o,s,u,c,h,f;try{for(var l=b.__values(this.pending.entries()),d=l.next();!d.done;d=l.next())if(r=(n=b.__read(d.value,2))[0],(a=n[1]).from)if(o=a.from.stream,s=a.to.stream,o.track===s.track)g.S&&this.H.debug("Seamless deemed possible due to same track",{mediaType:r});else{if(u=o.Ro(),c=s.Ro(),f=(h=this.U.C_a({mediaType:r,from:u,to:c,rpc:this.Ia.On(a.x7b),Xsc:this.Ia.On(a.timestamp)})).reason,!h.C_a)return g.S&&this.H.debug("Non-seamless transition; details:",{reason:f,mediaType:r,from:u,to:c}),{jfb:!1,info:{cNb:null!=(e=a.to.X)?e:"unk",wcc:null!=(i=a.from.X)?i:"unk",$eb:a.timestamp,reason:f}};g.S&&this.H.debug("Seamless deemed possible",{reason:f,mediaType:r,from:u,to:c})}}catch(t){var p={error:t}}finally{try{d&&!d.done&&(t=l.return)&&t.call(l)}finally{if(p)throw p.error}}return{jfb:!0}},s.prototype.Fcc=function(){this.vya=!0,g.S&&this.H.debug("Marking EOS"),this.Ia.NCa()},e.bSa=s},function(t,e,i){var n,r,a,o,s,u;function c(t,e){var i=this;this.YY=t,this.events=s.vqa(function(){return i.Rn},this.YY.events,e,u.Zeb),this.Iyb=a.ai(o.default,this.YY.console,"PLAYERHOST"),new r.Lu({cp:10,Mn:this,source:"PlayerHost",console:this.Iyb})}_esm(e),e.BQa=void 0,n=i(0),r=i(65),a=i(8),o=n.__importDefault(i(3)),s=i(474),u=i(1156),c.prototype.Spa=function(){this.Rn=void 0},c.prototype.vCa=function(t){this.Rn=t},n.__decorate([r.nb({methodName:"clearProxyPlaygraphContext"})],c.prototype,"Spa",null),n.__decorate([r.nb({methodName:"setProxyPlaygraphContext"})],c.prototype,"vCa",null),e.BQa=c},function(t,e){_esm(e),e.Zeb=void 0,e.Zeb={"*":{Y3a:["logdata"],rules:[{Wl:function(t){return t.$Ea}}]},segmentPresenting:[{Wl:function(t){return t.$Ea},config:{us:["metrics"]}},{Wl:function(t){return t.Fe}},{Wl:function(t){return t.Fe},config:{us:["metrics","srcStartPosition"]}},{Wl:function(t){return t.Fe},config:{us:["metrics","srcTransitionPosition"]}},{Wl:function(t){return t.Fe},config:{us:["metrics","destPosition"]}}],streamPresenting:[{Wl:function(t){return t.Fe}}],segmentAppended:[{Wl:function(t){return t.K0}}]}},function(t,e,i){var n,r,a,o;function s(t,e,i,n){this.knb=t,this.console=e,this.qEb=i,this.w0=n,this.events=new r.EventEmitter,this.uZ=t.n_b.Kx()}_esm(e),e.cUa=void 0,n=i(0),r=i(12),a=i(10),o=i(402),Object.defineProperties(s.prototype,{T:{get(){var t;return null==(t=this.knb)?void 0:t.T},configurable:!0},FG:{get(){return n.__awaiter(this,void 0,void 0,function(){var e;return n.__generator(this,function(t){switch(t.label){case 0:return t.Ih.push([0,2,,3]),[4,this.knb.FG];case 1:return[2,t.ib()];case 2:throw e=t.ib(),o.iQa.iZb(e)&&this.qEb.Sf(e),a.S&&this.console.trace("Removing broken viewable entry due to error",this.w0),this.events.emit("error",{error:e}),e;case 3:return[2]}})})},configurable:!0}}),e.cUa=s},function(t,e,i){var d,p,n,a,r,b,g,m,o,s,v,y,w,A,u,_,E,k,S,T;function c(t,e,i,n,r,a,o,s,u,c,h){var f,l=this;return(l=T.call(this)||this).console=t,l.zq=e,l.lV=i,l.IN=r,l.d1=a,l.Zx=s,l.U=c,l.config=h,l.hr=!1,l.EU=!1,l.Ss=void 0,l.cf=function(){var t,e,i,n;null!=(t=l.VM)&&t.clear(),t=l.exb,n=l.xAb,m.assert(t),l.kh&&m.assert(n),l.hm.value!==b.za.Ns&&l.hm.value!==b.za.Uj&&(null!=(e=l.Ia)&&e.Fe?(e=null==(i=null==(i=l.zq.La.bc.get())?void 0:i.Xa)?void 0:i.ta,l.qa.J1("startplay",v.ke.Hq),l.Efa.ZV("emitBufferingComplete",{}),E.i9(l,t,l.Ia.se,e,n,l.qa.cO)):l.console.error("Shim received buffering complete but player has no position (player "+(l.Ia?"":"un")+"defined, state "+l.hm.value+")"))},l.oW=function(){var t,e;l.Efa.ZV("audioTrackSwitchComplete",{}),m.assert(void 0!==l.ro),t=l.lV.audio_tracks[l.ro],e=l.ro,l.ro=void 0,E.n3a(l,t,e),null!=(t=l.m_)&&t.call(l),l.m_=void 0},m.assert(n.length<=2,"Ase session shim suports a maximum of 1 parallel graph."),t=(i=d.__read(n,2))[0],i=i[1],l.Oi=new p.Kf,l.N=t.ba.O[a[0].X].N,l.hm=new g.Ls(b.za.Dg),l.aD=new y.xH(l.console),o.Pe&&(l.Tba=new _.pM(l.console,h)),l.qa=t,l.kh=i,n.forEach(function(t){var e,i=t.EE(l.aD);l.Tba&&(i=new y.Ku([l.Tba,i])),e=t.DE(),t.Qea(e,i)}),l.Ioc=!1,l.E2a=!1,E.jbb(l.console,e,l,t,i),f=S++,l.Efa=new w.Lu({Mn:l,source:"ShimSession",console:l.console,cp:50,Wna:function(){return{shimId:f}}}),l.qa.mg(new A.px(l.Efa)),l.Nmb=void 0!==(null==(a=null==(s=(r=l.U).pY)?void 0:s.call(r))?void 0:a.ca),l.Nd=k.xZa(c),e=l.d1a({Fd:l.fbb(l.qa.ba.Fd),qY:l.E$.bind(l)}),l.Ia=e,l.kh&&(l.pk=l.d1a({Fd:l.fbb(l.kh.ba.Fd),qY:l.E$.bind(l)})),l.Ia.events.on("segmentPresenting",function(){l.Ss=l.zVa()}),l.on("streamerend",function(){return l.ddc()}),l.Oib(),l}_esm(e),e.sSa=void 0,d=i(0),p=i(12),n=d.__importStar(i(11)),a=i(6),r=i(250),b=i(6),g=i(8),m=i(2),o=i(19),s=i(251),v=i(54),y=i(104),w=i(65),A=i(193),u=d.__importDefault(i(3)),_=i(248),E=i(1159),k=i(1160),S=0,T=p.EventEmitter,d.__extends(c,T),Object.defineProperties(c.prototype,{L:{get(){return this.N},configurable:!0},ga:{get(){return this.Zx.ga},configurable:!0},mediaSourceId:{get(){return 0},configurable:!0},Ah:{get(){return this.Oi},configurable:!0},df:{get(){return{dqc:{1:{da:{Qa:1/0}}}}},configurable:!0},addEventListener:{get(){return this.addListener.bind(this)},configurable:!0},removeEventListener:{get(){return this.removeListener.bind(this)},configurable:!0},GL:{get(){return void 0!==this.ro},configurable:!0}}),c.prototype.K_b=function(){var t,e=this,i=null==(t=null==(t=(i=this.U).pY)?void 0:t.call(i))?void 0:t.ca;m.assert(i,"video element is not defined"),i.addEventListener("play",function(){return e.MXa()}),i.addEventListener("pause",function(){return e.Lk()})},c.prototype.ddc=function(){this.zq.xr(!0,this.Zx.sessionId)},c.prototype.IS=function(t,e){var i;this.qa.Rj(((i={})[t]=e,i))},c.prototype.open=function(){var t,e,i,n=this;this.hr||(this.hr=!0,this.zq.xr(this.config.$s,this.Zx.sessionId),i=new Promise(function(t){setTimeout(t,0)}).then(function(){n.emit("openComplete",{type:"openComplete"})}),this.qa.open(),null!=(t=this.kh)&&t.open(),this.qa.Dw(this.d1[0]),m.assert(this.Ia,"asePlayer should be defined on session.open"),this.d1[1]&&(t=this.qa.my(this.d1[0]),m.assert(t,"ShimSession.open(): Graph position did not map a valid content timestamp"),null!=(e=this.kh)&&e.Dw(this.d1[1],t.bk)),E.gbb(this.zq,this,this.Ia,this.console),this.hm.set(b.za.ed),i.then(function(){n.As(n.cf)}),this.qa.dt(this.Ia),this.kh&&(m.assert(this.pk,"parallelPlayer should be defined on session.open"),this.kh.dt(this.pk)),this.Nmb&&this.K_b())},c.prototype.E$=function(){return this.lk||(this.lk=new u.default.MediaSource(this.Nd),this.lk.Rc||(this.lk.Rc=u.default.MediaSource.Rc)),this.lk},c.prototype.d1a=function(t){return t=d.__assign({LF:this.config.LF,Pza:this.config.Pza},t=void 0===t?{}:t),this.zq.La.pYa(this.Nd,t)},c.prototype.fbb=function(t){return t?null==t?void 0:t.map(function(t){return"video"===t?a.u.J:a.u.P}):[a.u.P,a.u.J]},c.prototype.close=function(){this.hr&&(this.hr=!1),this.zq.xr(!0,this.Zx.sessionId,!0)},Object.defineProperties(c.prototype,{sI:{get(){return"1.5"},configurable:!0}}),c.prototype.flush=function(){var t;this.hr&&this.hm.value!==b.za.Uj&&this.hm.value!==b.za.Ns&&this.stop(),this.qa.J1("endplay",v.ke.iq),this.qa.xd(),null!=(t=this.kh)&&t.xd(),this.zq.dj.save(),this.zq.ep.save()},c.prototype.paused=function(){this.Nmb||this.Lk()},c.prototype.Lk=function(){this.hm.value===b.za.Gc&&(this.hm.set(b.za.Ug),this.Nd.emit("paused",{type:"paused",Qd:this.Nd.tc}))},c.prototype.MXa=function(){this.hm.value===b.za.Ug&&(this.hm.set(b.za.Gc),this.Nd.emit("playing",{type:"playing",Qd:this.Nd.tc}))},c.prototype.cd=function(){var t;this.hr&&this.hm.value!==b.za.Uj&&this.hm.value!==b.za.Ns&&this.stop(),this.zq.A9b(this),this.hr&&this.close(),this.gA&&(clearInterval(this.gA),this.gA=void 0),null!=(t=this.VM)&&t.clear(),this.Ia&&this.zq.La.DR(this.Ia),this.pk&&this.zq.La.DR(this.pk),null!=(t=this.lk)&&t.Hr()},c.prototype.suspend=function(){},c.prototype.resume=function(){},c.prototype.play=function(){var t=this;this.qa.state!==r.zk.CLOSED&&(m.assert(this.Ia,"ShimSession.play(), expected asePlayer to exist."),this.Ia.resume(this.EU?[a.u.J]:void 0),this.kh&&(m.assert(this.pk,"ShimSession.play(), expected parallelPlayer to exist."),this.pk.resume(this.EU?[a.u.J]:void 0)),this.hm.set(b.za.Gc),this.Nd.emit("playing",{type:"playing",Qd:this.Nd.tc}),this.emit("play"),this.gA||(this.gA=setInterval(function(){return t.a3b()},this.config.lO)))},c.prototype.stop=function(){this.hm.set(b.za.Ns),m.assert(this.Ia,"ShimSession.stop(), expected asePlayer to exist."),this.Ia.pause(),this.kh&&(m.assert(this.pk,"ShimSession.stop(), expected parallelPlayer to exist."),this.pk.pause()),this.Nd.emit("paused",{type:"paused",Qd:this.Nd.tc}),this.emit("stop")},c.prototype.rB=function(t){var e,i;void 0===i&&(i=!0),this.Ia?(t=parseInt(t),n.isFinite(t)&&(null!=(e=this.Tba)&&e.Ckb(),i?(this.Ia.ZR(t),null!=(e=this.pk)&&e.ZR(t)):(this.Ia.Oea(t),null!=(i=this.pk)&&i.Oea(t)))):this.fail("Must call open prior to drmReady")},c.prototype.faa=function(){var t;return!(!this.Ia||!this.Ia.Fe)&&((t=this.Ia.Yo(this.qa.ba.O[this.Ia.og.X].N))&&this.kh&&this.pk?this.pk.Yo(this.kh.ba.O[this.pk.og.X].N):t)},c.prototype.up=function(){var t;null!=(t=this.Tba)&&t.Ckb(),this.hm.set(b.za.eg),this.Nd.emit("underflow",{type:"underflow",Qd:this.Nd.tc}),this.As(this.cf)},c.prototype.z$=function(t){var e=v.ke.Hq;switch(t){case"intrplay":e=v.ke.up;break;case"endplay":e=v.ke.iq}return t=this.qa.z$(e),d.__assign(d.__assign({},t),{aseApiVersion:this.sI})},c.prototype.Lza=function(){this.Nd.emit("playbackRateChanged",{type:"playbackRateChanged",Qd:this.Nd.tc})},c.prototype.$l=function(t,e){return t=this.Nd.Qe(),e={type:"skipped",pts:o.M.Ja(t),previousPts:"number"==typeof e?o.M.Ja(e):void 0},this.Nd.emit(e.type,e),new s.vH(Promise.resolve()).vBa},c.prototype.npa=function(t,e){return e=this.gua(e||0,t),null==(e=this.qa.vn(e,t))?void 0:e.dd},c.prototype.kv=function(t,e){var i=new o.M(e,1e3);return(i=this.qa.On(i,{zjb:!0,yjb:!0}))?this.qa.ba.O[i.X].va+Number(i.offset.W.toFixed(0)):this.fail("convertPlayerPtsToContentPts failed to convert manifestIndex ".concat(t,", playerPts: ").concat(e))},c.prototype.DO=function(t,e){return t={X:t=this.gua(t||0,e),offset:new o.M(e-this.qa.ba.O[t].va,1e3)},(t=this.qa.ny(t))?t.W:e},c.prototype.Gaa=function(){var t={},e=null==(i=this.qa)?void 0:i.iy(),i=this.kh?this.kh.iy():e;return e&&(t.vbuflmsec=e.totalvbuflmsecs,t.vbuflbytes=e.vbuflbytes),i&&(t.abuflmsec=i.totalabuflmsecs,t.abuflbytes=i.abuflbytes),t},c.prototype.m$=function(){return{bf:0}},c.prototype.cl=function(){var t;return null!=(t=this.Ss)?t:null!=(t=this.Ia)&&t.UP()?this.zVa():{id:this.d1[0].X,bf:0,dd:0,Ic:1/0,gf:1/0,ud:0}},c.prototype.zVa=function(){var t,e,i,n;return m.assert(this.Ia,"attempted to get presenting branch information with no player"),m.assert(this.Ia.UP(),"attempted to get presenting branch information but player has no branches"),e=(t=this.Ia.cl()||{}).G,i=t.Dd,n=t.sC,t=t.Cq,{id:e.id,bf:null!=(i=null==i?void 0:i.W)?i:0,dd:null!=(i=null==e?void 0:e.kf.W)?i:0,Ic:null!=(i=null==e?void 0:e.Lg.W)?i:1/0,gf:null!=(e=null==n?void 0:n.W)?e:1/0,ud:null!=(i=null==t?void 0:t.W)?i:0}},c.prototype.Tgb=function(){this.cK("removeSession")},c.prototype.iu=function(t,e){return void 0===e&&(e=0),m.assert(!this.kh,"Seeking with dual playgraphs not supported."),e=this.gua(e,t),this.zq.xr(this.config.$s,this.Zx.sessionId),t={X:e,offset:o.M.Ja(t-this.qa.ba.O[e].va)},this.Ss=void 0,this.qa.Dw(t),m.assert(this.Ia),this.Ia.resume(),this.hm.set(b.za.ed),this.As(this.cf),t=this.qa.IBa(t),m.assert(t,"Valid position must be provided for seek"),t.offset.W},c.prototype.seek=function(t,e){return t=this.kv(e,t),this.iu(t,e)},c.prototype.qt=function(t,e,i){var n=this.cl().id,r=this.qa.HP(n,t);return e?r.Vmb?void 0!==r.VQ?(this.qa.lj(n,t,!1,e),r.VQ===t):(this.qa.lj(n,t,!1,e),!0):(this.console.warn("chooseNextSegment, seamless transition, invalid destination: "+"".concat(t," for current segment: ").concat(n)),!1):void 0!==r.VQ?(i||this.iu(r.dd,0),!1):(r.mO?(m.assert(this.Ia),this.Ia.reset(),this.qa.lj(n,t,!1,e),this.Ia.resume(),this.hm.set(b.za.ed),this.As(this.cf)):i||this.iu(r.dd,0),!!r.mO)},c.prototype.UN=function(){this.cK("addManifest")},c.prototype.UV=function(){return this.cK("activateManifest")},c.prototype.Gdb=function(){this.ixb()},c.prototype.sfa=function(t){var i,n,e=this.kh?this.pk:this.Ia,r=t.zo;return m.assert(!this.kh,"ShimSesssion: Parallel graph does not support track switches."),void 0===this.ro&&(!!(t=this.lV.audio_tracks).some(function(t,e){if(t.track_id===r)return i=t,n=e,!0})&&(t=t[this.IN[a.u.P]],this.ro=n,this.EU=!0,null!=e&&e.pause([a.u.P]),this.emit("audioTrackSwitchStarted",{type:"audioTrackSwitchStarted",oldLangCode:t.language,oldNumChannels:t.channels,newLangCode:i.language,newNumChannels:i.channels}),!0))},c.prototype.ws=function(t,e){this.aD.ws(t,e)},c.prototype.dh=function(t){return!!this.Ia&&this.Ia.dh(o.M.Ja(t))},c.prototype.u9=function(){this.cK("evaluateQoE")},c.prototype.kDa=function(){this.cK("stopBuffering")},c.prototype.nL=function(){return this.cK("startBuffering")},c.prototype.H7a=function(){return this.cK("getStreamingStatistics")},c.prototype.fail=function(t){this.emit("error",{type:"error",error:"NFErr_MC_StreamingFailure",errormsg:t,manifestIndex:0})},c.prototype.gua=function(t,e){return 0!==t?this.fail("Unexpected manifestIndex: ".concat(t,", ")+"single viewable playback only supports manifestIndex: ".concat(0)):this.LX(e)},c.prototype.LX=function(t){var e,i,n,r,a,o,s=this.qa.ba,u=[];for(o in m.assert(0<=t,"contentPts must be 0 or greater for segmentId lookup"),s.O)i=(e=s.O[o]).va,e=e.wa,n=t<Number(null!=e?e:1/0),i<=t&&n?u.push(o):(i=Math.min(Math.abs(t-i),Math.abs(t-e)),(void 0===r||i<r)&&(r=i,a=o));return m.assert(u.length<=1,"Overlapped segments detected in branching, this is not supported"),t=u[0]||a,m.assert(void 0!==t,"segmentId from contentPts lookup failed"),t},c.prototype.a3b=function(){var t=null===(D=this.qa)||void 0===D?void 0:D.iy();D=this.kh?this.kh.iy():t,t&&D&&this.emit("updateBufferLevel",{type:"updateBufferLevel",abuflbytes:D.abuflbytes,vbuflbytes:t.vbuflbytes,totalabuflmsecs:D.totalabuflmsecs,totalvbuflmsecs:t.totalvbuflmsecs,currentBandwidth:t.currentBandwidth})},c.prototype.cK=function(t){return this.fail("Method not implemented ".concat(String(t)))},c.prototype.ixb=function(){m.assert(void 0!==this.ro),this.IN[a.u.P]=this.ro,this.Oib(),this.As(this.oW)},c.prototype.Oib=function(){var t=this;this.kh?(this.qa.hz({ss:function(){}},{ss:function(){return t.IN[a.u.J]}}),this.kh.hz({ss:function(){return t.IN[a.u.P]}},{ss:function(){}})):this.qa.hz({ss:function(){return t.IN[a.u.P]}},{ss:function(){return t.IN[a.u.J]}}),this.EU&&((this.kh?this.pk:this.Ia).resume([a.u.P]),this.EU=!1)},c.prototype.Lac=function(t){this.exb=t},c.prototype.hbc=function(t){this.xAb=t},c.prototype.As=function(t){var e,r=this;t!==this.oW&&void 0!==this.ro?this.m_=t:(null!=(e=this.VM)&&e.clear(),!this.kh&&this.Ia?this.VM=g.Ls.VEa([this.qa.Cf,this.Ia.nZ],function(t){var e=(t=d.__read(t,2))[1];return t[0]===a.Nc.Vj&&(null==(t=r.Ia)?void 0:t.Fe)&&e.greaterThan(r.Ia.se)},this.e1a(t)):this.Ia&&(this.VM=g.Ls.VEa([this.qa.Cf,this.Ia.nZ,this.kh.Cf,this.pk.nZ],function(t){var e=(t=d.__read(t,4))[1],i=t[2],n=t[3];return t[0]===a.Nc.Vj&&(null==(t=r.Ia)?void 0:t.Fe)&&e.greaterThan(r.Ia.se)&&i===a.Nc.Vj&&(null==(t=r.pk)?void 0:t.Fe)&&n.greaterThan(r.pk.se)},this.e1a(t))))},c.prototype.e1a=function(e){var i=this;return function(t){t&&(null!=(t=i.VM)&&t.clear(),i.VM=void 0,Promise.resolve().then(e))}},d.__decorate([w.nb({methodName:"updateChoiceMapEntry",yo:!0})],c.prototype,"IS",null),d.__decorate([w.nb({methodName:"open"})],c.prototype,"open",null),d.__decorate([w.nb({methodName:"close"})],c.prototype,"close",null),d.__decorate([w.nb({methodName:"paused"})],c.prototype,"Lk",null),d.__decorate([w.nb({methodName:"unpaused"})],c.prototype,"MXa",null),d.__decorate([w.nb({methodName:"cleanup"})],c.prototype,"cd",null),d.__decorate([w.nb({methodName:"suspend"})],c.prototype,"suspend",null),d.__decorate([w.nb({methodName:"resume"})],c.prototype,"resume",null),d.__decorate([w.nb({methodName:"play"})],c.prototype,"play",null),d.__decorate([w.nb({methodName:"stop"})],c.prototype,"stop",null),d.__decorate([w.nb({yo:!0,methodName:"drmReady"})],c.prototype,"rB",null),d.__decorate([w.nb({methodName:"underflow"})],c.prototype,"up",null),d.__decorate([w.nb({methodName:"getLogdataReport"})],c.prototype,"z$",null),d.__decorate([w.nb({methodName:"skipped"})],c.prototype,"$l",null),d.__decorate([w.nb({methodName:"seekByContentPts"})],c.prototype,"iu",null),d.__decorate([w.nb({methodName:"seek"})],c.prototype,"seek",null),d.__decorate([w.nb({methodName:"chooseNextSegment",yo:!0})],c.prototype,"qt",null),d.__decorate([w.nb({methodName:"onAudioTrackSwitchStarted"})],c.prototype,"Gdb",null),d.__decorate([w.nb({methodName:"switchTracks"})],c.prototype,"sfa",null),e.sSa=c},function(t,e,i){var l,d;function p(e,t,i){var n=Array.isArray(i)?i[0]:i,r=Array.isArray(i)?i[1]:i;t.on(n,function(t){e.emit(r,l.__assign(l.__assign({},t),{type:r}))})}_esm(e),e.n3a=e.i9=e.gbb=e.jbb=void 0,l=i(0),d=i(10),e.jbb=function(n,t,r,e,i){var a,o,s,u,c,h;function f(t,e){p(r,t,e)}t=i?[e,i]:[e],[["aseReport","asereport"],["aseReportEnabled","asereportenabled"],"buffering","managerdebugevent","endOfStream","lastSegmentPts","locationSelected","segmentAborted","startEvent",["transportReport","transportreport"]].forEach(function(t){return f(e.events,t)}),i?(f(i.events,"initialAudioTrack"),o="streamerEnd",s=i,u=function(t){r.emit("streamerend",l.__assign(l.__assign({},t),{type:"streamerend"}))},e.events.once(o,function(t){(c=t)&&h&&u(c,h)}),s.events.once(o,function(t){h=t,c&&h&&u(c,h)})):(f(e.events,["streamerEnd","streamerend"]),f(e.events,"initialAudioTrack")),e.events.on("logdata",function(t){r.emit("logdata",l.__assign(l.__assign({},t),{fields:l.__assign(l.__assign({},t.fields),{aseApiVersion:r.sI})}))}),a=!0,e.events.on("bufferingStarted",function(t){r.GL&&a?a=!1:(r.Efa.ZV("bufferingStarted",{}),r.emit("bufferingStarted",t))}),e.events.on("bufferingComplete",function(t){r.GL?a=!0:r.Lac(t)}),null!=i&&i.events.on("bufferingComplete",function(t){r.GL||r.hbc(t)}),e.events.on("maxVideoBitrateChanged",function(t){r.emit("maxvideobitratechanged",l.__assign(l.__assign({},t),{type:"maxvideobitratechanged",Dsc:t.streaming.W}))}),e.events.on("error",function(t){t=l.__assign(l.__assign({},t),{manifestIndex:0}),r.emit("error",t)}),r.on("error",function(){}),e.events.on("segmentComplete",function(t){r.emit("segmentComplete",{type:"segmentComplete",mediaType:t.mediaType,manifestIndex:0,segmentId:t.segmentId})}),e.events.on("segmentNormalized",function(t){var e=Math.floor(t.viewableContentEnd.W);r.emit("maxPosition",{type:"maxPosition",index:0,endPts:e,maxPts:e,maxSeekPts:Math.floor(t.viewableEarliestContentEnd.W)}),r.emit("manifestRange",{type:"manifestRange",index:0,manifestOffset:0,startPts:0,endPts:e,maxPts:e})}),e.events.on("segmentStarting",function(t){r.emit("maxBitrates",{type:"maxBitrates",audio:t.maxBitrates.audio,video:t.maxBitrates.video}),r.emit("segmentStarting",t)}),t.forEach(function(i){i.events.on("serverSwitch",function(t){r.emit("serverSwitch",{type:"serverSwitch",segmentId:t.segmentId,mediatype:t.mediatype,server:t.server,reason:t.reason,location:t.location,bitrate:t.bitrate,confidence:t.confidence,throughput:t.throughput,oldserver:t.oldserver})}),i.events.on("streamSelected",function(t){var e=i.my(t.position);r.emit("streamSelected",{type:"streamSelected",nativetime:t.nativetime,mediaType:t.mediaType,streamId:t.streamId,manifestIndex:0,trackIndex:t.trackIndex,streamIndex:t.streamIndex,movieTime:e.bk.W,bandwidth:t.bandwidth,longtermBw:t.longtermBw,rebuffer:t.rebuffer})}),i.events.on("updateStreamingPts",function(t){var e=r.L;d.S&&n.trace("converting updateStreamingPts, movieId:",e),r.emit("updateStreamingPts",{type:"updateStreamingPts",mediaType:t.mediaType,manifestIndex:0,trackIndex:t.trackIndex,segmentId:t.position.X,movieTime:Math.floor(t.completePlayerStreamingTimestamp.W)})})})},e.gbb=function(t,r,e,n){["managerdebugevent","segmentAppended","startEvent","logdata"].forEach(function(t){return p(r,e.events,t)}),e.events.on("streamPresenting",function(t){var e=t.playerTimestamp.W,i=r.qa.my(t.position);void 0===i?n.warn("ShimSession cannot map streamPresenting: ".concat(JSON.stringify(t))):r.emit("streamPresenting",{type:"streamPresenting",startPts:Math.floor(e),contentStartPts:Math.floor(i.bk.W),mediaType:t.mediaType,manifestIndex:0,trackIndex:t.trackIndex,streamIndex:t.streamIndex})}),e.events.on("segmentPresenting",function(t){var e=r.qa.my(t.position),i=t.playerTimestamp.Ea(e.bk),n=t.position.X;r.E2a||(r.emit("manifestPresenting",{type:"manifestPresenting",index:0,pts:t.playerTimestamp.W,movieId:e.N.toString(),replace:!1,contentOffset:i.W}),r.E2a=!0),r.emit("segmentPresenting",{type:"segmentPresenting",segmentId:n,contentOffset:i.W,metrics:t.metrics})}),e.events.on("ptsChanged",function(t){r.emit("ptschanged",t.initialTimestamp.W),r.Nd.emit("skipped")})},e.i9=function(t,e,i,n,r,a){i=i.W,t.emit("logdata",{type:"logdata",target:"startplay",fields:{hasasereport:!!a,hashindsight:!1,buffCompleteReason:e.reason,actualbw:n,initSelReason:null!=(a=e.initSelReason)?a:"unknown",bcVBufferLevelMs:e.vBufferLevelMs,bcABufferLevelMs:(r=null!=r?r:e).aBufferLevelMs}}),t.emit("ptschanged",i),t.emit("bufferingComplete",{type:"bufferingComplete",time:e.time,actualStartPts:i,aBufferLevelMs:r.aBufferLevelMs,vBufferLevelMs:e.vBufferLevelMs,selector:e.selector,initBitrate:e.initBitrate,skipbackBufferSizeBytes:e.skipbackBufferSizeBytes})},e.n3a=function(t,e,i){t.emit("audioTrackSwitchComplete",{type:"audioTrackSwitchComplete",trackId:e.track_id,trackIndex:i})}},function(t,e,i){var n,r,a;_esm(e),e.xZa=void 0,t=i(0),n=i(12),r=t.__importDefault(i(158)),a=i(8),e.xZa=function(t){return t.Dwb||(r.default(n.EventEmitter.prototype,t),Object.defineProperties(t,{Dwb:{value:!0},tc:{get(){return new a.M(this.Qe(),1e3)}},playbackRate:{get(){return Math.max("function"==typeof this.pq?this.pq():1,.01)}}})),t}},function(t,e){_esm(e),e.BIb={hw:["minInitVideoBitrate",-1/0],bya:["minHCInitVideoBitrate",-1/0],bC:["maxInitVideoBitrate",1/0],$Z:["minInitAudioBitrate",-1/0],YZ:["minHCInitAudioBitrate",-1/0],LZ:["maxInitAudioBitrate",1/0],dca:["minAcceptableVideoBitrate",-1/0],WZ:["minAcceptableVMAF",0],V1b:["minAcceptableVMAFRebufferScalingFactor",0],aya:["minAllowedVideoBitrate",-1/0],W0b:["maxAllowedVideoBitrate",1/0],eK:["minAllowedVmaf",-1/0],pbb:["maxAllowedVmaf",1/0],pS:["streamFilteringRules",{enabled:!1,profiles:["playready-h264mpl40-dash"],action:"keepLowest"}],n9:["enableResolutionVMAFStreamFilter",!1],zza:["percentCapTitlesForResolutionVMAFStreamFilter",100],oea:["resolutionVMAFCappingRuleList",[]],S8a:["ignoreUserFilterOnEmptyResult",!0],KF:["minRequiredBuffer",2e4],lca:["minRequiredAudioBuffer",0],Fj:["minPrebufSize",5800],hca:["minCheckBufferingCompleteInterval",200],m9:["enableMoreFrequentBufferingCompleteCheck",!1],eya:["minimumBufferingCompleteInterval",1e4],iea:["requireDownloadDataAtBuffering",!1],g9a:["indicatorForDownloadDataAtBuffering","oncomplete"],jea:["requireSetupConnectionDuringBuffering",!1],JAa:["rebufferingFactor",1],Yr:["maxBufferingTime",2e3],GEa:["useMaxPrebufSize",!0],dC:["maxPrebufSize",4e4],Kxa:["maxRebufSize",1/0],dQb:["fastRebufferRecoveryThreshold",1/0],cQb:["fastRebufferRecoverBwThrehold",3e3],zaa:["initialBitrateSelectionCurve",null],l9a:["initSelectionLowerBound",-1/0],m9a:["initSelectionUpperBound",1/0],w1:["throughputPercentForAudio",15],Eoa:["bandwidthMargin",0],Goa:["bandwidthMarginCurve",[{m:20,b:15e3},{m:17,b:3e4},{m:10,b:6e4},{m:5,b:12e4}]],IZa:["bandwidthMarginCurveAudio",{min:.7135376,max:.85,YA:76376,scale:18862.4,gamma:3.0569}],Foa:["bandwidthMarginContinuous",!1],JZa:["bandwidthMarginForAudio",!0],GDa:["switchConfigBasedOnInSessionTput",!0],mqa:["conservBandwidthMargin",20],NW:["conservBandwidthMarginTputThreshold",6e3],nqa:["conservBandwidthMarginCurve",[{m:25,b:15e3},{m:20,b:3e4},{m:15,b:6e4},{m:10,b:12e4},{m:5,b:24e4}]],Bkb:["switchAlgoBasedOnHistIQR",!1],uG:["switchConfigBasedOnThroughputHistory","iqr"],Jxa:["maxPlayerStateToSwitchConfig",-1],jxa:["lowEndMarkingCriteria","iqr"],oia:["IQRThreshold",.5],Zua:["histIQRCalcToUse","simple"],fv:["bandwidthManifold",{curves:[{min:.05,max:.82,YA:7e4,scale:178e3,gamma:1.16},{min:0,max:.03,YA:15e4,scale:16e4,gamma:3.7}],threshold:14778,gamma:2.1,niqrcurve:{min:1,max:1,center:2,scale:2,gamma:1},filter:"throughput-sw",niqrfilter:"throughput-iqr",simpleScaling:!0}],dw:["maxTotalBufferLevelPerSession",0],F8a:["highWatermarkLevel",3e4],llb:["toStableThreshold",3e4],Cfa:["toUnstableThreshold",0],VCa:["skipBitrateInUpswitch",!1],XEa:["watermarkLevelForSkipStart",8e3],TCa:["simulationDurationStrategy","default"],jcc:["simulationFullBufferPercentage",1],scb:["minSimulationDuration",2e4],Lbb:["maxSimulationDuration",3e5],CEa:["upperThroughputPredictionFactor",1.6],kaa:["highStreamRetentionWindow",9e4],Dba:["lowStreamTransitionWindow",51e4],Vua:["highStreamRetentionWindowUp",5e5],lxa:["lowStreamTransitionWindowUp",1e5],Uua:["highStreamRetentionWindowDown",6e5],kxa:["lowStreamTransitionWindowDown",0],Tua:["highStreamInfeasibleBitrateFactor",.5],XB:["lowestBufForUpswitch",9e3],yba:["lockPeriodAfterDownswitch",15e3],nxa:["lowWatermarkLevel",15e3],xy:[["lowestWaterMarkLevel","lowestWatermarkLevel"],3e4],oxa:["lowestWaterMarkLevelBufferRelaxed",!1],$0b:["maxContentDurationForMinBufferIncrease",6e4],Yba:["mediaRate",1.5],Qba:["maxTrailingBufferLen",15e3],fW:["audioBufferTargetAvailableSize",262144],V1:["videoBufferTargetAvailableSize",1048576],Obb:["maxVideoTrailingBufferSize",8388608],rbb:["maxAudioTrailingBufferSize",393216],C9:["fastUpswitchFactor",3],fQb:["fastUpswitchFactorWithoutHeaders",3],eQb:["fastUpswitchFactorForNextSegment",1],hsa:["fastDownswitchFactor",3],cw:["maxMediaBufferAllowed",27e4],crc:["minMediaBufferLen",1e4],SCa:["simulatePartialBlocks",!0],ojb:["simulateBufferFull",!0],oqa:["considerConnectTime",!0],lqa:["connectTimeMultiplier",1],M_b:["liveDvrSwitchThresholdms",1e4],Nab:["lowGradeModeEnterThreshold",12e4],Oab:["lowGradeModeExitThreshold",9e4],ubb:["maxDomainFailureWaitDuration",3e4],qbb:["maxAttemptsOnFailure",18],$3a:["exhaustAllLocationsForFailure",!0],Cbb:["maxNetworkErrorsDuringBuffering",20],Iba:["maxBufferingTimeAllowedWithNetworkError",6e4],XN:["alwaysRunUnderflowTimer",!0],h4a:["fastDomainSelectionBwThreshold",2e3],Pkb:["throughputProbingEnterThreshold",4e4],Qkb:["throughputProbingExitThreshold",34e3],Bab:["locationProbingTimeout",1e4],o4a:["finalLocationSelectionBwThreshold",1e4],Nkb:["throughputHighConfidenceLevel",.75],Okb:["throughputLowConfidenceLevel",.4],Wwa:["locationStatisticsUpdateInterval",6e4],b0b:["locationSelectorPersistFailures",!0],C3a:["enablePerfBasedLocationSwitch",!1],Lqc:["maxRateMaxFragmentGroups",4500],Eza:["pipelineScheduleTimeoutMs",2],cC:["maxPartialBuffersAtBufferingStart",2],c2b:["minPendingBufferLen",3e3],Oba:["maxPendingBufferLen",6e3],SOb:["enableNginxRateLimit",!1],Dca:["nginxSendingRate",4e4],WOb:["enableRequestPacingToken",!1],B1b:["mediaRequestPacingSpeed",2],Ava:["initialMediaRequestToken",2e4],Gba:["maxActiveRequestsSABCell100",2],Ebb:["maxPendingBufferLenSABCell100",500],phb:["resetActiveRequestsAtSessionInit",!0],j9:["enableCprAudio",!1],k9:["enableCprVideo",!1],DOb:["enableCprAudioNonPipelined",!1],EOb:["enableCprVideoNonPipelined",!0],h0a:["clientPacingParams",{minRequiredBuffer:3e4,rateDiscountFactors:[2,2,3],lowestAllowedRateFactor:1}],Ujb:["staticPacingRateKbps",0],j5b:["paceRateSelectorAlgorithm","default"],k5b:["paceRateSelectorAlgorithmNonPipelined","default"],B3a:["enablePaceReportLogging",!1],qfc:["unpacedFragmentInterval",0],uXb:["ignorePacedRequestStrategy","none"],C_:["pacedThresholdPct",.1],Ara:["effectivePaceRateFactor",1],i9b:["regressionAlgoPacingCoefficients",[{playerStates:[0,1,2],networkConfidence:[],bufferLevelPct:0,coefficients:{averagetp:1,stddevtp:2}},{playerStates:[],networkConfidence:[0,1,2],bufferLevelPct:0,coefficients:{offset:1e5}},{playerStates:[],networkConfidence:[],bufferLevelPct:0,coefficients:{averagetp:1,stddevtp:2}},{playerStates:[],networkConfidence:[],bufferLevelPct:1,coefficients:{maxAverageBitrate:2}}]],m5b:["pacingTargetBufferStrategy","implicit"],Sdc:["targetBufferLevelStddevMultiplier",1],Rdc:["targetBufferLevelDurationMs",0],d2b:["minTargetBufferLevelMs",27e4],iDa:["stddevPredictorMultiplier",-.3],jDa:["stddevPredictorUpperMultiplier",2],Pcc:["stddevPredictorSource","deliverytime"],Jpa:["ciPredictorSource","throughput-ci"],x3a:["enableInitialTputLogging",!1],LOb:["enableInitialThroughputHistory",!1],Lxa:["maxStreamingSkew",2e3],Z0b:["maxBufferOccupancyForSkewCheck",1/0],lgc:["useBufferOccupancySkipBack",!0],Hxa:["maxPendingBufferPercentage",10],Hbb:["maxRequestsInBuffer",120],iaa:["headerRequestSize",4096],Qra:["estimateHeaderSize",!0],Opc:["headerCacheEstimateHeaderSize",!1],lK:["neverWipeHeaderCache",!1],ugc:["useSidxInfoFromManifestForHeaderRequestSize",!1],r5b:["parseAdditionalBoxesMp4Header",!0],j4a:["fastPlayHeaderRequestSize",0],EQ:["maxRequestSize",0],fK:["minRequestSize",65536],XZ:["minBufferLenForHeaderDownloading",1e4],xjb:["smartHeaderPreDownloading",!1],zOb:["enableAllHeadersPreDownloading",!1],trc:["onlyAllowPtsUpdatePolling",!1],e2b:["minVideoBufferPoolSizeForSkipbackBuffer",33554432],B0:["reserveForSkipbackBufferMs",15e3],Hya:["numExtraFragmentsAllowed",2],Ij:["pipelineEnabled",!0],DQ:["maxParallelConnections",3],rgc:["usePipelineForAudio",!1],qgc:["usePipelineDetectionForAudio",!1],Ajb:["socketReceiveBufferSize",0],N7:["audioSocketReceiveBufferSize",32768],PS:["videoSocketReceiveBufferSize",65536],aec:["textSocketReceiveBufferSize",32768],Jmb:["usePipelineDetectionForVideo",!1],i2b:["minVideoSocketReceiveBufferSize",65536],Rua:["headersSocketReceiveBufferSize",32768],Ibc:["shareDownloadTracks",!0],Jbc:["shareOpenRangeTracks",!1],tkb:["supportOpenRangeRequests",!0],pNb:["disableHeaderDownloadTracks",!1],dya:["minTimeBetweenHeaderRequests",void 0],Tfa:["updatePtsIntervalMs",1e3],Soa:["bufferTraceDenominator",0],lO:["bufferLevelNotifyIntervalMs",2e3],uDa:["streamingStatusIntervalMs",2e3],uC:["prebufferTimeLimit",6e4],gca:["minBufferLevelForTrackSwitch",2e3],UOb:["enablePenaltyForLongConnectTime",!1],wza:["penaltyFactorForLongConnectTime",2],hxa:["longConnectTimeThreshold",200],Una:["additionalBufferingLongConnectTime",2e3],Vna:["additionalBufferingPerFailure",8e3],k0:["rebufferCheckDuration",6e4],z3a:["enableLookaheadHints",!1],Kab:["lookaheadFragments",2],sB:["enableOCSideChannel",!0],jAa:["probeRequestTimeoutMilliseconds",3e4],Nrc:["probeRequestConnectTimeoutMilliseconds",8e3],B4:["OCSCBufferQuantizationConfig",{lv:5,mx:240}],XOb:["enableSCByteRangeHints",!1],amb:["updateDrmRequestOnNetworkFailure",!0],tbb:["maxDiffAudioVideoEndPtsMs",1e3],IMb:["deferAseHeaderCache",!1],p2a:["deferAseScheduling",!1],Wkb:["timeBeforeEndOfStreamBufferMark",6e3],Kba:["maxFastPlayBufferInMs",2e4],b1b:["maxFastPlayContentTimeThresholdMs",112e3],Exa:["maxFastPlayBitThreshold",2e8],Cxa:["maxBufferingCompleteBufferInMs",1/0],PFb:["bufferingCompleteOnMemoryLimit",!1],eca:["minAudioMediaRequestSizeBytes",0],nca:["minVideoMediaRequestSizeBytes",0],Y0b:["maxAudioMediaRequestSizeBytes",1/0],q1b:["maxVideoMediaRequestSizeBytes",1/0],g1b:["maxMediaRequestSizeBytesInFraction",1],Gy:["minAudioMediaRequestDuration",0],gC:["minVideoMediaRequestDuration",0],jca:["minMediaRequestDuration",0],X0b:["maxAudioMediaRequestDuration",1/0],p1b:["maxVideoMediaRequestDuration",1/0],Mba:["maxMediaRequestDuration",1/0],$na:["allowFirstRequestAggregation",!1],Y1b:["minAudioMediaRequestDurationCache",0],g2b:["minVideoMediaRequestDurationCache",0],Cmb:[["useHeaderCache","usehc"],!0],EEa:[["useHeaderCacheData","usehcd"],!0],O8:["defaultHeaderCacheSize",4],j2a:["defaultHeaderCacheDataCount",4],N8:["defaultHeaderCacheDataPrefetchMs",0],HWb:["headerCacheMaxPendingData",6],Ppc:["headerCachePriorityLimit",5],z8a:["headerCacheAdoptBothAV",!1],sgc:["usePipelineForBranchedAudio",!0],yHb:["childBranchBatchedAmount",1e4],LF:["minimumTimeBeforeBranchDecision",2e3],k2b:["minimumAppendedMediaBeforePlayback",5e3],zrc:["parallelBranchesDuringBuffering",!1],j1b:["maxRequestsToAttachOnBranchActivation",void 0],a_:["minimumJustInTimeBufferLevel",3e3],MOb:["enableJustInTimeAppends",!1],WYa:["appendPacingFactor",0],$Db:["appendPacingThreshold",3e3],t3a:["enableDelayedSeamless",!1],Pnc:["branchEndPtsIntervalMs",250],vXb:["ignorePtsJustBeforeCurrentSegment",!1],ybb:["maxFragsForFittableOnBranching",300],G5b:["pausePlaylistAtEnd",!0],MCb:["adaptiveParallelTimeoutMs",1e3],dP:["enableAdaptiveParallelStreaming",!1],Roa:["bufferThresholdToSwitchToSingleConnMs",45e3],Qoa:["bufferThresholdToSwitchToParallelConnMs",35e3],vOb:["enableAPSForBranching",!1],jga:["waitForPendingConnAdaptation",!1],nya:["networkFailureResetWaitMs",2e3],mya:["networkFailureAbandonMs",6e4],Pba:["maxThrottledNetworkFailures",5],ufa:["throttledNetworkFailureThresholdMs",200],mxa:["lowThroughputThreshold",400],Yra:["excludeSessionWithoutHistoryFromLowThroughputThreshold",!1],lec:["timeAtEachBitrateRoundRobin",1e4],C$b:["roundRobinDirection","forward"],hXb:["httpsConnectErrorAsPerm",!1],Ecb:["mp4ParsingInNative",!1],Zi:["enableManagerDebugTraces",!1],$ab:["managerDebugMessageInterval",1e3],Zab:["managerDebugMessageCount",20],qdb:["notifyManifestCacheEom",!0],bPb:["enableUsingHeaderCount",!1],Cjb:["sourceBufferInOrderAppend",!0],RK:["requireAudioStreamToEncompassVideo",!1],FYa:["allowAudioToStreamPastVideo",!1],a1a:["countGapInBuffer",!1],GYa:["allowCallToStreamSelector",!1],b_a:["bufferThresholdForAbort",2e4],oDa:["ase_stream_selector","optimized"],tZa:["audiostreamSelectorAlgorithm","selectaudioadaptive"],N_b:["liveStreamSelectorAlgorithm","live"],O_b:["liveTargetBufferDuration",1e4],xva:["initBitrateSelectorAlgorithm","default"],Xoa:["bufferingSelectorAlgorithm","default"],adc:["streamSelectionTrace",[{f:60,s:5},{f:61,s:3},{f:62,s:2},{f:63,s:0}]],F3a:["enableThroughputTraceResearchData",!1],Skb:["throughputTraceParam",{numB:3600,bSizeMs:2e3,fillS:"last",fillHl:1e3}],cz:["researchEnvironmentEnabled",!1],ZOb:["enableStreamSelectionAugmentData",!1],XEb:["augmentDataNumOfChunks",30],Z1a:["ase_ls_failure_simulation",""],Oqa:["ase_dump_fragments",!1],Pqa:["ase_location_history",0],$1a:["ase_throughput",0],b2a:["ase_simulate_verbose",!1],jza:["paddingDurationMs",1e3],kza:["paddingMediaType","padding"],Hh:["stallAtFrameCount",void 0],Hjb:["stallAtFrameCountAudio",void 0],xxa:["marginPredictor","simple"],ymb:["useBackupUnderflowTimer",!0],U2b:["noDuplicateUnderflowTimer",!1],ltc:["useManifestDrmHeader",!0],mtc:["useOnlyManifestDrmHeader",!0],oya:["networkMeasurementGranularity","video_location"],K2b:["netIntrStoreWindow",36e3],jrc:["minNetIntrDuration",8e3],eyb:["fastHistoricBandwidthExpirationTime",10368e3],Hyb:["bandwidthExpirationTime",5184e3],dyb:["failureExpirationTime",86400],LWa:["historyTimeOfDayGranularity",4],ayb:["expandDownloadTime",!0],uzb:["minimumMeasurementTime",500],tzb:["minimumMeasurementBytes",131072],OAb:["throughputMeasurementTimeout",2e3],NAb:["initThroughputMeasureDataSize",262144],czb:["historicBandwidthUpdateInterval",2e3],pnc:["throughputPredictor","ewma"],TBa:["secondThroughputEstimator","slidingwindow"],Whb:["secondThroughputMeasureWindowInMs",3e5],onc:["throughputMeasureWindow",5e3],qnc:["throughputWarmupTime",5e3],nnc:["throughputIQRMeasureWindow",1e3],Ymc:["IQRBucketizerWindow",15e3],zbb:["maxIQRSamples",100],ocb:["minIQRSamples",5],knc:["connectTimeHalflife",10],dnc:["responseTimeHalflife",10],NVa:["historicThroughputHalflife",14400],MVa:["historicResponseTimeHalflife",100],LVa:["historicHttpResponseTimeHalflife",100],KKa:["HistoricalTDigestConfig",{maxc:25,rc:"ewma",c:.5,hl:7200}],xWa:["minReportedNetIntrDuration",4e3],mnc:["throughputBucketMs",500],anc:["bucketHoltWintersWindow",2e3],Sxb:["enableFilters","throughput-ewma initial-throughput-ewma throughput-sw throughput-iqr avtp entropy deliverytime".split(" ")],byb:["experimentalFilter",["throughput-wssl"]],hXa:["reportedFilters",[]],Tla:["filterDefinitionOverrides",{}],Hxb:["defaultFilter","throughput-ewma"],Ixb:["defaultFilterField","average"],uBb:["secondaryFilter","throughput-sw"],Cla:["defaultFilterDefinitions",{"throughput-ewma":{type:"discontiguous-ewma",mw:5e3},"initial-throughput-ewma":{type:"initial-discontiguous-ewma",mw:5e3,playerStates:[0,1]},"throughput-sw":{type:"slidingwindow",mw:3e5},"throughput-wssl":{type:"wssl",mw:5e3,max_n:20},"throughput-iqr":{type:"iqr",mx:100,mn:5,bw:15e3,iv:1e3},"throughput-iqr-history":{type:"iqr-history"},"throughput-location-history":{type:"discrete-ewma",hl:14400},"respconn-location-history":{type:"discrete-ewma",hl:100},"throughput-tdigest":{type:"tdigest",maxc:25,c:.5,b:1e3,w:15e3,mn:6},"throughput-ci":{type:"ci",max_n:10,maxc:25,c:.5,lowPercentile:.1,highPercentile:.9,initialPercentile:.2,decay:!1,halfLife:5e3,maxDecay:1e9},"throughput-tdigest-history":{type:"tdigest-history",maxc:25,rc:"ewma",c:.5,hl:7200},"respconn-ewma":{type:"discrete-ewma",hl:10},avtp:{type:"avtp"},entropy:{type:"entropy",mw:2e3,sw:6e4,mins:1,in:"none",hdl:[150,230,352,539,825,1264,1936,2966,4543,6958],uhdl:[150,230,352,539,825,1264,1936,2966,4543,6958,10657,16322,25e3]},deliverytime:{type:"deliverytime",hl:4e3,max_n:10,min_iv:500,min_b:16384},"deliverytime-ci":{type:"deliverytime-ci",hl:4e3,max_n:10,metric:"deliverytime",lowPercentile:.1,highPercentile:.9,initialPercentile:.2,accuracy:1e-10,maxIterations:20}}],fPb:["enableWsslEstimate",!1],Oqc:["maxWsslRequestSize",131072],Nqc:["maxWsslRequestRatio",.2],Dnb:["wsslAggregationMethod","max"],yX:["enableSessionHistoryReport",!0],zra:["earlyStageEstimatePeriod",1e4],fab:["lateStageEstimatePeriod",3e4],Nba:["maxNumSessionHistoryStored",10],mca:["minSessionHistoryDuration",3e5],QWb:["highAndStableModelName","baseline"],Era:["enableHighAndStablePredictor",!1],kca:["minNumSessionHistory",5],Knc:["baselineHighAndStableThreshold",{bwThreshold:2e4,nethreshold:.15}],jaa:["highAndStableLRModelParams",{probThresh:.5,lrParams:{lrMeans:{avtp_b:.6717527000068912,avtp_kurtosis:-.32272653860208733,avtp_last:18162.25923773571,avtp_mean:18374.85489469472,avtp_niqr:.36157000863524086,avtp_p1:15217.082220651864,avtp_p25:16255.438250827538,avtp_p50:18018.48498809834,avtp_p75:20633.64785646099,avtp_p99:23493.017531706773,avtp_skew:-.15988915479533752,avtp_std:3494.2469335662795,fracAbove20Mbps:.36069774394324833,fracBelow20p:.44509094302767843,hour_current:14.88892246562775,intercept:0,neuhd_b:.19944416382669086,neuhd_kurtosis:-.3831651109303816,neuhd_last:.18607356003210967,neuhd_mean:.18446011173649746,neuhd_p1:.08973105578594363,neuhd_p25:.11425784546899986,neuhd_p50:.16178032426296476,neuhd_p75:.24808260501822446,neuhd_p99:.3802747624363075,neuhd_skew:.5015094291572232,neuhd_std:.11460618864890261,session_ct:9.244559018608745},lrStd:{avtp_b:.2163710864106512,avtp_kurtosis:1.3411069011423224,avtp_last:15614.28989483334,avtp_mean:15019.534079778174,avtp_niqr:1.5102894334298487,avtp_p1:13558.687640161155,avtp_p25:14056.082157854784,avtp_p50:14989.029847375388,avtp_p75:16706.411995109334,avtp_p99:19150.29672591333,avtp_skew:.8845810368911663,avtp_std:3980.545705351505,fracAbove20Mbps:.43529176129377334,fracBelow20p:.3274979541369119,hour_current:5.5716567906096826,intercept:1,neuhd_b:2.3749059625699656,neuhd_kurtosis:1.2291306781983045,neuhd_last:.16618636811434156,neuhd_mean:.10880818013405419,neuhd_p1:.11470893745650394,neuhd_p25:.11090914485422533,neuhd_p50:.11733552791484116,neuhd_p75:.1358051961745428,neuhd_p99:.18492685125890918,neuhd_skew:.7361251697238183,neuhd_std:.07376059312467607,session_ct:1.9982003410777347},lrWeights:{avtp_b:-.4168110388005385,avtp_kurtosis:-.008309418872795704,avtp_last:.9636719412610095,avtp_mean:.4596368266505147,avtp_niqr:.004794244204030071,avtp_p1:.04179963884288828,avtp_p25:-.05971214541667236,avtp_p50:-.06609686988077124,avtp_p75:-.021163989843701936,avtp_p99:-.5012233043639935,avtp_skew:.04960520099458782,avtp_std:-.04377297768250326,fracAbove20Mbps:1.4353872225089277,fracBelow20p:.536611494372919,hour_current:-.02151363764568746,intercept:-2.454070409461966,neuhd_b:-.010631811493285886,neuhd_kurtosis:.0392239159548721,neuhd_last:-.26007106077057324,neuhd_mean:-.14989131456288793,neuhd_p1:.03395316119601572,neuhd_p25:-.03267433155107594,neuhd_p50:.016260475942198947,neuhd_p75:.09080546760249925,neuhd_p99:.07570542703705993,neuhd_skew:-.0072781558054514205,neuhd_std:-.06708762681381578,session_ct:.010263062689577421}}}],RWb:["highAndStableParams",{minRequiredBuffer:1e4,bandwidthMarginCurve:[{m:10,b:15e3},{m:5,b:3e4},{m:0,b:12e4}]}],Ina:["addHeaderDataToNetworkMonitor",!0],cDa:["startMonitorOnLoadStart",!1],eBa:["reportFailedRequestsToNetworkMonitor",!1],lda:["periodicHistoryPersistMs",0],Bea:["saveVideoBitrateMs",0],e_:["needMinimumNetworkConfidence",!0],Joa:["biasTowardHistoricalThroughput",!1],f0b:["logMemoryUsage",!1],ww:["probeServerWhenError",!0],MA:["allowSwitchback",!0],uR:["probeDetailDenominator",100],Jba:["maxDelayToReportFailure",300],$s:["allowParallelStreaming",!1],Tqc:["mediaPrefetchDisabled",!1],lcb:["minBufferLevelToAllowPrefetch",5e3],QR:["seamlessAudio",!1],jsc:["seamlessAudioProfiles",[]],ksc:["seamlessAudioProfilesAndTitles",{}],RBa:["seamlessAudioMaximumSyncError",void 0],SBa:["seamlessAudioMinimumSyncError",void 0],z9a:["insertSilentFrames",0],Iva:["insertSilentFramesOnSeek",!1],A9a:["insertSilentFramesOnSeekForTitles",[]],kYb:["insertSilentFramesOnSeekCount",3],npc:["forceDiscontinuityAtTransition",!0],CDa:["supportAudioResetOnDiscontinuity",void 0],Adc:["supportAudioEasingOnDiscontinuity",void 0],iOb:["editCompleteFragments",!0],l2b:["minimumAudioFramesPerFragment",1],tI:["applyProfileTimestampOffset",!1],xo:["applyProfileStreamingOffset",!0],Lfb:["profileTimestampOffsets",{"heaac-2-dash":{64:{ticks:-3268,timescale:48e3},96:{ticks:-3268,timescale:48e3}},"heaac-2hq-dash":{128:{ticks:-3268,timescale:48e3}}}],REb:["audioProfilesNonSyncSamples",["xheaac-dash"]],$ec:["truncateEndOfStreamAudio",!1],ngc:["useDpiAssumedAacEncoderDelay",!0],TZ:["mediaSourceSupportsNegativePts",!1],NQ:["minAudioPtsGap",void 0],PEb:["audioOverlapGuardSampleCount",2],E3a:["enableRecordJSBridgePerf",!1],uia:["JSBridgeTDigestConfig",{maxc:25,c:.5}],Rkb:["throughputThresholdSelectorParam",0],igc:["upswitchDuringBufferingFactor",2],SDb:["allowUpswitchDuringBuffering",!1],R0a:["contentOverrides",void 0],rqa:["contentProfileOverrides",void 0],Yua:["hindsightDenominator",0],Xua:["hindsightDebugDenominator",0],laa:["hindsightAlgorithmsEnabled",[]],maa:["hindsightParam",{numB:1/0,bSizeMs:1e3,fillS:"last",fillHl:1e3}],VYa:["appendMediaRequestOnComplete",!1],iga:["waitForDrmToAppendMedia",!1],chc:["waitForDrmToAppendHeadersWhenClearAndEncryptedContent",!1],Q9:["forceAppendHeadersAfterDrm",!1],Qqa:["declareBufferingCompleteAtSegmentEnd",!1],Cy:["maxActiveRequestsPerSession",void 0],Qwa:["limitAudioDiscountByMaxAudioBitrate",!1],foa:["appendFirstHeaderOnComplete",!0],j1:["strictBufferCapacityCheck",!1],bO:["aseReportDenominator",0],F7:["aseReportIntervalMs",3e5],aEa:["translateToVp9Draft",!1],aBa:["reorderTrakMvex",!1],sS:["switchableAudioProfiles",[]],SEb:["audioProfilesOverride",[{profiles:["ddplus-5.1-dash","ddplus-5.1hq-dash"],override:{maxInitAudioBitrate:256,audioBwFactor:5.02}},{profiles:["ddplus-atmos-dash"],override:{maxInitAudioBitrate:448}}]],Dkb:["switchableAudioProfilesOverride",[{profiles:["ddplus-5.1-dash","ddplus-5.1hq-dash"],override:{maxInitAudioBitrate:192}},{profiles:["ddplus-atmos-dash"],override:{minInitAudioBitrate:448,maxInitAudioBitrate:448,minAudioBitrate:448}}]],TEb:["audioSwitchConfig",{upSwitchFactor:5.02,downSwitchFactor:3.76,lowestBufForUpswitch:16e3,lockPeriodAfterDownswitch:16e3}],Mbb:["maxStartingVideoVMAF",110],iw:["minStartingVideoVMAF",1],VV:["activateSelectStartingVMAF",!1],Gea:["selectStartingVMAFTDigest",-1],SR:["selectStartingVMAFMethod","fallback"],$hb:["selectStartingVMAFMethodCurve",{log_p50:[6.0537,-.8612],log_p40:[5.41,-.7576],log_p20:[4.22,-.867],sigmoid_1:[11.0925,-8.0793]}],jR:["perFragmentVMAFConfig",{enabled:!1,earlyManifestProcessing:!1}],rNb:["disablePtsStartsEvent",!0],LAa:["recordFirstFragmentOnSubBranchCreate",!0],Tbb:["mediaCacheConvertToBinaryData",!1],Oxa:["mediaCacheSaveOneObject",!1],nbb:["markRequestActiveOnFirstByte",!1],ffa:["stopOnAllInactiveRequests",!1],p3a:["enableActiveRequestsInFilters",!1],h9:["earlyAppendSingleChildBranch",!0],KS:["useNativeDataViewMethods",!0],mgc:["useCorrectDrainingAmounts",!0],gP:["enableNewAse",!1],Q1:["useNewApi",!1],mEb:["aseDiagnostics",[{re:"queue-audit",enabled:!0},{re:"task-audit",enabled:!0},{re:"trace-ShimSession",enabled:!0},{re:"trace-engine",enabled:!0},{re:"trace-RequestPacer",enabled:!0},{re:"trace-BufferStateTracker",enabled:!0},{re:"trace-GraphStreamingProcess",enabled:!0},{re:"trace-AsePlaygraph",enabled:!0},{re:"playgraph-branch-audit",enabled:!0},{re:"content-playgraph",enabled:!0},{re:"trace-CphAsePlaygraph",enabled:!0},{re:"trace-GraphLocation",enabled:!0},{re:"cache-ads::gls",enabled:!0},{re:"cache-content::gls",enabled:!0}]],AOb:["enableAseReporting",!0],EFb:["branchDistanceThreshold",6e4],Hba:["maxAllowedOutstandingRequests",4],cya:["minStreamableConcurrencyWindow",3e3],m1b:["maxStreamableConcurrencyWindow",1/0],rDa:["streamableConcurrencyFactor",.3],yW:["bufferingConcurrencyWindow",7800],Noa:["branchCreationThreshold",12e4],l9:["enableDiscontiguousBuffering",!1],Lsa:["forceImmediateTransitionTypeForTitles",[]],Ksa:["forceImmediateTransitionExitZone",0],sqa:["contiguousBufferMultiplier",3],W0a:["contiguousBufferMinimumAudio",1048576],Y0a:["contiguousBufferMinimumVideo",8388608],X0a:["contiguousBufferMinimumText",0],T6b:["prefetchBudgetInBytes",0],ugb:["rebufferRiskHalfLife",1e4],Vfa:["useBufferSizeLimiter",!1],vgc:["useStaticBufferSizeLimiter",!1],W6b:["prefetchWeightBudget",32],fya:["minimumDownstreamBranchProbability",.075],DEa:["useExitZones",!0],X6b:["prefetchWhilePlaying",!0],b7b:["prefetcherSoftReset",!0],bfb:["playgraphDefaultWeight",65520],KMb:["delayNotificationOfEoS",!1],G1b:["memDeadlockShouldCheckMemory",!0],F1b:["memDeadlockOverageThreshold",.9],E1b:["memDeadlockMaxUtilizationPercentage",.5],Pza:["playerPtsPadding",1],brc:["minFragmentVmaf",void 0],uX:["enableCombinedPlaygraphs",!0],ZI:["enableAdPlaygraphs",!0],D3a:["enablePrerollForInitialSeek",!1],qNb:["disablePrerollOn43Seek",!0],FEa:["useLegacyFragmentRounding",!1],Zra:["excludedContentPlaygraphIds",[]],Y7a:["graphSelectorSetAudioRate",!1],ePb:["enableVmafEstimationFromBitrate",!1],n1b:["maxVMAFMappingBitrate",16e3],o1b:["maxVMAFMappingVMAF",110],VGb:["cdndldistEnabled",!1],Ew:["segmentFadeDuration",400],FQ:["maximumFade",{"heaac-2-dash":-44,"heaac-2hq-dash":-44,"ddplus-5.1hq-dash":-44,"ddplus-5.1-dash":-44}],pea:["retainSbrOnFade",!1],y9a:["insertSilentFrameOnFade",!1],N4b:["optimizeEditedFragments",!1],FDa:["supportsPtsChanged",!0],yOb:["enableAdLruCaches",!1],kZa:["aseGcSettings",{segmentPresenting:!0,branchPruned:!0}]},e.wh=e.BIb},function(t,e,i){var n,r,a,o;function s(t,e,i,n,r){return o.call(this,s.console,t,e,i,n,r)||this}_esm(e),e.dx=e.fH=e.ex=e.AQ=e.xka=void 0,n=i(0),r=i(72),Object.defineProperties(e,{fH:{enumerable:!0,get(){return r.fH}}}),Object.defineProperties(e,{dx:{enumerable:!0,get(){return r.dx}}}),Object.defineProperties(e,{AQ:{enumerable:!0,get(){return r.AQ}}}),Object.defineProperties(e,{xka:{enumerable:!0,get(){return r.xka}}}),a=n.__importDefault(i(3)),o=r.ex,n.__extends(s,o),Object.defineProperties(s,{console:{get(){return this.H||(this.H=new a.default.Console("MP4","media|asejs"))},configurable:!0}}),e.ex=s},function(t,e,i){var n,r,a,o;function s(t){return r.uf.call(this,t,"HlsConfigImpl")||this}_esm(e),e.LKa=void 0,t=i(0),n=i(1),r=i(45),a=i(33),i=i(44),S(s,r.uf),nt.Object.defineProperties(s.prototype,{ifb:{configurable:!0,enumerable:!0,get(){return!0}},Gy:{configurable:!0,enumerable:!0,get(){return 16e3}},gC:{configurable:!0,enumerable:!0,get(){return 4e3}},K8a:{configurable:!0,enumerable:!0,get(){return 1e4}},iw:{configurable:!0,enumerable:!0,get(){return 80}},aoa:{configurable:!0,enumerable:!0,get(){return!1}}}),o=s,t.__decorate([i.config(i.Cd,"playsInline")],o.prototype,"ifb",null),t.__decorate([i.config(i.sF,"minAudioMediaRequestDuration")],o.prototype,"Gy",null),t.__decorate([i.config(i.sF,"minVideoMediaRequestDuration")],o.prototype,"gC",null),t.__decorate([i.config(i.sF,"hlsVideoMediaRequestTargetDuration")],o.prototype,"K8a",null),t.__decorate([i.config(i.sF,"minStartingVideoVMAF")],o.prototype,"iw",null),t.__decorate([i.config(i.Cd,"allowMultipleAudioTextTracks")],o.prototype,"aoa",null),o=t.__decorate([n.$(),t.__param(0,n.l(a.Sm))],o),e.LKa=o},function(t,e,i){var n,r;function a(t){this.Aa=t.jb("CdnPartitionerImpl")}_esm(e),e.rHa=void 0,t=i(0),n=i(1),i=i(7),a.prototype.ESb=function(t){var o,s,u,e,i,n,r;function a(t,i,e){var n,r,a=t.map(function(t){return t.Bo});a.sort(function(t,e){return i[t]-i[e]}),1===a.length?u.set(e,{tR:t[0],Cea:t[0]}):((n=a.find(function(t){return o.has(t)}))||((n=a.find(function(t){return!s.has(t)}))?o.add(n):n=a[0]),(r=a.find(function(t){return s.has(t)&&t!==n}))||((r=a.find(function(t){return!o.has(t)&&t!==n}))?s.add(r):r=a.find(function(t){return t!==n})),u.set(e,{tR:t.find(function(t){return t.Bo===n}),Cea:t.find(function(t){return t.Bo===r})}))}return o=new Set,s=new Set,u=new Map,e=t.video,i=t.audio,n=t.text,r=t.Zl.reduce(function(t,e){return t[e.id]=e.cc,t},{}),e.forEach(function(t){a((t=t.stream).urls,r,t.hq)}),i.forEach(function(t){a((t=t.stream).urls,r,t.hq)}),n.forEach(function(t){var e,i;t.track.vF&&!t.track.Taa||(e=t.track,i=t.id,a(t=Object.entries(t.stream.sv).map(function(t){var e=rt(t);return t=e.next().value,e=e.next().value,{Bo:Number(t),url:e}}),e=e.F_a.reduce(function(t,e){return t[e.id]=e.cc,t},{}),i))}),u},r=a,r=t.__decorate([n.$(),t.__param(0,n.l(i.ob))],r),e.rHa=r},function(t,e,i){var n,r,a,o,s,u,c;function h(t,e,i,n,r){this.$f=t,this.WB=e,this.xg=i,this.Dc=n,this.Ga=r}_esm(e),e.QT=void 0,t=i(0),n=i(1),r=i(18),a=i(7),o=i(50),s=i(197),u=i(85),c=i(1166),h.prototype.create=function(t){return new c.ST(this.$f,this.WB,this.xg,this.Ga,this.Dc,t)},i=h,i=t.__decorate([n.$(),t.__param(0,n.l(a.ob)),t.__param(1,n.l(u.Sz)),t.__param(2,n.l(o.jo)),t.__param(3,n.l(s.Jia)),t.__param(4,n.l(r.$c))],i),e.QT=i},function(t,e,i){var s,u,c,h,f,n,l;function r(t,e,i,n,r,a){var o=this;this.WB=e,this.xg=i,this.Ga=n,this.Dc=r,this.Yxa=this.tF=this.u0=0,this.SJ=!1,this.IF=function(){var t=o.L_();t.prstate=o.DB(),t.paustate=o.j.hZ(),t.midplayseq=o.Yxa++,o.Dc.$P(t),o.Jc(s.bd.IF,void 0,l.Xe|l.Ju,t)},this.Ui=function(){o.Jc(s.bd.SZa,void 0,l.Xe|l.Tq,{})},this.Im=function(t){o.Iwa=o.getTime(),o.Jwa=t.oldValue},this.lW=function(t){o.wwa=t.oldValue},this.ida=function(t){t!=o.SJ&&(o.gDa(o.SJ,t),o.SJ=t)},this.gDa=function(t,e){var i=o.j.Ca;o.Dc.Sr(t={newstate:e?"Paused":"Playing",oldstate:t?"Paused":"Playing"},i.Ie.value&&i.Ie.value.stream,i.Rf.value&&i.Rf.value.stream),o.Jc(s.bd.Tjb,void 0,l.Xe,t)},this.b1=function(t){o.Jc(s.bd.Gjb,void 0,l.Xe,{speedold:Math.floor(1e3*t.oldValue),speed:Math.floor(1e3*t.newValue)})},this.SC=function(t){var e,i=o.j.Ca,n=i.Vb.value;(t.newValue||n&&n.Vr()&&!n.uq())&&(e=(t=null!=(e=t.newValue)?e:n)?{trackId:t.trackId,bcp47:t.Bf,downloadableId:t.Wb,rank:t.cc,isImageBased:t.Il}:{},t=(t=o.Jwa)?{trackId:t.trackId,bcp47:t.Bf,downloadableId:t.Wb,rank:t.cc,isImageBased:t.Il}:{},e={switchdelay:u.rg(o.getTime()-o.Iwa),track:e,oldtrack:t},o.Dc.Sr(e,i.Ie.value&&i.Ie.value.stream,i.Rf.value&&i.Rf.value.stream),o.Jc(s.bd.elb,void 0,l.Xe,e))},this.Hza=function(t,e){var i=o.j.Ca;t={waittime:u.rg(t),abortedevent:"resumeplay",resumeplayreason:e},o.Dc.Sr(t,i.tf.value,i.Qh.value),o.Jc(s.bd.sda,void 0,l.Xe|l.Tq,t)},this.MR=function(t,e,i){t={playdelay:u.rg(t),reason:i,intrplayseq:o.tF-1,skipped:e},"repos"===i&&(t.prstate=!0===o.j.tk.value?"playing":"paused"),o.Jc(s.bd.MR,void 0,l.Xe|l.Iu,t)},this.woa=function(){var t,e,i=o.j.Ca.Bc.value,n=o.j.Ca.Qh.value.Wb;i=i?{trackId:i.trackId,bcp47:i.Bf,downloadableId:n,rank:i.cc,chan:i.channels}:{},n=o.SB,e=null==(t=o.wwa)?void 0:t.Wb,t=n?{trackId:n.trackId,bcp47:n.Bf,downloadableId:e,rank:n.cc,chan:n.channels}:{},o.Jc(s.bd.vZa,void 0,l.Xe,{switchdelay:u.rg(o.getTime()-o.xwa),track:i,oldtrack:t})},this.gn=function(t){o.xwa=o.getTime(),o.SB=t.oldValue},this.Iza=function(){var t,e=o.j.Ca,i={abortedevent:"startplay",trackid:e.ql,prstate:o.DB(),paustate:o.j.hZ()};try{(t=c.wJ())&&(i.pdltime=t),u.He(i,e.sd,{prefix:"sm_"})}catch(t){}o.Dc.vaa(i,e),o.Dc.aQ(i,!1,e.Jh.value,e),o.Dc.Sr(i,e.tf.value,e.Qh.value),o.FJ(i),o.Jc(s.bd.sda,void 0,l.Xe|l.Ju|l.Tq,i)},this.zO=function(t,e,i,n){t={moff:u.wn(i),moffms:u.rg(i),vbitrate:e.bitrate,vbitrateold:t.bitrate,vdlid:e.Wb,vdlidold:t.Wb,vheight:e.height,vheightold:t.height,vwidth:e.width,vwidthold:t.width,bw:n},o.Jc(s.bd.zO,void 0,0,t)},this.HR=function(t,e,i){t={moffold:u.wn(t),reposseq:o.u0++,prstate:o.DB(),paustate:o.j.hZ()},o.Dc.Sr(t,i&&i.stream,e&&e.stream),o.Jc(s.bd.HR,void 0,l.Xe,t)},this.rG=function(t){var e,i=t.Ca,n={playdelaysdk:u.rg(o.j.AW()),applicationPlaydelay:u.rg(o.j.ipa()),playdelay:u.rg(o.j.kpa()),trackid:i.ql,bookmark:u.rg(i.mt||0),pbnum:i.index};o.j.Ui&&(n.blocked=o.j.Ui),n.initvbitrate=o.j.XY,o.Dc.pva(n),o.Dc.Z8a(n),n.esnSource=null==(e=bt._cad_global.device)?void 0:e.s9,o.f9a(n,i),n.pdltime=c.wJ(),u.He(n,i.sd,{prefix:"sm_"}),n.ttTrackFields=null==(e=i.Vb.value)?void 0:e.Bh,o.Dc.W8a(n,i.Bc.value,i),o.Dc.aQ(n,!0,i.Jh.value,i),n.packageId=null==(e=i.ja)?void 0:e.hb.ip,o.Dc.$P(n),o.Dc.vaa(n,i),o.FJ(n),o.Jc(s.bd.rG,t.$i,l.Xe|l.Iu|l.Ju|l.PG|l.Tq,n)},this.$I=function(){var t=(e=o.j).Ca,e=e.$i,i=o.L_();i.paustate=!o.j.Wr(),i.muted=o.j.Yva(),i.endreason=e?"error":o.j.Pva()?"ended":"stopped",o.Dc.aQ(i,!1,t.Jh.value,t),o.Dc.$P(i),o.FJ(i),o.Jc(s.bd.$I,e,l.Xe|l.Iu|l.Ju|l.PG|l.Tq,i)},this.ZAa=function(t,e,i){var n=o.j.Ca.Rf;t={moff:u.wn(i),moffms:u.rg(i),vdlidold:t.Wb,vbitrateold:t.bitrate},o.Dc.Sr(t,e,n.value&&n.value.stream),o.Jc(s.bd.Xgb,void 0,0,t)},this.DB=function(){var t=o.j.Gb.value;return t===f.rb.Gc?"playing":t===f.rb.Ug?"paused":t===f.rb.Gs?"ended":"waiting"},this.Aa=t.jb("LogblobBuilderImpl"),this.j=a}_esm(e),e.ST=void 0,s=i(278),u=i(25),c=i(40),h=i(4),f=i(16),n=i(5),r.prototype.getTime=function(){return this.Ga.Tb().ka(n.pa)},r.prototype.kua=function(){return this.getTime()-this.j.Ca.Jj.ka(n.pa)},r.prototype.f9a=function(t,e){var i;(e=null==(i=e.Jh.value)?void 0:i.streams)&&(t.maxbitrate=c.bT(e.map(function(t){return t.bitrate})),t.maxresheight=c.bT(e.map(function(t){return t.height})))},r.prototype.FJ=function(t){t.cachedManifest="notcached",t.cachedLicense="notcached",t.usedldl="false"},r.prototype.L_=function(){var t,e=this.j.Ca,i=e.Am,n={totaltime:u.wn(i.Ct()),totalcontenttime:u.wn(i.CY()),reposcount:this.u0,intrplaycount:this.tF};return n.playqualvideo=JSON.stringify({numskip:0,numlowqual:0}),(t=e.tf.value)&&(n.videofr=t.framerate.toFixed(3)),(t=i.cta())&&(n.abrdel=t),(t=i.haa()&&i.w5a())&&(n.tw_vmaf=t),(i=i.u5a())&&u.He(n,i),n.rbfrs=this.tF,this.f9a(n,e),n},r.prototype.Jc=function(t,e,i,n){var r,a,o=this;e&&h.Pha(null==e?void 0:e.errorCode,null==e?void 0:e.Ba,this.kua(),void 0)&&(r="info"),a=this.j.Ca,this.Ena(n,e,i),n=this.WB.nv(t,e=r||(e?"error":"info"),n,a),this.xg.Jc(n),"error"!==e&&t!==s.bd.$I||this.xg.flush(!1).catch(function(){o.Aa.debug("Failed to flush the logblobs")})},r.prototype.Ena=function(t,e,i){var n=this.j.Ca;this.Dc.uaa(t,n),i&l.Xe&&this.Dc.b9a(t,n,!1),i&l.Iu&&this.Dc.d9a(t,n),i&l.Ju&&this.Dc.e9a(t,this.j.Qo()),e&&i&l.PG&&this.Dc.$8a(t,n,e),i&l.Tq&&this.Dc.pva(t)},e.ST=r,(i=l=l||{})[i.Xe=1]="MOFF",i[i.Iu=2]="PRESENTEDSTREAMS",i[i.Ju=4]="SCREEN",i[i.PG=8]="FATALERROR",i[i.Tq=16]="BROWSERINFO"},function(t,e,i){var n,r,a,o,s,u,c;function h(t,e,i,n,r){this.xg=t,this.config=e,this.Da=i,this.Ga=n,this.fxa=r}_esm(e),e.TT=void 0,t=i(0),n=i(1),r=i(18),a=i(29),o=i(13),s=i(50),u=i(477),c=i(1168),h.prototype.create=function(t){return new c.VT(t,this.xg,this.config,this.Ga,this.fxa.create(t))},i=h,i=t.__decorate([n.$(),t.__param(0,n.l(s.jo)),t.__param(1,n.l(o.Oc)),t.__param(2,n.l(a.Lh)),t.__param(3,n.l(r.$c)),t.__param(4,n.l(u.RT))],i),e.TT=i},function(t,e,i){var n,o,s;function r(t,e,i,n,r){var a=this;this.j=t,this.xg=e,this.config=i,this.Ga=n,this.sb=r,this.FW=function(){a.eh(),a.j.Ca.uj.removeListener(a.SC),a.j.Ca.Vb.removeListener(a.sb.Im),a.j.Ca.Bc.removeListener(a.gn),a.j.Ca.Qh.removeListener(a.sb.lW),a.j.tk.removeListener(a.hfb),a.j.IR.removeListener(a.kl),a.j.Ca.Ie.removeListener(a.W_),a.j.Gb.removeListener(a.Ux),a.j.Gb.removeListener(a.xO),a.j.Ca.tf.removeListener(a.a2),a.j.Ca.playbackRate.removeListener(a.sb.b1),a.j.removeEventListener(s.Na.closed,a.FW),a.j.removeEventListener(s.Na.R7,a.sb.Ui)},this.xO=function(){a.j.Gb.value===s.rb.Gc&&(a.j.Gb.removeListener(a.xO),a.ow())},this.SC=function(t){a.cs&&a.sb.SC(t)},this.kl=function(t){a.cs&&void 0!==t.newValue&&(a.gu&&a.Rq&&a.sb.Hza(a.getTime()-a.Rq,a.gu),a.gu="repos",a.sb.HR(t.newValue,a.j.Ca.Rf.value,a.j.Ca.Ie.value),a.Rq=a.getTime(),o.pg(a.Ux))},this.hfb=function(t){a.cs&&a.sb.ida(!t.newValue)},this.gn=function(t){t.oldValue&&(a.SB=t.oldValue,a.sb.gn(t),a.gu="repos",a.Rq=a.getTime(),o.pg(a.Ux))},this.Ux=function(){var t;a.Rq&&a.j.Gb.value!==s.rb.fg&&(t=a.getTime()-a.Rq,a.sb.MR(t,!1,a.gu),a.SB&&a.SB!=a.j.Ca.Bc.value&&a.sb.woa(),a.Rq=void 0,a.gu=void 0)},this.ow=function(){a.cs||(a.cs=!0,a.sb.rG(a.j),a.yva(),a.config().Caa&&(a.PB=bt.setTimeout(function(){a.xg.flush(!1).catch(function(){return a.log.warn("failed to flush log batcher on initialLogFlushTimeout")}),a.PB=void 0},a.config().Caa)))},this.eh=function(){a.PB&&(bt.clearTimeout(a.PB),a.PB=void 0),a.M1&&a.M1(),a.cs?a.sb.$I():a.j.$i?a.sb.rG(a.j):a.sb.Iza()},this.a2=function(t){t.oldValue&&t.Vk&&t.Vk.FI&&a.sb.zO(t.oldValue,t.newValue,t.Vk.FI,t.Vk.tW)},this.W_=function(t){var e;t.newValue&&(e=t.newValue.stream,a.TJ!=e&&(a.TJ&&e&&a.sb.ZAa(a.TJ,e,t.newValue.kn.startTime),a.TJ=e))},this.afa()}_esm(e),e.VT=void 0,n=i(5),o=i(58),s=i(16),r.prototype.afa=function(){this.j.addEventListener(s.Na.closed,this.FW),this.j.addEventListener(s.Na.R7,this.sb.Ui),this.j.Ca.uj.addListener(this.SC),this.j.Ca.Vb.addListener(this.sb.Im),this.j.Ca.Bc.addListener(this.gn),this.j.Ca.Qh.addListener(this.sb.lW),this.j.tk.addListener(this.hfb),this.j.IR.addListener(this.kl),this.j.Ca.Ie.addListener(this.W_),this.j.Gb.addListener(this.Ux),this.j.Gb.addListener(this.xO),this.j.Ca.tf.addListener(this.a2),this.j.Ca.playbackRate.addListener(this.sb.b1)},r.prototype.getTime=function(){return this.Ga.Tb().ka(n.pa)},r.prototype.yva=function(){var t,e=this,i=[];this.config().hcb&&(this.config().icb.forEach(function(t){i.push(bt.setTimeout(e.sb.IF,t))}),this.config().cca&&(t=bt.setInterval(this.sb.IF,this.config().cca)),this.M1=function(){i.forEach(function(t){bt.clearTimeout(t)}),t&&bt.clearInterval(t)})},e.VT=r},function(t,e,i){var n,r,a,o;_esm(e),e.zL=void 0,t=i(1),n=i(1170),r=i(1171),a=i(478),o=i(479),e.zL=new t.Ad(function(t){t(o.jTa).to(n.iTa),t(a.gTa).Jm(new r.fTa),t(o.hTa).Ue(function(t){return function(){return t.zb.get(o.jTa)}})})},function(t,e,i){var n,r,a,o;function s(t){this.config=t,this.UCa=r.Ka,this.fS=[]}_esm(e),e.iTa=void 0,t=i(0),n=i(1),r=i(52),a=i(5),i=i(478),s.prototype.So=function(){for(var t,e;0<this.fS.length;)e=this.fS.shift(),this.eYa(e);return t=(e=void 0===this.mX||void 0===this.VI?a.Ka:this.VI.Ea(this.mX)).y$a()?0:this.UCa.ka(r.KG)/e.ka(a.pa),{PDa:Math.floor(t),Poc:e.ka(a.pa)}},s.prototype.RCb=function(t){for(this.UCa=this.UCa.add(t.size),this.fS.push(t.ONb),this.fS.sort(function(t,e){return t.start.lm(e.start)});this.fS.length>this.config.PNb;)t=this.fS.shift(),this.eYa(t)},s.prototype.eYa=function(t){void 0===this.mX&&(this.mX=t.start),void 0!==this.VI&&this.VI.lm(t.start)<0&&(this.mX=this.mX.add(t.start.Ea(this.VI))),(void 0===this.VI||this.VI.lm(t.end)<0)&&(this.VI=t.end)},o=s,o=t.__decorate([n.$(),t.__param(0,n.l(i.gTa))],o),e.iTa=o},function(t,e,i){function n(t){this.PNb=void 0===t?10:t}_esm(e),e.fTa=void 0,t=i(0),i=i(1),n=t.__decorate([i.$()],n),e.fTa=n},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,d,p,b,g,m,v,y,w,A,_,E,k;_esm(e),e.Jo=void 0,t=i(1),n=i(26),r=i(13),a=i(1173),o=i(162),s=i(163),u=i(1174),c=i(279),h=i(1175),f=i(480),l=i(481),d=i(1176),p=i(14),b=i(486),g=i(1180),m=i(487),v=i(1181),y=i(283),w=i(1182),A=i(488),_=i(38),E=i(485),k=i(1183),e.Jo=new t.Ad(function(t){t(s.tU).to(u.zSa).la(),t(n.Jz).to(a.nIa).la(),t(c.MLa).to(h.LLa).la(),t(l.nHa).to(d.mHa).la(),t(c.UPa).Jm({isTypeSupported:p.xD&&p.xD.isTypeSupported}),t(f.EJa).yG(function(t){return{jTb:function(){return t.zb.get(_.J4)}}}),t(o.ZL).yG(function(t){return t.zb.get(r.Oc)}),t(b.mNa).to(g.jNa).la(),t(E.iNa).to(k.hNa).la(),t(m.lNa).to(v.kNa).la(),t(y.Tha).to(w.DJa).la(),t(A.jRa).Jm(bt)})},function(t,e,i){var r,n,a,o,s,u;function c(t,e,i){this.config=t,this.D_a=e,this.f6b=i,this.S7b=this.mLb()}_esm(e),e.nIa=void 0,t=i(0),r=i(26),n=i(162),a=i(1),o=i(42),s=i(480),i=i(481),c.prototype.K7a=function(t){return this.r5a().L7a(t)},c.prototype.M7a=function(t){return this.Mv().L7a(t)},c.prototype.r5a=function(){return this.soa&&this.soa.type==this.config().toa||(this.soa=this.D_a.uKb(this.config().toa)),this.soa},c.prototype.Mv=function(){return this.bga&&this.bga.type==this.config().cga||(this.bga=this.D_a.ALb(this.config().cga),this.bga.Gna(this.f6b.jTb())),this.bga},c.prototype.vTb=function(t){var e;if(!t||!t.length)return r.wf.s3;t=this.QQb(t);for(var i=[r.wf.rU,r.wf.s3,r.wf.HM,r.wf.gM,r.wf.Zw,r.wf.gD,r.wf.HD,r.wf.sl],n=i.length;n--;)if((0,this.S7b[e=i[n]])(t))return e;return r.wf.rU},c.prototype.vL=function(t){return this.Mv().vL(t)},c.prototype.DI=function(t){return this.Mv().DI(t)},c.prototype.pJ=function(){return this.Mv().pJ()},c.prototype.r$=function(){return this.Mv().r$()},c.prototype.m1=function(){return this.Mv().m1()},c.prototype.k1=function(){return this.r5a().k1()},c.prototype.qfa=function(){return this.Mv().qfa()},c.prototype.n1=function(){return this.Mv().n1()},c.prototype.aY=function(t){return this.Mv().aY(t)},c.prototype.vY=function(){return this.Mv().vY()},c.prototype.G$=function(){return this.Mv().G$()},c.prototype.QQb=function(t){var e={};return t.filter(function(t){return"video"===t.type}).forEach(function(t){e[t.mf]=""}),Object.keys(e)},c.prototype.mLb=function(){var t={};return t[r.wf.sl]=function(t){return t.some(function(t){return-1<t.indexOf("av1")})},t[r.wf.gD]=function(t){return t.some(function(t){return-1<t.indexOf("hpl")})},t[r.wf.HD]=function(t){return t.some(function(t){return-1<t.indexOf("vp9")})},t[r.wf.Zw]=function(t){return t.some(function(t){return-1<t.indexOf("hevc-dv")})},t[r.wf.gM]=function(t){return t.some(function(t){return-1<t.indexOf("hevc-hdr")})},t[r.wf.HM]=function(t){return t.some(function(t){return-1<t.indexOf("hevc-main10-L")||-1<t.indexOf("hevc-main-L")})},t[r.wf.s3]=function(t,e){var i={};for(t.forEach(function(t){return i[t]=1}),e=(t=rt(e)).next();!e.done;e=t.next())if(i[e.value])return!0;return!1}.bind(null,[o.I.SG]),t[r.wf.rU]=function(){return!0},t},u=c,u=t.__decorate([a.$(),t.__param(0,a.l(n.ZL)),t.__param(1,a.l(i.nHa)),t.__param(2,a.l(s.EJa))],u),e.nIa=u},function(t,e,i){var n,r,a,o,s,u,c,h;function f(t,e,i){this.Jo=t,this.Eb=e,this.jkb=i,this.kCb="video/mp4; codecs={0}",this.Ywb="audio/mp4; codecs={0}",t=this.Jo.aY(r.wf.Zw),this.jCb=o.Rd.H1a(t)}_esm(e),e.zSa=void 0,t=i(0),r=i(26),a=i(1),o=i(123),s=i(27),u=i(216),c=i(482),h=i(17),f.prototype.C8=function(t){return t=this.Jo.vTb(t),t=this.Eb.SI(t)?t:r.wf.rU,this.jkb.format(this.kCb,this.jCb[t])},f.prototype.w8=function(t){return 0===t.length?this.jkb.format(this.Ywb,o.Rd.uga):(t=c.pGa[t[0].mf]||n.gFa)===n.gFa?h.p4:t===n.gob?h.OMa:h.NMa},(i=n=f).gFa="AAC",i.gob="XHEAAC",i=n=t.__decorate([a.$(),t.__param(0,a.l(r.Jz)),t.__param(1,a.l(s.Tg)),t.__param(2,a.l(u.Gka))],i),e.zSa=i},function(t,e,i){var n,r,a,o,s;function u(t,e){this.config=t,this.uMb=e}_esm(e),e.LLa=void 0,t=i(0),n=i(1),r=i(279),a=i(162),o=i(26),s=i(280),u.prototype.u1a=function(){return this.config().cga!==o.Tm.Wz?this.uMb:s.vD.WKb()},i=u,i=t.__decorate([n.$(),t.__param(0,n.l(a.ZL)),t.__param(1,n.l(r.UPa))],i),e.LLa=i},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,d,p,b,g,m,v,y;function w(t,e,i,n,r,a,o,s,u,c){this.u$a=t,this.config=e,this.zc=i,this.Da=n,this.is=r,this.Aq=a,this.Pt=o,this.platform=s,this.qc=u,this.eC=c}_esm(e),e.mHa=void 0,t=i(0),n=i(1),r=i(26),a=i(279),o=i(162),s=i(1177),u=i(1178),c=i(282),h=i(483),f=i(46),l=i(29),d=i(27),p=i(1179),b=i(98),g=i(7),m=i(47),v=i(31),i=i(485),w.prototype.uKb=function(t){var e=this.u$a.u1a();return t!==r.Ww.Wz?new h.c3(this.config,e,this.eC):new s.MNa(this.config,e,this.is,this.platform,this.eC)},w.prototype.ALb=function(t){var e=this.u$a.u1a();switch(t){case r.Tm.XL:t=new p.uHa(this.config,e,this.is,this.Aq,this.Pt,this.Da,this.eC);break;case r.Tm.Wz:t=new u.SMa(this.config,e,this.is,this.zc,this.Da,this.Pt,this.qc,this.eC,this.Aq);break;default:t=new c.mD(this.config,e,this.is,this.eC)}return t},y=w,y=t.__decorate([n.$(),t.__param(0,n.l(a.MLa)),t.__param(1,n.l(o.ZL)),t.__param(2,n.l(f.Wj)),t.__param(3,n.l(l.Lh)),t.__param(4,n.l(d.Tg)),t.__param(5,n.l(b.Vz)),t.__param(6,n.l(g.ob)),t.__param(7,n.l(m.Yq)),t.__param(8,n.l(v.Ji)),t.__param(9,n.l(i.iNa))],y),e.mHa=y},function(t,e,i){var a,n,r,o,s;function u(t,e,i,n,r){return(t=o.c3.call(this,t,e,r)||this).is=i,t.platform=n,t.type=a.Ww.Wz,t}_esm(e),e.MNa=void 0,a=i(26),n=i(42),r=i(95),o=i(483),s=i(280),S(u,o.c3),u.prototype.k1=function(){return Promise.resolve(this.config().eP&&this.WA(r.Db.$z,"avc1,mp4a",["audio-endpoint-codec=DD+JOC"]))},u.prototype.ut=function(){var t,e={};return e[n.ae.TG]="mp4a.40.2",e[n.ae.UG]="mp4a.40.2","browser"===this.platform.fra?(t={},Object.assign(Object.assign({},e),(t[n.ae.uT]=this.config().eP?{Wd:"avc1",keySystem:r.Db.$z,features:["audio-endpoint-codec=DD+JOC"]}:void 0,t[n.ae.vT]=this.config().eP?{Wd:"avc1",keySystem:r.Db.$z,features:["audio-endpoint-codec=DD+JOC"]}:void 0,t[n.ae.K3]=void 0,t[n.ae.eA]=void 0,t[n.ae.N2]=void 0,t))):(t={},Object.assign(Object.assign({},e),(t[n.ae.uT]=this.config().s3a?"ec-3":void 0,t[n.ae.N2]=this.config().r3a?"ec-3":void 0,t[n.ae.vT]=this.config().eP?{Wd:"avc1",keySystem:r.Db.$z,features:["audio-endpoint-codec=DD+JOC"]}:void 0,t[n.ae.K3]=void 0,t[n.ae.eA]=void 0,t)))},u.prototype.jsa=function(t){var e,i,n;return t=this.c0[t],e=[],i=r.Db.$z,t?(this.is.$u(t)?n=t:(e=t.features,n=t.Wd,i=t.keySystem),this.WA(i,n,e)?Promise.resolve({supported:!0}):Promise.resolve({supported:!1,reason:"ms-can-present-codec-with-features"})):Promise.resolve({supported:!1,reason:"ms-no-properties"})},u.prototype.WA=function(t,e,i){return t=s.vD.y8(t,e,i),this.DI(t)},e.MNa=u},function(t,e,i){var n,c,h,r,d,a,o,s,u,f,l,p,b,g,m,v,y,w,A,_,E;function k(t,e,i,n,r,a,o,s,u){return(t=c.mD.call(this,t,e,i,s)||this).zc=n,t.Da=r,t.Pt=a,t.qc=o,t.eC=s,t.Aq=u,t.type=h.Tm.Wz,t.pT="hvc1",t.vpb="avc1",t.Qeb={},t.log=t.Pt.jb("MicrosoftVideoCapabilityDetector"),t.Hcc(),t.l1&&t.config().N1b?t.a3a=t.NKb():(t.a3a=Promise.resolve(""),t.config().P1b?t.SKb():t.config().O1b&&t.RKb()),t}_esm(e),e.SMa=void 0,n=i(42),c=i(282),h=i(26),t=i(125),r=i(95),d=i(5),a=i(349),o=i(123),s=i(280),u=i(48),f=i(172),l="decode-res-x=1920 decode-res-y=1080 decode-bpc=8 decode-bitrate=5800 decode-fps=30 display-res-x=1920 display-res-y=1080 display-bpc=8".split(" "),p="decode-res-x=3840 decode-res-y=2160 decode-bpc=10 decode-bitrate=16000 decode-fps=30 display-res-x=2560 display-res-y=1440 display-bpc=8".split(" "),b="decode-res-x=3840 decode-res-y=2160 decode-bpc=10 decode-bitrate=16000 decode-fps=30 display-res-x=3840 display-res-y=2160 display-bpc=8".split(" "),g="decode-res-x=1920 decode-res-y=1080 decode-bpc=10 decode-bitrate=5800 decode-fps=30 display-res-x=1920 display-res-y=1080 display-bpc=8 hdr=1".split(" "),m="decode-res-x=3840 decode-res-y=2160 decode-bpc=10 decode-bitrate=16000 decode-fps=30 display-res-x=2560 display-res-y=1440 display-bpc=8 hdr=1".split(" "),v="decode-res-x=1920 decode-res-y=1080 decode-bpc=10 decode-bitrate=5800 decode-fps=30 display-res-x=1920 display-res-y=1080 display-bpc=8 hdr=1 ext-profile=dvhe.05".split(" "),y="decode-res-x=3840 decode-res-y=2160 decode-bpc=10 decode-bitrate=16000 decode-fps=30 display-res-x=2560 display-res-y=1440 display-bpc=8 hdr=1 ext-profile=dvhe.05".split(" "),w=["hdcp=1"],A=["hdcp=2"],_=new t.tH,E=new a.$ga,S(k,c.mD),k.prototype.aY=function(t){return t===h.wf.Zw&&this.config().ogc?o.Rd.aia:c.mD.prototype.aY.call(this,t)},k.prototype.vL=function(t){switch(t){case h.Vq.n4:return this.xkb();case h.Vq.$G:return this.e0;default:return Promise.resolve(!1)}},k.prototype.pJ=function(){var t;return(t=this).keySystem||(this.keySystem=this.config().wu?this.Aq.aF().then(function(t){return t.keySystem}):t.l1?t.jXb?t.xkb().then(function(t){return Promise.resolve(t?r.Db.je:r.Db.mH)}):Promise.resolve(r.Db.mH):t.Gdc?Promise.resolve(r.Db.mH):Promise.resolve(r.Db.$z)),this.keySystem},k.prototype.r$=function(){return this.a3a},k.prototype.m1=function(){return Promise.resolve({result:this.wkb(),reason:"is-type-supported"})},k.prototype.n1=function(){return this.l1&&this.zkb()?this.e0:Promise.resolve(!1)},k.prototype.qfa=function(){return Promise.resolve(this.vkb()).then(function(t){return{result:t,reason:"isTypeSupportedWithFeatures"}})},k.prototype.Gna=function(t){this.$r=t,Object.assign(this.$r,this.Qeb),t.itshwdrm=this.l1,t.itsqhd=this.ykb(),t.itshevc=this.zkb(),t.itshdr=this.wkb(),t.itsdv=this.vkb(),t.itsav1=this.Ddc(),this.wEa()},k.prototype.YV=function(t,e){(this.$r||this.Qeb)[t]=e},k.prototype.vY=function(){var e=this;return this.vL(h.Vq.$G).then(function(t){return t?e.x8(h.Vq.$G):e.vL(h.Vq.n4).then(function(t){return t?e.x8(h.Vq.n4):e.x8(void 0)})})},k.prototype.G$=function(){return this.config().wu?Promise.resolve(void 0):this.pJ().then(function(t){return t===r.Db.je?{DEVICE_SECURITY_LEVEL:"3000"}:void 0})},k.prototype.jsa=function(r){var a=this;return this.pJ().then(function(t){var e,i,n=a.c0[r];return n?(e=[],a.is.$u(n)?i=n:(e=n.features,i=n.Wd,t=n.keySystem),a.WA(t,i,e)?{supported:!0}:{supported:!1,reason:"ms-can-present-codec-with-features"}):{supported:!1,reason:"ms-no-properties"}})},k.prototype.ut=function(){var t=c.mD.prototype.ut.call(this);return t[n.I.o5]=t[n.I.n5]=t[n.I.m5]=t[n.I.Ska]={Wd:"vp09.00.11.08.02",keySystem:r.Db.je,features:l},t[n.I.O3]=t[n.I.N3]=t[n.I.M3]={Wd:"hev1.2.6.L90.B0",keySystem:r.Db.je,features:p},t[n.I.R3]=t[n.I.Q3]=t[n.I.P3]={Wd:"hev1.2.6.L93.B0",keySystem:r.Db.je,features:p},t[n.I.U3]=t[n.I.T3]=t[n.I.S3]={Wd:"hev1.2.6.L120.B0",keySystem:r.Db.je,features:p},t[n.I.X3]=t[n.I.W3]=t[n.I.V3]={Wd:"hev1.2.6.L123.B0",keySystem:r.Db.je,features:p},t[n.I.Z3]=t[n.I.ET]=t[n.I.Y3]={Wd:"hev1.2.6.L150.B0",keySystem:r.Db.je,features:p},t[n.I.b4]=t[n.I.FT]=t[n.I.a4]={Wd:"hev1.2.6.L153.B0",keySystem:r.Db.je,features:p},t[n.I.v3]=t[n.I.u3]=t[n.I.t3]={Wd:"hev1.2.6.L90.B0",keySystem:r.Db.je,features:g},t[n.I.y3]=t[n.I.x3]=t[n.I.w3]={Wd:"hev1.2.6.L93.B0",keySystem:r.Db.je,features:g},t[n.I.A3]=t[n.I.DT]=t[n.I.z3]={Wd:"hev1.2.6.L120.B0",keySystem:r.Db.je,features:g},t[n.I.D3]=t[n.I.C3]=t[n.I.B3]={Wd:"hev1.2.6.L123.B0",keySystem:r.Db.je,features:m},t[n.I.G3]=t[n.I.F3]=t[n.I.E3]={Wd:"hev1.2.6.L150.B0",keySystem:r.Db.je,features:m},t[n.I.J3]=t[n.I.I3]=t[n.I.H3]={Wd:"hev1.2.6.L153.B0",keySystem:r.Db.je,features:m},t[n.I.Q2]=t[n.I.P2]={Wd:"hev1.2.6.L90.B0",keySystem:r.Db.je,features:v},t[n.I.S2]=t[n.I.R2]={Wd:"hev1.2.6.L93.B0",keySystem:r.Db.je,features:v},t[n.I.T2]=t[n.I.zha]=t[n.I.wT]={Wd:"hev1.2.6.L120.B0",keySystem:r.Db.je,features:v},t[n.I.V2]=t[n.I.Aha]=t[n.I.U2]={Wd:"hev1.2.6.L123.B0",keySystem:r.Db.je,features:y},t[n.I.X2]=t[n.I.Bha]=t[n.I.W2]={Wd:"hev1.2.6.L150.B0",keySystem:r.Db.je,features:y},t[n.I.Z2]=t[n.I.Cha]=t[n.I.Y2]={Wd:"hev1.2.6.L153.B0",keySystem:r.Db.je,features:y},t[n.I.eD]={Wd:"av01.0.04M.10",keySystem:r.Db.je,features:l},t[n.I.fD]={Wd:"av01.0.05M.10",keySystem:r.Db.je,features:l},t[n.I.q2]={Wd:"av01.0.08M.10",keySystem:r.Db.je,features:l},t[n.I.r2]={Wd:"av01.0.09M.10",keySystem:r.Db.je,features:l},t[n.I.s2]={Wd:"av01.0.12M.10",keySystem:r.Db.je,features:b},t[n.I.t2]={Wd:"av01.0.13M.10",keySystem:r.Db.je,features:b},t},k.prototype.WA=function(t,e,i){return t=s.vD.y8(t,e,i),this.DI(t)},k.prototype.ykb=function(){return this.WA(r.Db.je,this.pT,p)},k.prototype.wkb=function(){return this.WA(r.Db.je,this.pT,g)},k.prototype.vkb=function(){return this.WA(r.Db.je,this.pT,v)},k.prototype.Ddc=function(){return this.WA(r.Db.je,o.Rd.sl,l)},k.prototype.zkb=function(){return this.WA(r.Db.je,this.pT,b)},k.prototype.xkb=function(){var e=this;return this.e0.then(function(t){return t?Promise.resolve(t):e.Nfb})},k.prototype.wEa=function(){this.$r&&(this.$r.itshdcp=JSON.stringify({hdcp1:this.u8a,time1:this.Ukb-this.Njb,hdcp2:this.v8a,time2:this.Vkb-this.Ojb}))},k.prototype.Hcc=function(){var e=this;this.l1?(this.e0=this.o7a(this.config().gcb,this.config().R1b,function(){var t=e.tTb();return["maybe"!==t,t]}).then(function(t){return"probably"===t}),this.Nfb=this.e0.then(function(t){return!!t||e.o7a(e.config().gcb,e.config().Q1b,function(){var t=e.sTb();return["maybe"!==t,t]}).then(function(t){return"probably"===t})})):(this.Nfb=Promise.resolve(!0),this.e0=Promise.resolve(!1))},k.prototype.o7a=function(a,o,s){var u=this;return new Promise(function(i){var n,r,t=(e=rt(s())).next().value,e=e.next().value;if(t)return i(e);n=u.zc.H0(d.vc(a),function(){var t=(e=rt(s())).next().value,e=e.next().value;t&&(n.cancel(),r.cancel(),i(e))}),r=u.zc.Mj(d.vc(o),function(){n.cancel(),r.cancel(),i("timeout")})})},k.prototype.sTb=function(){var t=s.vD.y8(r.Db.mH,this.vpb,w).split("|");return this.u8a=s.vD.DDa(t[0],t[1]),this.Ukb=this.Da.Ef.ka(d.pa),this.Njb=this.Njb||this.Ukb,this.wEa(),this.u8a},k.prototype.tTb=function(){var t=s.vD.y8(r.Db.je,this.pT,A).split("|");return this.v8a=s.vD.DDa(t[0],t[1]),this.Vkb=this.Da.Ef.ka(d.pa),this.Ojb=this.Ojb||this.Vkb,this.wEa(),this.v8a},k.prototype.NKb=function(){var e=this;return this.xqa(r.Db.je,'<PlayReadyCDMData type="DriverInfo"><DriverInfo version="1.0"><ServerCert>'+u.HOa+"</ServerCert></DriverInfo></PlayReadyCDMData>").then(function(t){return e.log.debug("DriverInfo: "+t),t}).catch(function(t){throw e.YV("itsDriverInfo","exception"),e.log.error("DriverInfo exception",t),t})},k.prototype.RKb=function(){var i=this;this.xqa(r.Db.$z,'<PlayReadyCDMData type="HardwareInfo"><HardwareInfo version="1.0"></HardwareInfo></PlayReadyCDMData>').then(function(t){var e=String.fromCharCode.apply(void 0,i.qc.decode(t));return i.YV("itsHardwareInfo",e),i.log.debug("HardwareInfo: "+e),t}).catch(function(t){throw i.YV("itsHardwareInfo","exception"),i.log.error("HardwareInfo exception",t),t})},k.prototype.SKb=function(){var i=this;this.xqa(r.Db.$z,'<PlayReadyCDMData type="ResetHardwareDRMDisabled"><ResetHardwareDRMDisabled version="1.0"></ResetHardwareDRMDisabled></PlayReadyCDMData>').then(function(t){var e=String.fromCharCode.apply(void 0,i.qc.decode(t));return i.YV("itsHardwareReset",e),i.log.debug("ResetHardwareDRMDisabled: "+e),t}).catch(function(t){throw i.YV("itsHardwareReset","exception"),i.log.error("ResetHardwareDRMDisabled exception",t),t})},k.prototype.xqa=function(h,f){var l=this;return new Promise(function(i,n){var t,e,r;function a(e){try{u(e.target,"Unexpectedly got an mskeyerror event: 0x"+E.jJ(e&&e.target&&e.target.error&&e.target.error.Lsc||0,4))}catch(t){u(e.target,t)}}function o(t){u(t.target,"Unexpectedly got an mskeyadded event")}function s(e){var t;try{t=l.fsa(e.message,"PlayReadyKeyMessage","Challenge"),c(e.target),i(t)}catch(t){u(e.target,t)}}function u(t,e){l.log.error("PlayReadyChallenge error",{cdmData:f}),c(t),n(e)}function c(t){t.removeEventListener("mskeymessage",s),t.removeEventListener("mskeyadded",o),t.removeEventListener("mskeyerror",a),r&&r.cancel()}try{t=new Uint8Array(_.hkb(f)),(e=new bt.MSMediaKeys(h).createSession("video/mp4",new Uint8Array(0),t)).addEventListener("mskeymessage",s),e.addEventListener("mskeyadded",o),e.addEventListener("mskeyerror",a),r=l.zc.Mj(d.vc(1e3),function(){u(e,Error("timeout"))})}catch(t){n(t)}})},k.prototype.fsa=function(t,e){for(var i,n,r,a=1;a<arguments.length;++a);for(a="",n=t.length,i=0;i<n;i++)0<(r=t[i])&&(a+=String.fromCharCode(r));for(n="\\s*(.*)\\s*",i=arguments.length-1;0<i;i--){if(a.search(r=arguments[i])<0)return;n="[\\s\\S]*<"+(r="(?:[^:].*:|)"+r)+"[^>]*>"+n+"</"+r+">[\\s\\S]*"}if(a=a.match(new RegExp(n)))return a[1]},k.prototype.gwa=function(i){var t=this;return this.pJ().then(function(e){return[f.If.gD,f.If.HD].some(function(t){return t.test(i)})&&t.config().fcb&&![r.Db.mH,r.Db.aQa].some(function(t){return t===e})?{supported:!1,reason:"ms-restricted"}:{supported:!0}})},nt.Object.defineProperties(k.prototype,{jXb:{configurable:!0,enumerable:!0,get(){return this.config().w3a&&(!this.config().S1b||this.ykb())}},l1:{configurable:!0,enumerable:!0,get(){try{return this.DI(r.Db.je+"|"+o.Rd.$xa)}catch(t){return!1}}},Gdc:{configurable:!0,enumerable:!0,get(){try{return this.DI(r.Db.mH)}catch(t){return!1}}}}),e.SMa=k},function(t,e,i){var s,u,n,r,a;function o(t,e,i,n,r,a,o){return(t=s.mD.call(this,t,e,i,o)||this).Aq=n,t.Pt=r,t.Da=a,t.eC=o,t.type=u.Tm.XL,t.log=t.Pt.jb("ChromeVideoCapabilityDetector"),t}_esm(e),e.uHa=void 0,s=i(282),u=i(26),n=i(5),r=i(48),a=i(172),S(o,s.mD),o.prototype.vL=function(t){return t!==u.Vq.$G?Promise.resolve(!1):this.Edc},o.prototype.vY=function(){var e=this;return this.vL(u.Vq.$G).then(function(t){return t?u.Vq.$G:void 0}).then(function(t){return e.x8(t)})},o.prototype.Gna=function(t){this.$r=t},o.prototype.DZb=function(t){return!(null==(t=t.getConfiguration().videoCapabilities)||!t.some(function(t){return(null==t?void 0:t.robustness)===r.rD}))},o.prototype.imb=function(){var t;this.$r&&(t=this.w8a&&this.y8a&&this.w8a.Ea(this.y8a).ka(n.pa),this.$r.itshdcp=JSON.stringify({hdcp2:this.Qv,time2:t}))},o.prototype.gwa=function(e){var i=this;return this.Aq.aF().then(function(t){return t=r.A$(t),[a.If.gD,a.If.HD].some(function(t){return t.test(e)})&&i.config().fcb&&t===r.rD?{supported:!1,reason:"mcclearen-restricted"}:a.If.Arb.test(e)&&!(i.config().HOb||i.config().v3a&&t===r.rD)||a.If.HM.test(e)&&(!i.config().v3a||t!==r.rD)?{supported:!1,reason:"robustness-restricted"}:{supported:!0}})},nt.Object.defineProperties(o.prototype,{mediaKeys:{configurable:!0,enumerable:!0,get(){return this.Zbb||(this.Zbb=this.Aq.aF().then(function(t){return t.createMediaKeys()})),this.Zbb}},Edc:{configurable:!0,enumerable:!0,get(){var i=this;return this.EDa||(this.config().JOb?this.EDa=Promise.all([this.Aq.aF(),this.mediaKeys]).then(function(t){var e=rt(t);return t=e.next().value,e=e.next().value,i.DZb(t)?e&&e.getStatusForPolicy?(i.y8a=i.Da.Ef,e.getStatusForPolicy({minHdcpVersion:"2.2"}).then(function(t){return i.w8a=i.Da.Ef,i.Qv=t,i.log.trace("hdcpStatus: "+i.Qv),"usable"===i.Qv})):(i.Qv="not available",i.log.trace("hdcpStatus: "+i.Qv),!1):(i.Qv="not HW_SECURE_ALL",i.log.trace("hdcpStatus: "+i.Qv),!1)}).catch(function(t){return i.Qv="exception",i.log.error("Exception in supportsHdcpLevel",{hdcpStatus:i.Qv},t),!1}).then(function(t){return i.imb(),t}):(this.Qv="not enabled",this.log.trace("hdcpStatus: "+this.Qv),this.imb(),this.EDa=Promise.resolve(!1))),this.EDa}}}),e.uHa=o},function(t,e,i){var n,r;function a(t){this.navigator=t,this.Vbb="mediaCapabilities"in this.navigator&&"decodingInfo"in this.navigator.mediaCapabilities}_esm(e),e.jNa=void 0,t=i(0),n=i(1),i=i(38),a.prototype.isa=function(t){return this.Vbb?this.navigator.mediaCapabilities.decodingInfo({type:"media-source",video:{contentType:t.contentType,width:t.width,height:t.height,bitrate:t.bitrate,framerate:t.framerate}}).then(function(t){return{supported:t.supported,smooth:t.smooth,powerEfficient:t.powerEfficient}}):Promise.reject("MediaCapabilities not supported")},r=a,r=t.__decorate([n.$(),t.__param(0,n.l(i.tM))],r),e.jNa=r},function(t,e,i){var n,r,a,o;function s(t,e){this.mediaCapabilities=t,this.log=e.jb("MediaCapabilities"),this.c0=o.d3.ut()}_esm(e),e.kNa=void 0,t=i(0),n=i(486),r=i(7),a=i(1),o=i(246),s.prototype.isa=function(t){var e,i,n=this,r={Rc:void 0};return this.mediaCapabilities.Vbb&&(i={contentType:'video/mp4; codecs="'+(null!=(e=this.c0[t.mf])?e:"avc1.640028")+'"',width:t.width,height:t.height,bitrate:1e3*t.bitrate,framerate:24},this.mediaCapabilities.isa(i).then(function(t){return r.Rc=Object.assign(Object.assign({},t),i)}).catch(function(t){return n.log.error("Error calling MediaCapabilities API",t)})),r},i=s,i=t.__decorate([a.$(),t.__param(0,a.l(n.mNa)),t.__param(1,a.l(r.ob))],i),e.kNa=i},function(t,e,i){var n,r,a;function o(t){this.l7b=t}_esm(e),e.DJa=void 0,t=i(0),n=i(1),r=i(283),i=i(488),o.prototype.lQb=function(){var t,i={rP:r.Pz.nwb};try{(t=this.l7b.PresentationRequest)&&(new t("https://netflix.com").getAvailability()||Promise.reject()).then(function(t){var e;i.rP=t.value?r.Pz.iRa:r.Pz.jFa,i.rP===r.Pz.jFa&&t.addEventListener("change",e=function(){t.value&&(i.rP=r.Pz.iRa),t.removeEventListener("change",e)})}).catch(function(){i.rP=r.Pz.Error})}catch(t){i.rP=r.Pz.Error}return i},a=o,a=t.__decorate([n.$(),t.__param(0,n.l(i.jRa))],a),e.DJa=a},function(t,e,i){var n,w,r,a,o,s,u,c;function h(t,e,i,n){this.config=t,this.navigator=e,this.Pt=i,this.HQ=n,this.rZa={},this.anb={},this.Sna={},this.log=this.Pt.jb("MediaCapabilityDetector"),this.rZa=this.tKb(),this.anb=this.zLb()}_esm(e),e.hNa=void 0,t=i(0),n=i(1),w=i(42),r=i(7),a=i(38),o=i(98),s=i(162),u=i(48),c=i(14),h.prototype.HX=function(e){var i=this;return this.HQ.aF().then(function(t){return i.yQb(e,t)}).catch(function(){return{supported:!1,reason:"mc-ksa-exception"}})},h.prototype.TYb=function(t){return!!t.colorGamut||!!t.hdrMetadataType||!!t.transferFunction},h.prototype.Sva=function(){return bt.matchMedia("(dynamic-range: high)").matches},h.prototype.yQb=function(t,e){var i,n,r;try{if(i={type:"media-source"},n=this.rZa[t],r=this.anb[t],n)i.audio=n;else{if(!r)return Promise.resolve({supported:!1,reason:"mc-missing-config"});if(i.video=r,this.TYb(r)&&!this.Sva())return Promise.resolve({supported:!1,reason:"mc-non-hdr-display"});e&&(i.keySystemConfiguration=this.JTb(e))}return Promise.all([this.eHb(i),this.bHb((n||r).contentType)]).then(function(t){var e=rt(t);return t=e.next().value,e=e.next().value,t?e?{supported:!0}:{supported:!1,reason:"mc-add-source-buffer"}:{supported:!1,reason:"mc-decoding-info"}})}catch(t){return this.log.error("mediaCapabilitiesIsTypeSupported failed",t),Promise.resolve({supported:!1,reason:"mc-exception"})}},h.prototype.eHb=function(i){var n=this;return this.navigator.mediaCapabilities.decodingInfo(i).then(function(t){var e;return t.configuration||(t.configuration=i),(e=n.uZb(i,t))?n.log.trace("mediaCapabilities.decodingInfo: "+JSON.stringify(t)):n.log.warn("mediaCapabilities.decodingInfo: "+JSON.stringify(t)),e}).catch(function(t){return n.log.error("mediaCapabilities.decodingInfo failed",t),!1})},h.prototype.bHb=function(i){var n=this;return this.config().ROb?(this.Sna[i]||(this.Sna[i]=new Promise(function(e){var t;try{t=new c.xD,document.createElement("video").src=URL.createObjectURL(t),t.addEventListener("sourceopen",function(){try{t.addSourceBuffer(i),n.log.trace("addSourceBuffer succeeded for "+i),e(!0)}catch(t){n.log.warn("addSourceBuffer failed",t),e(!1)}})}catch(t){n.log.warn("addSourceBuffer failed",t),e(!1)}})),this.Sna[i]):Promise.resolve(!0)},h.prototype.JTb=function(t){return this.keySystemConfiguration||(this.keySystemConfiguration={keySystem:t.keySystem},(t=u.A$(t))&&(this.keySystemConfiguration.video={robustness:t})),this.keySystemConfiguration},h.prototype.tKb=function(){var t={},e={contentType:"audio/mp4; codecs=mp4a.40.2"};return t[w.ae.TG]=e,t[w.ae.K3]=e,t[w.ae.UG]=e,t[w.ae.eA]=e,t[w.ae.uT]=e={contentType:"audio/mp4; codecs=ec-3"},t[w.ae.N2]=e,t[w.ae.vT]=e,t},h.prototype.zLb=function(){var t,e,i={contentType:'video/mp4; codecs="hev1.2.4.L120.B0"'},n={contentType:'video/mp4; codecs="dvh1.05.04"'},r={width:1920,height:1080},a={width:3840,height:2160},o=Object.assign(Object.assign({},r),{bitrate:12e6,framerate:30}),s=Object.assign(Object.assign({},r),{bitrate:2e7,framerate:60}),u=Object.assign(Object.assign({},a),{bitrate:25e6,framerate:30}),c=Object.assign(Object.assign({},a),{bitrate:4e7,framerate:60}),h={hdrMetadataType:"smpteSt2086",colorGamut:"rec2020",transferFunction:"pq"},f={colorGamut:"rec2020",transferFunction:"pq"},a=Object.assign(Object.assign({},{contentType:'video/mp4; codecs="avc1.4D4028"'}),o),r=Object.assign(Object.assign({},{contentType:'video/mp4; codecs="avc1.640028"'}),o),l=Object.assign(Object.assign({},{contentType:'video/mp4; codecs="vp09.02.31.10.01"'}),o),d=Object.assign(Object.assign({},i),o),p=Object.assign(Object.assign({},{contentType:'video/mp4; codecs="hev1.2.4.L123.B0"'}),s),b=Object.assign(Object.assign({},{contentType:'video/mp4; codecs="hev1.2.4.L150.B0"'}),u),g=Object.assign(Object.assign({},{contentType:'video/mp4; codecs="hev1.2.4.L153.B0"'}),c),m=Object.assign(Object.assign(Object.assign({},i),o),h),v=Object.assign(Object.assign(Object.assign({},i),s),h),y=Object.assign(Object.assign(Object.assign({},i),u),h),i=Object.assign(Object.assign(Object.assign({},i),c),h);return h=Object.assign(Object.assign(Object.assign({},n),o),f),t=Object.assign(Object.assign(Object.assign({},n),s),f),e=Object.assign(Object.assign(Object.assign({},n),u),f),n=Object.assign(Object.assign(Object.assign({},n),c),f),o=Object.assign(Object.assign({},{contentType:'video/mp4; codecs="av01.0.08M.10"'}),o),s=Object.assign(Object.assign({},{contentType:'video/mp4; codecs="av01.0.09M.10"'}),s),u=Object.assign(Object.assign({},{contentType:'video/mp4; codecs="av01.0.12M.10"'}),u),c=Object.assign(Object.assign({},{contentType:'video/mp4; codecs="av01.0.13M.10"'}),c),(f={})[w.I.QG]=a,f[w.I.SG]=a,f[w.I.$ha]=a,f[w.I.aKa]=a,f[w.I.bKa]=a,f[w.I.cKa]=a,f[w.I.ZJa]=r,f[w.I.o3]=r,f[w.I.q3]=r,f[w.I.Yha]=r,f[w.I.$Ja]=r,f[w.I.p3]=r,f[w.I.r3]=r,f[w.I.Zha]=r,f[w.I.Ska]=l,f[w.I.m5]=l,f[w.I.n5]=l,f[w.I.o5]=l,f[w.I.bia]=d,f[w.I.cia]=d,f[w.I.dia]=d,f[w.I.eia]=p,f[w.I.N3]=d,f[w.I.Q3]=d,f[w.I.T3]=d,f[w.I.W3]=p,f[w.I.ET]=b,f[w.I.FT]=g,f[w.I.O3]=d,f[w.I.R3]=d,f[w.I.U3]=d,f[w.I.X3]=p,f[w.I.Z3]=b,f[w.I.b4]=g,f[w.I.M3]=d,f[w.I.P3]=d,f[w.I.S3]=d,f[w.I.V3]=p,f[w.I.Y3]=b,f[w.I.a4]=g,f[w.I.u3]=m,f[w.I.x3]=m,f[w.I.DT]=m,f[w.I.C3]=v,f[w.I.F3]=y,f[w.I.I3]=i,f[w.I.v3]=m,f[w.I.y3]=m,f[w.I.A3]=m,f[w.I.D3]=v,f[w.I.G3]=y,f[w.I.J3]=i,f[w.I.t3]=m,f[w.I.w3]=m,f[w.I.z3]=m,f[w.I.B3]=v,f[w.I.E3]=y,f[w.I.H3]=i,f[w.I.P2]=h,f[w.I.R2]=h,f[w.I.wT]=h,f[w.I.U2]=t,f[w.I.W2]=e,f[w.I.Y2]=n,f[w.I.zha]=h,f[w.I.Aha]=t,f[w.I.Bha]=e,f[w.I.Cha]=n,f[w.I.Q2]=h,f[w.I.S2]=h,f[w.I.T2]=h,f[w.I.V2]=t,f[w.I.X2]=e,f[w.I.Z2]=n,f[w.I.hFa]=o,f[w.I.iFa]=o,f[w.I.eD]=o,f[w.I.fD]=o,f[w.I.q2]=o,f[w.I.r2]=s,f[w.I.s2]=u,f[w.I.t2]=c,f},h.prototype.uZb=function(t,e){return t.video&&this.config().L6b?e.supported&&e.powerEfficient:e.supported},i=h,i=t.__decorate([n.$(),t.__param(0,n.l(s.ZL)),t.__param(1,n.l(a.tM)),t.__param(2,n.l(r.ob)),t.__param(3,n.l(o.Vz))],i),e.hNa=i},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,d;_esm(e),e.storage=void 0,t=i(1),n=i(489),r=i(198),a=i(490),o=i(1185),s=i(284),u=i(1186),c=i(1189),h=i(1190),f=i(96),l=i(491),d=i(1192),e.storage=new t.Ad(function(t){t(r.ZNa).Ue(function(){return function(){return bt.localStorage}}),t(r.WKa).Ue(function(){return function(){return bt.indexedDB}}),t(l.JNa).to(d.INa).la(),t(f.hD).to(h.LFa).la(),t(a.kMa).to(o.jMa).la(),t(n.k4).to(c.yLa).la(),t(s.ALa).to(u.zLa).la(),t(s.VKa).to(u.UKa).la(),t(s.CLa).to(u.BLa).la()})},function(t,e,i){var n,o,r;function a(t){this.VF=t}_esm(e),e.jMa=void 0,t=i(0),n=i(1),o=i(4),i=i(198),a.prototype.load=function(r){var a=this;return new Promise(function(t,e){var i,n;try{if(i=a.VF.getItem(r)){if("{"===(n=i)[0])try{n=JSON.parse(i)||i}catch(t){}t({key:r,value:n})}else e({Ba:o.Y.FD})}catch(t){e({Ba:o.Y.VRa,cause:t})}})},a.prototype.save=function(i,n,r){var a=this;return new Promise(function(t,e){if(r&&a.VF.getItem(i))t(!1);else try{"string"==typeof n?a.VF.setItem(i,n):a.VF.setItem(i,JSON.stringify(n)),t(!0)}catch(t){e({Ba:o.Y.WRa,cause:t})}})},a.prototype.remove=function(i){var n=this;return new Promise(function(t,e){try{n.VF.removeItem(i),t()}catch(t){e({Ba:o.Y.rka,cause:t})}})},a.prototype.loadAll=function(){return Promise.reject("Not supported")},a.prototype.removeAll=function(){return Promise.reject("Not supported")},r=a,r=t.__decorate([n.$(),t.__param(0,n.l(i.Otb))],r),e.jMa=r},function(t,e,i){var n,r,a,o,u,s,c,h,f,l,d,p;function b(t,e,i,n,r,a){this.config=e,this.YW=i,this.Iq=n,this.Jgc=r,this.am=a,this.Aa=t.jb(s.NSa)}function g(t,e){this.config=t,this.B1=e}function m(t,e,i,n,r){this.config=e,this.B1=i,this.am=r,this.Aa=t.jb(s.NSa),this.YW=new Promise(function(t,e){var i;try{(i=n())?t(i):e({Ba:u.Y.YKa})}catch(t){e({Ba:u.Y.j4,cause:t})}})}_esm(e),e.BLa=e.zLa=e.UKa=void 0,t=i(0),n=i(1),r=i(7),a=i(1187),o=i(198),u=i(4),s=i(1188),c=i(489),h=i(69),f=i(96),l=i(83),d=i(284),p=i(60),m.prototype.create=function(){return this.Lqa||(this.Lqa=this.EO()),this.Lqa},m.prototype.Hr=function(i){var n=this;return this.Lqa=null,this.B1.fu(this.config.timeout,new Promise(function(t,e){i.close(),n.delete(i.name).then(function(){t()}).catch(function(t){e(t)})})).catch(function(t){return t instanceof h.Os?Promise.reject({Ba:u.Y.j4}):t.Ba?Promise.reject(t):Promise.reject({Ba:u.Y.j4,cause:t})})},m.prototype.delete=function(r){var t=this;return this.B1.fu(this.config.timeout,new Promise(function(i,n){t.YW.then(function(t){var e=t.deleteDatabase(r);e.onsuccess=function(){i()},e.onerror=function(){n({Ba:u.Y.j4,cause:e.error})}}).catch(function(t){n(t)})}))},m.prototype.EO=function(){var o,s=this;return this.B1.fu(this.config.timeout,new Promise(function(r,a){if(s.config.RCa)return a({Ba:s.config.RCa});s.YW.then(function(n){if(s.am.mark(p.Ek.gsb),!(o=n.open(s.config.name,s.config.version)))return a({Ba:u.Y.ZKa});o.onblocked=function(){s.am.mark(p.Ek.dsb),a({Ba:u.Y.Zrb})},o.onupgradeneeded=function(){var t;s.am.mark(p.Ek.nsb),t=o.result;try{t.createObjectStore(s.config.l_,{keyPath:"name"})}catch(t){s.Aa.error("Exception while creating object store",t)}},o.onsuccess=function(t){var e,i;s.am.mark(p.Ek.msb);try{if(i=(e=t.target.result).objectStoreNames.length,s.Aa.trace("objectstorenames length ",i),0===i){s.Aa.error("invalid indexedDb state, deleting"),s.am.mark(p.Ek.fsb);try{e.close()}catch(t){}return n.deleteDatabase(s.config.name),void setTimeout(function(){a({Ba:u.Y.Yrb})},1)}}catch(t){s.Aa.error("Exception while inspecting indexedDb objectstorenames",t)}r(o.result)},o.onerror=function(){s.am.mark(p.Ek.esb),s.Aa.error("IndexedDB open error",o.error),a({Ba:u.Y.$rb,cause:o.error})}}).catch(function(t){a(t)})})).catch(function(t){if(t instanceof h.Os){try{o&&o.readyState&&s.am.mark("readyState-"+o.readyState)}catch(t){}if(s.config.B7&&o&&"done"===o.readyState){if(s.Egc(o))return s.am.mark(p.Ek.ksb),Promise.resolve(o.result);s.am.mark(p.Ek.jsb)}return s.am.mark(p.Ek.isb),Promise.reject({Ba:u.Y.csb})}return t.Ba?Promise.reject(t):(s.am.mark(p.Ek.hsb),s.Aa.error("IndexedDB open exception occurred",t),Promise.reject({Ba:u.Y.bsb,cause:t}))})},m.prototype.Egc=function(t){try{return 0<t.result.objectStoreNames.length}catch(t){this.am.mark(p.Ek.lsb),this.Aa.error("failed to check open request state",t)}return!1},i=m,i=t.__decorate([n.$(),t.__param(0,n.l(r.ob)),t.__param(1,n.l(c.k4)),t.__param(2,n.l(h.qH)),t.__param(3,n.l(o.WKa)),t.__param(4,n.l(l.GM))],i),e.UKa=i,g.prototype.create=function(t){return Promise.resolve(new a.xLa(this.config,this.B1,t))},i=g,i=t.__decorate([n.$(),t.__param(0,n.l(c.k4)),t.__param(1,n.l(h.qH))],i),e.zLa=i,b.prototype.create=function(){return this.storage?Promise.resolve(this.storage):(this.UW||(this.UW=this.EO(this.Jgc)),this.UW)},b.prototype.EO=function(t){var a=this;return t=void 0===t?[]:t,new Promise(function(n,r){a.am.mark(p.Ek.Mvb),a.YW.create().then(function(i){a.Iq.create(i).then(function(e){Promise.all(t.map(function(t){return t.validate(e)})).then(function(){a.storage=e,n(a.storage)}).catch(function(t){a.Aa.debug("DB validation failed, cause: "+t),a.config.K4a?(a.Aa.debug("Fixing corrupt DB"),a.YW.Hr(i).then(function(){a.Aa.error("Invalid database deleted, creating new database."),a.EO().then(function(t){a.Aa.error("Invalid database successfully recreated."),a.storage=t,n(a.storage)})}).catch(function(t){a.Aa.error("Couldn't delete invalid database."),r(t)})):(a.Aa.debug("Ignoring invalid DB due to config"),a.storage=e,n(a.storage))})}).catch(function(t){r(t)})}).catch(function(t){r(t)})})},i=b,i=t.__decorate([n.$(),t.__param(0,n.l(r.ob)),t.__param(1,n.l(c.k4)),t.__param(2,n.l(d.VKa)),t.__param(3,n.l(d.ALa)),t.__param(4,n.optional()),t.__param(4,n.jK(f.Wvb)),t.__param(5,n.l(l.GM))],i),e.BLa=i},function(t,e,i){var o,n,u;function r(t,e,i){this.config=t,this.$t=e,this.VF=i}function c(t,e){this.reason=t,this.cause=e}_esm(e),e.xLa=e.wRa=void 0,o=i(4),n=i(69),(i=u=e.wRa||(e.wRa={}))[i.jja=0]="NoData",i[i.Error=1]="Error",i[i.FM=2]="Timeout",r.prototype.load=function(n){var t=this;return new Promise(function(e,i){t.w9("get",!1,n).then(function(t){e({key:n,value:t})}).catch(function(t){var e=o.Y.VRa;switch(t.reason){case u.jja:e=o.Y.FD;break;case u.FM:e=o.Y.Nvb}i({Ba:e,cause:t.cause})})})},r.prototype.save=function(e,n,r){var a=this;return new Promise(function(t,i){a.w9(r?"add":"put",!0,{name:e,data:n}).then(function(){t(!r)}).catch(function(t){var e=o.Y.WRa;t.reason===u.FM&&(e=o.Y.Qvb),i({Ba:e,cause:t.cause})})})},r.prototype.remove=function(e){var n=this;return new Promise(function(t,i){n.w9("delete",!0,e).then(function(){t()}).catch(function(t){var e=o.Y.rka;t.reason===u.FM&&(e=o.Y.URa),i({Ba:e,cause:t.cause})})})},r.prototype.removeAll=function(){var e=this;return new Promise(function(t,i){e.w9("clear",!0,"").then(function(){t()}).catch(function(t){var e=o.Y.rka;t.reason===u.FM&&(e=o.Y.URa),i({Ba:e,cause:t.cause})})})},r.prototype.loadAll=function(){var a=this;return this.$t.fu(this.config.timeout,new Promise(function(e,i){var n,t,r;a.config.QCa?i(new c(a.config.QCa)):(n=[],t=a.VF.transaction(a.config.l_,"readonly"),r=t.objectStore(a.config.l_).openCursor(),t.onerror=function(){i(new c(u.Error,r.error))},r.onsuccess=function(t){if(t=t.target.result)try{n.push({key:t.value.name,value:t.value.data}),t.continue()}catch(t){i(new c(u.Error,t))}else e(n)},r.onerror=function(){i(new c(u.Error,r.error))})})).catch(function(t){return t instanceof n.Os?Promise.reject(new c(u.FM,t)):t instanceof c?Promise.reject(t):Promise.reject(new c(u.Error,t))})},r.prototype.w9=function(r,a,o){var s=this;return this.$t.fu(this.config.timeout,new Promise(function(i,n){var t=s.VF.transaction(s.config.l_,a?"readwrite":"readonly"),e=t.objectStore(s.config.l_)[r](o);t.onerror=function(){n(new c(u.Error,e.error))},e.onsuccess=function(t){var e;if("get"==r)try{(e=t.target.result)?i(e.data):n(new c(u.jja))}catch(t){n(new c(u.jja,t))}else i(void 0)},e.onerror=function(){n(new c(u.Error,e.error))}})).catch(function(t){return t instanceof n.Os?Promise.reject(new c(u.FM,t)):t instanceof c?Promise.reject(t):Promise.reject(new c(u.Error,t))})},e.xLa=r},function(t,e){_esm(e),e.NSa="Storage"},function(t,e,i){var n,r,a,o,s;function u(t,e){return(t=a.uf.call(this,t,"IndexedDBConfigImpl")||this).config=e,t.version=1,t.l_="namedatapairs",t}_esm(e),e.yLa=void 0,t=i(0),n=i(1),r=i(44),a=i(45),o=i(39),i=i(33),S(u,a.uf),nt.Object.defineProperties(u.prototype,{name:{configurable:!0,enumerable:!0,get(){return"netflix.player"+(this.config.uB?"Test":"")}},timeout:{configurable:!0,enumerable:!0,get(){return this.config.$jb}},B7:{configurable:!0,enumerable:!0,get(){return this.config.B7}},RCa:{configurable:!0,enumerable:!0,get(){return 0}},QCa:{configurable:!0,enumerable:!0,get(){return 0}},K4a:{configurable:!0,enumerable:!0,get(){return!0}}}),s=u,t.__decorate([r.config(r.XC,"simulateIdbOpenError")],s.prototype,"RCa",null),t.__decorate([r.config(r.XC,"simulateIdbLoadAllError")],s.prototype,"QCa",null),t.__decorate([r.config(r.Cd,"fixInvalidDatabase")],s.prototype,"K4a",null),s=t.__decorate([n.$(),t.__param(0,n.l(i.Sm)),t.__param(1,n.l(o.Bp))],s),e.yLa=s},function(t,e,i){var n,r,a,o,s,u,c;function h(t,e,i,n){this.Aa=t,this.config=e,this.oXb=i,this.Txa=n,this.KI={mem:{storage:this.Txa,key:"mem"}},this.tG=this.config.tG}function f(t,e,i,n){this.$f=t,this.Iq=e,this.Txa=i,this.config=n}_esm(e),e.Hga=e.LFa=void 0,t=i(0),n=i(1),r=i(4),a=i(284),o=i(7),s=i(491),u=i(1191),i=i(39),f.prototype.create=function(){return this.UW||(this.UW=this.EO()),this.UW},f.prototype.EO=function(){return this.XDb=new h(this.$f.jb("AppStorage"),this.config,this.Iq,this.Txa),this.XDb.create()},c=f,c=t.__decorate([n.$(),t.__param(0,n.l(o.ob)),t.__param(1,n.l(a.CLa)),t.__param(2,n.l(s.JNa)),t.__param(3,n.l(i.Bp))],c),e.LFa=c,h.prototype.create=function(){var e=this;return this.UKb().then(function(t){if(e.IGb(t,e.config.RY))return e;throw e.V2b(t)})},h.prototype.load=function(t){var n=this;return new Promise(function(e,i){n.bY(t).storage.load(t).then(function(t){e(t)}).catch(function(t){i(t)})})},h.prototype.save=function(t,n,r){var a=this;return new Promise(function(e,i){a.bY(t).storage.save(t,n,r).then(function(t){e(t)}).catch(function(t){i(t)})})},h.prototype.remove=function(i){var n=this;return new Promise(function(t,e){n.bY(i).storage.remove(i).then(function(){t()}).catch(function(t){e(t)})})},h.prototype.removeAll=function(){var i=this;return new Promise(function(t,e){i.Kgb("mem").then(function(){return i.Kgb("idb")}).catch(function(t){return Promise.reject(t)}).then(function(){t()}).catch(function(t){i.Aa.error("remove all failed"),e(t)})})},h.prototype.loadAll=function(){var e=this,i=[];return this.sab("mem").then(function(t){return i=i.concat(t),e.sab("idb")}).catch(function(t){return e.rZb(t)||e.Aa.error("IndexedDb.LoadAll exception",t),[]}).then(function(t){return i=i.concat(t)}).catch(function(t){throw e.Aa.error("load all failed",t),t})},h.prototype.UKb=function(){var e=this;return this.oXb.create().then(function(t){e.KI.idb={storage:t,key:"idb"}}).catch(function(t){return e.Aa.error("idb failed to load",t),t||{Ba:r.Y.mo}})},h.prototype.IGb=function(t,e){return!(t&&!e)},h.prototype.V2b=function(t){var e="";return t&&(e+=t.Ba),{Ba:e}},h.prototype.Kgb=function(t){return(t=this.KI[t])?t.storage.removeAll():Promise.resolve()},h.prototype.sab=function(t){return(t=this.KI[t])?t.storage.loadAll():Promise.resolve([])},h.prototype.KQb=function(t){for(var e in this.tG)if(t.startsWith(e))return this.tG[e];return this.tG[u.iqb]},h.prototype.bY=function(t){var e,i=this;return this.KQb(t).every(function(t){return!i.KI[t]||(e=i.KI[t],!1)}),e||(this.Aa.error("component not found for storageKey",{Tcc:t,Gnc:Object.keys(this.KI),rules:this.tG}),e=this.KI.mem),this.Aa.trace("component found for key",{storageKey:t,componentKey:e.key}),e},h.prototype.rZb=function(t){return(t&&(t.Ba||t.errorSubCode))===r.Y.FD},e.Hga=h},function(t,e){_esm(e),e.iqb="__default_rule_key__"},function(t,e,i){var n,r,a;function o(t){this.$f=t,this.kK={},this.Aa=this.$f.jb("MemoryStorage")}_esm(e),e.INa=void 0,t=i(0),n=i(1),r=i(4),i=i(7),o.prototype.load=function(t){var e;return this.kK.hasOwnProperty(t)?(e=this.kK[t],this.Aa.debug("Storage entry loaded",{key:t}),Promise.resolve({key:t,value:e})):(this.Aa.debug("Storage entry not found",{key:t}),Promise.reject({Ba:r.Y.FD}))},o.prototype.save=function(t,e,i){return i&&this.kK.hasOwnProperty(t)?Promise.resolve(!1):(this.kK[t]=e,Promise.resolve(!0))},o.prototype.remove=function(t){return delete this.kK[t],Promise.resolve()},o.prototype.loadAll=function(){var t=Object.entries(this.kK).map(function(t){var e=rt(t);return{key:t=e.next().value,value:e=e.next().value}});return Promise.resolve(t)},o.prototype.removeAll=function(){return this.kK={},Promise.resolve()},a=o,a=t.__decorate([n.$(),t.__param(0,n.l(i.ob))],a),e.INa=a},function(t,e,i){var n,r,a,o,s,u;_esm(e),e.iO=void 0,t=i(1),n=i(492),r=i(493),a=i(494),o=i(1194),s=i(1195),u=i(1196),e.iO=new t.Ad(function(t){t(n.EGa).to(o.DGa).la(),t(r.CGa).to(s.zGa).la(),t(a.BGa).to(u.AGa).la()})},function(t,e,i){var r,a,o,s,u,c;function h(t,e,i,n){this.V7=e,this.Eb=i,this.yFb=n,this.Aa=t.jb("Bookmark")}_esm(e),e.DGa=void 0,t=i(0),r=i(1),a=i(493),o=i(494),s=i(7),u=i(27),c=i(5),h.prototype.EDb=function(t){var e;if(n=t.kb.playbackState&&t.kb.playbackState.currentTime,e=this.KSb(t.L),n=this.Eb.SI(n)?c.vc(n):e,this.Eb.hh(n))this.Aa.info("Overriding bookmark",{From:t.JL.ka(c.pa),To:n.ka(c.pa)}),t=Object.assign({},t,{JL:n});else if(this.sXb(t))return this.Aa.trace("Ignoring bookmark because it's too close to beginning"),c.Fh(0);return t.JL.$va()?(this.Aa.trace("Ignoring bookmark because it's negative"),c.Fh(0)):this.rXb(t)?(this.Aa.trace("Ignoring bookmark because it's too close to end"),c.Fh(0)):this.qXb(t)?(this.Aa.trace("Ignoring bookmark because it's too close to the end to start decoding"),c.Fh(0)):t.JL},h.prototype.sXb=function(t){return t.JL.lm(this.zta(t))<0},h.prototype.zta=function(t){return this.UZa(this.V7.zta(),t.nda)},h.prototype.rXb=function(t){return 0<t.JL.lm(this.Ata(t))},h.prototype.Ata=function(t){var e=t.kb.$h?this.V7.yTb():this.V7.Ata();return t.nda.Ea(this.UZa(e,t.nda))},h.prototype.qXb=function(t){return 0<t.JL.lm(this.hTb(t))},h.prototype.hTb=function(t){return t.nda.Ea(c.vc(t.SF))},h.prototype.KSb=function(t){var e;if(t=this.V7.gta()[t],e=-1,this.Eb.$u(t)?e=parseInt(t):this.Eb.vo(t)&&(e=t),this.Eb.aW(e))return c.vc(e)},h.prototype.UZa=function(t,e){return this.yFb.gdc(t,e)},i=h,i=t.__decorate([r.$(),t.__param(0,r.l(s.ob)),t.__param(1,r.l(a.CGa)),t.__param(2,r.l(u.Tg)),t.__param(3,r.l(o.BGa))],i),e.DGa=i},function(t,e,i){var n,r;function a(t){this.config=t}_esm(e),e.zGa=void 0,t=i(0),n=i(1),i=i(13),a.prototype.zta=function(){return this.mJ().zFb},a.prototype.Ata=function(){return this.mJ().AFb},a.prototype.yTb=function(){return this.mJ().BFb},a.prototype.gta=function(){return this.mJ().TZa},a.prototype.mJ=function(){return this.config()},r=a,r=t.__decorate([n.$(),t.__param(0,n.l(i.Oc))],r),e.zGa=r},function(t,e,i){var n,r,a;function o(t){this.Eb=t}_esm(e),e.AGa=void 0,t=i(0),n=i(1),r=i(27),a=i(5),o.prototype.gdc=function(t,e){var i=parseFloat(t),n=0;return"%"===t[t.length-1]&&this.Eb.vo(i)?n=Math.round(i*e.ka(a.pa)/100):(t=parseInt(t),this.Eb.aW(t)&&(n=t)),a.vc(Math.min(n,e.ka(a.pa)))},i=o,i=t.__decorate([n.$(),t.__param(0,n.l(r.Tg))],i),e.AGa=i},function(t,e,i){var n,r;_esm(e),e.q_a=void 0,t=i(1),n=i(495),r=i(1198),e.q_a=new t.Ad(function(t){t(n.WGa).to(r.VGa).la()})},function(t,e,i){var n,r,a,o,s,u,c,h,f;function l(t,e,i,n,r,a){this.config=t,this.NF=i,this.profile=n,this.Ifa=r,this.BW=a,this.log=e.jb("CDMAttestedDescriptor"),this.K5a(h.fx.mU)}_esm(e),e.VGa=void 0,t=i(0),n=i(1),r=i(13),a=i(7),o=i(164),s=i(285),u=i(80),c=i(173),h=i(39),f=i(57),l.prototype.K5a=function(t){var e=this;return this.Ifa.Sea(t)?this.config().COb?this.I5a().then(function(t){return t?Promise.resolve(void 0):(e.kab||(e.kab=e.BW.jua(f.Li.Cp)),e.kab)}).catch(function(t){e.log.error("Failed to generate challenge",t)}).then(function(t){return null!=t&&t.jc.close(),null==t?void 0:t.upa}).then(function(t){return Promise.all([Promise.resolve(t),e.I5a()])}).then(function(t){var e=(t=rt(t)).next().value;if(!t.next().value)return e}):this.NF().then(function(t){t.c_.removeServiceToken("cad")}):Promise.resolve(void 0)},l.prototype.I5a=function(){var e=this;return this.NF().then(function(t){return(t=t.c_.getServiceTokens(e.profile))&&t.find(function(t){return"cad"===t.name})})},i=l,i=t.__decorate([n.$(),t.__param(0,n.l(r.Oc)),t.__param(1,n.l(a.ob)),t.__param(2,n.l(o.cU)),t.__param(3,n.l(u.zM)),t.__param(4,n.l(s.l5)),t.__param(5,n.l(c.K2))],i),e.VGa=i},function(t,e,n){var i,r,a,o,s,u,c,h,f,l,d;_esm(e),e.dbb=void 0,t=n(1),i=n(234),r=n(1200),a=n(496),o=n(1207),s=n(500),u=n(502),c=n(1208),h=n(136),f=n(1209),l=n(504),d=n(1210),e.dbb=new t.Ad(function(t){t(a.ZMa).to(o.YMa).la(),t(i.Xia).to(r.$Ma).la(),t(s.FQa).Jm(function(t){for(var e=[],i=0;i<arguments.length;++i)e[+i]=arguments[i];return i=n(287).uH,new(Function.prototype.bind.apply(i,[null].concat(J(e))))}),t(u.cNa).Ue(function(){return function(t){return new c.dNa(t)}}),t(h.nM).to(f.WMa).la(),t(l.VMa).to(d.UMa).la()})},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,d;function p(t,e,i,n){this.$f=t,this.config=e,this.Rza=i,this.bEa=n}_esm(e),e.$Ma=void 0,t=i(0),n=i(1),r=i(7),a=i(496),o=i(1201),s=i(1202),u=i(1203),c=i(1204),h=i(1205),f=i(1206),l=i(500),i=i(501),p.prototype.create=function(t){var e=this.$f.jb("ManifestParser",t),i=new o.qHa(e,this.config);return new u.aNa(i,new s.dTa(e,this.config,t,i,this.Rza),new c.xTa(e,t,this.bEa),new h.oGa(e,this.config,t),new f.bUa(e))},d=p,d=t.__decorate([n.$(),t.__param(0,n.l(r.ob)),t.__param(1,n.l(a.ZMa)),t.__param(2,n.l(l.FQa)),t.__param(3,n.l(i.vTa))],d),e.$Ma=d},function(t,e,i){var s,a;function n(t,e){this.log=t,this.config=e}_esm(e),e.qHa=void 0,s=i(101),a=i(286),n.prototype.lza=function(t,i,e){var n=this,r=this.config.spa,a=this.config.rpa,o=(t=rt(s.nw(function(t){return(!r.length||0<=r.indexOf(t.id))&&a.indexOf(t.id)<0},t||[]))).next().value;if(t.next().value.forEach(function(t){return n.log.warn("Cdn is not allowed",{Id:t.id})}),(t=o.map(function(e){var t=(i?i.find(function(t){return t.key===e.key}):void 0)||{};return{id:e.id,name:e.name,cc:e.cc,type:e.type,Aab:e.key,$Yb:e.Rab,location:{id:t.key,cc:t.cc,level:t.level,weight:t.weight}}})).sort(function(t,e){return t.cc-e.cc}),this.log.trace("Transformed cdns",{Count:t.length}),e&&!t.length)throw Error("no valid cdns");return t},n.prototype.kXb=function(t,e,i,n){var r=t.filter(function(e){return-1===i.findIndex(function(t){return t.id===e.id})}).map(function(t){return{Xdb:!0,kc:t}}).concat(i.map(function(t){return{Xdb:!1,kc:t}})).sort(function(t,e){return t.kc.cc===e.kc.cc?t.Xdb?-1:1:t.kc.cc-e.kc.cc}).map(function(t,e){return a.BQ(t.kc).cc=e+1,t.kc});return t=e.filter(function(e){return-1===n.findIndex(function(t){return t.key===e.key})}).concat(n).map(function(e){var t=r.findIndex(function(t){return t.key===e.key});if(-1!==t)return t=r[t],a.BQ(e).cc=t.cc,e}).filter(function(t){return void 0!==t}),{Dac:r,a0b:t}},e.qHa=n},function(t,e,i){var o,n,s,r;function a(t,e,i,n,r){this.log=t,this.config=e,this.j=i,this.EW=n,this.Rza=r}_esm(e),e.dTa=void 0,o=i(42),n=i(14),s=i(127),r=i(497),a.prototype.yeb=function(r,t){var a=this;return t=t.map(function(t){var e,i,n=a.Mec(t);return t.vF||!t.bj||n&&0<n.length||a.log.error("track without downloadables",a.STb(t)),e={},i=[],0<n.length&&((e=t.language&&0<=a.config.YP.indexOf(t.language)&&n[1]&&n[1].profile===o.Rm.XKa?n[1]:n[0]).profile==o.Rm.rM&&(e=a.pac(n)),i=a.EW.lza(t.F_a,void 0,!1)),t=a.Rza(a.j,t.Ng,t.id,null!=(n=t.cc)?n:-1,null==(n=t.bj)||n,r,e.Wb,e.urls||{},i,t.language,t.AF,s.j5[t.Hi.toLowerCase()]||s.$q.wM,t.tL,t.variant,t.gG.toUpperCase(),e.profile,a.$Tb(e)||{},t.vF,t.Taa,t.Waa,t.Rv),a.log.trace("Transformed timed text track",t),t}),this.log.trace("Transformed timed text tracks",{Count:t.length}),t},a.prototype.qec=function(t){var e=this,i=this.config.Nsa;if(i){if(t=rt(t.filter(function(t){return t.Bf==i||t.trackId==i})).next().value)return t}else if(this.j.S9&&(t=rt(t.filter(function(t){return t.trackId==e.j.S9})).next().value))return t},a.prototype.Mec=function(t){var i=this,n=t.Z2a;return(t=Object.entries(t.gEa||{}).map(function(t){var e=rt(t);return t=e.next().value,e=e.next().value,{Wb:n[t],profile:t,size:e.size||0,priority:i.bTb(t,e),offset:e.Zxa||0,$5b:e.width,Leb:e.height,urls:e.sv}})).sort(function(t,e){return t.priority-e.priority}),t},a.prototype.bTb=function(t,e){var i,n=this.config.Jw.indexOf(t);return e=e.size,i=this.config.wS,t===o.Rm.sha&&0<i&&i<e?this.config.Jw.length+1:0<=n?n:this.config.Jw.length},a.prototype.$Tb=function(t){if(t.profile===o.Rm.rM)return{offset:t.offset,length:t.size,Vl:{width:t.$5b,height:t.Leb}}},a.prototype.pac=function(t){var e=this.config.jva||r.Hka.q7a(),i=rt(t.filter(function(t){return t.profile===o.Rm.rM}).filter(function(t){return t.Leb===e})).next().value;return i||(this.log.warn("none of the downloadables match the intended resolution",{screenHeight:n.hx.height,intendedResolution:e}),t[0])},a.prototype.STb=function(t){return{isNone:t.vF,isForced:t.Taa,bcp47:t.language,id:t.Ng}},e.dTa=a},function(t,e,i){var s;function n(t,e,i,n,r){this.EW=t,this.KDa=e,this.Wec=i,this.pW=n,this.gnb=r}_esm(e),e.aNa=void 0,s=i(286),n.prototype.veb=function(t){var e,i,n,r,a=t.hb,o={Xf:null!=(c=null==(u=a.wO)?void 0:u.jp)?c:"",WF:a.Lva?"ads":"content"},s=!!a.m0,u=this.EW.lza(a.Zl,a.Dj,!0),c=this.KDa.yeb(o,a.A1);return t=this.Wec.C5b(a.Zec),e=s?this.pW.teb(o,a.dv,c):this.pW.x5b(o,a.dv,a.media,c),o=this.gnb.D5b(o,a.bD),i=o[0],n=this.pW.UEb(e)||e.find(function(t){return s?t.trackId===a.m0.zo:t.sy===a.Q8[0].zo})||e[0],r=this.KDa.qec(n.Gi)||c.find(function(t){return s?t.trackId===a.m0.xS:t.sy===a.Q8[0].qkb})||n.Gi[0],{xw:this.gnb.z5b(a.bD),Jg:u,wj:e,wz:o,Gi:c,WC:t,Og:a.Og,Hac:a.UHb,PJ:a.lF,om:a.om,pMb:a.dv.findIndex(function(t){return t.Ng==n.trackId}),xMb:a.bD.findIndex(function(t){return t.Ng==i.trackId}),S8:i,bX:n,dX:r}},n.prototype.lXb=function(e,n,t){var r,a=this,i=this.EW.kXb(e.hb.Zl,e.hb.Dj,t.hb.Zl,t.hb.Dj),o=i.Dac;return i=i.a0b,s.BQ(e.hb).Zl=o,s.BQ(e.hb).Dj=i,n.Jg=this.EW.lza(o,i,!0),r={Xf:null!=(i=null==(o=t.hb.wO)?void 0:o.jp)?i:"",WF:t.hb.Lva?"ads":"content"},o=(t=t.hb).dv,t.A1.forEach(function(t){var i;t.bj&&(i=a.ahb(e.hb.A1,n.Gi,t,function(t){return a.KDa.yeb(r,[t])[0]}))&&n.wj.forEach(function(t){var e;-1!==(e=(t=t.Gi).findIndex(function(t){return t.trackId===i.trackId}))&&(t[e]=i)})}),o.forEach(function(t){t.bj&&a.ahb(e.hb.dv,n.wj,t,function(t){return a.pW.teb(r,[t],n.Gi)[0]})}),{ja:e,Sc:n}},n.prototype.P$b=function(t,e){return this.pW.xQb(t,e)},n.prototype.ahb=function(t,e,i,n){var r=t.findIndex(function(t){return t.Ng===i.Ng}),a=-1!==r?t[r]:void 0,o=e.findIndex(function(t){return t.trackId===i.Ng}),s=-1!==o?e[o]:void 0;if(a&&!a.bj&&s&&!s.bj)return n=n(i),t[r]=i,e[o]=n},e.aNa=n},function(t,e){function i(t,e,i){this.log=t,this.j=e,this.bEa=i}_esm(e),e.xTa=void 0,i.prototype.C5b=function(t){var e=this;return 0===(t=(t||[]).filter(function(t){return t.urls&&0<t.urls.length}).map(function(t){return e.bEa(e.j,t.id,t.height,t.width,t.c6b,t.d6b,t.size,t.Rv,{unknown:t.urls[0]})})).length&&this.log.warn("There are no trickplay tracks"),t.sort(function(t,e){return t.size-e.size}),this.log.trace("Transformed trick play tracks",{Count:t.length}),t},e.xTa=i},function(t,e,i){var r,n,u,a,o,s,c;function h(t,e,i){return(t=n.$T.call(this,t)||this).config=e,t.j=i,t}_esm(e),e.oGa=void 0,r=i(482),n=i(498),u=i(101),a=i(91),o=i(127),s=i(4),c=i(37),S(h,n.$T),h.prototype.teb=function(e,t,i){var n=this,r=this.config.pfa;if((t=t.filter(function(t){var e,i=t.vF||!t.bj||t.streams&&0<t.streams.length;return i||n.log.warn("Audio track is missing streams",n.O$(t)),(e=0===r.length||0<=r.indexOf(t.Hi))||n.log.warn("Audio track is not supported",n.O$(t)),i&&e})).length)return t=t.map(function(t){return n.seb(e,t,n.dSb(t,i))}),this.log.trace("Parsed audio tracks",{Count:t.length}),t;throw Error("no valid audio tracks")},h.prototype.x5b=function(e,t,i,n){var r,a,o=this,s=rt(u.nw(function(t){return t.vF},t));if(t=s.next().value,s=s.next().value,r=(s=rt(u.nw(function(t){return t.streams&&0<t.streams.length},s))).next().value,s.next().value.forEach(function(t){return o.log.warn("Audio track is missing streams",o.O$(t))}),a=this.config.pfa,r=(s=rt(u.nw(function(t){return 0===a.length||0<=a.indexOf(t.Hi)},r))).next().value,s.next().value.forEach(function(t){return o.log.warn("Audio track is not supported",o.O$(t))}),(t=[].concat(J(r),J(t)).map(function(t){return o.seb(e,t,o.MTb(t.Ng,i,n))})).length)return this.log.trace("Transformed audio tracks",{Count:t.length}),t;throw Error("no valid audio tracks")},h.prototype.UEb=function(t){var e=this,i=this.config.Jsa;if(i){if(t=rt(t.filter(function(t){return t.Bf==i||t.trackId==i})).next().value)return t}else if(this.j.R9&&(t=rt(t.filter(function(t){return t.trackId==e.j.R9})).next().value))return t},h.prototype.xQb=function(e,a){return this.config.DZa.forEach(function(i){var n=a.dv.filter(function(t){return t.profile===i}).reduce(function(e,t){return t.streams.map(function(t){return t.bitrate}).forEach(function(t){e.add(t)}),e},new Set),r=!1,t=e.hb.dv.map(function(t){var e;if(t.profile!==i)return t;if((e=t.streams.filter(function(t){return n.has(t.bitrate)})).length===t.streams.length)return t;if(r=!0,0===e.length)throw new c.jd(s.Z.IMa,s.Y.job);return Object.assign(Object.assign({},t),{streams:e})});r&&(e.hb=Object.assign(Object.assign({},e.hb),{dv:t}))}),e},h.prototype.seb=function(t,e,i){var n=e.Hi;return(t=Object.assign(Object.assign({},t),{type:a.pj.audio,tL:e.tL,variant:e.variant,trackId:e.Ng,sy:e.ES,Hi:o.j5[n.toLowerCase()]||o.$q.wM,gG:n,Bf:e.language,displayName:e.AF,cc:null!=(n=e.cc)?n:-1,bj:null==(n=e.bj)||n,channels:e.channels,coc:e.channels,Gi:i,Bh:{Bcp47:e.language,TrackId:e.Ng},streams:[],isNative:e.isNative,Vr:e.vF,o1:e.o1})).streams=this.vlb(e.streams,t),this.log.trace("Transformed audio track",t,{StreamCount:t.streams.length,AllowedTimedTextTracks:t.Gi.length}),t.dIb=r.pGa[null==(n=t.streams[0])?void 0:n.mf],t},h.prototype.O$=function(t){return{language:t.AF,bcp47:t.language,type:t.Hi}},h.prototype.dSb=function(e,t){return t.filter(function(t){if(0<=e.vNb.indexOf(t.sy))return!1;if(e.l2a){if(e.l2a!==t.sy&&(t.Vr()||t.uq()))return!1}else if(e.I3b){if(t.Vr()||t.uq())return!1}else if(t.uq())return!1;return!0})},h.prototype.MTb=function(e,t,i){return t.filter(function(t){return t.we.P===e}).map(function(t){return t.we.Ob}).map(function(e){return i.find(function(t){return t.trackId===e})}).filter(Boolean)},e.oGa=h},function(t,e,i){var r,n,a,o;function s(t){return n.$T.call(this,t)||this}_esm(e),e.bUa=void 0,r=i(101),n=i(498),a=i(91),o=i(127),S(s,n.$T),s.prototype.D5b=function(i,t){var n=this,e=(t=rt(r.nw(function(t){return t.streams&&0<t.streams.length},t))).next().value;if(t.next().value.forEach(function(t){return n.log.warn("Video track is missing streams",{trackId:t.Ng})}),(t=e.map(function(t){var e=t.Hi;return(e=Object.assign(Object.assign({},i),{type:a.pj.video,trackId:t.Ng,sy:t.ES,Hi:o.j5[e.toLowerCase()]||o.$q.wM,gG:e,streams:[],Bh:{},a0:t.a0})).streams=n.vlb(t.streams,e),n.log.trace("Transformed video track",{StreamCount:e.streams.length}),e})).length)return this.log.trace("Transformed video tracks",{Count:t.length}),t;throw Error("No valid video tracks")},s.prototype.z5b=function(t){var e=t.map(function(t){return t.a0}).filter(Boolean),e=[].concat.apply([],J(e)).map(function(t){return t.fa});return t=t.map(function(t){return t.rra}).filter(Boolean).map(function(t){return t.fa}),0<e.length?e:t},e.bUa=s},function(t,e,i){var n,r,a,o,s,u;function c(t,e){return(t=r.uf.call(this,t,"ManifestParserConfigImpl")||this).wh=e,t}_esm(e),e.YMa=void 0,t=i(0),n=i(1),r=i(45),a=i(33),o=i(44),s=i(111),u=i(52),S(c,r.uf),nt.Object.defineProperties(c.prototype,{pfa:{configurable:!0,enumerable:!0,get(){return[]}},Jsa:{configurable:!0,enumerable:!0,get(){return""}},spa:{configurable:!0,enumerable:!0,get(){return[]}},rpa:{configurable:!0,enumerable:!0,get(){return[]}},Nsa:{configurable:!0,enumerable:!0,get(){return""}},jva:{configurable:!0,enumerable:!0,get(){return 0}},wS:{configurable:!0,enumerable:!0,get(){return this.wh.wS.ka(u.Xw)}},Jw:{configurable:!0,enumerable:!0,get(){return this.wh.Jw}},YP:{configurable:!0,enumerable:!0,get(){return this.wh.YP}},DZa:{configurable:!0,enumerable:!0,get(){return["heaac-2-dash"]}}}),i=c,t.__decorate([o.config(o.sL,"supportedAudioTrackTypes")],i.prototype,"pfa",null),t.__decorate([o.config(o.string,"forceAudioTrack")],i.prototype,"Jsa",null),t.__decorate([o.config(o.iEa,"cdnIdWhiteList")],i.prototype,"spa",null),t.__decorate([o.config(o.iEa,"cdnIdBlackList")],i.prototype,"rpa",null),t.__decorate([o.config(o.string,"forceTimedTextTrack")],i.prototype,"Nsa",null),t.__decorate([o.config(o.XC,"imageSubsResolution")],i.prototype,"jva",null),t.__decorate([o.config(o.XC,"timedTextSimpleFallbackThreshold")],i.prototype,"wS",null),t.__decorate([o.config(o.sL,"timedTextProfiles")],i.prototype,"Jw",null),t.__decorate([o.config(o.sL,"imscLanguageList")],i.prototype,"YP",null),t.__decorate([o.config(o.sL,"auxiliaryManifestAudioProfileNeedsBitrateMatching")],i.prototype,"DZa",null),i=t.__decorate([n.$(),t.__param(0,n.l(a.Sm)),t.__param(1,n.l(s.lH))],i),e.YMa=i},function(t,e){function i(t){this.Sc=t,this.Sb=JSON.stringify(this.VTb())}_esm(e),e.dNa=void 0,i.prototype.VTb=function(){var t=[];return(!this.Sc.Jg||this.Sc.Jg.length<=0)&&t.push({error:"No CDN."}),this.Sc.bX||t.push({error:"No default audio track.",foundTracks:this.wta(this.Sc.wj)}),this.Sc.S8||t.push({error:"No default video track.",foundTracks:this.wta(this.Sc.wz)}),this.Sc.dX||t.push({error:"No default subtitle track.",foundTracks:this.wta(this.Sc.Gi)}),t},i.prototype.wta=function(t){return t&&0<t.length?t.map(function(t){return t.trackId}):"No tracks found."},e.dNa=i},function(t,e,i){var n,r,a,o,s;function u(t,e){this.pab=t,this.E0b=e}_esm(e),e.WMa=void 0,t=i(0),n=i(1),r=i(503),a=i(504),o=i(37),s=i(4),u.prototype.create=function(t){var e,i=this;if(t&&!this.XYb(t)){if(this.dZb(t))throw o.jd.uhc(s.Z.mM,s.Y.Rvb,t);return(e=this.pab()).Jna(t.links),this.E0b.kP(t),{hb:t,Cj:e,Xva:!1,Wva:!1,ev:null!=(t=null==(e=t.ev)?void 0:e.map(function(t){var e=i.pab();return e.Jna(t.links),{hb:t,Cj:e,Xva:!1,Wva:!1,ev:[]}}))?t:[]}}},u.prototype.dZb=function(t){return"type"in t&&"muxed"===t.type},u.prototype.XYb=function(t){return"runtime"in t&&!!t.runtime},i=u,i=t.__decorate([n.$(),t.__param(0,n.l(r.qPa)),t.__param(1,n.l(a.VMa))],i),e.WMa=i},function(t,e,i){var n,r;function a(t){this.rPb=t,this.abb={Ko:"drmType",Toc:"drmVersion",expiration:"expiration",L:"movieId",ip:"packageId",duration:"duration",Og:"playbackContextId",Q8:["defaultTrackOrderList",{GQ:"mediaId",QS:"videoTrackId",qkb:"subtitleTrackId",zo:"audioTrackId",Hrc:"preferenceOrder"}],Xoc:["eligibleABTestMap",{Fk:r.Fk}],Jnc:["badgingInfo",{Moc:"dolbyDigitalAudio",Npc:"hdrVideo",Noc:"dolbyVisionVideo",etc:"ultraHdVideo","3dVideo":"3dVideo",Loc:"dolbyAtmosAudio",Bnc:"assistiveAudio",isc:"sdVideo",Mpc:"hdVideo"}],type:"type",Enc:["audioTextShortcuts",{id:"id",zo:"audioTrackId",Psc:"textTrackId"}],Arc:"partiallyHydrated",Fbb:"maxRecommendedAudioRank",Gbb:"maxRecommendedTextRank",om:"drmContextId",oWb:"hasDrmProfile",nWb:"hasClearProfile",lF:"hasDrmStreams",$$:"hasClearStreams",Dj:["locations",{cc:"rank",level:"level",weight:"weight",key:"key"}],links:["links",{}],Zl:["servers",{id:"id",name:"name",type:"type",cc:"rank",Rab:"lowgrade",ENb:["dns",{host:"host",vYb:"ipv4",wYb:"ipv6",mRb:"forceLookup"}],key:"key"}],dv:["audio_tracks",{type:"type",tL:"subType",variant:"variant",Hi:"trackType",Ng:"new_track_id",ES:"track_id",T7b:"profileType",Qcc:"stereo",profile:"profile",channels:"channels",language:"language",aHb:"channelsFormat",o1:"surroundFormatLabel",AF:"languageDescription",vNb:"disallowedSubtitleTracks",l2a:"defaultTimedText",isNative:"isNative",vF:"isNoneTrack",streams:["streams",{hq:"downloadable_id",size:"size",CE:"content_profile",Hi:"trackType",bitrate:"bitrate",Aj:"isDrm",urls:["urls",{Bo:"cdn_id",url:"url",wba:"liveOcaCapabilities"}],N2b:"new_stream_id",type:"type",channels:"channels",aHb:"channelsFormat",o1:"surroundFormatLabel",language:"language",Dnc:"audioKey",v2b:["moov",{size:"size",offset:"offset"}],iz:["sidx",{size:"size",offset:"offset"}],MC:["ssix",{size:"size",offset:"offset"}],Qj:"tags",gBa:"representationId"}],dIb:"codecName",gG:"rawTrackType",id:"id",cc:"rank",bj:"hydrated",I3b:"offTrackDisallowed"}],bD:["video_tracks",{Hi:"trackType",Ng:"new_track_id",type:"type",ES:"track_id",oWb:"hasDrmProfile",nWb:"hasClearProfile",lF:"hasDrmStreams",$$:"hasClearStreams",zJ:"groupName",streams:["streams",{hq:"downloadable_id",size:"size",CE:"content_profile",Hi:"trackType",WI:"drmHeaderId",bitrate:"bitrate",Aj:"isDrm",urls:["urls",{Bo:"cdn_id",url:"url",wba:"liveOcaCapabilities"}],N2b:"new_stream_id",type:"type",Crc:"peakBitrate",mNb:"dimensionsCount",nNb:"dimensionsLabel",Neb:"pix_w",Meb:"pix_h",ohb:"res_w",mBa:"res_h",JLb:"crop_x",KLb:"crop_y",ILb:"crop_w",HLb:"crop_h",g5a:"framerate_value",f5a:"framerate_scale",Ijb:"startByteOffset",eb:"vmaf",v2b:["moov",{size:"size",offset:"offset"}],iz:["sidx",{size:"size",offset:"offset"}],MC:["ssix",{size:"size",offset:"offset"}],rs:["segmentVmaf",{offset:"offset",eb:"vmaf"}],Qj:"tags",gBa:"representationId"}],T7b:"profileType",Qcc:"stereo",profile:"profile",mNb:"dimensionsCount",nNb:"dimensionsLabel",Asc:["snippets",{Fk:[r.Fk,{zsc:"snippetSpec",va:"startTimeMs",wa:"endTimeMs"}]}],rra:["drmHeader",{fa:"bytes",xHb:"checksum",WI:"drmHeaderId",vq:"keyId",Vl:["resolution",{height:"height",width:"width"}]}],a0:["prkDrmHeaders",{fa:"bytes",xHb:"checksum",WI:"drmHeaderId",vq:"keyId",Vl:["resolution",{height:"height",width:"width"}]}],Fv:"flavor",Ypc:"ict",maxWidth:"maxWidth",maxHeight:"maxHeight",Fza:"pixelAspectX",Gza:"pixelAspectY",Hqc:"maxCroppedWidth",Gqc:"maxCroppedHeight",Iqc:"maxCroppedX",Jqc:"maxCroppedY",Nxa:"max_framerate_value",Mxa:"max_framerate_scale",minWidth:"minWidth",minHeight:"minHeight",Yqc:"minCroppedWidth",Xqc:"minCroppedHeight",Zqc:"minCroppedX",$qc:"minCroppedY",zh:["license",{p_b:"licenseResponseBase64",Orc:"providerSessionToken",msc:"secureStopExpected",Soc:"drmSessionId",links:["links",{}]}]}],wO:["cdnResponseData",{eL:"sessionABTestCell",jp:"pbcid"}],Co:["choiceMap",{yd:"initialSegment",type:"type",N:"viewableId",O:["segments",{Fk:[r.Fk,{va:"startTimeMs",wa:"endTimeMs",next:["next",{Fk:[r.Fk,{weight:"weight"}]}],Rb:"defaultNext",lq:"exitZones"}]}]}],Go:["contentPlaygraph",{ba:["playgraph",{yd:"initialSegment",O:["segments",{Fk:[r.Fk,{N:"viewableId",va:"startTimeMs",wa:"endTimeMs",next:["next",{Fk:[r.Fk,{weight:"weight"}]}],Rb:"defaultNext"}]}]}],Fsc:["startIdent",{Zpc:"identToken",N:"viewableId"}]}],media:["media",{id:"id",we:["tracks",{P:"AUDIO",Ob:"TEXT",J:"VIDEO"}]}],m0:["recommendedMedia",{QS:"videoTrackId",zo:"audioTrackId",xS:"timedTextTrackId"}],A1:["timedtexttracks",{Hi:"trackType",Ng:"new_track_id",type:"type",tL:"subType",variant:"variant",gG:"rawTrackType",AF:"languageDescription",language:"language",id:"id",vF:"isNoneTrack",Taa:"isForcedNarrative",Z2a:["downloadableIds",{}],F_a:["cdnlist",{id:"id",name:"name",type:"type",cc:"rank",Rab:"lowgrade",ENb:["dns",{host:"host",vYb:"ipv4",wYb:"ipv6",mRb:"forceLookup"}],key:"key"}],gEa:["ttDownloadables",{Fk:[r.Fk,{id:"id",size:"size",Osc:"textKey",Lpc:"hashValue",Kpc:"hashAlgo",iqc:"isImage",Zxa:"midxOffset",jcb:"midxSize",height:"height",width:"width",sv:["downloadUrls",{}],urls:["urls",{url:"url",Bo:"cdn_id",wba:"liveOcaCapabilities"}]}]}],Waa:"isLanguageLeftToRight",Rv:"headIdentDuration",cc:"rank",bj:"hydrated"}],Zec:["trickplays",{hq:"downloadable_id",size:"size",urls:"urls",id:"id",interval:"interval",d6b:"pixelsAspectY",c6b:"pixelsAspectX",width:"width",height:"height",Rv:"headIdentDuration"}],vnb:["watermarkInfo",{opacity:"opacity",id:"id",anchor:"anchor"}],Roc:"dpsid",$h:"isBranching",stc:"viewableType",Lva:"isAd",lQ:"isSupplemental",UHb:"clientIpAddress",jtc:"urlExpirationDuration",Cqc:"manifestExpirationDuration",Gsc:["steeringAdditionalInfo",{Hsc:"steeringId",wnc:"additionalGroupNames",Jsc:["streamingClientConfig",{}]}],Oe:"auxiliaryManifestToken",vQ:["liveMetadata",{SNb:["downloadableIdToSegmentTemplateId",{Fk:r.Fk}],lac:["segmentTemplateIdToSegmentTemplate",{Fk:[r.Fk,{bFb:"availabilityStartTime",dYb:"initialization",media:"media",m7b:"presentationTimeOffset",bfa:"startNumber",duration:"duration",aa:"timescale"}]}],H3b:"ocLiveWindowDurationSeconds"}],mfa:"streamingType"},this.F0b=Object.assign(Object.assign({},this.abb),{ev:["auxiliaryManifests",this.abb],VN:["adverts",{jg:["adBreaks",{ap:"locationMs",Ti:["ads",{id:"id",va:"startTimeMs",wa:"endTimeMs",xfa:["timedAdEvents",{event:"event",Lx:"adEventToken",nec:"timeMs"}],TV:["actionAdEvents",{start:["start",{event:"event",Lx:"adEventToken"}],complete:["complete",{event:"event",Lx:"adEventToken"}],stop:["stop",{event:"event",Lx:"adEventToken"}]}],KJ:"is3pVerificationEnabled",LDa:"thirdPartyVerificationToken"}],xna:["actionAdBreakEvents",{complete:["complete",{event:"event",Lx:"adEventToken"}]}]}]}]})}_esm(e),e.UMa=void 0,t=i(0),n=i(1),r=i(226),a.prototype.kP=function(t){this.rPb.kP(t,this.F0b)},i=a,i=t.__decorate([n.$(),t.__param(0,n.l(r.tJa))],i),e.UMa=i},function(t,e,i){var a;function n(t,e,i,n,r){this.k7=this.Ln=this.s_=this.r_=a.ix,this.request=t,this.type=t.responseType,this.xm=n,this.abort=e,this.timeout=i,this.k7=r}_esm(e),e.SKa=void 0,a=i(17),n.prototype.dbc=function(t){this.r_=t},n.prototype.lbc=function(t){this.s_=t},n.prototype.Vac=function(t){this.Ln=t},e.SKa=n},function(t,e){_esm(e),e.E1a=void 0,e.E1a=function(e,t,i,n){return{KUb:function(){var t=e.Xta();return n.Rv&&(t+=n.Rv),t},Aa:t,request:i,Qf:!1}}},function(t,e,i){var u,a,o,s,c;function h(t){return-1<["simplesdh","dfxp-ls-sdh","imsc1.1"].indexOf(t)}function n(t,i){var e,n,r=c.call(this)||this;if(r.Lk=!0,r.bV=[],r.Cx=0,r.ZWa=!0,n=t.Qf||!1,r.Ta=t.Aa||console,r.pr=t.request,r.yx=t.KUb,r.d6=null!=(e=t.Hpc)?e:function(t,e){return t-(null!=e?e:r.yx())},r.uh=null,r.Lk=!0,r.bV=[],r.uV=i.profile,r.im=i.url,r.ZH=i.Qd,r.tV=i.preferences,r.NU=i.wh,r.Cx=r.ZH||0,r.ZWa=null==(e=i.Rrc)||e,t={url:r.im,request:r.pr,Qd:r.ZH,xml:i.xml,preferences:r.tV,wh:r.NU,Aa:r.Ta,Qf:n,bufferSize:i.bufferSize,gw:i.gw,uAa:i.uAa||0,c_a:i.c_a},"nflx-cmisc"===r.uV)t.offset=i.Zxa,t.size=i.jcb,t.Eea=i.Eea,t.q3a=i.q3a,r.od=new o(t);else{if(!h(r.uV)||"function"!=typeof a)throw Error("SubtitleManager: "+r.uV+" is an unsupported profile");r.od=new a(t)}return r.od.on("ready",function(){var t,e=!!i.CZa;r.Ta.info("ready event fired by subtitle stream"),r.emit("ready"),t=r.od.CP.bind(r.od),r.uh=new s(r.yx,t,r.d6,function(){return r.Lk},r.Ta,i),"dfxp-ls-sdh"===r.uV&&"function"==typeof a&&r.uh.on("stagesubtitle",r.Acc.bind(r)),r.uh.on("showsubtitle",r.JCa.bind(r)),r.uh.on("removesubtitle",r.VAa.bind(r)),r.uh.on("underflow",r.up.bind(r)),r.uh.on("bufferingComplete",r.cf.bind(r)),e&&(r.Ta.info("autostarting subtitles"),setTimeout(function(){r.Ow(r.yx())},10))}),r.od.on("error",r.emit.bind(r,"error")),r}_esm(e),e.dwb=void 0,u=i(0),t=i(117),a=i(1214),o=i(1219),s=i(1226),c=t.EventEmitter,u.__extends(n,c),n.prototype.start=function(){this.od.start()},n.prototype.Ufb=function(){this.Lk||(this.Lk=!0,this.I3a(this.Cx))},n.prototype.Ow=function(t){this.ZWa&&!this.Lk&&1e4<Math.abs(t-this.Cx)&&(this.Ta.warn("Detected an unexpected pts jump larger than",1e4,"at",t,". If this is a seamless segment transition then the ptsShift API","should have been called before the pts change was reflected."),this.Ufb()),this.Cx=t,this.Lk&&(this.Lk=!1,this.Ccc(t)),null!==this.uh&&(this.Ifc(t),this.uh.Ow(t))},n.prototype.stop=function(){var t;return this.Ta.info("stop called"),this.Lk||this.pause(),this.od.removeAllListeners(["ready"]),null!==this.uh&&this.uh.stop(),t=this.bV.reduce(function(t,e){return t.mjb+=e.X0,t.x9+=e.y9||0,t.sYb.push(e),t},{mjb:0,x9:0,sYb:[]}),"object"==typeof this.od&&this.od.close(),this.Ta.info("metrics: "+JSON.stringify(t)),t},n.prototype.pause=function(){var t=this.yx();this.Lk?this.Ta.warn("pause called on subtitle manager, but it was already paused!"):(this.Ta.info("pause called at "+t),this.Lk=!0,this.I3a(t)),null!==this.uh&&this.uh.pause()},n.prototype.M$=function(t,e){return"function"==typeof this.od.M$?this.od.M$(t,e):[]},n.prototype.Lv=function(t,e){return this.od.Lv(t,e)},n.prototype.CP=function(t){return this.od.CP(t)},n.prototype.mG=function(t){var e;function i(){e.Ta.info("bufferingComplete from setStreamStartPosition"),e.emit("bufferingComplete")}"function"==typeof(e=this).od.mG?this.od.mG(t,i):i()},n.prototype.lj=function(t,e){"function"==typeof this.od.lj&&this.od.lj(t,e)},n.prototype.Rj=function(t,e){"function"==typeof this.od.Rj&&this.od.Rj(t,e)},n.prototype.mta=function(){return this.bV[this.bV.length-1]},n.prototype.JCa=function(t){var e,i,n,r=0;if(this.Ta.info("show subtitle called at "+this.yx()+" for displayTime "+t.displayTime),this.emit("showsubtitle",t),(i=this.mta()).cS||(i.cS={}),h(this.uV))try{for(var a=u.__values(t.blocks),o=a.next();!o.done;o=a.next())n=o.value,i.cS[n.id]||(r++,i.cS[n.id]=!0)}catch(t){var s={error:t}}finally{try{o&&!o.done&&(e=a.return)&&e.call(a)}finally{if(s)throw s.error}}else i.cS[t.id]||(r++,i.cS[t.id]=!0);i.X0+=r},n.prototype.VAa=function(t){this.Ta.info("remove subtitle called at "+this.yx()+" for remove time "+(t.displayTime+t.duration)),this.emit("removesubtitle",t)},n.prototype.Acc=function(t){this.Ta.info("stage subtitle called at "+this.yx()+" for displayTime "+t.displayTime),this.emit("stagesubtitle",t)},n.prototype.up=function(){this.Ta.info("underflow fired by the subtitle timer"),this.emit("underflow")},n.prototype.cf=function(){this.Ta.info("bufferingComplete fired by the subtitle timer"),this.emit("bufferingComplete")},n.prototype.Ccc=function(t){this.Ta.info("creating a new subtitle interval at "+t),this.bV.push({ea:t,X0:0})},n.prototype.Ifc=function(t){var e=this.mta();e&&(e.Cwa=t)},n.prototype.I3a=function(t){var e;this.Ta.info("ending subtitle interval at "+t),(e=this.mta())&&(e.Qa=t,e.Qa<e.ea&&(this.Ta.warn("correcting for interval where endPts is smaller than startPts"),e.ea=0<e.Qa?e.Qa-1:0),e.y9=this.od.Lv(e.ea,e.Qa),delete e.cS,e.y9>e.X0&&e.Cwa&&e.Qa-e.Cwa<500&&(e.y9=this.od.Lv(e.ea,e.Cwa)),this.Ta.info("showed "+e.X0+" during this interval"),this.Ta.info("expected "+e.y9+" for this interval"))},e.dwb=i=n,e.default=i},function(t,e,i){var o,f,l,a,s,d,p,b,u;function n(t){var e=t.preferences,i=t.wh,n=t.Qd,r=t.xml,a=t.Aa;if(!t.xml&&!t.request)throw Error("FullTextStream requires either a 'request' function or the 'xml' data");o.call(this),this.ze=this.cma=null,this.tV="object"==typeof e?t.preferences:{},this.NU="object"==typeof i?t.wh:{},this.bE="number"==typeof n?t.Qd:0,this.kI="string"==typeof r?t.xml:"",this.Ta="object"==typeof a?t.Aa:u,this.pr=t.request,this.im=t.url,this.EH=[],this.Cx=this.bE,this.uh=null,this.Kma=this.bXa=!1,this.Zwb=t.uAa||0}function r(t,e){return t&&"object"==typeof t[e]&&null!==t[e]?t[e]:{}}function c(t,e){return!(t===e||t&&0===Object.keys(t).length&&e&&0===Object.keys(e).length)}function h(){var i,e,n,r,o,s,u,c,h,a=this,t=a.kI.indexOf("<p");-1<t?(i=a.kI.slice(0,t),e=i,n=function(t,e){null!==t?(t.Qpc=i,a.emit("error",t)):(a.cma=e,a.ze=new l(a.kI,e.tickRate),g.call(a,a.bE))},r=f.zg(!0),o={},s=[],u=null,c=[],h={},r.onerror=function(t){n(t,null)},r.onend=function(){n(null,o)},r.onclosetag=function(){s.pop()},r.onopentag=function(t){var e=t.attributes,i=t.name,n=o.regions,r=o.styles;if(s.push(t),"tt"===i)o=function(t){var e;"string"==typeof(t=m(t,p)).extent?(e=t.extent.split(" ").map(function(t){return parseInt(t,10)}),t.width=e[0],t.height=e[1]):(t.width=1280,t.height=720);return t.aspectRatio=t.width/t.height,"string"==typeof t.cellResolution?(e=t.cellResolution.split(" ").map(function(t){return parseInt(t,10)}),t.cellResolution={},t.cellResolution.x=e[0],t.cellResolution.y=e[1]):t.cellResolution={x:52,y:19},t}(e);else if("body"===i)void 0!==e.style&&(o.defaultStyle=e.style,c.push(e.style));else if("initial"===i&&v(s,"styling"))h=m(e,d);else if("style"===i&&v(s,"styling")){if(n=e["xml:id"],t=h,e=m(e,d),Object.keys(t).length)for(var a in t)void 0===e[a]&&(e[a]=t[a]);r[n]=e}else"style"===i&&v(s,"region")?"string"==typeof(r=Object.keys(e)[0])&&(n[u][r.slice(4)]=e[r]):"region"===i&&v(s,"layout")&&(n[u=e["xml:id"]]=m(e,b))},setTimeout(function(){var t;for(r.write(e);0<s.length&&!r.error;)t=y(s).name,r.write("</"+t+">");r.close()},10)):a.emit("error",Error("paragraph tag not found when searching for '<p'; could not build index"))}function g(t){var e,i,n=this,o=n.cma,s=0,u=[],c=o.defaultStyle?[o.defaultStyle]:[];n.Ta.info("parsing the next 5 entries..."),e=n.ze.jUb(t),n.Ta.info(e),(i=f.zg(!0)).onerror=function(t){t.xml=e,n.emit("error",t)},i.onend=function(){var i=n.EH.reduce(function(t,e){return e=e.blocks.reduce(function(t,e){return t.concat([e.id])},[]),t.concat(e)},[]);u.forEach(function(t){var e;-1===i.indexOf(t.id)&&(e=t&&t.blocks&&t.blocks.filter(function(t){return 0<t.textNodes.length}))&&0<e.length&&(t.blocks=e,n.EH.push(t))}),n.Kma=!1,n.bXa||(n.bXa=!0,n.emit("ready"))},i.ontext=function(t){""===t.trim()&&!t.match(/ +/)||y(y(u).blocks).textNodes.push({text:t.match(/ +/)?t:t.trim(),style:y(c),lineBreaks:s}),s=0},i.onclosetag=function(){void 0!==i.tag.attributes.style&&c.pop()},i.onopentag=function(t){var e,i,n,r=t.attributes,a=t.name;t=o.tickRate,"p"===a?(s=0,a=r["xml:id"],r.style&&c.push(r.style),e=Math.floor(parseInt(r.begin)/t*1e3),0===u.length||y(u).displayTime!==e?(e=u.push,i={},n=parseInt(r.begin)/t,t=parseInt(r.end)/t,i.id=a,i.startTime=Math.floor(1e3*n),i.endTime=Math.floor(1e3*t),i.style=r.style,i.region=r.region,i.displayTime=i.startTime,i.duration=i.endTime-i.startTime,i.extent=r["tts:extent"]||null,i.origin=r["tts:origin"]||null,i.latestEndSoFar=i.endTime<0?0:i.endTime,i.blocks=[{textNodes:[],region:i.region,id:a,extent:i.extent,origin:i.origin}],e.call(u,i)):y(u).blocks.push({textNodes:[],region:r.region,id:a,extent:r["tts:extent"]||null,origin:r["tts:origin"]||null})):"span"===a?c.push(r.style):"br"===a&&s++},i.write("<entries>").write(e).write("</entries>").close()}function m(e,t){var i={};return t.forEach(function(t){void 0!==e["tts:"+t]?i[t]=e["tts:"+t]:void 0!==e["ttp:"+t]?i[t]=e["ttp:"+t]:void 0!==e["ebutts:"+t]?i[t]=e["ebutts:"+t]:void 0!==e["xml:"+t]&&(i[t]=e["xml:"+t])}),i.styles={},i.regions={},i}function v(t,e){for(var i=t.length-1;0<=i;i--)if(t[i].name===e)return 1}function y(t){if(Array.isArray(t))return t[t.length-1];throw Error("last called on non-array: "+t)}function w(i,t){var n=this,r=i.styles||{};return{startTime:t.startTime,id:t.id,endTime:t.endTime,displayTime:t.displayTime,duration:t.duration,blocks:t.blocks.map(function(t){var e=a.oLb(i,t);return{textNodes:t.textNodes.map(function(t,e){return{lineBreaks:e.lineBreaks,text:e.text,style:s.sLb(t[e.style]||{},this.NU,this.tV),id:e.id}}.bind(n,r)),region:e,id:t.id}})}}o=i(117).EventEmitter,f=i(1215),l=i(1216),a=i(1217),s=i(1218),d="color fontSize fontWeight fontStyle textAlign fontFamily backgroundColor textDecoration textOutline multiRowAlign direction".split(" "),p="cellResolution pixelAspectRatio tickRate timeBase extent lang".split(" "),b="backgroundColor displayAlign extent origin writingMode multiRowAlign".split(" "),u={info:function(){}},e=Object.create(o.prototype),(n.prototype=e).start=function(){var i=this;i.Ta.info("incremental text stream created, starting at pts "+i.bE),i.kI?h.call(i):i.pr({url:i.im},function(t,e){i.kI=e,h.call(i)})},e.CP=function(t){var e,i,n,r,a,o=this;for(t<o.Cx-o.Zwb&&(o.EH=[]),e=o.EH,i=0<e.length?e[e.length-1].startTime:t,o.Cx=t,!o.uh&&o.EH.length<5&&!o.Kma&&(o.Ta.info("buffer size: "+o.EH.length+"; minimum: 5"),o.Kma=!0,o.uh=setTimeout(function(){o.uh=null,g.call(o,i+1)},10));0<e.length&&e[0].endTime<t;)e.shift();return r=t,a=(n=e).filter(function(t){return t.startTime<=r&&r<=t.endTime}),e=(0<(n=n.filter(function(t){return t.startTime>r})).length?a.concat([n[0]]):a).map(w.bind(o,o.cma)),e=t<o.ze.zQb()&&0===e.length?null:e},e.Lv=function(t,e){return this.ze?this.ze.Lv(t,e):0},e.close=function(){},e.itc=function(t){var e=r(t,"preferences");return t=r(t,"defaults"),!(!c(e,this.tV)&&!c(t,this.NU))&&(this.tV=e,this.NU=t,!0)},t.exports=n},function(M,t){var h,n,f,e,l,d,p,b,g,r,a,o,m,v,y,s,u,w=t;function c(){}function A(t,e){if(!(this instanceof A))return new A(t,e);for(var i=0,n=h.length;i<n;i++)this[h[i]]="";this.q=this.c=this.Mo=this.textNode="",this.YZa=w.Qia,this.hp=e||{},this.hp.Pab=this.hp.Pab||this.hp.vqc,this.ixa=this.hp.Pab?"toLowerCase":"toUpperCase",this.Qj=[],this.closed=this.GW=this.PR=!1,this.tag=this.error=null,this.$n=!!t,this.jdb=!(!t&&!this.hp.jdb),this.state=y.Wga,this.Lz=(this.gkb=this.hp.gkb)?Object.create(w.ywb):Object.create(w.Lz),this.lE=[],this.hp.j2&&(this.fl=Object.create(o)),(this.Gfa=!1!==this.hp.position)&&(this.position=this.line=this.HW=0),this.onready&&this.onready(void 0)}function _(t,e){var i;if(!(this instanceof _))return new _(t,e);c.apply(this),this.vA=new A(t,e),this.readable=this.writable=!0,(i=this).vA.onend=function(){i.emit("end")},this.vA.onerror=function(t){i.emit("error",t),i.vA.error=null},n.forEach(function(e){Object.defineProperty(i,"on"+e,{get(){return i.vA["on"+e]},set(t){if(!t)return i.removeAllListeners(e),i.vA["on"+e]=t;i.on(e,t)},enumerable:!0,configurable:!1})})}function i(t){return t.split("").reduce(function(t,e){return t[e]=!0,t},{})}function E(t,e){return"[object RegExp]"===Object.prototype.toString.call(t)?e.match(t):t[e]}function k(t,e,i){t.textNode&&S(t),t[e]&&t[e](i)}function S(t){t.textNode=T(t.hp,t.textNode),t.textNode&&t.ontext&&t.ontext(t.textNode),t.textNode=""}function T(t,e){return t.trim&&(e=e.trim()),e=t.normalize?e.replace(/\s+/g," "):e}function I(t,e){return S(t),t.Gfa&&(e+="\nLine: "+t.line+"\nColumn: "+t.HW+"\nChar: "+t.c),e=Error(e),t.error=e,t.onerror&&t.onerror(e),t}function O(t){return t.PR&&!t.GW&&x(t,"Unclosed root tag"),t.state!==y.Wga&&t.state!==y.Xga&&t.state!==y.Ob&&I(t,"Unexpected end"),S(t),t.c="",t.closed=!0,t.onend&&t.onend(void 0),A.call(t,t.$n,t.hp),t}function x(t,e){if("object"!=typeof t||!(t instanceof A))throw Error("bad call to strictFail");t.$n&&I(t,e)}function R(t,e){var i=(n=t.indexOf(":")<0?["",t]:t.split(":"))[0],n=n[1];return e&&"xmlns"===t&&(i="xmlns",n=""),{prefix:i,local:n}}function P(t){var e,i,n;if(t.$n||(t.Yj=t.Yj[t.ixa]()),-1!==t.lE.indexOf(t.Yj)||t.tag.attributes.hasOwnProperty(t.Yj))return t.Yj=t.Zj="";t.hp.j2?(i=(e=R(t.Yj,!0)).local,"xmlns"===e.prefix&&("xml"===i&&t.Zj!==r?x(t,"xml: prefix must be bound to "+r+"\nActual: "+t.Zj):"xmlns"===i&&t.Zj!==a?x(t,"xmlns: prefix must be bound to "+a+"\nActual: "+t.Zj):(e=t.tag,n=t.Qj[t.Qj.length-1]||t,e.fl===n.fl&&(e.fl=Object.create(n.fl)),e.fl[i]=t.Zj)),t.lE.push([t.Yj,t.Zj])):(t.tag.attributes[t.Yj]=t.Zj,k(t,"onattribute",{name:t.Yj,value:t.Zj})),t.Yj=t.Zj=""}function C(e,t){var i,n,r,a,o,s;if(e.hp.j2){i=e.tag,u=R(e.tagName),i.prefix=u.prefix,i.local=u.local,i.uri=i.fl[u.prefix]||"",i.prefix&&!i.uri&&(x(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),i.uri=u.prefix),u=e.Qj[e.Qj.length-1]||e,i.fl&&u.fl!==i.fl&&Object.keys(i.fl).forEach(function(t){k(e,"onopennamespace",{prefix:t,uri:i.fl[t]})});for(var u=0,c=e.lE.length;u<c;u++)r=(n=e.lE[u])[0],a=n[1],s=""!=(n=(o=R(r,!0)).prefix)&&i.fl[n]||"",a={name:r,value:a,prefix:n,local:o.local,uri:s},n&&"xmlns"!=n&&!s&&(x(e,"Unbound namespace prefix: "+JSON.stringify(n)),a.uri=n),e.tag.attributes[r]=a,k(e,"onattribute",a);e.lE.length=0}e.tag.lqc=!!t,e.PR=!0,e.Qj.push(e.tag),k(e,"onopentag",e.tag),t||(e.state=e.jdb||"script"!==e.tagName.toLowerCase()?y.Ob:y.BM,e.tag=null,e.tagName=""),e.Yj=e.Zj="",e.lE.length=0}function j(e){var i;if(e.tagName){if(e.ol){if("script"!==e.tagName)return e.ol+="</"+e.tagName+">",e.tagName="",void(e.state=y.BM);k(e,"onscript",e.ol),e.ol=""}for(var t=e.Qj.length,n=e.tagName,r=n=e.$n?n:n[e.ixa]();t--&&e.Qj[t].name!==r;)x(e,"Unexpected close tag");if(t<0)x(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">";else{for(e.tagName=n,n=e.Qj.length;n-- >t;){i=e.tag=e.Qj.pop(),e.tagName=e.tag.name,k(e,"onclosetag",e.tagName),i.fl;r=e.Qj[e.Qj.length-1]||e,e.hp.j2&&i.fl!==r.fl&&Object.keys(i.fl).forEach(function(t){k(e,"onclosenamespace",{prefix:t,uri:i.fl[t]})})}0===t&&(e.GW=!0),e.tagName=e.Zj=e.Yj="",e.lE.length=0}}else x(e,"Weird empty close tag."),e.textNode+="</>";e.state=y.Ob}for(y in w.zg=function(t,e){return new A(t,e)},w.Ylc=A,w.Zlc=_,w.B1a=function(t){return new _(t,void 0)},w.Qia=65536,h="comment sgmlDecl textNode tagName doctype procInstName procInstBody entity attribName attribValue cdata script".split(" "),w.We="text processinginstruction sgmldeclaration doctype comment attribute opentag closetag opencdata cdata closecdata error end ready script opennamespace closenamespace".split(" "),Object.create||(Object.create=function(t){function e(){this.__proto__=t}return e.prototype=t,new e}),Object.getPrototypeOf||(Object.getPrototypeOf=function(t){return t.__proto__}),Object.keys||(Object.keys=function(t){var e,i=[];for(e in t)t.hasOwnProperty(e)&&i.push(e);return i}),A.prototype={end:function(){O(this)},write:function(t){var e,i,n,r,a,o;if(this.closed)return I(this,"Cannot write after close. Assign an onready handler.");if(null===t)return O(this);if(this.error)throw this.error;for(var s,u=0;this.c=s=t.charAt(u++);)switch(this.Gfa&&(this.position++,"\n"===s?(this.line++,this.HW=0):this.HW++),this.state){case y.Wga:if(this.state=y.Xga,"\ufeff"===s)continue;case y.Xga:"<"===s?(this.state=y.mja,this.fDa=this.position):E(f,s)||(x(this,"Non-whitespace before first tag."),this.textNode=s,this.state=y.Ob);continue;case y.Ob:if(this.PR&&!this.GW){for(var c=u-1;s&&"<"!==s&&"&"!==s;)(s=t.charAt(u++))&&this.Gfa&&(this.position++,"\n"===s?(this.line++,this.HW=0):this.HW++);this.textNode+=t.substring(c,u-1)}"<"!==s||this.PR&&this.GW&&!this.$n?(E(f,s)||this.PR&&!this.GW||x(this,"Text data outside of root node."),"&"===s?this.state=y.Jka:this.textNode+=s):(this.state=y.mja,this.fDa=this.position);continue;case y.BM:"<"===s?this.state=y.ORa:this.ol+=s;continue;case y.ORa:"/"===s?this.state=y.nha:(this.ol+="<"+s,this.state=y.BM);continue;case y.mja:"!"===s?(this.state=y.pka,this.lu=""):E(f,s)||(E(m,s)?(this.state=y.qOa,this.tagName=s):"/"===s?(this.state=y.nha,this.tagName=""):"?"===s?(this.state=y.ROa,this.Kda=this.JK=""):(x(this,"Unencoded <"),this.fDa+1<this.position&&(s=Array(this.position-this.fDa).join(" ")+s),this.textNode+="<"+s,this.state=y.Ob));continue;case y.pka:(this.lu+s).toUpperCase()===b?(k(this,"onopencdata"),this.state=y.G2,this.jn=this.lu=""):"--"===this.lu+s?(this.state=y.J2,this.lu=this.pn=""):(this.lu+s).toUpperCase()===g?(this.state=y.O2,(this.doctype||this.PR)&&x(this,"Inappropriately located doctype declaration"),this.lu=this.doctype=""):">"===s?(k(this,"onsgmldeclaration",this.lu),this.lu="",this.state=y.Ob):(E(l,s)&&(this.state=y.RRa),this.lu+=s);continue;case y.RRa:s===this.q&&(this.state=y.pka,this.q=""),this.lu+=s;continue;case y.O2:">"===s?(this.state=y.Ob,k(this,"ondoctype",this.doctype),this.doctype=!0):(this.doctype+=s,"["===s?this.state=y.tha:E(l,s)&&(this.state=y.YHa,this.q=s));continue;case y.YHa:this.doctype+=s,s===this.q&&(this.q="",this.state=y.O2);continue;case y.tha:this.doctype+=s,"]"===s?this.state=y.O2:E(l,s)&&(this.state=y.XHa,this.q=s);continue;case y.XHa:this.doctype+=s,s===this.q&&(this.state=y.tha,this.q="");continue;case y.J2:"-"===s?this.state=y.bHa:this.pn+=s;continue;case y.bHa:"-"===s?(this.state=y.aHa,(this.pn=T(this.hp,this.pn))&&k(this,"oncomment",this.pn),this.pn=""):(this.pn+="-"+s,this.state=y.J2);continue;case y.aHa:">"!==s?(x(this,"Malformed comment"),this.pn+="--"+s,this.state=y.J2):this.state=y.Ob;continue;case y.G2:"]"===s?this.state=y.TGa:this.jn+=s;continue;case y.TGa:"]"===s?this.state=y.UGa:(this.jn+="]"+s,this.state=y.G2);continue;case y.UGa:">"===s?(this.jn&&k(this,"oncdata",this.jn),k(this,"onclosecdata"),this.jn="",this.state=y.Ob):"]"===s?this.jn+="]":(this.jn+="]]"+s,this.state=y.G2);continue;case y.ROa:"?"===s?this.state=y.yja:E(f,s)?this.state=y.xja:this.Kda+=s;continue;case y.xja:if(!this.JK&&E(f,s))continue;"?"===s?this.state=y.yja:this.JK+=s;continue;case y.yja:">"===s?(k(this,"onprocessinginstruction",{name:this.Kda,body:this.JK}),this.Kda=this.JK="",this.state=y.Ob):(this.JK+="?"+s,this.state=y.xja);continue;case y.qOa:E(v,s)?this.tagName+=s:(this.$n||(this.tagName=this.tagName[this.ixa]()),c=this.Qj[this.Qj.length-1]||this,e=this.tag={name:this.tagName,attributes:{}},this.hp.j2&&(e.fl=c.fl),this.lE.length=0,">"===s?C(this):"/"===s?this.state=y.C4:(E(f,s)||x(this,"Invalid character in tag name"),this.state=y.SL));continue;case y.C4:">"===s?(C(this,!0),j(this)):(x(this,"Forward-slash in opening tag not followed by >"),this.state=y.SL);continue;case y.SL:if(E(f,s))continue;">"===s?C(this):"/"===s?this.state=y.C4:E(m,s)?(this.Yj=s,this.Zj="",this.state=y.p2):x(this,"Invalid attribute name");continue;case y.p2:"="===s?this.state=y.zga:">"===s?(x(this,"Attribute without value"),this.Zj=this.Yj,P(this),C(this)):E(f,s)?this.state=y.eFa:E(v,s)?this.Yj+=s:x(this,"Invalid attribute name");continue;case y.eFa:if("="===s)this.state=y.zga;else{if(E(f,s))continue;x(this,"Attribute without value"),this.Zj=this.tag.attributes[this.Yj]="",k(this,"onattribute",{name:this.Yj,value:""}),this.Yj="",">"===s?C(this):E(m,s)?(this.Yj=s,this.state=y.p2):(x(this,"Invalid attribute name"),this.state=y.SL)}continue;case y.zga:if(E(f,s))continue;E(l,s)?(this.q=s,this.state=y.Cga):(x(this,"Unquoted attribute value"),this.state=y.Dga,this.Zj=s);continue;case y.Cga:if(s!==this.q){"&"===s?this.state=y.Aga:this.Zj+=s;continue}P(this),this.q="",this.state=y.fFa;continue;case y.fFa:E(f,s)?this.state=y.SL:">"===s?C(this):"/"===s?this.state=y.C4:E(m,s)?(x(this,"No whitespace between attributes"),this.Yj=s,this.Zj="",this.state=y.p2):x(this,"Invalid attribute name");continue;case y.Dga:if(!E(p,s)){"&"===s?this.state=y.Bga:this.Zj+=s;continue}P(this),">"===s?C(this):this.state=y.SL;continue;case y.nha:if(this.tagName)">"===s?j(this):E(v,s)?this.tagName+=s:this.ol?(this.ol+="</"+this.tagName,this.tagName="",this.state=y.BM):(E(f,s)||x(this,"Invalid tagname in closing tag"),this.state=y.ZGa);else{if(E(f,s))continue;E(m,s)?this.tagName=s:this.ol?(this.ol+="</"+s,this.state=y.BM):x(this,"Invalid tagname in closing tag.")}continue;case y.ZGa:if(E(f,s))continue;">"===s?j(this):x(this,"Invalid characters in closing tag");continue;case y.Jka:case y.Aga:case y.Bga:switch(this.state){case y.Jka:i=y.Ob,n="textNode";break;case y.Aga:i=y.Cga,n="attribValue";break;case y.Bga:i=y.Dga,n="attribValue"}";"===s?(c=this[s=n],r=(e=this.Mo).toLowerCase(),a="",e=this.Lz[e]||this.Lz[r]||("#"===(e=r).charAt(0)&&(a="x"===e.charAt(1)?(e=e.slice(2),(o=parseInt(e,16)).toString(16)):(e=e.slice(1),(o=parseInt(e,10)).toString(10))),e=e.replace(/^0+/,""),a.toLowerCase()!==e?(x(this,"Invalid character entity"),"&"+this.Mo+";"):String.fromCodePoint(o)),this[s]=c+e,this.Mo="",this.state=i):E(d,s)?this.Mo+=s:(x(this,"Invalid character entity"),this[n]+="&"+this.Mo+s,this.Mo="",this.state=i);continue;default:throw Error(this,"Unknown state: "+this.state)}if(this.position>=this.YZa){for(t=Math.max(w.Qia,10),s=u=0,i=h.length;s<i;s++){if(t<(n=this[h[s]].length))switch(h[s]){case"textNode":S(this);break;case"cdata":k(this,"oncdata",this.jn),this.jn="";break;case"script":k(this,"onscript",this.ol),this.ol="";break;default:I(this,"Max buffer length exceeded: "+h[s])}u=Math.max(u,n)}this.YZa=w.Qia-u+this.position}return this},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){S(this),""!==this.jn&&(k(this,"oncdata",this.jn),this.jn=""),""!==this.ol&&(k(this,"onscript",this.ol),this.ol="")}},n=w.We.filter(function(t){return"error"!==t&&"end"!==t}),(_.prototype=Object.create(c.prototype,{constructor:{value:_}})).write=function(t){return this.vA.write(t.toString()),this.emit("data",t),!0},_.prototype.end=function(t){return t&&t.length&&this.write(t),this.vA.end(),!0},_.prototype.on=function(e,t){var i=this;return i.vA["on"+e]||-1===n.indexOf(e)||(i.vA["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),i.emit.apply(i,t)}),c.prototype.on.call(i,e,t)},l="'\"",d=(t="0124356789")+(e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ")+"#",p=(f="\r\n\t ")+">",b="[CDATA[",g="DOCTYPE",o={xml:r="http://www.w3.org/XML/1998/namespace",j2:a="http://www.w3.org/2000/xmlns/"},f=i(f),i(t),i(e),m=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,v=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,l=i(l),d=i(d),p=i(p),y=0,w.ED={Wga:y++,Xga:y++,Ob:y++,Jka:y++,mja:y++,pka:y++,RRa:y++,O2:y++,YHa:y++,tha:y++,XHa:y++,Ric:y++,J2:y++,bHa:y++,aHa:y++,G2:y++,TGa:y++,UGa:y++,ROa:y++,xja:y++,yja:y++,qOa:y++,C4:y++,SL:y++,p2:y++,eFa:y++,zga:y++,Cga:y++,fFa:y++,Dga:y++,Aga:y++,Bga:y++,nha:y++,ZGa:y++,BM:y++,ORa:y++},w.ywb={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},w.Lz={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(w.Lz).forEach(function(t){var e="number"==typeof(e=w.Lz[t])?String.fromCharCode(e):e;w.Lz[t]=e}),w.ED)w.ED[w.ED[y]]=y;function N(){var t,e=[],i=-1,n=arguments.length;if(!n)return"";for(var r="";++i<n;){if(t=Number(arguments[i]),!isFinite(t)||t<0||1114111<t||u(t)!=t)throw RangeError("Invalid code point: "+t);t<=65535?e.push(t):(t-=65536,e.push(55296+(t>>10),t=t%1024+56320)),(i+1==n||16384<e.length)&&(r+=s.apply(null,e),e.length=0)}return r}y=w.ED,String.fromCodePoint||(s=String.fromCharCode,u=Math.floor,Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:N,configurable:!0,writable:!0}):String.fromCodePoint=N)},function(t){function e(t,e){for(var i,n,r,a=[],o=t.indexOf("<p"),s=-1;(i={}).scc=o,n=t.indexOf("begin=",o)+7,r=t.indexOf("end=",o)+5,n=Math.floor(parseInt(t.substr(n,25),10)/e*1e3),s=s<(r=Math.floor(parseInt(t.substr(r,25),10)/e*1e3))?r:s,i.startTime=n,i.endTime=r,i.latestEndSoFar=s,i.R3a=t.indexOf("/p>",o)+3,o=i.R3a,a.push(i),-1!==(o=t.indexOf("<p",o)););this.a6=a,this.kI=t}e.prototype.zQb=function(){return this.a6[this.a6.length-1].endTime},e.prototype.Lv=function(e,i){return this.a6.filter(function(t){return t.startTime<=i&&t.endTime>=e}).length},e.prototype.jUb=function(e){for(var t="",i=this.a6.filter(function(t){return t.startTime<=e&&e<t.endTime||t.startTime>=e}),n=4;n+1<i.length&&i[n+1].startTime===i[4].startTime;)n++;return t=0<(i=i.slice(0,n+1)).length?this.kI.slice(i[0].scc,i[i.length-1].R3a):t},t.exports=e},function(t,e,i){var s,n,r,u;function c(t){return"string"!=typeof t?null:n[t]}function h(t){return"string"!=typeof t?null:r[t]}function f(t,e){var i=t.split(" ");return t=i[0],i=i[1],i=-1<t.indexOf("px")?(t=parseFloat(t)/e.width,parseFloat(i)/e.height):(t=.01*parseFloat(t),.01*parseFloat(i)),[t,i]}s=i(505),t.exports={oLb:function(t,e){var i,n=e.textNodes[0]||{},r=t.regions,a=t.styles,o=t.aspectRatio,r=r&&r[e.region]?r[e.region]:{},n=a&&a[n.style]?a[n.style]:{},a=f(s(e.extent,r.extent,"80% 80%"),t);return e=f(s(e.origin,r.origin,"10% 10%"),t),t=Object,i=e[0],e=e[1],a=t.create.call(t,{marginLeft:i*(o/=1280/720)+(t=(1-o)/2),marginTop:e,marginRight:(1-(i+a[0]))*o+t,marginBottom:1-(e+a[1])}),1<Object.keys(r).length?a.verticalAlignment=c(s(n.displayAlign,r.displayAlign,"before")):a.verticalAlignment=c(s(n.displayAlign,"after")),a.horizontalAlignment=h(s(n.textAlign,r.textAlign,"center")),o=r.writingMode||"lrtb",a.writingMode="string"!=typeof o?null:u[o],a.multiRowAlignment=h(s(n.multiRowAlign,r.multiRowAlign,n.textAlign,r.textAlign,"center")),a}},n={before:"top",center:"center",after:"bottom"},r={left:"left",start:"start",center:"center",right:"right",end:"end"},u={lrtb:"horizontal-tb",rltb:"horizontal-tb",tblr:"vertical-lr",tbrl:"vertical-rl"}},function(t,e,i){var y,w,n,A,_,E,k;function S(t){return"string"!=typeof t||"#"===t[0]&&7===t.length?t:"#"===t[0]&&4===t.length?"#"+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]:n[t.toLowerCase()]}function T(t){var e=(t||"").split(" "),i=/^[0-9]/.test(e),n=i?0:1;return{color:t=i?"#000000":S(e[0]),width:0<(i=parseInt(e[n]))?i:0,blur:0<(e=parseInt(e[1+n]))?e:0}}y=i(505),t.exports={sLb:function(t,e,i){var n,r,a,o,s,u,c,h,f,l,d,p,b=y(i.characterSize,e.characterSize,"MEDIUM"),g=t.fontFamily,g=y(i.characterStyle,"string"!=typeof g?null:A[g],e.characterStyle,"PROPORTIONAL_SANS_SERIF"),m=(t.fontSize||"").split(" ")[0]||"",v=-1<m.indexOf("%")?parseInt(m,10)/100:-1<m.indexOf("em")?parseFloat(m):1;return m="underline"===t.textDecoration,n="italic"===t.fontStyle,r=w[y(i.phc,e.phc,"OPAQUE")],a=w[y(i.characterOpacity,e.characterOpacity,"OPAQUE")],o=w[y(i.backgroundOpacity,t.opacity,e.backgroundOpacity,"OPAQUE")],s=S(y(i.characterColor,t.color,e.characterColor,"#ffffff")),u=S(y(i.backgroundColor,t.backgroundColor,e.backgroundColor,null)),c=S(y(i.xnb,t.xnb,e.xnb,null)),h=y(i.characterEdgeAttributes,e.characterEdgeAttributes,null),v=(v*=_[b]||1)*((f=1)/19*(f=E[b]?E[b][g]||1:f)),f=0,b=f=k[b]?k[b][g]||0:f,f="string"!=typeof(f=t.textOutline)?null:T(f).width,f=y(f,0),l="string"!=typeof(l=t.textOutline)?null:T(l).blur,l=y(l,0),d=i.characterEdgeColor,p="string"!=typeof(p=t.textOutline)?null:T(p).color,{characterUnderline:m,characterItalic:n,characterStyle:g,windowOpacity:r,characterOpacity:a,backgroundOpacity:o,characterColor:s,backgroundColor:u,windowColor:c,characterEdgeAttributes:h,characterSize:v,characterTracking:b,characterEdgeWidth:f,characterEdgeBlur:l,characterEdgeColor:S(y(d,p,e.characterEdgeColor,"#000000")),direction:y(i.direction,t.direction,e.direction,"ltr")}}},w={NONE:0,SEMI_TRANSPARENT:.5,OPAQUE:1},n={black:"#000000",silver:"#c0c0c0",gray:"#808080",white:"#ffffff",maroon:"#800000",red:"#ff0000",purple:"#800080",fuchsia:"#ff00ff",magenta:"#ff00ff",green:"#00ff00",lime:"#00ff00",olive:"#808000",yellow:"#ffff00",navy:"#000080",blue:"#0000ff",teal:"#008080",aqua:"#00ffff",cyan:"#00ffff",orange:"#ffa500",pink:"#ffc0cb",transparent:null},A={default:"PROPORTIONAL_SANS_SERIF",monospaceSansSerif:"MONOSPACED_SANS_SERIF",monospaceSerif:"MONOSPACED_SERIF",proportionalSansSerif:"PROPORTIONAL_SANS_SERIF",proportionalSerif:"PROPORTIONAL_SERIF",casual:"CASUAL",cursive:"CURSIVE",smallCapitals:"SMALL_CAPITALS",monospace:"MONOSPACED_SANS_SERIF",sansSerif:"PROPORTIONAL_SANS_SERIF",serif:"PROPORTIONAL_SERIF"},_={SMALL:.5,MEDIUM:1,"MEDIUM-LARGE":1.3,LARGE:2},E={MEDIUM:{MONOSPACED_SANS_SERIF:1.37,MONOSPACED_SERIF:1.15},SMALL:{MONOSPACED_SANS_SERIF:1.37,MONOSPACED_SERIF:1.15}},k={MEDIUM:{MONOSPACED_SANS_SERIF:2,MONOSPACED_SERIF:2},SMALL:{MONOSPACED_SANS_SERIF:1,MONOSPACED_SERIF:1}}},function(t,e,i){var n,r,u,c,h,f;function a(t){n.call(this),this.im=t.url,this.pr=t.request,this.ZH=t.Qd||0,this.Ta=t.Aa,this.sj=this.Ts=null,t.gw?this.Ts=t.gw:(this.Pb=t.offset,this.FN=t.size),this.$m,this.Hma=t}n=i(117).EventEmitter,r=i(1220),u=i(1221),c=i(1222),h=i(165),f=a.events={htb:"midxready",Dvb:"sidxready",ovb:"ready",Jf:"error"},(a.prototype=Object.create(n.prototype)).constructor=a,Object.defineProperties(a.prototype,{fr:{get(){return this.$m&&this.$m.Jqa}}}),a.prototype.start=function(){this.Ts?(this.Ta.warn("midx was prefectched and provided"),this.hVa(this.Ts)):this.Nxb(this.Pb,this.FN,this.QAb.bind(this))},a.prototype.close=function(){},a.prototype.M$=function(t,e){return this.$m&&this.$m.qua(t,e)},a.prototype.Lv=function(t,e){return(t=this.M$(t,e))?t.length:t},a.prototype.mG=function(t,e){this.Ta.debug("setStreamStartPosition: buffering subtitles at pts "+t),this.ZH=t,this.$m?this.$m.mG(t,e):e&&e()},a.prototype.CP=function(t){var e,i,n;return!this.$m||t>h.nTb(this.Ts)?[]:(this.$m&&this.$m.pra(t),e=this.fr.iz,i=this.fr.index,n=[],(i=h.rd(i)&&this.sj[i+1])&&i.entries.length||e&&!(t>e.endTime)?((n=e&&e.images.length?this.vVa(e,t,[]):n).length<2&&i&&i.images.length&&(e=this.vVa(i,t,n),n.push.apply(n,e)),this.$m.GCa(t)?null:h.M0a(n)):[])},a.prototype.Rj=function(t,e){this.$m&&this.$m.Rj(t,e)},a.prototype.lj=function(t,e){this.$m&&this.$m.lj(t,e)},a.prototype.Nxb=function(t,e,i){this.Ta.debug("downloading midx..."),this.KVa(t,e,"binary",i)},a.prototype.Oxb=function(t,e,i){this.Ta.debug("downloading sidx..."),this.KVa(t,e,void 0,i)},a.prototype.KVa=function(t,e,i,n){this.pr({url:this.im,offset:t,size:e,responseType:i},n)},a.prototype.QAb=function(t,e){if(t)this.emit(f.Jf,h.iY(t,"midxdownloaderror"));else try{this.Ts=new r(e),this.hVa(this.Ts)}catch(t){this.emit(f.Jf,h.iY(t,"midxparseerror"))}},a.prototype.hVa=function(t){var e=t.entries.reduce(function(t,e){return t+e.size},0);e?(this.emit(f.htb,t),this.Oxb(t.startOffset,e,this.TAb.bind(this,t))):this.emit(f.Jf,h.iY({},"nosidxfoundinmidx"))},a.prototype.TAb=function(i,t,n){var r,a,o,s=this;if(t)s.emit(f.Jf,h.iY(t,"sidxdownloaderror"));else{a=r=0,s.sj=[];try{o=0,i.entries.forEach(function(t){var e=new u(n,r,i.wva,s.Ta,a,a+t.duration,o);s.sj.push(e),t.ecc=e,a=e.js,r+=t.size,o++})}catch(t){return void s.emit(f.Jf,h.iY(t,"sidxparseerror"))}s.emit(f.Dvb,s.sj),this.$m=new c(s.Hma,i,s.sj),t=s.ZH,s.Hma&&s.Hma.Eea||(t=Math.max(s.ZH-1e4,0)),this.$m.pra(t,function(t){t&&s.Ta.error("initial sidx download failed"),s.emit(f.ovb)})}},a.prototype.vVa=function(t,e,i){for(var n,r,a=t.entries,o=0,s=a.length,u=[],c=this.Ts;o<s;){if((r=a[o]).displayTime<=e)r.displayTime+r.duration>=e&&u.push(h.Bqa(r,t.images[o].data,c));else{if((n=u.length&&u[u.length-1]||i.length&&i[i.length-1])&&n.displayTime>e&&n.displayTime!==r.displayTime)break;n.DJ!==r.DJ&&u.push(h.Bqa(r,t.images[o].data,c))}o++}return u},t.exports=a},function(t,e,i){var a,o;function s(t,e){this.duration=t,this.size=e,this.ecc=void 0}a=i(288),o=i(165),t.exports=function(t){var e;t=new a(t),this.identifier=t.EAa(4),o.assert("midx"===this.identifier),this.version=t.ks(4),o.assert(0===this.version),this.wva=t.jl(36),this.creationTime=t.zR(),this.ip=t.zR(),this.L=t.zR(),this.z$b=t.ci(),this.A$b=t.ci(),this.language=t.jl(16),t.jl(16),this.startOffset=t.zR(),this.lP=t.ci();for(var i=[],n=0,r=0;r<this.lP;r++)e=new s(t.ks(4),t.ci()),i.push(e),n+=e.duration;this.entries=i,this.endTime=n}},function(t,e,i){var u,c;function h(t,e,i,n,r,a,o,s){this.displayTime=t,this.duration=e,this.O4b=i,this.P4b=n,this.lcc=r,this.mcc=a,this.DJ=o,this.iva=s}function n(t,e,i,n,r,a,o){var s=0;for((t=new u(t)).position=e,this.Ta=n,this.identifier=t.EAa(4),c.assert("sidx"===this.identifier,n),this.wva=t.jl(36),c.kIb(this.wva,i,n),this.duration=t.ks(4),this.lP=t.ci(),this.Xy=r,this.js=a,this.index=o||0,this.entries=[],this.images=[],this.Zma=0;s<this.lP;)e=new h(t.ks(4),t.ks(4),t.ci(),t.ci(),t.ci(),t.ci(),t.zR(),t.ks(4)),s++,this.entries.push(e);this.entries.length&&(this.startTime=this.entries[0].displayTime,this.endTime=this.entries[this.entries.length-1].displayTime+this.entries[this.entries.length-1].duration)}u=i(288),c=i(165),n.prototype.KXb=function(){this.Zma++},n.prototype.oMb=function(){var t=0;return this.Zma--,this.Zma<1?this.images&&0<this.images.length&&(t+=c.mua([this]),this.images=[]):this.Ta.debug("Not cleaning up shared sidx with range",this.Xy,"-",this.js),t},t.exports=n},function(t,e,i){var r,n;function a(t,e){var i;if(t=t||0,e)for(var n in e.O)if(t>=((i=e.O[n]).va||0)&&(!i.wa||t<i.wa))return n}function o(t,e){return t&&e&&e.O[t]}function s(t,e,i){var n;this.Ta=t.Aa,this.sj=i,this.$D=this.qxb(t.Eea),this.Ph=[],n=i&&i[i.length-1],this.Cx=n&&(n.endTime||n.js),this.gg=new r(t,e,i),t=a(t.Qd||0,this.$D),this.Kp=this.kA(t)}r=i(1223),n=i(1225),Object.defineProperties(s.prototype,{Jqa:{get(){return this.gg.Jqa}}}),s.prototype.qua=function(t,e){return this.gg&&this.gg.qua(t,e)},s.prototype.pra=function(t,e){if(this.gg.Qac(t),this.OXa(t),!this.$D&&this.Cx&&t>this.Cx)e&&e();else if(t=this.aVa(t,this.Kp,2,e),this.$D&&0<this.Kp.Ycb.length)e&&e();else if(this.$D&&this.Kp.gQ&&t){this.Ph.length<2&&this.wxb(this.Kp),e=Math.ceil(2/(this.Ph.length-1));for(var i=0;i<this.Ph.length&&t&&i<3;i++)t=this.Ph[i],t=this.aVa(t.startTime,t,e)}},s.prototype.GCa=function(t){return!!this.gg.GCa(t)&&(this.gg.KDb(),this.pra(t),!(this.Kp.gQ=!1))},s.prototype.mG=function(t,e){var i;this.OXa(t),this.Ph.forEach(function(t){t.gQ=!1}),i=this.Kp.op&&this.Kp.op[0],this.gg.mG(t,i&&i.index),(t=this.gg.eVb(t))&&t.length?this.gg.X2a(t,e):e&&e()},s.prototype.lj=function(t,e){var i;this.Ta.debug("Set next segment to",e,"for segment",t),(t=this.mVa(t)||this.kA(t)).aib=e,i=this,t.g_=t.g_.filter(function(t){return t.id===e||(i.Dla(t),!1)})},s.prototype.Rj=function(t,e){var i=o(t,this.$D);Object.keys(i.next).forEach(function(t){i.next[t].weight=e[t]||0})},s.prototype.qxb=function(t){var e,i={};if(t=(t||{}).O)for(var n in i.O={},t)e=t[n]||{},i.O[n]={va:e.va,wa:e.wa,Rb:e.Rb,next:this.pxb(e.next)};return i},s.prototype.pxb=function(t){var e,i={};for(e in t)i[e]={weight:(t[e]||{}).weight};return i},s.prototype.OXa=function(t){var e,i;(this.$D&&this.Kp.startTime>t||this.Kp.endTime&&this.Kp.endTime<t)&&(e=this.Kp,(i=a(t,this.$D))?(this.Ta.debug("Switching segments from",this.Kp.id,"to",i,"at pts",t),this.Kp=this.mVa(i)||this.kA(i),this.Dla(e)):this.Ta.debug("The pts is outside of the current segment but not in a new one yet"))},s.prototype.kA=function(t){return this.Ta.debug("SegmentManager: creating segment",t),t=new n(t,o(t,this.$D),this.sj,this.Ta),this.Ph.push(t),this.Ta.debug("SegmentManager: segment contains",t.op.length,"sidxes"),t},s.prototype.Dla=function(e){var t;e&&e!==this.Kp&&(this.Ta.debug("SegmentManager: deleting segment",e.id),e.g_.forEach(this.Dla.bind(this)),this.Ph=this.Ph.filter(function(t){return t!==e}),t=e.$_a(),this.gg.n9b(t&&t.size||0,t&&t.op))},s.prototype.mVa=function(t){for(var e,i=0;t&&i<this.Ph.length;i++)if(t===(e=this.Ph[i]).id)return e},s.prototype.wxb=function(t){var e,i=t.aib;if(i&&""!==i)t.g_.push(this.kA(i));else for(var n in i=t.Ycb){if(!(e=i[n])||!e.weight)break;t.g_.push(this.kA(n))}},s.prototype.aVa=function(t,i,e,n){return!i||i.gQ?(this.Ta.debug("Done driving segment",i&&i.id),!0):this.gg.EGb?(this.Ta.debug("Drive streaming of segment",i.id,"from pts",t),0===(e=(t=this.gg.fVb(t,i,e))&&t.length||0)?(this.Ta.debug("Segment is fully downloaded",i&&i.id),i.gQ=!0,n&&n(),!0):(this.Ta.debug("Downloading",e,"sidxes in segment",i.id),this.gg.X2a(t,function(t,e){t&&(i.gQ=!1),n&&n(t,e)}))):(this.Ta.debug("Throttling buffering in quiet period"),!1)},t.exports=s},function(t,e,i){var r,c;function h(t,e,i){return e&&(!e.entries.length&&t>e.Xy||t>e.endTime)&&i.entries.length&&t<i.endTime}function a(t,e,i){this.bI=this.vx=0,this.hzb=t.bufferSize||4194304,this.fr=new f,this.YH,this.QH=t.Qf,this.Ta=t.Aa,this.Ts=e,this.sj=i,this.Sp=new r(t),this.lI=new s(this.sj.length,t.q3a),this.wV=new o(t.c_a)}function o(t){this.Uxb=0!==t,this.on=!1,this.Gk=t||3e3,this.uh}function s(t,e){(this.enabled=e)&&(this.op=Array.apply(null,Array(t)).map(function(){return"-"}))}function f(t,e){this.iz=t,this.index=e}r=i(1224),c=i(165),f.prototype.reset=function(){this.index=this.iz=void 0},s.prototype.ka=function(t){this.enabled&&t<this.op.length&&(this.op[t]="x")},s.prototype.$db=function(t){this.enabled&&t<this.op.length&&(this.op[t]="-")},s.prototype.toString=function(){return this.enabled&&"|"+this.op.join("")+"|"},o.prototype.start=function(){var t;this.Uxb&&((t=this).on=!0,this.uh=setTimeout(function(){t.on=!1,t.uh=void 0},this.Gk))},o.prototype.stop=function(){this.on=!1,clearTimeout(this.uh),this.uh=void 0},Object.defineProperties(a.prototype,{Jqa:{get(){return this.fr}},EGb:{get(){return!this.wV.on}}}),a.prototype.kV=function(){this.lI.enabled&&this.Ta.debug("Buffer: "+this.lI.toString())},a.prototype.lBb=function(t){this.bI+=t,this.Ta.debug("Reserved buffer size is",this.vx+this.bI,"after reserving",t)},a.prototype.ZBb=function(t){this.bI-=t,this.Ta.debug("Reserved buffer size is",this.vx+this.bI,"after unreserving",t)},a.prototype.oxb=function(t){this.vx+=t,this.Ta.debug("Buffer size is",this.vx,"after claiming",t)},a.prototype.fXa=function(t){this.vx-=t,this.Ta.debug("Buffer size is",this.vx,"after clearing",t)},a.prototype.n9b=function(t,e){var i;this.fXa(t),i=this,e&&this.lI.enabled&&(e.forEach(function(t){i.lI.$db(t.index)}),this.kV())},a.prototype.GCa=function(t){var e=this.gyb(t);return c.T8a(e)&&c.sdc(t,e)},a.prototype.Qac=function(t){var e=this.BVa(t);(!e||e.index)!==(!this.fr||this.fr.index)&&(this.YH=this.fr.iz,e?(this.QH&&this.Ta.debug("Current sidx is index",e.index),this.fr=e):(this.QH&&this.Ta.debug("Current sidx is out of range"),this.fr.reset())),this.YH&&"number"==typeof this.YH.index&&(t<this.YH.Xy-35e3||t>this.YH.js+35e3)&&(this.ula(this.YH.index),this.YH=void 0,this.kV())},a.prototype.mG=function(t,e){for(var i,n=this.sj&&this.sj.length;e<n;e++)!(i=this.sj[e])||(i.endTime||i.js)>=t-1e4&&(i.endTime||i.js)<t+3e5||this.ula(e);this.wV.stop(),this.kV()},a.prototype.KDb=function(){var t;for(this.Ta.debug("executing aggressive cleanup"),n=this.sj&&this.sj.length,t=0;t<n;t++)t===this.fr.index&&(t+=2),this.ula(t);this.wV.stop(),this.kV()},a.prototype.eVb=function(t){var e,i,n=[],r=this.BVa(t);if(!r)return this.fr.reset(),n;for(e=t+1e4,r=(this.fr=r).index,i=this.sj[r];r<this.sj.length&&e>i.Xy;i=this.sj[++r])c.T8a(i)&&c.tdc(t,e,i)&&n.push(i);return n},a.prototype.X2a=function(i,n){var r,t,e,a,o,s;if(!i||!i.length)return n&&n(null),!0;if(this.Sp.qV&&2<=Object.keys(this.Sp.qV).length&&!this.wV.on&&(this.Ta.debug("Enabling buffering quiet period"),this.wV.start()),r=this,t=i[0],e=i[i.length-1],0<t.entries.length&&(a=t.entries[0].DJ,o=t.entries[t.entries.length-1]),0<e.entries.length&&(c.rd(a)||(a=e.entries[0].DJ),o=e.entries[e.entries.length-1]),!a)return n&&n(null),!0;if(s=o.DJ+o.iva-a,t=c.rta(a,s),this.Sp.qV[t])this.Ta.debug("The request for",t,"is already pending. Not requesting again"),n&&n();else{if(!this.Cyb(c.mua(i)))return this.Ta.debug("Not enough space in buffer to download all of the imaages in the list"),n&&n(),!1;this.Ta.debug("Reserving",s,"bytes for subtitle request",i[0].Xy,i[i.length-1].js),this.lBb(s),this.Sp.MNb(i,a,s,function(t,e){r.Ta.debug("Claiming reserved space.  Expected",s,"received",e),r.lI.enabled&&(i.forEach(function(t){r.lI.ka(t.index)}),r.kV()),r.ZBb(s),r.oxb(e),n&&n(t)})}return!0},a.prototype.qua=function(t,e){var i,n=this.Ts,r=this.AVa(t,e,this.sj);if(!r||0===r.length)return[];i=[],e=function(t,e,i){var n=i.displayTime<=t&&t<=i.displayTime+i.duration;return t<=i.displayTime&&i.displayTime<=e||n}.bind(null,t,e);for(var a=0;a<r.length;a++)t=r[a],i=i.concat(t.entries.filter(e));return i=i.map(function(t){return c.Bqa(t,null,n)}),c.M0a(i)},a.prototype.fVb=function(t,e,i){return this.AVa(t,e.endTime,e.op,i,!0)},a.prototype.AVa=function(t,e,i,n,r){var a,o,s,u;if(e&&e<t||t<0)this.Ta.error("invalid range startPts: "+t+", endPts: "+e);else if(a=i&&i.length||0,o=[],i&&0!==a){if(s=i[0].duration,u=i[0].Xy,c.rd(s)&&0<s)s=Math.floor((t-u)/s);else for(this.QH&&this.Ta.warn("The duration of the first sidx is not defined or sidx","durations vary, so use brute force to get starting sidx"),s=0;s<a&&(u=i[s],!c.GNb(u,t));s++);for(;s<a&&(!n||o.length<n);){if(u=i[s],!r||!u.images.length&&u.endTime>t)o.push(u);else if(o.length)break;if(e&&e<=u.js)break;s++}return o}},a.prototype.gyb=function(t){var e,i=this.sj;if(i&&0!==i.length){if((n=i[Math.floor(t/6e4)])&&(n.Xy>t||t>n.js))t:{this.Wxb||(this.Wxb=!0,n=c.KTb(this.Ts.language),this.Ta.error("bruteforce search for ",{movieId:this.Ts.L,packageId:this.Ts.ip,lang:n}));for(var n=i.length,r=0;r<n;r++)if((e=i[r]).Xy<=t&&t<=e.js){n=e;break t}n=void 0}return n}},a.prototype.BVa=function(t){var e,i,n,r,a=this.fr,o=a.iz,s=a.index,u=this.sj;if(this.Ala(c.rd(t)),o&&(o.entries.length?(0===s&&t<=o.startTime||t>=o.startTime&&t<=o.endTime||0<s&&h(t,n=u[s-1],o))&&(e=!0,i=a):(n=u[s-1],r=u[s+1],h(t,n,o)?(e=!0,i=a):r&&r.endTime&&t<=r.endTime&&(t>=o.endTime||t>=o.js)&&(e=!0,i=new f(r,s+1)))),!e)for(a=u.length,o=0;o<a;o++)if((s=u[o]).entries.length&&t<=s.endTime){i=new f(s,o);break}return i},a.prototype.Cyb=function(t){return this.vx+this.bI+t<=this.hzb},a.prototype.ula=function(t){var e,i=this.sj[t],n=i&&i.images&&i.images.length||0;0<n&&(e=c.mua([i]),i.images=[],this.lI.$db(t),this.fXa(e),this.QH&&this.Ta.debug("cleaning up space from sidx",{index:t,start:i.startTime,size:e,images:n,nrc:this.vx}))},a.prototype.Ala=function(t){this.QH&&c.assert(t,this.Ta)},t.exports=a},function(t,e,i){var h,f;function n(t){this.im=t.url,this.pr=t.request,this.ZH=t.Qd||0,this.QH=t.Qf,this.Ta=t.Aa,this.qV={}}h=i(288),f=i(165),n.prototype.MNb=function(t,e,i,n){this.qV[f.rta(e,i)]=!0,t&&t.forEach(function(t){t.fhb=!0}),this.pr({url:this.im,offset:e,size:i},this.oAb.bind(this,t,e,i,n))},n.prototype.oAb=function(t,n,e,i,r,a){var o,s,u=this,c=f.rta(n,e);setTimeout(function(){delete u.qV[c]},1e3),r?(i&&i(r,0),t&&t.forEach(function(t){delete t.fhb})):(o=new h(a),s=0,t&&t.forEach(function(i){delete i.fhb,i.entries.forEach(function(t,e){o.position=t.DJ-n,t={data:o.jl(t.iva)},i.images[e]=t,f.Ggc(i.images[e].data,u.Ala.bind(u)),s+=i.images[e].data.length})}),i&&i(null,s))},n.prototype.Ala=function(t){this.QH&&f.assert(t,this.Ta)},t.exports=n},function(t){function e(t,e,i,n){this.Ta=n,this.id=t,this.startTime=e&&e.va||0,this.endTime=e&&e.wa,this.Ycb=e&&e.next||[],this.aib,this.g_=[],this.gQ=!1,t=this.startTime,e=this.endTime;for(var r=[],a=0;a<i.length;a++)(n=i[a])&&(!e||e>n.Xy)&&t<n.js&&(n.KXb(),r.push(n));this.op=r}e.prototype.$_a=function(){this.Ta.debug("Cleaning up segment",this.id);for(var t,e,i=0,n=[],r=0;r<this.op.length;r++)(e=(t=this.op[r]).oMb())&&n.push(t),t&&(i+=e);return this.op=[],{size:i,op:n}},t.exports=e},function(t,e,i){var s;function a(t,e,i){return{timeout:i,type:t,entry:e}}s=i(117).EventEmitter,i(1227)({}),((e=function t(e,i,n,r,a,o){if(!(this instanceof t))return new t(e,i,n,r,a,o);s.call(this),this.yx=e,this.syb=i,this.d6=n,this.Uyb=r,this.BA={},this.gI={},this.Ta=a||console,this.GU=!1,this.WAb=o&&o.uAa||0}).prototype=Object.create(s.prototype)).stop=function(){clearTimeout(this.uh),this.q9b()},e.prototype.q9b=function(){var e=this;Object.keys(e.BA).forEach(function(t){e.emit("removesubtitle",e.BA[t])}),e.BA={},e.gI={}},e.prototype.pause=function(){this.GU||clearTimeout(this.uh)},e.prototype.Ow=function(t,e){var i=this,n=i.yx();clearTimeout(this.uh),null!==(t=i.syb(n))&&i.GU&&(i.GU=!1,this.Ta.info("bufferingComplete"),i.emit("bufferingComplete"),this.Uyb())?this.Ta.info("bufferingComplete while paused, no longer scheduling internal pts events"):(e="number"==typeof e?e:0,Object.keys(i.BA).forEach(function(t){(t=i.BA[t]).displayTime-i.WAb<=n&&n<t.displayTime+t.duration||(delete i.BA[t.id],i.emit("removesubtitle",t))}),Object.keys(i.gI).forEach(function(t){t=i.gI[t],n>=t.displayTime+t.duration&&delete i.gI[t.id]}),null!==t&&0<t.length?(e=t.length,i.Ta.info("found "+e+" entries for pts "+n),t.forEach(function(t){+t.displayTime<=n&&n<t.displayTime+t.duration&&!i.BA[t.id]&&(i.emit("showsubtitle",t),i.BA[t.id]=t,delete i.gI[t.id])}),e=t[t.length-1],i.BA[e.id]||i.gI[e.id]||(i.emit("stagesubtitle",e),i.gI[e.id]=e),0<(e=i.Azb(n,t)).length?i.E6(e[0].timeout):i.E6(2e4)):null===t?(t=250*Math.pow(2,e),i.Ta.warn("checking buffer again in "+(t=2e3<t?2e3:t)+"ms"),i.GU||(i.GU=!0,i.emit("underflow")),i.E6(t,e+1)):i.E6(2e4))},e.prototype.E6=function(t,e){var i=this;i.Ta.info("Scheduling pts check."),i.uh=setTimeout(function(){i.Ow(i.yx(),e)},t)},e.prototype.Azb=function(t,e){return e.reduce(this.Bzb.bind(this,t),[])},e.prototype.Bzb=function(t,e,i){var n,r=this.d6(i.displayTime,t);return t=this.d6(i.displayTime+i.duration,t),n=0<e.length?e[0].timeout:1/0,0<r&&r<n?[a("showsubtitle",i,r)]:r===n?e.concat([a("showsubtitle",i,r)]):0<t&&t<n?[a("removesubtitle",i,t)]:t===n?e.concat([a("removesubtitle",i,t)]):e},t.exports=e},function(t){t.exports=function(e){var i,r,n,a;function o(t,e,i){throw new TypeError((void 0!==i.key?"Types: expected "+i.key:"Types: expected argument "+i.index)+" to be '"+t+"' but found '"+e+"'")}function s(t,e,i){var n=r[t];void 0!==n?n(e)||o(t,e,i):t!==typeof e&&o(t,e,i)}function t(t,e){var i=t.filter(function(t){return"object"!=typeof t&&-1===n.indexOf(t)});if(0<(i=i.concat(t.filter(function(t){return"object"==typeof t}).reduce(function(t,e){return t.concat(Object.keys(e).map(function(t){return e[t]}).filter(function(t){return-1===n.indexOf(t)}))},[]))).length)throw Error(i.join(",")+" are invalid types");return function(){var n=Array.prototype.slice.call(arguments);if(n.length!==t.length)throw new TypeError("Types: unexpected number of arguments");return t.forEach(function(e,t){var i=n[t];if("string"==typeof e)s(e,i,{index:t});else{if("object"!=typeof e)throw Error("Types: unexpected type in type array");Object.keys(e).forEach(function(t){s(e[t],i[t],{key:t})})}}),e.apply(this,n)}}if(i="number boolean string object function symbol".split(" "),r={array:function(t){return Array.isArray(t)}},void 0!==e){if("object"!=typeof e||(a=e,!Object.keys(a).every(function(t){return"function"==typeof a[t]})))throw new TypeError("Types: extensions must be an object of type definitions");Object.keys(e).forEach(function(t){if(void 0!==r[t]||-1<i.indexOf(t))throw new TypeError("Types: attempting to override a built in type with "+t);r[t]=e[t]})}return n=Object.keys(r).concat(i),t(["array","function"],t)}},function(t,e,i){var n,r,a;_esm(e),e.NF=void 0,t=i(1),n=i(506),r=i(1229),a=i(164),e.NF=new t.Ad(function(t){t(n.fja).to(r.SNa).la(),t(a.cU).E1(function(t){return function(){return t.zb.get(n.fja).D2b}})})},function(t,e,i){var n;function r(){var e=this;this.ready=!1,this.D2b=new Promise(function(t){e.n$b=t})}_esm(e),e.SNa=void 0,t=i(0),i=i(1),r.prototype.E2b=function(t){this.ready||(this.n$b(t),this.ready=!0)},r.prototype.isReady=function(){return this.ready},n=r,n=t.__decorate([i.$()],n),e.SNa=n},function(t,e,i){var n,r,a,o,s;_esm(e),e.Wk=void 0,t=i(1),n=i(92),r=i(507),a=i(1231),o=i(509),s=i(1232),e.Wk=new t.Ad(function(t){t(n.Kz).Ue(function(){return function(){return bt._cad_global.device}}),t(o.sIa).to(s.rIa).la(),t(r.pIa).to(a.oIa).la()})},function(t,e,i){var n,r,a,o,s,u;function c(t,e){this.Da=t,this.BAa=e}_esm(e),e.oIa=void 0,t=i(0),n=i(29),r=i(5),a=i(146),o=i(508),s=i(55),i=i(1),c.prototype.ORb=function(){for(var t="",e=this.Da.Ef.ka(r.pa),i=6;i--;)t="0123456789ACDEFGHJKLMNPQRTUVWXYZ"[e%32]+t,e=Math.floor(e/32);for(;t.length<30;)t+="0123456789ACDEFGHJKLMNPQRTUVWXYZ"[this.BAa.bgb(new o.kka(0,31,s.Cdb))];return t},u=c,u=t.__decorate([i.$(),t.__param(0,i.l(n.Lh)),t.__param(1,i.l(a.U4))],u),e.oIa=u},function(t,e,i){var l,n,d,r,a,o,s,u;function c(t,e,i,n,r){this.hNb=t,this.Iq=e,this.Eb=n,this.I5b=r,this.bJa=/^(SDK-|SLW32-|SLW64-|SLMAC-|WWW-BROWSE-|.{10})([A-Z0-9-=]{4,})$/,this.log=i.jb("Device")}_esm(e),e.rIa=void 0,t=i(0),l=i(4),n=i(27),d=i(1233),r=i(7),a=i(507),o=i(1),s=i(96),i=i(510),c.prototype.c4a=function(t){try{return t.match(this.bJa)[2]}catch(t){}},c.prototype.YPb=function(t){try{return t.match(this.bJa)[1]}catch(t){}},c.prototype.create=function(h){var f=this;return new Promise(function(u,c){f.Iq.create().then(function(r){var a,e,o,i,n,t;function s(t){f.Eb.wo(t)&&f.Eb.wo(a)?(e=new d.qIa(t,a,void 0,o,h.gX||"cadmium"),u(e)):c({Ba:l.Y.UHa})}a=h.jq,h.pta?(o="bind_device",f.I5b.Pf(f.log,{}).then(function(t){s(t.esn)}).catch(function(t){c(t)})):h.yP?(n=h.Fl,f.Eb.wo(n)?(t=f.YPb(n))!=h.jq&&f.log.error("esn prefix from ui is different",{ui:t,cad:h.jq,ua:h.userAgent}):h.Zwa&&f.log.error("esn from ui is missing"),!h.LS&&f.Eb.wo(n)?(o="config",s(n)):r.load(h.A2a).then(function(t){i=t.value,f.Eb.wo(i)&&(o=f.Eb.wo(n)?(t=f.c4a(n))===i?"storage_matched_esn_in_config":"storage_did_not_match_esn_in_config":"storage_esn_not_in_config",s(a+i))}).catch(function(t){var e;function i(){r.save(h.A2a,e,!1).then(function(){s(a+e)}).catch(function(t){c(t)})}function n(){e=f.hNb.ORb(),i()}t.Ba===l.Y.FD?f.Eb.wo(h.Fl)?(e=f.c4a(h.Fl),f.Eb.wo(e)?(o="config_since_not_in_storage",i()):(o="generated_since_invalid_in_config_and_not_in_storage",f.log.error("invalid esn passed from UI",h.Fl),n())):(o="generated_since_not_in_config_and_storage",n()):c(t)})):s()}).catch(function(t){c(t)})})},u=c,u=t.__decorate([o.$(),t.__param(0,o.l(a.pIa)),t.__param(1,o.l(s.hD)),t.__param(2,o.l(r.ob)),t.__param(3,o.l(n.Tg)),t.__param(4,o.l(i.cPa))],u),e.rIa=u},function(t,e){_esm(e),e.qIa=void 0,e.qIa=function(t,e,i,n){this.Fl=t,this.jq=e,this.s9=n}},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,d,p,b,g,m,v,y,w,A,_,E,k,S,T,I;_esm(e),e.Iab=void 0,t=i(1),n=i(164),r=i(1235),a=i(1236),o=i(1237),s=i(1238),u=i(1239),c=i(13),h=i(1240),f=i(1241),l=i(1242),d=i(46),p=i(92),b=i(515),g=i(512),m=i(511),v=i(85),y=i(289),w=i(50),A=i(197),_=i(1243),E=i(517),k=i(518),S=i(1246),T=i(519),I=i(1247),e.Iab=new t.Ad(function(t){t(w.jo).to(a.oMa).la(),t(g.LNa).to(o.KNa).la(),t(m.DMa).to(s.CMa).la(),t(y.zMa).to(u.yMa).la(),t(w.Gia).to(h.nMa).la(),t(v.Sz).to(f.vMa).la(),t(y.xMa).to(l.wMa).la(),t(A.RT).to(_.QT).la(),t(A.Jia).to(S.AMa).la(),t(T.UT).to(I.TT).la(),t(E.zIa).to(k.yIa).la(),t(b.KFa).to(r.JFa).la(),t(w.pMa).E1(function(o){return function(){return o.zb.get(n.cU)().then(function(a){return new Promise(function(e){var i,n,r;i=o.zb.get(d.Wj),n=o.zb.get(c.Oc),r=o.zb.get(p.Kz),i.Xl(function t(){n()&&r()&&a.c_?e(o.zb.get(w.jo)):i.Xl(t)})})})}})})},function(t,e,i){var a,n,r,o,s,u,c;function h(t,e,i,n){var r=this;this.n0b=t,this.WB=e,this.config=n,this.MAa=[],this.n0b.aea(a.Rnb,this.aWb.bind(this)),i().then(function(t){var e=n().Ir.lRb;r.f1b=e?c.Ck[e.toUpperCase()]:c.Ck.Jf,r.xg=t,r.yac()})}_esm(e),e.JFa=void 0,t=i(0),n=i(1),r=i(13),o=i(115),s=i(50),u=i(85),c=i(7),h.prototype.aWb=function(t,e){this.xg?this.Yfb(t,e):this.MAa.push([t,e])},h.prototype.yac=function(){var e=this,t=this.MAa;this.MAa=[],t.forEach(function(t){e.Yfb(t[0],t[1])})},h.prototype.Yfb=function(t,e){var i;this.xg&&this.Obc(t)&&(i={debugMessage:t.message,debugCategory:t.aq},t.Zc.forEach(function(t){return i=Object.assign(Object.assign({},i),t.value)}),i=Object.assign(Object.assign({},i),{prefix:"debug"}),t=this.WB.nv("debug",c.Ck[t.level].toLowerCase(),i,e),this.xg.Jc(t))},h.prototype.Obc=function(t){var e=this.f1b;return void 0!==e&&t.level<=e&&!t.Zc.find(function(t){return t.CX(c.yT)})},(i=a=h).Rnb="adaptorAll",i=a=t.__decorate([n.$(),t.__param(0,n.l(o.lM)),t.__param(1,n.l(u.Sz)),t.__param(2,n.l(s.pMa)),t.__param(3,n.l(r.Oc))],i),e.JFa=i},function(t,e,i){var n,o,r,a,s,u,c,h,f,l,d;function p(t,e,i,n,r,a){this.config=t,this.json=e,this.zc=i,this.d0b=n,this.UZ=a,this.Vaa=this.Vv=!1,this.listeners=[],o.yq(this,"json"),this.Aa=r.jb("LogBatcher")}_esm(e),e.oMa=void 0,t=i(0),n=i(1),o=i(55),r=i(38),a=i(511),s=i(46),u=i(7),c=i(50),h=i(512),f=i(4),l=i(113),i(137),d=i(278),p.prototype.xa=function(){this.Vv=!0},p.prototype.Jc=function(e){var t=this;this.Xbc(e)||(0<e.size.lm(this.config.a1b)?this.Aa.error("Logblob is too large, dropping from the queue",{logblobType:e.type,logblobSize:e.size.toString()}):(this.listeners.forEach(function(t){return t.K1b(e)}),this.UZ.Mna(e),this.zc.Xl(function(){t.UQb()})))},p.prototype.flush=function(i){var n=this;return i=void 0!==i&&i,this.Vaa?(this.Aa.trace("LogBatcher is in error state, ignoring flush"),Promise.reject()):new Promise(function(t,e){n.Aa.trace("Flushing",u.yT),n.pu(),n.zc.Xl(function(){n.dCa(i).then(function(){t()}).catch(function(t){e(t)})})})},p.prototype.addListener=function(t){this.listeners.push(t)},p.prototype.removeListener=function(t){0<=(t=this.listeners.indexOf(t))&&this.listeners.splice(t,1)},p.prototype.dCa=function(t){var e,i=this;if(t=void 0!==t&&t,!this.Vv)return this.Aa.trace("LogBatcher is not initialized"),Promise.resolve();if(this.Vaa)return this.Aa.trace("LogBatcher is in error state, ignoring sendLogMessages"),Promise.resolve();if(0===(e=this.UZ.qSb()).length&&!t)return this.Aa.trace("No logblobs to send"),Promise.resolve();this.pu(),this.listeners.forEach(function(){}),t=Promise.resolve();for(var n={},r=rt(e),a=r.next();!a.done;n={rga:n.rga},a=r.next())n.rga=a.value,t=t.then(function(t){return function(){return i.vac(t.rga)}}(n));return t.then(function(){return i.aJ()}).catch(function(t){throw e.filter(function(t){return!t.It}).forEach(function(t){return t.Av()}),i.aJ(),Error("Send failure. "+t)})},p.prototype.vac=function(e){var i=this;return this.Aa.trace("Sending batch: "+e.size,u.yT),Promise.resolve(this.UZ.r9b(e)).then(function(){return i.d0b.send(e.bK)}).then(function(){return e.rS()}).catch(function(t){throw i.Aa.warn("Failed to send batch of logblobs.",t,u.yT),e.Av(),i.Lbc(t)&&i.UZ.NCb(e),i.Ybc(t)&&(i.Vaa=!0),t})},p.prototype.Lbc=function(t){return t.Xd!==f.g4.XOa&&this.config.Hna},p.prototype.Ybc=function(t){return t.Kc===f.Y.TJa||t.Kc===f.Y.GT||t.Kc===f.Y.KT},p.prototype.UQb=function(){var e=this;0<this.UZ.size.lm(this.config.Abb)?this.dCa().catch(function(t){return e.Aa.warn("Failed to send log messages on size threshold. "+t)}):this.aJ()},p.prototype.pu=function(){this.hba&&(this.hba.cancel(),this.hba=void 0)},p.prototype.aJ=function(){this.hba||(this.hba=this.zc.Mj(this.config.wac,this.dR.bind(this)))},p.prototype.dR=function(){var e=this;this.Vaa=!1,this.pu(),this.dCa().catch(function(t){return e.Aa.warn("Failed to send log messages on timer. "+t)})},p.prototype.stringify=function(t){var e="";try{e=this.json.stringify(t.data,void 0,"  ")}catch(t){}return e},p.prototype.Xbc=function(t){return 0<=this.config.hjb.indexOf(t.type)||t.type===d.bd.debug&&0<=this.config.gjb.indexOf(t.data.debugCategory)},i=p,i=t.__decorate([n.$(),t.__param(0,n.l(c.Gia)),t.__param(1,n.l(r.YG)),t.__param(2,n.l(s.Wj)),t.__param(3,n.l(a.DMa)),t.__param(4,n.l(u.ob)),t.__param(5,n.l(h.LNa)),t.__param(6,n.l(l.b3))],i),e.oMa=i},function(t,e,i){var n,r,a,o,s,u,c;function h(t){this.FN=a.Ka,this.yma=[],this.cV=this.g6=!1,t&&(this.FN=t.size,this.yma=t.bK)}function f(t,e,i,n){this.L1b=t,this.config=e,this.$f=i,this.json=n,r.yq(this,"json"),this.Aa=this.$f.jb("MessageQueue"),this.gv=[]}_esm(e),e.KNa=void 0,t=i(0),n=i(1),r=i(55),a=i(52),o=i(289),s=i(7),u=i(38),i=i(50),f.prototype.Mna=function(t){var e,i;0===this.gv.length&&this.gv.push(this.tta()),(t=this.WUb(t))&&(e=this.L1b.measure([t]),0<(i=this.gv[this.gv.length-1]).size.add(e).lm(this.config.Abb)&&(i=this.tta(),this.gv.push(i)),i.Mna(t))},f.prototype.qSb=function(){var t=this.gv.filter(function(t){return t.KGb});return this.gv.push(this.tta()),t.forEach(function(t){return t.P0b()}),t},f.prototype.NCb=function(t){t.It||this.gv.unshift(new h(t))},f.prototype.r9b=function(t){0<=(t=this.gv.indexOf(t))&&this.gv.splice(t,1)},f.prototype.WUb=function(e){try{return{data:this.json.parse(this.json.stringify(e.data)),severity:e.severity,size:e.size,timestamp:e.timestamp,type:e.type}}catch(t){var i,n={};(i=(e=e.data).debugMessage)&&"string"==typeof i&&(n.originalDebugMessage=i),(e=e.debugCategory)&&"string"==typeof e&&(n.originalDebugCategory=e),this.Aa.error("JSON.stringify error: "+t.message,n)}},f.prototype.tta=function(){return new h},nt.Object.defineProperties(f.prototype,{size:{configurable:!0,enumerable:!0,get(){return this.gv.reduce(function(t,e){return t.add(e.size)},a.Ka)}}}),c=f,c=t.__decorate([n.$(),t.__param(0,n.l(o.zMa)),t.__param(1,n.l(i.Gia)),t.__param(2,n.l(s.ob)),t.__param(3,n.l(u.YG))],c),e.KNa=c,h.prototype.rS=function(){this.g6=!1,this.cV=!0},h.prototype.Av=function(){this.g6=!1},h.prototype.Mna=function(t){this.yma.push(t),this.FN=this.FN.add(t.size)},h.prototype.P0b=function(){this.g6=!0},nt.Object.defineProperties(h.prototype,{size:{configurable:!0,enumerable:!0,get(){return this.FN}},bK:{configurable:!0,enumerable:!0,get(){return this.yma}},KGb:{configurable:!0,enumerable:!0,get(){return 0<this.bK.length&&!1===this.g6}},It:{configurable:!0,enumerable:!0,get(){return this.cV}}})},function(t,e,i){var n,u,r,a,o,s,c,h,f,l,d;function p(t,e,i,n,r,a,o,s){this.Ga=t,this.platform=i,this.Wk=n,this.json=r,this.Ii=a,this.Bi=o,this.l0b=s,u.yq(this,"json"),this.Aa=e.jb("LogblobSender")}function b(){this.entries=[]}_esm(e),e.CMa=void 0,t=i(0),n=i(1),u=i(55),r=i(38),a=i(5),o=i(30),s=i(18),c=i(47),h=i(92),f=i(7),l=i(513),i=i(82),p.prototype.send=function(n){var r=this;return new Promise(function(t,e){var i;try{i=n.reduce(function(t,e){return t.entries.push(r.$Kb(e)),t},new b),t(r.RRb(i))}catch(t){r.Aa.error(t.message),e(t)}}).then(function(t){return r.fCa(t)})},p.prototype.$Kb=function(t){return this.Ii.gK(this.Ii.gK({},t.data),{esn:this.Wk().Fl,sev:t.severity,type:t.type,lver:this.platform.dxa,jssid:this.Ga.id,devmod:this.platform.JE,jsoffms:t.timestamp.Ea(this.Ga.UB).ka(a.pa),clienttime:t.timestamp.ka(a.pa),client_utc:t.timestamp.ka(a.Gp),uiver:this.Bi.oz})},p.prototype.RRb=function(e){var n=this;try{return this.json.stringify(e)}catch(t){for(var i={},r=0;r<e.entries.length;i={$S:i.$S,Tw:i.Tw},++r){i.Tw=Object.assign({},e.entries[r]);try{this.json.stringify(i.Tw)}catch(t){i.$S=void 0,this.Ii.SE(i.Tw,function(i){return function(e,t){try{n.json.stringify(t)}catch(t){i.$S=t.message,i.Tw[e]=i.$S}}}(i)),i.Tw.stringifyException=i.$S,i.Tw.originalType=i.Tw.type,i.Tw.type="debug",i.Tw.sev="error"}}return this.json.stringify(e)}},p.prototype.fCa=function(t){var e=this;return this.l0b.Pf(this.Aa,{logblobs:t}).then(function(){}).catch(function(t){return e.Aa.error("PBO logblob failed",t),Promise.reject(t)})},d=p,d=t.__decorate([n.$(),t.__param(0,n.l(s.$c)),t.__param(1,n.l(f.ob)),t.__param(2,n.l(c.Yq)),t.__param(3,n.l(h.Kz)),t.__param(4,n.l(r.YG)),t.__param(5,n.l(o.ki)),t.__param(6,n.l(i.Zz)),t.__param(7,n.l(l.uPa))],d),e.CMa=d},function(t,e,i){var n,r,a;function o(t){this.config=t}_esm(e),e.yMa=void 0,t=i(0),n=i(1),r=i(289),a=i(52),o.prototype.measure=function(t){var e=this;return t.map(function(t){return t.size.add(e.config.g0b())}).reduce(function(t,e){return t.add(e)},a.fa(0))},i=o,i=t.__decorate([n.$(),t.__param(0,n.l(r.xMa))],i),e.yMa=i},function(t,e,i){var n,r,a,o,s,u,c;function h(t,e){return(t=u.uf.call(this,t,"LogBatcherConfigImpl")||this).config=e,t.a1b=n.fa(5e5),t.wac=r.pca(1),t.Abb=n.fa(1e6),t}_esm(e),e.nMa=void 0,t=i(0),n=i(52),r=i(5),a=i(1),o=i(13),s=i(44),u=i(45),i=i(33),S(h,u.uf),nt.Object.defineProperties(h.prototype,{Hna:{configurable:!0,enumerable:!0,get(){return this.config().Hna}},hjb:{configurable:!0,enumerable:!0,get(){return[]}},gjb:{configurable:!0,enumerable:!0,get(){return["MslTransport","Pbo","LogblobSender"]}}}),c=h,t.__decorate([s.config(s.object(),"shedLogblobTypes")],c.prototype,"hjb",null),t.__decorate([s.config(s.NA("string"),"shedDebugTypes")],c.prototype,"gjb",null),c=t.__decorate([a.$(),t.__param(0,a.l(i.Sm)),t.__param(1,a.l(o.Oc))],c),e.nMa=c},function(t,e,i){var n,r,a,h,o,s,u,c,f;function l(t,e,i,n,r,a,o,s,u,c){this.platform=e,this.Fqa=i,this.type=n,this.severity=r,this.timestamp=a,this.Ga=s,this.data=o,this.data.type=n,this.data.sev=r,this.data.devmod=this.platform.JE,this.data.clver=this.platform.version,t&&t.pe&&(t.pe.os&&(this.data.osplatform=t.pe.os.name,this.data.osver=t.pe.os.version),this.data.browsername=t.pe.name,this.data.browserver=t.pe.version),t.lwa&&(this.data.tester=!0),t.zJ&&!this.data.groupname&&(this.data.groupname=t.zJ),t.uO&&(this.data.groupname=this.data.groupname?this.data.groupname+"|"+t.uO:t.uO),t.K1&&(this.data.uigroupname=t.K1),this.data.uigroupname&&(this.data.groupname=this.data.groupname?this.data.groupname+("|"+this.data.uigroupname):this.data.uigroupname),this.data.appLogSeqNum=this.Ga.TTb(),this.data.uniqueLogId=u.n5a(),this.data.appId=this.Ga.id,c&&(t=this.Ga.Tb(),this.data.soffms=t.Ea(c.Jj).ka(h.pa),this.data.mid=this.data.mid||c.L,this.data.lvpi=c.cxa,this.data.uiLabel=c.he,this.data.uxLabels=c.$fa,this.data[n="startup"===n?"playbackxid":"xid"]="xid"===n&&this.data.xid||c.ga,c.eL&&(n=c.eL,(c=c.eL.split("."))&&1<c.length&&"S"!==c[0][0]&&(n="SABTest"+c[0]+".Cell"+c[1]),this.data.groupname=this.data.groupname?this.data.groupname+"|"+n:n))}function d(t,e,i,n,r,a){this.Da=t,this.Fqa=e,this.config=i,this.Ga=n,this.Dgc=r,this.platform=a}_esm(e),e.vMa=void 0,t=i(0),n=i(52),r=i(1),a=i(29),h=i(5),o=i(352),s=i(39),u=i(18),c=i(514),i=i(47),d.prototype.nv=function(t,e,i,n){return new l(this.config,this.platform,this.Fqa,t,e,this.Da.Ef,i,this.Ga,this.Dgc,n)},f=d,f=t.__decorate([r.$(),t.__param(0,r.l(a.Lh)),t.__param(1,r.l(o.PHa)),t.__param(2,r.l(s.Bp)),t.__param(3,r.l(u.$c)),t.__param(4,r.l(c.PTa)),t.__param(5,r.l(i.Yq))],f),e.vMa=f,nt.Object.defineProperties(l.prototype,{size:{configurable:!0,enumerable:!0,get(){return this.p_a||(this.p_a=n.fa(this.Fqa.encode(this.data).length)),this.p_a}}})},function(t,e,i){var n,r,a;function o(t){this.Wk=t}_esm(e),e.wMa=void 0,t=i(0),n=i(1),r=i(52),i=i(92),o.prototype.g0b=function(){var t=this.Wk()?this.Wk().Fl.length:40;return r.fa(t+33)},a=o,a=t.__decorate([n.$(),t.__param(0,n.l(i.Kz))],a),e.wMa=a},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,d,p,b,g,m,v,y,w,A,_,E;function k(t,e,i,n,r,a,o,s,u,c,h,f,l,d,p,b,g,m,v){this.Tkb=t,this.xg=e,this.Pxa=i,this.esa=n,this.Le=r,this.d9=a,this.pf=o,this.config=s,this.zd=u,this.Da=c,this.Ga=h,this.platform=f,this.$r=l,this.WB=d,this.Kj=p,this.Hv=b,this.dK=g,this.Dc=m,this.HQ=v}_esm(e),e.QT=void 0,t=i(0),n=i(479),r=i(50),a=i(30),o=i(487),s=i(283),u=i(1),c=i(197),h=i(516),f=i(517),l=i(71),d=i(13),p=i(29),b=i(18),g=i(47),m=i(85),v=i(119),y=i(166),w=i(38),A=i(39),_=i(290),i=i(98),k.prototype.create=function(t,e){return new h.ST(t,e,this.Tkb,this.xg,this.Pxa,this.esa,this.Le,this.d9,this.pf,this.config,this.zd,this.Da,this.Ga,this.$r,this.WB,this.Kj,this.Hv,this.dK,this.Dc,this.HQ)},E=k,E=t.__decorate([u.$(),t.__param(0,u.l(n.hTa)),t.__param(1,u.l(r.jo)),t.__param(2,u.l(o.lNa)),t.__param(3,u.l(s.Tha)),t.__param(4,u.l(a.ki)),t.__param(5,u.l(f.zIa)),t.__param(6,u.l(l.ax)),t.__param(7,u.l(d.Oc)),t.__param(8,u.l(v.yH)),t.__param(9,u.l(p.Lh)),t.__param(10,u.l(b.$c)),t.__param(11,u.l(g.Yq)),t.__param(12,u.l(w.J4)),t.__param(13,u.l(m.Sz)),t.__param(14,u.l(y.nH)),t.__param(15,u.l(A.Bp)),t.__param(16,u.l(_.cja)),t.__param(17,u.l(c.Jia)),t.__param(18,u.l(i.Vz))],E),e.QT=E},function(t,e,i){var n;_esm(e),e.xIa=void 0,n=i(52),e.xIa=function(t,e){this.ONb=t,this.size=e.$va()?n.Ka:e}},function(t,e){_esm(e),e.Dxa=void 0,e.Dxa=function(t,e){var i,n;if(0!==t.length){if(1===t.length)return t[0];for(var r=t[0],a=e(r),o=1;o<t.length;o++)a<(n=e(i=t[o]))&&(r=i,a=n);return r}}},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,d;function p(t,e,i,n){this.platform=t,this.config=e,this.Ga=i,this.userAgentData=n,this.ZTa=/-?l(\d\d)/i}_esm(e),e.AMa=void 0,t=i(0),n=i(1),r=i(18),a=i(4),o=i(47),s=i(5),u=i(13),c=i(25),h=i(14),f=i(199),l=i(224),d=i(49),p.prototype.Sr=function(t,e,i){i&&(t.adlid=i.Wb,t.abitrate=i.bitrate),e&&(t.vdlid=e.Wb,t.vbitrate=e.bitrate)},p.prototype.$8a=function(t,e,i){i?t=Object.assign(t,f.l7a(this.platform.At,i)):t.errorcode=a.Z.mo,t.errorcode===this.platform.At+a.Z.JOa&&(t.lastSyncWithVideoElement=this.getTime()-e.q1)},p.prototype.e9a=function(t,e){var i;Object.assign(t,f.eua());try{i=e.getBoundingClientRect(),t.rendersize=i.width+"x"+i.height,t.renderpos=i.left+"x"+i.top}catch(t){}},p.prototype.d9a=function(t,e){var i=e.xc[d.u.J].value,n=e.xc[d.u.P].value,r=e.Rf.value;e=e.Ie.value,i&&(t.cdnid=i.id,t.cdnname=i.name),n&&(t.acdnid=n.id,t.acdnname=n.name),null!=r&&r.stream&&(t.adlid=r.stream.Wb,t.abitrate=r.stream.bitrate),null!=e&&e.stream&&(t.vdlid=e.stream.Wb,t.vbitrate=e.stream.bitrate,t.vheight=e.stream.height,t.vwidth=e.stream.width)},p.prototype.b9a=function(t,e,i){0<=e.mediaTime.value&&(e=i&&!e.kb.$h?e.E8:e.mediaTime.value,t.moff=c.wn(e),t.moffms=c.rg(e))},p.prototype.uaa=function(t,e){e.Xf&&(t.pbcid=e.Xf),e.Og&&(t.playbackcontextid=e.Og)},p.prototype.pva=function(t){var e,i;t.browserua=h.hH,t.browseruad=null==(i=null==(e=h.Ye.userAgentData)?void 0:e.brands)?void 0:i.map(function(t){return[t.brand,t.version]}),t.browseruadpv=this.userAgentData.platformVersion,t.browserhref=location.href,(e=h.Ye&&h.Ye.connection&&h.Ye.connection.type)&&(t.nettype=e)},p.prototype.$P=function(t){var e,i;this.config().VOb&&(i=null==(e=null===h.Ye||void 0===h.Ye?void 0:h.Ye.connection)?void 0:e.effectiveType,e=null===h.Ye||void 0===h.Ye?void 0:h.Ye.deviceMemory,i&&(t.effectiveType=i),e&&(t.deviceMemory=e)),(i=null==(e=null===h.Ye||void 0===h.Ye?void 0:h.Ye.connection)?void 0:e.type)&&(t.connectionType=i),"number"==typeof(e=null==(i=null===h.Ye||void 0===h.Ye?void 0:h.Ye.connection)?void 0:i.downlink)&&isFinite(e)&&(t.downlink=e),"number"==typeof(i=null==(e=null===h.Ye||void 0===h.Ye?void 0:h.Ye.connection)?void 0:e.rtt)&&isFinite(i)&&(t.rtt=i)},p.prototype.vaa=function(t,e){(e=e.kb.Wn)&&(e.isUIAutoPlay&&(t.isUIAutoPlay=!0),e.clLogId&&(t.cl_log_id=e.clLogId))},p.prototype.aQ=function(t,e,i,n){var r,a,o,s=this;(i=i&&i.streams)&&(r=new Set,a=new Set,o=new Set,i.forEach(function(t){t=t.mf,r.add(t),a.add(t.replace(s.ZTa,"")),(t=t.match(s.ZTa))&&0<t.length&&o.add(t[1])}),t.videoProfiles=[].concat(J(r)),t.videoProfile=0===a.size?"none":[].concat(J(a))[0],t.videoProfileLevels=[].concat(J(o)),i&&i.length&&(t.isMcClearen=!!i[0].Qj.find(function(t){return 0<=t.toLowerCase().indexOf("mcclearen")}))),e&&null!=(i=n.ja)&&i.Y1&&(t.videoProfilesStatus=this.ibb(n.ja.Y1))},p.prototype.ibb=function(t){return this.M0b(t.MP(),function(t){return!!t.supported||t.reason})},p.prototype.M0b=function(t,n){return Object.entries(t).reduce(function(t,e){var i=rt(e);return e=i.next().value,i=i.next().value,t[e]=n(i),t},{})},p.prototype.W8a=function(t,e,i){var n;(e=e&&e.streams)&&(n={},e.forEach(function(t){n[t.mf]=void 0}),t.audioProfiles=Object.keys(n)),null!=(e=i.ja)&&e.jW&&(t.audioProfilesStatus=this.ibb(i.ja.jW))},p.prototype.Z8a=function(t){t.configversion=this.config().version,this.config().endpoint||(t.configendpoint="error")},p.prototype.getTime=function(){return this.Ga.Tb().ka(s.pa)},i=p,i=t.__decorate([n.$(),t.__param(0,n.l(o.Yq)),t.__param(1,n.l(u.Oc)),t.__param(2,n.l(r.$c)),t.__param(3,n.l(l.Rka))],i),e.AMa=i},function(t,e,i){var n,r,a,o,s,u,c;function h(t,e,i,n,r){this.xg=t,this.config=e,this.Da=i,this.Ga=n,this.fxa=r}_esm(e),e.TT=void 0,t=i(0),n=i(50),r=i(1),a=i(197),o=i(13),s=i(29),u=i(18),c=i(1248),h.prototype.create=function(t,e,i){var n=this.fxa.create(t,e);return new c.VT(t,e,i,this.xg,this.config,this.Ga,n)},i=h,i=t.__decorate([r.$(),t.__param(0,r.l(n.jo)),t.__param(1,r.l(o.Oc)),t.__param(2,r.l(s.Lh)),t.__param(3,r.l(u.$c)),t.__param(4,r.l(a.RT))],i),e.TT=i},function(t,e,i){var n,u,r,c,h;function a(t,e,i,n,r,a,o){var s=this;this.j=t,this.Ca=e,this.xg=n,this.config=r,this.Ga=a,this.sb=o,this.VB=function(i,n){return function(t){var e=n(t);if("number"!=typeof e)throw Error("Event "+JSON.stringify(t)+" does not have movie Id");e===s.L&&i(t)}},this.ebb=this.VB(function(t){s.afa(t.MJ)},function(t){return t.L}),this.bbb=this.VB(function(){s.FW()},function(t){return t.L}),this.l0a=this.VB(function(){s.FW()},function(t){return t.movieId}),this.Apa=this.VB(function(){s.j.Gb.value===h.rb.Gc&&(s.j.Gb.removeListener(s.Apa),s.ow())},function(){return s.j.L}),this.SC=function(t){s.cs&&s.sb.SC(t)},this.r0a=this.VB(this.sb.gIb,function(t){return t.L}),this.U2a=this.VB(this.sb.INb,function(t){return t.L}),this.Cab=this.VB(this.sb.CZ,function(t){return s.j.ek(t.segmentId).L}),this.jib=this.VB(this.sb.P0,function(t){return s.j.ek(t.segmentId).L}),this.J2a=this.VB(this.sb.mra,function(t){return t.L}),this.kl=function(t){switch(t.skip&&(s.$l=!0),t.cause){case h.Ze.DD:case h.Ze.g5:s.gu&&s.Rq&&s.sb.Hza(s.getTime()-s.Rq,s.gu),s.gu="repos",s.sb.HR(t.Lya,t.Rf,t.Ie),s.Rq=s.getTime(),c.pg(s.Ux);break;case h.Ze.k3:s.gu="force_rebuffer",s.Rq=s.getTime(),c.pg(s.Ux)}},this.gn=function(t){s.SB=t.oldValue,s.sb.gn(t)},this.Ux=function(){var t;s.Rq&&s.j.Gb.value!==h.rb.fg&&(t=s.getTime()-s.Rq,s.sb.MR(t,s.$l,s.gu),s.SB&&s.SB!=s.j.Bc.value&&s.sb.woa(),s.Rq=void 0,s.gu=void 0,s.$l=void 0)},this.ow=function(){s.cs||(s.cs=!0,s.sb.rG(!1),s.yva(),s.config().Caa&&(s.PB=bt.setTimeout(function(){s.xg.flush(!1).catch(function(){return s.log.warn("failed to flush log batcher on initialLogFlushTimeout")}),s.PB=void 0},s.config().Caa)))},this.eh=function(){s.PB&&(bt.clearTimeout(s.PB),s.PB=void 0),(s.config().e9||s.config().bO)&&(s.ora&&(bt.clearInterval(s.ora),s.ora=void 0),s.sb.H2a()),s.M1&&s.M1(),s.cs?s.sb.$I(!!s.j.$i):s.j.$i?s.sb.rG(!0):s.Ca.background||s.sb.Iza()},this.a2=function(t){t.oldValue&&t.Vk&&t.Vk.FI&&s.sb.zO(t.oldValue,t.newValue,t.Vk.FI,t.Vk.tW)},this.W_=function(t){var e;t.newValue&&(e=t.newValue.stream,s.TJ!=e&&(s.TJ&&e&&s.sb.ZAa(s.TJ,e,t.newValue.kn.startTime),s.TJ=e))},this.L=e.L,this.log=u.aj(t,"LogblobBuilder"),this.xa(),i&&this.afa()}_esm(e),e.VT=void 0,n=i(17),u=i(9),r=i(5),c=i(58),h=i(16),a.prototype.xa=function(){this.j.addEventListener(h.ma.WJ,this.ebb),this.j.addEventListener(h.ma.txa,this.bbb),this.j.addEventListener(h.ma.CZ,this.Cab),this.j.addEventListener(h.ma.P0,this.jib),this.j.addEventListener(h.ma.eh,this.l0a),this.j.addEventListener(h.ma.NE,this.J2a,n.E4),(this.config().e9||this.config().bO)&&(this.j.addEventListener(h.ma.NE,this.U2a),this.ora=bt.setInterval(this.sb.H2a,this.config().NNb)),this.config().fBa&&this.j.addEventListener(h.ma.NE,this.r0a)},a.prototype.afa=function(t){var e=this;this.Acb||(this.j.Gb.value!==h.rb.Gc||void 0!==t&&t?this.j.Gb.addListener(this.Apa):this.ow(),this.j.uj.addListener(this.SC),this.j.Vb.addListener(this.sb.Im),this.j.Bc.addListener(this.gn),this.j.Qh.addListener(this.sb.lW),this.j.paused.addListener(this.sb.ida),this.j.Ie.addListener(this.W_),this.j.Gb.addListener(this.Ux),this.j.Gb.addListener(this.sb.rlb),this.j.tf.addListener(this.a2),this.j.playbackRate.addListener(this.sb.b1),this.j.addEventListener(h.ma.Ui,this.sb.Ui),this.j.addEventListener(h.ma.aO,this.sb.aO),this.j.addEventListener(h.ma.qS,this.sb.qS),this.j.addEventListener(h.ma.TA,function(t){e.gu="rebuffer",e.sb.TA(t),e.Rq=e.getTime(),c.pg(e.Ux)}),this.j.addEventListener(h.ma.kl,this.kl),this.j.addEventListener(h.ma.vS,this.sb.vS),this.Ca.Br&&this.Ca.Br.addListener(this.sb.Br),this.Acb=!0)},a.prototype.FW=function(){this.eh(),this.Acb&&(this.j.removeEventListener(h.ma.WJ,this.ebb),this.j.removeEventListener(h.ma.txa,this.bbb),this.j.removeEventListener(h.ma.CZ,this.Cab),this.j.removeEventListener(h.ma.P0,this.jib),this.j.uj.removeListener(this.SC),this.j.Vb.removeListener(this.sb.Im),this.j.Bc.removeListener(this.gn),this.j.Qh.removeListener(this.sb.lW),this.j.paused.removeListener(this.sb.ida),this.j.Ie.removeListener(this.W_),this.j.Gb.removeListener(this.Ux),this.j.Gb.removeListener(this.Apa),this.j.Gb.removeListener(this.sb.rlb),this.j.tf.removeListener(this.a2),this.j.playbackRate.removeListener(this.sb.b1),this.j.removeEventListener(h.ma.NE,this.J2a),this.j.removeEventListener(h.ma.eh,this.l0a),this.j.removeEventListener(h.ma.Ui,this.sb.Ui),this.j.removeEventListener(h.ma.aO,this.sb.aO),this.j.removeEventListener(h.ma.qS,this.sb.qS),this.j.removeEventListener(h.ma.TA,this.sb.TA),this.j.removeEventListener(h.ma.kl,this.kl),this.j.removeEventListener(h.ma.vS,this.sb.vS),this.Ca.Br&&this.Ca.Br.removeListener(this.sb.Br),this.j.removeEventListener(h.ma.NE,this.U2a),this.j.removeEventListener(h.ma.NE,this.r0a))},a.prototype.getTime=function(){return this.Ga.Tb().ka(r.pa)},a.prototype.yva=function(){var t,e=this,i=[];this.config().hcb&&(this.config().icb.forEach(function(t){i.push(bt.setTimeout(e.sb.IF,t))}),this.config().cca&&(t=bt.setInterval(this.sb.IF,this.config().cca)),this.M1=function(){i.forEach(function(t){bt.clearTimeout(t)}),t&&bt.clearInterval(t)})},e.VT=a},function(t,e,i){var n,r,a,o,s,u,c,h,f;_esm(e),e.Rcb=void 0,t=i(1),n=i(1250),r=i(71),a=i(520),o=i(1251),s=i(522),u=i(521),c=i(1252),h=i(382),f=i(1256),e.Rcb=new t.Ad(function(t){t(a.nUa).to(n.mUa).la(),t(r.ax).yG(function(){return bt._cad_global.http}),t(s.eOa).to(o.dOa).la(),t(u.fOa).Jm(c.default),t(h.OKa).to(f.NKa).la()})},function(t,e,i){var n;function r(){}_esm(e),e.mUa=void 0,t=i(0),i=i(1),r.prototype.create=function(){return new XMLHttpRequest},n=r,n=t.__decorate([i.$()],n),e.mUa=n},function(t,e,i){var n,r,a,o;function s(t,e,i){this.config=t,this.Z_b=e,this.bc=i}_esm(e),e.dOa=void 0,t=i(0),n=i(344),r=i(1),a=i(198),i=i(521),s.prototype.gLb=function(){if(this.config.Fmb)return this.bc(this.Z_b())},o=s,o=t.__decorate([r.$(),t.__param(0,r.l(n.cOa)),t.__param(1,r.l(a.ZNa)),t.__param(2,r.l(i.fOa))],o),e.dOa=o},function(t,e,i){var n,r,a;_esm(e),n=i(1253),r=i(1254),a=i(1255),e.default=function(t){var e;return t=new n.Hga(t),e=new a.Qtb(t),new r.Ptb(t,e)}},function(t,e){function i(t){this.zab=t}_esm(e),i.prototype.rCa=function(t){try{this.zab.setItem("gtp",JSON.stringify(t))}catch(t){return!1}return!0},i.prototype.t6a=function(){var t;try{if(t=this.zab.getItem("gtp"))return JSON.parse(t)}catch(t){}},i.prototype.So=function(){var t=this.t6a();if(t&&t.tp)return t.tp.a},i.prototype.ETb=function(){var t=this.Gta();if(t)return t.p25},i.prototype.FTb=function(){var t=this.Gta();if(t)return t.p50},i.prototype.GTb=function(){var t=this.Gta();if(t)return t.p75},i.prototype.Gta=function(){var t=this.t6a();if(t=t&&t.iqr)return t},e.Hga=i},function(t,e){function i(t,e){this.Px=t,this.sya=e}_esm(e),i.prototype.rCa=function(t){return this.Px.rCa(t)},i.prototype.So=function(){return this.Px.So()},e.Ptb=i},function(t,e){function i(t){this.Px=t}_esm(e),i.prototype.sya=function(){var t=this.Px.ETb(),e=this.Px.FTb(),i=this.Px.GTb();if("number"==typeof t&&"number"==typeof e&&"number"==typeof i)return(i-t)/e},e.Qtb=i},function(t,e,i){var n,r,a;function o(t,e){this.pf=e,this.Aa=t.jb("HttpDispatcherImpl")}_esm(e),e.NKa=void 0,t=i(0),n=i(1),r=i(7),i=i(71),o.prototype.download=function(a,o){var s=this;return o=void 0===o?{Jbb:0}:o,new Promise(function(i,n){var r;r=0,s.pf.download(a,function t(e){return e.ha?i(e.content):r===o.Jbb?n({Ba:e.Ba,qy:e.El}):(r++,void s.pf.download(a,t))})})},a=o,a=t.__decorate([n.$(),t.__param(0,n.l(r.ob)),t.__param(1,n.l(i.ax))],a),e.NKa=a},function(t,e,i){var n,r,a,o,s,u,c,h;_esm(e),e.i5a=void 0,t=i(1),n=i(1258),r=i(1259),a=i(1260),o=i(1261),s=i(1262),u=i(523),c=i(524),h=i(174),e.i5a=new t.Ad(function(t){t(h.RJa).to(n.QJa).la(),t(h.CRa).to(r.BRa).la(),t(h.ARa).to(a.zRa).la(),t(u.NJa).to(o.MJa).la(),t(c.RKa).to(s.QKa).la()})},function(t,e,i){var p,n,b,r,a,o,s,u;function c(t,e,i,n,r,a,o){this.config=t,this.M8a=e,this.zc=i,this.zg=n,this.P9b=r,this.cBa=a,this.IZb=0,this.Aa=o.jb("FTL")}_esm(e),e.QJa=void 0,t=i(0),n=i(1),b=i(5),r=i(46),a=i(7),o=i(523),s=i(524),i=i(174),c.prototype.start=function(){this.config.enabled&&!this.hu&&(this.hu=this.zc.Mj(this.config.Jjb,this.dz.bind(this)))},c.prototype.stop=function(){this.hu&&(this.hu.cancel(),this.hu=void 0)},c.prototype.dz=function(){var i=this,t=""+this.config.endpoint+(-1===this.config.endpoint.indexOf("?")?"?":"&")+"iter="+this.IZb++;this.sVb(t).then(function(e){return Promise.all(e.urls.map(function(t){return i.kWb(e,t.url,t.name)})).then(function(t){0<t.length&&i.P9b.s0({data:t,context:e.context,gxa:e.gxa})}).then(function(){return e})}).then(function(t){i.hu&&(t.K$a?i.hu=i.zc.Mj(t.K$a,i.dz.bind(i)):i.stop())}).catch(function(t){return i.Aa.error("FTL run failed",t)})},c.prototype.sVb=function(i){var n=this;return this.M8a.get(i,!1).then(function(t){var e;return 200!=t.status||null==t.body?(n.cBa.s0({url:i,status:t.status,Dza:"FTL API request failed",Ge:t.Ge}),Promise.reject(Error("FTL API request failed: "+t.status))):(e=n.zg.parse(t.body))instanceof Error?(n.cBa.s0({url:i,status:4,Dza:"FTL Probe API JSON parsing error",Ge:t.Ge}),Promise.reject(e)):Promise.resolve(e)}).catch(function(t){return t instanceof Error&&(n.cBa.s0({url:i,status:0,Dza:t.message}),n.Aa.error("FTL API call failed",t.message)),Promise.reject(t)})},c.prototype.kWb=function(h,f,l){var d=this;return new Promise(function(e,i){for(var t,n,r,a,o,s=[],u={},c=0;c<h.c8b;u={sga:u.sga,tga:u.tga},++c)u.sga=c<h.Vfb.length?h.Vfb[c]:b.Ka,u.tga=""+f+(-1===f.indexOf("?")?"?":"&")+"pulse="+(c+1),t=function(t){return function(){return new Promise(function(i,e){d.zc.Mj(t.sga,function(){p.D7b(d.M8a,t.tga,h.b8b).then(function(t){function e(t,e,i){return t=t||i.headers[e]}n=e(n,"via",t),r=e(r,"x-ftl-probe-data",t),a=e(a,"x-ftl-error",t),o=e(o,"latency-trace",t),t={status:t.status,Ge:t.Ge,Ogc:n||"",BHb:r||"",DX:a||"",l_b:d.B5b(o)},i(t)}).catch(function(t){e(t)})})})}}(u),s.push(0<c?s[c-1].then(t):t());Promise.all(s).then(function(t){e({url:f,name:l,data:t})}).catch(function(t){i(t)})})},c.prototype.B5b=function(t){if(t){for(var e={},i=(t=rt(t.split(";"))).next();!i.done;i=t.next())if((i=i.value.trim().split("="))&&2==i.length)try{e[i[0].trim()]=Number.parseInt(i[1])}catch(t){}return e}},c.D7b=function(t,e,i){return t.get(e,!1,i).then(function(t){return Object.assign({},t)})},u=p=c,u=p=t.__decorate([n.$(),t.__param(0,n.l(i.PJa)),t.__param(1,n.l(s.RKa)),t.__param(2,n.l(r.Wj)),t.__param(3,n.l(o.NJa)),t.__param(4,n.l(i.CRa)),t.__param(5,n.l(i.ARa)),t.__param(6,n.l(a.ob))],u),e.QJa=u},function(t,e,i){var n,r,a,o,s,u;function c(t,e){this.xg=t,this.Vxa=e}_esm(e),e.BRa=void 0,t=i(0),r=i(1),a=i(52),o=i(5),s=i(50),i=i(85),c.prototype.s0=function(t){var e={ctx:t.context,data:t.data.map(function(t){return{name:t.name,url:t.url,data:t.data.map(function(t){return n.whc({d:t.Ge.duration.ka(o.pa),sc:t.status,sz:t.Ge.size.ka(a.Xw),via:t.Ogc,cip:t.BHb,err:t.DX},t)})}})};t=this.Vxa.nv(t.gxa,"info",e),this.xg.Jc(t)},c.whc=function(t,e){return n.Nx(t,"dns",e.Ge.O2a),n.Nx(t,"tcp",e.Ge.JDa),n.Nx(t,"tls",e.Ge.UDa),n.Nx(t,"ttfb",e.Ge.QDa),n.fDb(t,e.l_b),t},c.fDb=function(t,e){e&&(t.rtts=e)},c.Nx=function(t,e,i){i&&(t[e]=i.ka(o.pa))},u=n=c,u=n=t.__decorate([r.$(),t.__param(0,r.l(s.jo)),t.__param(1,r.l(i.Sz))],u),e.BRa=u},function(t,e,i){var n,r,a,o,s,u;function c(t,e){this.xg=t,this.Vxa=e}_esm(e),e.zRa=void 0,t=i(0),r=i(1),a=i(52),o=i(5),s=i(50),i=i(85),c.prototype.s0=function(t){t=this.Vxa.nv("ftlProbeError","info",n.vhc({url:t.url,sc:t.status,pf_err:t.Dza},t)),this.xg.Jc(t)},c.vhc=function(t,e){return e.Ge&&(e=e.Ge,n.Nx(t,"d",e.duration),n.Nx(t,"dns",e.O2a),n.Nx(t,"tcp",e.JDa),n.Nx(t,"tls",e.UDa),n.Nx(t,"ttfb",e.QDa),t.sz=e.size.ka(a.Xw)),t},c.Nx=function(t,e,i){i&&(t[e]=i.ka(o.pa))},u=n=c,u=n=t.__decorate([r.$(),t.__param(0,r.l(s.jo)),t.__param(1,r.l(i.Sz))],u),e.zRa=u},function(t,e,i){var n,r,a,o,s;function u(t,e){this.is=t,this.json=e,r.yq(this,"json")}_esm(e),e.MJa=void 0,t=i(0),n=i(1),r=i(55),a=i(38),o=i(5),i=i(27),u.prototype.parse=function(t){var e;if(t=this.json.parse(t),!this.is.una(t))throw Error("FtlProbe: param: not an object");if(t.next&&!this.is.PV(t.next))throw Error("FtlProbe: param.next: not a positive integer");if(!this.is.PV(t.pulses))throw Error("FtlProbe: param.pulses: not a positive integer");if(t.pulse_delays&&!this.is.iE(t.pulse_delays))throw Error("FtlProbe: param.pulse_delays: not an array");if(!this.is.PV(t.pulse_timeout))throw Error("FtlProbe: param.pulse_timeout: not a positive integer");if(!this.is.iE(t.urls))throw Error("FtlProbe: param.urls: not an array");if(!this.is.wo(t.logblob))throw Error("FtlProbe: param.logblob: not a string");if(!this.is.$V(t.ctx))throw Error("FtlProbe: param.ctx: not an object");for(var i=0;i<t.urls.length;++i){if(e=t.urls[i],!this.is.una(e))throw Error("FtlProbe: param.urls["+i+"]: not an object");if(!this.is.$u(e.name))throw Error("FtlProbe: param.urls["+i+"].name: not a string");if(!this.is.$u(e.url))throw Error("FtlProbe: param.urls["+i+"].url: not a string")}return{c8b:t.pulses,Vfb:t.pulse_delays?t.pulse_delays.map(o.vc):[],b8b:o.vc(t.pulse_timeout),K$a:t.next?o.vc(t.next):void 0,urls:t.urls,gxa:t.logblob,context:t.ctx}},s=u,s=t.__decorate([n.$(),t.__param(0,n.l(i.Tg)),t.__param(1,n.l(a.YG))],s),e.MJa=s},function(t,e,i){var c,n,r,h,a,o,s,u,f;function l(t,e,i){this.Da=t,this.Ahc=e,this.performance=i,n.yq(this,"performance")}_esm(e),e.QKa=void 0,t=i(0),n=i(55),r=i(286),h=i(52),a=i(38),o=i(29),s=i(1),u=i(520),f=i(5),l.prototype.get=function(o,t,s){var u=this;return new Promise(function(e,i){var n,r,a;try{"withCredentials"in(n=u.Ahc.create())||i(Error("Missing CORS support")),n.open("GET",o,!0),t&&(n.withCredentials=!0),s&&(n.timeout=s.ka(f.pa)),r=u.Da.Ef,a=void 0,n.onreadystatechange=function(){var t;switch(n.readyState){case XMLHttpRequest.HEADERS_RECEIVED:a=u.Da.Ef.Ea(r);break;case XMLHttpRequest.DONE:t=u.Da.Ef.Ea(r),t={body:n.responseText,status:n.status,headers:c.mza(n.getAllResponseHeaders()),Ge:u.Ota(o,h.fa(n.responseText.length),t,a)},e(t)}},n.send()}catch(t){i(t)}})},l.mza=function(t){var e,i,n={};t=t.split("\r\n");for(var r=0;r<t.length;r++)0<(i=(e=t[r]).indexOf(": "))&&(n[e.substring(0,i).toLowerCase()]=e.substring(i+2));return n},l.prototype.Ota=function(t,e,i,n){return e={size:e,duration:i,QDa:n},this.performance&&this.performance.getEntriesByName&&(0==(i=this.performance.getEntriesByName(t)).length&&0==(i=this.performance.getEntriesByName(t+"/")).length||(t=i[i.length-1],e=r.BQ(e),t.decodedBodySize&&(e.size=h.fa(t.decodedBodySize)),0<t.duration?e.duration=f.timestamp(t.duration):0<t.startTime&&0<t.responseEnd&&(e.duration=f.timestamp(t.responseEnd-t.startTime)),0<t.requestStart&&(e.O2a=f.timestamp(t.domainLookupEnd-t.domainLookupStart),e.JDa=f.timestamp(t.connectEnd-t.connectStart),e.QDa=f.timestamp(t.responseStart-t.startTime),0===t.secureConnectionStart?e.UDa=f.timestamp(0):void 0!==t.secureConnectionStart&&(i=t.connectEnd-t.secureConnectionStart,e.UDa=f.timestamp(i),e.JDa=f.timestamp(t.connectEnd-t.connectStart-i))))),e},i=c=l,i=c=t.__decorate([s.$(),t.__param(0,s.l(o.Lh)),t.__param(1,s.l(u.nUa)),t.__param(2,s.l(a.Gja)),t.__param(2,s.optional())],i),e.QKa=i},function(t,e,i){var n,r,a,o;_esm(e),e.Qfb=void 0,t=i(1),n=i(345),r=i(1264),a=i(200),o=i(1265),e.Qfb=new t.Ad(function(t){t(n.HIa).to(r.GIa).la(),t(a.PT).to(o.fMa).la()})},function(t,e,i){var n,r,a,o,s,u,c,h;function f(t,e,i,n){this.Ii=t,this.mE=e,this.Bgc=i,this.uQ=n}_esm(e),e.GIa=void 0,t=i(0),n=i(1),r=i(30),a=i(31),o=i(76),s=i(122),u=i(57),c=i(48),i=i(200),f.prototype.zh=function(t){var e=this;return this.Ii.zE(t.Rk[0].data[0],[8,4])?Promise.resolve({Re:[{id:"ddd",VJ:"cert",yZ:void 0}],hk:[{sessionId:"ddd",data:new Uint8Array(this.mE.decode(c.dUa))}]}):this.Ii.zE(t.Rk[0].data[0],this.Bgc.decode("certificate"))?Promise.resolve({Re:[{id:"ddd",VJ:"cert",yZ:void 0}],hk:[{sessionId:"ddd",data:new Uint8Array(this.mE.decode(c.j3))}]}):this.uQ.Kx(this.ERb(t)).then(function(t){return e.FRb(t)})},f.prototype.release=function(t){return this.uQ.release(this.IRb(t)).then(function(){})},f.prototype.ERb=function(t){var i=this,e=t.Rk.map(function(e){return e.data.map(function(t){return{sessionId:e.sessionId,dataBase64:i.mE.encode(t)}})});return{ga:t.ga,Og:t.Og,f9:t.f9,wg:u.Pwa(t.wg),Ko:s.Nm[t.Ko],Rk:e.reduce(function(t,e){return t.concat(e)},[]),Cj:t.Cj}},f.prototype.IRb=function(t){return{ga:t.ga,Re:t.Re}},f.prototype.FRb=function(t){return{Re:t.Re,hk:t.hk}},h=f,h=t.__decorate([n.$(),t.__param(0,n.l(r.ki)),t.__param(1,n.l(a.Ji)),t.__param(2,n.l(o.Pu)),t.__param(3,n.l(i.PT))],h),e.GIa=h},function(t,e,i){var n,r,a,o,s,u;function c(t,e,i,n,r){this.xCb=t,this.l9b=e,this.khb=n,this.s$b=r,this.Aa=i.jb("LicenseProviderImpl")}_esm(e),e.fMa=void 0,t=i(0),n=i(1),r=i(7),a=i(525),i(526),o=i(530),s=i(531),i=i(291),c.prototype.Kx=function(t){var e=this,i=this.khb.Lec(t);return this.xCb.kq(this.Aa,t.Cj,i).then(function(t){return t.map(function(t){return t.p_b}),e.s$b.ulb(t)}).catch(function(t){return e.Aa.error("PBO license failed",t),Promise.reject(t)})},c.prototype.release=function(t){var e=this;return t=this.khb.Oec(t),this.l9b.Pf(this.Aa,t).then(function(){return{ha:!0}}).catch(function(t){return e.Aa.error("PBO release license failed",t),Promise.reject(t)})},u=c,u=t.__decorate([n.$(),t.__param(0,n.l(a.ZOa)),t.__param(1,n.l(o.MPa)),t.__param(2,n.l(r.ob)),t.__param(3,n.l(s.oPa)),t.__param(4,n.l(i.Cja))],u),e.fMa=u},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,d,p,b,g;function m(t){return function(){return t.zb.get(n.HPa).xa()}}_esm(e),e.CK=void 0,t=i(1),n=i(152),r=i(229),a=i(292),o=i(532),s=i(1267),u=i(1268),c=i(533),h=i(1269),f=i(534),l=i(1270),d=i(293),p=i(1271),b=i(535),g=i(1272),e.CK=new t.Ad(function(t){t(c.uQa).to(h.tQa).la(),t(r.Eja).to(a.DPa).la(),t(o.ePa).to(s.dPa).la(),t(n.HPa).to(u.GPa).la(),t(n.jU).E1(m),t(b.FPa).to(g.EPa).la(),t(f.kPa).to(l.jPa).la().d2(),t(d.JPa).to(p.IPa).la(),t(d.APa).to(p.zPa).la(),t(d.CPa).to(p.BPa).la()})},function(t,e,i){var n,r,o,a,s,u,c,h,f,l;function d(){}function p(){}function b(t,e,i,n,r){var a=this;this.is=t,this.Iq=e,this.config=i,this.TI=n,this.K5b=r,this.Lw=function(){return(new d).encode({version:a.version,data:a.CK})},this.fgc=function(t){return t=a.upgrade(t),a.K5b.validate(t),t},this.upgrade=function(t){var e;if(a.is.wo(t))return a.ggc(t);if(null!=(e=t.version)&&a.is.vo(e)&&1==e)return a.hgc(t);if(null!=(e=t.version)&&a.is.vo(e)&&2==e)return(new d).decode(t);if(t.version&&a.is.vo(t.version))throw new s.jd(o.Z.sD,o.Y.SGa,void 0,void 0,void 0,"Version number is not supported. Version: "+t.version,void 0,t);throw new s.jd(o.Z.sD,o.Y.lD,void 0,void 0,void 0,"The format of the playdata is inconsistent with what is expected.",void 0,t)},this.Yl=new u.qia(2,this.config().Yeb,""!==this.config().Yeb&&0<this.config().o6b,this.Iq,this.Lw)}_esm(e),e.dPa=void 0,t=i(0),n=i(1),r=i(13),o=i(4),a=i(27),s=i(37),u=i(334),c=i(96),h=i(92),f=i(292),i=i(293),b.prototype.t8b=function(){return this.Yl.load(this.fgc).catch(function(t){throw new s.jd(o.Z.sD,t.Ba||t.Kc,void 0,void 0,void 0,"Unable to load persisted playdata.",void 0,t)})},b.prototype.jDb=function(t){return this.Yl.add(t)},b.prototype.Rgb=function(t){return this.Yl.remove(t,function(t,e){return t.ga===e.ga})},b.prototype.xEa=function(t){return this.Yl.update(t,function(t,e){return t.ga===e.ga})},b.prototype.toString=function(){return JSON.stringify(this.Lw(),null,"  ")},b.prototype.tmb=function(t){return t?"/events?playbackContextId="+t+"&esn="+this.TI().Fl:""},b.prototype.BEa=function(t){return t.map(function(t){return{Wb:t.downloadableId,duration:t.duration}})},b.prototype.umb=function(t){var e;return t?{total:t.playTimes.total,EL:null!=(e=t.playTimes.totalContentTime)?e:t.playTimes.total,zS:t.playTimes.total,zG:0,AG:0,audio:this.BEa(t.playTimes.audio||[]),video:this.BEa(t.playTimes.video||[]),text:this.BEa(t.playTimes.timedtext||[])}:{total:0,EL:0,zS:0,zG:0,AG:0,audio:[],video:[],text:[]}},b.prototype.ggc=function(t){var e,i,n=this;if(t=JSON.parse(t),e={type:"online",href:this.tmb(t.playbackContextId),ga:t.xid?t.xid.toString():"",L:t.movieId,position:t.position,aB:t.timestamp,Xn:t.playback?1e3*t.playback.startEpoch:-1,GQ:t.mediaId,Vt:this.umb(t.playback),trackId:"",Wn:{},profileId:t.accountKey},i=JSON.stringify({keySessionIds:t.keySessionIds,movieId:t.movieId,xid:t.xid,licenseContextId:t.licenseContextId,profileId:t.profileId}),this.Iq.create().then(function(t){t.save(n.config().pX,i,!1)}),""===e.href||""===e.ga)throw new s.jd(o.Z.sD,o.Y.lD);return{version:2,data:[e]}},b.prototype.hgc=function(t){var e=this;if(t.playdata&&this.is.iE(t.playdata))return{version:2,data:t.playdata.map(function(t){return{type:t.type,href:e.tmb(t.playbackContextId),ga:t.xid?t.xid.toString():"",L:t.movieId,position:t.position,aB:t.timestamp,Xn:t.playback?1e3*t.playback.startEpoch:-1,GQ:t.mediaId,Vt:e.umb(t.playback),trackId:"",Wn:{},profileId:t.profileId}})};throw new s.jd(o.Z.sD,o.Y.lD,void 0,void 0,void 0,"The version 1 playdata is corrupted.",void 0,t)},nt.Object.defineProperties(b.prototype,{version:{configurable:!0,enumerable:!0,get(){return this.Yl.version}},CK:{configurable:!0,enumerable:!0,get(){return this.Yl.hn}}}),l=b,l=t.__decorate([n.$(),t.__param(0,n.l(a.Tg)),t.__param(1,n.l(c.hD)),t.__param(2,n.l(r.Oc)),t.__param(3,n.l(h.Kz)),t.__param(4,n.l(i.CPa))],l),e.dPa=l,p.prototype.encode=function(t){var e=new f.I4;return t.map(e.encode)},p.prototype.decode=function(t){var e=new f.I4;return t.map(e.decode)},d.prototype.encode=function(t){return{version:t.version,data:(new p).encode(t.data)}},d.prototype.decode=function(t){return{version:t.version,data:(new p).decode(t.data)}}},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,d,p,b;function g(t,e,i,n,r,a,o,s){this.config=t,this.zc=i,this.pz=n,this.qw=r,this.tda=a,this.Ci=o,this.RJ=Promise.resolve(),this.closed=!1,this.log=e.jb("PlaydataServices"),this.BK=[],this.active=new Set,this.w$b=new m(t,s)}function m(t,e){this.config=t,this.Da=e}function v(t,e,i,n,r,a){this.log=t,this.zc=e,this.gj=i,this.qw=n,this.pz=r,this.h6b=a,this.g4a=this.Mf=!1}_esm(e),e.GPa=e.Yub=void 0,t=i(0),n=i(1),r=i(5),a=i(7),o=i(46),s=i(229),u=i(532),c=i(533),h=i(4),f=i(292),l=i(534),d=i(101),p=i(29),i=i(147),v.prototype.QQ=function(e,i){var n;function r(){var t=n.qw.create(n.gj);n.pz.xEa(t).catch(function(t){var e=n.g4a?a.Ck.Wka:a.Ck.Jf;n.g4a=!0,n.log.write(e,"Unable to save playdata changes to IDB",t)})}(n=this).log.trace("Adding initial playdata",i),this.pz.jDb(i).then(function(){n.log.trace("Scheduling monitor",{interval:e}),n.hu=n.zc.H0(e,r)}).catch(function(t){n.log.error("Unable to add playdata",{error:t,playdata:(new f.I4).encode(i)}),n.hu=n.zc.H0(e,r)})},v.prototype.stop=function(t){var e,i=this;return this.Mf?Promise.resolve():(this.hu&&this.hu.cancel(),e=this.qw.create(this.gj),this.pz.xEa(e).catch(function(t){i.log.error("Unable to update playdata changes during stop",t)}).then(function(){if(t)return i.gj.background?(i.log.trace("Playback is currently in the background and never played, not sending the playdata",e),Promise.resolve()):(i.log.trace("Sending final playdata to the server",e),i.h6b.fib(e));i.log.trace("Currently configured to not send play data, not sending the data to the server")}).then(function(){if(t)return i.log.trace("Removing playdata from the persisted store",e),i.pz.Rgb(e);i.log.trace("Currently configured to not send play data, not removing the play data from IDB")}).then(function(){i.log.info("Successfully stopped the playback",e.L)}).catch(function(t){throw i.log.error("Unable to remove playdata changes",t),t}))},v.prototype.cancel=function(){this.Mf=!0,this.hu&&this.hu.cancel(),this.pz.xEa(this.qw.create(this.gj))},nt.Object.defineProperties(m.prototype,{FGb:{configurable:!0,enumerable:!0,get(){var t=this.Da.Ef;return(!this.RJ||0<=t.Ea(this.RJ).lm(this.config.M$a))&&(this.RJ=t,!0)}}}),e.Yub=m,g.prototype.xa=function(){var e=this;return this.qF||(this.log.trace("Starting playdata services"),this.qF=this.pz.t8b().then(function(){return e}).catch(function(t){return e.log.error("Unable to read the playdata, it will be deleted and not sent to the server",t),e})),this.qF},g.prototype.close=function(){this.closed=!0,this.BK.forEach(function(t){t.QQ.cancel()})},g.prototype.send=function(t){var e;return!this.closed&&(e=this.config).yK&&e.eCa?this.uac(t):Promise.resolve()},g.prototype.Hq=function(t,e,i){var n=this;this.closed||(this.eDa(t),this.gCa(t).catch(function(t){n.log.error("Start command failed",{playdata:t.CK,error:t.DX})}),e&&this.bDa(this.HTb(t),t,i))},g.prototype.h1=function(t){var e,i,n=this;return this.closed?Promise.resolve():(e=this.qw.create(t),this.active.delete(e.ga),i=(t=rt(d.nw(function(t){return t.key===e.ga},this.BK))).next().value,this.BK=t.next().value,Promise.all(i.map(function(t){return t.stopped=!0,t.QQ.stop(n.config.eCa)})).then(function(){}))},g.prototype.eDa=function(t){var e,i;t.Se("pdb"),this.config.Bza.jZb()&&(e=this.qw.create(t),i=e.ga,this.BK.some(function(t){return t.key===i})?this.log.trace("Already collecting playdata, ignoring",e):(this.log.info("Starting to collect playdata",e),this.active.add(i),this.BK.push({key:i,QQ:this.cUb(t,e),lz:!1,stopped:!1})))},g.prototype.uac=function(e){var i=this,t=this.pz.CK.filter(function(t){return!i.active.has(t.ga)}),n=void 0,r=void 0;return e&&1/0===e?n=t:(n=(t=rt(d.nw(function(t){return t.L===e},t))).next().value,r=t.next().value),r&&0<r.length&&this.zc.Mj(this.config.cib,function(){i.eib(r)}),n&&0!==n.length?this.eib(n):Promise.resolve()},g.prototype.eib=function(t){var i;return i=this,t.reduce(function(t,e){return t.then(function(){return t=e,i.tda.fib(t).then(function(){return i.x9b(t)});var t})},Promise.resolve())},g.prototype.x9b=function(t){var e=this;return this.pz.Rgb(t).then(function(){}).catch(function(t){throw e.log.error("Unable to complete the stop lifecycle event",t),t})},g.prototype.cUb=function(t,e){return(t=new v(this.log,this.zc,t,this.qw,this.pz,this.tda)).QQ(this.config.Bza,e),t},g.prototype.gCa=function(e){var i=this,n=this.qw.create(e);return this.tda.gCa(e,n).then(function(){i.obb(e)}).catch(function(t){throw i.obb(e),{CK:n,DX:t}})},g.prototype.obb=function(e){this.BK.filter(function(t){return t.key===e.ga.toString()}).forEach(function(t){t.lz=!0})},g.prototype.dib=function(t){return this.w$b.FGb?this.N0(l.Bja.mZ,t,h.Z.xia):Promise.resolve()},g.prototype.Hea=function(t){return this.N0(l.Bja.splice,t,h.Z.SRa)},g.prototype.N0=function(i,n,r){var a;function e(e){var t=a.BK.filter(function(t){return t.key===e.ga.toString()});return 0===t.length||t.reduce(function(t,e){return t||e.stopped||!e.lz},!1)}return a=this,e(n)?this.RJ:this.RJ=this.RJ.catch(function(){return Promise.resolve()}).then(function(){var t;return e(n)?Promise.resolve():(t=a.qw.create(n),a.tda.N0(i,n,t))}).then(function(t){return t}).catch(function(t){var e;throw a.log.error("Failed to send event",{eventKey:i,xid:n.ga,error:t}),{DX:t,mR:e=!t.$k&&t.iC!==h.t4.Qka?e:a.Ci(r,t)}})},g.prototype.bDa=function(i,n,r){var a=this;this.Qpa(),this.rwa=this.zc.Mj(i,function(){a.Qpa(),a.N0(l.Bja.mZ,n,h.Z.xia).then(function(){a.bDa(i,n,r)}).catch(function(t){var e=t.DX;(t=t.mR)&&r(t),e.iC!==h.t4.Qka&&a.bDa(i,n,r)})})},g.prototype.Wjb=function(){this.Qpa()},g.prototype.Qpa=function(){this.rwa&&(this.rwa.cancel(),this.rwa=void 0)},g.prototype.HTb=function(t){return t.kb.Sua?r.vc(t.kb.Sua):this.config.L$a},b=g,b=t.__decorate([n.$(),t.__param(0,n.l(c.uQa)),t.__param(1,n.l(a.ob)),t.__param(2,n.l(o.Wj)),t.__param(3,n.l(u.ePa)),t.__param(4,n.l(s.Eja)),t.__param(5,n.l(l.kPa)),t.__param(6,n.l(i.lU)),t.__param(7,n.l(p.Lh))],b),e.GPa=b},function(t,e,i){var n,r,a,o,s,u;function c(t,e){return(t=r.uf.call(this,t,"PlaydataConfigImpl")||this).config=e,t}_esm(e),e.tQa=void 0,t=i(0),n=i(1),r=i(45),a=i(33),o=i(44),s=i(5),i=i(39),S(c,r.uf),nt.Object.defineProperties(c.prototype,{yK:{configurable:!0,enumerable:!0,get(){return this.config.uB?"unsentplaydatatest":"unsentplaydata"}},eCa:{configurable:!0,enumerable:!0,get(){return!0}},cib:{configurable:!0,enumerable:!0,get(){return s.vc(1e4)}},Bza:{configurable:!0,enumerable:!0,get(){return s.vc(4e3)}},L$a:{configurable:!0,enumerable:!0,get(){return s.pca(1)}},M$a:{configurable:!0,enumerable:!0,get(){return s.Fh(30)}}}),u=c,t.__decorate([o.config(o.string,"playdataPersistKey")],u.prototype,"yK",null),t.__decorate([o.config(o.Cd,"sendPersistedPlaydata")],u.prototype,"eCa",null),t.__decorate([o.config(o.Ll,"playdataSendDelayMilliseconds")],u.prototype,"cib",null),t.__decorate([o.config(o.Ll,"playdataPersistIntervalMilliseconds")],u.prototype,"Bza",null),t.__decorate([o.config(o.Ll,"heartbeatCooldown")],u.prototype,"L$a",null),t.__decorate([o.config(o.Ll,"keepAliveWindow")],u.prototype,"M$a",null),u=t.__decorate([n.$(),t.__param(0,n.l(a.Sm)),t.__param(1,n.l(i.Bp))],u),e.tQa=u},function(t,e,i){var n,r,a;function o(t,e){this.JW=e,this.log=t.jb("PboEventSenderImpl")}_esm(e),e.jPa=void 0,t=i(0),n=i(86),r=i(7),i=i(1),o.prototype.gCa=function(t,e){var i=this.JW(n.Uq.start);return this.Z3a(i,t,e)},o.prototype.fib=function(t){var e=this;return this.JW(n.Uq.stop).Pf(this.log,t).then(function(){}).catch(function(t){throw e.log.error("PBO stop event failed",t),t})},o.prototype.N0=function(t,e,i){return t=this.JW(t),this.Z3a(t,e,i)},o.prototype.Z3a=function(t,e,i){var n=this;return t.kq(this.log,e.ja.Cj,i).then(function(){}).catch(function(t){throw n.log.error("PBO event failed",t),t})},a=o,a=t.__decorate([i.$(),t.__param(0,i.l(r.ob)),t.__param(1,i.l(n.Rha))],a),e.jPa=a},function(t,e,i){var n,r,a,o;function s(){}function u(t){this.J5b=t}function c(t){this.L5b=t}_esm(e),e.IPa=e.BPa=e.zPa=void 0,t=i(0),n=i(1),r=i(293),a=i(37),o=i(4),c.prototype.validate=function(t){t.map(this.L5b.validate)},i=c,i=t.__decorate([n.$(),t.__param(0,n.l(r.JPa))],i),e.zPa=i,u.prototype.validate=function(t){this.J5b.validate(t.data)},i=u,i=t.__decorate([n.$(),t.__param(0,n.l(r.APa))],i),e.BPa=i,s.prototype.validate=function(t){var e;if(t.ga&&"string"==typeof t.ga?t.href&&"string"==typeof t.href?t.profileId&&"string"==typeof t.profileId||(e="ProfileId value is corrupted."):e="Href value is corrupted.":e="Xid value is corrupted.",e)throw new a.jd(o.Z.sD,o.Y.lD,void 0,void 0,void 0,e,void 0,t.ga)},r=s,r=t.__decorate([n.$()],r),e.IPa=r},function(t,e,i){var n,r,a,o;function s(t,e){this.Feb=e,this.log=t.jb("PlaydataServices")}_esm(e),e.EPa=void 0,t=i(0),n=i(1),r=i(7),a=i(16),i=i(152),s.prototype.Hq=function(n){var r=this;this.Feb().then(function(i){n.addEventListener(a.ma.WJ,function(t){var e;void 0!==t.rR&&(e=n.Bn(t.rR),i.h1(e),t.MJ||new Promise(function(e){var i;n.tk.value?e():n.tk.addListener(i=function(t){t.newValue&&(e(),n.tk.removeListener(i))})}).then(function(){return i.Hq(n,r.kjb(n),function(t){return n.HI(t)})}))}),n.addEventListener(a.ma.ow,function(){i.Hq(n.na,r.kjb(n),function(t){return n.HI(t)})}),n.background||n.addEventListener(a.ma.zZ,function(t){var e;(t=n.Bn(t.L)).Vi&&(e=n.Bn(t.Vi.Ch),r.log.trace("Auxiliary viewable segment (viewableId: "+t.L+"). Starting playdata monitor for parent viewable "+e.L),t=e),i.eDa(t)}),n.addEventListener(a.ma.eh,function(){i.Wjb()}),n.addEventListener(a.ma.Qmb,function(){i.dib(n.na).catch(function(t){(t=t.mR)&&n.HI(t)})}),n.Vb.addListener(function(){n.kb.kra?r.log.trace("stickiness is disabled for timedtext"):i.Hea(n.na)}),n.Bc.addListener(function(){n.kb.kra?r.log.trace("stickiness is disabled for audio"):i.Hea(n.na).catch(function(t){(t=t.mR)&&n.HI(t)})})})},s.prototype.kjb=function(t){return t.state.value==a.dc.Me},o=s,o=t.__decorate([n.$(),t.__param(0,n.l(r.ob)),t.__param(1,n.l(i.jU))],o),e.EPa=o},function(t,e,i){var n,r,a,o,s,u,c,h;function f(n){return function(){return new Promise(function(t,e){var i=n.zb.get(r.QIa);i.xa().then(function(){t(i)}).catch(function(t){e(t)})})}}_esm(e),e.e3a=void 0,t=i(1),n=i(536),r=i(537),a=i(1274),o=i(99),s=i(1275),u=i(538),c=i(1276),h=i(1277),e.e3a=new t.Ad(function(t){t(u.rMa).to(c.qMa).la(),t(n.NIa).to(h.sMa),t(o.cT).to(s.QFa).la(),t(r.QIa).to(a.OIa).la(),t(r.PIa).E1(f)})},function(t,e,i){var n,r;function a(t){this.zNb=t}_esm(e),e.OIa=void 0,t=i(0),n=i(1),i=i(536),a.prototype.xa=function(){var n=this;return this.qF||(this.qF=new Promise(function(t,e){var i=[];n.zNb.forEach(function(t){i.push(t.xa())}),Promise.all(i).then(function(){t()}).catch(function(t){e(t)})})),this.qF},r=a,r=t.__decorate([n.$(),t.__param(0,n.jK(i.NIa))],r),e.OIa=r},function(t,e,i){var n,r;function a(){this.XBa="",this.nnb=[[],[]],this.da=[[],[]]}_esm(e),e.QFa=void 0,t=i(0),n=i(1),i(5),r=i(99),a.prototype.downloadRequest=function(t){var e;""===this.XBa&&(this.XBa=t.X),t.Cc||(e=this.vec(t),this.da[t.mediaType].push(e),this.nnb[t.mediaType].forEach(function(t){t.vnc(e)}))},a.prototype.vec=function(t){return{id:t.Vh(),X:t.X,mediaType:t.mediaType,Uk:t.Uk,startTime:t.xC,endTime:t.Wy,offset:t.yw,qO:t.qO,oO:t.oO,duration:t.sn,bitrate:t.bitrate,state:r.Kga.$2a,tk:!1,bqc:!1,l8a:!1,Ooc:r.Jga.waiting}},a.prototype.update=function(e){this.nnb[e.mediaType].forEach(function(t){t.htc(e)})},nt.Object.defineProperties(a.prototype,{X:{configurable:!0,enumerable:!0,get(){return this.XBa}}}),i=a,i=t.__decorate([n.$()],i),e.QFa=i},function(t,e,i){var n,r,a,o,s;function u(t,e){return(t=a.uf.call(this,t,"LogDisplayConfigImpl")||this).wh=e,t}_esm(e),e.qMa=void 0,t=i(0),n=i(1),r=i(44),a=i(45),o=i(33),i=i(111),S(u,a.uf),nt.Object.defineProperties(u.prototype,{r0:{configurable:!0,enumerable:!0,get(){return!0}},xQ:{configurable:!0,enumerable:!0,get(){return this.wh.xQ}},Hab:{configurable:!0,enumerable:!0,get(){return-1}}}),s=u,t.__decorate([r.config(r.Cd,"renderDomDiagnostics")],s.prototype,"r0",null),t.__decorate([r.config(r.sF,"logDisplayMaxEntryCount")],s.prototype,"xQ",null),t.__decorate([r.config(r.sF,"logDisplayAutoshowLevel")],s.prototype,"Hab",null),s=t.__decorate([n.$(),t.__param(0,n.l(o.Sm)),t.__param(1,n.l(i.lH))],s),e.qMa=s},function(t,e,i){},function(t,e,i){var n;function r(){}_esm(e),e.xHa=void 0,n=i(14),r.RIb=function(t){var e;if(n.Nh.queryCommandSupported&&n.Nh.queryCommandSupported("copy")){(e=n.Nh.createElement("textarea")).textContent=t,e.style.position="fixed",n.Nh.body.appendChild(e),e.select();try{n.Nh.execCommand("copy")}catch(t){console.warn("Copy to clipboard failed.",t)}finally{n.Nh.body.removeChild(e)}}},e.xHa=r},function(t,e,i){var n,r,a,o,s,u,c,h,f,l;_esm(e),e.Le=void 0,t=i(1),n=i(1280),r=i(1281),a=i(1282),o=i(145),s=i(343),u=i(514),c=i(1283),h=i(1284),f=i(539),l=i(1285),e.Le=new t.Ad(function(t){t(o.f5).to(n.USa).la(),t(s.gka).to(a.pRa).la(),t(u.PTa).to(r.OTa).la(),t(c.Ztb).to(h.uOa).la(),t(f.kUa).to(l.jUa).la()})},function(t,e,i){var a,n,r,o,s,c;function u(t,e){this.is=t,this.json=e,n.yq(this,"json")}_esm(e),e.USa=void 0,t=i(0),n=i(55),r=i(38),o=i(1),s=i(27),c=i(145),u.prototype.lgb=function(t){var e=this;return a.read(t,function(t){return parseInt(t)},function(t){return e.is.coa(t)})},u.prototype.DAa=function(t){var e=this;return a.read(t,function(t){return"true"==t||"false"!=t&&void 0},function(t){return e.is.g7(t)})},u.prototype.ls=function(t){var e=this;return a.read(t,function(t){return parseInt(t)},function(t){return e.is.aW(t)})},u.prototype.q8b=function(t){var e=this;return a.read(t,function(t){return parseFloat(t)},function(t){return e.is.vo(t)})},u.prototype.kgb=function(t,e){return a.read(t,function(t){return a.FQb(t,e)},function(t){return void 0!==t})},u.prototype.GAa=function(t,e){return a.read(t,function(t){return t},function(t){return!e||e.test(t)})},u.prototype.mgb=function(t){var e=this,i=void 0===i?function(){return!0}:i;try{return a.read(t,function(t){return e.json.parse(decodeURIComponent(t))},function(t){return e.is.$V(t)&&i(t)})}catch(t){return new c.Wq}},u.prototype.jl=function(t,e,i){var n,r=this;if(i=void 0===i?1:i,t=t.trim(),n=e instanceof Function?e:this.fLb(e,i),e=t.indexOf("["),i=t.lastIndexOf("]"),0!=e||i!=t.length-1)return new c.Wq;t=t.substring(e+1,i);try{return a.y5b(t).map(function(t){if((t=n(r,a.Hgc(t)))instanceof c.Wq)throw t;return t})}catch(t){return t instanceof c.Wq?t:new c.Wq}},u.prototype.fLb=function(i,n){var r=this;return n=void 0===n?1:n,function(t,e){return t=a.pUb(i),1<n?r.jl(e,i,n-1):t(r,e)}},u.FQb=function(t,e){var i,n;for(n in e)if(e[i=parseInt(n)]==t)return i},u.read=function(t,e,i){return void 0!==(t=e(t))&&i(t)?t:new c.Wq},u.pUb=function(t){switch(t){case"int":return function(t,e){return t.lgb(e)};case"bool":return function(t,e){return t.DAa(e)};case"uint":return function(t,e){return t.ls(e)};case"float":return function(t,e){return t.q8b(e)};case"string":return function(t,e){return t.GAa(e)};case"object":return function(t,e){return t.mgb(e)}}},u.y5b=function(t){for(var e,i=[["[","]"]],n=[],r=0,a=0,o=0,s=[],u={};a<t.length;u={XS:u.XS},++a)u.XS=t.charAt(a),","==u.XS&&0==o?(n.push(t.substr(r,a-r)),r=a+1):(e=i.find(function(e){return function(t){return t[0]==e.XS}}(u)))?(++o,s.push(e)):0<s.length&&s[s.length-1][1]==u.XS&&(--o,s.pop());if(r!=a)n.push(t.substr(r,a-r));else if(r==a&&0<r)throw new c.Wq;return n},u.Hgc=function(t){var e=t.charAt(0);if('"'!=e&&"'"!=e)return t;if(t.charAt(t.length-1)!=e)throw new c.Wq;return t.substring(1,t.length-1)},i=a=u,i=a=t.__decorate([o.$(),t.__param(0,o.l(s.Tg)),t.__param(1,o.l(r.YG))],i),e.USa=i},function(t,e,i){var n;function r(){}_esm(e),e.OTa=void 0,t=i(0),i=i(1),r.prototype.n5a=function(t){var e=this;return t?(t^16*Math.random()>>t/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,function(t){return e.n5a(t)})},n=r,n=t.__decorate([i.$()],n),e.OTa=n},function(t,e,i){var a,n,r,o;function s(t){this.location=t,n.yq(this,"location")}_esm(e),e.pRa=void 0,t=i(0),n=i(55),r=i(38),i=i(1),s.E_=function(t){var e,i,n={};if(0<t.length){t=t.split("&");for(var r=0;r<t.length;r++)0<=(i=(e=t[r].trim()).indexOf("="))?n[decodeURIComponent(e.substr(0,i).replace(a.QOa,"%20"))]=decodeURIComponent(e.substr(i+1).replace(a.QOa,"%20")):n[e.toLowerCase()]=""}return n},nt.Object.defineProperties(s.prototype,{g8b:{configurable:!0,enumerable:!0,get(){return this.data||(this.data=a.E_(this.Xfb))}},Xfb:{configurable:!0,enumerable:!0,get(){var t;return void 0!==this.i0||(this.i0=this.location.search.substr(1),0<=(t=this.i0.indexOf("#"))&&(this.i0=this.Xfb.substr(0,t))),this.i0}}}),(o=a=s).QOa=/[+]/g,o=a=t.__decorate([i.$(),t.__param(0,i.l(r.mMa))],o),e.pRa=o},function(t,e){_esm(e),e.Ztb="ObjectComparerSymbol"},function(t,e,i){var n,s;function r(){}_esm(e),e.uOa=void 0,t=i(0),n=i(1),s=i(211),r.prototype.compare=function(t,e){var i=[];return this.aqa(t,e,"",i),i},r.prototype.aqa=function(i,n,r,a){var o=this;if(s.XG.iE(i))s.XG.iE(n)&&i.length===n.length?i.forEach(function(t,e){o.aqa(i[e],n[e],r+"["+e+"]",a)}):a.push({a:i,b:n,path:r});else if(s.XG.$V(i)&&null!=i)if(s.XG.$V(n)&&null!=n){for(var t in i)this.aqa(i[t],n[t],r+"."+t,a);for(var e in n)e in i||void 0===n[e]||a.push({a:void 0,b:n[e],path:r+"."+e})}else a.push({a:i,b:n,path:r});else i!==n&&a.push({a:i,b:n,path:r})},i=r,i=t.__decorate([n.$()],i),e.uOa=i},function(t,e,i){var n,r;function a(){}_esm(e),e.jUa=void 0,t=i(0),n=i(1),r=i(14),a.prototype.RUb=function(){var t=bt.devicePixelRatio||1;return{width:r.hx.width*t,height:r.hx.height*t}},i=a,i=t.__decorate([n.$()],i),e.jUa=i},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,d,p,b,g,m,v;_esm(e),e.zd=void 0,t=i(1),n=i(540),r=i(1287),a=i(119),o=i(295),s=i(1288),u=i(1289),c=i(1291),h=i(1292),f=i(1293),l=i(541),d=i(542),p=i(167),b=i(297),g=i(1294),m=i(296),v=i(1296),e.zd=new t.Ad(function(t){t(n.YPa).to(r.XPa).la(),t(o.bka).to(s.hRa).la(),t(a.yH).to(u.YTa).la(),t(l.gRa).to(f.bNa).la(),t(l.fRa).to(h.eMa).la(),t(l.eRa).to(c.XLa).la(),t(b.cGa).zec(function(){var t;return null==(t=p.yr.mj)?void 0:t.uw}),t(b.bGa).to(g.aGa).la(),t(d.$ja).to(d.UQa),t(m.oha).to(v.jHa).la()})},function(t,e,i){var n,r,a;function o(t,e){this.Eb=e,this.Aa=t.jb("PlayPredictionDeserializer")}_esm(e),e.XPa=void 0,t=i(0),n=i(1),r=i(7),i=i(27),o.prototype.aNb=function(e){var i=this;try{return{direction:e.direction,sqc:e.layoutHasChanged,$rc:e.rowInteractionIndex,Nb:e.lolomos.map(function(t){return i.WMb(t)})}}catch(t){this.Aa.error("Failed to deserialize update Payload: ",{payload:JSON.stringify(e)})}},o.prototype.WMb=function(t){var e=this;return{context:t.context,list:t.list.map(function(t){return e.VMb(t)}),requestId:t.requestId,rowIndex:t.rowIndex,asc:t.rowSegment}},o.prototype.VMb=function(t){var e={Qd:t.pts,property:t.property,N:t.viewableId,index:t.index},i=t.preplay;return this.Eb.hh(i)&&(e.Fda=this.$Mb(i)),t=t.params,this.Eb.hh(t)&&(e.Fb=this.w2a(t)),e},o.prototype.$Mb=function(t){var e={Qd:t.pts,N:t.viewableId,kR:t.pipelineNum,index:t.index};return t=t.params,this.Eb.hh(t)&&(e.Fb=this.w2a(t)),e},o.prototype.w2a=function(t){return{he:t.uiLabel,ql:t.trackingId,Wn:t.sessionParams}},o.prototype.ZMb=function(e){var i=this;try{return e.map(function(t){return i.XMb(t)})}catch(t){this.Aa.error("Failed to deserialize uprepareList",{prepareList:JSON.stringify(e)})}},o.prototype.XMb=function(t){var e,i=t.params;return this.Eb.hh(i)&&(e=this.YMb(i)),{L:t.movieId,priority:t.priority,force:t.force,Fb:e,he:t.uiLabel,dtc:t.uiExpectedStartTime,ctc:t.uiExpectedEndTime,qm:t.firstTimeAdded}},o.prototype.YMb=function(t){var e=void 0,i=t.sessionParams;return this.Eb.hh(i)&&(e=i),{Q7:this.UMb(t.authParams),Wn:e,ql:t.trackingId,ea:t.startPts,ja:t.manifest,$h:t.isBranching}},o.prototype.UMb=function(t){return{Z5b:null==t?void 0:t.pinCapableClient}},a=o,a=t.__decorate([n.$(),t.__param(0,n.l(r.ob)),t.__param(1,n.l(i.Tg))],a),e.XPa=a},function(t,e,i){var n,a,r,o,s,u,c,h,f,l,d;function p(t,e,i,n){this.is=i,this.Ig=n,this.log=t.jb("TaskScheduler"),this.Mb=new f.Bk,this.config=e(),this.currentIteration=this.WW=0,this.yL=[],this.paused=!1,this.efa=[],this.E0a=[],this.lYb=this.config.d7b||l.append,this.addEventListener=this.Mb.addListener}_esm(e),e.hRa=void 0,t=i(0),n=i(1),a=i(295),r=i(7),o=i(13),s=i(138),u=i(27),c=i(18),h=i(5),f=i(73),(d=l=l||{}).prepend="prepend",d.append="append",d.pXb="ignore",p.prototype.rDb=function(t){this.log.trace("adding tasks, number of tasks: "+t.length),this.paused=!1,this.yL=this.mYb(t),this.WW=0,this.currentIteration+=1,this.pg()},p.prototype.pause=function(){this.paused=!0},p.prototype.pg=function(){var e,i,n,r=this;this.WW===this.yL.length?this.log.trace("all tasks completed"):this.paused?this.log.trace("in paused state",{currentTaskIndex:this.WW,numberOfTasks:this.yL.length}):(e=this.kUb(),i=this.currentIteration,e.startTime=this.Ig.Tb().ka(h.pa),e.status=s.tl.lz,this.Mb.Tc(a.yM.Wdc,{L:e.L,type:e.type}),this.efa.push(e),n=function(t){e.endTime=r.Ig.Tb().ka(h.pa),t(),r.E0a.push(e),r.efa.splice(r.efa.indexOf(e),1),r.currentIteration===i&&(r.WW++,r.pg())},e.F$b().then(function(){n(function(){e.status=s.tl.rS,r.oAa(e,a.yM.Xdc,"task succeeded")})}).catch(function(t){n(function(){0<=[s.tl.Mf,s.tl.MGb,s.tl.qpa].indexOf(t.status)?(e.status=t.status,r.oAa(e,a.yM.Udc,"cancelled task")):(e.status=s.tl.Av,r.oAa(e,a.yM.Vdc,"task failed",t))})}))},p.prototype.kUb=function(){return this.yL[this.WW]},p.prototype.getStats=function(i,n,e){var t=this.E0a.map(function(t){return t.Jv()}),r=this.efa.map(function(t){return t.Jv()}),a=this.is.hh(i)&&this.is.hh(n),o={};return this.is.hh(e)?o.qIb=t.filter(function(t){return t.movieId===e}):t.concat(r).forEach(function(t){var e;o[t.type+"_"+t.status]=1+(0|o[t.type+"_"+t.status]),e=t.status==s.tl.lz?t.startTime:t.endTime,a&&e&&i<=e&&e<n&&(o[t.type+"_"+t.status+"_delta"]=1+(0|o[t.type+"_"+t.status+"_delta"]))}),o},p.prototype.oAa=function(t,e,i,n){var r=t.Jv();n?this.log.warn(i,r,n):this.log.trace(i,r),this.Mb.Tc(e,{L:t.L,type:t.type,reason:t.status}),t.ZQ(r)},p.prototype.mYb=function(t){var e=this.yL.filter(function(t){return t.V5b&&t.status===s.tl.Al}),i=this.lYb;return i===l.pXb?[].concat(t):i===l.prepend?e.concat(t):t.concat(e)},i=p,i=t.__decorate([n.$(),t.__param(0,n.l(r.ob)),t.__param(1,n.l(o.Oc)),t.__param(2,n.l(u.Tg)),t.__param(3,n.l(c.$c))],i),e.hRa=i},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,d,p,b,g;function m(t,e,i,n,r,a,o,s,u,c,h){this.Bhc=i,this.Eb=n,this.Ig=r,this.$d=a,this.n4a=o,this.mQb=s,this.nQb=u,this.E9=c,this.events=new g.EventEmitter,this.log=t.jb("VideoPreparer"),this.config=e(),this.bFa={},this.rca={},this.Zb={num_of_calls:0,num_of_movies:0},this.E9.xa(this),this.bh=h.bh}function v(t){return void 0!==t}_esm(e),e.YTa=void 0,t=i(0),n=i(1290),r=i(13),a=i(1),o=i(7),s=i(84),u=i(27),c=i(295),h=i(18),f=i(5),l=i(138),d=i(296),p=i(541),b=i(297),g=i(12),m.prototype.vib=function(t,e,i){this.bh.setData(t,"ldl",e,i)},m.prototype.h8a=function(t){return this.bh.LY(t,"ldl")},m.prototype.a0a=function(t){this.bh.clearData(t,"ldl",void 0,!0)},m.prototype.zP=function(t,e){return this.bh.getData(t,e)},m.prototype.F5a=function(t){var e=this.bh.getData(t,"ldl");return this.bh.clearData(t,"ldl",void 0,!0),e},m.prototype.mnb=function(t){return this.Rjb===t||this.I1a===t},m.prototype.FK=function(t,e){var i,n=this,r=(i=(t=t.map(function(t){return t.Fb=t.Fb||{Q7:{Z5b:!1},ql:0},n.Eb.SI(t.Fb.ql)||(t.Fb.ql=0),n.Eb.SI(t.Qd)&&(t.Fb.ea=t.Qd),t})).map(function(t){return n.uLb(t,e)}).reduce(function(t,e){return t.concat(e)},[])).map(function(t){return t.L+"-"+t.type});this.log.trace("prepare tasks",r),this.$d.rDb(i),this.Zb.num_of_calls++,this.Zb.num_of_movies+=t.length},m.prototype.getStats=function(t,e,i){return Object.assign(Object.assign({},i&&this.rca[i]||{}),{yL:this.$d.getStats(t,e,i),cache:this.bh.getStats(t,e),NRb:Object.assign(Object.assign({},this.Zb),this.E9.getStats())})},m.prototype.hWb=function(t){this.Rjb=t},m.prototype.fWb=function(t){this.log.trace("task scheduler paused on playback created"),this.$d.pause(),this.config.QMb&&this.bh.Mpa(t,["manifest"]),this.config.PMb&&this.bh.Mpa(t,["ldl"]),this.config.MMb&&this.bh.clearData(t,"manifest"),this.E9.Mgb(t),this.I1a=t},m.prototype.b8a=function(){this.log.info("ad played, clearing all manifests from cache"),this.M4a()},m.prototype.e8a=function(){this.log.info("track changed, clearing all manifests from cache"),this.M4a()},m.prototype.eWb=function(e){var i=this;this.config.NMb?this.bh.clearData(e,"manifest"):this.bh.LY(e,"manifest")&&this.bh.getData(e,"manifest").then(function(t){t.hb.isSupplemental||i.bh.clearData(e,"manifest")},function(t){i.log.warn("Failed to get manifest for movieId ["+e+"] from cacheManager.",t)}),this.Upa(e),this.Rjb=this.I1a=void 0,this.events.emit("playbackClosing",{N:e,type:"playbackClosing",target:this})},m.prototype.M4a=function(){this.bh.Mpa("none",["manifest","ldl"])},m.prototype.Upa=function(t){delete this.bFa[t]},m.prototype.Nv=function(t){return this.bFa[t]},m.prototype.D8=function(t){return this.bFa[t]=this.Bhc.hB()},m.prototype.ijb=function(t,e){return this.h8a(t)?l.tl.Mf:e.lF?void 0:l.tl.qpa},m.prototype.uLb=function(t,e){var i;return t.he&&t.Fb&&(t.Fb.he=t.he),this.Wfc(t.L,t.qm),A=this.bLb(t,e),i=this.YKb(t,null===A||void 0===A?void 0:A.id,e),t=this.dLb(t,null===A||void 0===A?void 0:A.id,e),[A,i,t].filter(v)},m.prototype.bLb=function(t,e){if(!this.bh.LY(t.L,"manifest"))return new n.nU("manifest",this.Ig.Tb().ka(f.pa),!!t.Fb.Fi,void 0,e,this.n4a,t,this);this.log.trace("manifest exists in cache for "+t.L)},m.prototype.YKb=function(t,e,i){if(this.config.wX&&!this.bh.LY(t.L,"ldl"))return this.config.wu?new n.nU("ldl",this.Ig.Tb().ka(f.pa),!!t.Fb.Fi,e,i,this.mQb,t,this):new n.nU("ldl",this.Ig.Tb().ka(f.pa),!!t.Fb.Fi,e,i,this.nQb,t,this)},m.prototype.dLb=function(t,e,i){if(this.config.A3a)return new n.nU("getMedia",this.Ig.Tb().ka(f.pa),!!t.Fb.Fi,e,i,this.E9,t,this)},m.prototype.Wfc=function(t,e){this.rca[t]||(this.rca[t]={Dda:0,qm:0}),(t=this.rca[t]).Dda=(void 0!==t&&void 0!==t.Dda?t.Dda:0)+1,t.qm=e},i=m,i=t.__decorate([a.$(),t.__param(0,a.l(o.ob)),t.__param(1,a.l(r.Oc)),t.__param(2,a.l(s.Rz)),t.__param(3,a.l(u.Tg)),t.__param(4,a.l(h.$c)),t.__param(5,a.l(c.bka)),t.__param(6,a.l(p.gRa)),t.__param(7,a.l(p.fRa)),t.__param(8,a.l(p.eRa)),t.__param(9,a.l(b.bGa)),t.__param(10,a.l(d.oha))],i),e.YTa=i},function(t,e,i){var u,c;function n(t,e,i,n,r,a,o,s){this.type=t,this.Al=e,this.V5b=void 0!==i&&i,this.notify=r,this.oQb=a,this.pR=o,this.zd=s,this.id=++c,this.status=u.tl.Al}_esm(e),e.nU=void 0,u=i(138),c=0,n.prototype.Jv=function(){var t={id:this.id,type:this.type,created:this.Al,status:this.status,movieId:this.L};return this.startTime&&(t.startTime=this.startTime),this.endTime&&this.startTime&&(t.duration=this.endTime-this.startTime,t.endTime=this.endTime),t},n.prototype.ZQ=function(t){this.notify&&this.notify(t)},n.prototype.F$b=function(){return this.oQb.fetch(this.pR,this.zd)},nt.Object.defineProperties(n.prototype,{L:{configurable:!0,enumerable:!0,get(){return this.pR.L}},priority:{configurable:!0,enumerable:!0,get(){return this.pR.priority}}}),e.nU=n},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,d,p,b,g,m,v,y;function w(t,e,i,n,r,a,o,s,u,c,h){this.Ut=i,this.$0=n,this.qc=r,this.Da=a,this.Ga=o,this.uQ=s,this.e6b=u,this.kk=c,this.Yk=h,this.log=t.jb("VideoPreparer"),this.config=e()}_esm(e),e.XLa=void 0,t=i(0),n=i(1),r=i(7),a=i(13),o=i(138),s=i(60),u=i(57),c=i(47),h=i(163),f=i(200),l=i(31),d=i(5),p=i(29),b=i(18),g=i(203),m=i(215),v=i(116),i=i(68),w.prototype.fetch=function(n,r){var a=this;return this.log.trace("Fetching LDL",g.fM(n)),this.L=n.L,(this.zd=r).zP(n.L,"ldl").catch(function(){return a.log.trace("Requesting a new license",g.fM(n)),a.kk.k$(n.L).then(function(t){var e,i;if(a.ja=t,a.hb=t.hb,t=a.zd.ijb(n.L,a.hb))throw{status:t};return t=a.hb.bD[0].a0,e=a.hb.bD[0].rra,i=(t||[e]).map(function(t){return a.qc.decode(t.bytes)}),a.ef=a.FE({m3a:a.log,Nra:function(t){return a.handleError(t)},Se:void 0,Bya:function(){},Da:{getTime:function(){return a.Ga.Tb().ka(d.pa)},xpc:function(){return a.Da.Ef.ka(d.Gp)}}}),r.vib(n.L,a.ef),a.ef.create(a.config.Hn).then(function(){return a.ef.zh(u.Li.Cp,i,!0)}).then(function(){return a.ef}).catch(function(t){throw a.handleError(t),t})}).catch(function(t){if(a.log.warn("Manifest not available for ldl request",t),void 0!==t.status)throw t;throw{status:o.tl.Mf}})})},w.prototype.handleError=function(t){this.log.warn("ldl is now invalid",t),this.ef.close(),this.zd.a0a(this.L),this.zd.Upa(this.L)},w.prototype.FE=function(t){var e,i=this;return this.Ut.dM&&this.Ut.bM||(e=this.e6b(),this.Ut.dM=e.jc,this.Ut.bM=e.request),e=new this.Ut.bM(t.m3a,function(t){var e=[];return t.Rk.forEach(function(t){e.push({sessionId:t.sessionId,dataBase64:i.qc.encode(t.data)})}),t={Rk:e,f9:[i.hb.om],wg:s.Ap.Z0a(t.wg),Og:i.hb.Og,ga:i.zd.D8(i.L),Cj:i.ja.Cj},i.log.trace("xid created ",{MovieId:i.L,xid:t.ga}),i.uQ.Kx(t)},void 0,{Qf:!1,Hl:!1}),this.Ut.dM(t.m3a,t.Se,{Qf:!1,Hl:!1,Em:e,d0:this.config.Mfb,ca:void 0,$C:this.config.u3a,onerror:t.Nra,Bya:t.Bya,Da:t.Da,zK:!1,NEb:this.$0.w8([]),Tgc:this.$0.C8([]),Owa:this.Yk.y7.ka(d.pa)})},y=w,y=t.__decorate([n.$(),t.__param(0,n.l(r.ob)),t.__param(1,n.l(a.Oc)),t.__param(2,n.l(c.K4)),t.__param(3,n.l(h.tU)),t.__param(4,n.l(l.Ji)),t.__param(5,n.l(p.Lh)),t.__param(6,n.l(b.$c)),t.__param(7,n.l(f.PT)),t.__param(8,n.l(m.Lja)),t.__param(9,n.l(v.dH)),t.__param(10,n.l(i.Eu))],y),e.XLa=y},function(t,e,i){var n,r,a,h,o,s,u,f,l,c,d;function p(t,e,i,n,r,a){this.qc=i,this.WNb=n,this.IQ=r,this.kk=a,this.log=t.jb("VideoPreparer")}_esm(e),e.eMa=void 0,t=i(0),n=i(1),r=i(7),a=i(13),h=i(57),o=i(31),s=i(124),u=i(144),f=i(138),l=i(203),c=i(116),d=i(48),p.prototype.fetch=function(s,u){var c=this;return this.log.trace("Fetching LDL",l.fM(s)),this.L=s.L,(this.zd=u).zP(s.L,"ldl").then(function(t){return t.Kea}).catch(function(){return c.log.trace("Requesting a new license",l.fM(s)),c.kk.k$(s.L).then(function(i){var t,e,n,r,a,o;if(c.hb=i.hb,u.h8a(s.L))return u.zP(s.L,"ldl").then(function(t){return t.Kea});if(t=c.zd.ijb(s.L,c.hb))throw{status:t};return t=(e=c.hb.bD[0]).a0,n=e.rra,e=e.streams[0].CE,r=d.Mva(e),a=(t||[n]).map(function(t){return c.qc.decode(t.bytes)}),o=c.WNb().then(function(t){var e={type:h.Li.Cp,initData:a,Naa:r,context:{jba:d.Ita(i.hb.bD[0].streams)},sk:{L:s.L,ga:u.D8(s.L),Og:c.hb.Og,om:c.hb.om,Cj:i.Cj}};return t.zh(e,c.IQ())}).catch(function(t){throw c.handleError("Unable to prepare an EME session.",t),t}),c.zd.vib(s.L,{Kea:o,source:"videopreparer"},function(){if(!c.zd.mnb(s.L))try{o.then(function(t){return t.close()}).catch(function(t){c.handleError("Unable to cleanup LDL session, Unable to get the session.",t)})}catch(t){c.handleError("Unable to cleanup LDL session, unexpected exception.",t)}}),o}).catch(function(t){if(c.log.warn("Manifest not available for ldl request",t),void 0!==t.status)throw t;throw{status:f.tl.Mf}})})},p.prototype.handleError=function(t,e){this.log.warn(t+" LDL is now invalid.",e),this.zd.a0a(this.L),this.zd.Upa(this.L)},i=p,i=t.__decorate([n.$(),t.__param(0,n.l(r.ob)),t.__param(1,n.l(a.Oc)),t.__param(2,n.l(o.Ji)),t.__param(3,n.l(s.f3)),t.__param(4,n.l(u.YT)),t.__param(5,n.l(c.dH))],i),e.eMa=i},function(t,e,i){var n,r,a,o,s,u,c,h,f,l;function d(t,e,i,n,r){this.IZ=i,this.Ig=n,this.kk=r,this.log=t.jb("VideoPreparer"),this.config=e()}_esm(e),e.bNa=void 0,t=i(0),n=i(13),r=i(1),a=i(7),o=i(18),s=i(5),u=i(136),c=i(100),h=i(203),f=i(116),l=i(57),d.prototype.fetch=function(e,i){var t;return this.log.trace("Fetching manifest",h.fM(e)),t=e.Fb,this.config.uCb&&t&&t.ja&&!this.kk.Z$(e.L)&&(!("clientGenesis"in t.ja&&t.ja.clientGenesis)||"number"==typeof t.ja.clientGenesis&&Date.now()-t.ja.clientGenesis<this.config.ufb)&&(t=this.IZ.create(t.ja))&&(t.QK=this.Ig.Tb().ka(s.pa),t.JR=this.Ig.Tb().ka(s.pa),this.kk.i1(e.L,t)),this.kk.rJ({ga:i.D8(e.L),N:e.L,kb:null!=(t=e.Fb)?t:{},Fv:c.ko.kH,wg:l.Li.Cp},!0,function(t){i.events.emit("manifestRemovedFromCache",{target:i,type:"manifestRemovedFromCache",N:e.L,ja:t})})},i=d,i=t.__decorate([r.$(),t.__param(0,r.l(a.ob)),t.__param(1,r.l(n.Oc)),t.__param(2,r.l(u.nM)),t.__param(3,r.l(o.$c)),t.__param(4,r.l(f.dH))],i),e.bNa=i},function(t,e,i){var n,o,s,r,u,a,c,h,f,l,d,p,b,g;function m(){var i=this;this.promise=new Promise(function(t,e){i.resolve=t,i.reject=e})}function v(t,e,i,n,r){var a=this;this.Tza=i,this.a7b=n,this.kk=r,this.e2=[],this.aG=new Map,this.v4b=function(t){var e,i;t=t.wishListItem.key.N,a.aG.has(t)&&(t=(i=a.aG.get(t)).pR,null!=(e=(i=i.fqa).resolve)&&e.call(i,t))},this.Sca=function(t){var n=t.N,e=t.ja;t.target.mnb(t.N)||(a.ph.has({N:n})&&(a.ph.rm(n).Mr=!0),null!=e&&e.then(function(t){var i=t.hb;i&&i.Oe&&i.ev&&i.ev.forEach(function(t){var e={yl:{Oe:i.Oe,Ch:n}};a.ph.has({N:t.L,Ch:i.L,Oe:i.Oe})&&(a.ph.rm(t.L,e).Mr=!0)})}),a.Mgb(n),a.ajb(a.e2))},this.Aa=t.jb("VideoPreparer"),this.config=e()}_esm(e),e.aGa=void 0,t=i(0),n=i(7),i(203),o=i(167),s=i(63),r=i(13),u=i(20),a=i(100),c=i(297),h=i(1),f=i(542),l=i(12),d=i(116),p=i(57),b=i(543),g=i(1295),v.prototype.xa=function(i){var n=this;this.ph=new b.Vka(function(t,e){return n.Yx(t,i,o.yr.Ce,e)})},v.prototype.fetch=function(t,e){return-1===e.events.listeners("manifestRemovedFromCache").indexOf(this.Sca)&&e.events.on("manifestRemovedFromCache",this.Sca),-1===e.events.listeners("playbackClosing").indexOf(this.Sca)&&e.events.on("playbackClosing",this.Sca),this.ajb(this.iIb(this.ELb(t,e))),this.aG.get(t.L).fqa.promise},v.prototype.getStats=function(){return this.uw.getStats()},v.prototype.iIb=function(e){return[e].concat(J(this.e2.filter(function(t){return t.key.N!==e.key.N}))).slice(0,this.config.Z6b).map(this.config.$6b?function(t,e){return Object.assign({},t,{priority:e})}:function(t){return t})},v.prototype.rJ=function(i,n,t){var e,r=this;return t=void 0===t?{}:t,this.kk.rJ({ga:null!=(e=n.Nv(i))?e:n.D8(i),N:i,Fv:a.ko.kH,wg:p.Li.Cp,kb:t}).then(function(t){var e=t.hb;return null!=(t=e.ev)&&t.forEach(function(t){r.Yx(t.L,n,o.yr.Ce,{yl:{Oe:e.Oe,Ch:i}},t)}),e})},v.prototype.ELb=function(e,t){var i,n,r,a=new m;return this.aG.has(e.L)&&((n=(i=this.aG.get(e.L)).pR).L===e.L&&n.he===e.he&&(r=i.thc.key),this.uw.getStats().contents.some(function(t){return t.id===e.L})&&(a=i.fqa)),i=o.yr.Ce.si(u.kqa(e.he)),r=r||{N:e.L,config:i},n={N:e.L},this.ph.has(n)||this.ph.store(n,this.CLb(e,t,i)),t={key:r,jqc:!1,priority:e.priority,U7:s.M.Ja(null!=(i=null==(n=e.Fb)?void 0:n.ea)?i:0),ph:this.ph},this.aG.set(e.L,{thc:t,pR:e,fqa:a}),t},v.prototype.CLb=function(t,i,e){var n,r=this,a=t.L;return{get ga(){return i.Nv(a)},Mr:!1,events:new l.EventEmitter,i8:function(){},get xp(){return n=n||r.rJ(t.L,i,t.Fb).then(function(t){return{ja:t,Yi:t.$$&&!t.lF,config:e,KCa:{}}})},N:a,BDa:!1,equals:function(t){var e=i.Nv(a);return t&&t.N===a&&(!t.ga||!e||e===t.ga)}}},v.prototype.Yx=function(t,e,i,n,r){var a,o,s,u,c=this,h=e.Nv(t);(h||n)&&(o={N:t,Ch:null==(a=null==n?void 0:n.yl)?void 0:a.Ch,Oe:null==(a=null==n?void 0:n.yl)?void 0:a.Oe},this.ph.has(o)||(s=null!=h?h:this.ph.rm(null==(a=null==n?void 0:n.yl)?void 0:a.Ch).ga,this.ph.store(o,{i8:function(){},equals:function(t){return t&&t.N===o.N&&(s===t.ga||!t.ga||!s)},get xp(){return u=u||(r?Promise.resolve(r):c.rJ(t,e)).then(function(t){return{ja:t,Yi:t.$$&&!t.lF,config:i,KCa:{}}})},set xp(t){u=t},events:new l.EventEmitter,ga:s,N:o.N,Mr:!1,BDa:!1})))},v.prototype.Gib=function(t){this.e2=t},v.prototype.ajb=function(t){this.Gib(t),this.uw.$ib(this.e2)},v.prototype.Mgb=function(e){this.aG.has(e)&&(this.Gib(this.e2.filter(function(t){return t.key.N!==e})),this.aG.delete(e))},nt.Object.defineProperties(v.prototype,{uw:{configurable:!0,enumerable:!0,get(){return this.wA||(this.wA=this.a7b(),this.wA.uCa(this.Tza).Rib(new g.ELa).uib({EJ:this.config.Y6b}),this.wA.events.on("prefetchComplete",this.v4b)),this.wA}}}),i=v,i=t.__decorate([h.$(),t.__param(0,h.l(n.ob)),t.__param(1,h.l(r.Oc)),t.__param(2,h.l(f.$ja)),t.__param(3,h.l(c.cGa)),t.__param(4,h.l(d.dH))],i),e.aGa=i},function(t,e){function i(){}_esm(e),e.ELa=void 0,i.prototype.y4a=function(t,e){var i;return null!=(i=this.GQb(t,e))?i:this.JQb(t,e)},i.prototype.GQb=function(t,e){var i=this,n=e.ba;return t.find(function(t){return i.M8(n,null==(t=t.ba)?void 0:t.ba)})},i.prototype.JQb=function(t,e){var i=e.ba.yd,n=e.ba.O[i];return t.find(function(t){var e;return t=(e=null==(t=null==(e=t.ba)?void 0:e.ba)?void 0:t.yd)&&(null==t?void 0:t.O[e])||void 0,i===e&&n.N===(null==t?void 0:t.N)&&n.va===(null==t?void 0:t.va)})},i.prototype.M8=function(e,i){var n=this;return e===i||("object"!=typeof e||"object"!=typeof i?e===i:Object.keys(e).length===Object.keys(i).length&&Object.keys(e).every(function(t){return n.M8(e[t],i[t])}))},e.ELa=i},function(t,e,i){var n,r,a,o,s,u;function c(t,e,i){var n=this;this.Ig=e,e=i(),this.bh=new u({log:t.jb("CacheManager"),Da:{getTime:function(){return n.Ig.Tb().ka(o.pa)}},Promise:Promise,Qf:!1,fGb:e.g7b,eGb:e.e7b,OPb:e.ufb,NPb:e.f7b})}_esm(e),e.jHa=void 0,t=i(0),n=i(1),r=i(18),a=i(7),o=i(5),s=i(13),u=i(1297),c=t.__decorate([n.$(),t.__param(0,n.l(a.ob)),t.__param(1,n.l(r.$c)),t.__param(2,n.l(s.Oc))],c),e.jHa=c},function(t,e,i){var n;function s(){return Object.create(null)}function r(t){this.log=t.log,this.Da=t.Da,this.MF=s(),this.Promise=t.Promise,this.eB=t.eB,this.jEa=t.jEa,this.Qf=t.Qf||!1,this.cy=s(),this.tE=s(),this.zI=s(),this.DBb(t),t.tn&&(this.tn=t.tn)}function h(t){return void 0!==t}function a(t){for(var e,i=0,n=arguments.length;i<n;)if(h(e=arguments[i++]))return e}i(1298),n=i(1299),r.prototype.DBb=function(t){this.cy.manifest=a(t.OPb,n.cy.ja),this.cy.ldl=a(t.NPb,n.cy.tZ),this.cy.metadata=a(t.fpc,n.cy.Ec),this.tE.manifest=a(t.fGb,n.tE.ja),this.tE.ldl=a(t.eGb,n.tE.tZ),this.tE.metadata=a(t.Ync,n.tE.Ec),this.zI.manifest=a(t.Wnc,n.zI.ja),this.zI.ldl=a(t.Vnc,n.zI.tZ),this.zI.metadata=a(t.Xnc,n.zI.Ec)},r.prototype.LY=function(t,e){return this.qv(void 0!==t),this.qv(void 0!==e),!!this.lVa(t,e,void 0).value},r.prototype.lVa=function(t,e,i){var n={value:null,reason:"",log:""},r=this.MF[e];return i=i||"DEFAULTCAPS",void 0===r?(n.log="cache miss: no data exists for field:"+e,n.reason="unavailable"):void 0===r[t]?(n.log="cache miss: no data exists for movieId:"+t,n.reason="unavailable"):(r=r[t][i])&&r.value?this.Raa(e,r.creationTime)?(n.log="cache miss: "+e+" data expired for movieId:"+t,n.reason="expired",this.clearData(t,e,i,!1,"expired")):(n.log=this.Promise&&r.value instanceof this.Promise?"cache hit: "+e+" request in flight for movieId:"+t:"cache hit: "+e+" available for movieId:"+t,n.value=r.value):(n.log="cache miss: "+e+" data not available for movieId:"+t,n.reason="unavailable"),n},r.prototype.getData=function(t,e,i){return this.qv(void 0!==t),this.qv(void 0!==e),t=this.lVa(t,e,i),this.log.trace(t.log),t.value?this.Promise?t.value instanceof this.Promise?t.value:Promise.resolve(t.value):this.jEa?JSON.parse(this.jEa(t.value,"gzip",!1)):t.value:this.Promise?Promise.reject(t.reason):t.reason},r.prototype.setData=function(t,e,i,n,r){var a,o;return this.qv(void 0!==t),this.qv(void 0!==e),q=this.MF,a=r||"DEFAULTCAPS",q[e]||(q[e]=s(),Object.defineProperty(q[e],"numEntries",{configurable:!0,writable:!0,value:0}),Object.defineProperty(q[e],"size",{configurable:!0,writable:!0,value:0})),i=this.eB?this.eB(JSON.stringify(i),"gzip",!0):i,q=q[e],this.gzb(t,e,a,q),n={creationTime:(o=this).Da.getTime(),value:i,size:0,type:e,bra:n,MPb:setTimeout(function(){o.clearData(t,e,a,!1,"expired")},this.cy[e]+1)},q[t]=q[t]||s(),q[t][a]=q[t][a]||s(),q[t][a]=n,q.size+=0,q.numEntries++,this.tn&&this.tn.emit("addedCacheItem",n),n},r.prototype.gzb=function(t,i,n,r){var e,a,o,s,u,c=this,h=r.numEntries,f=this.tE[i],l=r[t]&&r[t][n];l&&l.value?(e=t,a="promise_or_expired"):f<=h&&(s=Number.POSITIVE_INFINITY,Object.keys(r).every(function(t){var e=r[t]&&r[t][n];return e&&e.value&&c.Raa(i,e.creationTime)&&(u=t),e&&e.value&&e.creationTime<s&&(s=e.creationTime,o=t),!0}),e=u||o,a="cache_full"),this.Qf&&this.log.debug("makespace ",{maxCount:f,currentCount:r.numEntries,field:i,movieId:t,movieToBeRemoved:e}),e&&(c.clearData(e,i,n,void 0,a),this.log.debug("removed from cache: ",e,i))},r.prototype.Mpa=function(t,e){var i,n=this;n.qv(void 0!==t),i=t+"",e.forEach(function(e){var t=n.MF[e];t&&Object.keys(t).forEach(function(t){t!=i&&n.clearData(t,e,void 0,void 0,"clear_all")})})},r.prototype.clearData=function(t,e,i,n,r){var a;this.qv(void 0!==t),this.qv(void 0!==e),i=i||"DEFAULTCAPS",(e=(a=this.MF[e])?a[t]:void 0)&&e[i]&&(a.size-=e[i].size,a.numEntries--,(a=e&&e[i])&&(clearTimeout(a.MPb),e[i]=void 0,!n&&a.bra&&a.bra()),this.tn&&(t={creationTime:a.creationTime,destroyFn:a.bra,size:a.size,type:a.type,value:a.value,reason:r,movieId:t},this.tn.emit("deletedCacheItem",t)))},r.prototype.flush=function(t){var e;this.qv(void 0!==t),(e=this.MF)[t]=s(),e[t].numEntries=0,e[t].size=0},r.prototype.$_a=function(){var i;this.qv(!1),d=this,(i=this.MF)[void 0]instanceof Object&&Object.keys(i[void 0]).forEach(function(t){var e=i[void 0][t].DEFAULTCAPS;d.Da.getTime()-e.creationTime>d.cy[void 0]&&d.clearData(t,void 0,"DEFAULTCAPS",void 0,"clean_up")})},r.prototype.Raa=function(t,e){return this.Da.getTime()-e>this.cy[t]},r.prototype.getStats=function(n,r,t){var a={},o=this,s=o.MF,u=h(n)&&h(r),c=t||"DEFAULTCAPS";return Object.keys(s).forEach(function(e){var t=Object.keys(s[e]),i=s[e];t.forEach(function(t){!(t=i&&i[t]&&i[t][c])||!h(t.value)||t.value instanceof o.Promise||(a[e]=1+(0|a[e]),o.Raa(t.type,t.creationTime)&&(a[e+"_expired"]=1+(0|a[e+"_expired"])),u&&t.creationTime>=n&&t.creationTime<r&&(a[e+"_delta"]=1+(0|a[e+"_delta"])))})}),a},r.prototype.getState=function(t){var a=[],o=this,e=o.MF,s=t||"DEFAULTCAPS";return Object.keys(e).forEach(function(n){var t=Object.keys(e[n]),r=e[n];t.forEach(function(t){var e,i=r&&r[t]&&r[t][s];i&&h(i.value)&&(e=o.Raa(i.type,i.creationTime)?"expired":i.value instanceof o.Promise?"loading":"cached",a.push({movieId:t,state:e,type:n,size:i.size}))})}),a},r.prototype.qv=function(t){if(!t&&(this.log.error("Debug Assert Failed",void 0),this.Qf))throw Error("Debug Assert Failed ")},t.exports=r},function(t){t.exports=function(t,e){var i,n;if(e&&(n=[],function t(e){if(e&&"object"==typeof e){if(-1!==n.indexOf(e))return 1;for(var i in n.push(e),e)if(e.hasOwnProperty(i)&&t(e[i]))return 1}}(t)))return-1;e=[],t=[t];for(var r=0;t.length;)if("boolean"==typeof(i=t.pop()))r+=4;else if("string"==typeof i)r+=2*i.length;else if("number"==typeof i)r+=8;else if("object"==typeof i&&-1===e.indexOf(i))for(var a in e.push(i),i)t.push(i[a]);return r}},function(t){t.exports={cy:{ja:12e5,tZ:9e5,Ec:12e5},tE:{ja:10,tZ:10,Ec:10},zI:{ja:10240,tZ:10240,Ec:10240}}},function(t,e,i){var n,r,a,o,s,u,c,h,f;_esm(e),e.La=void 0,t=i(1),n=i(204),r=i(1301),a=i(544),o=i(1302),s=i(545),u=i(1303),c=i(1304),h=i(546),f=i(1305),e.La=new t.Ad(function(t){t(n.Hha).to(r.AIa).la(),t(a.sNa).to(o.rNa).la(),t(s.yOa).to(u.xOa).la(),t(s.CNa).to(c.BNa).la(),t(h.ANa).to(f.zNa).la()})},function(t,e,i){var n,r,a,o;function s(i){function t(t,e){this.K=t,this.Vm=e,this.A9=!1,this.emit=o.prototype.emit,this.addListener=o.prototype.addListener,this.on=o.prototype.on,this.once=o.prototype.once,this.removeListener=o.prototype.removeListener,this.removeAllListeners=o.prototype.removeAllListeners,this.listeners=o.prototype.listeners,this.listenerCount=o.prototype.listenerCount,o.call(this),this.hg=i.jb("DownloadTrack")}t.prototype.Hr=function(){this.KV=void 0,this.emit("destroyed")},t.prototype.toString=function(){return"id:"+this.KV+" config: "+JSON.stringify(this.K)},t.prototype.toJSON=function(){return"Download Track id:"+this.KV+" config: "+JSON.stringify(this.K)},t.prototype.nQ=function(){return void 0!==this.KV},t.prototype.Yda=function(t){this.K.connections!==t.connections&&(this.K=t)},t.prototype.Xv=function(){return 1<this.K.connections},nt.Object.defineProperties(t.prototype,{trackId:{configurable:!0,enumerable:!0,get(){return this.KV}},Al:{configurable:!0,enumerable:!0,get(){return void 0===this.KV}},config:{configurable:!0,enumerable:!0,get(){return this.K}},pda:{configurable:!0,enumerable:!0,get(){return this.hg}},$J:{configurable:!0,enumerable:!0,get(){return this.Vm.$J}}}),this.$L=Object.assign(t,new a.BIa)}_esm(e),e.AIa=void 0,t=i(0),n=i(1),r=i(7),a=i(204),o=i(117).EventEmitter,s=t.__decorate([n.$(),t.__param(0,n.l(r.ob))],s),e.AIa=s},function(t,e,i){var a,n,o,r,s,u,c,h,f,l;function d(t,e,i,n,r,a){this.$N=t,this.pf=i,this.Eb=n,this.Ga=r,this.config=a,this.log=e.jb("MediaHttp")}_esm(e),e.rNa=void 0,t=i(0),a=i(205),n=i(99),o=i(4),r=i(7),s=i(1),u=i(71),c=i(27),h=i(18),f=i(5),i=i(13),d.prototype.zB=function(){return this.Ga.Tb().ka(f.pa)},d.prototype.odb=function(t,e){t.d3b({mediaRequest:t,timestamp:e})},d.prototype.Jdb=function(t){var e=t.mediaRequest.fC;e.readyState=a.Ac.Uc.aA,e.mdb(Object.assign(Object.assign({},t),{timestamp:t.connect?t.timestamp:this.zB(),connect:null!=(t=t.connect)&&t,mediaRequest:e,readyState:e.readyState}))},d.prototype.r_=function(t){this.odb(t.mediaRequest.fC,t.timestamp)},d.prototype.s_=function(t){var e=t.mediaRequest.fC,i=t.bytes;void 0!==e&&(e.readyState===a.Ac.Uc.bA&&this.Jdb(t),this.Eb.vo(i)&&(t.mediaRequest=e,t.timestamp=this.zB(),i>e.bytesReceived&&(t.newBytes=i-e.bytesReceived,t.bytesLoaded=i,e.h3b(t))))},d.prototype.Ln=function(t){var e=t.mediaRequest,i=t.errorcode,n=t.httpcode,r=a.Ac.i3;if(void 0!==e&&(void 0!==(e=e.fC)&&e.readyState!==a.Ac.Uc.eM))if(i===o.Y.qD)e.readyState=a.Ac.Uc.aT,t.mediaRequest=e,t.readyState=e.readyState,e.$2b(t);else{switch(e.readyState=a.Ac.Uc.eM,i){case o.Y.KT:n=r.cHa;break;case o.Y.jia:n=r.gia;break;case o.Y.HT:n=400<n&&n<500?r.iia:500<=n?r.d4:r.gia;break;case o.Y.IT:n=r.hia;break;case o.Y.GT:n=r.dHa;break;case o.Y.JT:case o.Y.VG:n=r.e4;break;case o.Y.BKa:n=r.AKa;break;case o.Y.xKa:n=r.iia;break;case o.Y.Nqb:n=r.hia;break;default:n=r.e4}t.mediaRequest=e,t.readyState=e.readyState,t.errorcode=n,t.nativecode=i,e.Cya(t)}},d.prototype.o_=function(t,e){var i,n=e.request.fC;if(n)if(e.ha){if(t.j&&n.readyState!==a.Ac.Uc.DONE){switch(n.readyState){case a.Ac.Uc.aT:return;case a.Ac.Uc.eM:break;case a.Ac.Uc.bA:this.Jdb({mediaRequest:e.request,responseHeaders:e.headers})}n.readyState=a.Ac.Uc.DONE,n.Cc||(i={mediaRequest:n,readyState:n.readyState,timestamp:this.zB(),cadmiumResponse:e},t.j.VDa+=1,n.yVb(),n.mZb()&&(t.j.tBa+=1,e.xm.hj=Math.ceil(n.Asa),e.xm.Fq=Math.ceil(n.JI),e.xm.ps=Math.floor(n.DF)),n.p8=i,n.ZQ(i))}}else n.readyState!==a.Ac.Uc.aT&&(t={mediaRequest:e.request,timestamp:this.zB(),errorcode:e.Ba,httpcode:e.El},this.Ln(t))},d.prototype.download=function(e,t){var i,n=this;return t=this.pf.download(e,t),e.fC&&(i=e.fC,-1<[a.Ac.Uc.OPENED,a.Ac.Uc.eM].indexOf(i.readyState)&&(i.readyState=a.Ac.Uc.bA,this.config().Rxa?t.dbc(function(t){n.r_(t)}):this.odb(i,this.zB()))),t.k7(function(t){n.o_(e,t)}),t.lbc(function(t){n.s_(t)}),t.Vac(function(t){n.Ln(t)}),t},l=d,l=t.__decorate([s.$(),t.__param(0,s.l(n.cT)),t.__param(1,s.l(r.ob)),t.__param(2,s.l(u.ax)),t.__param(3,s.l(c.Tg)),t.__param(4,s.l(h.$c)),t.__param(5,s.l(i.Oc))],l),e.rNa=l},function(t,e,i){var n,r,a;function o(t,e){this.pf=e,this.log=t.jb("OpenConnectSideChannel")}_esm(e),e.xOa=void 0,t=i(0),n=i(1),r=i(7),i=i(71),o.prototype.TX=function(t,e,i){t={url:t.url,aac:i},this.pf.dcc(t)},o.prototype.mI=function(t){try{t.fva()}catch(t){this.log.warn("exception aborting request")}},a=o,a=t.__decorate([n.$(),t.__param(0,n.l(r.ob)),t.__param(1,n.l(i.ax))],a),e.xOa=a},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,d;function p(t,e,i,n,r,a){this.Ga=t,this.Hv=e,this.config=i,this.pf=r,this.A1b=a,this.log=n.jb("MediaRequestDownloader")}_esm(e),e.BNa=void 0,t=i(0),n=i(1),r=i(7),a=i(71),o=i(544),s=i(91),u=i(205),c=i(18),h=i(5),f=i(39),l=i(13),d=i(49),p.prototype.TX=function(e,i,n){var r,t,a;r=this,e.kqc=!0,t=0===i.start&&-1===i.end,t={url:e.url,responseType:this.pf.T4.rGa,withCredentials:!1,KE:e.mediaType===d.u.P?"audio":"video",offset:t?void 0:i.start,length:t?void 0:e.Ag,track:{type:e.mediaType===d.u.P?s.pj.audio:s.pj.video},stream:{Wb:e.Pa,bitrate:e.bitrate},xc:e.oc,fC:e,Uea:n,vu:this.Hv.vu,ku:e.ku},a=this.zB(),t=this.A1b.download(t,function(t){t.ha&&e.readyState!==u.Ac.Uc.DONE&&e.readyState!==u.Ac.Uc.aT&&(e.readyState!==u.Ac.Uc.eM&&(e.readyState===u.Ac.Uc.bA?(e.readyState=u.Ac.Uc.aA,e.mdb({mediaRequest:e,readyState:e.readyState,timestamp:e.Cc?a:r.zB(),connect:!1,responseHeaders:t.headers})):e.readyState!==u.Ac.Uc.bA&&(e.readyState,u.Ac.Uc.aA)),e.readyState=u.Ac.Uc.DONE,t={mediaRequest:e,readyState:e.readyState,timestamp:r.zB(),cadmiumResponse:t,response:t.content},e.p8=t,e.ZQ(t))}),e.addEventListener(u.Ac.We.jH,function t(){e.removeEventListener(u.Ac.We.jH,t),e.FX?e.FX++:e.FX=1,e.FX>=r.config().gsa.length&&(e.FX=r.config().gsa.length-1),setTimeout(function(){r.TX(e,i,n)},r.config().gsa[e.FX])}),e.fva=t.abort},p.prototype.mI=function(t){try{t.fva()}catch(t){this.log.warn("exception aborting request")}},p.prototype.zB=function(){return this.Ga.Tb().ka(h.pa)},i=p,i=t.__decorate([n.$(),t.__param(0,n.l(c.$c)),t.__param(1,n.l(f.Bp)),t.__param(2,n.l(l.Oc)),t.__param(3,n.l(r.ob)),t.__param(4,n.l(a.ax)),t.__param(5,n.l(o.sNa))],i),e.BNa=i},function(t,e,i){var n,r,a,h,o,s,f,l,u,d;function c(i,n,r,a,o,s){function u(t,e){this.track=t,this.label=e,this.oi=l.Ac.Uc.UNSENT,this.bytesReceived=0,this.UK=[],this.requestId=s.hB().toString(),this.Eb=r,this.log=n.jb("MediaRequest"),this.config=i,this.Mb=new f.Bk,"notification"===this.label?this.config().sB&&(this.$J=a):this.$J=o}function c(t,e){this.requestId=s.hB().toString(),this.Eb=r,this.log=n.jb("MediaRequest"),this.config=i,this.Mb=new f.Bk,this.label=e,"notification"===this.label?this.config().sB&&(this.$J=a):this.$J=o,this.ZY=this.oO=this.qO=void 0,this.track=t,this.pO=this.url=this.responseType=void 0,this.oi=l.Ac.Uc.UNSENT,this.zi=this.tP=this.qg=this.status=void 0,this.Yt=this.bytesReceived=0,this.connect=this.Asa=this.JI=this.DF=this.Awa=this.Zf=this.zsa=this.loadTime=this.CN=void 0,this.UK=[],this.Al=!1}u.prototype.addEventListener=function(t,e,i){this.Mb.addListener.call(this,t,e,i)},u.prototype.removeEventListener=function(t,e){this.Mb.removeListener.call(this,t,e)},u.prototype.emit=function(t,e,i){this.Mb.Tc.call(this,t,e,i)},u.prototype.d3b=function(t){this.oi===l.Ac.Uc.OPENED&&(this.ZY=!0,this.loadTime=this.Zf=t.timestamp,this.oi=l.Ac.Uc.bA,this.emit(l.Ac.We.oOa,t))},u.prototype.mdb=function(t){var e;!this.zhb&&t.responseHeaders&&(this.zhb=t.responseHeaders),this.oi<l.Ac.Uc.aA&&(this.UK=[],e=t.timestamp-this.loadTime,!this.Cc&&0<e&&(this.connect=!0,this.UK.push(e)),!0===this.config().tXb?this.zsa=t.timestamp:this.zsa=this.Zf=t.timestamp,this.oi=l.Ac.Uc.aA,this.emit(l.Ac.We.nOa,t))},u.prototype.h3b=function(t){this.oi===l.Ac.Uc.aA&&(this.Awa=this.Zf=t.timestamp,t.newBytes=t.bytesLoaded-this.bytesReceived,this.bytesReceived=t.bytesLoaded,this.Eb.hh(this.Awa)&&this.emit(l.Ac.We.pOa,t))},u.prototype.ZQ=function(t){var e;-1<[l.Ac.Uc.bA,l.Ac.Uc.aA].indexOf(this.oi)&&(this.ZY=!1,this.Zf=t.timestamp,this.oi=l.Ac.Uc.DONE,e=this.bytesReceived,this.bytesReceived=t.cadmiumResponse.xm.PW,d.Ua(this.bytesReceived===this.Ag,"bytesReceived do not match expected totalBytes."),t.newBytes=this.Ag-e,this.Eb.hh(this.JI)&&(this.Zf=this.JI,0===t.newBytes&&(this.Awa=this.JI)),this.Eb.hh(this.DF)&&(this.loadTime=this.DF),this.CN=t.response,this.emit(l.Ac.We.fU,t),this.track.emit("mediaRequestComplete",{type:"mediaRequestComplete",U9b:t}))},u.prototype.$2b=function(t){this.ZY=!1,this.emit(l.Ac.We.Xtb,t)},u.prototype.Cya=function(t){this.Zf=t.timestamp,this.status=t.httpcode,this.qg=t.errorcode,this.tP=l.Ac.i3.name[this.qg],this.zi=t.nativecode,this.emit(l.Ac.We.jH,t),this.ZY=!1},u.prototype.open=function(t,e,i,n,r,a,o,s){return this.lz=!1,this.pO=e,this.ku=s,this.url=t,this.responseType=i,!!this.url&&(this.oi=l.Ac.Uc.OPENED,this.$J.TX(this,e,o),!0)},u.prototype.cd=function(){return-1!==[l.Ac.Uc.OPENED,l.Ac.Uc.bA,l.Ac.Uc.aA].indexOf(this.oi)&&this.abort(),!0},u.prototype.JHb=function(){this.CN=void 0,this.p8&&(this.p8.response=void 0,this.p8.cadmiumResponse.content=void 0),this.fva=void 0},u.prototype.rfa=function(t){return this.url=t,!0},u.prototype.abort=function(){return this.oi=l.Ac.Uc.aT,this.$J.mI(this),!0},u.prototype.pause=function(){},u.prototype.getResponseHeader=function(t){var e;return null!=(e=null==(e=this.zhb)?void 0:e[t.toLowerCase()])?e:null},u.prototype.getAllResponseHeaders=function(){return""},u.prototype.CR=function(){},u.prototype.Vh=function(){return this.requestId},u.prototype.toString=function(){var t={requestId:this.Vh(),segmentId:this.X,isHeader:this.Cc,ptsStart:this.xC,ptsOffset:this.yw,responseType:this.responseType,duration:this.sn,readystate:this.oi};return this.stream&&(t.bitrate=this.stream.bitrate),JSON.stringify(t)},u.prototype.toJSON=function(){return this.toString()},u.prototype.yVb=function(){var t,e;this.config().Kmb&&h.gx&&h.gx.getEntriesByType&&(!this.Eb.hh(this.DF)||!this.Eb.hh(this.JI)&&this.Eb.hh(this.url))&&(t=this.url.split("nflxvideo.net")[0].split("//").pop()+"*nflxvideo.net/range/"+this.qO+"-"+this.oO+"*",e=new RegExp(t),t=h.gx.getEntriesByType("resource").filter(function(t){return e.exec(t.name)})[0],this.Eb.hh(t)&&(0<t.startTime&&(this.DF=t.startTime,0<t.requestStart&&(this.DF=Math.max(this.DF,t.requestStart))),0<t.responseStart&&(this.Asa=t.responseStart),0<t.responseEnd&&(this.JI=t.responseEnd)))},u.prototype.mZb=function(){return this.Eb.hh(this.DF)&&this.Eb.hh(this.JI)&&this.Eb.hh(this.Asa)},nt.Object.defineProperties(u.prototype,{Ag:{configurable:!0,enumerable:!0,get(){return 0===this.pO.start&&-1===this.pO.end?Number(this.getResponseHeader("content-length"))||this.bytesReceived:this.pO.end-this.pO.start+1}},byteLength:{configurable:!0,enumerable:!0,get(){return this.oO-this.qO+1}},l8a:{configurable:!0,enumerable:!0,get(){return!!(this.response&&0<this.response.byteLength)}},Cc:{configurable:!0,enumerable:!0,get(){return!this.uF}},response:{configurable:!0,enumerable:!0,get(){return this.CN}},readyState:{configurable:!0,enumerable:!0,get(){return this.oi},set(){}}}),Object.getOwnPropertyNames(u.prototype).forEach(function(t){var e=Object.getOwnPropertyDescriptor(u.prototype,t);Object.defineProperty(c.prototype,t,e)}),this.Ks=Object.assign(c,l.Ac)}_esm(e),e.zNa=void 0,t=i(0),n=i(1),r=i(7),a=i(13),h=i(14),o=i(27),s=i(545),f=i(73),l=i(205),u=i(84),d=i(23),c=t.__decorate([n.$(),t.__param(0,n.l(a.Oc)),t.__param(1,n.l(r.ob)),t.__param(2,n.l(o.Tg)),t.__param(3,n.l(s.yOa)),t.__param(4,n.l(s.CNa)),t.__param(5,n.l(u.Rz))],c),e.zNa=c},function(t,e,i){var n,r;_esm(e),e.Hcb=void 0,t=i(1),n=i(354),r=i(1307),e.Hcb=new t.Ad(function(t){t(n.eja).to(r.RNa).la()})},function(t,e,i){var n,r,a,o,s;function u(t){return r.uf.call(this,t,"MseConfigImpl")||this}_esm(e),e.RNa=void 0,t=i(0),n=i(44),r=i(45),a=i(1),o=i(33),s=i(5),S(u,r.uf),nt.Object.defineProperties(u.prototype,{vcb:{configurable:!0,enumerable:!0,get(){return s.vc(5e3)}},Vdb:{configurable:!0,enumerable:!0,get(){return s.vc(1e3)}},Wdb:{configurable:!0,enumerable:!0,get(){return s.vc(1e3)}}}),i=u,t.__decorate([n.config(n.Ll,"minDecoderBufferMilliseconds")],i.prototype,"vcb",null),t.__decorate([n.config(n.Ll,"optimalDecoderBufferMilliseconds")],i.prototype,"Vdb",null),t.__decorate([n.config(n.Ll,"optimalDecoderBufferMillisecondsBranching")],i.prototype,"Wdb",null),i=t.__decorate([a.$(),t.__param(0,a.l(o.Sm))],i),e.RNa=i},function(t,e,i){var n,r,a,o,s,u,c,h,f,l;_esm(e),e.Eeb=void 0,t=i(1),n=i(547),r=i(1309),a=i(82),o=i(1311),s=i(550),u=i(1312),c=i(503),h=i(1313),f=i(298),l=i(1314),e.Eeb=new t.Ad(function(t){t(a.Zz).to(o.gPa).la(),t(n.iPa).to(r.hPa).la(),t(c.sPa).to(h.rPa),t(c.qPa).Ue(function(t){return function(){return t.zb.get(c.sPa)}}),t(s.OPa).to(u.NPa).la(),t(f.Fja).to(l.KPa).la()})},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,d,p,b,g,m,v,y;function w(t){this.config=t,this.bB=[]}function A(t,e,i){this.Ga=t,this.FS=e,this.context=i,this.startTime=this.Ga.Tb()}function _(t,e,i,n,r,a,o,s,u,c){this.Alb=e,this.json=i,this.Ga=n,this.Hv=r,this.BAa=a,this.zc=o,this.config=s,this.Mb=u,this.receiver=c,this.log=t.jb("Pbo"),s.Dgb&&(this.bB=new w(s)),this.FS=this.Alb()}_esm(e),e.hPa=void 0,t=i(0),n=i(1),r=i(5),a=i(548),o=i(7),s=i(38),u=i(18),c=i(39),h=i(146),f=i(46),l=i(549),d=i(82),p=i(113),b=i(16),g=i(66),m=i(1310),i=i(298),v={"shakti-":"akira"},_.prototype.send=function(t,e){var i=new A(this.Ga,this.FS,t);return this.bB&&this.bB.append(i),this.fCa(t,e,i)},_.prototype.fCa=function(a,o,s){var u=this;return new Promise(function(n,r){u.retry(a,o).then(function(t){var e,i;u.zac(t),i=(e=rt(u.Igc(t))).next().value,e=e.next().value,i&&(u.receiver.yAa({command:a.Eo,inputs:o,outputs:i}),u.bIb(s),n(t)),e&&(u.receiver.yAa({command:a.Eo,inputs:o,outputs:e}),u.n0a(s,e),r(e))}).catch(function(t){var e;u.receiver.yAa({command:a.Eo,inputs:o,outputs:t}),e=u.n0a(s,t),t.Sb&&(t.Sb=[t.Sb," ",e].join("")),r(t)})})},_.prototype.zac=function(t){(t=t.serverTime)&&this.Mb.Tc(b.sia.lib,r.vc(t))},_.prototype.Igc=function(t){var e=t.result;if("deviceCommand"in t){switch(t=t.deviceCommand,this.log.trace("Received device command '"+t+"'"),t){case"reset":e="RESET_DEVICE";break;case"reload":e="RELOAD_DEVICE";break;case"exit":e="EXIT_DEVICE";break;default:e="FAIL",this.log.error("Unhandled device command '"+t+"'")}return[,{UF:!0,code:e,detail:{message:"Server sent device action to '"+t+"' device"}}]}return e?[e,void 0]:t.code?(this.log.error("Response did not contain a result or an error but did contain an error code",t),[,{code:t.code,detail:{message:t.message}}]):(this.log.error("Response did not contain a result or an error",t),[,{code:"FAIL",detail:{message:"Response did contain a result or an error"}}])},_.prototype.HEb=function(n,r,t){var a=this;return this.dgc(r,n),this.FS=this.Alb(t),this.FS.send(r,t).then(function(t){return{retry:!1,result:m.H4.A5b(a.json,t.body)}}).catch(function(t){var e=m.H4.XTb(t),i=void 0!==e?Math.min(e,r.wBa):r.wBa;return a.Rea(r,t,n,i)?(e=a.uGb(t,n,i),a.log.warn("Method failed, retrying",Object.assign({Method:r.Eo,Attempt:n+1,WaitTime:e,MaxRetries:i},a.Rqa(t))),Promise.resolve({retry:!0,delay:e,error:t})):Promise.resolve({retry:!1,error:t})})},_.prototype.WRb=function(i){var n,t;return this.vna&&this.vna.X4b===i||(n="",t=i,Object.entries(v).find(function(t){var e=rt(t);if(t=e.next().value,e=e.next().value,0===i.indexOf(t))return n=e,i=i.slice(t.length),!0}),this.vna={i0a:n,oz:i,X4b:t}),this.vna},_.prototype.dgc=function(t,e){var i=t.url.searchParams;i.set(g.CD.HRa,(e+1).toString()),this.config.Dmb.includes(t.Dm)?t.headers[g.rvb.mka]=t.Dm:i.set(g.CD.mka,t.Dm),(t=this.WRb(null!=(e=this.config.oz)?e:"")).i0a&&(i.set(g.CD.wHa,t.i0a),t.oz&&i.set(g.CD.FTa,encodeURIComponent(t.oz)),null!=(e=this.Hv.pe)&&e.name&&i.set(g.CD.NGa,encodeURIComponent(e.name)),null!=e&&e.version&&i.set(g.CD.OGa,encodeURIComponent(e.version)),null!=(t=null==e?void 0:e.os)&&t.name&&i.set(g.CD.sOa,encodeURIComponent(e.os.name)),null!=(t=null==e?void 0:e.os)&&t.version&&i.set(g.CD.tOa,encodeURIComponent(e.os.version)))},_.prototype.retry=function(e,i,n){var r=this;return n=void 0===n?0:n,this.HEb(n++,e,i).then(function(t){if(t.retry)return r.wait(t.delay).then(function(){return r.retry(e,i,n)});if(t.error)throw t.error;if(void 0===t.result)throw{pboc:!1,code:"FAIL",detail:{message:"The response was undefined"}};return t.result})},_.prototype.Rea=function(t,e,i,n){var r=m.H4.nZb(e);return!!(r&&i<n)||(r?this.log.error("Method failed, retry limit exceeded, giving up",Object.assign({Method:t.Eo,Attempt:i+1,MaxRetries:n},this.Rqa(e))):this.log.error("Method failed with an error that is not retriable, giving up",Object.assign({Method:t.Eo},this.Rqa(e))),!1)},_.prototype.uGb=function(t,e,i){return t&&t.iG&&void 0!==t.iG.retryAfterSeconds?r.Fh(t.iG.retryAfterSeconds):(t=1e3*(0===e?1:e),e=1e3*Math.pow(2,Math.min(e,i)),r.vc(this.BAa.bgb(t,e)))},_.prototype.wait=function(e){var i=this;return new Promise(function(t){i.zc.Mj(e||r.Ka,t)})},_.prototype.Rqa=function(t){return l.e$a(t)?t:{message:t.message,subCode:t.Kc,extCode:t.Xd,mslCode:t.iC,data:t.data}},_.prototype.bIb=function(t){t.rS()},_.prototype.n0a=function(t,e){var i;if(t.Av(e),this.bB)try{return i=this.json.stringify(this.bB),this.log.error("PBO command history",i),i}catch(t){}return""},y=_,y=t.__decorate([n.$(),t.__param(0,n.l(o.ob)),t.__param(1,n.l(a.uTa)),t.__param(2,n.l(s.YG)),t.__param(3,n.l(u.$c)),t.__param(4,n.l(c.Bp)),t.__param(5,n.l(h.U4)),t.__param(6,n.l(f.Wj)),t.__param(7,n.l(d.Zz)),t.__param(8,n.l(p.Vha)),t.__param(9,n.l(i.Fja))],y),e.hPa=y,A.prototype.rS=function(){this.ha=!0,this.elapsedTime=this.Ga.Tb().Ea(this.startTime)},A.prototype.Av=function(t){this.ha=!1,this.elapsedTime=this.Ga.Tb().Ea(this.startTime),this.kdc=t.Kc||t.subCode,this.SPb=t.Xd||t.extCode},A.prototype.toString=function(){return JSON.stringify(this)},A.prototype.toJSON=function(){var t=Object.assign({success:this.ha,method:this.context.Eo,startTime:this.startTime.ka(r.pa),elapsedTime:this.elapsedTime?this.elapsedTime.ka(r.pa):"in progress"},this.FS.pqa());return this.ha?t:Object.assign(Object.assign(Object.assign({},t),this.FS.pqa()),{subcode:this.kdc,extcode:this.SPb})},w.prototype.append=function(t){this.bB.push(t),0<this.config.$ua&&this.bB.length>this.config.$ua&&this.bB.shift()},w.prototype.toJSON=function(){return this.bB}},function(t,e,i){var n;function r(){}_esm(e),e.H4=void 0,n=i(4),r.nZb=function(t){var e=t&&t.code,i=t&&(t.Ba||t.Kc);return t=t.Xd!==n.g4.XOa,i=!!i&&i>=n.Y.KT&&i<=n.Y.IT&&t,!("RETRY"!==e&&"FAIL"!==e)||i},r.XTb=function(t){var e=null==(e=null==t?void 0:t.iG)?void 0:e.maxRetries;return"number"==typeof e?e:"FAIL"===(null==t?void 0:t.code)?1:void 0},r.A5b=function(t,e){var i;if(e){try{i=t.parse(e)}catch(t){throw{UF:!0,code:"FAIL",message:"Unable to parse the response body",data:e}}if(i.error)throw i.error;if(i.result){if(Array.isArray(i.result)&&(t=i.result.find(function(t){return t.error})))throw t.error;return i}throw{UF:!0,code:"FAIL",message:"There is no result property on the response"}}throw{UF:!0,code:"FAIL",message:"There is no body property on the response"}},e.H4=r},function(t,e,i){var n,r,a,o,s,u,c;function h(t,e,i,n){return(t=r.uf.call(this,t,"PboConfigImpl")||this).config=e,t.WDb=i,t.wh=n,t}_esm(e),e.gPa=void 0,t=i(0),n=i(1),r=i(45),a=i(33),o=i(44),s=i(13),u=i(175),i=i(111),S(h,r.uf),nt.Object.defineProperties(h.prototype,{oz:{configurable:!0,enumerable:!0,get(){return this.config().Ir.oz||""}},Ofa:{configurable:!0,enumerable:!0,get(){return this.config().Ir.Ofa||""}},version:{configurable:!0,enumerable:!0,get(){return 2}},organization:{configurable:!0,enumerable:!0,get(){return"cadmium"}},languages:{configurable:!0,enumerable:!0,get(){return this.config().Ir.Zza}},c$a:{configurable:!0,enumerable:!0,get(){return!1}},nib:{configurable:!0,enumerable:!0,get(){return Object.assign({manifest:{service:"manifest",isPlayApiDirect:!0,version:"1"},licensedmanifest:{service:"licensedmanifest",isPlayApiDirect:!0,version:"1"},license:{service:"pbo_licenses",version:"^1.0.0"},events:{service:"event",isPlayApiDirect:!0,version:"1"},bind:{service:this.WDb.OZa,version:"^1.0.0"},ping:{service:"pbo_events",version:"^1.0.0"},config:{service:"pbo_config",version:"^1.0.0"}},this.oib)}},oib:{configurable:!0,enumerable:!0,get(){return{}}},Dgb:{configurable:!0,enumerable:!0,get(){return!1}},$ua:{configurable:!0,enumerable:!0,get(){return 10}},yYa:{configurable:!0,enumerable:!0,get(){return!1}},Vx:{configurable:!0,enumerable:!0,get(){return this.wh.Vx}},QE:{configurable:!0,enumerable:!0,get(){return this.wh.QE}},ML:{configurable:!0,enumerable:!0,get(){return this.wh.ML}},Mmb:{configurable:!0,enumerable:!0,get(){return!1}},y3a:{configurable:!0,enumerable:!0,get(){return!0}},Dmb:{configurable:!0,enumerable:!0,get(){return[]}},G3a:{configurable:!0,enumerable:!0,get(){return!0}},fP:{configurable:!0,enumerable:!0,get(){return this.wh.fP}},MI:{configurable:!0,enumerable:!0,get(){return this.wh.MI}}}),c=h,t.__decorate([o.config(o.string,"uiVersion")],c.prototype,"oz",null),t.__decorate([o.config(o.string,"uiPlatform")],c.prototype,"Ofa",null),t.__decorate([o.config(o.XC,"pboVersion")],c.prototype,"version",null),t.__decorate([o.config(o.string,"pboOrganization")],c.prototype,"organization",null),t.__decorate([o.config(o.sL,"pboLanguages")],c.prototype,"languages",null),t.__decorate([o.config(o.Cd,"hasLimitedPlaybackFunctionality")],c.prototype,"c$a",null),t.__decorate([o.config(o.object(),"pboCommands")],c.prototype,"nib",null),t.__decorate([o.config(o.object(),"pboCommandsOverride")],c.prototype,"oib",null),t.__decorate([o.config(o.Cd,"pboRecordHistory")],c.prototype,"Dgb",null),t.__decorate([o.config(o.XC,"pboHistorySize")],c.prototype,"$ua",null),t.__decorate([o.config(o.Cd,"pboAddXEsnHeader")],c.prototype,"yYa",null),t.__decorate([o.config(o.Cd,"combineManifestAndLicense")],c.prototype,"Vx",null),t.__decorate([o.config(o.Cd,"enableLicensedManifestForPrefetch")],c.prototype,"QE",null),t.__decorate([o.config(o.Cd,"useLdlForPrefetchLicensedManifest")],c.prototype,"ML",null),t.__decorate([o.config(o.Cd,"pboUseStudioManifest")],c.prototype,"Mmb",null),t.__decorate([o.config(o.Cd,"pboEnableLeanManifest")],c.prototype,"y3a",null),t.__decorate([o.config(o.Cd,"useHeaderForRequestNames")],c.prototype,"Dmb",null),t.__decorate([o.config(o.Cd,"pboEnableV2OptimizedManifest")],c.prototype,"G3a",null),t.__decorate([o.config(o.Cd,"pboEnableManifestPartialHydrationSupport")],c.prototype,"fP",null),t.__decorate([o.config(o.sL,"pboContentPlaygraphTypes")],c.prototype,"MI",null),c=t.__decorate([n.$(),t.__param(0,n.l(a.Sm)),t.__param(1,n.l(s.Oc)),t.__param(2,n.l(u.w2)),t.__param(3,n.l(i.lH))],c),e.gPa=c},function(t,e,i){var n,r;function a(t,e,i,n,r,a,o){this.version=t,this.url=e,this.id=i,this.languages=n,this.Fb=r,this.gOb=a,this.B2b=o}function o(t){this.Bi=t}_esm(e),e.NPa=void 0,t=i(0),n=i(1),i=i(82),o.prototype.create=function(t,e,i,n,r){return new a(this.Bi.version,e,t,this.Bi.languages,i,n,r)},r=o,r=t.__decorate([n.$(),t.__param(0,n.l(i.Zz))],r),e.NPa=r,a.prototype.toJSON=function(){return{version:this.version,url:this.url,id:this.id,languages:this.languages,params:this.Fb,echo:this.gOb}}},function(t,e,i){var n,r,a;function o(t,e){this.TI=e,this.log=t.jb("Pbo"),this.links={}}_esm(e),e.rPa=void 0,t=i(0),n=i(1),r=i(7),i=i(92),o.prototype.Jna=function(t){t&&(this.links=Object.assign(Object.assign({},this.links),t))},o.prototype.FP=function(t){return this.links[t]},a=o,a=t.__decorate([n.$(),t.__param(0,n.l(r.ob)),t.__param(1,n.l(i.Kz))],a),e.rPa=a},function(t,e,i){var n;function r(){}_esm(e),e.KPa=void 0,t=i(0),i=i(1),r.prototype.cbc=function(t){this.listener=t},r.prototype.yAa=function(t){var e;null!=(e=this.listener)&&e.call(this,t)},n=r,n=t.__decorate([i.$()],n),e.KPa=n},function(t,e,h){var i,n,r,a,o,s,u,c,f,l,d,p,b,g,m,v,y,w,A,_,E,k,S,T,D,L,B,U,F,q,I,H,K,G,O,V,Y,J,x,z,W,Q,X,R,P,Z,$,C,tt,j,et,N,it,nt,rt,at,ot,M;_esm(e),e.j=void 0,t=h(1),i=h(501),n=h(551),r=h(1316),a=h(553),o=h(1317),s=h(367),u=h(364),c=h(1318),f=h(1330),l=h(13),d=h(18),p=h(112),b=h(27),g=h(7),m=h(1331),v=h(233),y=h(1332),w=h(5),A=h(1333),_=h(1334),E=h(574),k=h(1335),S=h(113),T=h(554),D=h(1336),L=h(114),B=h(30),U=h(163),F=h(92),q=h(290),I=h(578),H=h(1337),K=h(83),G=h(39),O=h(555),V=h(1338),Y=h(299),J=h(26),x=h(576),z=h(1339),W=h(556),Q=h(1340),X=h(29),R=h(308),P=h(307),Z=h(1341),$=h(1342),C=h(1343),tt=h(1344),j=h(1345),et=h(1346),N=h(579),it=h(1347),nt=h(46),rt=h(1348),at=h(1349),ot=h(1350),M=h(1351),e.j=new t.Ad(function(t){t(I.Sja).to(H.pQa).la(),t(Y.Mga).Ue(function(t){var i=t.zb;return function(t,e){return new(h(1352).VFa)(t,e,i.get(p.Hz),i.get(S.b3))}}),t(i.vTa).Ue(function(t){var c=t.zb;return function(t,e,i,n,r,a,o,s,u){return new(h(1355).wTa)(c.get(A.BTa),t,e,i,n,r,a,o,s,u)}}),t(A.BTa).to(_.ATa).la(),t(n.zTa).to(r.yTa).la(),t(u.kQa).to(c.jQa).la(),t(C.lSa).to(tt.kSa).la(),t(O.GRa).to(V.FRa),t(O.ERa).ilb(O.GRa),t(s.uIa).Ue(function(t){var e=t.zb;return function(t){return new(h(1356).vIa)(e.get(S.tIa),e.get(p.Hz),e.get(d.$c),t)}}),t(a.wGa).Ue(function(){return function(t){return new o.xGa(t)}}),t(x.Vja).Ue(function(t){var e=t.zb;return function(t){return new z.vQa(t,e.get(g.ob),e.get(b.Tg))}}),t(P.pFa).Ue(function(t){var e=t.zb;return function(t){return new Z.qFa(t,e.get(g.ob).jb("AdImpressionLogger"),e.get(X.Lh),e.get(l.Oc),e.get(d.$c),e.get(R.Fga),e.get(R.Ega))}}),t(j.CFa).to(et.BFa),t(M.v2).to(rt.vFa),t(M.v2).to(ot.zFa),t(M.v2).to(at.DFa),t(W.tFa).Ue(function(t){var i=t.zb;return function(t,e){return new $.sFa(new Q.uFa(t,e,i.get(g.ob).jb("AdManager"),i.get(l.Oc),i.get(C.lSa),i.getAll(M.v2),i.get(P.pFa),i.get(j.CFa)))}}),t(m.bQa).Ue(function(t){var e=t.zb;return function(t){return new f.cQa(t,e.get(g.ob),e.get(l.Oc),e.get(b.Tg),e.get(p.Hz),e.get(x.Vja))}}),t(N.hMa).Ue(function(t){var i=t.zb;return function(t,e){return new it.iMa(i.get(nt.Wj),t,e)}}),t(v.Uja).Ue(function(t){var f=t.zb;return function(t,e,i,n,r,a,o,s,u,c,h){return new y.rQa(t,e,i,n,r,a,o,s,u,f.get(m.bQa),f.get(I.Sja),f.get(N.hMa),c,h)}}),t(E.dSa).Ue(function(n){return function(t){var e=n.zb.get(l.Oc),i=n.zb.get(g.ob);return new k.eSa(e,t,i)}}),t(T.mQa).Ue(function(o){return function(t){var e=o.zb.get(F.Kz),i=o.zb.get(L.EM),n=o.zb.get(B.ki),r=o.zb.get(U.tU),a=o.zb.get(J.Jz);return new D.nQa(t,e,i(w.Fh(1)),n,r,a)}}),t(q.cja).yG(function(t){return new(h(1357).NNa)(t.zb.get(K.bU),t.zb.get(G.Bp))}).la()})},function(t,e,i){var a,o,n,r,s,u;function c(t,e){this.Ig=t,this.config=e}_esm(e),e.yTa=void 0,t=i(0),a=i(16),o=i(552),n=i(18),r=i(1),s=i(5),i=i(13),c.prototype.hP=function(t){var e;t.I1={},!t.lQ()&&t.WC&&0<t.WC.length&&(t.VC=this.v6a(t),t.VC)&&((e=this.Ebc(t))()||(t.Gb.addListener(e),t.tf.addListener(e)))},c.prototype.Ebc=function(n){var r;return r=this,function t(){var e,i;return!(!n.tf.value||n.Gb.value===a.rb.fg||(i=(e=n.VC).getState())===o.ar.LOADING||(i!==o.ar.ZG&&e.retry?!(e=r.BVb(n))||(n.I1.offset=r.Ig.Tb().ka(s.pa),(n.VC=e).download(),0):(n.Gb.removeListener(t),n.tf.removeListener(t),1)))}},c.prototype.BVb=function(t){var e=this.config(),i=t.Am.Ct()<e.Vec,e=(t.tf.value?t.tf.value.bitrate:0)>e.Uec;return this.XUb(t,i&&e)},c.prototype.XUb=function(t,e){return e&&(e=this.v6a(t),this.z7a(t,e.size))?(t.I1.nhb="h",e):(e=this.UTb(t),this.z7a(t,e.size)?(t.I1.nhb="l",e):void 0)},c.prototype.z7a=function(t,e){var i=this.config(),n=Math.min(t.eW(),t.U1());return t.jFb.kGb(e)*(1+.01*i.ADb[2])<n*i.Yec},c.prototype.v6a=function(t){return t.WC[t.WC.length-1]},c.prototype.UTb=function(t){return t.WC[0]},u=c,u=t.__decorate([r.$(),t.__param(0,r.l(n.$c)),t.__param(1,r.l(i.Oc))],u),e.yTa=u},function(t,e){function i(t){this.j=t}_esm(e),e.xGa=void 0,i.prototype.mmb=function(){var t=this.j.La;null!=t&&t.OD&&(null!=(t=t.bc.get())&&t.ll&&(this.j.ll=t.ll.ta),null!=t&&t.Xa&&(this.j.Xa=t.Xa.ta))},i.prototype.So=function(){return-1===this.j.Xa&&this.mmb(),this.j.Xa},i.prototype.kGb=function(t){return-1!==this.j.ll&&-1!==this.j.Xa||this.mmb(),-1===this.j.ll||-1===this.j.Xa?Number.MAX_VALUE:this.j.ll+8*t/this.j.Xa},e.xGa=i},function(t,e,u){var i,n,r,a,o,s,c,h,f,l,d,p,b,g,m,v,y,w,A,_,E,k,S,T,I,O,x,R;function P(t,e,i,n,r,a,o,s,u,c,h,f,l,d,p,b,g,m,v,y,w,A,_,E,k,S){this.KB=t,this.kE=e,this.Ga=i,this.Da=n,this.kFb=r,this.MDa=a,this.JZ=o,this.uxa=s,this.zQ=u,this.zd=c,this.Ci=h,this.Kj=f,this.iO=l,this.N_=d,this.kk=p,this.cEa=b,this.xg=g,this.Nn=m,this.Le=v,this.Jza=y,this.R9b=w,this.noa=A,this.dK=_,this.tza=E,this.Dna=k,this.$N=S}_esm(e),e.jQa=void 0,t=u(0),i=u(84),n=u(1),r=u(114),a=u(34),o=u(18),s=u(29),c=u(553),h=u(234),f=u(502),l=u(519),d=u(119),p=u(147),b=u(166),g=u(99),m=u(492),v=u(233),y=u(551),w=u(50),A=u(30),_=u(554),E=u(83),k=u(555),S=u(299),T=u(290),I=u(116),O=u(535),x=u(556),P.prototype.create=function(t,e,i,n,r,a,o,s){return new(u(557).lQa)(t,e,a,o,n,r,this.KB,i,this.Ga,this.kE,this.Da,this.JZ,this.kFb,this.MDa,this.uxa,this.zQ,this.zd,this.Ci,this.Kj,this.iO,this.N_,this.kk,this.cEa,this.xg,this.Le,this.Jza,this.Nn,this.R9b(),this.noa,this.dK,this.tza,this.Dna,void 0,s)},R=P,R=t.__decorate([n.$(),t.__param(0,n.l(i.Rz)),t.__param(1,n.l(a.nj)),t.__param(2,n.l(o.$c)),t.__param(3,n.l(s.Lh)),t.__param(4,n.l(c.wGa)),t.__param(5,n.l(r.EM)),t.__param(6,n.l(h.Xia)),t.__param(7,n.l(f.cNa)),t.__param(8,n.l(l.UT)),t.__param(9,n.l(d.yH)),t.__param(10,n.l(p.lU)),t.__param(11,n.l(b.nH)),t.__param(12,n.l(m.EGa)),t.__param(13,n.l(v.Uja)),t.__param(14,n.l(I.dH)),t.__param(15,n.l(y.zTa)),t.__param(16,n.l(w.jo)),t.__param(17,n.l(E.bU)),t.__param(18,n.l(A.ki)),t.__param(19,n.l(_.mQa)),t.__param(20,n.l(k.ERa)),t.__param(21,n.l(S.Mga)),t.__param(22,n.l(T.cja)),t.__param(23,n.l(O.FPa)),t.__param(24,n.l(x.tFa)),t.__param(25,n.l(g.cT)),t.__param(25,n.optional())],R),e.jQa=R},function(t,e,i){var n,c,h,r,o,s,f,l,a,u,d,p,b,g,m,v,y,w,A,_,E,k,S,T;function I(){this.Dfa=[],this.Fec=50}function O(t){var e=this;this.j=t,this.unb=Promise.resolve(),this.fJa=bt.WebKitMediaKeys?"webkit":HTMLVideoElement.prototype.msSetMediaKeys?"ms":"",this.fI=[],this.ul=new r.Bk,this.TUa=0,this.J5=[],this.hg=f.aj(this.j,"MediaElementASE"),this.lXa=c.ix,this.Bla=!1,this.nb=new I,this.Vp={},this.CVa={},this.q$=this.L5(function(){var t;if(e.ca)return null!=(t=e.ca.webkitDecodedFrameCount)?t:0}),this.AB=this.L5(function(){var t;if(e.ca)return(t=e.$la())?t.totalVideoFrames:e.ca.webkitDecodedFrameCount}),this.oJ=this.L5(function(){var t;if(e.ca)return(t=e.$la())?t.droppedVideoFrames:e.ca.webkitDroppedFrameCount}),this.cY=this.L5(function(){var t;if(e.ca)return(t=e.$la())&&t.corruptedVideoFrames}),this.eWa=function(t){e.ul.Tc(y.Dk.mab,{N:t})},this.vm=f.Fa.get(v.cMa).create(h.config.wu,this,this.j),h.config.CF&&(this.unb=new Promise(function(t){e.lXa=t,e.j.addEventListener(_.ma.eh,t)})),this.hg.trace("Created Media Element"),this.addEventListener=this.ul.addListener,this.removeEventListener=this.ul.removeListener}function x(t){return t.preventDefault(),!1}_esm(e),e.pNa=void 0,n=i(304),c=i(17),h=i(20),r=i(73),o=i(62),s=i(40),f=i(9),l=i(4),a=i(23),u=i(93),d=i(348),p=i(25),b=i(305),g=i(14),m=i(15),v=i(563),y=i(306),w=i(539),A=i(5),_=i(16),E=i(60),k=i(48),S=i(49),T=!!(g.xD&&HTMLVideoElement&&URL&&HTMLVideoElement.prototype.play),O.prototype.eY=function(e){try{this.ca&&(this.TUa=this.ca.currentTime)}catch(t){this.hg.error("Exception while getting VIDEO.currentTime",t),e&&this.LU(l.Z.Nub,t)}return g.Dp(this.TUa*c.Fu)},O.prototype.seek=function(t){var e;if(a.Ua(!this.qr),this.dXa(),e=this.eY(!0),!h.config.QDb&&g.r4(e-t)<=this.VBa)this.hg.trace("Seek delta too small",{currentTime:e,seekTime:t,min:this.VBa}),this.nb.trace("smallseek",t);else{this.nb.trace("seek",t);try{this.hg.trace("Setting video elements currentTime",{From:u.Tj(e),To:u.Tj(t)}),this.qr={},this.ca.currentTime=t/c.Fu,this.ul.Tc(y.Dk.Gr)}catch(t){this.hg.error("Exception while setting VIDEO.currentTime",t),this.LU(l.Z.Oub,t)}}},O.prototype.A7a=function(){return!!this.qr},O.prototype.addSourceBuffer=function(e){var i;try{return i=new n.$ia(this.j,e,this.ig,this.hg),this.fI.push(i),e==c.WT&&i.Bsa&&i.Bsa.addListener(this.lXa),i}catch(t){i=p.ff(t),this.hg.error("Unable to add source buffer.",{error:i}),this.j.Md(l.Z.vja,{Ba:e===S.u.P?l.Y.Uia:l.Y.Via,Sb:i})}},O.prototype.n7=function(t){var e=this;return t.forEach(function(t){return e.addSourceBuffer(t)}),this.ul.Tc(y.Dk.Djb),!0},O.prototype.removeSourceBuffer=function(e){this.fI=this.fI.filter(function(t){return!s.x0a(e,t)}),this.ig.removeSourceBuffer(e)},O.prototype.endOfStream=function(){this.nb.trace("endofstream"),h.config.opa&&this.ig.endOfStream()},O.prototype.Hr=function(t){return this.fI=[],t&&t.rrc(),!0},O.prototype.V6a=function(){if(this.ig)return A.qfb(this.ig.duration)},O.prototype.iNb=function(){var t;return!this.Bla&&this.ca&&this.ca.readyState>=E.Ap.c4.HAVE_CURRENT_DATA&&(void 0===(t=this.ca.webkitDecodedFrameCount)||0<t||h.config.mhc)&&(this.Bla=!0),this.Bla},O.prototype.open=function(){var t,e,i,n,r,a=this;if(this.ca=(i=this.j.EG.value,r=f.Fa.get(w.kUa).RUb(),i=i.width/i.height*r.height,n=(r.width-i)/2,h.config.zbc?s.createElement("VIDEO","position:absolute;width:"+i+"px;height:"+r.height+"px;left:"+n+"px;top:0px"):s.createElement("VIDEO","position:absolute;width:100%;height:100%")),this.sourceBuffers=this.fI,this.j.addEventListener(_.ma.ljb,function(t){return a.tAb(t)}),T){this.j.PJ&&!h.config.Amb&&this.vm.Tca();try{this.ig=new g.xD}catch(t){return void this.LU(l.Z.Eub,t)}try{this.im=URL.createObjectURL(this.ig)}catch(t){return void this.LU(l.Z.Fub,t)}try{this.vm.$Cb(this.eWa),this.ig.addEventListener("sourceopen",function(t){return a.GWa(t)}),this.ig.addEventListener(this.fJa+"sourceopen",function(t){return a.GWa(t)}),this.ca.addEventListener("error",this.Vp.error=function(t){return a.nV(t)}),this.ca.addEventListener("seeking",this.Vp.seeking=function(){return a.sAb()}),this.ca.addEventListener("seeked",this.Vp.seeked=function(){return a.rAb()}),this.ca.addEventListener("timeupdate",this.Vp.timeupdate=function(){return a.uAb()}),this.ca.addEventListener("loadstart",this.Vp.loadstart=function(){return a.Fma()}),this.ca.addEventListener("volumechange",this.Vp.volumechange=function(t){return a.vAb(t)}),this.ca.addEventListener(this.vm.OF,this.Vp[this.vm.OF]=function(){a.hg.trace(a.vm.OF),a.pAb()}),(e=(t=this.j.mp).lastChild)?t.insertBefore(this.ca,e):t.appendChild(this.ca),h.config.F2a&&this.ca.addEventListener("contextmenu",x),this.ca.src=this.im,o.nf.addListener(o.Dt,this.CVa[o.Dt]=function(){return a.FWa()}),this.FWa()}catch(t){this.LU(l.Z.Gub,t)}}else this.D5(l.Z.OOa)},O.prototype.close=function(){var t;function e(){t.im&&(t.dXa(),o.nf.removeListener(o.Dt,t.CVa[o.Dt]),t.rxb())}(t=this).nb.trace("close"),this.ca.removeEventListener(this.vm.OF,this.Vp[this.vm.OF]),this.ca.removeEventListener("error",this.Vp.error),this.ca.removeEventListener("seeking",this.Vp.seeking),this.ca.removeEventListener("seeked",this.Vp.seeked),this.ca.removeEventListener("timeupdate",this.Vp.timeupdate),this.ca.removeEventListener("loadstart",this.Vp.loadstart),this.ca.removeEventListener("volumechange",this.Vp.volumechange),this.vm.v9b(this.eWa),h.config.wu?this.vm.BC().then(e):e(),this.vm.Zgb&&clearTimeout(this.vm.Zgb)},O.prototype.fF=function(){return this.nb.fF()},O.prototype.pAb=function(){h.config.Amb&&this.vm.Tca()},O.prototype.$la=function(){if(this.ca)return this.ca.getVideoPlaybackQuality&&this.ca.getVideoPlaybackQuality()||this.ca.videoPlaybackQuality||this.ca.playbackQuality},O.prototype.FBb=function(){var t=this.j.$i;return(t=t&&t.errorCode)&&0<=[l.Z.F4,l.Z.i4].indexOf(t)},O.prototype.rxb=function(){var t=!1;h.config.r7b&&this.FBb()&&(t=!0),h.config.THb&&!t&&(this.ca.removeAttribute("src"),this.ca.load&&this.ca.load()),URL.revokeObjectURL(this.im),h.config.F2a&&this.ca.removeEventListener("contextmenu",x),!t&&this.ca&&this.j.mp.removeChild(this.ca),this.ca=this.ig=void 0,this.im=""},O.prototype.FWa=function(){!0===g.Nh.hidden?this.J5.forEach(function(t){t.refresh(),t.Bcc()}):this.J5.forEach(function(t){t.refresh(),t.Rcc()})},O.prototype.L5=function(t){var e=f.Fa.get(d.vOa)(t);return this.J5.push(e),function(){return e.refresh(),e.NSb()}},O.prototype.LU=function(t,e){var i,n={Ba:l.Y.Om,Sb:p.ff(e)};try{(i=e.message.match(/(?:[x\W\s]|^)([0-9a-f]{8})(?:[x\W\s]|$)/i)[1].toUpperCase())&&8==i.length&&(n.Of=i)}catch(t){}this.j.Md(t,n)},O.prototype.dXa=function(){this.J5.forEach(function(t){t.refresh()})},O.prototype.nyb=function(){return this.ca&&this.ca.msGraphicsTrustStatus},O.prototype.D5=function(t,e){this.j.Md(t,e,void 0)},O.prototype.tAb=function(t){var e,i,n,r,a,o,s,u;if(this.ca){t=t.dga,(e=this.nyb())&&(t.ConstrictionActive=e.constrictionActive,t.Status=e.status);try{t.readyState=""+this.ca.readyState,t.currentTime=""+this.ca.currentTime,t.pbRate=""+this.ca.playbackRate}catch(t){}e=this.fI.length;for(;e--;)i="",(u=this.fI[e]).type==c.o4?i="audio":u.type==c.WT&&(i="video"),p.He(t,u.j$(),{prefix:i});if(this.ig&&(e=this.ig.duration)&&!isNaN(e)&&(t.duration=e.toFixed(4)),h.config.e0b)try{(r=(n=this.j.ef)&&n.Kb)&&(a=r.expiration,isNaN(a)||(t.exp=a),(o=r.keyStatuses.entries()).next&&(s=o.next().value)&&(t.keyStatus=s[1]))}catch(t){}}},O.prototype.GWa=function(t){this.GBb||(this.GBb=!0,this.ul.Tc(y.Dk.Fjb,t))},O.prototype.sAb=function(){this.nb.trace("seeking"),this.hg.trace("Video element event: seeking"),this.qr?this.qr.A3b=!0:(this.hg.error("unexpected seeking event"),h.config.jQb&&this.D5(l.Z.Tub,{Sb:{Trace:this.fF()}}))},O.prototype.rAb=function(){this.nb.trace("seeked"),this.hg.trace("Video element event: seeked"),this.qr?(a.Ua(this.qr.A3b),this.qr.z3b=!0,this.KXa()):(this.hg.error("unexpected seeked event"),h.config.iQb&&this.D5(l.Z.Sub,{Sb:{Trace:this.fF()}}))},O.prototype.uAb=function(){var t;this.nb.trace("timeupdate",null==(t=this.ca)?void 0:t.currentTime),this.qr&&(this.qr.C3b=!0,this.KXa()),this.ul.Tc(y.Dk.Gr)},O.prototype.Fma=function(){this.hg.trace("Video element event: loadstart")},O.prototype.vAb=function(t){this.hg.trace("Video element event:",t.type);try{this.j.volume.set(this.ca.volume),this.j.muted.set(this.ca.muted)}catch(t){this.hg.error("error updating volume",t)}},O.prototype.nV=function(t){var e,i=this.D5,n=l.Z.NOa,r=l.xJa,a=this.fF(),o=(u=t.target)&&u.error,s=t.errorCode,u=o&&o.code;m.rd(u)||(u=s&&s.code),s=o&&o.message,e=o&&o.msExtendedCode,m.rd(e)||(e=o&&o.systemCode),m.rd(e)||(e=t.systemCode),m.rd(e)||(e=k.Wta(s)),t=p.He({},{code:u,systemCode:e,trace:JSON.stringify(a)},{Xca:!0}),r={Ba:r(u),Sb:b.pxa(t)};try{s&&(r.SZ=s)}catch(t){}e=p.qk(e),m.Oa(e)&&(r.Of=f.Hoa(e,4)),i.call(this,n,r)},O.prototype.KXa=function(){this.qr&&this.qr.z3b&&this.qr.C3b&&(this.nb.trace("seekcomplete"),this.qr=void 0,this.ul.Tc(y.Dk.J0))},nt.Object.defineProperties(O.prototype,{VBa:{configurable:!0,enumerable:!0,get(){return h.config.rcc}}}),e.pNa=O,I.prototype.trace=function(t,e){this.Dfa.push([t,e]),this.Dfa.length>this.Fec&&this.Dfa.shift()},I.prototype.fF=function(){return this.Dfa}},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,d;function p(t){var i=this;this.j=t,this.ADa=this.Lcb=0,this.eh=this.Bm=!1,this.qea=0,this.saa=new Set,this.W0=!0,this.Im=function(){var t,e;i.mea(),i.OI&&(i.log.info("Deactivating",i.OI),i.QC.TLb(i.Qe())),i.j.uj.set(null),i.BL.Hib(void 0),i.e0a(),(t=(t=i.j.Vb.value)&&t.Vr()&&!t.uq()?null:t)&&i.j.Gb.value!==l.rb.fg&&(e=i.Qe(),i.QC.ACb(e,t)),t?(i.log.info("Activating",t),i.j.bo.set(t.getState()===n.uH.ED.ZG?l.Tf.Me:l.Tf.ed),i.Bm||i.j.Se("tt_start"),t.yaa().then(i.PN).catch(i.PN)):i.j.bo.set(l.Tf.Me),i.OI=t,i.ZC()},this.sync=function(){i.Bm&&(i.BL.start(),i.j.Gb.value!==l.rb.Gc&&i.BL.stop())},this.ZC=function(){var t;i.W0&&i.j.state.value===l.dc.Me&&i.j.Gb.value!==l.rb.fg&&(i.di?t=i.BL.YRb():i.j.Vb.value&&(t=p.Ncc[i.j.Vb.value.getState()])),t&&f.rd(t.startTime)&&i.j.Iw.value!==t&&(i.Lcb++,i.ADa+=i.BL.W6a()-t.startTime,i.GZa=Math.ceil(i.ADa/(i.Lcb+0))),i.j.Iw.set(t)},this.Qe=function(){var t=i.j.Xta();return i.OI&&i.OI.Rv&&(t+=i.OI.Rv),t},this.E4b=function(t){i.saa.add(t),i.W0&&(i.fireEvent(p.njb,t),t&&t.id&&i.QC.rmb(t.id)),i.log.trace("showsubtitle",i.L$(t))},this.z4b=function(t){i.saa.delete(t)&&i.W0&&(i.fireEvent(p.Wgb,t),i.log.trace("removesubtitle",i.L$(t)))},this.OWb=function(){i.saa.forEach(function(t){i.fireEvent(p.Wgb,t),i.log.trace("hide subtitle",i.L$(t))})},this.v$b=function(){i.saa.forEach(function(t){i.fireEvent(p.njb,t),i.log.trace("resume subtitle",i.L$(t))})},this.mk=function(){i.log.warn("imagesubs buffer underflow",i.j.Vb.value.Bh),i.j.bo.set(l.Tf.ed)},this.Y3b=function(){i.log.info("imagesubs buffering complete",i.j.Vb.value.Bh),i.j.bo.set(l.Tf.Me)},this.Nca=function(){i.Bm&&i.di&&i.di.Ow(i.Qe())},this.Pdb=function(t){i.Bm&&i.di&&(i.di.pause(),i.di.mG(t.Uk))},this.RF=function(){i.Bm&&i.di&&i.di.Ufb()},this.Mdb=function(t){i.di&&i.di.lj(t.Sh,t.WQ)},this.Sdb=function(t){i.di&&i.di.Rj(t.X,t.egc)},this.s4b=function(){i.Bm=!0,h.pg(function(){var t;null!=(t=i.OI)&&t.Il?null!=(t=i.di)&&t.Ow(i.Qe()):i.sync(),i.ZC()})},this.p4b=function(){i.e0a(),i.BL.stop(),i.ZC(),i.eh=!0,i.mea()},this.$ya=function(t){(t=t.newValue)&&f.isArray(t.blocks)&&i.QC.rmb.apply(i.QC,J(t.blocks.map(function(t){return t.id})))},this.w4b=function(t){i.Zfc(t.newValue,t.oldValue),i.sync(),i.ZC()},this.PN=function(t){var e;if(!i.eh){if((e=t.track)===i.j.Vb.value)try{i.di=e.xDa,e.Il?i.yCb(t):i.zCb(t)}catch(t){return void i.log.error("Error activating track:",t,e)}i.Bm||i.j.Se(t.ha?"tt_comp":"tt_err"),t.ha?(o.config.Mhb?setTimeout(function(){i.j.bo.set(l.Tf.Me)},o.config.Mhb):i.j.bo.set(l.Tf.Me),e.Il||i.ZC()):t.aborted?i.log.warn("aborted timed text track loading"):o.config.hQb?i.j.Md(c.Z.ysb,{Sb:t.track?t.track.Bh:{}}):(i.log.error("ignore subtitle initialization error",t),i.j.bo.set(l.Tf.Me))}},this.Mb=new a.Bk,this.QC=new u.VSa(s.aj(t,"SubtitleTracker"),o.config.$Ob),this.log=s.aj(t,"TimedTextManager"),this.BL=new r.oTa(this.Qe,this.ZC),this.j.Vb.addListener(this.Im),o.config.N6b?(this.j.addEventListener(l.ma.Bm,this.s4b),this.Im()):(this.j.bo.set(l.Tf.Me),this.j.addEventListener(l.ma.Bm,function(){i.Bm=!0,i.Im()})),this.j.Gb.addListener(this.w4b),this.j.addEventListener(l.ma.NDa,this.sync),this.j.Iw.addListener(this.$ya),this.j.addEventListener(l.ma.eh,this.p4b)}_esm(e),e.mTa=void 0,n=i(287),r=i(564),a=i(73),o=i(20),s=i(9),u=i(1321),c=i(4),h=i(58),f=i(15),l=i(16),d=i(1322),p.prototype.ccc=function(){this.W0=!0,this.v$b(),this.ZC()},p.prototype.PWb=function(){this.W0=!1,this.OWb(),this.ZC()},p.prototype.addEventListener=function(t,e,i){this.Mb.addListener(t,e,i)},p.prototype.removeEventListener=function(t,e){this.Mb.removeListener(t,e)},p.prototype.fireEvent=function(t,e,i){this.Mb.Tc(t,e,i)},p.prototype.Fna=function(t,e,i){var n=this,r=d.kTa.GKb(this.j,t,e,i);this.B9a(this.j.Gi,r),this.j.wj.forEach(function(t){n.B9a(t.Gi,r)}),this.j.Vb.set(r),this.j.fireEvent(l.ma.Kw)},p.prototype.S6b=function(t){this.lBa(t)?t.yaa().then(function(){}):Promise.resolve()},p.prototype.rVb=function(t){return this.QC.YUb(t)},p.prototype.rua=function(t){return this.QC.rua(t)},p.prototype.BY=function(){var t=this.j.z1,e=o.config.dlb.characterSize,e={size:o.config.RDa.characterSize||e};return t&&(e.visibility=t.xua(),e.vW=t.vua(),e.Qt=t.wua()),e},p.prototype.vbc=function(t){o.config.RDa.characterSize=t,t=this.j.Vb.value,this.lBa(t)&&!t.Il&&t.yaa().then(this.PN).catch(this.PN)},p.prototype.Zfc=function(t,e){t===l.rb.Gc||t==l.rb.Ug?e===l.rb.Gc||e===l.rb.Ug||(e=this.j.Vb.value)&&!this.lBa(e)||this.QC.Scb(this.Qe(),e||void 0,"presentingstate:"+t):t!==l.rb.fg&&t!==l.rb.Gs||this.QC.Hra(null!=(e=this.Qe())?e:void 0,"presentingstate:"+t)},p.prototype.mea=function(){this.qea=0,clearTimeout(this.y$b)},p.prototype.e0a=function(){var t;this.di&&this.di.stop(),null!=(t=this.OI)&&t.Il&&this.Yab("removeListener"),this.di=void 0},p.prototype.Yab=function(t){this.di&&(this.di[t]("showsubtitle",this.E4b),this.di[t]("removesubtitle",this.z4b),this.di[t]("underflow",this.mk),this.di[t]("bufferingComplete",this.Y3b),"addListener"===t?(this.j.addEventListener(l.ma.Gr,this.Nca),this.j.addEventListener(l.ma.kl,this.Pdb),this.j.addEventListener(l.ma.ZK,this.RF),this.j.addEventListener(l.ma.Bca,this.Mdb),this.j.addEventListener(l.ma.vEa,this.Sdb)):(this.j.removeEventListener(l.ma.Gr,this.Nca),this.j.removeEventListener(l.ma.kl,this.Pdb),this.j.removeEventListener(l.ma.ZK,this.RF),this.j.removeEventListener(l.ma.Bca,this.Mdb),this.j.removeEventListener(l.ma.vEa,this.Sdb)))},p.prototype.L$=function(t){return{currentPts:this.Qe(),displayTime:t.displayTime,duration:t.duration,id:t.id,originX:t.originX,originY:t.originY,sizeX:t.sizeX,sizeY:t.sizeY,rootContainerExtentX:t.rootContainerExtentX,rootContainerExtentY:t.rootContainerExtentY}},p.prototype.yCb=function(t){var e=this,i=t.track;if(!i||!i.Il)throw Error("Not an image base subtitle");t.ha?(this.mea(),this.Yab("addListener"),this.log.info("Activated",i),this.j.uj.set(i),this.Bm?h.pg(function(){e.di.Ow(e.Qe())}):this.di.pause()):this.Chb(i,t)},p.prototype.zCb=function(t){var e=t.track,i=t.ha;if(!e||e.Il)throw Error("Not a valid text track");i?(this.mea(),this.BL.Hib(this.di),this.log.info("Activated",e),this.j.uj.set(e)):this.Chb(e,c.Oz(t)),this.ZC()},p.prototype.Chb=function(t,e){var i=this,n=this.qea<o.config.l1b;n&&(this.y$b=setTimeout(function(){i.qea++,t.yaa().then(i.PN).catch(i.PN)},o.config.pec)),this.log.error("Failed to activate"+(null!=t&&t.Il?" img subtitle":""),{retry:n},e,t)},p.prototype.lBa=function(t){return!(!t||t.Vr()&&!t.uq())},p.prototype.B9a=function(t,e){var i=t.findIndex(function(t){return t.cc>=e.cc});t.splice(i=-1===i?0:i,0,e)},(e.mTa=p).Ncc=((t={})[n.uH.ED.LOADING]={BZ:!0},t[n.uH.ED.OT]={Av:!0},t),p.njb="showsubtitle",p.Wgb="removesubtitle"},function(t,e,i){var a;function o(t,e,i){this.start=t,this.track=e,this.uL=Array.isArray(i)?i:[]}function n(t,e){this.log=t,this.$C=e,this.CAa=[],this.orphans=[]}_esm(e),e.VSa=void 0,a=i(23),n.prototype.ACb=function(t,e){this.Scb(t,e,"activating")},n.prototype.TLb=function(t){this.Hra(t,"de-activating")},n.prototype.Scb=function(t,e,i){var n;this.Bl&&this.Hra(t,"close current for new"),n=[],this.orphans.length&&(n.push.apply(n,J(this.orphans)),this.orphans=[]),this.Bl=new o(t,e,n),this.$C&&this.log.trace("new range: "+i,this.Bl)},n.prototype.Hra=function(t,e){this.Bl&&(this.Bl.end=t,this.CAa.push(this.Bl),this.$C&&this.log.trace("end range: "+e,this.Bl||{}),this.Bl=void 0)},n.prototype.rmb=function(t){for(var e=[],i=0;i<arguments.length;++i)e[+i]=arguments[i];this.Bl?this.Bl.uL.push.apply(this.Bl.uL,J(e)):this.orphans.push.apply(this.orphans,J(e))},n.prototype.rua=function(t){var e,i=this.CAa.slice(0);return this.Bl&&void 0!==t&&((e=new o(this.Bl.start,this.Bl.track,this.Bl.uL)).end=t,i.push(e)),t=i.reduce(function(t,e){var i,n,r;return e.track?(i=e.track.Wb,null==(n=e.track.Lv(e.start,e.end))||(r=new Set(e.uL),t[i]?((e=t[i]).expected+=n,e.missed+=n-r.size):t[i]={dlid:i,bcp47:e.track.Bf,profile:e.track.profile,expected:n,missed:n-r.size,startPts:null!=(i=e.track.jVb())?i:0}),t):t},{}),t=Object.values(t),this.$C&&this.log.trace("subtitleqoe:",JSON.stringify(t,null,"\t")),t},n.prototype.YUb=function(t){var e,i=this.CAa.slice(0),n=0,r=0;return this.Bl&&void 0!==t&&((e=new o(this.Bl.start,this.Bl.track,this.Bl.uL)).end=t,i.push(e)),i.forEach(function(t){var e,i;if(t.track){if(t.end<t.start)return a.Ua(!1,"negative range"),void(t.jG=0);e=new Set(t.uL),i=t.track.Lv(t.start,t.end),t.x9=i,t.jG=null==i?0:0===i?100:100*e.size/i}else t.jG=100;e=t.end-t.start,n+=e,r+=t.jG*e}),e=n?Math.round(r/n):100,this.log.trace("qoe score "+e+", at pts: "+t),this.$C&&(t=i.map(function(t){return{start:t.start,"end  ":t.end,duration:t.end-t.start,score:Math.round(t.jG),lang:t.track?t.track.Bf:"none","actual  ":t.uL.join(" "),expected:t.x9}}),this.log.trace("score for each range: ",JSON.stringify(t,function(t,e){return e}," "))),e},e.VSa=n},function(t,e,i){var n,o,s,u,c,h,a,f;function l(t,e,i,n,r,a){return(t=c.uH.call(this,e,t,t,r,!0,{Xf:"",WF:"content"},"1",{0:i},[{id:0,name:"custom"}],"xx",n||t,h.$q.wM,void 0,void 0,"primary",null!=(r=null==a?void 0:a.profile)?r:"dfxp-ls-sdh",null!=(n=null==a?void 0:a.midx)?n:{},!1,!1,null==a?void 0:a.isLanguageLeftToRight)||this).j=e,t.url=i,t.options=a,t.vu=null==a?void 0:a.useRangeHeader,t}_esm(e),e.kTa=void 0,t=i(61),n=i(20),o=i(62),s=i(9),u=i(40),c=i(287),h=i(127),a=i(107),i(202),f=i(16),t.hQa(t.Oja,function(r){var a;function t(t){var n;t.shiftKey&&"t"==t.key&&((n=u.createElement("INPUT",void 0,void 0,{type:"file"})).addEventListener("change",function(){var t,e,i=n.files[0];i&&(t=i.name,a.info("Loading file",{FileName:t}),(e=new FileReader).readAsText(i),e.addEventListener("load",function(){return r.qp.Fna("nourl",t,{content:e.result})}))}),n.click())}a=s.aj(r,"TimedTextCustomTrack"),n.config.Kqa&&(a.info("Loading url",{Url:n.config.Kqa}),r.qp.Fna(n.config.Kqa,"custom")),o.nf.addListener(o.jF,t),r.addEventListener(f.ma.eh,function(){o.nf.removeListener(o.jF,t)})}),S(l,c.uH),l.GKb=function(t,e,i,n){var r="custom"+l.nYb++;return new l(r,t,e,i,-1,n)},l.prototype.Y2a=function(){var r=this;return new Promise(function(e,i){var t,n;null!=(t=r.options)&&t.content?e(r.options.content):r.url&&(n={responseType:a.bva,url:r.url,track:r,xc:void 0,KE:"tt-"+r.Bf,ku:"unknown"},r.j.oaa.download(n,function(t){t.ha?e(t.content):(t.reason="downloadfailed",t.url=n.url,t.track=r,i(t))}))})},(e.kTa=l).nYb=0},function(t,e,i){var r,a,o,n,s,u;function c(t){var e,i,n=this;this.j=t,this.a4b=function(){var t;o.nf.removeListener(o.V$,n.Rdb),(t=n.Rr.Qo())&&t.parentNode&&t.parentNode.removeChild(t)},this.$ya=function(t){n.Rr.Uac(t.newValue)},this.H4b=function(t){n.Rr.abc(t.newValue?t.newValue.Waa:void 0),n.Rr.Efc(n.m6a(t.newValue))},this.Rdb=function(){n.Rr.GR()},e=t.Vb.value?t.Vb.value.Waa:void 0,i=this.m6a(t.Vb.value),this.Rr=new s.lTa(i,e),e=t.EG.value,a.Ua(.1<e.width/e.height),this.Rr.Jac(e.width/e.height),t.mp.appendChild(this.Rr.Qo()),t.Iw.addListener(this.$ya),t.Vb.addListener(this.H4b),t.addEventListener(u.ma.eh,this.a4b,r.uM),o.nf.addListener(o.V$,this.Rdb)}_esm(e),e.nTa=void 0,r=i(17),a=i(23),o=i(62),n=i(20),s=i(569),u=i(16),c.prototype.CCa=function(t){this.Rr.CCa(t)},c.prototype.xua=function(){return this.Rr.xua()},c.prototype.ACa=function(t){this.Rr.ACa(t)},c.prototype.vua=function(){return this.Rr.vua()},c.prototype.BCa=function(t){this.Rr.BCa(t)},c.prototype.wua=function(){return this.Rr.wua()},c.prototype.m6a=function(t){var i;return t&&n.config.uba&&0<=n.config.uba.indexOf(t.Bf)?(i=Object.assign({},n.config.yfa),Object.entries(i).forEach(function(t){var e=rt(t);t=e.next().value,e=e.next().value,i[t]=e.replace(/font-weight:bolder/g,"font-weight:normal")}),i):n.config.yfa},e.nTa=c},function(t,e){_esm(e),e.Ofb=void 0,e.Ofb=function(t){var e=!1,i=!1;return function(){if(e)i=!0;else for(i=!0;i;)e=!(i=!1),t(),e=!1}}},function(t,e,i){var f,r,n,a,l,o,d,s,u,c,h,p,b,g;function m(t,e){this.j=t,this.Fm=e,this.Idc=!1,this.log=n.aj(this.j,"MediaAppendManager"),this.Yb=this.j.Yb,this.ca=this.Yb.ca,this.b2=this.mW=!1,this.audio={type:r.pj.audio,$x:[],ym:[],iR:!1},this.video={type:r.pj.video,$x:[],ym:[],iR:!1},this.FL=((t={})[g.u.J]=this.video,t[g.u.P]=this.audio,t),this.closed=!1,this.$B=f.config.$B,this.ica=f.config.ica,this.SF=this.j.kb.$h?f.config.eza:f.config.SF,this.HZa=!0,this.qc=n.Fa.get("Base64EncoderSymbol"),this.Csa=!1,this.xza=[],l.Ua(this.$B>this.ica,"bad config"),l.Ua(this.$B>this.SF,"bad config")}_esm(e),e.gNa=void 0,f=i(20),r=i(91),n=i(9),a=i(4),l=i(23),o=i(25),d=i(17),s=i(16),u=i(177),c=i(5),h=i(60),p=i(42),b=i(1326),g=i(49),m.prototype.i$=function(){var t,e;function i(t,e){return n(t,e.Zba)}function n(t,e){var i,n=!!e.response,r=e.response;return e.Cc?t+(r.byteLength||0):(e=(null!=(i=null==e?void 0:e.oO)?i:0)-(null!=(i=null==e?void 0:e.qO)?i:0),(n?r.byteLength:e)+t)}return t=this.FL[g.u.J],e=this.FL[g.u.P],{videoToAppend:t.ym.reduce(n,0),videoInBuffer:t.$x.reduce(i,0),audioToAppend:e.ym.reduce(n,0),audioInBuffer:e.$x.reduce(i,0)}},m.prototype.q3b=function(){this.audio.Oj&&!this.audio.Oj.vi()&&this.audio.Oj.UYa(new Uint8Array([0,0,0,8,102,114,101,101]))},m.prototype.nbc=function(){this.audio.HCa=!0,this.video.HCa=!0},m.prototype.tbc=function(t){t===g.u.P?this.mW=!0:t===g.u.J&&(this.b2=!0)},m.prototype.vi=function(){var t;return!(null==(t=this.audio.Oj)||!t.vi())||!(null==(t=this.video.Oj)||!t.vi())},m.prototype.Mea=function(t){var e;null!=(e=this.audio.Oj)&&e.Mea(t),null!=(e=this.video.Oj)&&e.Mea(t)},m.prototype.ZDb=function(t){var e;t.mediaType===g.u.P?this.mW=!1:t.mediaType===g.u.J&&(this.b2=!1),(e=this.FL[t.mediaType])?e.ym.push(t):l.Ua(!1)},m.prototype.YDb=function(t,e,i){var n=this;if(e=this.i_a(t.mediaType,e,i),!this.Csa){if(t.mediaType!==g.u.J)return void this.xza.push(e);this.j7b(t),this.Csa=!0,this.xza.forEach(function(t){return n.hoa(t)}),this.xza=[]}this.hoa(e)},m.prototype.hoa=function(t){var e=this.FL[t.mediaType];e?e.ym.push(t):l.Ua(!1)},m.prototype.i_a=function(t,e,i){return{mediaType:t,uF:!1,response:e,Vh:function(){return"header"},get Cc(){return!this.uF},profile:i.profile}},m.prototype.j7b=function(t){l.Ua(!!t.Ljb,"startOfSegment properties need to be set before first header is appended"),this.Csa||!f.config.jRb||!this.j.aaa()&&!this.j.Y$()||t.Ljb.R9a||(this.log.trace("Force appending encrypted stream header first to allow mixed clear & encrypted content"),t=this.qc.decode(d.qGa),this.hoa(this.i_a(g.u.J,t,{profile:p.I.QG})))},m.prototype.rbc=function(e){var t=this.FL[e.type];if(t)try{t.Oj=e}catch(t){this.Md(a.Z.vja,{Ba:u.t$(e.type),Sb:o.ff(t)})}},m.prototype.close=function(){this.ca=this.Yb=void 0,this.closed=!0},m.prototype.Md=function(t,e,i){this.closed||this.j.Md(t,e,i)},m.prototype.Tqa=function(t){return this.P2a(this.audio,t,this.I8())&&this.P2a(this.video,t,this.I8())},m.prototype.I8=function(){return this.j.Gb.value===s.rb.fg?this.SF:this.ica},m.prototype.uec=function(){var t=this.video.ym.filter(function(t){return!t.Cc}).reduce(function(t,e){return t+e.sn},0),e=this.audio.ym.filter(function(t){return!t.Cc}).reduce(function(t,e){return t+e.sn},0);return Math.min(t,e)},m.prototype.P2a=function(t,e,i){var n=(n=t.Uqa)&&n.Zba;return!(t.Oj&&(0!==t.ym.length||!(t.type===r.pj.audio&&this.mW||t.type===r.pj.video&&this.b2)))||(n&&n.Wy-e>=i||!1)},m.prototype.Elb=function(t){this.Idc||(this.Dlb(this.audio,t),this.Dlb(this.video,t)),this.closed||this.P_a()},m.prototype.P_a=function(){var t=!this.audio.Oj||0!==this.audio.$x.length,e=0===this.video.ym.length&&this.b2,i=!this.video.Oj||0!==this.video.$x.length;!(0===this.audio.ym.length&&this.mW&&i||e&&t)||null!=(i=this.audio.Oj)&&i.vi()||null!=(e=this.video.Oj)&&e.vi()||this.Gra||!(this.ca.readyState>h.Ap.c4.HAVE_NOTHING)||this.Fm.Yaa||(this.Gra=!0,null!=(t=this.Yb)&&t.endOfStream())},m.prototype.Dlb=function(t,e){var i,n,r,a;if(!this.closed&&t.Oj){if(n=t.Oj,r=t.$x,!n.vi()&&0<r.length&&(t.Uqa=r[r.length-1]),t.HCa){if(n.vi())return;t.HCa=!1,(a=null==(i=this.Yb)?void 0:i.V6a().pfb(c.Gp))&&0<a&&n.remove(0,a)}for(i=t.ym[0];i&&i.response&&(i.Cc||i.xC-e<=this.$B)&&(this.Gra=!1,this.ffc(i));)t.ym.shift(),i=t.ym[0];!n.vi()&&0<r.length&&(t.Uqa=r[r.length-1])}},m.prototype.ffc=function(e){var t,i,n;if(l.Ua(e&&!!e.response),t=e.response,i=e.mediaType,n=this.FL[i],!this.closed&&n.Oj&&!n.Oj.vi()){try{e.Cc&&e.profile&&n.Oj.ZGb(e.profile),this.log.trace("Feeding media segment to decoder",{Bytes:t.byteLength}),n.Oj.UYa(t,e),e.Cc||n.$x.push(this.IKb(e))}catch(t){return void("QuotaExceededError"===t.name?(this.j.K8=this.j.K8?this.j.K8+1:1,this.HZa=!1,n.iR=!0):(this.log.error("Exception while appending media",e,t),this.Md("CodecSwitchingError"===t.name?a.Z.POa:a.Z.Pub,u.t$(i))))}return!0}},m.prototype.zKb=function(t){var e;return b.Bka[t.Pa]||((e=this.j.i8a(t.oc))||(this.log.warn("Could not find CDN",{cdnId:t.oc}),e={id:t.oc,Aab:t.location}),e)},m.prototype.B1a=function(t){var e,i=t.Pa;return b.Cka[i]||(t.mediaType===g.u.P?e=this.j.f8a(i):t.mediaType===g.u.J&&(e=this.j.t8a(i)),e||this.log.error("Could not find stream",{stream:i}),e)},m.prototype.IKb=function(t){return{Zba:t,stream:this.B1a(t),kn:{startTime:Math.floor(t.xC),endTime:Math.floor(t.Wy)},xc:this.zKb(t)}},m.prototype.zpa=function(t){this.T_a(t,g.u.P),this.T_a(t,g.u.J)},m.prototype.T_a=function(n,r){var t,e,a,o,s,i,u,c=this,h=n;if(this.HZa&&(h-=f.config.B0),e=(t=this.FL[r]).$x,s=!1,e.some(function(t,e){var i=t.Zba;return n<i.xC?(l.Ua(!1,"decoder content does not contain media time"),!0):(h>=i.Wy&&(a=e),n<i.Wy?(o=e,t!==(e=r===g.u.P?c.j.Rf:c.j.Ie).value&&(e.set(t),s=!0),!0):void 0)}),(t.iR||s)&&void 0!==a&&!this.Gra){if(a+1===o){if(0===a)return;a--}0<(i=e[a].Zba.Wy-1)&&((u=t.Oj)&&!u.vi()?(u.remove(0,i/d.Fu),t.iR=!1,e.splice(0,a+1)):t.iR=!0)}},m.prototype.qhb=function(){[this.audio,this.video].forEach(function(t){t.$x=[],t.Uqa=void 0,t.ym=[]}),this.b2=this.mW=!1,this.j.fireEvent(s.ma.Uba)},m.prototype.Aua=function(){return[this.audio,this.video].filter(function(t){return t.Oj})},m.prototype.wSb=function(){var t,e;if(this.vi())l.Ua(!1,"should not be busy while checking buffer ranges");else if((t=this.Aua().map(function(t){var e,i=t.ym.filter(function(t){return t.uF}),n=t.Oj.buffered();if(t=n.length?Math.ceil(1e3*n.start(0)):void 0,n=n.length?Math.floor(1e3*n.end(n.length-1)):void 0,t=null!=t?t:null==(e=i[0])?void 0:e.xC,e=null!=(i=null==(i=i[i.length-1])?void 0:i.Wy)?i:n,void 0!==t&&void 0!==e)return{start:t,end:e}})).every(function(t){return t})&&(e=Math.max.apply(Math,J(t.map(function(t){return t.start}))))<(t=Math.min.apply(Math,J(t.map(function(t){return t.end})))))return{start:c.vc(e),end:c.vc(t)}},m.prototype.skip=function(e){l.Ua(!this.vi(),"should not be busy while skipping"),this.Aua().forEach(function(t){t.iR=!0}),this.zpa(e),this.Aua().forEach(function(t){0<t.$x.length||(t.ym=t.ym.filter(function(t){return!!(t.Cc||t.Wy>e)}))})},e.gNa=m},function(t,e,i){_esm(e),e.Cka=e.Bka=void 0,t=i(35),e.Bka=((i={})[t.Xq]={id:-1,name:"hardcoded",cc:1,type:"hardcoded",Aab:"-1",$Yb:!1,location:{id:"-1",cc:1,level:100,weight:1}},i),e.Cka=((i={})[t.Xq]={track:{type:"padding",trackId:"padding",Hi:"padding",Xf:"padding",WF:"other",Bf:"padding",gG:"padding",sy:"padding",Bh:{}},type:"padding",Wb:"-1",bitrate:1,eb:100,mf:"unknown",size:1,sv:{},Bh:{},om:"",framerate:0,Aj:!1,Qj:[],height:1,width:1},i)},function(t,e){function i(t,e){this.j=e,this.wK=!0,this.Jfa=!1,this.ca=t}_esm(e),e.TTa=void 0,i.prototype.Uya=function(){this.wK&&(this.wK=!1,this.j.paused.set(!1))},i.prototype.Tya=function(){this.wK||(this.wK=!0,this.j.paused.set(!0))},i.prototype.pause=function(){var t;this.paused||(this.wK=!0,null!=(t=this.ca)&&t.pause())},i.prototype.play=function(){var t,i=this;return this.paused&&!this.Jfa?(this.Jfa=!0,Promise.resolve(null==(t=this.ca)?void 0:t.play()).then(function(){i.Jfa=!1}).catch(function(t){var e;throw i.Jfa=!1,i.wK=!(null==(e=i.ca)||!e.paused),t})):Promise.resolve()},i.prototype.close=function(){this.ca=void 0},nt.Object.defineProperties(i.prototype,{paused:{configurable:!0,enumerable:!0,get(){return this.wK}}}),e.TTa=i},function(t,e){function i(t,e,i){var n,r,a,o=[];return t.forEach(function(t){-1==o.indexOf(t.mf)&&o.push(t.mf)}),r=n=null,e.forEach(function(t){null===n?r=n=t.bitrate:r<t.bitrate?r=t.bitrate:n>t.bitrate&&(n=t.bitrate)}),a=[],o.forEach(function(e){var t={ranges:[],profile:e};n&&r&&(t.ranges.push({min:n,max:r}),i&&(t.disallowed=i.filter(function(t){return t.stream.mf===e}).map(function(t){return{stream:{bitrate:t.stream.bitrate},disallowedBy:t.Z8}})),a.push(t))}),a}function n(t,i){var n=void 0;return{YE:t.filter(function(t){var e=i(t);return e&&(n=n||[]).push({stream:t,Z8:e}),!e}),uNb:n}}_esm(e),e.tNb=e.mv=e.yLb=e.U7a=void 0,e.U7a=function(t,e){return i(t,(e=n(t,e)).YE,e.uNb)},e.yLb=i,e.mv=n,e.tNb=function(t){if(t.Aj&&t.lower&&1080<t.height)return["Prefetch UHD"]}},function(t,e,i){var n,r;function a(t,e){return(t=n.$b.call(this,t)||this).Ixa=e,t}_esm(e),e.qQa=void 0,n=i(70),r=i(93),S(a,n.$b),a.prototype.set=function(t){n.$b.prototype.set.call(this,r.AD(t,0,this.Ixa))},e.qQa=a},function(e,i,n){var r,a,o,s,u,c,h,f,l;function d(t,e,i,n,r,a){var o=this;this.gj=t,this.config=i,this.Eb=n,this.debug=r,this.xI={},this.R2a=!1,this.sW={},this.Kva=0,this.s$=function(t){var e,i,n=t.stream;return n?(t=n.Wb,e=n.bitrate,i=n.eb):t=t.track.Wb,{key:t+"$"+e+"$"+i,Wb:t,bitrate:e,eb:i}},this.$5a=function(t){var e=o.s$(t),i=null==(i=t.xc)?void 0:i.id;return t=t.track.Xf,Object.assign({},e,{key:e.key+"$"+i+"$"+t,Ao:i,Xf:t})},this.uSb=function(t){var e=t.stream;return{key:(t=null==e?void 0:e.Wb)+"$"+(e=null==e?void 0:e.bitrate),Wb:null!=t?t:"",MQ:e}},this.PVb=function(t){var e=t.stream;return{key:(t=null==e?void 0:e.Wb)+"$"+(e=null==e?void 0:e.eb),Wb:null!=t?t:"",MQ:e}},this.log=e.jb("PlayTimeTracker"),this.uda=a(t),this.Oy=a(t),this.Mza=a(t),this.startTime=this.gj.mediaTime.value,this.Aba=this.config().tCb,this.PL(),this.xI.abrdel=0,this.Aba.forEach(function(t){o.sW[t="abrdel"+t]=0,o.xI[t]=0})}function p(){}_esm(i),i.cQa=void 0,e=n(0),r=n(1),a=n(7),o=n(13),s=n(80),n(5),u=n(27),c=n(112),h=n(17),f=n(25),n=n(576),p.prototype.encode=function(t){return{downloadableId:t.Wb,correlationId:t.Xf,bitrate:t.bitrate,vmaf:t.eb,duration:t.duration,metric:t.MQ,cdnId:t.Ao}},p.prototype.decode=function(t){return{Wb:t.downloadableId,Xf:t.correlationId,bitrate:t.bitrate,eb:t.vmaf,duration:t.duration,MQ:t.metric,Ao:t.cdnId}},d.prototype.Ct=function(t){return t=void 0===t?"content":t,this.mL(this.gj.mediaTime.value),Math.floor(this.Oy.Ct(t))},d.prototype.CY=function(t){return t=void 0===t?"content":t,this.mL(this.gj.mediaTime.value),t=this.Oy.CY(t),this.debug.assert(t===Math.floor(t),"Value of totalContentPlayTime is not an integer."),Math.floor(t)},d.prototype.kSb=function(){return this.mL(this.gj.mediaTime.value),{audio:this.hY(this.uda,this.$5a),video:this.hY(this.Oy,this.$5a)}},d.prototype.yUb=function(){var t=this.Ct("content"),e=this.Ct("ads"),i=this.Ct("other"),t={total:t,totalAdDuration:e,totalOtherDuration:i,totalCombinedDuration:t+e+i,totalContentTime:this.CY("content"),audio:this.hY(this.uda,this.s$),video:this.hY(this.Oy,this.s$),timedtext:this.hY(this.Mza,this.s$)};return this.debug.assert(!(!t.audio||!t.video)),t},d.prototype.cta=function(){var e;this.mL(this.gj.mediaTime.value),t=this.Oy.Xsa(this.uSb);try{e=this.v5a(t)}catch(t){return this.log.warn("Failed to calc average bitrate."),null}return this.xI.abrdel=Math.round(e),this.xI.abrdel},d.prototype.w5a=function(){var e;this.mL(this.gj.mediaTime.value),t=this.Oy.Xsa(this.PVb);try{e=this.v5a(t)}catch(t){return this.log.warn("Failed to calc average vmaf."),null}return Math.round(e)},d.prototype.u5a=function(){var t,a=this;return this.R2a||(t=this.Ct(),this.Aba.forEach(function(e){var i,n,r;0===a.sW["abrdel"+e]&&t>e*h.Fu&&(r=n=i=0,a.Oy.some(function(t){return i+=t.stream.bitrate*(t.endTime-t.startTime),n+=t.endTime-t.startTime,r=t.stream.bitrate,n>e*h.Fu}),i&&(a.sW["abrdel"+e]=Math.round((i-r*(n-e*h.Fu))/(e*h.Fu))))}),0!==this.sW["abrdel"+this.Aba[this.Aba.length-1]]&&(this.R2a=!0),f.ih(this.sW,function(t,e){a.xI[t]=0===e?a.xI.abrdel:e})),this.xI},d.prototype.YCb=function(t){this.Kva+=t},d.prototype.haa=function(){return this.Oy.haa()},d.prototype.PL=function(){var e=this;this.gj.Rf.addListener(function(t){e.IO=e.J_a(e.IO,e.uda,t.newValue)}),this.gj.Ie.addListener(function(t){e.KO=e.J_a(e.KO,e.Oy,t.newValue)}),this.gj.playbackRate.addListener(function(t){e.mL(e.gj.mediaTime.value,t.oldValue)}),this.gj.uj.addListener(this.P3b.bind(this))},d.prototype.Dya=function(t,e){this.mL(t),this.startTime=e,this.KO=this.IO=void 0,this.JO&&(this.JO.startTime=this.startTime)},d.prototype.P3b=function(t){this.Mza.ng(this.JO,this.gj.mediaTime.value),this.JO=(t=t.newValue)?{track:t,startTime:this.gj.mediaTime.value,endTime:s.Tz}:void 0},d.prototype.mL=function(t,e){e=void 0===e?this.gj.playbackRate.value:e,t&&this.IO&&this.KO&&(t=Math.min(t,this.IO.endTime,this.KO.endTime),this.uda.ng(this.IO,t,e),this.IO.startTime=t,this.Oy.ng(this.KO,t,e),this.KO.startTime=t,this.JO&&(this.Mza.ng(this.JO,t,e),this.JO.startTime=t),this.startTime=t)},d.prototype.J_a=function(t,e,i){if(t&&e.ng(t,Math.min(t.endTime,this.gj.mediaTime.value)),i&&i.stream)return t=i.kn,e=i.stream,{xc:i.xc,track:e.track,stream:e,startTime:Math.max(t.startTime,this.startTime),endTime:t.endTime}},d.prototype.hY=function(t,e){return t.Xsa(e,"content").map(function(t){return(new p).encode(t)})},d.prototype.v5a=function(t){var e,i=this,n=0;return t.forEach(function(t){if(!i.Eb.hh(t.duration)||!i.Eb.hh(t.MQ))throw Error("Invalid arguments: missing duration and/or metric in segment.");n+=t.duration}),n?(e=0,t.forEach(function(t){e+=t.MQ*t.duration/n}),e):0},l=d,l=e.__decorate([r.$(),e.__param(1,r.l(a.ob)),e.__param(2,r.l(o.Oc)),e.__param(3,r.l(u.Tg)),e.__param(4,r.l(c.Hz)),e.__param(5,r.l(n.Vja))],l),i.cQa=l},function(t,e){_esm(e),e.bQa="PlayTimeTrackerFactorySymbol"},function(t,e,i){var p,n,r;function a(t,e,i,n,r,a,o,s,u,c,h,f,l,d){this.index=t,this.L=e,this.X=i,this.kb=n,this.ga=r,this.Jj=a,this.cxa=o,this.IIb=u,this.kcb=h,this.Vi=l,this.Bc=new p.$b(null),this.Jh=new p.$b(null),this.Vb=new p.$b(null),this.uj=new p.$b(null),this.Iw=new p.$b(void 0),this.tf=new p.$b(null),this.Qh=new p.$b(null),this.Rf=new p.$b(null),this.Ie=new p.$b(null),this.xc=[new p.$b(null),new p.$b(null)],this.mediaTime=new p.$b(void 0),this.playbackRate=new p.$b(1),this.Br=new p.$b(null),this.BI=this.AI="notcached",this.Y8=this.background=!1,s&&(this.tf.set(s.tf.value),this.Qh.set(s.Qh.value)),this.Am=c(this),this.Nn=this.kcb.e9b(this.ga,this.Jj),this.wq=f(this,d)}_esm(e),e.rQa=void 0,p=i(70),n=i(5),r=i(23),a.prototype.Se=function(t){this.Nn.wr(t)},a.prototype.LB=function(t){var i=this;Object.entries(t).forEach(function(t){var e=rt(t);t=e.next().value,e=e.next().value,i.Nn.wr(t,n.vc(e-i.Jj.ka(n.pa)))})},a.prototype.Ica=function(){this.kcb.y9b(this.ga)},nt.Object.defineProperties(a.prototype,{he:{configurable:!0,enumerable:!0,get(){return this.kb.he}},$fa:{configurable:!0,enumerable:!0,get(){return this.kb.$fa}},om:{configurable:!0,enumerable:!0,get(){return this.Sc&&this.Sc.om}},wj:{configurable:!0,enumerable:!0,get(){var t;return null!=(t=this.Sc&&this.Sc.wj)?t:[]}},wz:{configurable:!0,enumerable:!0,get(){var t;return null!=(t=this.Sc&&this.Sc.wz)?t:[]}},WC:{configurable:!0,enumerable:!0,get(){var t;return null!=(t=this.Sc&&this.Sc.WC)?t:[]}},Gi:{configurable:!0,enumerable:!0,get(){var t;return null!=(t=this.Sc&&this.Sc.Gi)?t:[]}},Og:{configurable:!0,enumerable:!0,get(){return this.Sc&&this.Sc.Og}},PJ:{configurable:!0,enumerable:!0,get(){var t;return null!=(t=this.Sc&&this.Sc.PJ)&&t}},xw:{configurable:!0,enumerable:!0,get(){var t;return null!=(t=this.Sc&&this.Sc.xw)?t:[]}},Jg:{configurable:!0,enumerable:!0,get(){var t;return null!=(t=this.Sc&&this.Sc.Jg)?t:[]}},Wx:{configurable:!0,enumerable:!0,get(){var t;return this.wq.ub?(r.Ua(void 0===this.ZM||1/0===this.ZM.ka(n.pa),"Unexpected contentDuration from ASE. Live should be Infinity. - isLive:"+this.wq.ub+", contentDuration:"+(null==(t=this.ZM)?void 0:t.display)),n.vc(this.wq.I9a()?null!=(t=this.mediaTime.value)?t:0:this.wq.nY())):this.ZM&&0<this.ZM.ka(n.pa)?this.ZM:n.vc(null!=(t=null==(t=this.ja)?void 0:t.hb.duration)?t:0)},set(t){this.ZM=t}},Kbb:{configurable:!0,enumerable:!0,get(){var t;return this.wq.ub?(r.Ua(void 0===this.s6||1/0===this.s6.ka(n.pa),"Unexpected maxSeekPts from ASE. Live should be Infinity. - isLive:"+this.wq.ub+", maxSeekPts:"+(null==(t=this.s6)?void 0:t.display)),this.Wx):this.s6},set(t){this.s6=t}},ql:{configurable:!0,enumerable:!0,get(){return this.kb.ql||0}},E8:{configurable:!0,enumerable:!0,get(){return void 0!==this.QW?this.QW:void 0===this.mediaTime.value?null:this.IIb(this.mediaTime.value,this.X)}},Xf:{configurable:!0,enumerable:!0,get(){var t;return null==(t=null==(t=this.ja)?void 0:t.hb.wO)?void 0:t.jp}},eL:{configurable:!0,enumerable:!0,get(){var t;return null==(t=null==(t=this.ja)?void 0:t.hb.wO)?void 0:t.eL}},sd:{configurable:!0,enumerable:!0,get(){return this.Nn.sd}}}),e.rQa=a},function(t,e){_esm(e),e.BTa="TrickPlayParserSymbol"},function(t,e,i){var n,r,a;function o(){}_esm(e),e.ATa=void 0,t=i(0),r=i(171),i=i(1),o.prototype.parse=function(t){var e,i;if(t)return e=new Uint8Array(t),i=new r.xT(e),{header:t=this.u5b(i),images:this.v5b(i,e,t)};throw Error("invalid array buffer")},o.prototype.u5b=function(e){var t,i;if(e.cua()<this.e$b())throw Error("array buffer too short");if(n.HMa.forEach(function(t){if(t!=e.zC())throw Error("BIF has invalid magic.")}),(t=e.yR())>n.VERSION)throw Error("BIF version in unsupported");if(0==(i=e.yR()))throw Error("BIF has no frames.");return{version:t,x3b:i,flb:e.yR(),i$b:e.jl(n.rRa)}},o.prototype.v5b=function(t,e,i){for(var n,r,a=[],o=0;o<=i.x3b;o++)n={timestamp:t.yR(),offset:t.yR()},null!=r&&a.push(e.subarray(r.offset,n.offset)),r=n;return a},o.prototype.e$b=function(){return n.HMa.length+4+4+4+n.rRa},(a=n=o).HMa=[137,66,73,70,13,10,26,10],a.VERSION=0,a.rRa=44,a=n=t.__decorate([i.$()],a),e.ATa=a},function(t,e,i){var c,h,n,r;function a(t,e,i){this.config=t,this.j=e,this.$f=i,this.I_=void 0,this.jda=!1,this.Dwa=0,this.log=this.$f.jb()}_esm(e),e.eSa=void 0,c=i(16),h=i(5),n=i(93),r=i(15),a.prototype.gUb=function(t,e,i,n,r){var a,o,s,u;return i=void 0===i?this.j.X:i,n=void 0!==n&&n,a=e===c.Ze.CM,o=this.wGb(a?t:this.HHb(t,i),n,i),n=this.j.La,a?(t=o,o=n.kv(o)):t=n.DO(i,o),e===c.Ze.Qz&&(this.j.VZa=o),r=this.dh(t,e,r),s=(a=a||r)?t:o,this.j.Wt&&(u=this.j.kb.$h?this.config().eza:this.config().SF,this.j.j8a(s,u)||e!==c.Ze.DD||(s=this.j.Wt.ka(h.pa)-u-1e3,o=a?(t=s,n.kv(s)):(t=n.DO(i,s),s))),{Aca:s,Uk:o,u6b:t,dh:r}},a.prototype.wGb=function(t,e,i){return t=this.kZb()||e?Math.round(t):(e=this.j.La.npa(t,i),r.Oa(e)?e:Math.round(t)),this.j.kb.$h&&(t=this.oRb(t)),this.config().UBa&&0!==t&&(t+=this.config().UBa),t},a.prototype.dh=function(t,e,i){return!(this.config().sNb||e===c.Ze.Qz||e===c.Ze.g5||e===c.Ze.k3||!i||t<i.start.ka(h.pa)||t>=i.end.ka(h.pa))&&(null==(e=this.j.La)?void 0:e.Ni)&&e.dh(t)||!1},a.prototype.kZb=function(){return!this.j.wq.ub&&(!!this.j.kb.$h||("boolean"==typeof this.j.kb.S_?this.j.kb.S_:navigator.hardwareConcurrency&&navigator.hardwareConcurrency<=2?this.config().S_&&this.config().P6b:this.config().S_))},a.prototype.HHb=function(t,e){var i=(e=this.j.ek(e)).Wx;return e=Math.max(0,(e.Kbb||i).ka(h.pa)-this.config().xhc),n.AD(t,0,e)},a.prototype.oRb=function(i){var n,r,t=this.j.$X();return Object.values(t).find(function(t){var e=t.wa,e=i<(null!=e?e:1/0);return t.va<=i&&e})?i:(r=i,Object.entries(t).forEach(function(t){var e;(t=rt(t)).next(),0<(e=(t=t.next().value.va)-i)&&(void 0===n||e<n)&&(n=e,r=t)}),r)},nt.Object.defineProperties(a.prototype,{Yaa:{configurable:!0,enumerable:!0,get(){return this.jda||!!this.I_}}}),e.eSa=a},function(t,e,i){var s,b,g,u,m,c,n;function r(t,e,i,n,r,a){var o=this;this.j=t,this.Wk=e,this.O1=i,this.Ii=n,this.$0=r,this.Jo=a,this.R1a={},this.update=function(){var i="";o.jY().forEach(function(t){i=i?i+"\n":"",Object.entries(t).forEach(function(t){var e=rt(t);t=e.next().value,e=e.next().value,i+=t+": "+e+"\n"})}),o.Jq.value=i},this.f4b=function(){var t,e;o.j.qf&&(e=o.j.qf.oJ())&&(o.Hqa=e-(null!=(t=o.nlb)?t:0),o.nlb=e,o.bR())},this.bR=function(){o.O1.Xl(o.update)},this.onkeydown=function(t){"INPUT"!=t.target.tagName&&"`"==t.key&&o.toggle()},this.Veb=[t.mediaTime,t.xc[c.u.P],t.xc[c.u.J],t.Rf,t.Ie,t.Qh,t.tf,t.uj,t.state,t.ft,t.Gb,t.volume,t.muted],this.out=document.querySelector(".watch-video"),this.Jq=this.Ii.createElement("textarea",0,0,{readonly:1,class:"player-info"}),s.nf.addListener(s.jF,this.onkeydown),t.addEventListener(u.ma.eh,function(){s.nf.removeListener(s.jF,o.onkeydown),o.py()})}_esm(e),e.nQa=void 0,i(61),s=i(62),b=i(93),i(305),g=i(14),i(15),u=i(16),i(202),m=i(5),c=i(49),(t={})[u.dc.sM]="Not Loaded",t[u.dc.LOADING]="Loading",t[u.dc.Me]="Normal",t[u.dc.CLOSING]="Closing",t[u.dc.CLOSED]="Closed",(t={})[u.Tf.Me]="Normal",t[u.Tf.ed]="Pre-buffering",t[u.Tf.TRa]="Network stalled",(t={})[u.rb.fg]="Waiting for decoder",t[u.rb.Gc]="Playing",t[u.rb.Ug]="Paused",t[u.rb.Gs]="Media ended",n=[u.ma.Uba],r.prototype.Rac=function(t){this.R1a.DFR=t},r.prototype.show=function(){var e=this;this.seen||(this.$Y=bt.setInterval(this.f4b,1e3),e.out.appendChild(e.Jq),this.Veb.forEach(function(t){t.addListener(e.bR)}),n.forEach(function(t){e.j.addEventListener(t,e.bR)}),this.seen=!0,this.Jo.m1().then(function(t){e.Pua=t,e.bR()})),this.update()},r.prototype.py=function(){var e=this;this.seen&&(clearInterval(this.$Y),this.nlb=this.Hqa=void 0,e.out.removeChild(e.Jq),this.Veb.forEach(function(t){t.removeListener(e.bR)}),n.forEach(function(t){e.j.removeEventListener(t,e.bR)}),this.O1.Xl(),this.seen=!1)},r.prototype.toggle=function(){this.seen?this.py():this.show()},r.prototype.jY=function(){let t,e,i,n,r,a,o,s,u,c,h,f=this.j,l=[],d=(i=f.Rf.value?.stream,n=f.Ie.value?.stream,t=f.Qh.value?.bitrate||"?",e=f.tf.value?.bitrate||"?",r=i?.track,a=this.$0.C8(f.Jh.value?f.Jh.value.streams:[]),o=this.$0.w8(r.streams),s=n.mf,c=i.mf,u=/hevc/.test(s)?"hevc":/vp9/.test(s)?"vp9":/h264hpl/.test(s)?"avchigh":/av1/.test(s)?"av1":"avc",/hdr/.test(s)&&(u+=", hdr"),/dv/.test(s)&&(u+=", dv"),/prk/.test(s)&&(u+=", prk"),h=/xheaac/.test(c)?"xhe-aac":/heaac/.test(c)?"he-aac":/ddplus/.test(c)?"ddplus":"unknown",/atmos/.test(c)&&(h+=", atmos"),l.push({Version:"6.0038.071.911","Audio Track":"Channels: "+r.channels+", "+o+" ("+h+")","Video Track":a+" ("+u+")","HDR support":this.Pua?this.Pua.result+" ("+this.Pua.reason+")":"unknown"}),l.push({"Playing bitrate (a/v)":i.bitrate+" / "+n.bitrate+" ("+n.width+"x"+n.height+"@"+n.framerate.toFixed(3)+")","Buffering bitrate (a/v)":t+" / "+e,"Buffer size in Seconds (a/v)":b.Tj(f.eW())+" / "+b.Tj(f.U1())}),i?.size/(1<<30)),p=n?.size/(1<<30);return l.push({PlaybackTime:sec2time(b.Tj(f.mediaTime.value))+" / "+sec2time(b.Tj(f.Wx.ka(m.pa))),"Size (a+v)":`${d.toFixed(2)} GB + ${p.toFixed(2)} GB = ${(d+p).toFixed(2)} GB`,Volume:g.Dp(100*f.volume.value)+"%"+(f.muted.value?" (Muted)":"")}),l.push({Throughput:f.Xa+" kbps"}),l},e.nQa=r},function(t,e,i){var n,r,a,o;function s(t,e,i,n){this.ga=t,this.a$b=e,this.Aa=i,this.Ig=n,this.sd={}}function u(t,e){this.$f=t,this.Ig=e,this.Ec={},this.Aa=t.jb("PlaybackMilestoneStoreImpl")}_esm(e),e.bvb=e.pQa=void 0,t=i(0),n=i(1),r=i(7),a=i(18),o=i(5),u.prototype.e9b=function(t,e){return this.Ec[t]&&this.Aa.warn("registerPlayback: xid "+t+" already registered, overriding"),e=(e||this.Ig.Tb()).ka(o.pa),this.Aa.trace("registerPlayback: xid "+t+" at "+e),this.Ec[t]=new s(t,e,this.Aa,this.Ig),this.Ec[t]},u.prototype.zUb=function(t){return this.Ec[t]||this.Aa.warn("getPlaybackMilestones: xid "+t+" is not registered"),this.Ec[t]},u.prototype.y9b=function(t){this.Aa.trace("removePlayback: xid "+t),delete this.Ec[t]},i=u,i=t.__decorate([n.$(),t.__param(0,n.l(r.ob)),t.__param(1,n.l(a.$c))],i),e.pQa=i,s.prototype.wr=function(t,e){e=e?e.ka(o.pa):this.Ig.Tb().ka(o.pa)-this.a$b,this.Aa.trace("addMilestone: xid "+this.ga+" "+t+" at "+e),this.sd[t]=e},e.bvb=s},function(t,e,i){var n,r,a,o;function s(t){this.Ga=t,this.trace=[]}_esm(e),e.FRa=void 0,t=i(0),n=i(16),r=i(1),a=i(18),o=i(5),s.prototype.kl=function(t){t.cause!==n.Ze.Qz&&(this.trace.unshift({time:this.Ga.Tb(),event:t}),5<this.trace.length&&this.trace.pop())},s.prototype.J7a=function(){var t,e=this;return 0===this.trace.length?{}:(t=this.trace[0],{timeSinceLastRepositionMs:this.alb(t.time),lastRepositionCause:this.J5a(t.event.cause),repositionTrace:this.trace.map(function(t){return{timeSince:e.alb(t.time),cause:e.J5a(t.event.cause),newMediaTime:t.event.Aca,oldMediaTime:t.event.Lya,contentPts:t.event.Uk,skip:t.event.skip}})})},s.prototype.alb=function(t){return this.Ga.Tb().Ea(t).ka(o.pa)},s.prototype.J5a=function(t){switch(t){case n.Ze.Qz:return"initial";case n.Ze.DD:return"seek";case n.Ze.CM:return"segment_changed";case n.Ze.g5:return"track_changed";case n.Ze.k3:return"force_rebuffer"}},i=s,i=t.__decorate([r.$(),t.__param(0,r.l(a.$c))],i),e.FRa=i},function(t,e,i){var u,n,r;function a(t,e,i){this.gj=t,this.Eb=i,this.O=[],this.log=e.jb("PlayedSegmentsTrackerImpl")}_esm(e),e.vQa=void 0,u=i(0),t=i(1),n=i(27),r=i(7),i(5),a.prototype.some=function(t){return this.O.some(t)},a.prototype.haa=function(){return!!(this.O[0]&&this.O[0].stream&&this.Eb.hh(this.O[0].stream.eb))},a.prototype.Ct=function(e){return this.O.filter(function(t){return t.track.WF===e}).reduce(function(t,e){return t+(e.endTime-e.startTime)/e.rate},0)},a.prototype.CY=function(e){return this.O.filter(function(t){return t.track.WF===e}).reduce(function(t,e){return t+e.endTime-e.startTime},0)},a.prototype.Xsa=function(a,e){var o=this,s={};return this.O.filter(function(t){return!e||t.track.WF===e}).reduce(function(t,e){var i,n=(r=a.bind(o,e)()).key,r=u.__rest(r,["key"]);return e=e.endTime-e.startTime,(i=s[n])?i.duration+=e:((i=r).duration=e,t.push(i),s[n]=i),t},[])},a.prototype.ng=function(t,e,i){var n;i=void 0===i?this.gj.playbackRate.value:i,n=this.O,t&&e&&e>=t.startTime&&(t={xc:t.xc,track:t.track,stream:t.stream,startTime:t.startTime,endTime:e,rate:i},(e=n[n.length-1])&&e.track===t.track&&e.stream===t.stream&&e.xc===t.xc&&e.endTime===t.startTime&&e.rate===t.rate?e.endTime=t.endTime:n.push(t))},i=a,i=u.__decorate([u.__param(1,t.l(r.ob)),u.__param(2,t.l(n.Tg))],i),e.vQa=i},function(t,e,i){var c,h,f,l,d;function n(t,i,e,n,r,a,o,s){var u=this;this.La=t,this.j=i,this.log=e,this.config=n,this.hac=r,this.bec=a,this.dn=new c.$b(!1),this.Mb=new d.Bk,t=t.Po(),this.$Xa=o({ga:i.ga.toString()}),null!=(o=null==t?void 0:t.XF.events)&&o.addListener("adPresenting",function(){u.i4a(),u.Lcc()}),null!=o&&o.addListener("adBreakPresenting",function(){s.QQ(i),u.dn.set(!0)}),null!=o&&o.addListener("adBreakEnded",function(){u.dn.set(!1)}),null!=o&&o.addListener("adPlaygraphUpdated",function(){}),null!=o&&o.addListener("segmentDropped",function(t){var e=u.j.ek(t.segmentId);u.hac.O7b(t,e)}),this.cs=new f.oU,this.j.addEventListener("playbackStart",function(){u.cs.resolve()}),null!=(o=null==t?void 0:t.zXb.events)&&o.addListener("adEvent",function(e){u.cs.promise.then(function(){var t=null==(t=i.ja)?void 0:t.hb.Og;u.$Xa.tac(e,t)})}),null!=o&&o.addListener("adBreakEvent",function(t){t.event===h.lFa.j7&&u.Mb.Tc(l.u2.j7),u.cs.promise.then(function(){u.$Xa.sac(t,i)})})}_esm(e),e.uFa=void 0,c=i(70),h=i(307),f=i(341),l=i(16),d=i(73),n.prototype.addEventListener=function(t,e,i){this.Mb.addListener(t,e,i)},n.prototype.removeEventListener=function(t,e){this.Mb.removeListener(t,e)},n.prototype.JP=function(){var t;return null==(t=null==(t=this.La)?void 0:t.Po())?void 0:t.Ry.gs},n.prototype.RTb=function(){var t,e,i=this.JP();if(i)return e={position:null==i?void 0:i.position.offset.W,adDuration:null==(t=null==i?void 0:i.Ys)?void 0:t.vh.endTime.W,adIndex:null==(e=i.Ys)?void 0:e.index,adBreakIndex:i.index,adBreakDuration:null==i?void 0:i.vr.duration.W},(t=i.dda)&&(e.padding={type:t.eda,duration:t.cda.W}),e},n.prototype.Wsa=function(){var t=this.j.na.L.toString(),e=null==(e=null==(e=this.La)?void 0:e.Po())?void 0:e.XF.Wsa({lnb:[t]});return null!=(e=null==e?void 0:e.result[t])?e:[]},n.prototype.i4a=function(){},n.prototype.Lcc=function(){var t,e=this;null!=(t=null==(t=this.JP())?void 0:t.Ys)&&t.vh.KJ&&this.bec.forEach(function(t){return t.start(e.j)})},e.uFa=n},function(t,e,i){var n,r,a,o,s,u,c;function h(t,e,i,n,r,a,o){this.context=t,this.log=e,this.Da=i,this.config=n,this.Ga=r,this.JCb=a,this.CCb=o,this.mCa={}}_esm(e),e.qFa=void 0,t=i(0),n=i(1),r=i(18),a=i(29),o=i(5),s=i(13),u=i(308),c=i(307),h.prototype.sac=function(t,e){var i,n=this,r=t.event;Object.values(c.lFa).includes(r)?(i=e.QB?e.QB.ka(o.pa):-1,t={href:e.ja.Cj.FP("events").href,ga:this.context.ga.toString(),event:r,Lx:t.Lx,JA:t.JA,position:t.wi.offset.W,Xn:i,Vt:{},aB:this.Da.cL.ka(o.pa),appId:this.config().appId||this.Ga.id,sessionId:this.config().sessionId||this.Ga.id},this.CCb.Pf(this.log,t).catch(function(t){n.log.error("Failed to send event",{eventKey:r,xid:e.ga,error:t})})):this.log.debug("Ignoring unsupported event "+t.event)},h.prototype.tac=function(t,e){var i,n=this,r=t.event;Object.values(c.tob).includes(r)?(i=t.ja.links.events.href,this.mCa[t.Xn]||(this.mCa[t.Xn]=this.Da.DDb(o.vc(t.Xn)).ka(o.pa)),t={href:i,ga:this.context.ga.toString(),event:r,Lx:t.Lx,JA:t.JA,position:t.wi.offset.W,Xn:this.mCa[t.Xn],Vt:t.Vt,aB:this.Da.cL.ka(o.pa),appId:this.config().appId||this.Ga.id,sessionId:this.config().sessionId||this.Ga.id,t0b:e},this.JCb.Pf(this.log,t).catch(function(t){n.log.error("Failed to send event",{eventKey:r,xid:n.context.ga,error:t})})):this.log.debug("Ignoring unsupported event "+t.event)},i=h,i=t.__decorate([t.__param(2,n.l(a.Lh)),t.__param(3,n.l(s.Oc)),t.__param(4,n.l(r.$c)),t.__param(5,n.l(u.Fga)),t.__param(6,n.l(u.Ega))],i),e.qFa=i},function(t,e,i){var n;function r(t){this.vh=t}function a(t){this.padding=t}function o(t){this.Xp=t}function s(t){this.wi=t}function u(t){this.Gda=t}function c(t){this.cAa=t}function h(t){this.bAa=t}function f(t){this.QN=t}function l(t){this.gs=t}function d(t){var e=this;this.kg=t,this.dn=new n.$b(!1),this.kg.dn.addListener(function(t){e.dn.set(t.newValue)})}_esm(e),e.sob=e.Xub=e.rob=e.Krb=e.fvb=e.gvb=e.evb=e.qob=e.dvb=e.sFa=void 0,n=i(70),d.prototype.addEventListener=function(t,e,i){this.kg.addEventListener(t,e,i)},d.prototype.removeEventListener=function(t,e){this.kg.removeEventListener(t,e)},d.prototype.getPresentingAdBreak=function(){var t=this.kg.JP();if(t)return new l(t)},d.prototype.getAds=function(){return this.kg.Wsa()},d.prototype.getLogInfo=function(){return this.kg.RTb()},e.sFa=d,nt.Object.defineProperties(l.prototype,{adBreak:{configurable:!0,enumerable:!0,get(){return new f(this.gs.vr)}},adInfo:{configurable:!0,enumerable:!0,get(){var t=this.gs.Ys;if(t)return new h(t)}},paddingInfo:{configurable:!0,enumerable:!0,get(){var t=this.gs.dda;if(t)return new c(t)}},progress:{configurable:!0,enumerable:!0,get(){return new u(this.gs.progress)}},position:{configurable:!0,enumerable:!0,get(){return new s(this.gs.position)}},index:{configurable:!0,enumerable:!0,get(){return this.gs.index}}}),e.dvb=l,nt.Object.defineProperties(f.prototype,{adCollection:{configurable:!0,enumerable:!0,get(){return new o(this.QN.Xp)}},startPadding:{configurable:!0,enumerable:!0,get(){return new a(this.QN.cfa)}},endPadding:{configurable:!0,enumerable:!0,get(){return new a(this.QN.zX)}},hasPadding:{configurable:!0,enumerable:!0,get(){return this.QN.AWb}},duration:{configurable:!0,enumerable:!0,get(){return{ms:this.QN.duration.W}}},paddingDuration:{configurable:!0,enumerable:!0,get(){return{ms:this.QN.cda.W}}}}),e.qob=f,nt.Object.defineProperties(h.prototype,{ad:{configurable:!0,enumerable:!0,get(){return new r(this.bAa.vh)}},adProgress:{configurable:!0,enumerable:!0,get(){return this.bAa.aYa}},index:{configurable:!0,enumerable:!0,get(){return this.bAa.index}}}),e.evb=h,nt.Object.defineProperties(c.prototype,{paddingType:{configurable:!0,enumerable:!0,get(){return this.cAa.eda}},paddingProgress:{configurable:!0,enumerable:!0,get(){return this.cAa.n5b}},paddingDuration:{configurable:!0,enumerable:!0,get(){return{ms:this.cAa.cda.W}}}}),e.gvb=c,nt.Object.defineProperties(u.prototype,{adBreakProgress:{configurable:!0,enumerable:!0,get(){return this.Gda.ECb}},adBreakOffset:{configurable:!0,enumerable:!0,get(){return{ms:this.Gda.DCb.W}}},adBreakWithPaddingProgress:{configurable:!0,enumerable:!0,get(){return this.Gda.GCb}},adBreakWithPaddingOffset:{configurable:!0,enumerable:!0,get(){return{ms:this.Gda.FCb.W}}}}),e.fvb=u,nt.Object.defineProperties(s.prototype,{segmentId:{configurable:!0,enumerable:!0,get(){return this.wi.X}},offset:{configurable:!0,enumerable:!0,get(){return{ms:this.wi.offset.W}}}}),e.Krb=s,nt.Object.defineProperties(o.prototype,{ads:{configurable:!0,enumerable:!0,get(){return this.Xp.Ti.map(function(t){return new r(t)})}},duration:{configurable:!0,enumerable:!0,get(){return{ms:this.Xp.duration.W}}}}),e.rob=o,nt.Object.defineProperties(a.prototype,{duration:{configurable:!0,enumerable:!0,get(){return{ms:this.padding.duration.W}}}}),e.Xub=a,nt.Object.defineProperties(r.prototype,{hasPlayed:{configurable:!0,enumerable:!0,get(){return this.vh.IB}},id:{configurable:!0,enumerable:!0,get(){return this.vh.id}},startTime:{configurable:!0,enumerable:!0,get(){return{ms:this.vh.startTime.W}}},endTime:{configurable:!0,enumerable:!0,get(){return{ms:this.vh.endTime.W}}},is3pVerificationEnabled:{configurable:!0,enumerable:!0,get(){return this.vh.KJ}},thirdPartyVerificationToken:{configurable:!0,enumerable:!0,get(){return this.vh.LDa}}}),e.sob=r},function(t,e){_esm(e),e.lSa="SegmentDroppedLoggerSymbol"},function(t,e,i){var n;function r(){}_esm(e),e.kSa=void 0,t=i(0),i=i(1),r.prototype.O7b=function(t,e){e.yQ.sb.WBa({xid:e.ga,auxPlaybackcontextid:e.Og,auxMid:t.auxMid,auxMidType:t.auxMidType,reason:t.reason,adBreakLocationMs:t.adBreakLocationMs},"error"===t.sev)},n=r,n=t.__decorate([i.$()],n),e.kSa=n},function(t,e){_esm(e),e.CFa="AdFocusMonitorSymbol"},function(t,e,i){var n,r;function a(t){var n=this;this.EI=function(){var t=!document.hidden,e=null==(i=n.j.Po())?void 0:i.dn.value,i=n.j.paused.value;t||!e||i||(n.Aa.debug("Pausing playback because window is not visible"),n.j.paused.set(!0,{Gca:!0,reason:"adnotvisible"}))},this.unsubscribe=function(){document.removeEventListener("visibilitychange",n.EI),n.j.Po().dn.removeListener(n.EI),n.j.paused.removeListener(n.EI)},this.Aa=t.jb("AdVisibilityMonitor")}_esm(e),e.BFa=void 0,t=i(0),n=i(1),i=i(7),a.prototype.QQ=function(t){this.u2b||(this.Aa.debug("Starting to monitor playback for visibility"),this.j=t,this.u2b=!0,document.addEventListener("visibilitychange",this.EI),this.j.Po().dn.addListener(this.EI),this.j.paused.addListener(this.EI),this.j.addEventListener("closing",this.unsubscribe),this.EI())},r=a,r=t.__decorate([n.$(),t.__param(0,n.l(i.ob))],r),e.BFa=r},function(t,e,i){var a,o,s,n;function r(t,e,i){var r=this;this.zc=t,this.G=e,this.j=i,this.UVa=!1,this.Nla=this.gVa=1/0,null!=i&&i.addEventListener(s.ma.Bm,function(){var t,e,i,n;r.ub&&(o.Ua(r.j&&r.j.na===r.G,"Playback is required for live."),t=r.j,e=r.zc.H0(a.vc(1e3),function(){t.fireEvent(s.ma.wQ)}),i=r.zc.Mj(a.vc(6e4),function(){r.gVa=r.nY(),t.fireEvent(s.ma.wQ)}),n=r.zc.Mj(a.vc(12e4),function(){r.Nla=r.nY(),t.fireEvent(s.ma.wQ)}),t.addEventListener(s.ma.eh,function(){e.cancel(),i.cancel(),n.cancel()}),r.G.mediaTime.addListener(function(t){r.UVa=(null!=(t=t.newValue)?t:0)>=r.nY()-6e4}))})}_esm(e),e.iMa=void 0,a=i(5),o=i(23),i(40),s=i(16),n=i(579),r.prototype.BYa=function(t,e){o.Ua(this.ub,"Unexpected call to setInitialStreamingPts(). isLive:"+this.ub),o.Ua(this.j&&this.j.na===this.G,"Playback is required for live."),(e||!this.Z9a()&&0===t)&&(t=36e6),this.G.mt=t},r.prototype.nY=function(){var t;return o.Ua(this.ub,"Unexpected call to getLiveEdge(). isLive:"+this.ub),o.Ua(this.j&&this.j.na===this.G,"Playback is required for live."),null!=(t=null!=(t=null==(t=null==(t=this.j.La)?void 0:t.bF(this.G.X))?void 0:t.W)?t:null==(t=this.G.ja)?void 0:t.hb.duration)?t:0},r.prototype.eac=function(){o.Ua(this.ub,"Unexpected call to seekToLiveEdge(). isLive:"+this.ub),o.Ua(this.j&&this.j.na===this.G,"Playback is required for live."),this.j.qf?this.j.qf.seek(this.nY(),s.Ze.DD,this.G.X):this.BYa(0,!0)},r.prototype.I9a=function(){return o.Ua(this.ub,"Unexpected call to isAtLiveEdge(). isLive:"+this.ub),o.Ua(this.j&&this.j.na===this.G,"Playback is required for live."),this.UVa},r.prototype.Z9a=function(){return o.Ua(this.ub,"Unexpected call to isLiveEventEnded(). isLive:"+this.ub),o.Ua(this.j&&this.j.na===this.G,"Playback is required for live."),1/0!==this.Nla},r.prototype.OTb=function(t){return o.Ua(this.ub,"Unexpected call to getLiveEventState(). isLive:"+this.ub),o.Ua(this.j&&this.j.na===this.G,"Playback is required for live."),t<this.gVa?n.Eia.Kvb:t<this.Nla?n.Eia.Tsb:n.Eia.srb},nt.Object.defineProperties(r.prototype,{ub:{configurable:!0,enumerable:!0,get(){var t,e=(i=this.G).ja,i=i.he;return e?(e=(t=e.hb).mfa,t=t.vQ,o.Ua("LIVE"===e&&!!t||"VOD"===e&&!t,"streamingType and liveMetadata mismatch - streamingType:"+e+", liveMetadata:"+t),e="LIVE"===e&&!!t,o.Ua("live"===i&&e||"live"!==i&&!e,"uiLabel and isLiveManifest mismatch - uiLabel:"+i+", isLiveManifest:"+e),e):"live"===i}}}),e.iMa=r},function(t,e,i){var n,r,a,o,s;function u(t,e){var n=s.Sq.call(this)||this;return n.Ga=t,n.paused=!1,n.wE=function(){var t,e,i=n.kg.JP();n.kg.dn.value&&null!=(t=null==i?void 0:i.Ys)&&t.vh.KJ?(t=n.fs,n.fs=null==(e=i.Ys)?void 0:e.vh.id,t!==n.fs&&(n.Aa.debug("Starting to track ad pause state to collect 3P impression logging data for ad ",n.fs),n.RN=void 0,n.paused=!1,n.F_=void 0,n.trace=[]),e=n.paused,n.paused=n.j.paused.value,e!==n.paused&&(n.paused?(n.F_=n.Ga.Tb(),n.RN=i.position.offset.W,n.Aa.debug("Ad "+n.fs+" paused at "+n.RN+" ms into the ad")):void 0!==n.F_&&void 0!==n.RN&&(i=n.Ga.Tb().Ea(n.F_).ka(o.pa),n.Aa.debug("Ad "+n.fs+" resumed. Pause duration: "+i),n.trace.push([n.RN,i]),n.RN=void 0,n.F_=void 0))):n.unsubscribe()},n.Aa=e.jb("AdPauseStateTracker"),n}_esm(e),e.vFa=void 0,t=i(0),n=i(1),r=i(18),a=i(7),o=i(5),S(u,(s=i(309)).Sq),u.prototype.start=function(t){this.mQ||(s.Sq.prototype.start.call(this,t),this.j.paused.addListener(this.wE)),this.wE()},u.prototype.unsubscribe=function(){s.Sq.prototype.unsubscribe.call(this),this.j.paused.removeListener(this.wE),this.RN=void 0,this.paused=!1,this.F_=void 0},i=u,i=t.__decorate([n.$(),t.__param(0,n.l(r.$c)),t.__param(1,n.l(a.ob))],i),e.vFa=i},function(t,e,i){var n,r,a,o,s;function u(t,e){var n=s.Sq.call(this)||this;return n.$f=t,n.Mqa=e,n.wE=function(){var t,e,i=n.kg.JP();n.kg.dn.value&&null!=(t=null==i?void 0:i.Ys)&&t.vh.KJ?(t=n.fs,n.fs=null==(e=i.Ys)?void 0:e.vh.id,t!==n.fs&&(n.Aa.debug("Starting to track ad volume changes to collect 3P impression logging data for ad ",n.fs),n.trace=[]),(e=n.trace[n.trace.length-1])&&e[0]===i.position.offset.W&&n.trace.pop(),n.trace.push([i.position.offset.W,n.j.PLb])):n.unsubscribe()},n.Aa=t.jb("AdVolumeTracker"),n.X3a=e(o.Fh(1)),n}_esm(e),e.DFa=void 0,t=i(0),n=i(1),r=i(176),a=i(7),o=i(5),S(u,(s=i(309)).Sq),u.prototype.start=function(t){this.mQ||(s.Sq.prototype.start.call(this,t),this.j.volume.addListener(this.MO),this.j.muted.addListener(this.MO))},u.prototype.unsubscribe=function(){s.Sq.prototype.unsubscribe.call(this),this.j.volume.removeListener(this.MO),this.j.muted.removeListener(this.MO)},i=u,i=t.__decorate([n.$(),t.__param(0,n.l(a.ob)),t.__param(1,n.l(r.a3))],i),e.DFa=i},function(t,e,i){var n,r,a,o,s;function u(t,e){var n=s.Sq.call(this)||this;return n.Mqa=e,n.wE=function(){var t,e,i=n.kg.JP();n.kg.dn.value&&null!=(t=null==i?void 0:i.Ys)&&t.vh.KJ?(t=n.fs,n.fs=null==(e=i.Ys)?void 0:e.vh.id,t!==n.fs&&(n.Aa.debug("Starting to track window size changes to collect 3P impression logging data for ad ",n.fs),n.trace=[]),(e=n.trace[n.trace.length-1])&&e[0]===i.position.offset.W&&n.trace.pop(),n.trace.push([i.position.offset.W,bt.innerHeight,bt.innerWidth])):n.unsubscribe()},n.Aa=t.jb("AdResizeTracker"),n.X3a=e(o.Fh(1)),n}_esm(e),e.zFa=void 0,t=i(0),n=i(1),r=i(176),a=i(7),o=i(5),S(u,(s=i(309)).Sq),u.prototype.start=function(t){this.mQ||(s.Sq.prototype.start.call(this,t),bt.addEventListener("resize",this.MO))},u.prototype.unsubscribe=function(){s.Sq.prototype.unsubscribe.call(this),bt.removeEventListener("resize",this.MO)},i=u,i=t.__decorate([n.$(),t.__param(0,n.l(a.ob)),t.__param(1,n.l(r.a3))],i),e.zFa=i},function(t,e){_esm(e),e.v2="AdTrackerBaseSymbol"},function(t,e,u){var c,f,r,a,s,h,l,d,p,b,o,g,m,v,y,w;function i(t,e,i){var n=this;this.yb=t,this.j=e,this.debug=i,this.hr=this.Ni=this.OD=!1,this.Ss=this.ro=void 0,this.cf=function(){var t,e,i;n.debug.assert(n.qa,"has access to asePlaygraph"),n.debug.assert(n.fd,"has access to internalLogger"),n.debug.assert(n.fw,"has access to mediaBufferGetLogFields"),e=n.$p,i=null==(i=null==(t=n.bc.get())?void 0:t.Xa)?void 0:i.ta,t={type:"logdata",target:"startplay",fields:{hasasereport:n.j.bP,hashindsight:!1,buffCompleteReason:e.reason,actualbw:i,initSelReason:null!=(i=e.initSelReason)?i:"unknown",bcVBufferLevelMs:e.vBufferLevelMs,bcABufferLevelMs:e.aBufferLevelMs}},h.J7({Xra:t,ik:n.ik,loadTime:n.loadTime}),n.qa.J1("startplay",r.ke.Hq),null!=(i=n.Ia)&&i.Fe?(n.fd.trace("Buffering complete",{Cause:"ASE Buffering complete",evt:e},n.fw()),n.j.$p=e,n.j.ft.set(l.Tf.Me),n.cRb||(n.cRb=!0,n.j.Se("pb")),n.hf.value!==c.za.Ns&&n.hf.value!==c.za.Uj&&n.play()):n.fd.error("Shim received buffering complete but player has no position (player "+(n.Ia?"":"un")+"defined, state "+n.j.state+")")},this.oW=function(){var t;n.debug.assert(n.fd,"has access to internalLogger"),n.ro=void 0,n.j.paused.value&&n.vK&&(n.vK=!1,n.j.paused.set(!1,{Gca:!0})),null!=(t=n.j.qf)&&t.oIb(),null!=(t=n.m_)&&t.call(n),n.m_=void 0},this.events=new w,this.ph=new v.Vka(this.Yx.bind(this))}_esm(e),e.VFa=void 0,c=u(63),f=u(12),r=u(299),a=u(58),s=u(4),h=u(1353),l=u(16),d=u(20),p=u(15),b=u(5),o=u(1354),g=u(93),m=u(70),v=u(543),u(137),y=u(49),w=u(117).EventEmitter,i.prototype.cd=function(){var t;this.hr=!1,this.bc.$R(null),this.debug.assert(this.mj,"has access to streamingEngine"),this.qa&&this.mj.Aw(this.qa),this.Ia&&this.mj.DR(this.Ia),this.mj.UAa(this.ph.rm(this.yb.na.N)),this.ph.clear(),null!=(t=this.lk)&&t.Hr()},i.prototype.Dbc=function(t){var e=t.config,i=t.yr,n=t.fd,r=t.Le,a=t.fw,o=t.dk,s=t.R0;t=t.$K,this.fd=n,this.log=n.z8("AseIntegrationImpl"),this.fw=a,this.R0=s,this.$K=t,a=this.j.na,this.debug.assert(a,"has a playback segment"),this.debug.assert(e,"has access to config"),this.debug.assert(r,"has access to utils"),this.debug.assert(o,"has access to getCategoryLog"),this.debug.assert(i,"has access to aseGlobals"),this.debug.assert(i.mj,"has access to streamingEngine"),this.debug.assert(a.Sc,"has access to parsedManifest"),this.debug.assert(a.ja,"has access to manifest"),this.config=e,this.mj=i.mj,i.Ce.set(u(178)(e),!0,o("ASE")),i.Ce.set({maxNumberTitlesScheduled:null!=(t=null==(s=e.M6b)?void 0:s.maxNumberTitlesScheduled)?t:1},!0,n),e.SIb&&!a.wq.ub&&a.ja.hb.duration<3e5?i.Ce.A_({expandDownloadTime:!1},!0,n):i.Ce.A_({expandDownloadTime:i.Ce.Jeb().expandDownloadTime},!0,n),e=a.background||e.K6b&&"postplay"===a.he?"historical":i.Ce.Jeb().initBitrateSelectorAlgorithm,i.Ce.A_({initBitrateSelectorAlgorithm:e},!0,n),e=null==(o=null==(t=null==(s=null==(o=a.Jh)?void 0:o.value)?void 0:s.streams)?void 0:t[0])?void 0:o.mf,i.Ce.A_(d.I0a(!!a.kb.$h,!!a.kb.Zaa,e),!0,n),n=r.gK({},d.kqa(a.wq.ub?"live":a.he)),this.Ce=i.Ce.si(n),c.platform.events.emit("networkchange",a.Sc.Hac),this.OD=!0},i.prototype.Faa=function(t){var e;this.debug.assert(this.mj,"has access to streamingEngine"),A=this.j.ek(t.X),this.debug.assert(A.Sc,"has access to playback parsedManifest"),e=t.flags,this.bc.reset(),this.Fd=new Set([y.u.P,y.u.J]),(e.DG||e.iW)&&this.Fd.delete(e.DG?y.u.P:y.u.J),this.CS=[A.Sc.pMb,A.Sc.xMb],this.Yx(A.L,void 0,t.Zx),this.eYb(t),this.FO()},i.prototype.Nw=function(t){var e;null!=(e=this.qa)&&e.Nw(t)},i.prototype.vFb=function(t){var e,o=this,i=t.loadTime,n=t.ik;this.debug.assert(this.qa,"has access to asePlaygraph"),this.debug.assert(this.Ia,"has access to asePlayer"),this.ik=n,this.loadTime=i,t=this.qa.events,e=this.Ia.events,t.addListener("error",function(t){"NFErr_MC_StreamingFailure"===t.error&&(o.fd.trace("receiving an unrecoverable streaming error: "+JSON.stringify(t)),o.fd.trace("StreamingFailure, buffer status:"+JSON.stringify(o.fw())),a.pg(function(){o.j.Md(s.Z.Ynb,{Ba:t.nativeCode,Sb:t.errormsg,El:t.httpCode,vca:t.networkErrorCode})}))}),t.addListener("logdata",function(t){var e;"string"==typeof t.target&&"object"==typeof t.fields&&(t.fields.aseApiVersion=null==(e=o.qa)?void 0:e.sI,h.J7({Xra:t,ik:n,loadTime:i}))}),e.addListener("logdata",function(t){"string"==typeof t.target&&"object"==typeof t.fields&&h.J7({Xra:t,ik:n,loadTime:i})}),t.addListener("bufferingStarted",function(){o.j.ft.set(l.Tf.ed)}),t.addListener("bufferingComplete",function(t){o.$p=t}),this.j.paused.addListener(function(t){var e;o.debug.assert(o.fd,"has access to internalLogger"),null!=(e=t.Vk)&&e.Gca||!o.OD||(t.newValue&&o.hf.value===c.za.Gc?(o.hf.set(c.za.Ug),o.Nd.emit("paused",{type:"paused",pts:o.Nd.tc})):t.newValue||o.hf.value!==c.za.Ug||(o.hf.set(c.za.Gc),o.Nd.emit("playing",{type:"playing",pts:o.Nd.tc}))),t.newValue||(o.vK=!1),o.fd.info("Paused changed",{From:t.oldValue,To:t.newValue,MediaTime:g.Tj(o.j.mediaTime.value)})}),this.j.Bc.addListener(function(t){var e,i;o.OD&&(o.debug.assert(o.fd,"has access to internalLogger"),t.Vk&&t.Vk.KYa?o.fd.trace("Not processing already applied track",null==(e=t.newValue)?void 0:e.trackId):(i=t.newValue,o.sfa({zo:i.sy,toJSON:function(){return i.Bh}})?o.fd.trace("ASE accepted the audio track switch",null==(e=t.newValue)?void 0:e.trackId):(o.fd.trace("ASE rejected the audio track switch",null==(e=t.newValue)?void 0:e.trackId),t.oldValue&&t.oldValue.sy!==i.sy&&o.j.Bc.set(t.oldValue,{KYa:!0}))))}),t.addListener("serverSwitch",function(t){var e;o.j.fireEvent(l.ma.P0,t),"video"===t.mediatype?e=y.u.J:"audio"===t.mediatype&&(e=y.u.P),p.rd(e)&&o.R0(t.segmentId,t.server,e)}),t.addListener("streamSelected",function(t){var e,i,n,r;if(o.hr){if(i=t.manifest.Og,!o.j.BWb(i)&&o.config.gQb)return o.j.Md(s.Z.$sb,{TE:i});i=(null==(e=o.qa)?void 0:e.my(t.position)).bk.W,e=[],t.mediaType===y.u.J?(n=o.j.t8a(t.streamId),r=o.j.tf,e=o.j.gF()):t.mediaType===y.u.P&&(n=o.j.f8a(t.streamId),r=o.j.Qh,e=o.j.hSb()),n&&r?r.set(n,{FI:i,tW:t.bandwidth}):o.fd.error("no matching stream for streamSelected event",{streamId:t.streamId,mediaType:t.mediaType,streamList:e,cachedManifest:o.j.BI})}}),t.addListener("segmentNormalized",function(t){var e,i,n,r=t.segmentId,a=Math.floor(t.viewableContentEnd.W);t=Math.floor(t.viewableEarliestContentEnd.W),a=b.vc(a),t=b.vc(t),!o.j.DWb(r)&&o.ak&&o.ak.O[r]&&(e=o.ak.O[r],(i=o.ak.O[r].pc)&&o.yb.fz(i)&&null!=(n=(i=o.j.ek(i)).ja)&&n.ev&&null!=n&&n.ev.some(function(t){return t.hb.L===e.N})&&o.j.s1a(e.N,{yl:{Oe:n.hb.Oe,Ch:n.hb.L}},i.ga)),(r=o.j.ek(r))&&(r.Wx=a,r.Kbb=t),o.j.Wt||(o.j.Wt=a)}),e.addListener("segmentPresenting",function(t){var e,i,n;o.debug.assert(o.qa,"has access to asePlaygraph"),o.debug.assert(o.Ia,"has access to asePlayer"),o.debug.assert(o.$K,"has access to segmentPresentingHandler"),e=o.qa.my(t.position),i=void 0,(n=null==(n=t.inner)?void 0:n.position)&&o.ak&&(i=o.ak.O[n.X]),o.$K({N:e.N,II:i,MJ:!1}),o.j.fireEvent(l.ma.ZK,{type:"segmentPresenting",position:{segmentId:t.position.X,offset:t.position.offset},playerTimestamp:t.playerTimestamp,metrics:t.metrics}),o.Ss=o.Ia.cl()}),e.addListener("ptsChanged",function(t){(t=t.forcedTimestamp)&&o.j.qf.ebc(t.W),o.Nd.emit("skipped")}),t.addListener("locationSelected",function(t){o.j.fireEvent(l.ma.CZ,t)}),t.addListener("aseReportEnabled",function(){o.j.bP=!0}),t.addListener("aseReport",function(t){o.j.fireEvent(l.ma.aO,t)}),t.addListener("mediaRequestComplete",function(t){(t=null==(t=null==t?void 0:t.U9b)?void 0:t.cadmiumResponse)&&o.j.fireEvent(l.ma.NE,{response:t,L:o.j.na.L})})},i.prototype.cl=function(){var t,e=null==(i=this.Ia)?void 0:i.UP(),i=(null!=(n=this.Ss)?n:e&&this.Ia.cl())||{},n=i.G;return e=i.Dd,t=i.sC,i=i.Cq,{id:String(null==n?void 0:n.id),bf:null!=(e=null==e?void 0:e.W)?e:0,dd:null!=(e=null==n?void 0:n.kf.W)?e:1/0,Ic:null!=(e=null==n?void 0:n.Lg.W)?e:0,gf:null!=(n=null==t?void 0:t.W)?n:1/0,ud:null!=(e=null==i?void 0:i.W)?e:0}},i.prototype.m$=function(){return{bf:0}},i.prototype.Gaa=function(){var t,e;return this.debug.assert(this.qa,"has access to asePlaygraph"),t={},e=this.qa.iy(),t.vbuflmsec=e.totalvbuflmsecs,t.vbuflbytes=e.vbuflbytes,t.abuflmsec=e.totalabuflmsecs,t.abuflbytes=e.abuflbytes,t},i.prototype.paused=function(){},i.prototype.Lza=function(){this.Nd.emit("playbackRateChanged",{type:"playbackRateChanged",pts:this.Nd.tc})},i.prototype.nW=function(t,e){var i;return this.debug.assert(this.j.ja,"has access to playback manifest"),i=this.CS[y.u.P],t.L===this.j.ja.hb.L?i:this.IQb(this.j.ja.hb.dv[i],e)},i.prototype.IQb=function(r,t){var e,i,n;return this.debug.assert(this.fd,"has access to internalLogger"),e=t.filter(function(t){return t.profile===r.profile}).sort(function(t,e){var i,n=(t.language===r.language||"zxx"===t.language?0:1)-(e.language===r.language||"zxx"===e.language?0:1);return t=0===(n=0===n?(t.Hi===r.Hi?0:1)-(e.Hi===r.Hi?0:1):n)?(null!=(i=t.cc)?i:0)-(null!=(i=e.cc)?i:0):n}),i=0,(n=rt(e).next().value)&&t.some(function(t,e){if(t===n)return i=e,!0}),i},i.prototype.sfa=function(i){var t,n,e=this;return this.debug.assert(this.fd,"has access to internalLogger"),this.debug.assert(this.qa,"has access to asePlaygraph"),this.debug.assert(this.Ia,"has access to asePlayer"),this.debug.assert(this.j.ja,"has access to playback manifest"),!this.GL&&(!!this.j.ja.hb.audio_tracks.some(function(t,e){if(t.track_id===i.zo)return n=e,!0})&&(this.ro=n,null!=(t=this.j.qf)&&t.Mcc(),this.j.paused.value||(this.Ia.pause([y.u.P]),this.vK=!0,this.j.paused.set(!0,{Gca:!0})),this.debug.poa(this.ro,"has access to valid requestedAudioTrackIndex number"),this.CS[y.u.P]=this.ro,(this.qa.hz({ss:this.nW.bind(this)},{ss:function(){return e.CS[y.u.J]}})||this.vK)&&this.Ia.resume(this.vK?[y.u.P]:void 0),this.As(this.oW),!0))},i.prototype.up=function(){var t;this.hf.set(c.za.eg),null!=(t=this.qa)&&t.J1("intrplay",r.ke.up),this.Nd.emit("underflow",{type:"underflow",pts:this.Nd.tc}),this.As(this.cf)},i.prototype.ws=function(t,e){this.aD.ws(t,e)},i.prototype.open=function(){this.hr||(this.debug.assert(this.qa,"has access to asePlaygraph"),this.debug.assert(this.Ia,"has access to asePlayer"),this.hr=this.Ni=!0,this.qa.open(),this.debug.assert(this.jz,"invalid start position relative to playgraph"),this.qa.Dw(this.jz,c.M.Ja(this.j.ea)),this.hf.set(c.za.ed),this.As(this.cf),this.qa.dt(this.Ia),this.L_b())},i.prototype.play=function(){this.debug.assert(this.qa,"has access to asePlaygraph"),this.debug.assert(this.Ia,"has access to asePlayer"),0!==this.qa.state&&(this.Ia.resume(this.vK?[y.u.P]:void 0),this.hf.set(c.za.Gc),this.Nd.emit("playing",{type:"playing",pts:this.Nd.tc}))},i.prototype.stop=function(){var t;this.hf.set(c.za.Ns),null!=(t=this.Ia)&&t.pause(),this.events.emit("stop"),this.Nd.emit("paused",{type:"paused",pts:this.Nd.tc})},i.prototype.flush=function(){this.debug.assert(this.qa,"has access to asePlaygraph"),this.debug.assert(this.mj,"has access to streamingEngine"),this.hr&&this.hf.value!==c.za.Uj&&this.hf.value!==c.za.Ns&&this.stop(),this.qa.J1("endplay",r.ke.iq),this.qa.xd(),this.mj.dj.save(),this.mj.ep.save()},i.prototype.Po=function(){var t;return null==(t=this.qa)?void 0:t.kg},i.prototype.kv=function(t){var e;return this.debug.assert(this.qa,"has access to asePlaygraph"),e=c.M.Ja(t),(e=this.qa.On(e,{zjb:!0,yjb:!0}))?this.qa.ba.O[e.X].va+Number(e.offset.W.toFixed(0)):this.fail("convertPlayerPtsToContentPts failed to convert playerPts: "+t)},i.prototype.DO=function(t,e){return this.debug.assert(this.qa,"has access to asePlaygraph"),this.debug.assert(this.fd,"has access to internalLogger"),this.qa.ba.O[t]||(t=this.LX(e)),this.debug.I7(t,"has access to segmentId"),t={X:t,offset:c.M.Ja(e-this.qa.ba.O[t].va)},(t=this.qa.ny(t))?t.W:e},i.prototype.npa=function(t,e){var i;return this.debug.assert(this.qa,"has access to asePlaygraph"),this.debug.assert(this.Ia,"has access to asePlayer"),e&&this.qa.ba.O[e]||(e=null!=(i=this.LX(t))?i:null==(i=this.Ia)?void 0:i.og.X),e=this.j.ek(e),t={bk:c.M.Ja(t),N:e.L},null==(i=this.qa.vn(t))?void 0:i.dd},i.prototype.rB=function(t){var e=void 0===e||e;this.Ni?Number.isFinite(t)&&(this.debug.assert(this.Ia,"has access to asePlayer"),e?this.Ia.ZR(t):this.Ia.Oea(t)):this.fail("Must call open prior to drmReady")},i.prototype.faa=function(){var t;return!(null==(t=this.Ia)||!t.Fe)&&this.Ia.Yo(this.yb.na.N)},i.prototype.dh=function(t){var e,i;return!!this.Ia&&(e=this.Po(),t=c.M.Ja(t),i=this.Ia.dh(t),e&&this.j.Y$()?i&&e.dh(t):i)},i.prototype.iu=function(t,e){var i;return this.debug.assert(this.qa,"has access to asePlaygraph"),this.debug.assert(this.Ia,"has access to asePlayer"),e&&this.qa.ba.O[e]||(e=null!=(i=this.LX(t))?i:this.yb.Sh),this.debug.I7(e,"has access to segmentId"),this.debug.assert(this.qa.ba.O[e],"segment exists in playgraph map"),e={X:e,offset:c.M.Ja(t-this.qa.ba.O[e].va)},this.qa.Dw(e,c.M.Ja(t)),this.Ia.resume(),this.hf.set(c.za.ed),this.As(this.cf),t=this.qa.IBa(e),this.debug.assert(t,"Valid position must be provided for seek"),t.offset.W},i.prototype.addEventListener=function(t,e){return this.events.addListener(t,e),this},i.prototype.removeEventListener=function(t,e){return this.events.removeListener(t,e),this},i.prototype.IS=function(t,e){var i={};this.qa.Rj((i[t]=e,i))},i.prototype.qt=function(t,e){var i;return this.debug.assert(this.fd,"has access to internalLogger"),this.debug.assert(this.qa,"has access to asePlaygraph"),this.debug.assert(this.Ia,"has access to asePlayer"),B=this.cl().id,i=this.qa.HP(B,t),e?i.Vmb?void 0!==i.VQ?i.VQ===t:(this.qa.lj(B,t,!1,e),!0):(this.fd.warn("chooseNextSegment, seamless transition, invalid destination: "+t+" for current segment: "+B),!1):void 0===i.VQ&&(i.mO&&(this.Ia.reset(),this.qa.lj(B,t,!1,e),this.Ia.resume(),this.hf.set(c.za.ed),this.As(this.cf)),!!i.mO)},i.prototype.lj=function(t,e,i,n){this.debug.assert(this.qa,"has access to asePlaygraph"),this.qa.lj(t,e,i,n)},i.prototype.$l=function(){var t;return this.debug.assert(this.fd,"has access to internalLogger"),t=this.Nd.tc,this.Nd.emit("skipped",{type:"skipped",pts:t}),new c.vH(Promise.resolve()).vBa},i.prototype.LX=function(t){var e,i,n,r,a,o,s;for(n in this.debug.assert(this.qa,"has access to asePlaygraph"),this.debug.assert(this.fd,"has access to internalLogger"),e=[],i=1/0,(A=this.qa.ba).O)a=(r=A.O[n]).va,r=r.wa,o=t<Number(null!=r?r:1/0),a<=t&&o?e.push(n):(a=Math.min(Math.abs(t-a),Math.abs(t-r)))<i&&(i=a,s=n);return t=e[0]||s,this.debug.I7(t,"has access to locatedSegmentId"),t},i.prototype.L_b=function(){var t,e=this;this.debug.assert(this.j.Yb,"has access to mediaElement"),t=this.j.Yb.ca,this.debug.assert(t,"has access to videoElement"),t.addEventListener("play",function(){e.hf.value===c.za.Ug&&(e.hf.set(c.za.Gc),e.Nd.emit("playing",{type:"playing",pts:e.Nd.tc}))}),t.addEventListener("pause",function(){e.hf.value===c.za.Gc&&(e.hf.set(c.za.Ug),e.Nd.emit("paused",{type:"paused",pts:e.Nd.tc}))})},i.prototype.fail=function(t){var e;null!=(e=this.qa)&&e.events.emit("error",{type:"error",error:"NFErr_MC_StreamingFailure",errormsg:t})},i.prototype.As=function(t){var e,i,n,r=this;t!==this.oW&&this.GL?this.m_=t:(n=null==(e=this.Ia)?void 0:e.ew.value,e=null==(i=this.qa)?void 0:i.Cf.value,i=!0===n,n=e===c.Nc.Vj,null!=(e=this.Ia)&&e.ew.removeListener(this.Sbb),null!=(e=this.qa)&&e.Cf.removeListener(this.g_a),i&&n?t():(this.Sbb=function(){return r.As(t)},this.g_a=function(){return r.As(t)},null!=(e=this.Ia)&&e.ew.addListener(this.Sbb),null!=(i=this.qa)&&i.Cf.addListener(this.g_a)))},i.prototype.o5a=function(t){var e,i=this;return t=this.j.Bn(t),Promise.resolve(null!=(e=t.ja)?e:this.Pda(t)).then(function(t){return{ja:t=t.hb,Yi:t.$$&&!t.lF,config:i.Ce,Fd:[].concat(J(i.Fd))}})},i.prototype.Pda=function(e){var t,i,n=this,r=Promise.resolve();return e.Vi&&(t=e.Vi.Ch,(i=null==(i=this.j.Bn(t).ja)?void 0:i.hb)?e.Vi.D_=i:r=this.ph.rm(t).xp.then(function(t){return t.ja}).then(function(t){e.Vi.D_=t}).catch(function(){return n.j.Md(s.Z.mM,s.Y.iob)})),r.then(function(){return n.j.Pda(e)}).then(function(){return e.ja})},i.prototype.Yx=function(t,e,i){var n,r,a,o,s,u,c,h=this;this.debug.assert(this.mj,"has access to streamingEngine"),o={N:t,Ch:null==(n=null==e?void 0:e.yl)?void 0:n.Ch,Oe:null==(r=null==e?void 0:e.yl)?void 0:r.Oe},this.ph.has(o)||(!this.j.Nua(t)&&null!=(r=null==e?void 0:e.yl)&&r.Ch&&this.j.Nua(null==(r=null==e?void 0:e.yl)?void 0:r.Ch)&&(n=this.j.Bn(null==(a=e.yl)?void 0:a.Ch),this.j.s1a(t,e,n.ga)),this.j.Nua(t)&&(s=this.j.Bn(t)),u=i?i.ga:s?s.ga:void 0,a=i?i.jp:s?s.Xf:void 0,this.ph.store(o,{i8:function(){},equals:function(t){return t&&t.N===o.N&&(u===t.ga||!t.ga||!u)},get xp(){return c=c||h.o5a(t)},set xp(t){c=t},events:new f.EventEmitter,ga:u,N:o.N,Mr:!1,BDa:!1}),this.Ce.sB&&this.mj.lG(this.ph.rm(o.N,e),{ga:u,jp:a,ME:null==i?void 0:i.vv}))},i.prototype.qz=function(t){var e,i;return this.debug.assert(this.mj,"has access to streamingEngine"),e=(A=this.j.ek(t)).Vi,A={N:A.L,Ch:null==e?void 0:e.Ch,Oe:null==e?void 0:e.Oe},t=this.yb.Ee(t).N,this.ph.has(A)?(e&&(i={yl:{Oe:null==e?void 0:e.Oe,Ch:e.Ch}}),(e=this.ph.rm(t,i)).xp=this.o5a(t),this.mj.qz(e)):Promise.resolve()},i.prototype.HP=function(t){var e;return this.debug.assert(this.Ia,"has access to asePlayer"),this.debug.assert(this.qa,"has access to asePlaygraph"),this.qa.HP(null==(e=this.Ia.cl().G)?void 0:e.id,t)},i.prototype.bF=function(t){var e;return null==(e=this.qa)?void 0:e.bF(t)},i.prototype.eYb=function(t){var e=this,i=t.Zx,n=t.X;this.debug.assert(this.mj,"has access to streamingEngine"),this.debug.assert(this.fd,"has access to internalLogger"),t=this.j.ek(n),n=(t=this.yb.H$(t)).O[n],this.debug.assert(n,"segment exists"),this.jz=o.AY(n.N,t,this.j.ea,n.va),i=Object.create(this.Ce,{vv:{value:i.vv},D3a:{value:this.j.background}}),this.hf=new m.$b(c.za.Dg),this.qa=this.mj.oI(t,this.Ce.bfb,i,this.ph),this.aD=new c.xH(this.fd),i=this.qa.EE(this.aD),t=this.qa.DE(),this.qa.Qea(t,i),this.qa.hz({ss:function(){return e.CS[y.u.P]}},{ss:function(){return e.CS[y.u.J]}}),this.vK=!1},i.prototype.FO=function(){var t,e=this;this.debug.assert(this.mj,"has access to streamingEngine"),t=Object.create(this.Ce,{Fd:{value:[].concat(J(this.Fd))},qY:{value:function(){return e.E$()}}}),this.Nd=Object.create(new f.EventEmitter,{tc:{get(){return e.debug.poa(e.j.mediaTime.value,"has access to mediaTime.value"),c.M.Ja(e.j.mediaTime.value)}},playbackRate:{get(){return Math.max(e.j.playbackRate.value,.01)}},pY:{value:function(){return e.debug.assert(e.j.Yb,"has access to mediaElement"),e.j.Yb}}}),this.Ia=this.mj.pYa(this.Nd,t)},i.prototype.E$=function(){return this.lk||(this.lk=new c.platform.MediaSource(this.Nd),this.lk.Rc||(this.lk.Rc=c.platform.MediaSource.Rc)),this.lk},nt.Object.defineProperties(i.prototype,{GL:{configurable:!0,enumerable:!0,get(){return void 0!==this.ro}},bc:{configurable:!0,enumerable:!0,get(){return this.debug.assert(this.mj,"has access to streamingEngine"),this.mj.bc}},ak:{configurable:!0,enumerable:!0,get(){for(var t,e=null==(t=this.qa)?void 0:t.ak;null!=e&&e.ak;)e=e.ak;return null==e?void 0:e.ba}},t0a:{configurable:!0,enumerable:!0,get(){for(var t=this.Ia;null!=t&&t.YY;)t=t.YY;return t}},MLb:{configurable:!0,enumerable:!0,get(){var t,e;if(null!=(t=this.t0a)&&t.Fe&&(e=(t=this.t0a.og)&&(null==(e=this.ak)?void 0:e.O[t.X])))return{bk:c.M.Ja(t.offset.W+e.va),N:e.N}}}}),e.VFa=i},function(t,e,i){var n;_esm(e),e.J7=void 0,n=i(15),e.J7=function(t){var a,o,e=t.ik,i=t.loadTime;t=t.Xra,a=n.Oa(i)?i:0,o=e[t.target]||{},e[t.target]!==o&&(e[t.target]=o),Object.entries(t.fields).forEach(function(t){var e,i,n,r=rt(t);t=r.next().value,"object"!=typeof(r=r.next().value)||null===r?o[t]=r:"count"===(e=r.type)?(void 0===o[t]&&(o[t]=0),++o[t]):void 0!==r.value?"array"===e?(e=o[t],i=r.adjust,n=r.value,e=e||(o[t]=[]),i&&0<i.length&&i.forEach(function(t){n[t]-=a||0}),e.push(n)):o[t]="sum"===e?(o[t]||0)+r.value:r.value:o[t]=r})}},function(t,e,i){var r,a;_esm(e),e.AY=void 0,r=i(63),a=i(23),e.AY=function(t,e,i,n){return e.O[e.yd].va===n?(t=r.NI(e,t,r.M.Ja(i)),a.Ua(t,"has valid start position relative to playgraph"),t):{X:e.yd,offset:r.M.Ka}}},function(t,e,i){var f,n,l,r,d,p,b;function a(t,e,i,n,r,a,o,s,u,c){var h=this;this.Xec=t,this.j=e,this.id=i,this.height=n,this.width=r,this.a6b=a,this.b6b=o,this.size=s,this.Rv=u,this.urls=c,this.type=f.pj.dEa,this.retry=!0,this.state=d.ar.z4,this.Bh={},this.L7={},this.N7b=function(t){if(t.ha)try{h.data=h.Xec.parse(t.content),h.state=d.ar.ZG,h.log.trace("TrickPlay parsed",{Images:h.data.images.length},h.Bh),h.j.fireEvent(p.ma.H1)}catch(t){h.state=d.ar.zOa,h.log.error("TrickPlay parse failed.",t)}else h.state=d.ar.z4,h.log.error("TrickPlay download failed.",b.Oz(t),h.Bh)},this.log=l.aj(e,"TrickPlay")}_esm(e),e.wTa=void 0,f=i(91),n=i(20),l=i(9),r=i(107),d=i(552),p=i(16),b=i(4),a.prototype.pTb=function(t){if(this.data&&(this.Rv&&(t+=this.Rv),0<=(t=Math.floor(t/this.data.header.flb))&&t<this.data.images.length))return{image:this.data.images[t],time:t*this.data.header.flb,height:this.height,width:this.width,pixelAspectHeight:this.a6b,pixelAspectWidth:this.b6b}},a.prototype.MP=function(){switch(this.state){case d.ar.ZG:return"downloaded";case d.ar.LOADING:return"loading";case d.ar.OT:return"downloadfailed";case d.ar.zOa:return"parsefailed";default:return"notstarted"}},a.prototype.download=function(){var t=this.GVb();t?(this.state=d.ar.LOADING,this.LNb(t)):this.retry=!1},a.prototype.getState=function(){return this.state},a.prototype.GVb=function(){var t,e=this,i=Object.keys(this.urls).find(function(t){return(e.L7[e.urls[t]]||0)<=n.config.Tec});if(i)return(t=this.urls[i])in this.L7?this.L7[t]++:this.L7[t]=1,{url:t,Ao:i}},a.prototype.LNb=function(t){var e;this.log.trace("Downloading",t.url,this.Bh),e=this.ita(t.Ao),t={responseType:r.PY,xc:e,url:t.url,track:this,ku:null!=(e=null==e?void 0:e.type)?e:"unknown",KE:"trickplay"},this.j.oaa.download(t,this.N7b)},a.prototype.ita=function(e){return this.j.Jg.find(function(t){return t&&t.id===e})},e.wTa=a},function(t,e,i){var n;function r(t,e,i,n){this.gra=t,this.debug=e,this.Ga=i,this.j=n,this.fda=[],this.qca={},this.ira={},this.xsa=!1,this.Hkb=1,this.sGa=7.8125}_esm(e),e.vIa=void 0,n=i(5),i(16),i(15),i(107),r.prototype.register=function(t,e){this.debug.assert(!(0<=this.fda.indexOf(t)),"panel already registered"),this.qca[t]=e,this.fda.push(t)},r.prototype.udb=function(t){var e=this;this.ira[t]=!0,this.xsa||(this.xsa=!0,setTimeout(function(){return e.WQb()},0))},r.prototype.bUb=function(t){return(t=this.qca[t])?t():void 0},r.prototype.jY=function(){var t=this.j.oda;return t?t.jY():[]},r.prototype.addEventListener=function(t,e){this.gra.addListener(t,e),this.qca[t]&&this.udb(t)},r.prototype.removeEventListener=function(t,e){this.gra.removeListener(t,e)},r.prototype.getTime=function(){return this.Ga.Tb().ka(n.pa)},r.prototype.WQb=function(){this.xsa=!1;for(var t,e=this.fda.length;e--;)t=this.fda[e],this.ira[t]&&(this.ira[t]=!1,this.gra.Tc(t+"changed",{getModel:this.qca[t]}))},e.vIa=r},function(t,e,i){var n,h,r,f,a,o,s;function u(t,e){var u=this;this.Nn=t,this.Hv=e,this.qlb=function(t){var e,i,n,r,a=u.Hkb++,o=t.request.KE||"dl",s=u.R7a(o,"start");s&&(i=(e=t.request.fC).stream.T.Dq,e=rt(e.stream.T.mi).next().value,(i||e)&&(i=null!=i?i:e.G.id,u.Sjb.has(i)||(n=u.i7a(i),r=t.bu,u.Nn.mark(s,n,r?o+"-"+r+"-"+a:o),t.k7(function(){var t=u.R7a(o,"end");t&&u.Nn.mark(t,n,r?o+"-"+r+"-"+a:o)}))))},this.Hkb=0,this.Sjb=new Set,this.YBa=new Map,e.xX&&this.rhc()}_esm(e),e.NNa=void 0,t=i(0),n=i(1),h=i(60),r=i(83),f=i(5),a=i(107),i=i(39),o={start:{video:h.Ra.oT,audio:h.Ra.kT},end:{video:h.Ra.nT,audio:h.Ra.jT}},u.prototype.j7a=function(e){var i,n,t,r,a,o,s,u;function c(t){return f.timestamp(i.DYa(f.timestamp(t),e,!0))}return i=this,n=new Set,t=e.sd,r=e.ga,a=void 0===e.Mjb?null:e.Mjb,o=e.X,s=this.Nn.Q6a(r),(u=o&&this.i7a(o))&&s.push.apply(s,J(this.Nn.Q6a(u))),this.Nn.Pgb(e.ga),u&&this.Nn.Pgb(u),o&&this.Sjb.add(o),o=[],"pr_ats"in t&&o.push({name:h.Ra.S4,ru:c(t.pr_ats),ga:r,Xf:"request-pre-manifest"}),"ats"in t&&o.push({name:h.Ra.Q4,ru:c(t.ats),ga:r,Xf:"request-manifest"}),"pr_at"in t&&o.push({name:h.Ra.R4,ru:c(t.pr_at),ga:r,Xf:"request-pre-manifest"}),"at"in t&&o.push({name:h.Ra.P4,ru:c(t.at),ga:r,Xf:"request-manifest"}),"lg"in t&&o.push({name:h.Ra.O4,ru:c(t.lg),ga:r,Xf:"request-license"}),"lr"in t&&(o.push({name:h.Ra.N4,ru:c(t.lr),ga:r,Xf:"request-license"}),o.push({name:h.Ra.o2,ru:c(t.lr),ga:r,Xf:"apply-license"})),"ld"in t&&o.push({name:h.Ra.n2,ru:c(t.ld),ga:r,Xf:"apply-license"}),"tt_start"in t&&o.push({name:h.Ra.mT,ru:c(t.tt_start),ga:r,Xf:"request-timed-text"}),"tt_comp"in t&&o.push({name:h.Ra.lT,ru:c(t.tt_comp),ga:r,Xf:"request-timed-text"}),o.concat(s).map(function(t){return i.sec(t,e)}).filter(function(t){return t.ts<=(null!=a?a:t.ts)&&("end"===t.step&&n.add(t.eventId),!0)}).filter(function(t){return!("start"===t.step&&!n.has(t.eventId))}).sort(function(t,e){return t.ts-e.ts}).reduce(function(t,e){var i=e.eventName;return delete e.eventName,i&&(t[i]=e),t},{})},u.prototype.CDb=function(t,e,i){return void 0!==i&&i?t.ka(f.pa)+e.Jj.ka(f.pa):t.ka(f.pa)-e.Jj.ka(f.pa)},u.prototype.DYa=function(t,e,i){if(i=void 0!==i&&i,e.eo){if(!i)return t.ka(f.pa)-e.eo;t.ka(f.pa),e.eo}return this.CDb(t,e,i)},u.prototype.sec=function(t,e){var i=t.Xf,n=t.name;return{eventName:this.W2b(n,i),eventId:i||n,ts:this.DYa(t.ru,e),comp:this.bY(n),cat:this.ASb(n),step:this.nVb(n)}},u.prototype.W2b=function(t,e){switch(t){case h.Ra.mT:case h.Ra.lT:case h.Ra.kT:case h.Ra.jT:case h.Ra.oT:case h.Ra.nT:return t+"-"+e;default:return t}},u.prototype.bY=function(t){switch(t){case h.Ra.S4:case h.Ra.R4:case h.Ra.Q4:case h.Ra.P4:return"manifest";case h.Ra.O4:case h.Ra.N4:case h.Ra.oka:case h.Ra.nka:case h.Ra.m3:case h.Ra.l3:case h.Ra.o2:case h.Ra.n2:return"license";case h.Ra.mT:case h.Ra.lT:case h.Ra.kT:case h.Ra.jT:case h.Ra.oT:case h.Ra.nT:case h.Ra.xga:case h.Ra.wga:return"buffering";case h.Ra.sja:case h.Ra.rja:return"playback";default:return null}},u.prototype.ASb=function(t){switch(t){case h.Ra.S4:case h.Ra.R4:case h.Ra.Q4:case h.Ra.P4:return"aws";case h.Ra.O4:case h.Ra.N4:return"mixed";case h.Ra.sja:case h.Ra.rja:case h.Ra.oka:case h.Ra.nka:case h.Ra.m3:case h.Ra.l3:case h.Ra.o2:case h.Ra.n2:case h.Ra.xga:case h.Ra.wga:return"device";case h.Ra.mT:case h.Ra.lT:case h.Ra.kT:case h.Ra.jT:case h.Ra.oT:case h.Ra.nT:return"cdn";default:return null}},u.prototype.nVb=function(t){switch(t){case h.Ra.S4:case h.Ra.sja:case h.Ra.Q4:case h.Ra.O4:case h.Ra.xga:case h.Ra.mT:case h.Ra.kT:case h.Ra.oT:case h.Ra.oka:case h.Ra.m3:case h.Ra.o2:return"start";case h.Ra.R4:case h.Ra.rja:case h.Ra.P4:case h.Ra.N4:case h.Ra.nka:case h.Ra.l3:case h.Ra.n2:case h.Ra.wga:case h.Ra.lT:case h.Ra.jT:case h.Ra.nT:return"end";default:return null}},u.prototype.R7a=function(t,e){if(t in o[e])return o[e][t]},u.prototype.ufc=function(){a.pf.removeEventListener(a.naa,this.qlb)},u.prototype.rhc=function(){this.ufc(),a.pf.addEventListener(a.naa,this.qlb)},u.prototype.i7a=function(t){var e;return this.YBa.has(t)?this.YBa.get(t):(e=Date.now(),this.YBa.set(t,e),e)},s=u,s=t.__decorate([n.$(),t.__param(0,n.l(r.bU)),t.__param(1,n.l(i.Bp))],s),e.NNa=s},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,d,p,b,g,m,v,y,w,A,_,E,k,S,T,I,O,x,R,P,C,j,N,D,L,B,M,U;_esm(e),e.v0a=void 0,t=i(1),n=i(513),r=i(1359),a=i(100),o=i(1360),s=i(525),u=i(1361),c=i(530),h=i(1362),f=i(531),l=i(1363),d=i(291),p=i(1364),b=i(86),g=i(1365),m=i(1366),v=i(37),y=i(4),w=i(1367),A=i(1368),_=i(1369),E=i(51),k=i(1370),S=i(581),T=i(1371),I=i(510),O=i(1372),x=i(1373),R=i(1374),P=i(368),C=i(1375),j=i(82),N=i(580),D=i(1376),L=i(1377),B=i(1378),M=i(308),U=i(1379),e.v0a=new t.Ad(function(t){t(E.Qm).to(k.fPa),t(n.uPa).to(r.tPa),t(S.aPa).to(T.$Oa),t(I.cPa).to(O.bPa),t(a.Dja).to(o.vPa),t(N.wPa).Ue(function(e){return function(){var t=e.zb.get(j.Zz);return t&&t.Mmb?e.zb.resolve(L.PPa):e.zb.resolve(D.xPa)}}),t(s.ZOa).to(u.YOa),t(c.MPa).to(h.LPa),t(f.oPa).to(l.nPa),t(d.Cja).to(p.pPa),t(b.GSa).to(g.FSa),t(b.MSa).to(m.LSa),t(b.QLa).to(w.PLa),t(b.BSa).to(A.ASa),t(b.qJa).to(_.pJa),t(R.Zub).to(x.yPa),t(P.mPa).to(C.lPa),t(M.Fga).to(B.oFa),t(M.Ega).to(U.kFa),t(b.Rha).Ue(function(e){return function(t){switch(t){case b.Uq.start:return e.zb.get(b.GSa);case b.Uq.stop:return e.zb.get(b.MSa);case b.Uq.mZ:return e.zb.get(b.QLa);case b.Uq.splice:return e.zb.get(b.BSa);case b.Uq.iP:return e.zb.get(b.qJa)}throw new v.jd(y.Z.lub,void 0,void 0,void 0,void 0,"The event key was invalid - "+t)}})})},function(t,e,i){var n,r,a,o,s;function u(t){return o.ii.call(this,t,r.Z.Wsb,1)||this}_esm(e),e.tPa=void 0,t=i(0),n=i(1),r=i(4),a=i(66),o=i(75),i=i(51),S(u,o.ii),u.prototype.Pf=function(t,e){var i=this;return this.send(t,{url:"/"+a.Eg.exa,name:a.Eg.exa,Dm:a.Eg.exa},e).then(function(t){return t.result}).catch(function(t){throw i.An(t)})},u.prototype.kq=function(){return Promise.reject(Error("Links are unsupported with logblobs"))},s=u,s=t.__decorate([n.$(),t.__param(0,n.l(i.Qm))],s),e.tPa=s},function(t,e,i){var c,a,h,o,n,r,f,s,u,l,d;function p(t,e,i,n,r){return(t=o.ii.call(this,t,a.Z.mM,3)||this).platform=e,t.IZ=i,t.q_b=n,t.G0b=r,t}_esm(e),e.vPa=void 0,t=i(0),c=i(100),a=i(4),h=i(66),i(137),o=i(75),n=i(51),r=i(47),f=i(39),s=i(136),u=i(291),l=i(1),i=i(580),S(p,o.ii),p.prototype.Pf=function(n,r){var a=this,o=r.Fv===c.ko.kH?"prefetch/manifest":h.Eg.ja,s=h.Eg.ja,u=r.Fv===c.ko.a5?f.fx.aRa:f.fx.mU;return this.G0b().transform(r,u).then(function(t){var i,e=(t=rt(t)).next().value;return"licensedManifest"===(i=t.next().value).Eo&&(o=r.Fv===c.ko.kH?"prefetch/licensedManifest":"licensedManifest",s=h.Eg.r_b),a.send(n,{url:i.Eo,name:s,Dm:o},e,void 0,void 0,u).then(function(t){var e=(t=a.IZ.create(t.result)).hb.bD.map(function(t){return t.zh}).filter(Boolean);return i.qB&&(0<e.length?(e=a.q_b.ulb(e),i.qB.kYa(e),t.qB=i.qB,t.Xva=r.Fv===c.ko.kH,t.Wva=!0):i.qB.close()),t.jW=i.jW,t.Y1=i.Y1,t})}).catch(function(t){throw a.An(t)})},p.prototype.kq=function(){return Promise.reject(Error("Links are not supported with manifest command"))},d=p,d=t.__decorate([l.$(),t.__param(0,l.l(n.Qm)),t.__param(1,l.l(r.Yq)),t.__param(2,l.l(s.nM)),t.__param(3,l.l(u.Cja)),t.__param(4,l.l(i.wPa))],d),e.vPa=d},function(t,e,i){var n,r,a,o,s;function u(t){return o.ii.call(this,t,r.Z.jM,3)||this}_esm(e),e.YOa=void 0,t=i(0),n=i(1),r=i(4),a=i(66),o=i(75),i=i(51),S(u,o.ii),u.prototype.Pf=function(){return Promise.reject(Error("Links are required with acquire command"))},u.prototype.kq=function(t,e,i){var n=this;return e={url:e.FP(i.oab).href,name:a.Eg.zh,Dm:"ldl"===i.oab?"prefetch/license":a.Eg.zh},this.send(t,e,i.inputs,"drmSessionId").then(function(t){return t=t.result,n.iHb(t),t}).catch(function(t){throw n.An(t)})},u.prototype.iHb=function(t){t.forEach(function(t){if(!t.licenseResponseBase64)throw Error("Received empty licenseResponseBase64")})},s=u,s=t.__decorate([n.$(),t.__param(0,n.l(i.Qm))],s),e.YOa=s},function(t,e,i){var n,r,a,o,s;function u(t){return o.ii.call(this,t,r.Z.ika,3)||this}_esm(e),e.LPa=void 0,t=i(0),n=i(1),r=i(4),a=i(66),o=i(75),i=i(51),S(u,o.ii),u.prototype.Pf=function(t,e){var i=this;return this.send(t,{url:"/bundle",name:a.Eg.zh,Dm:"release/license"},e).then(function(t){return t.result}).catch(function(t){throw i.An(t)})},u.prototype.kq=function(){return Promise.reject(Error("Links are unsupported with release"))},s=u,s=t.__decorate([n.$(),t.__param(0,n.l(i.Qm))],s),e.LPa=s},function(t,e,i){var n,r,a;function o(t){this.Da=t}_esm(e),e.nPa=void 0,t=i(0),n=i(1),r=i(29),a=i(5),o.prototype.Lec=function(e){var i=this.Da.Ef.ka(a.Gp);return{inputs:e.Rk.map(function(t){return{drmSessionId:t.sessionId,clientTime:i,challengeBase64:t.dataBase64,xid:e.ga.toString()}}),oab:"standard"===e.wg.toLowerCase()?"license":"ldl"}},o.prototype.Oec=function(e){var i=this,n=[];return e.Re.map(function(t){return n.push(t.id),{url:i.UFb(t.VJ,t.yZ),echo:"drmSessionId",params:{drmSessionId:t.id,xid:e.ga.toString()}}})},o.prototype.UFb=function(t,e){return"/releaseLicense?drmLicenseContextId="+t+(e?"&licenseId="+e:"")},i=o,i=t.__decorate([n.$(),t.__param(0,n.l(r.Lh))],i),e.nPa=i},function(t,e,i){var n,r,a;function o(t,e){this.Ii=t,this.mE=e}_esm(e),e.pPa=void 0,t=i(0),n=i(1),r=i(30),i=i(31),o.prototype.ulb=function(t){var e=this,i=t.map(function(t){return t.links.releaseLicense.href}).map(function(t){return e.Ii.E_(t.substring(t.indexOf("?")+1))});return{ha:!0,Re:t.map(function(t,e){return{id:t.drmSessionId,VJ:i[e].drmlicensecontextid,yZ:i[e].licenseid}}),hk:t.map(function(t){return{data:e.mE.decode(t.licenseResponseBase64),sessionId:t.drmSessionId}})}},a=o,a=t.__decorate([n.$(),t.__param(0,n.l(r.ki)),t.__param(1,n.l(i.Ji))],a),e.pPa=a},function(t,e,i){var n,r,a,o,s;function u(t){return a.Es.call(this,t,r.Z.Jvb,o.Uq.start,3)||this}_esm(e),e.FSa=void 0,t=i(0),n=i(1),r=i(4),a=i(168),o=i(86),i=i(51),S(u,a.Es),s=u,s=t.__decorate([n.$(),t.__param(0,n.l(i.Qm))],s),e.FSa=s},function(t,e,i){var n,r,a,o,s;function u(t){return a.Es.call(this,t,r.Z.Lvb,o.Uq.stop,3)||this}_esm(e),e.LSa=void 0,t=i(0),n=i(1),r=i(4),a=i(168),o=i(86),i=i(51),S(u,a.Es),s=u,s=t.__decorate([n.$(),t.__param(0,n.l(i.Qm))],s),e.LSa=s},function(t,e,i){var n,r,a,o,s;function u(t){return a.Es.call(this,t,r.Z.xia,o.Uq.mZ,1)||this}_esm(e),e.PLa=void 0,t=i(0),n=i(1),r=i(4),a=i(168),o=i(86),i=i(51),S(u,a.Es),s=u,s=t.__decorate([n.$(),t.__param(0,n.l(i.Qm))],s),e.PLa=s},function(t,e,i){var n,r,a,o,s;function u(t){return a.Es.call(this,t,r.Z.SRa,o.Uq.splice,1)||this}_esm(e),e.ASa=void 0,t=i(0),n=i(1),r=i(4),a=i(168),o=i(86),i=i(51),S(u,a.Es),s=u,s=t.__decorate([n.$(),t.__param(0,n.l(i.Qm))],s),e.ASa=s},function(t,e,i){var n,r,a,o,s;function u(t){return a.Es.call(this,t,r.Z.trb,o.Uq.iP,3)||this}_esm(e),e.pJa=void 0,t=i(0),n=i(1),r=i(4),a=i(168),o=i(86),i=i(51),S(u,a.Es),u.prototype.rE=function(t){return Object.assign(Object.assign({},a.Es.prototype.rE.call(this,t)),{action:t.action})},s=u,s=t.__decorate([n.$(),t.__param(0,n.l(i.Qm))],s),e.pJa=s},function(t,e,i){var n,r,a,o,s,u,c,h,f;function l(t,e,i,n,r,a,o,s,u){this.ri=t,this.pf=e,this.Bi=i,this.yNb=n,this.KB=r,this.kgc=a,this.V9b=s,this.TI=u}_esm(e),e.fPa=void 0,t=i(0),n=i(1),r=i(175),a=i(82),o=i(550),s=i(547),u=i(84),c=i(71),h=i(356),f=i(113),i=i(92),l=t.__decorate([n.$(),t.__param(0,n.l(r.w2)),t.__param(1,n.l(c.ax)),t.__param(2,n.l(a.Zz)),t.__param(3,n.l(s.iPa)),t.__param(4,n.l(u.Rz)),t.__param(5,n.l(h.ITa)),t.__param(6,n.l(f.b3)),t.__param(7,n.l(o.OPa)),t.__param(8,n.l(i.Kz))],l),e.fPa=l},function(t,e,i){var n,r,a,o,s;function u(t){return o.ii.call(this,t,r.Z.Dob,2)||this}_esm(e),e.$Oa=void 0,t=i(0),n=i(1),r=i(4),a=i(66),o=i(75),i=i(51),S(u,o.ii),u.prototype.Pf=function(t,e,i){var n=this;return this.send(t,{url:"/"+a.Eg.bind,name:a.Eg.bind,Dm:a.Eg.bind},e,void 0,i).then(function(t){return t.result}).catch(function(t){throw n.An(t)})},u.prototype.kq=function(){return Promise.reject(Error("Links are unsupported with bind"))},s=u,s=t.__decorate([n.$(),t.__param(0,n.l(i.Qm))],s),e.$Oa=s},function(t,e,i){var n,r,a,o,s;function u(t){return o.ii.call(this,t,r.Z.Eob,2)||this}_esm(e),e.bPa=void 0,t=i(0),n=i(1),r=i(4),a=i(66),o=i(75),i=i(51),S(u,o.ii),u.prototype.Pf=function(t,e,i){var n=this;return this.send(t,{url:"/bindDevice",name:a.Eg.bind,Dm:a.Eg.bind},e,void 0,i).then(function(t){return t.result}).catch(function(t){throw n.An(t)})},u.prototype.kq=function(){return Promise.reject(Error("Links are unsupported with bindDevice"))},s=u,s=t.__decorate([n.$(),t.__param(0,n.l(i.Qm))],s),e.bPa=s},function(t,e,i){var n,r,a,o,s;function u(t){return o.ii.call(this,t,r.Z.zub,1)||this}_esm(e),e.yPa=void 0,t=i(0),n=i(1),r=i(4),a=i(66),o=i(75),i=i(51),S(u,o.ii),u.prototype.Pf=function(t,e,i){var n=this;return this.send(t,{url:"/"+a.Eg.ping,name:a.Eg.ping,Dm:a.Eg.ping},e,void 0,i).then(function(t){return t.result}).catch(function(t){throw n.An(t)})},u.prototype.kq=function(){return Promise.reject(Error("Links are unsupported with ping"))},s=u,s=t.__decorate([n.$(),t.__param(0,n.l(i.Qm))],s),e.yPa=s},function(t,e){_esm(e),e.Zub="PboPingCommandSymbol"},function(t,e,i){var n,r,a,o,s;function u(t){return o.ii.call(this,t,r.Z.Irb,2)||this}_esm(e),e.lPa=void 0,t=i(0),n=i(1),r=i(4),a=i(66),o=i(75),i=i(51),S(u,o.ii),u.prototype.Pf=function(t,e){var i=this;return this.send(t,{url:"/generateScreenshots",name:a.Eg.ja,Dm:"generateScreenshots"},e).then(function(t){return t.result}).catch(function(t){throw i.An(t)})},u.prototype.kq=function(t,e,i){var n=this;return e={url:e.FP("generateScreenshots").href,name:a.Eg.ja,Dm:"generateScreenshots"},this.send(t,e,i).then(function(t){return t.result}).catch(function(t){throw n.An(t)})},s=u,s=t.__decorate([n.$(),t.__param(0,n.l(i.Qm))],s),e.lPa=s},function(t,e,i){var n,m,r,v,a,o,s,u,c,y,h,f,l,d,w;function p(t,e,i,n,r,a,o,s,u,c){this.Bi=t,this.platform=e,this.config=i,this.QGb=n,this.l6b=r,this.Aq=a,this.BW=o,this.Da=s,this.Wba=u,this.Jo=c}_esm(e),e.xPa=void 0,t=i(0),n=i(1),m=i(100),r=i(13),v=i(497),a=i(495),o=i(578),s=i(98),u=i(47),c=i(29),y=i(5),h=i(173),f=i(82),l=i(358),d=i(26),w=i(57),p.prototype.transform=function(h,t){var e,f,i,l=this,d=h.kb,p=Object.assign({},d.Q7,d.Wn),b={},g=h.N;return b[g]={unletterboxed:!!p.preferUnletterboxed},e=this.config(),f=e.tgc?30:25,e=e.wu?this.Aq.eTb():Promise.resolve(this.Wba.Iv()),i={he:null==d?void 0:d.he},Promise.all([this.Jo.K7a(i),this.Jo.M7a(i),this.Jo.vY(),this.Jo.G$(),this.BSb(h.ga,t),this.gTb(h),e]).then(function(t){var e,i,n,r=rt(t),a=r.next().value,o=r.next().value,s=r.next().value,u=r.next().value,c=r.next().value;return t=r.next().value,e=r.next().value,r=a.N$().concat(o.N$()).concat(l.config().Jw).concat(["BIF240","BIF320"]).filter(Boolean),u=u?u.DEVICE_SECURITY_LEVEL:void 0,n="postplay"===d.he||!!p.isUIAutoPlay,30==f?(window.useDDplus&&(r.push("ddplus-2.0-dash"),r.push("ddplus-5.1-dash"),r.push("ddplus-5.1hq-dash"),r.push("ddplus-atmos-dash"),r=r.filter(t=>!/heaac/.test(t))),window.useAVCH&&r.push("playready-h264hpl30-dash","playready-h264hpl31-dash","playready-h264hpl40-dash"),window.useHEVC&&(r=r.filter(t=>!/main10-L/.test(t)))):(r=(r=(r=r.filter(t=>!/^playready-h264/.test(t))).filter(t=>!/^av1-/.test(t))).filter(t=>!/^vp9-/.test(t)),window.useHEACC&&r.push("heaac-5.1-dash"),window.useAV1&&r.push("av1-main-L20-dash-cbcs-prk","av1-main-L21-dash-cbcs-prk","av1-main-L30-dash-cbcs-prk","av1-main-L31-dash-cbcs-prk","av1-main-L40-dash-cbcs-prk","av1-main-L41-dash-cbcs-prk","av1-main-L50-dash-cbcs-prk","av1-main-L51-dash-cbcs-prk"),window.useVP9&&r.push("vp9-profile0-L30-dash-cenc","vp9-profile0-L31-dash-cenc","vp9-profile0-L40-dash-cenc"),window.useAVC&&r.push("playready-h264mpl30-dash","playready-h264mpl31-dash","playready-h264mpl40-dash"),window.useAVCH_&&r.push("playready-h264hpl30-dash","playready-h264hpl31-dash","playready-h264hpl40-dash")),window.useAllSub&&(p.showAllSubDubTracks=1),s={type:"standard",manifestVersion:l.Bi.G3a?"v2":"v1",viewableId:g,profiles:r,flavor:h.Fv,drmType:e,drmVersion:f,usePsshBox:!0,isBranching:!!h.kb.$h,useHttpsStreams:!0,supportsUnequalizedDownloadables:l.config().Hdc,imageSubtitleHeight:v.Hka.q7a(),uiVersion:l.Bi.oz,uiPlatform:l.Bi.Ofa,clientVersion:l.platform.version,platform:null==(e=l.config().pe)?void 0:e.version,osVersion:null==(i=null==(i=l.config().pe)?void 0:i.os)?void 0:i.version,osName:null==(i=null==(i=l.config().pe)?void 0:i.os)?void 0:i.name,supportsPreReleasePin:l.config().Ir.Bdc,supportsWatermark:l.config().Ir.Cdc,packageId:l.tUb(d),deviceSecurityLevel:u,videoOutputInfo:s,titleSpecificData:b,preferAssistiveAudio:!!p.assistiveAudioPreferred,preferredTextLocale:p.preferredTextLocale,preferredAudioLocale:p.preferredAudioLocale,isUIAutoPlay:n,challenge:c,isNonMember:l.Bi.c$a,pin:d.Keb,desiredVmaf:l.config().Emb?l.config().y2a:l.config().z2a,desiredSegmentVmaf:l.config().Emb?l.config().y2a:l.config().z2a,requestSegmentVmaf:l.config().$9b,supportsPartialHydration:l.Bi.fP,contentPlaygraph:h.kb.$h?[]:l.Bi.MI,auxiliaryManifestToken:h.kb.$h||null==(i=h.Vi)?void 0:i.Oe,originalPlaybackContextId:h.kb.$h||null==(u=h.Vi)||!u.Oe||null==(n=h.Vi)?void 0:n.gza,liveMetadataFormat:"INDEXED_SEGMENT_TEMPLATE"},d.b4a&&(s.extraParams=d.b4a),d.x2a&&(s.desiredDownloadables=d.x2a),d.jBa&&(s.requestReference=d.jBa),e={Eo:t?"licensedManifest":"manifest",qB:null==t?void 0:t.jc,jW:a,Y1:o},t&&(t={drmSessionId:t.jc.BB()||"session",clientTime:l.Da.cL.ka(y.Gp),challengeBase64:t.upa},s.challenges={default:[t]},s.profileGroups=[{name:"default",profiles:r}],s.licenseType=h.wg==w.Li.Cp?"limited":"standard",h.ga&&(s.xid=h.ga.toString())),l.Bi.fP||(s.showAllSubDubTracks=l.config().Ir.bcc||!!p.showAllSubDubTracks,l.Bi.y3a&&h.Fv===m.ko.a5&&(s.maxSupportedLanguages=2)),h.Ffa&&(s.originalPlaybackContextId=h.Ffa.gza,s.requiredAudioTrackId=h.Ffa.d$b,s.requiredTextTrackId=h.Ffa.g$b),[s,e]})},p.prototype.tUb=function(t){if(this.config().Nda.enabled)return void 0!==t.ip?t.ip:void 0!==this.config().Nda.ip?Number(this.config().Nda.ip):void 0},p.prototype.BSb=function(i,t){var n=this;return this.QGb.K5a(t).then(function(t){var e=i&&n.l6b.zUb(i);return e&&e.wr("cad"),t})},p.prototype.gTb=function(t){var e;return void 0!==t.wg&&this.config().wu?(e=t.wg===w.Li.Zq&&this.Bi.Vx,t.wg===w.Li.Cp&&this.Bi.QE||e?this.BW.jua(t.wg):Promise.resolve(void 0)):Promise.resolve(void 0)},i=p,i=t.__decorate([n.$(),t.__param(0,n.l(f.Zz)),t.__param(1,n.l(u.Yq)),t.__param(2,n.l(r.Oc)),t.__param(3,n.l(a.WGa)),t.__param(4,n.l(o.Sja)),t.__param(5,n.l(s.Vz)),t.__param(6,n.l(h.K2)),t.__param(7,n.l(c.Lh)),t.__param(8,n.l(l.Zia)),t.__param(9,n.l(d.Jz))],i),e.xPa=i},function(t,e,i){var n,r,a,o,s,u;function c(t,e,i,n){this.platform=t,this.config=e,this.BW=i,this.Jo=n}_esm(e),e.PPa=void 0,t=i(0),n=i(1),r=i(13),a=i(47),o=i(173),s=i(26),u=i(57),c.prototype.transform=function(n){var r=this,a=n.kb,t={he:void 0};return Promise.all([this.Jo.K7a(t),this.Jo.M7a(t),this.BW.jua(u.Li.Zq)]).then(function(t){var e,i=rt(t);return t=i.next().value,e=i.next().value,i=i.next().value,[{viewableId:n.N,packageId:a.ip,assetId:a.qoa,challenge:i.upa,audioProfiles:t.N$(),textProfiles:r.config().Jw,trickplayProfiles:["BIF240","BIF320"],videoProfiles:e.N$(),audioLanguages:a.OEb,textLanguages:a.Zdc,videoLanguages:a.bnb?[a.bnb]:void 0,requestReference:a.jBa,additionalAudioAssets:a.xDb,additionalTextAssets:a.BDb},{qB:null==i?void 0:i.jc,Eo:"studioManifest",jW:t,Y1:e}]})},i=c,i=t.__decorate([n.$(),t.__param(0,n.l(a.Yq)),t.__param(1,n.l(r.Oc)),t.__param(2,n.l(o.K2)),t.__param(3,n.l(s.Jz))],i),e.PPa=i},function(t,e,i){var n,r,a,o,s;function u(t){return o.ii.call(this,t,r.Z.dFa,2)||this}_esm(e),e.oFa=void 0,t=i(0),n=i(1),r=i(4),a=i(66),o=i(75),s=i(51),i(137),S(u,o.ii),u.prototype.Pf=function(t,e){var i=this,n=e.event,r=this.rE(e);return this.send(t,{url:e.href,name:a.Eg.events,Dm:a.Eg.events+"/"+n},r).then(function(){return e}).catch(function(t){throw i.An(t)})},u.prototype.kq=function(){return Promise.reject(Error("Links are unsupported with ad events"))},u.prototype.rE=function(t){return{xid:t.ga,event:t.event,adEventToken:t.Lx,adBreakLocationMs:t.JA,position:t.position,clientTime:t.aB,sessionStartTime:t.Xn,appId:t.appId,sessionId:t.sessionId,playTimes:this.apa(t.Vt),mainManifestPlaybackContextId:t.t0b}},u.prototype.apa=function(t){return{total:t.total,audio:t.audio.map(function(t){return{duration:t.duration,downloadableId:t.Wb,cdnId:t.Ao}}),video:t.video.map(function(t){return{duration:t.duration,downloadableId:t.Wb,cdnId:t.Ao}}),text:t.text.map(function(t){return{duration:t.duration,downloadableId:t.Wb,cdnId:t.Ao}})}},i=u,i=t.__decorate([n.$(),t.__param(0,n.l(s.Qm))],i),e.oFa=i},function(t,e,i){var n,r,a,o,s;function u(t){return o.ii.call(this,t,r.Z.dFa,2)||this}_esm(e),e.kFa=void 0,t=i(0),n=i(1),r=i(4),a=i(66),o=i(75),s=i(51),i(137),S(u,o.ii),u.prototype.Pf=function(t,e){var i=this,n=e.event,r=this.rE(e);return this.send(t,{url:e.href,name:a.Eg.events,Dm:a.Eg.events+"/"+n},r).then(function(){return e}).catch(function(t){throw i.An(t)})},u.prototype.kq=function(){return Promise.reject(Error("Links are unsupported with ad break events"))},u.prototype.rE=function(t){return{xid:t.ga,event:t.event,adEventToken:t.Lx,adBreakLocationMs:t.JA,position:t.position,clientTime:t.aB,sessionStartTime:t.Xn,appId:t.appId,sessionId:t.sessionId,playTimes:{}}},i=u,i=t.__decorate([n.$(),t.__param(0,n.l(s.Qm))],i),e.kFa=i},function(t,e,i){var n,r,a,o,s,u;_esm(e),e.transports=void 0,t=i(1),n=i(285),r=i(548),a=i(1381),o=i(1382),s=i(1383),u=i(39),e.transports=new t.Ad(function(t){t(n.l5).to(s.tTa).la(),t(r.UNa).to(a.TNa),t(r.DSa).to(o.CSa),t(r.uTa).Ue(function(e){return function(t){return e.zb.get(n.l5).Sea(null!=(t=null==t?void 0:t.B2b)?t:u.fx.mU)?e.zb.get(r.UNa):e.zb.get(r.DSa)}})})},function(t,e,i){var n,r,a,o,s,u;function c(t,e,i){var n=this;this.NF=e,this.profile=i,this.log=t.jb("MslTransport"),this.NF().then(function(t){return n.sca=t})}_esm(e),e.TNa=void 0,t=i(0),n=i(1),r=i(7),a=i(164),o=i(5),i=i(80),s={license:!0},c.prototype.send=function(t,e){var i=this,n={kya:Object.assign({pf:t.pf,log:t.log,profile:this.profile},t.uFb),method:t.Eo,url:t.url.href,body:JSON.stringify(e),timeout:t.timeout.ka(o.pa),Pmb:this.profile,L9b:!s[t.Eo],edb:!!s[t.Eo],pm:!0,qea:t.wBa,headers:t.headers};return this.NF().then(function(t){return t.send(n).catch(function(t){var e;if(t.error)throw(e=t.error).iG=t.iG,i.log.error("Error sending MSL request",{mslCode:e.iC,subCode:e.Kc,data:e.data,message:e.message}),e;throw t.Kc=t.Ba||t.Kc,t})})},c.prototype.pqa=function(){var t;return{userTokens:null==(t=this.sca)?void 0:t.c_.getUserIdTokenKeys()}},u=c,u=t.__decorate([n.$(),t.__param(0,n.l(r.ob)),t.__param(1,n.l(a.cU)),t.__param(2,n.l(i.zM))],u),e.TNa=u},function(t,e,i){var n,a,r,o;function s(t,e){this.pf=e,this.log=t.jb("SslTransport")}_esm(e),e.CSa=void 0,t=i(0),n=i(1),a=i(5),r=i(7),i=i(71),s.prototype.send=function(t,e){var n=this,r={url:t.url.href,KE:"nq-"+t.Eo,lfb:JSON.stringify(e),r8:t.timeout.ka(a.pa),headers:t.headers,withCredentials:!0,ku:"pbo"};return new Promise(function(e,i){n.pf.download(r,function(t){(t.ha?e:i)(t)})}).then(function(t){return{status:"success",body:t.content}}).catch(function(t){var e;if(t.error)throw(e=t.error).iG=t.iG,n.log.error("Error sending SSL request",{subCode:e.Kc,data:e.content,message:e.message}),e;throw t.Kc=t.Ba||t.Kc,t})},s.prototype.pqa=function(){return{}},o=s,o=t.__decorate([n.$(),t.__param(0,n.l(r.ob)),t.__param(1,n.l(i.ax))],o),e.CSa=o},function(t,e,i){var n,r,a,o,s;function u(t){return r.uf.call(this,t,"TransportConfigImpl")||this}_esm(e),e.tTa=void 0,t=i(0),n=i(1),r=i(45),a=i(33),o=i(44),s=i(39),S(u,r.uf),u.prototype.Sea=function(t){var e=this.LS,i=this.HYa;switch(t){case s.fx.mU:return e;case s.fx.aRa:return e&&!i;case s.fx.Ttb:return!1}},nt.Object.defineProperties(u.prototype,{LS:{configurable:!0,enumerable:!0,get(){return!0}},HYa:{configurable:!0,enumerable:!0,get(){return!1}}}),i=u,t.__decorate([o.config(o.Cd,"usesMsl")],i.prototype,"LS",null),t.__decorate([o.config(o.Cd,"allowRequestsWithoutMsl")],i.prototype,"HYa",null),i=t.__decorate([n.$(),t.__param(0,n.l(a.Sm))],i),e.tTa=i},function(t,e,i){var n,r;_esm(e),e.vm=void 0,t=i(1),n=i(563),r=i(1385),e.vm=new t.Ad(function(t){t(n.cMa).to(r.bMa)})},function(t,e,i){var n,r,a,o,s,u,c,h;function f(t,e,i,n,r){this.XI=t,this.Yk=e,this.config=i,this.IQ=n,this.zd=r}_esm(e),e.bMa=void 0,t=i(0),n=i(1),r=i(124),a=i(1386),o=i(1387),s=i(68),u=i(13),c=i(144),i=i(119),f.prototype.create=function(t,e,i){return t?new a.dMa(this.config(),this.Yk,this.zd,e,i,this.XI,this.IQ()):new o.WLa(this.config,this.Yk,this.zd,e,i)},h=f,h=t.__decorate([n.$(),t.__param(0,n.l(r.f3)),t.__param(1,n.l(s.Eu)),t.__param(2,n.l(u.Oc)),t.__param(3,n.l(c.YT)),t.__param(4,n.l(i.yH))],h),e.bMa=h},function(t,e,i){var n,s,r,a,o,u,c,h,f,l;function d(t,e,i,n,r,a,o){return(n=c.hT.call(this,n,r)||this).config=t,n.Yk=e,n.zd=i,n.XI=a,n.Xba=o,n.log=s.aj(n.j,"LicenseBroker"),n.wZ=new Set,n.Qxa=!1,n}_esm(e),e.dMa=void 0,t=i(0),n=i(4),s=i(9),r=i(340),a=i(5),o=i(1),u=i(582),c=i(583),h=i(57),f=i(16),l=i(48),S(d,c.hT),d.prototype.Tca=function(){var e=this,i=this.j.na;this.wZ.has(i.L)||(this.wZ.add(i.L),this.cEb(i).catch(function(){return e.ehb(i)}).then(function(){return e.aZa(i)}).catch(function(t){return e.$Ya(i,t)}).catch(function(t){return e.Md(t.code,t,t.Xd)}))},d.prototype.cEb=function(r){var a=this;return Promise.all([this.zd.F5a(r.L),this.XI()]).then(function(t){var i,n;return t=rt(t),i=t.next().value,n=t.next().value,i.Kea.then(function(t){var e=a.Xba.mediaKeys;return e&&e!==t.mediaKeys?(a.log.warn("Cannot use cached license session as its uses different MediaKeys"),Promise.reject()):("manifest"===i.source&&(e=a.H6a(r),n.zcb(e,t)),t)}).then(function(t){return a.A7(t,r,i.source)})}).catch(function(t){throw a.log.warn("eme not in cache",t),t})},d.prototype.A7=function(t,e,i){return this.Dfb(t,e),e.AI=i,this.Xba.mYa(t.mediaKeys),t.koa()},d.prototype.rRb=function(t){var e={};return t.forEach(function(t){e[r.c3a(t.VZ)]=t.time.ka(a.pa)}),e},d.prototype.Dfb=function(t,e){var i=this;(e.ef=t).Wac(function(t){i.Md(t.code,t,t.Xd)})},d.prototype.aZa=function(t){this.log.info("Successfully applied license for xid: "+t.ga+", viewable: "+t.L+", segment: "+t.X),this.LB(t),this.Qxa?this.K9(t.L):this.setMediaKeys(t)},d.prototype.$Ya=function(t,e){throw this.LB(t),e},d.prototype.LB=function(t){t.ef&&t.LB(this.rRb(t.ef.sd))},d.prototype.H6a=function(t){var e=(i=t.wz[0]).streams[0].mf,e=l.Mva(e),i=l.Ita(i.streams);return{type:this.y$(!1),initData:t.xw.map(function(t){return s.ht(t)}),Naa:e,context:{ca:this.Yb.ca,jba:i},sk:{L:t.L,ga:t.ga,Og:t.Og,om:t.om,Cj:t.ja.Cj}}},d.prototype.ehb=function(i){var n=this;return this.XI().then(function(t){var e=n.H6a(i);return n.wZ.add(i.L),t.zh(e,n.Xba).then(function(t){return n.Dfb(t,i),n.j.fireEvent(f.ma.zZ,{L:i.L}),t.koa()})})},d.prototype.setMediaKeys=function(t){var e=this;if(this.Qxa)this.log.trace("Media Keys already set");else try{this.Yb.ca?(this.Qxa=!0,this.Yb.ca.setMediaKeys(t.ef.mediaKeys).then(function(){e.K9(t.L)}).catch(function(t){t=e.T7a(t),e.Md(n.Z.vM,t,t.Of)})):this.K9(t.L)}catch(t){this.Md(n.Z.vM,t,void 0)}},d.prototype.BC=function(){var e=this,i=this.j.na.ef;return i?this.XI().then(function(t){return t.release(i,e.Xba).then(function(t){return e.log.trace("Successfully released the license"),t.close()}).catch(function(t){e.log.error("Unable to release the license",t)})}):Promise.resolve()},d.prototype.dhb=function(e){var i=this;return e=void 0===e?this.j:e,this.ehb(e).then(function(){return i.aZa(e)}).catch(function(t){return i.$Ya(e,t)})},d.prototype.y$=function(t){return this.Yk.QX||t?h.Li.Cp:h.Li.Zq},nt.Object.defineProperties(d.prototype,{OF:{configurable:!0,enumerable:!0,get(){return"encrypted"}},Hn:{configurable:!0,enumerable:!0,get(){return this.config.Hn}}}),t.__decorate([u.sba],(i=d).prototype,"OF",null),i=t.__decorate([o.$()],i),e.dMa=i},function(t,e,s){var u,c,h,a,o,i,n,r,f,l,d,p;function b(t,e,i,n,r){return(n=f.hT.call(this,n,r)||this).config=t,n.Yk=e,n.zd=i,n.log=c.aj(n.j,"LegacyLicenseBroker"),n.Hn=n.config().Hn,n.config().Mfb?a.j$a()?n.Zfa=!0:n.log.error("Promise based eme requested but platform does not support it",{browserua:o.hH}):n.Zfa=!1,n}_esm(e),e.WLa=void 0,t=s(0),u=s(4),c=s(9),h=s(163),a=s(40),o=s(14),i=s(1),n=s(582),r=s(47),f=s(583),l=s(57),d=s(5),S(b,f.hT),b.prototype.j1a=function(t){var e=void 0===e?this.j:e;return new this.Ut.bM(t,function(t){return e.s8.qJ(t)},function(t){return e.s8.release(t)},{Qf:!1,Hl:!1})},b.prototype.FE=function(e){var t,i,n,r,a,o=this;return e=void 0===e?this.j:e,t=s(59).Do,this.Ut.bM||this.Md(u.Z.jM,u.Y.hrb),i=c.aj(e,"Eme"),n=this.j1a(i),a=(r=c.Fa.get(h.tU)).w8(e.Bc.value.streams),r=r.C8(e.Jh.value.streams),this.Ut.dM(i,function(t){return e.Se(t)},{Qf:!1,Hl:!1,Da:{getTime:t},Em:n,d0:!!this.Zfa,ca:this.Yb.ca,$C:this.config().u3a,onerror:function(t,e,i){return o.Md(t,e,i)},Bya:function(){},zK:!0,NEb:a,Tgc:r,Owa:this.Yk.y7.ka(d.pa)})},b.prototype.setMediaKeys=function(e){var n=this;return this.Zfa?new Promise(function(t,i){if(!n.Yb.ca)return Promise.resolve();n.Yb.ca.setMediaKeys(e).then(function(){t()}).catch(function(t){var e=n.T7a(t);i({ha:!1,code:u.Z.vM,Kc:e.Ba,Xd:e.Of,Sb:e.Sb,message:"Set media keys is a failure",cause:t})})}):Promise.resolve()},b.prototype.V3a=function(t){return{code:t.code,subCode:t.Kc,extCode:t.Xd,edgeCode:t.Lo,message:t.message,errorDetails:t.Sb,errorData:t.TE,state:t.state}},b.prototype.sCa=function(t,e,i){var n,r,a;function o(){r.KK().catch(function(t){n.log.error("Unable to set the license",n.V3a(t)),t.cause&&t.cause.Sb&&(t.Sb=t.Sb?t.Sb+t.cause.Sb:t.cause.Sb),n.Md(t.code,t,t.Xd)})}return n=this,i=void 0===i?this.j:i,r=i.ef,this.log.info("Setting the license"),a=e?function(){return Promise.resolve()}:function(){return r.zh(n.y$(!1),t)},(e?function(){return r.A7(n.Yb.ca)}:function(){return r.create(n.Hn).then(function(){return Promise.resolve()})})().then(a).then(function(){return n.setMediaKeys(r.mediaKeys)}).then(function(){n.log.info("license set"),n.K9(i.L),n.Yb.unb.then(function(){n.config().CF&&(e||n.config().QX)&&(n.Zgb=bt.setTimeout(o,n.config().CF))})}).catch(function(t){if(n.log.error("Unable to set the license",n.V3a(t)),t.cause&&t.cause.Sb&&(t.Sb=t.Sb?t.Sb+t.cause.Sb:t.cause.Sb),e)throw Error(t&&t.message?t.message:"failed to set license");n.Md(t.code,t,t.Xd)})},b.prototype.BC=function(){return Promise.resolve()},b.prototype.Tca=function(){var n;function e(){var e;n.j.ef=n.FE(),e=[],n.j.xw.forEach(function(t){e.push(c.ht(t))}),n.sCa(e)}(n=this).wZ||(this.wZ=!0,this.Ut.dM?this.j.xw?this.config().wX&&this.config().Xt?this.zd.F5a(this.j.L).then(function(i){return(n.j.ef=i).TEa.then(function(){var e=[];return n.j.xw.forEach(function(t){e.push(c.ht(t))}),n.sCa(e,!0).then(function(){var t;i.joc?n.Md(u.Z.lrb):(t=c.aj(n.j,"Eme"),i.kmb({log:t,gp:function(t){return n.j.Se(t)}},{Em:n.j1a(t),onerror:function(t,e,i){return n.Md(t,e,i)}}),n.j.LB(i.sd||{}),n.j.AI="videopreparer")})})}).catch(function(t){n.log.warn("eme not in cache",t),e()}):e():(this.log.error("Missing the PSSH on the video track, closing the player"),this.Md(u.Z.Lub)):this.Md(u.Z.jM,u.Y.irb))},b.prototype.dhb=function(t){var e;return(t=void 0===t?this.j:t).ef=this.FE(),e=[],t.xw.forEach(function(t){e.push(c.ht(t))}),this.sCa(e,!1,t)},b.prototype.y$=function(t){return this.config().QX||t?l.Li.Cp:l.Li.Zq},nt.Object.defineProperties(b.prototype,{Ut:{configurable:!0,enumerable:!0,get(){return c.Fa.get(r.K4)}},OF:{configurable:!0,enumerable:!0,get(){return this.Zfa?"encrypted":this.Yb.fJa+"needkey"}}}),t.__decorate([n.sba],(p=b).prototype,"Ut",null),t.__decorate([n.sba],p.prototype,"OF",null),p=t.__decorate([i.$()],p),e.WLa=p},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,d,p,b,g,m;_esm(e),e.Dh=void 0,t=i(1),n=i(310),r=i(1389),a=i(311),o=i(1394),s=i(120),u=i(1396),c=i(1397),h=i(166),f=i(584),l=i(1398),d=i(585),p=i(1400),b=i(84),g=i(586),m=i(1401),e.Dh=new t.Ad(function(t){t(n.Zja).to(r.MQa).la(),t(a.aka).to(o.YQa).la(),t(s.xM).to(u.KQa).la(),t(h.nH).to(c.IQa).la(),t(f.SQa).to(l.RQa).la(),t(d.WQa).Ue(function(t){var e=t.zb;return function(t){return new p.XQa(t,e.get(b.Rz),e.get(h.nH))}}),t(g.$La).Ue(function(t){var n=t.zb;return function(t,e,i){return new m.aMa(t,e,i,n.get(h.nH),n.get(s.xM))}})})},function(t,e,i){var n,r,a,o,s,u,c,h,f;function l(t,e,i,n,r,a,o){this.$f=t,this.Wra=e,this.Kj=i,this.$Da=n,this.y6b=r,this.A6b=a,this.z6b=o}_esm(e),e.MQa=void 0,t=i(0),n=i(1),r=i(1390),a=i(7),o=i(166),s=i(359),u=i(584),c=i(366),h=i(585),i=i(311),l.prototype.create=function(t){return new r.NQa(t,this.$f,this.Wra,this.Kj,this.$Da,this.y6b,this.A6b,this.z6b)},f=l,f=t.__decorate([n.$(),t.__param(0,n.l(a.ob)),t.__param(1,n.l(s.BT)),t.__param(2,n.l(o.nH)),t.__param(3,n.l(c.sTa)),t.__param(4,n.l(u.SQa)),t.__param(5,n.l(h.WQa)),t.__param(6,n.l(i.aka))],f),e.MQa=f},function(t,e,i){var n,u,c;function r(t,e,i,n,r,a,o,s){this.$Da=r,this.PEa=s,this.OX=!1,n.Yfa&&(t=(new c.OQa).Nec(t)),this.yb=o(t),this.rl=new u.ZQa(this.yb),this.rl.yib(this.yb.na.N),this.log=e.jb("PlaygraphManager"),this.Mb=i.create(),this.pw=a.create(this.yb,this.rl,this.log,this.Mb),this.Gbc()}_esm(e),e.NQa=void 0,n=i(16),u=i(1391),c=i(1393),r.prototype.CUb=function(){return this.yb.zda},r.prototype.nta=function(){return this.yb.na},r.prototype.T5a=function(){return this.yb.Sh},r.prototype.xJ=function(){return this.yb.Sl},r.prototype.lj=function(t){for(var e=[],i=0;i<arguments.length;++i)e[+i]=arguments[i];this.yb.lj.apply(this.yb,J(e))},r.prototype.PHb=function(t){for(var e=[],i=0;i<arguments.length;++i)e[+i]=arguments[i];this.yb.mZa(e)},r.prototype.Nw=function(t){this.yb.Sl=t},r.prototype.Rj=function(t,e){this.yb.Rj(t,e)},r.prototype.Dua=function(t,e,i,n){var r;if(i=void 0===i?{}:i,n=void 0===n||n,t!==this.yb.Sh)throw Error("Invalid currentSegmentId");if(-1===Object.keys(null!=(r=this.xJ().O[t].next)?r:{}).indexOf(e))throw Error("Invalid nextSegmentId");return this.log.info("Transition initiated: "+t+" -> "+e),this.ejb(),null!=(r=i.Wn)&&r.isUIAutoPlay,this.pw.Eua(e,i,n)},r.prototype.isReady=function(){return this.pw.isReady()},r.prototype.addListener=function(t,e,i){this.Mb.addListener(t,e,i)},r.prototype.removeListener=function(t,e){this.Mb.removeListener(t,e)},r.prototype.Qo=function(){return this.pw.Qo()},r.prototype.Ib=function(){return this.pw.vJ()},r.prototype.nLb=function(t,e,i){var n;return t=void 0===t?this.xJ().yd:t,e=void 0===e?{}:e,n=this.PEa.z1a(this),this.c7b(null!=t?t:this.xJ().yd,e,i),n},r.prototype.uDb=function(t){var e;return this.log.info("Adding segment - movieId: "+t.L+", startPts: "+t.ea+", logicalEnd: "+t.jk),e=Object.assign({},t.Fb,t.ea?{ea:t.ea}:{},t.jk?{jk:t.jk}:{}),this.bkb(t.L,e,t.ja),t=this.pw.xYa(t),this.ejb(),t},r.prototype.transition=function(t){var e=this.yb.sY(this.yb.Sh);return e?this.Dua(this.yb.Sh,e,t):(this.log.error("Next segment is not defined"),Promise.reject())},r.prototype.close=function(t){return this.pw.close(t)},r.prototype.c7b=function(t,e,i){var n;void 0===t&&(t=null==(n=this.xJ())?void 0:n.yd),(e||i)&&this.bkb(this.xJ().O[t].N,null!=e?e:{},i),this.pw.GK(t)},r.prototype.bkb=function(t,e,i){i&&this.rl.UN(t,i),this.rl.iDb(t,e)},r.prototype.Gbc=function(){var e=this;this.yb.pdc(function(){e.rl.Jy(),e.pw.Jy()}),this.yb.qdc(function(t){e.pw.Xya(t)}),this.yb.odc(function(t){e.pw.oK(t)}),this.addListener(n.oH.L0,function(){return e.C4b()}),this.addListener(n.Na.D9a,function(t){return e.q4b(t)})},r.prototype.ejb=function(){var e=this;this.OX||(this.Ib().Pna(n.ma.ZK,function(t){return e.RF(t)}),this.OX=!0)},r.prototype.q4b=function(t){var e=this;this.pw.Ilb(t).catch(function(){return e.Mb.Tc(n.Na.error,t.F1())})},r.prototype.C4b=function(){var t=this.Ib().getError();t?this.Mb.Tc(n.Na.nO,t):(this.Mb.Tc(n.Na.P7),this.Mb.Tc(n.Na.gn),this.Mb.Tc(n.Na.Kw),this.Mb.Tc(n.Na.Im),this.Mb.Tc(n.Na.H1),this.Mb.Tc(n.Na.nO))},r.prototype.RF=function(t){var e,i,n=t.metrics;n&&(i=(e=this.Ib()).ek(t.position.segmentId),n=e.ek(n.srcsegment),this.$Da.R7b(t,i,n,!!e.k7a().$h))},e.NQa=r},function(t,e,i){var r;function n(t){this.ba=t,this.RS={},this.Jy()}_esm(e),e.ZQa=void 0,r=i(1392),n.prototype.Jy=function(){var e=this;Object.values(this.ba.Sl.O).forEach(function(t){t=t.N,e.RS[t]||e.u9a(t)}),this.Qfa()},n.prototype.SP=function(t){return this.RS[t]},n.prototype.Yac=function(t){this.uY(t).state=r.dA.KJa,this.Qfa()},n.prototype.Xac=function(t,e){(t=this.uY(t)).state=r.dA.Error,t.error=e,t.yhb(!1),this.Qfa()},n.prototype.yib=function(t){(t=this.uY(t)).state=r.dA.Yqb,t.yhb(!0),this.Qfa()},n.prototype.iDb=function(t,e){this.uY(t).Fb=e},n.prototype.UN=function(t,e){this.uY(t).ja=e},n.prototype.uY=function(t){var e;return null!=(e=this.SP(t))?e:this.u9a(t)},n.prototype.u9a=function(t){var n=void 0,e=new Promise(function(e,i){n=function(t){(t?e:i)()}});return this.RS[t]={state:r.dA.hOa,w8b:e,yhb:n}},n.prototype.Qfa=function(){for(var t,e=this.ba.Sh;(e=this.ba.sY(e))&&(t=this.Uo(e),this.RS[t].state!==r.dA.Error)&&this.RS[t].state!==r.dA.KJa&&this.RS[t].state!==r.dA.hOa;);},n.prototype.Uo=function(t){return this.ba.Sl.O[t].N},e.ZQa=n},function(t,e){_esm(e),e.dA=void 0,(t=e.dA||(e.dA={}))[t.hOa=0]="None",t[t.KJa=1]="Fetching",t[t.Yqb=2]="Done",t[t.Error=3]="Error"},function(t,e,i){var r;function n(){}_esm(e),e.OQa=void 0,r=i(35),n.prototype.Nec=function(i){var n;return this.qZb(i.O)?(n=(new r.jx).fL(i.yd),Object.entries(i.O).forEach(function(t){var e=rt(t);t=e.next().value,e=e.next().value,t===i.yd?n.ng(t,Object.assign(Object.assign({},e),{next:void 0,wa:void 0,Rb:void 0})):n.ng(t,e)}),n.Wi()):i},n.prototype.qZb=function(t){return t=Object.values(t).map(function(t){return t.N}),1===new Set(t).size},e.OQa=n},function(t,e,i){var n,r,a,o;function s(t,e){this.Ga=t,this.o_b=e}_esm(e),e.YQa=void 0,t=i(0),n=i(1),r=i(18),a=i(586),s.prototype.create=function(t){return new(i(312).p5)(this.Ga.Tb(),t)},s.prototype.z1a=function(t){return new(i(1395).UTa)(this.Ga.Tb(),t,this.o_b)},o=s,o=t.__decorate([n.$(),t.__param(0,n.l(r.$c)),t.__param(1,n.l(a.$La))],o),e.YQa=o},function(t,e,i){var r;function n(t,e,i){var n=r.p5.call(this,t,e)||this;return n.seek=function(t){return n.Ib().seek(t)},n.addEpisode=function(t){return n.Nwa.TCb(t)},n.playNextEpisode=function(t){return n.Nwa.i6b(t=void 0===t?{}:t)},n.watchCredits=function(t){return n.Nwa.khc(t)},n.playSegment=function(t){return n.Ib().Seb(t)},n.queueSegment=function(t){return n.Ib().Zfb(t)},n.updateNextSegmentWeights=function(t,e){return n.Ib().Rj(t,e)},n.setNextSegment=function(t){for(var e=[],i=0;i<arguments.length;++i)e[+i]=arguments[i];e=e.map(function(t){return{X:t.segmentId,WQ:t.nextSegmentId}}),n.Dh.lj.apply(n.Dh,J(e))},n.clearNextSegment=function(t){for(var e=[],i=0;i<arguments.length;++i)e[+i]=arguments[i];return n.Dh.PHb.apply(n.Dh,J(e))},n.goToNextSegment=function(t,e){return n.Dh.Dua(t,e)},n.getPlaying=function(){return n.isPlaying()},n.getPaused=function(){return n.isPaused()},n.getMuted=function(){return n.isMuted()},n.getEnded=function(){return n.isEnded()},n.getTimedTextVisibility=function(){return n.isTimedTextVisible()},n.isTimedTextVisible=function(){return!!n.Ib().BY().visibility},n.setTimedTextVisibility=function(t){return n.setTimedTextVisible(t)},n.setTimedTextSize=function(t){return n.Ib().bS({size:t})},n.setTimedTextBounds=function(t){return n.Ib().bS({bounds:t})},n.setTimedTextMargins=function(t){return n.Ib().bS({margins:t})},n.setTimedTextVisible=function(t){return n.Ib().bS({visibility:t})},n.getCongestionInfo=function(t){t&&t({success:!1,name:null,isCongested:null})},n.Nwa=i(t,e,n.log),n}_esm(e),e.UTa=void 0,S(n,(r=i(312)).p5),e.UTa=n},function(t,e,i){var n,r,o;function a(){}_esm(e),e.KQa=void 0,t=i(0),n=i(120),r=i(1),o=i(35),a.prototype.jLb=function(t){for(var i,n,r,e=[],a=0;a<arguments.length;++a)e[+a]=arguments[a];if(i=this,0===e.length)throw Error("Empty playgraph");return n=(new o.jx).fL(this.Bt(e[0])),e.reverse().forEach(function(t){var e=i.Bt(t);n.ng(e,Object.assign({N:t,va:0,wa:1/0},r?{Rb:r}:{})),r=e}),n.Wi()},a.prototype.Bt=function(t,e){return t+":"+(e=void 0===e?n.pH.Oia:e)},a.prototype.aEb=function(t,e){var i,n,r,a;return void 0===r&&(r=null!=(i=e.id)?i:this.Bt(e.L)),i=this.D6a(t),(a=new o.jx(t)).ng(r,{N:e.L,va:null!=(n=e.ea)?n:0,wa:1/0}),t=t.O[i],e={},a.ng(i,Object.assign({},t,{Rb:r,next:Object.assign({},t.next||{},(e[r]={},e))})),a.Wi()},a.prototype.D6a=function(t){for(var e=t.yd,i=e;i=t.O[i].Rb;)e=i;return e},i=a,i=t.__decorate([r.$()],i),e.KQa=i},function(t,e,i){var n,r,a,o,s;function u(t){return r.uf.call(this,t,"PlaygraphConfigImpl")||this}_esm(e),e.IQa=void 0,t=i(0),n=i(1),r=i(45),a=i(33),o=i(44),s=i(5),S(u,r.uf),nt.Object.defineProperties(u.prototype,{i7b:{configurable:!0,enumerable:!0,get(){return 2}},h7b:{configurable:!0,enumerable:!0,get(){return s.pca(3)}},JEa:{configurable:!0,enumerable:!0,get(){return!1}},Yfa:{configurable:!0,enumerable:!0,get(){return!1}},Lmb:{configurable:!0,enumerable:!0,get(){return!1}},P4a:{configurable:!0,enumerable:!0,get(){return!1}},Cda:{configurable:!0,enumerable:!0,get(){return!0}}}),i=u,t.__decorate([o.config(o.XC,"prepareSegmentsUpfront")],i.prototype,"i7b",null),t.__decorate([o.config(o.Ll,"prepareSegmentsDuration")],i.prototype,"h7b",null),t.__decorate([o.config(o.Cd,"usePlaygraphForPostPlay")],i.prototype,"JEa",null),t.__decorate([o.config(o.Cd,"usePlaygraphForSkipSegment")],i.prototype,"Yfa",null),t.__decorate([o.config(o.Cd,"useSinglePlayerPlayback")],i.prototype,"Lmb",null),t.__decorate([o.config(o.Cd,"forcePlaygraphTrace")],i.prototype,"P4a",null),t.__decorate([o.config(o.Cd,"postPlayDefaultNextEpisode")],i.prototype,"Cda",null),i=t.__decorate([n.$(),t.__param(0,n.l(a.Sm))],i),e.IQa=i},function(t,e,i){var n,r,a,o,s,u,c,h,f,l;function d(t,e,i,n,r,a,o){this.Ga=t,this.iac=i,this.Kj=r,this.Pn=o,this.gac=e.mJ(!1,"6.0038.071.911",t.id,a,n)}_esm(e),e.RQa=void 0,t=i(0),n=i(1),r=i(18),a=i(166),o=i(1399),s=i(363),u=i(228),c=i(13),h=i(587),f=i(38),i=i(120),d.prototype.create=function(t,e,i,n){var r=this.iac.aLb(t,this.gac,e),a=t.KEa;return i.debug("Using "+(a?"single":"multiple")+" player playback strategy"),a?new o.ySa(this.Kj,t,e,i,r,n,this.Pn):new h.gH(t,e,r,n,this.Pn)},l=d,l=t.__decorate([n.$(),t.__param(0,n.l(r.$c)),t.__param(1,n.l(s.iSa)),t.__param(2,n.l(u.wka)),t.__param(3,n.l(c.Oc)),t.__param(4,n.l(a.nH)),t.__param(5,n.l(f.J4)),t.__param(6,n.l(i.xM))],l),e.RQa=l},function(t,e,i){var l,u,n,c,d;function r(t,e,i,n,r,a,o){var s=c.gH.call(this,e,i,r,a,o)||this;return s.Kj=t,s.Aa=n,s.OX=!1,s.Ora=new Map,s.t4b=function(){s.vJ().Pna(u.ma.ZK,function(t){s.Mb.Tc(u.oH.L0),s.yb.Sh=t.position.segmentId})},s.QXb(),a.addListener(u.Na.loaded,s.t4b),s}_esm(e),e.ySa=void 0,l=i(35),u=i(16),n=i(4),c=i(587),d=i(120),S(r,c.gH),r.prototype.xYa=function(t){var e,r,a=this,i=this.yb.Sl,n=this.Pn.Bt(t.L,"ident"),o=this.Pn.Bt(t.L,"main"),s=this.Pn.Bt(t.L,"credits"),u=isFinite(t.jk),c=isFinite(t.ea)&&t.L!==i.O[i.yd].N,h={},f=new l.jx(i).ng(o,Object.assign({N:t.L,va:c&&t.ea||0,wa:null!=(e=t.jk)?e:1/0},u?{next:(h[s]={},h),Rb:s}:{}));return c&&f.ng(n,{N:t.L,va:0,wa:t.ea,next:((e={})[o]={},e),Rb:o}),u&&f.ng(s,{N:t.L,va:t.jk,wa:1/0}),this.yb.fz(o)||(t=i.O[this.Pn.D6a(i)].N,r=this.Pn.Bt(t,d.pH.gHa),[this.Pn.Bt(t,d.pH.Oia),r].filter(function(t){return a.yb.fz(t)}).forEach(function(t){var e=a.yb.Ee(t),i=t===r||a.Kj.Cda,n={};f.ng(t,Object.assign({},e,{next:Object.assign({},e.next,(n[o]={},n))},i?{Rb:o}:{}))})),this.yb.Sl=f.Wi(),this.GK(o)},r.prototype.Jy=function(){this.isReady()&&this.vJ().Jy()},r.prototype.Xya=function(){},r.prototype.oK=function(t){this.vJ().oK(t)},r.prototype.Eua=function(t,e,i){return e=void 0===e?{}:e,this.Aa.debug("goToSegment "+t),this.vJ().HY(t,e,i)},r.prototype.GK=function(t){return t===this.fac?null:(this.fac=t,this.OX?this.rl.SP(this.yb.Ee(t).N).w8b:(this.OX=!0,c.gH.prototype.GK.call(this,t)))},r.prototype.Ilb=function(t){return t.errorCode&&this.Ora.has(t.errorCode)?this.Ora.get(t.errorCode)(t):Promise.reject(Error("Error "+t.errorCode+" isn't recoverable"))},r.prototype.QXb=function(){var e=this;this.Ora.set(n.Z.POa,function(){var t;return null!=(t=null==(t=c.gH.prototype.GK.call(e,e.yb.Sh))?void 0:t.then(function(){var t;c.gH.prototype.Eua.call(e,e.yb.Sh,null!=(t=null==(t=e.rl.SP(e.yb.na.N))?void 0:t.Fb)?t:{})}))?t:Promise.reject(Error("Couldn't prepare segment for transition"))})},e.ySa=r},function(t,e,i){var n,a;function r(t,e,i){this.KB=e,this.Kj=i,this.u6={},this.cmb=[],this.vjb=[],this.Wcb=[],this.ooa=new WeakMap,this.reset(t)}_esm(e),e.XQa=void 0,n=i(35),a=i(35),r.prototype.reset=function(t){var e=1<Object.keys(t.O).length&&1===new Set(Object.values(t.O).map(function(t){return t.N})).size;this.gCb=this.Kj.Lmb||e,this.Pib(t),this.Sh=t.yd,this.IAb=this.KB.hB(),this.WCa=new Map},r.prototype.H$=function(t){return this.KEa?this.Sl:(this.ooa.has(t)||this.ooa.set(t,n.oG(t.L,t.X)),this.ooa.get(t))},r.prototype.Pib=function(t){this.JAb=t,this.u6={},t=Object.keys(t.O),this.mZa(t),this.p3b()},r.prototype.lj=function(t){for(var i,e=[],n=0;n<arguments.length;++n)e[+n]=arguments[n];i=this,e.filter(function(t){return i.fz(t.X)}).filter(function(t){return!(t=t.WQ)||i.fz(t)}).forEach(function(t){var e=t.X;i.u6[e]=i.vdb(t.WQ),i.g3b(e)})},r.prototype.mZa=function(t){var e=this;t.filter(function(t){return e.fz(t)}).forEach(function(t){e.u6[t]=e.vdb(e.Ee(t).Rb)})},r.prototype.Rj=function(t,i){var e,n,r=this.Ee(t);r&&r.next&&(e=new a.jx(this.Sl),n=Object.keys(r.next).reduce(function(t,e){return t[e]=void 0===i[e]?r.next[e]:Object.assign({},r.next[e],{weight:i[e]}),t},{}),n=Object.assign({},r,{next:n}),e.ng(t,n),this.Sl=e.Wi())},r.prototype.fz=function(t,e){return t in(e=void 0===e?this.Sl.O:e)},r.prototype.sY=function(t){return this.u6[t]},r.prototype.Ee=function(t){return this.Sl.O[t]},r.prototype.gVb=function(t){return this.WCa.has(t)?this.WCa.get(t):(t=this.Ee(t),isFinite(t.wa)?t.wa:void 0)},r.prototype.Vfc=function(t,e){this.WCa.set(t,e),this.l3b(t)},r.prototype.pdc=function(t){this.cmb.push(t)},r.prototype.qdc=function(t){this.vjb.push(t)},r.prototype.odc=function(t){this.Wcb.push(t)},r.prototype.p3b=function(){var e=this;this.cmb.forEach(function(t){return t(e.Sl)})},r.prototype.g3b=function(e){this.Wcb.forEach(function(t){return t(e)})},r.prototype.l3b=function(e){this.vjb.forEach(function(t){return t(e)})},r.prototype.vdb=function(t){return null===t?void 0:t},nt.Object.defineProperties(r.prototype,{zda:{configurable:!0,enumerable:!0,get(){return this.IAb}},KEa:{configurable:!0,enumerable:!0,get(){return this.gCb}},Sl:{configurable:!0,enumerable:!0,get(){return this.JAb},set(t){if(this.Sh&&!this.fz(this.Sh,t.O))throw Error("Provided playgraphMap does not contain the current segmentId "+this.Sh);this.Pib(t)}},Sh:{configurable:!0,enumerable:!0,get(){return this.Exb},set(t){if(!this.fz(t))throw Error("Provided currentSegmentId "+t+" does not exist in the current playgraph");this.Exb=t}},na:{configurable:!0,enumerable:!0,get(){return this.Ee(this.Sh)}}}),e.XQa=r},function(t,e,i){var a,n;function r(t,e,i,n,r){this.Jj=t,this.Dh=e,this.log=i,this.Kj=n,this.Pn=r,this.qda=new a.Tja}_esm(e),e.aMa=void 0,a=i(588),n=i(120),r.prototype.TCb=function(t){var e,i,n,r;return this.log.info("Next episode added",t),n=this.qda.vxa(t.playbackParams),r=Math.max(0,null!=(r=null!=(r=null!=(e=t.startPts)?e:t.nextStartPts)?r:n.ea)?r:0),e=null!=(i=null!=(i=t.endPts)?i:t.currentEndPts)?i:n.jk,this.Dh.uDb({L:t.movieId,ea:r,jk:e,Fb:n,ja:t.manifest,Jj:this.Jj})},r.prototype.i6b=function(t){var e,i,n,r,a,o;return t=this.qda.vxa(t),this.log.info("Playing the next episode",t),n=this.Dh.T5a(),r=this.Dh.xJ(),a=r.O[n],o=Object.keys(null!=(e=a.next)?e:{}).find(function(t){return a.N!==r.O[t].N}),e=!this.Kj.Cda||!(null!=(i=t.Wn)&&i.isUIAutoPlay),o?this.Dh.Dua(n,o,t,e):Promise.reject(Error("Next episode not found"))},r.prototype.khc=function(t){var e,i=this.Pn.Bt(t,n.pH.Oia);t=this.Pn.Bt(t,n.pH.gHa),e=this.Dh.yb,this.Kj.Cda&&e.Sh!==t&&e.fz(t)&&e.sY(i)!==t&&this.Dh.lj({X:i,WQ:t})},e.aMa=r},function(t,e,i){var n,r;_esm(e),e.pZa=void 0,t=i(1),n=i(1403),r=i(34),e.pZa=new t.Ad(function(t){t(r.nj).to(n.jGa).la()})},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,d,p,b;function g(t,e,i,n,r,a){var o=this;this.am=t,this.config=i,this.$t=n,this.debug=r,this.Ga=a,this.jlb=[],this.sd={},this.log=e.jb("loadAsync"),this.A0b=d.SJa(function(e){o.h9b=!0,o.startTime=o.Ga.Tb().ka(f.pa),o.load(o.jlb).then(function(){o.endTime=o.Ga.Tb().ka(f.pa),e(b.Vg)}).catch(function(t){o.endTime=o.Ga.Tb().ka(f.pa),e(t)})})}_esm(e),e.jGa=void 0,t=i(0),n=i(83),r=i(4),a=i(1404),o=i(60),s=i(1),u=i(7),c=i(13),h=i(69),f=i(5),l=i(112),d=i(589),p=i(18),b=i(17),g.prototype.AZ=function(t){this.A0b(t)},g.prototype.register=function(t,e){this.debug.assert(!this.h9b),this.jlb.push({U_b:this.CGb(e),errorCode:t})},g.prototype.Se=function(t){this.debug.assert(void 0===this.sd[t]),this.sd[t]=this.Ga.Tb().ka(f.pa)},g.prototype.load=function(t){var i=this;return a.Afb(t).then(function(t){return i.am.mark(o.Ap.Ek.fob),t.reduce(function(t,e){return t.then(function(){return i.R_b(e)})},Promise.resolve()).then(function(){i.am.mark(o.Ap.Ek.dob)})})},g.prototype.R_b=function(e){var i=this,t=e.U_b;return this.$t.fu(f.vc(this.config().BEb),t()).catch(function(t){if(i.log.error("Failed to load component "+e.errorCode,t),i.am.mark(o.Ap.Ek.eob),t instanceof h.Os)throw{Ba:r.Y.cob,errorCode:e.errorCode};throw t.errorCode=t.errorCode||e.errorCode,t.Ba=t.Ba||r.Y.bob,t})},g.prototype.CGb=function(t){return function(){return new Promise(function(e,i){t(function(t){t.ha?e():i(t)})})}},i=g,i=t.__decorate([s.$(),t.__param(0,s.l(n.GM)),t.__param(1,s.l(u.ob)),t.__param(2,s.l(c.Oc)),t.__param(3,s.l(h.qH)),t.__param(4,s.l(l.Hz)),t.__param(5,s.l(p.$c))],i),e.jGa=i},function(t,e,i){var r,a,o;_esm(e),e.Afb=void 0,r=i(4),a=[r.Z.rsb,r.Z.hLa,r.Z.iLa,r.Z.mLa,r.Z.eLa,r.Z.cLa,r.Z.nia,r.Z.wsb,r.Z.fLa,r.Z.dLa,r.Z.sD,r.Z.$Ka,r.Z.bLa,r.Z.jLa,r.Z.kLa,r.Z.lLa,r.Z.gLa,r.Z.aLa],(i=o=o||{}).Rtb=function(t){for(var e,i={},n=0;n<t.length;n++){if(i[(e=t[n]).errorCode])return{errorCode:e.errorCode,Ba:r.Y.$nb};i[e.errorCode]=1}},i.Stb=function(t){for(var e,i=0;i<t.length;i++)if(e=t[i],-1===a.indexOf(e.errorCode))return{errorCode:e.errorCode,Ba:r.Y.aob}},e.Afb=function(n){return new Promise(function(t,e){var i=o.Stb(n);i&&e(i),(i=o.Rtb(n))&&e(i),t(n.sort(function(t,e){return a.indexOf(t.errorCode)-a.indexOf(e.errorCode)}))})}},function(t,e,i){var n,r;_esm(e),e.ja=void 0,t=i(1),n=i(1406),r=i(116),e.ja=new t.Ad(function(t){t(r.dH).to(n.XMa).la()})},function(t,e,i){var n,r,o,a,s,u,c,h,f,l;function d(t,e,i,n,r,a){this.Ig=e,this.cbb=n,this.IZ=a,this.p0=new Map,this.log=t.jb("ManifestFetcher"),this.bh=i.bh,this.dGb=r().OOb}_esm(e),e.XMa=void 0,t=i(0),n=i(1),r=i(18),o=i(37),a=i(7),s=i(5),u=i(13),c=i(100),h=i(59),f=i(296),i=i(136),d.prototype.rJ=function(t,e,i){var n=this;return e=void 0===e||e,i&&this.mDb(t.N,i),e&&this.Z$(t.N)?this.k$(t.N).catch(function(){return n.ghb(t,e)}):this.ghb(t,e)},d.prototype.Z$=function(t){return this.bh.LY(t,"manifest")},d.prototype.i1=function(t,e){var i=this;this.dGb&&this.bh.setData(t,"manifest",e,function(){return i.bWb(t,e?Promise.resolve(e):void 0)})},d.prototype.k$=function(e){var i=this;return this.bh.getData(e,"manifest").then(function(t){if(!t)throw Error("Manifest not found");if(t.hb.expiration<=h.m8())throw i.bh.clearData(e,"manifest"),Error("Manifest has expired");return t})},d.prototype.bWb=function(t,e){var i;null!=(i=this.p0.get(t))&&i.forEach(function(t){return t(e)}),this.p0.delete(t)},d.prototype.mDb=function(t,e){this.p0.has(t)||this.p0.set(t,[]),this.p0.get(t).push(e)},d.prototype.ghb=function(n,e){var r,t,a=this;return this.log.trace("Requesting a new manifest",n.N),r=this.Ig.Tb().ka(s.pa),t=(n.Vi?this.gfc(n).catch(function(t){return a.log.warn(t.message),a.cbb.Pf(a.log,n)}):this.cbb.Pf(this.log,n)).then(function(t){var e,i;return t.qB&&(e=t.qB,i={Kea:Promise.resolve(e),source:"manifest"},delete t.qB,a.bh.setData(n.N,"ldl",i,function(){e.close().catch(function(t){a.log.info("Unable to cleanup LDL session.",t)})})),n.Fv===c.ko.kH&&(t.QK=r,t.JR=a.Ig.Tb().ka(s.pa)),t}).catch(function(t){throw e&&a.i1(n.N,void 0),a.log.error("Failed to fetch manifest",o.jd.ff(t)),t}),e&&this.i1(n.N,t),t},d.prototype.gfc=function(o){var s=this;return new Promise(function(t,e){var i,n,r,a;return s.log.trace("Trying to retrieve an auxiliary manifest from parent manifest",o.N),(r=null==(i=o.Vi)?void 0:i.D_)?(a=null==(n=o.Vi)?void 0:n.Oe,(i=null==(n=r.ev)?void 0:n.find(function(t){return t.L===o.N&&(void 0===a||t.Oe===a)}))?void t(s.IZ.create(i)):e(Error("Auxiliary manifest not found in parent manifest."))):e(Error("Parent manifest does not exist."))})},l=d,l=t.__decorate([n.$(),t.__param(0,n.l(a.ob)),t.__param(1,n.l(r.$c)),t.__param(2,n.l(f.oha)),t.__param(3,n.l(c.Dja)),t.__param(4,n.l(u.Oc)),t.__param(5,n.l(i.nM))],l),e.XMa=l},function(t,e,i){var n,r,a,o;_esm(e),e.profile=e.RYa=void 0,n=i(1408),r=i(175),t=i(1),a=i(80),o=i(13),e.RYa=new t.Ad(function(t){t(r.w2).to(n.IFa).la()}),e.profile=new t.Ad(function(t){t(a.zM).yG(function(t){return(t=t.zb.get(o.Oc)())&&t.uB?"browsertest":"browser"})})},function(t,e,i){var n,r,a,o,s,u;function c(t,e,i,n){return(t=o.uf.call(this,t,void 0===n?"AppInfoConfigImpl":n)||this).config=e,t.Ifa=i,t}_esm(e),e.IFa=void 0,t=i(0),n=i(1),r=i(39),a=i(44),o=i(45),s=i(33),i=i(285),S(c,o.uf),c.prototype.mUb=function(t){return""+this.M3a+(this.Ifa.Sea(t)?"/msl_v1":"")},c.prototype.xUb=function(t){return""+this.host+(this.Ifa.Sea(t)?"/msl":"")+"/playapi"},nt.Object.defineProperties(c.prototype,{endpoint:{configurable:!0,enumerable:!0,get(){return this.host+"/api"}},M3a:{configurable:!0,enumerable:!0,get(){return this.host+"/nq"}},host:{configurable:!0,enumerable:!0,get(){var t;switch(this.config.mP){case r.Nz.Vvb:t="www.stage";break;case r.Nz.cTa:t="www-qa.test";break;case r.Nz.HLa:t="www-int.test";break;default:t="www"}return"https://"+t+".netflix.com"}},OZa:{configurable:!0,enumerable:!0,get(){return"pbo_licenses"}}}),u=c,t.__decorate([a.config(a.string,"apiEndpoint")],u.prototype,"endpoint",null),t.__decorate([a.config(a.string,"nqEndpoint")],u.prototype,"M3a",null),t.__decorate([a.config(a.string,"bindService")],u.prototype,"OZa",null),u=t.__decorate([n.$(),t.__param(0,n.l(s.Sm)),t.__param(1,n.l(r.Bp)),t.__param(2,n.l(i.l5)),t.__param(3,n.l(s.L2)),t.__param(3,n.optional())],u),e.IFa=u},function(t,e,i){var n,r;_esm(e),e.Agc=e.cwb=e.awb=e.$vb=e.bwb=void 0,n=i(15),r=i(14),e.bwb=function(t,e,i){for(i=(i-t.length)/e.length;0<i--;)t+=e;return t},e.$vb=function(t,e,i){return i=n.vg(i)?i:"...",t.length<=e?t:t.substr(0,t.length-(t.length+i.length-e))+i},e.awb=function(t,e){for(var i,n=1;n<arguments.length;++n);return i=r.slice.call(arguments,1),t.replace(/{(\d+)}/g,function(t,e){return void 0!==i[e]?i[e]:t})},e.cwb=function(t){for(var e=t.length,i=new Uint16Array(e),n=0;n<e;n++)i[n]=t.charCodeAt(n);return i.buffer},e.Agc=function(t){var i=new Uint8Array(t.length);return Array.prototype.forEach.call(t,function(t,e){i[e]=t.charCodeAt(0)}),i}},function(t,e,i){_esm(e),t=i(9),e=i(115),i=i(294),t.Fa.get(e.lM).aea(i.Kia.Epb,function(t){var e,i=t.level;(!bt._cad_global.config||i<=bt._cad_global.config.k0b)&&(t=t.Afa(),e=bt.console,i<=1?e.error(t):i<=2?e.warn(t):e.log(t))})},function(t,s,e){var n,r,u,a,o;function c(t){var e,i;if(r.$W(t),a.vg(t)&&s.qLa.test(t)&&4===(e=t.split(".")).length){for(var n=0;n<e.length;n++)if((i=o.qk(e[n]))<0||!a.xF(i,0,255)||1!==e[n].length&&0===e[n].indexOf("0"))return;return t}}function h(t){var e=0;if(c(t)===t)return t=t.split("."),(e+=o.qk(t[0])<<24)+(o.qk(t[1])<<16)+(o.qk(t[2])<<8)+o.qk(t[3])}function f(t){var e,i;if(r.$W(t),a.vg(t)&&t.match(s.rLa)&&(-1!==(e=t.split(":"))[e.length-1].indexOf(".")&&(t=l(e[e.length-1]),e.pop(),e.push(t[0]),e.push(t[1]),t=e.join(":")),!(2<(t=t.split("::")).length||1===t.length&&8!==e.length)&&8===(t=(e=1<t.length?d(t):e).length))){for(;t--;)if(i=parseInt(e[t],16),!a.xF(i,0,n.KMa))return;return e.join(":")}}function l(t){var e;return t=h(t)>>>0,(e=[]).push((t>>>16&65535).toString(16)),e.push((65535&t).toString(16)),e}function d(t){var e,i,n=t[0].split(":");if(t=t[1].split(":"),1===n.length&&""===n[0]&&(n=[]),1===t.length&&""===t[0]&&(t=[]),(e=8-(n.length+t.length))<1)return[];for(i=0;i<e;i++)n.push("0");for(i=0;i<t.length;i++)n.push(t[i]);return n}function p(t){return-1<<32-t}_esm(s),s.Hsb=s.Msb=s.Jsb=s.Isb=s.Lsb=s.Gsb=s.Ksb=s.WG=s.rLa=s.qLa=void 0,n=e(17),r=e(23),u=e(14),a=e(15),o=e(25),s.qLa=/^[0-9.]*$/,s.rLa=/^([a-fA-F0-9]*:){2}[a-fA-F0-9:.]*$/,s.WG="0000000000000000",s.Ksb=c,s.Gsb=h,s.Lsb=f,s.Isb=l,s.Jsb=d,s.Msb=function(t,e,i){var n=c(t),r=f(t),a=c(e),o=f(e);if(!n&&!r||!a&&!o||n&&!a||r&&!o)return!1;if(t===n)return i=p(i),(h(t)&i)==(h(e)&i);if(t!==r)return!1;for(t=t.split(":"),e=e.split(":"),n=u.oM(i/s.WG.length);n--;)if(t[n]!==e[n])return!1;if(0!==(i%=s.WG.length))for(t=parseInt(t[n],16).toString(2),e=parseInt(e[n],16).toString(2),t=s.WG.substring(0,s.WG.length-t.length)+t,e=s.WG.substring(0,s.WG.length-e.length)+e,n=0;n<i;n++)if(t[n]!==e[n])return!1;return!0},s.Hsb=p},function(t,e,i){_esm(e),i(20),i(17),t=i(9),i(115),i(294),i(4),i(114),i(5),i=i(34),t.Fa.get(i.nj)},function(t,e,i){var n,r,a,o,s;_esm(e),n=i(40),r=i(17),a=i(4),o=i(14),t=i(9),i=i(34),(s=t.Fa.get(i.nj)).register(a.Z.mLa,function(i){o.Fr&&o.Fr.generateKey&&o.Fr.importKey&&o.Fr.unwrapKey?(s.Se("wcs"),n.sK(o.Fr.generateKey({name:"AES-CBC",length:128},!0,["encrypt","decrypt"])).then(function(){s.Se("wcdone"),i(r.Vg)},function(t){var e;0<=(t=""+t).indexOf("missing crypto.subtle")?e=a.Y.Xka:0<=t.indexOf("timeout waiting for iframe to load")&&(e=a.Y.twb),i({Ba:e,Sb:t})})):i({Ba:a.Y.Xka})})},function(t,e,i){var n,r;_esm(e),t=i(4),n=i(9),r=i(537),i=i(34),n.Fa.get(i.nj).register(t.Z.cLa,function(e){n.Fa.get(r.PIa)().then(function(){e({ha:!0})}).catch(function(t){n.log.error("error in initializing indexedDb debug tool",t),e({ha:!0})})})},function(t,e,i){var u,c,s,h;function f(t,e,i,n){var r,a,o;return u.Ua(h.fk(t)&&!h.isArray(t)),n=n||"",r="",(a=t.hasOwnProperty(s.i2)&&t[s.i2])&&c.ih(a,function(t,e){r&&(r+=" "),r+=t+'="'+d(e)+'"'}),a=n+"<"+(i=(e?e+":":"")+i)+(r?" "+r:""),(o=t.hasOwnProperty(s.Az)&&t[s.Az].trim&&""!==t[s.Az].trim()&&t[s.Az])?a+">"+d(o)+"</"+i+">":a+((t=l(t,e,n+"  "))?">\n"+t+"\n"+n+"</"+i+">":"/>")}function l(t,a,o){var s;return u.Ua(h.fk(t)&&!h.isArray(t)),o=o||"",s="",c.ih(t,function(t,e){var i;if("$"!=t[0])for(var n=c.yy(e),r=0;r<n.length;r++)e=n[r],s&&(s+="\n"),h.fk(e)?s+=f(e,a,t,o):s+=o+"<"+(i=(a?a+":":"")+t)+">"+d(e)+"</"+i+">"}),s}function d(t){return h.vg(t)?c.ava(t):h.Oa(t)?(u.ZW(t,"Convert non-integer numbers to string for xml serialization."),""+t):(null==t||u.Ua(!1,"Invalid xml value."),"")}_esm(e),e.Bec=e.MZb=e.LZb=void 0,u=i(23),c=i(25),s=i(201),h=i(15),e.LZb=f,e.MZb=l,e.Bec=d},function(t,e,i){var m,v,y,w,A,_,E,k,S,T,I,O,x,R,P,C,j,N,M,D,L,B,U;_esm(e),m=i(0),v=i(300),y=i(206),w=i(20),A=i(17),_=i(4),E=i(23),k=i(9),S=i(83),T=i(60),I=i(96),O=i(25),x=i(14),R=i(15),P=i(40),C=i(114),j=i(5),t=i(34),N=i(506),M=i(140),D=i(71),L=i(80),B={},(U=k.Fa.get(t.nj)).register(_.Z.fLa,function(r){var i,n,t,e,s,u,c,a,h,f,l,d,o,p;function b(t){t&&t.userList&&w.config.Qbc&&(t.userList=[]),e({esn:y.Wk.Fl,esnPrefix:y.Wk.jq,authenticationKeyNames:w.config.YEb,systemKeyWrapFormat:w.config.Ndc,serverIdentityId:"MSL_TRUSTED_NETWORK_SERVER_KEY",serverIdentityKeyData:o,storeState:t,notifyMilestone:U.Se.bind(U),log:c,ErrorSubCodes:{MSL_REQUEST_TIMEOUT:_.Y.utb,MSL_READ_TIMEOUT:_.Y.ttb}},{result:function(t){!function(a){var t,e,i,o;function n(){d&&k.Fa.get(I.hD).create().then(function(t){return t.save(f,i,!1)}).catch(function(t){c.error("Error persisting msl store",_.Oz(t))})}t=this,e=k.Fa.get(C.EM)(j.vc(100)),o=s.extend({init:function(t){this.uWa=t},getResponse:function(t,e,i){var n,r=(e=this.uWa).kya.pf||r;return t=R.mwa(t.body)?k.R1(t.body):t.body,E.$W(t,"Msl should not be sending empty request"),t={url:e.url,lfb:t,withCredentials:!0,KE:"nq-"+e.method,headers:e.headers},e=this.uWa.timeout,t.r8=e,t.uya=e,n=r.download(t,function(t){try{if(t.ha)i.result({body:t.content});else{if(400!==t.El||!t.Sb)throw O.He(new u("HTTP error, SubCode: "+t.Ba+(t.El?", HttpCode: "+t.El:"")),{cadmiumResponse:t});i.result({body:t.Sb})}}catch(t){i.error(t)}}),{abort:function(){n.abort()}}}}),h&&a.addEventHandler("shouldpersist",function(t){i=t.storeState,e.Xl(n)}),O.He(B,{cqc:function(){l=!0},send:function(r){return new Promise(function(e,n){i=r.kya,t={method:r.method,nonReplayable:r.edb,encrypted:r.pm,userId:r.Pmb,body:r.body,timeout:2*r.timeout,url:new o(r),allowTokenRefresh:d,sendUserAuthIfRequired:p,shouldSendUserAuthData:w.config.Wbc},i.email?(t.email=i.email,t.password=i.password||""):l&&(t.useNetflixUserAuthData=!0);var t,i=t;a.send(i).then(function(t){l=l&&!1,e({ha:!0,body:t.body})}).catch(function(t){var e,i;t.error?(e=t.error.cadmiumResponse&&t.error.cadmiumResponse.Ba?t.error.cadmiumResponse.Ba:a.isErrorReauth(t.error)?_.Y.QMa:a.isErrorHeader(t.error)?_.Y.ntb:_.Y.mtb,i=a.getErrorCode(t.error),n(g(e,i,t.error))):(c.error("Unknown MSL error",t),t.Kc=t.subCode,n({Ba:t.Kc||_.Y.vtb}))})})},c_:a}),M.zH.eO.mslFetch=function(n,r){return m.__awaiter(t,void 0,void 0,function t(){var e,i;return at(t,function(t){return 1==t.PF?(i=k.Fa.get(L.zM),F(t,B.send({kya:{pf:k.Fa.get(D.ax),profile:i},timeout:3e3,url:n.toString(),body:null==r?void 0:r.body,headers:{"Content-Type":"application/x-msl+json"},Pmb:i,L9b:!1,edb:!0,pm:!0}))):(e=t.qga,i={get body(){return this.bodyUsed=!0,e.body}},t.return((i.bodyUsed=!1,i.ok=e.ha,i.status=e.ha?200:400,i.statusText=e.ha?"OK":"Bad Request",i.type="basic",i.url=n.toString(),i.headers=new Headers({"Content-Type":"application/json"}),i.text=function(){return Promise.resolve(this.body)},i.json=function(){return Promise.resolve(JSON.parse(this.body))},i.arrayBuffer=function(){return Promise.resolve(new Uint8Array(this.body))},i.clone=function(){return Object.assign({},this)},i.blob=function(){return this.arrayBuffer().then(function(t){return new Blob([t])})},i.formData=function(){throw Error("Not implemented")},i.redirected=!1,i)))})})},r(A.Vg),k.Fa.get(N.fja).E2b(B)}(t)},timeout:function(){r({Ba:_.Y.RMa})},error:function(t){r(g(_.Y.RMa,void 0,t))}})}function g(t,e,i){var n,r,a,o={Ba:t,r9:e};if(i){if(a=function(t){var e;return t=t||""+i,t=i.stack?0<=(e=""+i.stack).indexOf(t)?e:t+e:t},r=i.cadmiumResponse)return(n=r.Of&&r.Of.toString())&&(r.Of=n),r.Ba=t,r.r9=e,r.Sb=a(i.message),r.error={Kc:t,Xd:n,iC:e,data:i.cause,message:i.message},r;a=a(i.errorMessage),n=O.qk(i.internalCode)||O.qk(i.error&&i.error.internalCode),r=void 0!==i.DPb?P.Jya(i.DPb):void 0}return a&&(o.Sb=a),n&&(o.Of=n),o.error={Kc:t,Xd:n.toString(),iC:e,data:r,message:a},o}if(E.Ua(w.config),i=k.Fa.get(S.GM),n=T.Ap.Ek,x.yD&&x.Fr&&x.Fr.unwrapKey){try{t=bt.netflix.msl,e=t.createMslClient,s=t.IHttpLocation,u=t.MslIoException}catch(t){return void r({Ba:_.Y.otb})}c=k.dk("Msl"),a=w.config.A2b,h=w.config.C2b,f=w.config.uB?"mslstoretest":"mslstore",t=v.rL.qib,l=!0,d=!t||t.ha,o=k.ht(w.config.uB?"MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAm84o+RfF7KdJgbE6lggYAdUxOArfgCsGCq33+kwAK/Jmf3VnNo1NOGlRpLQUFAqYRqG29u4wl8fH0YCn0v8JNjrxPWP83Hf5Xdnh7dHHwHSMc0LxA2MyYlGzn3jOF5dG/3EUmUKPEjK/SKnxeKfNRKBWnm0K1rzCmMUpiZz1pxgEB/cIJow6FrDAt2Djt4L1u6sJ/FOy/zA1Hf4mZhytgabDfapxAzsks+HF9rMr3wXW5lSP6y2lM+gjjX/bjqMLJQ6iqDi6++7ScBh0oNHmgUxsSFE3aBRBaCL1kz0HOYJe26UqJqMLQ71SwvjgM+KnxZvKa1ZHzQ+7vFTwE7+yxwIDAQAB":"MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAlibeiUhffUDs6QqZiB+jXH/MNgITf7OOcMzuSv4G3JysWkc0aPbT3vkCVaxdjNtw50zo2Si8I24z3/ggS3wZaF//lJ/jgA70siIL6J8kBt8zy3x+tup4Dc0QZH0k1oxzQxM90FB5x+UP0hORqQEUYZCGZ9RbZ/WNV70TAmFkjmckutWN9DtR6WUdAQWr0HxsxI9R05nz5qU2530AfQ95h+WGZqnRoG0W6xO1X05scyscNQg0PNCy3nfKBG+E6uIl5JB4dpc9cgSNgkfAIeuPURhpD0jHkJ/+4ytpdsXAGmwYmoJcCSE1TJyYYoExuoaE8gLFeM01xXK5VINU7/eWjQIDAQAB"),p=!!w.config.hCa,k.Fa.get(I.hD).create().then(function(e){a?e.remove(f).then(function(){b()}).catch(function(t){c.error("Unable to delete MSL store",_.Oz(t)),b()}):h?e.load(f).then(function(t){i.mark(n.qtb),b(t.value)}).catch(function(t){t.Ba==_.Y.FD?(i.mark(n.stb),b()):(c.error("Error loading msl store",_.Oz(t)),i.mark(n.rtb),e.remove(f).then(function(){b()}).catch(function(t){r(t)}))}):b()}).catch(function(t){c.error("Error creating app storage while loading msl store",_.Oz(t)),r(t)})}else r({Ba:_.Y.ptb})})},function(t,e,i){var r,n,a,o,s,u,c,h,f,l,d,p,b,g,m;_esm(e),r=i(199),n=i(17),a=i(20),o=i(61),s=i(59),t=i(4),u=i(9),c=i(83),h=i(14),f=i(58),l=i(15),d=i(50),p=i(85),i=i(34),(m=u.Fa.get(i.nj)).register(t.Z.dLa,function(t){var e;function i(){var i,t=m.startTime,n={browserua:h.hH,browserhref:h.x4.href,initstart:t,initdelay:m.endTime-t};(t=h.Nh.documentMode)&&(n.browserdm=""+t),l.oQ(a.config.l4a)&&(n.fesn=a.config.l4a),Object.assign(n,r.eua()),(i=h.gx&&h.gx.timing)&&a.config.h0b.map(function(t){var e=i[t];e&&(n["pt_"+t]=e-s.j0a())}),t=e.WTb(),Object.entries(t).forEach(function(t){var e=rt(t);return t=e.next().value,e=e.next().value,n["m_"+t]=e}),t=g.nv("startup","info",n,o.BD.Esa),b.Jc(t)}g=u.Fa.get(p.Sz),b=u.Fa.get(d.jo),e=u.Fa.get(c.GM),m.AZ(function(){b.xa(),f.pg(i)}),t(n.Vg)})},function(t,e){_esm(e)},function(t,e,c){var h,f,l,d,p,b,g,m,v,y,w,A,_,E,k,S,T;_esm(e),h=c(0),f=c(63),l=c(546),d=c(1420),p=c(304),b=c(20),g=c(17),m=c(204),v=c(590),y=c(59),t=c(4),w=c(9),A=c(522),_=c(14),E=c(301),e=c(34),k=c(61),S=c(167),T=c(350),w.Fa.get(e.nj).register(t.Z.$Ka,function(i){var n=w.Fa.get(A.eOa).gLb(),t=w.Fa.get(m.Hha).$L,e=w.Fa.get(l.ANa).Ks,r=new T.aha,a={pda:w.WX("ASE"),lEb:w.WX("JS-ASE",void 0,"Platform"),dk:w.WX,storage:E.storage,lUb:_.aIa,getTime:y.Do,H8:function(t){return r.decode(t).buffer},tQ:{},Ks:e,kx:d.kx,$L:t,MediaSource:v.DNa,SourceBuffer:p.$ia,oq:function(){return[b.config.E7,b.config.H7]},mv:function(e){k.Fp.forEach(function(t){t.Xib(e)})}},t=new Promise(function(e){E.storage.load("nh",function(t){a.tQ.nh=t.ha?t.data:void 0,e()})}),e=new Promise(function(e){E.storage.load("lh",function(t){a.tQ.lh=t.ha?t.data:void 0,e()})}),o=new Promise(function(e){E.storage.load("gh",function(t){a.tQ.gh=t.ha?t.data:void 0,e()})}),s=new Promise(function(e){E.storage.load("sth",function(t){a.tQ.sth=t.ha?t.data:void 0,e()})}),u=new Promise(function(e){E.storage.load("vb",function(t){a.tQ.vb=t.ha?t.data:void 0,e()})});Promise.all([t,e,u,s,o]).then(function(){return h.__awaiter(this,void 0,void 0,function t(){var e;return at(t,function(t){if(1==t.PF)return e=c(1422)(a),S.yr.Ce=c(591),S.yr.Ce.declare(f.wh),S.yr.Ce.set(c(178)(b.config),!0,w.WX("ASE")),F(t,f.tJ(e));(e=t.qga).open(S.yr.Ce,n),e.oCa({audio:b.config.E7,video:b.config.H7},{W:b.config.B0,fa:void 0}),S.yr.mj=e,i(g.Vg),t.PF=0})})}).catch(function(t){a.pda.error("Exception loading location history from local storage",t)})})},function(t,r,e){var i,n,a,o,s,u;function c(){var t=new n.Bk;this.addEventListener=t.addListener.bind(this),this.removeEventListener=t.removeListener.bind(this),this.emit=t.Tc.bind(this),this.B6=s++,this.hg=a.dk("ProbeRequest"),this.SWa=i.lRa,o.Ua(void 0!==this.SWa),this.oi=r.kx.Uc.UNSENT}function h(){return JSON.stringify({url:this.im,id:this.B6,affected:this.w5,readystate:this.oi})}_esm(r),r.kx=void 0,i=e(1421),n=e(73),a=e(9),o=e(23),e=e(25),s=0,e.He(c.prototype,{ZQ:function(t){t.affected=this.w5,t.probed={requestId:this.B6,url:this.im,oc:this.EV,groupId:this.e6},this.emit(r.kx.We.fU,t)},Cya:function(t){this.KBb=t.httpcode,t.affected=this.w5,t.probed={requestId:this.B6,url:this.im,oc:this.EV,groupId:this.e6},this.emit(r.kx.We.jH,t)},open:function(t,e,i,n){return!!t&&(this.im=t,this.w5=e,this.EV=i,this.oi=r.kx.Uc.OPENED,this.bzb=n,this.SWa.TX(this),!0)},cd:function(){return!0},Vh:function(){return this.B6},toString:h,toJSON:h,readyState:{get(){return this.oi},set(){}},status:{get(){return this.KBb}},url:{get(){return this.im}},xnc:{get(){return this.w5}},$_b:{get(){return this.bzb}}}),(e=u=u||{}).We={fU:"pr0",jH:"pr1"},e.Uc={UNSENT:0,OPENED:1,bA:2,DONE:3,eM:4,name:["UNSENT","OPENED","SENT","DONE","FAILED"]},r.kx=Object.assign(c,u)},function(t,e,i){var n,r;_esm(e),e.lRa=void 0,n=i(9),r=i(107),e.lRa=(n.dk("ProbeDownloader"),{TX:function(t){t={url:t.url,B7b:t},r.pf.C7b(t)}})},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,d,p,b,g,m;function v(t,e,i){this.aq=t,this.groups=e,this.prefix=i,t=f(t,e,i),this.info=t.info.bind(t),this.fatal=t.fatal.bind(t),this.error=t.error.bind(t),this.warn=t.warn.bind(t),this.trace=t.trace.bind(t),this.debug=t.debug.bind(t),this.log=t.log.bind(t)}function y(){this.h1a=function(){throw Error("Not implemented")},this.xNb={query:function(){throw Error("Not implemented")},read:function(){throw Error("Not implemented")},create:function(){throw Error("Not implemented")},append:function(){throw Error("Not implemented")}}}function w(){}function A(){return h||"0.0.0.0"}function _(t){t({Zdb:0,r1:0,D8a:0,k4a:0})}n=i(12),y.prototype.set=function(t,e){a[t]=e,o.save(t,e)},y.prototype.get=function(e,i){if(a.hasOwnProperty(e))return a[e];c.trace("key: "+e+", is not available in storage cache and needs to be retrieved asynchronously"),o.load(e,function(t){t.ha?(a[e]=t.data,i&&i(t.data)):a[e]=void 0})},y.prototype.remove=function(t){o.remove(t)},y.prototype.clear=function(){c.info("WARNING: Calling unimplemented function Storage.clear()")},w.prototype.now=function(){return s()},w.prototype.ia=function(){return u()},w.prototype.iya=function(t){return t+s()-u()},w.prototype.Eya=function(t){return t+u()-s()},v.prototype.C1a=function(t){var e=[];return this.prefix&&Array.isArray(this.prefix)?e.push.apply(e,J(this.prefix)):this.prefix&&e.push(this.prefix),e.push(t),new v(this.aq,this.groups,e)},(i=Promise).prototype.fail=Promise.prototype.catch,l=i,t.exports=function(t){return r=t.pda,f=t.dk,o=t.storage,a=t.tQ,s=t.lUb,u=t.getTime,c=t.lEb,d=t.Ks,m=t.kx,p=t.$L,b=t.SourceBuffer,g=t.MediaSource,h=t.fqc,{name:"cadmium",mv:t.mv,pda:r,storage:new y,Storage:y,time:new w,events:new n.EventEmitter,console:new v("JS-ASE",void 0,"default"),Console:v,options:{},Promise:l,Ks:d,$L:p,ytb:b,MediaSource:g,kx:m,Bq:{name:A},memory:{uTb:_},oq:t.oq,H8:t.H8}}},function(t,e,i){t.exports={EventEmitter:i(1424),Kf:i(1425)}},function(t){function e(t,e){var i;if(void 0===e||"function"!=typeof e||"string"!=typeof t)throw new TypeError("EventEmitter: addEventListener requires a string and a function as arguments");return void 0===this.Ld?(this.Ld={},this.Ld[t]=[e],!0):void 0===(i=this.Ld[t])?(this.Ld[t]=[e],!0):i.indexOf(e)<0&&(i.push(e),!0)}function i(t,e){return!!(t=this.Ld?this.Ld[t]:void 0)&&(t.forEach(function(t){t(e)}),!0)}t.exports={addEventListener:e,on:e,removeEventListener:function(t,e){var i;if(void 0===e||"function"!=typeof e||"string"!=typeof t)throw new TypeError("EventEmitter: removeEventListener requires a string and a function as arguments");return void 0!==this.Ld&&(void 0!==(i=this.Ld[t])&&(!((e=i.indexOf(e))<0)&&(1===i.length?delete this.Ld[t]:i.splice(e,1),!0)))},gb:i,emit:i,removeAllListeners:function(t){return this.Ld&&(void 0===t?delete this.Ld:delete this.Ld[t]),this}}},function(t){function e(t){this.listeners=[],this.console=t}(e.prototype.constructor=e).prototype.on=e.prototype.addEventListener=function(t,e,i,n){if(i=n?i.bind(n):i,n=!1,t){if(this.console&&(i=function(t,e,i,n){t.trace(":",i,":",n),e(n)}.bind(null,this.console,i,e)),"function"==typeof t.addEventListener)n=t.addEventListener(e,i);else{if("function"!=typeof t.addListener)throw Error("Emitter does not have a function to add listeners for '"+e+"'");n=t.addListener(e,i)}this.listeners.push([t,e,i])}return n},e.prototype.clear=function(){var t=this.listeners.length;this.listeners.forEach(function(t){var e=t[0],i=t[1];t=t[2],"function"==typeof e.removeEventListener?e.removeEventListener(i,t):"function"==typeof e.removeListener&&e.removeListener(i,t)}),this.listeners=[],this.console&&this.console.trace("removed",t,"listener(s)")},t.exports=e},function(t,e,i){var o,s;function n(t,n){var r,a=s.aj(t,"MSS");if(o.config.T1b)return{F9:"mss",JC:function(t){var e,i;if(t.lower&&2160<=t.height)t:{for(e=t;e.lower;){if(e.height<2160&&1080<e.height){e=!0;break t}if(e.height<=1080)break;e=e.lower}e=!1}else e=void 0;if(e){if(void 0===r){try{i=bt.MSMediaKeys,r=!(!i||!i.isTypeSupportedWithFeatures)&&"probably"===i.isTypeSupportedWithFeatures("com.microsoft.playready.software",'video/mp4; codecs="avc1,mp4a";features="display-res-x=3840,display-res-y=2160,display-bpc=8"')}catch(t){a.error("hasUltraHdDisplay exception"),r=!0}r||(a.warn("Restricting resolution due screen size",{MaxHeight:t.height}),n.Br.set({reason:"microsoftScreenSize",height:t.height}))}return!r}}}}_esm(e),e.Atb=void 0,t=i(139),o=i(20),s=i(9),t.ZT(n),e.Atb=n},function(t,e,i){var r,a,o,s;_esm(e),t=i(139),r=i(9),a=i(13),o=i(1428),s=i(18),t.ZT(function(t,e){var i,n=r.Fa.get(a.Oc);if(n().$Nb)return i=r.Fa.get(s.$c),new o.MIa(t,e,r.$f,i,n)})},function(t,e,i){var a,l,d,o,p,s;function n(t,e,i,n,r){var f=this;this.j=t,this.Ca=e,this.Aa=i,this.Ga=n,this.Lca={},this.YO={},this.gS=[],this.F9a=1e3,this.ifa=a.JMa,this.Yya=function(){var t=f.j.Gb.value===o.rb.Gc&&f.j.state.value===o.dc.Me&&f.j.L===f.Ca.L;f.$Y?t||(clearInterval(f.$Y),f.$Y=void 0,f.rZ=void 0):t&&(f.$Y=bt.setInterval(f.kec,f.F9a))},this.kec=function(){var t,e,i,n=f.j.Ie.value;null!==(n=null!=(t=(n=n&&n.stream)&&n.height)?t:null)&&0<n&&(t=f.Ga.Tb().ka(s.pa),(e=f.j.qf.oJ())&&(f.rZ&&t-f.rZ.time<2*f.F9a&&n===f.rZ.height&&(i=e-f.rZ.ZNb,f.Ona(n,i),f.eDb(n,i)),f.rZ={time:t,ZNb:e,height:n},f.j.oda&&f.j.oda.Rac(f.Lca)))},this.fta=function(){var r={};return f.YO&&f.gS.forEach(function(t){var i,n,e=f.YO[t];e&&(n=i=0,p.ih(e,function(t,e){n+=p.qk(t),i+=e}),r[t]=n/i)}),r},this.uJ=function(c){var h={};return c.forEach(function(t){h[t]={}}),f.YO&&(l.x2(c),f.gS.forEach(function(t){var i,e,n,r=f.YO[t];if(r){e=i=0,p.ih(r,function(t,e){i+=e}),n=Object.keys(r).map(Number),l.x2(n);for(var a=n.length-1,o=n[a],s=c.length-1;0<=s;s--){for(var u=c[s];u<=o&&0<=a;)(o=r[o])&&(e+=o),o=n[--a];h[u][t]=d.Dp(e/i*100)}}})),h},this.log=this.Aa.jb("DFF",t),this.E6b=r().cOb,this.i1b=r().aOb,this.tcb=r().bOb,this.Ca.vra={fta:this.fta,uJ:this.uJ},t.state.addListener(this.Yya),t.Gb.addListener(this.Yya),t.addEventListener(o.ma.WJ,this.Yya)}_esm(e),e.MIa=void 0,a=i(17),l=i(40),d=i(14),o=i(16),p=i(25),s=i(5),n.prototype.JC=function(t){return!!(t.lower&&t.height>this.tcb)&&t.height>=this.oVb()},n.prototype.Ona=function(t,e){var i=this.Lca[t];i||(this.Lca[t]=i=[],t>this.tcb&&(this.gS.push(t),l.x2(this.gS))),0<e&&!(this.ZZ&&this.ZZ<t)&&(this.ZZ=t),i.push(e),i.length>this.i1b&&i.shift()},n.prototype.eDb=function(t,e){var i=this.YO[t];i||(this.YO[t]=i={}),t=i[e],i[e]=t?t+1:1},n.prototype.oVb=function(){var t,e;if(this.ZZ){for(var i=this.gS.length,n=0;n<i;n++)if((t=this.gS[n])>=this.ZZ&&t<this.ifa&&(e=this.Lca[t])&&this.mHb(this.E6b,e)&&this.ifa!=t)return this.log.warn("Restricting resolution due to high number of dropped frames",{MaxHeight:t}),this.Ca.Br.set({reason:"droppedFrames",height:t}),this.ifa=t;this.ZZ=void 0}return this.ifa},n.prototype.mHb=function(t,e){for(var i=t.length,n=e.length,r=0;r<i;r++)for(var a=(o=t[r])[0],o=o[1],s=0;s<n;s++)if(e[s]>=o&&--a<=0)return!0;return!1},nt.Object.defineProperties(n.prototype,{F9:{configurable:!0,enumerable:!0,get(){return"df"}}}),e.MIa=n},function(t,e,i){var n,r,a;_esm(e),t=i(139),n=i(20),r=i(9),a=i(1430),t.ZT(function(t,e){if(n.config.PZb)return new a.RLa(t,e,r.$f,n.config,r.Da,r.zc)})},function(t,e,i){var n,s,u;function r(t,e,i,n,r,a){var o=this;this.j=t,this.Ca=e,this.Aa=i,this.config=n,this.Da=r,this.zc=a,this.RDb=function(t){!0===t.oldValue&&!1===t.newValue&&(o.log.error("RestartStreaming: UHD key is no longer usable"),o.j.u$b())},this.ifc=function(t){var e,i;o.log.trace("UhdKeyStatus: "+t.oldValue+" -> "+t.newValue),e=null==t?void 0:t.newValue,i=null==t?void 0:t.oldValue,"usable"!==e&&(o.Kac(e,(null==(e=null==t?void 0:t.Vk)?void 0:e.height)||0),"usable"===i&&(t=o.Da.Ef.Ea(o.RZb),o.log.error("UHD KeyStatus unexpectedly changed: "+t.ka(u.pa))))},this.v$a=!1,this.log=this.Aa.jb("KeyStatusStreamFilter",this.j),this.IYa=new s.$b(!1,this.RDb),this.hfc=new s.$b(void 0,this.ifc)}_esm(e),e.RLa=void 0,n=i(223),s=i(70),u=i(5),r.prototype.JC=function(t){return!!(t.Aj&&(this.mdc(),this.IYa.set(this.v$a&&this.FWb),t.lower&&1080<t.height&&!this.IYa.value))},r.prototype.nIb=function(){this.FWb=!0,this.log.trace("HDCP enagement wait is complete: "+this.config.x8a)},r.prototype.Ucb=function(t){var n=this;Object.entries(t).forEach(function(t){var e,i=rt(t);t=i.next().value,i=i.next().value,1080<(t=null!=(e=null==(e=n.QZb)?void 0:e[t])?e:0)&&(n.v$a="usable"===i,n.hfc.set(i,{height:t}))})},r.prototype.mdc=function(){var t,e=this,i=this.Ca.ef;!this.tZb&&n.Ova(i)&&(this.tZb=!0,this.QZb=null==(t=null==i?void 0:i.context)?void 0:t.jba,this.Ucb(i.keyStatuses.value),i.keyStatuses.addListener(function(t){return e.Ucb(t.newValue)}),this.zc.Mj(u.vc(this.config.x8a),function(){return e.nIb()}),this.RZb=this.Da.Ef)},r.prototype.Kac=function(t,e){this.log.error("Restricting resolution due to keyStatus",{keyHeight:e,keyStatus:t}),this.Ca.Br.set({reason:"keyStatus",height:e})},nt.Object.defineProperties(r.prototype,{F9:{configurable:!0,enumerable:!0,get(){return"UhdKeyStatus"}}}),e.RLa=r},function(t,e,i){var o,s;_esm(e),t=i(139),o=i(20),s=i(9),t.ZT(function(t,e){var i,n,r,a={"video-merch-bob-vertical":480,"video-merch-bob-horizontal":384,"video-merch-jaw":720,"show-as-a-row-bob-horizontal":480,"mini-modal-horizontal":720};if(Object.assign(a,o.config.jfc),i=a[e.he],o.config.kfc&&i)return n={},r=s.aj(t,"MediaStreamFilter"),{F9:"uiLabel",JC:function(t){if(t.lower&&t.height>i)return n[t.height]||(n[t.height]=!0,r.warn("Restricting resolution due to uiLabel",{MaxHeight:i,streamHeight:t.height}),e.Br.set({reason:"uiLabel",height:t.height})),!0}}})},function(t,e,i){var n,r,a,o;_esm(e),n=i(20),r=i(17),t=i(4),a=i(9),o=i(174),i=i(34),a.Fa.get(i.nj).register(t.Z.bLa,function(t){n.config.b$&&a.Fa.get(o.RJa).start(),t(r.Vg)})},function(t,e,i){var n,o,s,u,c,h,f,l,d,p;_esm(e),n=i(206),o=i(140),s=i(17),u=i(20),t=i(4),c=i(9),h=i(23),f=i(25),l=i(15),d=i(50),p=i(85),i=i(34),c.Fa.get(i.nj).register(t.Z.jLa,function(t){var r=c.dk("NccpApi"),a=f.gZa(["info","warn","trace","error"]);o.zH.eO.nccp={getEsn:function(){return n.Wk.Fl},getPreferredLanguages:function(){return u.config.Ir.Zza},setPreferredLanguages:function(t){h.Ua(l.isArray(t)&&l.oQ(t[0])),u.config.Ir.Zza=t},queueLogblob:function(t,e,i){var n;t&&e&&(e=e.toLowerCase(),a[e]?(n=c.Fa.get(d.jo),t=c.Fa.get(p.Sz).nv(t,e,i),n.Jc(t)):r.warn("Invalid severity",{severity:e}))},flushLogblobs:function(){c.Fa.get(d.jo).flush(!0)}},t(s.Vg)})},function(t,e,i){var n,a,o,s,u,c,h,f,l,d;_esm(e),t=i(34),e=i(4),n=i(7),a=i(47),o=i(298),s=i(17),u=i(20),c=i(9),h=i(61),f=i(140),l=i(581),d=i(119),c.Fa.get(t.nj).register(e.Z.lLa,function(t){var e,i,r;u.config.QPb&&(e=c.Fa.get(o.Fja),i=c.Fa.get(a.Yq),r=c.Fa.get(n.ob).jb("Test"),f.zH.eO.test={setPboRequestsListener:function(t){return e.cbc(t)},playbacks:h.Fp,getPlayback:function(e){return h.Fp.find(function(t){return t.ga===e})},playgraphManager:{isNextSegmentReady:function(e,t){var i;return void 0!==(null==(i=null==(i=h.Fp.find(function(t){return t.ga===e}))?void 0:i.La)?void 0:i.m$(t))},isNextSegmentBuffering:function(e,t){var i;return null==(i=null==(i=h.Fp.find(function(t){return t.ga===e}))?void 0:i.La)?void 0:i.HP(t).mO}},device:{esn:bt._cad_global.device.Fl,esnPrefix:i.jq,errorPrefix:i.At},log:{info:function(t,e){for(var i=[],n=1;n<arguments.length;++n)i[n-1]=arguments[n];return r.info(t,i)},error:function(t,e){for(var i=[],n=1;n<arguments.length;++n)i[n-1]=arguments[n];return r.error(t,i)},warn:function(t,e){for(var i=[],n=1;n<arguments.length;++n)i[n-1]=arguments[n];return r.warn(t,i)},trace:function(t,e){for(var i=[],n=1;n<arguments.length;++n)i[n-1]=arguments[n];return r.trace(t,i)},log:function(t,e){for(var i=[],n=1;n<arguments.length;++n)i[n-1]=arguments[n];return r.log(t,i)},debug:function(t,e){for(var i=[],n=1;n<arguments.length;++n)i[n-1]=arguments[n];return r.debug(t,i)}},login:function(t,e){return void 0===t||void 0===e?Promise.reject("Invalid email and/or password"):c.Fa.get(l.aPa).Pf(this.log,{},{email:t,password:e}).then(function(){})},getManifest:function(t){var e=c.Fa.get(d.yH);return e.n4a.fetch(t,e)}}),t(s.Vg)})},function(t,e,i){var n,r,a,o,s,u,c;Object.defineProperty(e,"__esModule",{value:!0}),t=i(1436),n=i(20),r=i(61),e=i(7),a=i(9),o=i(50),s=i(115),u=i(23),c=i(15),bt.netflix=bt.netflix||{},u.Ua(!bt.netflix.player),bt.netflix.player={VideoSession:t.aUa,diag:{togglePanel:function(t,e){var i=[];if(!n.config||n.config.r0){switch(t){case"info":i=r.Fp.map(function(t){return t.oda});case"streams":i=r.Fp.map(function(t){return t.rda});case"log":i=[]}i.forEach(function(t){c.rd(e)?e?t.show():t.py():t.toggle()})}},addLogMessageSink:function(e){a.Fa.get(o.jo).addListener({tsc:function(){},K1b:function(t){e({data:t.data})}})}},log:a.dk("Ext"),LogLevel:e.Ck,addLogSink:function(t,e){a.Fa.get(s.lM).aea(t,e)},getVersion:function(){return"6.0038.071.911"},getMostRecentPlaybackDiagnosticGroups:function(){var t;return null==(t=r.BD.Dcb)?void 0:t.C2a.jY()}}},function(t,e,i){var o,s,n,u,c,h;function r(t){var a=n.zH.call(this,t)||this;return a.createPlayer=function(t,e){var i,n,r;return e="number"==typeof(e=void 0===e?{}:e)?{ql:e}:e,i=o.Fa.get(s.xM),n=o.Fa.get(c.nM).create(e.manifest),r=o.Fa.get(u.aka),t=i.jLb(t),t=(i=o.Fa.get(h.Zja).create(t)).nta(),(r=r.z1a(i)).addEpisode({movieId:t.N,playbackParams:a.yZa(e,t),manifest:n}),r},a}Object.defineProperty(e,"__esModule",{value:!0}),e.aUa=void 0,o=i(9),s=i(120),n=i(140),u=i(311),c=i(136),h=i(310),S(r,n.zH),e.aUa=r},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,d,p,b;Object.defineProperty(e,"__esModule",{value:!0}),n=i(140),r=i(206),a=i(17),o=i(40),t=i(4),s=i(9),u=i(171),c=i(23),h=i(15),f=i(14),e=i(34),l=i(59),d=i(80),p=i(164),b=i(170),s.Fa.get(e.nj).register(t.Z.kLa,function(t){var e;function i(t,e){var i=s.ht(t);if(t=i.subarray(32,48),i=i.subarray(0,32),16!=t.length||32!=i.length)throw Error("Bad shared secret");Promise.all([o.sK(f.Fr.importKey("raw",t,{name:"AES-CBC"},!1,["encrypt","decrypt"])),o.sK(f.Fr.importKey("raw",i,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign","verify"]))]).then(function(t){var a,i;e({success:!0,cryptoContext:(a=t[0],i=t[1],{encrypt:function(t,n){var r;t=h.vg(t)?s.MS(t):t,r=f.yD.getRandomValues(new Uint8Array(16)),o.sK(f.Fr.encrypt({name:"AES-CBC",iv:r},a,t)).then(function(t){var e,i;t=new Uint8Array(t),(i=new u.xT(e=[])).pga(2),i.Cnb(r),i.Cnb(t),t=s.RA(e),n({success:!0,encryptedDataAsn1Base64:t})},function(t){c.Ua(!1,"Encrypt error: "+t),n({success:!1})})},decrypt:function(t,e){var i;i=t,(i=new u.xT(s.ht(i))).zC(),i={iv:i.fgb(),lPb:i.fgb()},o.sK(f.Fr.decrypt({name:"AES-CBC",iv:t=i.iv},a,i=i.lPb)).then(function(t){t=new Uint8Array(t),e({success:!0,text:s.R1(t)})},function(t){c.Ua(!1,"Decrypt error: "+t),e({success:!1})})},hmac:function(t,e){t=h.vg(t)?s.MS(t):t,o.sK(f.Fr.sign({name:"HMAC",hash:{name:"SHA-256"}},i,t)).then(function(t){t=new Uint8Array(t),e({success:!0,hmacBase64:s.RA(t)})},function(t){c.Ua(!1,"Hmac error: "+t),e({success:!1})})}})})},function(){e({success:!1})})}((e=s.Fa.get(b.LG)).P9a||e.RB)&&(n.zH.eO.mdx={getEsn:function(){return r.Wk.Fl},createCryptoContext:function(n){var r=s.Fa.get(d.zM);s.Fa.get(p.cU)().then(function(t){var e=t.c_.getStateForMdx(r),i=e.cryptoContext;t=e.masterToken,e=e.userIdToken,t&&e?(c.Ua(i),t=["1",s.RA(JSON.stringify(t.toJSON())),s.RA(JSON.stringify(e.toJSON()))].join(),n({success:!0,cryptoContext:{cTicket:t,encrypt:function(t,e){t=h.vg(t)?s.MS(t):t,i.encrypt(t,{result:function(t){t=s.RA(t),e({success:!0,mslEncryptionEnvelopeBase64:t})},timeout:function(){e({success:!1})},error:function(t){c.Ua(!1,"Encrypt error: "+t),e({success:!1})}})},decrypt:function(t,e){t=s.ht(t),i.decrypt(t,{result:function(t){e({success:!0,text:s.R1(t)})},timeout:function(){e({success:!1})},error:function(t){c.Ua(!1,"Decrypt error: "+t),e({success:!1})}})},hmac:function(t,e){t=h.vg(t)?s.MS(t):t,i.sign(t,{result:function(t){e({success:!0,hmacBase64:s.RA(t)})},timeout:function(){e({success:!1})},error:function(t){c.Ua(!1,"Hmac error: "+t),e({success:!1})}})}}})):(c.Ua(!1,"Must login first"),n({success:!1}))})},createCryptoContextFromSharedSecret:i,getServerEpoch:function(){return l.m8()}}),t(a.Vg)})},function(t,e,r){var a,o,s,u,c;Object.defineProperty(e,"__esModule",{value:!0}),a=r(20),o=r(17),t=r(4),s=r(9),e=r(34),u=r(119),s.Fa.get(e.nj).register(t.Z.gLa,function(t){var e,i,n;a.config.Xt&&(e=s.dk("PlayerPredictionModel"),i=s.Fa.get(u.yH),n=r(1439),e.log=e.trace.bind(e),c=new n({},e,{t0:function(){},M9b:function(){}},i,{FK:function(){}}),bt._cad_global.playerPredictionModel=c,e.info("ppm v2 initialized")),t(o.Vg)})},function(t,e,i){var a,o,s,u,n,h,c;function f(t,e,i,n,r,a){this.L=this.N=t,this.priority=e,this.Qd=i,a&&a.he&&(this.he=a.he),void 0!==n&&(this.kR=n),this.qm=r,this.Fb=a}function r(t,e,i,n,r){s(void 0!==n,"video preparer is null"),s(void 0!==r,"ui preparer is null"),this.H=e||console,this.H=e,this.Ta=i,this.hCb=n,this.YBb=r,this.PWa=h.Wza,this.HN=[],this.pna=!1,this.PU=0,(new c).on(h,"changed",l,this),this.reset()}function l(){this.H.log("config changed"),h.Wza&&(this.PWa=h.Wza),h.b_!==this.vN&&(this.reset(),this.bBa())}a=i(313),o=i(314),e=i(592),s=e.assert,u=e.x4a,n=i(1440),h=i(593).config,c=i(1441).Kf,h.declare({Wza:["ppmConfig",{Iic:{Adb:0,zdb:2,xdb:0,ydb:5,bjb:0},vmc:{Adb:0,zdb:1,xdb:0,ydb:3,bjb:1e3},Vic:{Adb:0,zdb:1,xdb:0,ydb:3,bjb:1e3}}]}),(r.prototype.constructor=r).prototype.reset=function(){this.Vla=!0,this.vN=h.b_,this.H.log("create model: "+h.b_,h.Ghb,h.o0a),h.b_,this.vN=new n(this.H)},r.prototype.bBa=function(){var t,e;if(!1===this.pna){this.pna=!0;for(var i=0;i<this.HN.length;i++)this.H.log("PlayPredictionModel replay: ",JSON.stringify(this.HN[i])),t=this.$0a(this.HN[i]),e=this.p5a(t),this.vN.update(t,e),this.Vla=!1;this.HN=[]}},r.prototype.update=function(t){var e,i,n;this.H.log("PlayPredictionModel update: ",JSON.stringify(t)),t&&t.Nb&&t.Nb[0]&&(!1===this.pna&&this.HN.length<h.h1b&&this.HN.push(t),e=this.$0a(t),i=this.p5a(e),this.H.log("actionType",i),e="mlmodel"==h.b_?this.vN.update(t,i):this.vN.update(e,i),e=this.URb(e,h.GZb||1),this.H.log("PlayPredictionModel.prototype.update() - returnedList: ",JSON.stringify(e)),0===this.PU&&(this.PU=a(),this.Ta&&this.Ta.t0&&this.Ta.t0({bNb:this.PU})),this.Ta&&this.Ta.M9b&&(this.USb(),n=[],e.forEach(function(t){n.push({Wsc:t.N})}),JSON.stringify(t),JSON.stringify(e)),this.hCb.FK(e),this.YBb.FK(e),this.Vla=!1)},r.prototype.USb=function(){a()},r.prototype.t0=function(){this.PU=a(),this.Ta&&this.Ta.t0&&this.Ta.t0({bNb:this.PU})},r.prototype.$0a=function(t){var n,r={},e=t.Nb||[],i=function(t){var e,i={};n=o.NT.name.indexOf(t.context),i.context=0<=n?n:o.NT.Yz,i.rowIndex=t.rowIndex,i.requestId=t.requestId,i.list=[],(t.list||[]).forEach(function(t){e={N:t.N,Qd:t.Qd,index:t.index,kR:t.kR,Fda:t.Fda,list:t.list,Fb:t.Fb},void 0!==t.property&&(n=o.iM.name.indexOf(t.property),e.property=0<=n?n:o.iM.Yz),i.list.push(e)}.bind(this)),r.Nb.push(i)}.bind(this);return void 0!==t.direction&&(n=o.bx.name.indexOf(t.direction),r.direction=0<=n?n:o.bx.Yz),void 0!==t.PX&&(r.mpc=t.PX.rowIndex,r.lpc=t.PX.hIb),r.PX=t.PX,r.Nb=[],e.forEach(i),r},r.prototype.p5a=function(t){var e=t.direction||o.bx.Yz,i=t.PX,n=t.Nb||[];return!0===this.Vla?t=o.Bz.FJa:!0===n.some(this.CWb)?(t=o.Bz.gU,this.gea(n,e,i)):t=n[0].context===o.NT.X4?o.Bz.X4:e===o.bx.uRa||e===o.bx.SLa?o.Bz.PRa:o.Bz.Yz,t},r.prototype.CWb=function(t){return(t.list||[]).some(function(t){return t.property===o.iM.gU||t.property===o.iM.THa})},r.prototype.gea=function(t,e,i){var n,r;this.H.log("reportPlayFocusEvent: ",e,i),n={},r=u(t),this.Ta&&this.Ta.gea&&(n.cpc=a(),n.direction=o.bx.name[e],i&&(n.rowIndex=i.rowIndex,n.p0a=i.hIb),void 0!==r.ml&&(n.requestId=t[r.ml].requestId),this.Ta.gea&&this.Ta.gea(n))},r.prototype.URb=function(t,e){for(var i,n,r=t.length,a=[],o=0;o<r;o++){if(n=t[o],i=Math.floor(o/e)+1,void 0!==n.list)for(var s,u=(s=n.list).length,c=0;c<Math.min(h.fIb,u)&&(s[c].qm=n.qm,this.oYa(s[c],i,a),!(a.length>=h.Dbb));c++);else this.oYa(n,i,a);if(a.length>=h.Dbb)break}return a},r.prototype.oYa=function(e,i,n){var t,r;function a(t){return t.he&&(t.Fb||(t.Fb={}),t.Fb.he=t.he),t.Fb}void 0!==(t=e.Fda)&&t instanceof Array?t.forEach(function(t){void 0!==t.N&&(r=a(t),n.push(new f(t.N,i,t.Qd,t.kR,e.qm,r)))}):void 0!==t&&void 0!==t.N&&(t=e.Fda,r=a(t),n.push(new f(t.N,i,t.Qd,t.kR,e.qm,r))),void 0!==e.N&&(r=a(e),n.push(new f(e.N,i,e.Qd,e.kR,e.qm,r)))},r.prototype.mJ=function(t){var e=this.PWa;return t?e[t]:e},t.exports=r},function(t,e,i){var n,o,s,r,a,u,c,h,f,l;function d(t,e){this.ml=t,this.nn=e}function p(t){this.H=t,this.reset()}n=i(313),o=i(314),e=i(592),s=i(593).config,r=e.MSb,a=e.tSb,u=e.eNb,c=e.G3b,h=e.F3b,f=e.E3b,l=e.x4a,(p.prototype.constructor=p).prototype.reset=function(){this.QWa=void 0,this.wl=[],this.DWa=this.EWa=!1},p.prototype.update=function(t,e){var i;switch(this.wl&&(this.wl=this.wl.filter(this.Tbc,this)),!1===this.EWa&&0<(i=r(t.Nb).slice(0,s.S1a)).length&&(this.hK(i,o.Gz.cm),this.EWa=!0,this.wl=this.IL(i.concat(this.wl))),!1===this.DWa&&(0<(i=a(t.Nb).slice(0,s.S1a)).length&&(this.hK(i,o.Gz.cm),this.DWa=!0,this.wl=this.IL(i.concat(this.wl)))),e){case o.Bz.FJa:e=this.ZVb(t);break;case o.Bz.PRa:e=this.iWb(t);break;case o.Bz.X4:e=this.jWb(t);break;case o.Bz.gU:e=this.dWb(t);break;default:e=this.WVb(t)}return this.QWa=t,e},p.prototype.ZVb=function(t){return t=c(t.Nb,s.Ghb,s.o0a),this.hK(t,o.Gz.cm),this.wl=this.IL(this.wl.concat(t))},p.prototype.iWb=function(t){var e;return this.H.log("handleScrollHorizontal"),e=t.Nb,t=c(e,s.Hhb,s.q0a),(e=e[u(e,this.QWa.Nb)].list.slice(0,s.D$b)).concat(t),this.hK(e,o.Gz.Kka),this.IL(e.concat(this.wl))},p.prototype.hK=function(t,e){t.forEach(function(t){(void 0===t.uE||t.uE<e)&&(t.uE=e),void 0===t.uS&&(t.uS=n()),void 0===t.qm&&(t.qm=n())})},p.prototype.jWb=function(t){return this.H.log("handleSearch"),t=h(t.Nb,s.bac),this.hK(t,o.Gz.QRa),this.wl=t.concat(this.wl),this.wl=this.IL(this.wl)},p.prototype.dWb=function(t){var e,i,n,r,a;if(this.H.log("handlePlayFocus: ",s.OY),e=t.direction,i=t.Nb,t=[],void 0!==(n=l(i)).ml)switch(t.push(n),e){case o.bx.uRa:for(e=1;e<s.OY;e++)t.push(new d(n.ml,n.nn+e));t.push(new d(n.ml-1,n.nn)),t.push(new d(n.ml+1,n.nn));break;case o.bx.SLa:for(e=1;e<s.OY;e++)t.push(new d(n.ml,n.nn-e));t.push(new d(n.ml-1,n.nn)),t.push(new d(n.ml+1,n.nn));break;case o.bx.mwb:for(t.push(new d(n.ml-1,n.nn)),e=1;e<=s.OY/2;e++)t.push(new d(n.ml,n.nn+e)),t.push(new d(n.ml,n.nn-e));break;case o.bx.Mqb:for(t.push(new d(n.ml+1,n.nn)),e=1;e<=s.OY/2;e++)t.push(new d(n.ml,n.nn+e)),t.push(new d(n.ml,n.nn-e))}return r=[],t.forEach(function(t){void 0!==(a=f(i,t.ml,t.nn))&&r.push(a)}),this.hK(r,o.Gz.Kka),this.IL(r.concat(this.wl))},p.prototype.WVb=function(t){return this.H.log("ModelOne: handleDefaultCase"),t=c(t.Nb,s.Hhb,s.q0a),this.hK(t,o.Gz.Kka),this.IL(t.concat(this.wl))},p.prototype.Tbc=function(t){return t.uE==o.Gz.cm|t.uE==o.Gz.QRa&n()-t.uS<s.XWb},p.prototype.IL=function(t){for(var e,i,n=[],r={},a=0,o=t.length,s=0;s<o;s++)e=t[s].N,i=t[s],!1==e in r?(n.push(i),r[e]=a,a++):(e=n[r[e]],i.qm<e.qm&&(e.qm=i.qm),i.uE>e.uE&&(e.uE=i.uE),i.uS>e.uS&&(e.uS=i.uS));return n},t.exports=p},function(t,e,i){t.exports={EventEmitter:i(1442),Kf:i(1443)}},function(t){function e(t,e){var i;if(void 0===e||"function"!=typeof e||"string"!=typeof t)throw new TypeError("EventEmitter: addEventListener requires a string and a function as arguments");return void 0===this.Ld?(this.Ld={},this.Ld[t]=[e],!0):void 0===(i=this.Ld[t])?(this.Ld[t]=[e],!0):i.indexOf(e)<0&&(i.push(e),!0)}function i(t,e){return!!(t=this.Ld?this.Ld[t]:void 0)&&(t.forEach(function(t){t(e)}),!0)}t.exports={addEventListener:e,on:e,removeEventListener:function(t,e){var i;if(void 0===e||"function"!=typeof e||"string"!=typeof t)throw new TypeError("EventEmitter: removeEventListener requires a string and a function as arguments");return void 0!==this.Ld&&(void 0!==(i=this.Ld[t])&&(!((e=i.indexOf(e))<0)&&(1===i.length?delete this.Ld[t]:i.splice(e,1),!0)))},gb:i,emit:i,removeAllListeners:function(t){return this.Ld&&(void 0===t?delete this.Ld:delete this.Ld[t]),this}}},function(t){function e(t){this.listeners=[],this.console=t}(e.prototype.constructor=e).prototype.on=e.prototype.addEventListener=function(t,e,i,n){if(i=n?i.bind(n):i,n=!1,t){if(this.console&&(i=function(t,e,i,n){t.trace(":",i,":",n),e(n)}.bind(null,this.console,i,e)),"function"==typeof t.addEventListener)n=t.addEventListener(e,i);else{if("function"!=typeof t.addListener)throw Error("Emitter does not have a function to add listeners for '"+e+"'");n=t.addListener(e,i)}this.listeners.push([t,e,i])}return n},e.prototype.clear=function(){var t=this.listeners.length;this.listeners.forEach(function(t){var e=t[0],i=t[1];t=t[2],"function"==typeof e.removeEventListener?e.removeEventListener(i,t):"function"==typeof e.removeListener&&e.removeListener(i,t)}),this.listeners=[],this.console&&this.console.trace("removed",t,"listener(s)")},t.exports=e}],m={},H.Bqc=b,H.c=m,H.d=function(t,e,i){H.y3b(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},H.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},H.t=function(e,t){var i;if(1&t&&(e=H(e)),8&t||4&t&&"object"==typeof e&&e&&e.__esModule)return e;if(i=Object.create(null),H.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)H.d(i,n,function(t){return e[t]}.bind(null,n));return i},H.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return H.d(e,"a",e),e},H.y3b=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},H.p="",H(H.I$b=594)}.call(bt)}(window);